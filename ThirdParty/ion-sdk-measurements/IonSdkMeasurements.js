/**
 * @license
 * Cesium Analytics SDK
 * Version 1.128
 *
 * Copyright 2012-2020 Cesium GS, Inc.
 * All rights reserved.
 *
 * Patents US9153063B2 US9865085B1 US9449424B2 US10592242
 * Patents pending US15/829,786 US16/850,266 US16/851,958
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for open-source Cesium license.
 */

var IonSdkMeasurements=(()=>{var jn=Object.create;var ei=Object.defineProperty;var Wn=Object.getOwnPropertyDescriptor;var Yn=Object.getOwnPropertyNames;var $n=Object.getPrototypeOf,Gn=Object.prototype.hasOwnProperty;var Zn=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),qn=(t,i)=>{for(var o in i)ei(t,o,{get:i[o],enumerable:!0})},Hi=(t,i,o,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let h of Yn(i))!Gn.call(t,h)&&h!==o&&ei(t,h,{get:()=>i[h],enumerable:!(l=Wn(i,h))||l.enumerable});return t};var rt=(t,i,o)=>(o=t!=null?jn($n(t)):{},Hi(i||!t||!t.__esModule?ei(o,"default",{value:t,enumerable:!0}):o,t)),Jn=t=>Hi(ei({},"__esModule",{value:!0}),t);var nt=Zn((Os,Wi)=>{Wi.exports=Cesium});var Es={};qn(Es,{AngleUnits:()=>vt,AreaMeasurement:()=>ai,AreaMeasurementDrawing:()=>ri,AreaUnits:()=>Et,AxisLinePrimitive:()=>Pe,ClippingPlanePrimitive:()=>$e,ClippingPlanesEditor:()=>Qi,DistanceMeasurement:()=>Xe,DistanceUnits:()=>Dt,DrawingMode:()=>gt,EditorMode:()=>Ce,HeightMeasurement:()=>li,HorizontalMeasurement:()=>ui,HorizontalMeasurementDrawing:()=>ci,HorizontalPolylineDrawing:()=>Te,Measure:()=>Si,MeasureUnits:()=>ft,MeasureViewModel:()=>wi,Measurement:()=>Ct,MeasurementMouseHandler:()=>fi,MeasurementSettings:()=>ot,PointMeasurement:()=>mi,PolygonDrawing:()=>Me,PolygonPrimitive:()=>oi,PolylineDrawing:()=>$t,PolylineMeasurement:()=>yi,PolylineMeasurementDrawing:()=>gi,PolylinePrimitive:()=>Ut,RotationEditor:()=>xi,ScaleEditor:()=>Pi,SvgPathBindingHandler:()=>ii,TransformAxis:()=>ut,TransformEditor:()=>Hn,TransformEditorViewModel:()=>Ei,TranslationEditor:()=>Ci,VerticalMeasurement:()=>vi,VisibilityState:()=>ni,VolumeUnits:()=>Nt,createDomNode:()=>Ye,filterPickForMeasurement:()=>Pt,getScreenSpaceScalingMatrix:()=>he,getSlope:()=>pi,getWidgetOrigin:()=>me,getWorldPosition:()=>jt,knockout:()=>wt,knockout_3_5_1:()=>Ge,knockout_es5:()=>hi,viewerMeasureMixin:()=>Vn});var Vi="http://www.w3.org/2000/svg",ji="cesium-svgPath-svg",Xn={register:function(t){t.bindingHandlers.cesiumSvgPath={init:function(i,o){let l=document.createElementNS(Vi,"svg:svg");l.setAttribute("class",ji);let h=document.createElementNS(Vi,"path");return l.appendChild(h),t.virtualElements.setDomNodeChildren(i,[l]),t.computed({read:function(){let b=t.unwrap(o());h.setAttribute("d",t.unwrap(b.path));let C=t.unwrap(b.width),S=t.unwrap(b.height);l.setAttribute("width",C),l.setAttribute("height",S),l.setAttribute("viewBox",`0 0 ${C} ${S}`),b.css&&l.setAttribute("class",`${ji} ${t.unwrap(b.css)}`)},disposeWhenNodeIsRemoved:i}),{controlsDescendantBindings:!0}}},t.virtualElements.allowedBindings.cesiumSvgPath=!0}},ii=Xn;var Fe=rt(nt(),1);function qe(){this.states=new Fe.ManagedArray,this.count=0}qe.prototype.hidePrimitiveCollection=function(t,i){let o=t.length,l=i??Fe.defined;for(let h=0;h<o;++h){let b=t.get(h);if(b instanceof Fe.PrimitiveCollection){this.hidePrimitiveCollection(b,l);continue}this.states.push(b.show),!l(b)&&(b.show=!1)}};qe.prototype.restorePrimitiveCollection=function(t){let i=t.length;for(let o=0;o<i;++o){let l=t.get(o);if(l instanceof Fe.PrimitiveCollection){this.restorePrimitiveCollection(l);continue}l.show=this.states.get(this.count++)}};qe.prototype.hide=function(t,i){this.states.length=0,this.hidePrimitiveCollection(t.primitives,i),this.hidePrimitiveCollection(t.groundPrimitives,i)};qe.prototype.restore=function(t){this.count=0,this.restorePrimitiveCollection(t.primitives),this.restorePrimitiveCollection(t.groundPrimitives)};var ni=qe;var Yi=rt(nt(),1);function Qn(t){Yi.Check.typeOf.string("html",t);let i=document.createElement("div");return i.innerHTML=t,i.children.length===1?i.removeChild(i.firstChild):i}var Ye=Qn;var Wt=rt(nt(),1),Kn=new Wt.Cartesian3,to=new Wt.Cartesian2,eo=new Wt.Cartesian3,io=new Wt.Cartesian3;function no(t,i,o){let l=t.context,h=t.camera.positionWC,b=Wt.Cartesian3.distance(i,h),C=l.drawingBufferWidth,S=l.drawingBufferHeight;return t.camera.frustum.getPixelDimensions(C,S,b,t.pixelRatio,o)}function oo(t,i,o,l,h){let b=1,C=1,S=1,O;return t.x>0&&(O=t.x*o.x,b=Math.min(O,i.x)/l.x),t.y>0&&(O=t.y*o.y,C=Math.min(O,i.y)/l.y),S=(b+C)/2,Wt.Cartesian3.fromElements(b,C,S,h)}function he(t,i,o,l,h){if(t.x<0||t.y<0)throw new Wt.DeveloperError(`pixelSize={${t.x}, ${t.y}}, both components must be >= 0`);if(i.x<0||i.y<0)throw new Wt.DeveloperError(`maximumSizeInMeters={${i.x}, ${i.y}}, both components must be >= 0`);let b=Wt.Matrix4.getTranslation(l,Kn),C=no(o,b,to),S=Wt.Matrix4.getScale(l,eo),O=oo(t,i,C,S,io);return Wt.Matrix4.multiplyByScale(l,O,h)}var Vt=rt(nt(),1);var $i=new Vt.Cartesian3,ro=new Vt.Ray,Gi=new ni;function so(t,i,o,l){Vt.Check.defined("scene",t),Vt.Check.defined("mousePosition",i),l=(0,Vt.defined)(l)?l:new Vt.Cartesian3;let h;if(t.pickPositionSupported){let C=o??Vt.defined;Gi.hide(t,C);let S=t.pick(i,1,1);if(Gi.restore(t),C(S)&&(h=t.pickPosition(i,$i),(0,Vt.defined)(h)))return Vt.Cartesian3.clone(h,l)}if(!(0,Vt.defined)(t.globe))return;let b=t.camera.getPickRay(i,ro);if(h=t.globe.pick(b,t,$i),(0,Vt.defined)(h))return Vt.Cartesian3.clone(h,l)}var jt=so;var D=rt(nt(),1);var ao=D.Color.WHITE,lo=D.Color.RED.withAlpha(.2),co=D.Color.CYAN.withAlpha(.2),uo=D.Color.WHITE.withAlpha(.2),ho=new D.Cartesian2(100,100),fo=new D.Cartesian2(1/0,1/0),po=new D.Cartesian2(50,50);function mo(t,i,o){let l;return D.Matrix4.equals(i,D.Matrix4.IDENTITY)?l=D.Matrix4.clone(D.Matrix4.IDENTITY,t._modelMatrix):l=D.PlaneGeometryUpdater.createPrimitiveMatrix(t._initialPlane,t._dimensions,i,t._modelMatrix),(t._pixelSize.x>0||t._pixelSize.y>0)&&(l=he(t._pixelSize,t._maximumSizeInMeters,o,l,l)),l}var go=new D.Plane(new D.Cartesian3(1,0,0),0);function _o(t){let i=D.Plane.transform(t._initialPlane,t._localTransform,go);t._clippingPlane.normal=i.normal,t._clippingPlane.distance=i.distance}function Be(t){t=t??D.Frozen.EMPTY_OBJECT;let i=t.clippingPlane,o=t.transform,l=D.Cartesian2.clone(t.size??po);D.Check.defined("options.clippingPlane",i),D.Check.defined("options.transform",o);let h=t.localTransform??D.Matrix4.clone(D.Matrix4.IDENTITY);this._worldTransform=D.Matrix4.multiplyTransformation(o,h,new D.Matrix4),this._worldNormalTransform=D.Matrix4.inverseTranspose(this._worldTransform,new D.Matrix4),this._normalWC=D.Matrix4.multiplyByPointAsVector(this._worldNormalTransform,i.normal,new D.Cartesian3),this._normalWC=D.Cartesian3.normalize(this._normalWC,this._normalWC),this.show=t.show??!0,this._disableDepthFail=t.disableDepthFail??!1,this._outlineColor=t.outlineColor??ao,this._frontColor=t.frontColor??lo,this._backColor=t.backColor??co,this._highlightColor=t.highlightColor??uo,this._pixelSize=D.Cartesian2.clone(t.pixelSize??ho),this._maximumSizeInMeters=D.Cartesian2.clone(t.maximumSizeInMeters??fo),this._initialPlane=new D.Plane(i.normal,i.distance),this._clippingPlane=i,this._backPrimitiveId={name:"back",plane:this},this._frontPrimitiveId={name:"front",plane:this},this._primitiveOutlineId=(0,D.createGuid)(),this._modelMatrix=D.Matrix4.IDENTITY.clone(),this._originalDistance=i.distance,this._transform=o,this._initialLocalTransform=D.Matrix4.clone(h),this._localTransform=h,this._centerPositionScratch=new D.Cartesian3,this._highlighted=!1,this._dimensions=l,this._backPrimitive=void 0,this._frontPrimitive=void 0,this._outlinePrimitive=void 0,this._update=!0}Object.defineProperties(Be.prototype,{size:{get:function(){return this._dimensions}},clippingPlane:{get:function(){return this._clippingPlane}},transform:{get:function(){return this._transform}},localTransform:{get:function(){return this._localTransform}},centerPosition:{get:function(){let t=this._centerPositionScratch;return D.Cartesian3.clone(D.Cartesian3.ZERO,t),D.Matrix4.multiplyByPoint(this._modelMatrix,t,t)}},frontColor:{get:function(){return this._highlighted?this._highlightColor:this._frontColor}},backColor:{get:function(){return this._highlighted?this._highlightColor:this._backColor}},pixelSize:{get:function(){return this._pixelSize}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters}}});Be.prototype.highlight=function(t){if(this._highlighted=t,(0,D.defined)(this._backPrimitive)){let i,o=this.backColor,l=this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).color;l[0]=D.Color.floatToByte(o.red),l[1]=D.Color.floatToByte(o.green),l[2]=D.Color.floatToByte(o.blue),l[3]=D.Color.floatToByte(o.alpha),this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).color=l,this._disableDepthFail||(i=this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).depthFailColor,i[0]=D.Color.floatToByte(o.red),i[1]=D.Color.floatToByte(o.green),i[2]=D.Color.floatToByte(o.blue),i[3]=D.Color.floatToByte(o.alpha),this._backPrimitive.getGeometryInstanceAttributes(this._backPrimitiveId).depthFailColor=i),o=this.frontColor,l=this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).color,l[0]=D.Color.floatToByte(o.red),l[1]=D.Color.floatToByte(o.green),l[2]=D.Color.floatToByte(o.blue),l[3]=D.Color.floatToByte(o.alpha),this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).color=l,this._disableDepthFail||(i=this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).depthFailColor,i[0]=D.Color.floatToByte(o.red),i[1]=D.Color.floatToByte(o.green),i[2]=D.Color.floatToByte(o.blue),i[3]=D.Color.floatToByte(o.alpha),this._frontPrimitive.getGeometryInstanceAttributes(this._frontPrimitiveId).depthFailColor=i)}};Be.prototype.reset=function(){this._clippingPlane.normal=D.Cartesian3.clone(this._initialPlane.normal,this._clippingPlane.normal),this._clippingPlane.distance=this._initialPlane.distance,this._localTransform=D.Matrix4.clone(this._initialLocalTransform,this._localTransform),this._update=!0};Be.prototype.update=function(t){if(!this.show)return;let i=this._clippingPlane;this._worldTransform=D.Matrix4.multiplyTransformation(this._transform,this._localTransform,this._worldTransform),this._worldNormalTransform=D.Matrix4.inverseTranspose(this._worldTransform,this._worldNormalTransform),this._normalWC=D.Matrix4.multiplyByPointAsVector(this._worldNormalTransform,i.normal,this._normalWC),D.Cartesian3.normalize(this._normalWC,this._normalWC);let o=mo(this,this._worldTransform,t);if(_o(this),this._update){this._update=!1,this._frontPrimitive=this._frontPrimitive&&this._frontPrimitive.destroy(),this._backPrimitive=this._backPrimitive&&this._backPrimitive.destroy(),this._outlinePrimitive=this._outlinePrimitive&&this._outlinePrimitive.destroy();let l,h,b,C;this._disableDepthFail||(l=D.ColorGeometryInstanceAttribute.fromColor(this.backColor),h=new D.PerInstanceColorAppearance({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0}}}),b=D.ColorGeometryInstanceAttribute.fromColor(this.frontColor),C=new D.PerInstanceColorAppearance({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0,face:D.WebGLConstants.FRONT}}})),this._backPrimitive=new D.Primitive({geometryInstances:new D.GeometryInstance({geometry:D.PlaneGeometry.createGeometry(new D.PlaneGeometry),attributes:{color:D.ColorGeometryInstanceAttribute.fromColor(this.backColor),depthFailColor:l},id:this._backPrimitiveId}),appearance:new D.PerInstanceColorAppearance({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0}}}),depthFailAppearance:h,asynchronous:!1}),this._frontPrimitive=new D.Primitive({geometryInstances:new D.GeometryInstance({geometry:D.PlaneGeometry.createGeometry(new D.PlaneGeometry),attributes:{color:D.ColorGeometryInstanceAttribute.fromColor(this.frontColor),depthFailColor:b},id:this._frontPrimitiveId}),appearance:new D.PerInstanceColorAppearance({flat:!0,closed:!1,translucent:!0,renderState:{cull:{enabled:!0,face:D.WebGLConstants.FRONT}}}),depthFailAppearance:C,asynchronous:!1}),this._outlinePrimitive=new D.Primitive({geometryInstances:new D.GeometryInstance({geometry:D.PlaneOutlineGeometry.createGeometry(new D.PlaneOutlineGeometry),attributes:{color:D.ColorGeometryInstanceAttribute.fromColor(this._outlineColor)},id:this._primitiveOutlineId}),appearance:new D.PerInstanceColorAppearance({flat:!0,translucent:!1,renderState:{lineWidth:1}}),asynchronous:!1})}this._backPrimitive.modelMatrix=o,this._frontPrimitive.modelMatrix=o,this._outlinePrimitive.modelMatrix=o,this._backPrimitive.update(t),this._frontPrimitive.update(t),this._outlinePrimitive.update(t)};Be.prototype.isDestroyed=function(){return!1};Be.prototype.destroy=function(){return(0,D.defined)(this._backPrimitive)&&this._backPrimitive.destroy(),(0,D.defined)(this._frontPrimitive)&&this._frontPrimitive.destroy(),(0,D.defined)(this._outlinePrimitive)&&this._outlinePrimitive.destroy(),(0,D.destroyObject)(this)};var $e=Be;var A=rt(nt(),1);var Xi=new A.Plane(A.Cartesian3.UNIT_X,0),yo=new A.Cartesian3,vo=new A.Cartesian3,wo=new A.Cartesian3,bo=new A.Matrix4,So=new A.Matrix4,Zi=new A.Cartesian3,qi=new A.Cartesian3,xo=new A.Cartesian3,Po=new A.Cartesian3,Co=new A.Cartesian3,Ji=new A.Ray;function Eo(t,i,o,l){let h=A.Plane.clone(o,Xi);return h.distance=0,h=A.Plane.transform(h,t,h),A.Cartesian3.subtract(i,A.Cartesian3.multiplyByScalar(h.normal,A.Plane.getPointDistance(h,i),yo),l)}function To(t,i,o){let l=A.Plane.clone(o,Xi);l.distance=0,l=A.Plane.transform(l,t,l),o.distance=-A.Plane.getPointDistance(l,i)}function Yt(t){let i=t.scene,o=t.clippingPlanes;A.Check.defined("options.scene",i),A.Check.defined("options.clippingPlanes",o);let l=i.primitives.add(new A.PrimitiveCollection),h=this;this._removeAddEventListener=o.planeAdded.addEventListener(function(){h._addPlane()},this),this._removeRemoveEventListener=o.planeRemoved.addEventListener(Yt.prototype._removePlane,this),this._planeSizeInMeters=t.planeSizeInMeters,this._scene=i,this._sseh=new A.ScreenSpaceEventHandler(i.canvas),this._clippingPlanes=o,this._primitives=l,this._origin=t.origin,this._movePlanesToOrigin=t.movePlanesToOrigin??!0,this._primitiveOptions=t.primitiveOptions??A.Frozen.EMPTY_OBJECT,this._active=!1,this._pickedPlane=void 0,this._hoverPlane=void 0,this._draggingPlane=new A.Plane(A.Cartesian3.UNIT_X,0),this._pixelSize=t.pixelSize,this._maximumSizeInMeters=t.maximumSizeInMeters,this._target=void 0,this._transform=A.Matrix4.clone(A.Matrix4.IDENTITY),this._createPlanes()}Object.defineProperties(Yt.prototype,{active:{get:function(){return this._active}},scene:{get:function(){return this._scene}},clippingPlanes:{get:function(){return this._clippingPlanes}}});Yt.prototype.activate=function(){this._active=!0;let t=this._primitives;for(let o=0;o<t.length;o++)t.get(o).show=!0;let i=this._sseh;i.setInputAction(this._handleLeftDown.bind(this),A.ScreenSpaceEventType.LEFT_DOWN),i.setInputAction(this._handleLeftUp.bind(this),A.ScreenSpaceEventType.LEFT_UP),i.setInputAction(this._handleMouseMove.bind(this),A.ScreenSpaceEventType.MOUSE_MOVE)};Yt.prototype.deactivate=function(){let t=this._primitives;for(let o=0;o<t.length;o++)t.get(o).show=!1;let i=this._sseh;i.removeInputAction(A.ScreenSpaceEventType.LEFT_DOWN),i.removeInputAction(A.ScreenSpaceEventType.LEFT_UP),i.removeInputAction(A.ScreenSpaceEventType.MOUSE_MOVE),this._active=!1};Yt.prototype._createPlanes=function(){let t=this._clippingPlanes,i=t.owner;if(typeof i>"u"){let l=this._scene.preRender.addEventListener(()=>{l(),this.isDestroyed()||this._createPlanes()});return}this._target=i;let o=this._origin;if(i instanceof A.Cesium3DTileset){this._transform=i.clippingPlanesOriginMatrix,(0,A.defined)(o)||(this._origin=A.Cartesian3.clone(i.boundingSphere.center));for(let l=0;l<t.length;l++)this._addPlane(t.get(l))}else if(i instanceof A.Model){let l=()=>{this._transform=i.modelMatrix,(0,A.defined)(o)||(this._origin=A.Cartesian3.clone(i.boundingSphere.center));for(let b=0;b<t.length;b++)this._addPlane(t.get(b))};if(i.ready){l();return}let h=i.readyEvent.addEventListener(()=>{h(),!this.isDestroyed()&&l()})}else if(i instanceof A.GlobeSurfaceTileProvider){this._transform=t.modelMatrix,(0,A.defined)(o)||(this._origin=A.Matrix4.getTranslation(t.modelMatrix,new A.Cartesian3));for(let l=0;l<t.length;l++)this._addPlane(t.get(l));return}else throw new A.DeveloperError("ClippingPlanesEditor is incompatible with the object owning options.clippingPlanes")};Yt.prototype._addPlane=function(t){let i=this,o=this._movePlanesToOrigin,l=this._primitives,h,b=this._planeSizeInMeters,C=this._pixelSize,S=this._maximumSizeInMeters,O=this._primitiveOptions,R=i._target,V=i._origin,Z=i._transform,q=A.Matrix4.inverse(Z,bo);A.Matrix4.equals(Z,A.Matrix4.IDENTITY)?(h=V,o&&(t.distance=0)):(h=Eo(Z,V,t,vo),o&&To(Z,V,t)),(0,A.defined)(b)||(b=i._computePlaneSize(R));let Q=A.Matrix4.multiplyByPoint(q,h,Co),e=A.Matrix4.fromTranslation(Q);l.add(new $e({transform:Z,localTransform:e,clippingPlane:t,show:i._active,size:b,disableDepthFail:O.disableDepthFail,outlineColor:O.outlineColor,frontColor:O.frontColor,backColor:O.backColor,highlightColor:O.highlightColor,pixelSize:C,maximumSizeInMeters:S}))};Yt.prototype._computePlaneSize=function(t){if(t instanceof A.GlobeSurfaceTileProvider)return new A.Cartesian2(200,200);let i=t.boundingSphere.radius*.5;return new A.Cartesian2(i,i)};Yt.prototype._removePlane=function(t){let i=this._primitives;for(let o=0;o<i.length;o++){let l=i.get(o);if(l.clippingPlane===t){i.remove(l);break}}};Yt.prototype._handleLeftDown=function(t){let i=this._scene;if(i.mode!==A.SceneMode.SCENE3D)return;let o=i.pick(t.position);if((0,A.defined)(o)&&(0,A.defined)(o.id)&&o.id.plane instanceof $e){let l=o.id.plane;l.highlight(!0);let h=l._normalWC,b=A.Cartesian3.cross(h,i.camera.directionWC,wo);b=A.Cartesian3.cross(h,b,b),b=A.Cartesian3.normalize(b,b),this._draggingPlane=A.Plane.fromPointNormal(l.centerPosition,b,this._draggingPlane),i.screenSpaceCameraController.enableInputs=!1,this._pickedPlane=l,i.requestRenderMode&&i.requestRender()}};Yt.prototype._handleLeftUp=function(){let t=this._scene;if(t.mode!==A.SceneMode.SCENE3D)return;let i=this._pickedPlane;(0,A.defined)(i)&&(i.highlight(!1),this._pickedPlane=void 0,t.requestRenderMode&&t.requestRender()),t.screenSpaceCameraController.enableInputs=!0};Yt.prototype._handleMouseMove=function(t){let i=this._scene;if(i.mode!==A.SceneMode.SCENE3D)return;let o=this._pickedPlane;if((0,A.defined)(o)){let l=this._draggingPlane,h=i.camera.getPickRay(t.startPosition,Ji),b=A.IntersectionTests.rayPlane(h,l,Zi);if(!(0,A.defined)(b))return;h=i.camera.getPickRay(t.endPosition,Ji);let C=A.IntersectionTests.rayPlane(h,l,qi);if(!(0,A.defined)(C))return;let S=A.Cartesian3.subtract(b,o.centerPosition,Zi);S=A.Cartesian3.projectVector(S,o._normalWC,S);let O=A.Cartesian3.subtract(C,o.centerPosition,qi);O=A.Cartesian3.projectVector(O,o._normalWC,O);let R=A.Cartesian3.subtract(O,S,xo),V=A.Matrix4.inverse(o.transform,So),Z=A.Matrix4.multiplyByPointAsVector(V,R,Po);A.Matrix4.multiplyByTranslation(o.localTransform,Z,o.localTransform),i.requestRenderMode&&i.requestRender()}else{(0,A.defined)(this._hoverPlane)&&this._hoverPlane.highlight(!1);let l=i.pick(t.endPosition);if((0,A.defined)(l)&&(0,A.defined)(l.id)&&l.id.plane instanceof $e){let h=l.id.plane;h.highlight(!0),this._hoverPlane=h}}};Yt.prototype.reset=function(){let t=this._primitives;for(let i=0;i<t.length;i++)t.get(i).reset()};Yt.prototype.isDestroyed=function(){return!1};Yt.prototype.destroy=function(){return this.deactivate(),this._sseh.destroy(),this._scene.primitives.remove(this._primitives),this._removeAddEventListener(),this._removeRemoveEventListener(),(0,A.destroyObject)(this)};var Qi=Yt;var Mo={BeforeDraw:0,Drawing:1,AfterDraw:2},gt=Object.freeze(Mo);var $=rt(nt(),1);var yt=rt(nt(),1);var Y=rt(nt(),1);function Mi(t,i,o){return(0,Y.defined)(t)?(o=(0,Y.defined)(o)?o:{},o.color=i,new Y.PolylineMaterialAppearance({material:Y.Material.fromType(t,o)})):new Y.PolylineColorAppearance}function Ue(t){t=t??Y.Frozen.EMPTY_OBJECT,this.show=t.show??!0,this._id=(0,Y.defined)(t.id)?t.id:(0,Y.createGuid)(),this._ellipsoid=t.ellipsoid??Y.Ellipsoid.WGS84,this._width=t.width??3,this._color=Y.Color.clone(t.color??Y.Color.WHITE),this._depthFailColor=Y.Color.clone(t.depthFailColor??this._color),this._positions=t.positions??[],this._materialType=t.materialType,this._depthFailMaterialType=t.depthFailMaterialType??this._materialType,this._uniforms=t.uniforms??void 0,this._depthFailUniforms=t.depthFailUniforms??this._uniforms,this._loop=t.loop??!1,this._clampToGround=t.clampToGround??!1,this._classificationType=t.classificationType??Y.ClassificationType.BOTH,this._allowPicking=t.allowPicking??!0,this._boundingSphere=new Y.BoundingSphere,this._primitive=void 0,this._update=!0}Object.defineProperties(Ue.prototype,{positions:{get:function(){return this._positions},set:function(t){this._positions=t,this._update=!0}},color:{get:function(){return this._color},set:function(t){if(!Y.Color.equals(this._color,t)&&(this._color=Y.Color.clone(t,this._color),(0,Y.defined)(this._primitive))){let i=this._primitive.getGeometryInstanceAttributes(this._id).color;i=t.toBytes(i),this._primitive.getGeometryInstanceAttributes(this._id).color=i}}},depthFailColor:{get:function(){return this._depthFailColor},set:function(t){if(!Y.Color.equals(this._depthFailColor,t)&&(this._depthFailColor=Y.Color.clone(t,this._depthFailColor),(0,Y.defined)(this._primitive)&&!this._clampToGround)){let i=this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor;i=t.toBytes(i),this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor=i}}},materialType:{get:function(){return this._materialType},set:function(t){t!==this._materialType&&(this._materialType=t,this._update=!0)}},depthFailMaterialType:{get:function(){return this._depthFailMaterialType},set:function(t){t!==this._depthFailMaterialType&&(this._depthFailMaterialType=t,this._update=!0)}},uniforms:{get:function(){return this._uniforms},set:function(t){if(t===this._uniforms||(this._uniforms=t,!(0,Y.defined)(t)||!(0,Y.defined)(this._primitive)))return;let i=this._primitive.appearance.material.uniforms;for(let o in t)t.hasOwnProperty(o)&&(i[o]=t[o])}},depthFailUniforms:{get:function(){return this._depthFailUniforms},set:function(t){if(t===this._depthFailUniforms||(this._depthFailUniforms=t,!(0,Y.defined)(t)||!(0,Y.defined)(this._primitive)))return;let i=this._primitive.depthFailAppearance.material.uniforms;for(let o in t)t.hasOwnProperty(o)&&(i[o]=t[o])}},id:{get:function(){return this._id}},boundingVolume:{get:function(){return this._boundingSphere}},width:{get:function(){return this._width}},ellipsoid:{get:function(){return this._ellipsoid}},loop:{get:function(){return this._loop}},clampToGround:{get:function(){return this._clampToGround}},classificationType:{get:function(){return this._classificationType},set:function(t){this._classificationType=t,this._update=!0}},allowPicking:{get:function(){return this._allowPicking}}});Ue.prototype.update=function(t){if(!this.show)return;let i=this._positions;if(!(0,Y.defined)(i)||i.length<2){this._primitive=this._primitive&&this._primitive.destroy();return}this._update&&(this._update=!1,this._primitive=this._primitive&&this._primitive.destroy(),this._primitive=this._clampToGround?this._createGroundPolyline():this._createPolyline(),this._boundingSphere=Y.BoundingSphere.fromPoints(i,this._boundingSphere)),this._primitive.update(t)};Ue.prototype._createPolyline=function(){let t=this._positions;return this._loop&&t.length>2&&(t=t.slice(),t.push(t[0])),new Y.Primitive({geometryInstances:new Y.GeometryInstance({geometry:new Y.PolylineGeometry({positions:t,width:this._width,vertexFormat:Y.PolylineMaterialAppearance.VERTEX_FORMAT,ellipsoid:this._ellipsoid,arcType:Y.ArcType.NONE}),attributes:{color:Y.ColorGeometryInstanceAttribute.fromColor(this._color),depthFailColor:Y.ColorGeometryInstanceAttribute.fromColor(this._depthFailColor)},id:this._id}),appearance:Mi(this._materialType,this._color,this._uniforms),depthFailAppearance:Mi(this._depthFailMaterialType,this._depthFailColor,this._depthFailUniforms),asynchronous:!1,allowPicking:this._allowPicking})};Ue.prototype._createGroundPolyline=function(){let t=this._positions;this._loop&&t.length>2&&(t=t.slice(),t.push(t[0]));let i=new Y.GroundPolylineGeometry({positions:t,width:this._width,vertexFormat:Y.PolylineMaterialAppearance.VERTEX_FORMAT,ellipsoid:this._ellipsoid,arcType:Y.ArcType.GEODESIC});return new Y.GroundPolylinePrimitive({geometryInstances:new Y.GeometryInstance({geometry:i,attributes:{color:Y.ColorGeometryInstanceAttribute.fromColor(this._color)},id:this._id}),appearance:Mi(this._materialType,this._color,this._uniforms),asynchronous:!1,allowPicking:this._allowPicking,classificationType:this._classificationType})};Ue.prototype.isDestroyed=function(){return!1};Ue.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,Y.destroyObject)(this)};var Ut=Ue;var ee=rt(nt(),1);function Ki(t){return(0,ee.defined)(t)&&(t instanceof ee.Cesium3DTileset||t instanceof ee.Model)}function Oo(t){return Ki(t)||(0,ee.defined)(t)&&(t instanceof ee.Cesium3DTileFeature||t instanceof ee.ModelFeature)?!0:(0,ee.defined)(t)&&Ki(t.primitive)}var Pt=Oo;var Io=new yt.Cartesian2,tn=new yt.Cartesian3,Do=10;function we(t){t=t??yt.Frozen.EMPTY_OBJECT,yt.Check.defined("options.scene",t.scene);let i=t.scene,o=t.primitives??i.primitives,l=t.points,h=!1;(0,yt.defined)(l)||(l=o.add(new yt.PointPrimitiveCollection),h=!0),this._scene=i,this._pointCollection=l,this._removePoints=h,this._polyline=o.add(new Ut(t.polylineOptions)),this._primitives=o,this._pointOptions=t.pointOptions,this._positions=[],this._points=[],this._tempNextPos=new yt.Cartesian3,this._mode=gt.BeforeDraw,this._lastClickPosition=new yt.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}we.prototype.addPoint=function(t){let i=this._positions;i.push(t),this._polyline.positions=i;let o=this._pointCollection.add(this._pointOptions);o.position=t,o.show=!0,this._points.push(o)};we.prototype.handleDoubleClick=function(){this._mode=gt.AfterDraw,this._polyline.positions=this._positions};we.prototype.handleClick=function(t){if(yt.Check.defined("clickPosition",t),this._mode===gt.AfterDraw)return;let i=this._lastClickPosition;if(yt.Cartesian2.magnitude(yt.Cartesian2.subtract(i,t,Io))<Do)return;let l=we._getWorldPosition(this._scene,t,Pt,tn);if((0,yt.defined)(l))return this.addPoint(yt.Cartesian3.clone(l,new yt.Cartesian3)),this._mode=gt.Drawing,yt.Cartesian2.clone(t,i),l};we.prototype.handleMouseMove=function(t){if(yt.Check.defined("mousePosition",t),this._mode!==gt.Drawing)return;let i=this._scene,o=we._getWorldPosition(i,t,Pt,tn);if(!(0,yt.defined)(o))return;let l=this._positions.slice();return l.push(yt.Cartesian3.clone(o,this._tempNextPos)),this._polyline.positions=l,o};we.prototype.isDestroyed=function(){return!1};we.prototype.destroy=function(){if(this._removePoints)this._primitives.remove(this._points);else{let t=this._points,i=this._pointCollection;for(let o=0;o<t.length;o++)i.remove(t[o])}return this._primitives.remove(this._polyline),(0,yt.destroyObject)(this)};we._getWorldPosition=jt;var $t=we;var Ao=new $.Cartesian2,Oi=new $.Cartesian3,No=new $.Cartesian3,Lo=new $.Cartesian3,Ro=new $.Ray,zo=new $.Cartesian3,Fo=new $.Cartesian3,Je=new $.Cartographic,Bo=10;function fe(t){t=t??$.Frozen.EMPTY_OBJECT,$.Check.defined("options.scene",t.scene),$t.call(this,t);let i=t.polylineOptions??$.Frozen.EMPTY_OBJECT,o={color:i.color,ellipsoid:i.ellipsoid,width:2,materialType:$.Material.PolylineDashType,allowPicking:!1},l=this._primitives.add(new Ut(o));l.positions=[new $.Cartesian3,new $.Cartesian3],l.show=!1,this._dashLineOptions=o,this._dashedLines=[],this._moveDashLine=l,this._heightPlane=new $.Plane($.Cartesian3.UNIT_X,0),this._heightPlaneCV=new $.Plane($.Cartesian3.UNIT_X,0),this._firstMove=!1,this._height=0}fe.prototype=Object.create($t.prototype);fe.prototype.constructor=fe;fe.prototype._setDashLinePositions=function(t,i){let o=this._scene.globe,l=this._scene.frameState.mapProjection.ellipsoid,h=t.positions;h[0]=$.Cartesian3.clone(i,h[0]);let b=l.cartesianToCartographic(i,Je);(0,$.defined)(o)?b.height=o.getHeight(b)??0:b.height=0,h[1]=l.cartographicToCartesian(b,h[1]),t.positions=h};fe.prototype.addPoint=function(t){$t.prototype.addPoint.call(this,t);let i=this._primitives.add(new Ut(this._dashLineOptions));i.positions=[new $.Cartesian3,new $.Cartesian3],this._dashedLines.push(i),this._setDashLinePositions(i,t)};fe.prototype.handleDoubleClick=function(){this._mode=gt.AfterDraw,this._polyline.positions=this._positions,this._moveDashLine.show=!1};fe.prototype.handleClick=function(t){$.Check.defined("clickPosition",t);let i;if(this._positions.length===0){let o=this._scene,l=o.frameState.mapProjection.ellipsoid;if(i=$t.prototype.handleClick.call(this,t),!(0,$.defined)(i))return;this._heightPlane=$.Plane.fromPointNormal(i,l.geodeticSurfaceNormal(i,Lo),this._heightPlane);let h=l.cartesianToCartographic(i,Je),b=o.mapProjection.project(h,No),C=$.Cartesian3.fromElements(b.z,b.x,b.y,b);this._heightPlaneCV=$.Plane.fromPointNormal(C,$.Cartesian3.UNIT_X,this._heightPlaneCV),this._height=l.cartesianToCartographic(i,Je).height,this._firstMove=!0}else{let o=this._lastClickPosition;if($.Cartesian2.magnitude($.Cartesian2.subtract(o,t,Ao))<Bo)return;$.Cartesian2.clone(t,o),i=$.Cartesian3.clone(this._tempNextPos),this.addPoint(i),this._firstMove=!0}return i};fe.prototype.handleMouseMove=function(t,i){if($.Check.defined("mousePosition",t),$.Check.defined("shift",i),this._mode!==gt.Drawing)return;let o=this._scene,l=o.frameState.mapProjection.ellipsoid,h=this._positions,b,C=o.camera.getPickRay(t,Ro);if(o.mode===$.SceneMode.SCENE3D)b=$.IntersectionTests.rayPlane(C,this._heightPlane,Oi);else if(o.mode===$.SceneMode.COLUMBUS_VIEW){b=$.IntersectionTests.rayPlane(C,this._heightPlaneCV,Oi),b=$.Cartesian3.fromElements(b.y,b.z,b.x,b);let S=o.mapProjection.unproject(b,Je);b=l.cartographicToCartesian(S,b)}else if(b=o.camera.pickEllipsoid(t,l,Oi),(0,$.defined)(b)){let S=l.cartesianToCartographic(b,Je);S.height=this._height,b=l.cartographicToCartesian(S,b)}if((0,$.defined)(b)){if(!this._firstMove&&i){let S=h[h.length-1],O=this._tempNextPos,R=$.Cartesian3.subtract(O,S,zo),V=$.Cartesian3.subtract(b,S,Fo);V=$.Cartesian3.projectVector(V,R,V),b=$.Cartesian3.add(S,V,b)}return h=h.slice(),h.push($.Cartesian3.clone(b,this._tempNextPos)),this._polyline.positions=h,this._firstMove=!1,this._moveDashLine.show=!0,this._setDashLinePositions(this._moveDashLine,b),b}};fe.prototype.isDestroyed=function(){return!1};fe.prototype.destroy=function(){let t=this._primitives,i=this._dashedLines;for(let o=0;o<i.length;o++)t.remove(i[o]);t.remove(this._moveDashLine),$t.prototype.destroy.call(this)};var Te=fe;var _t=rt(nt(),1);var X=rt(nt(),1);function Ii(t){return new X.PerInstanceColorAppearance({flat:!0,closed:!1,translucent:t.alpha<1})}function He(t){t=t??X.Frozen.EMPTY_OBJECT,this.show=t.show??!0,this._id=(0,X.defined)(t.id)?t.id:(0,X.createGuid)(),this._ellipsoid=t.ellipsoid??X.Ellipsoid.WGS84,this._color=X.Color.clone(t.color??X.Color.WHITE),this._depthFailColor=X.Color.clone(t.depthFailColor??this._color),this._positions=t.positions??[],this._clampToGround=t.clampToGround??!1,this._classificationType=t.classificationType??X.ClassificationType.BOTH,this._allowPicking=t.allowPicking??!0,this._boundingSphere=new X.BoundingSphere,this._primitive=void 0,this._update=!0}Object.defineProperties(He.prototype,{positions:{get:function(){return this._positions},set:function(t){this._positions=t,this._update=!0}},color:{get:function(){return this._color},set:function(t){if(!X.Color.equals(this._color,t)&&(this._color=X.Color.clone(t,this._color),(0,X.defined)(this._primitive))){let i=this._primitive.getGeometryInstanceAttributes(this._id).color;i=t.toBytes(i),this._primitive.getGeometryInstanceAttributes(this._id).color=i}}},depthFailColor:{get:function(){return this._depthFailColor},set:function(t){if(!X.Color.equals(this._depthFailColor,t)&&(this._depthFailColor=X.Color.clone(t,this._depthFailColor),(0,X.defined)(this._primitive)&&!this._clampToGround)){let i=this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor;i=t.toBytes(i),this._primitive.getGeometryInstanceAttributes(this._id).depthFailColor=i}}},id:{get:function(){return this._id}},boundingVolume:{get:function(){return this._boundingSphere}},ellipsoid:{get:function(){return this._ellipsoid}},clampToGround:{get:function(){return this._clampToGround}},classificationType:{get:function(){return this._classificationType},set:function(t){this._classificationType=t,this._update=!0}},allowPicking:{get:function(){return this._allowPicking}}});He.prototype.update=function(t){if(!this.show)return;let i=this._positions;if(i.length<3){this._primitive=this._primitive&&this._primitive.destroy();return}this._update&&(this._update=!1,this._primitive=this._primitive&&this._primitive.destroy(),this._primitive=this._clampToGround?this._createGroundPolygon():this._createPolygon(),this._boundingSphere=X.BoundingSphere.fromPoints(i,this._boundingSphere)),this._primitive.update(t)};He.prototype._createPolygon=function(){return new X.Primitive({geometryInstances:new X.GeometryInstance({geometry:X.CoplanarPolygonGeometry.fromPositions({positions:this._positions.map(function(t){return X.Cartesian3.clone(t)}),vertexFormat:X.PerInstanceColorAppearance.FLAT_VERTEX_FORMAT,ellipsoid:this._ellipsoid}),attributes:{color:X.ColorGeometryInstanceAttribute.fromColor(this._color),depthFailColor:X.ColorGeometryInstanceAttribute.fromColor(this._depthFailColor)},id:this._id}),appearance:Ii(this._color),depthFailAppearance:Ii(this._color),allowPicking:this._allowPicking,asynchronous:!1})};He.prototype._createGroundPolygon=function(){return new X.GroundPrimitive({geometryInstances:new X.GeometryInstance({geometry:X.PolygonGeometry.fromPositions({positions:this._positions.map(function(t){return X.Cartesian3.clone(t)}),vertexFormat:X.PerInstanceColorAppearance.FLAT_VERTEX_FORMAT,ellipsoid:this._ellipsoid}),attributes:{color:X.ColorGeometryInstanceAttribute.fromColor(this._color)},id:this._id}),appearance:Ii(this._color),allowPicking:this._allowPicking,asynchronous:!1,classificationType:this._classificationType})};He.prototype.isDestroyed=function(){return!1};He.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,X.destroyObject)(this)};var oi=He;var Uo=new _t.Cartesian2,en=new _t.Cartesian3,Ho=10;function be(t){t=t??_t.Frozen.EMPTY_OBJECT,_t.Check.defined("options.scene",t.scene);let i=t.scene,o=t.primitives??i.primitives,l=!1,h=t.points;(0,_t.defined)(h)||(h=o.add(new _t.PointPrimitiveCollection),l=!0),this._polygon=o.add(new oi(t.polygonOptions)),this._polyline=o.add(new Ut((0,_t.combine)({loop:!0},t.polylineOptions))),this._pointOptions=t.pointOptions,this._pointCollection=h,this._removePoints=l,this._scene=i,this._primitives=o,this._positions=[],this._points=[],this._tempNextPos=new _t.Cartesian3,this._mode=gt.BeforeDraw,this._lastClickPosition=new _t.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}be.prototype.addPoint=function(t){let i=this._positions;i.push(t),this._polyline.positions=i,this._polygon.positions=i;let o=this._pointCollection.add(this._pointOptions);o.position=t,o.show=!0,this._points.push(o)};be.prototype.handleDoubleClick=function(){this._mode=gt.AfterDraw;let t=this._positions;this._polyline.positions=t,this._polygon.positions=t};be.prototype.handleClick=function(t){if(_t.Check.defined("clickPosition",t),this._mode===gt.AfterDraw)return;let i=this._lastClickPosition;if(_t.Cartesian2.magnitude(_t.Cartesian2.subtract(i,t,Uo))<Ho)return;let l=be._getWorldPosition(this._scene,t,Pt,en);if((0,_t.defined)(l))return this.addPoint(_t.Cartesian3.clone(l,new _t.Cartesian3)),this._mode=gt.Drawing,_t.Cartesian2.clone(t,i),l};be.prototype.handleMouseMove=function(t){if(_t.Check.defined("mousePosition",t),this._mode!==gt.Drawing)return;let i=this._scene,o=be._getWorldPosition(i,t,Pt,en);if(!(0,_t.defined)(o))return;let l=this._positions.slice();return l.push(_t.Cartesian3.clone(o,this._tempNextPos)),this._polyline.positions=l,this._polygon.positions=l,o};be.prototype.isDestroyed=function(){return!1};be.prototype.destroy=function(){let t=this._primitives;if(this._removePoints)t.remove(this._points);else{let i=this._points,o=this._pointCollection;for(let l=0;l<i.length;l++)o.remove(i[l])}return t.remove(this._polygon),t.remove(this._polyline),(0,_t.destroyObject)(this)};be._getWorldPosition=jt;var Me=be;var Vo={DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"},vt=Object.freeze(Vo);var si=rt(nt(),1);var ie=rt(nt(),1);function de(t){t=t??ie.Frozen.EMPTY_OBJECT,ie.Check.defined("options.scene",t.scene),ie.Check.defined("options.units",t.units),ie.Check.defined("options.points",t.points),ie.Check.defined("options.labels",t.labels),ie.Check.defined("options.primitives",t.primitives),this._labelCollection=t.labels,this._pointCollection=t.points,this._primitives=t.primitives,this._selectedUnits=t.units,this._selectedLocale=t.locale,this._scene=t.scene}Object.defineProperties(de.prototype,{icon:{value:""},thumbnail:{value:""},type:{value:""},instructions:{value:[]},id:{value:""},selectedUnits:{get:function(){return this._selectedUnits},set:function(t){this._selectedUnits=t,this._refreshLabels()}}});de.prototype._refreshLabels=ie.DeveloperError.throwInstantiationError;de.prototype.handleDoubleClick=function(){};de.prototype.handleClick=function(t){};de.prototype.handleMouseMove=function(t){};de.prototype.handleLeftDown=function(t){};de.prototype.handleLeftUp=function(t){};de.prototype.reset=ie.DeveloperError.throwInstantiationError;de.prototype.isDestroyed=function(){return!1};de.prototype.destroy=ie.DeveloperError.throwInstantiationError;var Ct=de;var it=rt(nt(),1);var It=rt(nt(),1),jo=new It.Cartesian2(0,-9),kt={};kt.color=It.Color.YELLOW;kt.labelFont="16px Lucida Console";kt.textColor=It.Color.WHITE;kt.backgroundColor=new It.Color(.165,.165,.165,.8);kt.backgroundPadding=new It.Cartesian2(7,5);kt.getPolylineOptions=function(t){return t=t??It.Frozen.EMPTY_OBJECT,{show:t.show,ellipsoid:t.ellipsoid,width:t.width??3,color:t.color??kt.color,depthFailColor:t.depthFailColor??t.color??kt.color,id:t.id,positions:t.positions,materialType:t.materialType,depthFailMaterialType:t.depthFailMaterialType,loop:t.loop,clampToGround:t.clampToGround,classificationType:t.classificationType,allowPicking:t.allowPicking??!1}};kt.getPolygonOptions=function(t){return t=t??It.Frozen.EMPTY_OBJECT,{show:t.show,ellipsoid:t.ellipsoid,color:t.color??kt.color,depthFailColor:t.depthFailColor??t.color??kt.color,id:t.id,positions:t.positions,clampToGround:t.clampToGround,classificationType:t.classificationType,allowPicking:t.allowPicking??!1}};kt.getPointOptions=function(){return{pixelSize:10,color:kt.color,position:new It.Cartesian3,disableDepthTestDistance:Number.POSITIVE_INFINITY,show:!1}};kt.getLabelOptions=function(t){return t=t??It.Frozen.EMPTY_OBJECT,{show:!1,font:kt.labelFont,scale:t.scale??1,fillColor:t.fillColor??kt.textColor,showBackground:!0,backgroundColor:t.backgroundColor??kt.backgroundColor,backgroundPadding:t.backgroundPadding??kt.backgroundPadding,horizontalOrigin:t.horizontalOrigin??It.HorizontalOrigin.CENTER,verticalOrigin:t.verticalOrigin??It.VerticalOrigin.BOTTOM,pixelOffset:(0,It.defined)(t.pixelOffset)?t.pixelOffset:It.Cartesian2.clone(jo),disableDepthTestDistance:Number.POSITIVE_INFINITY,position:new It.Cartesian3}};var ot=kt;var lt=rt(nt(),1);var Wo={METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"},Dt=Object.freeze(Wo);var Yo={SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"},Et=Object.freeze(Yo);var $o={CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"},Nt=Object.freeze($o);function ht(t){t=t??lt.Frozen.EMPTY_OBJECT,this.distanceUnits=t.distanceUnits??Dt.METERS,this.areaUnits=t.areaUnits??Et.SQUARE_METERS,this.volumeUnits=t.volumeUnits??Nt.CUBIC_METERS,this.angleUnits=t.angleUnits??vt.DEGREES,this.slopeUnits=t.slopeUnits??vt.DEGREES}ht.convertDistance=function(t,i,o){if(i===o)return t;let l=nn(i),h=1/nn(o);return t*l*h};ht.convertArea=function(t,i,o){if(i===o)return t;let l=on(i),h=1/on(o);return t*l*h};ht.convertVolume=function(t,i,o){if(i===o)return t;let l=rn(i),h=1/rn(o);return t*l*h};ht.convertAngle=function(t,i,o){if(i===o)return t;let l=Jo(t,i);return Di(l,o)};ht.numberToString=function(t,i,o){return Ve(t,i,o)};ht.distanceToString=function(t,i,o,l){let h=ht.convertDistance(t,Dt.METERS,i);return Ve(h,o,l)+ht.getDistanceUnitSpacing(i)+ht.getDistanceUnitSymbol(i)};ht.areaToString=function(t,i,o,l){let h=ht.convertArea(t,Et.SQUARE_METERS,i);return Ve(h,o,l)+ht.getAreaUnitSpacing(i)+ht.getAreaUnitSymbol(i)};ht.volumeToString=function(t,i,o,l){let h=ht.convertVolume(t,Nt.CUBIC_METERS,i);return Ve(h,o,l)+ht.getVolumeUnitSpacing(i)+ht.getVolumeUnitSymbol(i)};ht.angleToString=function(t,i,o,l){if(i===vt.DEGREES||i===vt.RADIANS||i===vt.GRADE){let h=Di(t,i);return Ve(h,o,l)+ht.getAngleUnitSpacing(i)+ht.getAngleUnitSymbol(i)}else if(i===vt.DEGREES_MINUTES_SECONDS){let h=lt.Math.toDegrees(t),b=h<0?"-":"";h=Math.abs(h);let C=Math.floor(h),S=(h-C)*60,O=Math.floor(S),R=(S-O)*60;return R=Ve(R,void 0,l),`${b+C}\xB0 ${O}' ${R}"`}else if(i===vt.RATIO){let b=1/Di(t,i),C=sn(l);return C.minimumFractionDigits=0,`1:${Ve(b,o,C)}`}};ht.longitudeToString=function(t,i,o,l){return`${ht.angleToString(Math.abs(t),i,o,l)} ${t<0?"W":"E"}`};ht.latitudeToString=function(t,i,o,l){return`${ht.angleToString(Math.abs(t),i,o,l)} ${t<0?"S":"N"}`};ht.getDistanceUnitSymbol=function(t){if(lt.Check.typeOf.string("distanceUnits",t),t===Dt.METERS)return"m";if(t===Dt.CENTIMETERS)return"cm";if(t===Dt.KILOMETERS)return"km";if(t===Dt.FEET||t===Dt.US_SURVEY_FEET)return"ft";if(t===Dt.INCHES)return"in";if(t===Dt.YARDS)return"yd";if(t===Dt.MILES)return"mi";throw new lt.DeveloperError(`Invalid distance units: ${t}`)};ht.getDistanceUnitSpacing=function(t){return lt.Check.typeOf.string("distanceUnits",t)," "};ht.getAreaUnitSymbol=function(t){if(lt.Check.typeOf.string("areaUnits",t),t===Et.SQUARE_METERS)return"m\xB2";if(t===Et.SQUARE_CENTIMETERS)return"cm\xB2";if(t===Et.SQUARE_KILOMETERS)return"km\xB2";if(t===Et.SQUARE_FEET)return"sq ft";if(t===Et.SQUARE_INCHES)return"sq in";if(t===Et.SQUARE_YARDS)return"sq yd";if(t===Et.SQUARE_MILES)return"sq mi";if(t===Et.ACRES)return"ac";if(t===Et.HECTARES)return"ha";throw new lt.DeveloperError(`Invalid area units: ${t}`)};ht.getAreaUnitSpacing=function(t){return lt.Check.typeOf.string("areaUnits",t)," "};ht.getVolumeUnitSymbol=function(t){if(lt.Check.typeOf.string("volumeUnits",t),t===Nt.CUBIC_METERS)return"m\xB3";if(t===Nt.CUBIC_CENTIMETERS)return"cm\xB3";if(t===Nt.CUBIC_KILOMETERS)return"km\xB3";if(t===Nt.CUBIC_FEET)return"cu ft";if(t===Nt.CUBIC_INCHES)return"cu in";if(t===Nt.CUBIC_YARDS)return"cu yd";if(t===Nt.CUBIC_MILES)return"cu mi";throw new lt.DeveloperError(`Invalid volume units: ${t}`)};ht.getVolumeUnitSpacing=function(t){return lt.Check.typeOf.string("volumeUnits",t)," "};ht.getAngleUnitSymbol=function(t){if(lt.Check.typeOf.string("angleUnits",t),t===vt.DEGREES)return"\xB0";if(t===vt.RADIANS)return"rad";if(t===vt.GRADE)return"%";throw new lt.DeveloperError(`Invalid angle units: ${t}`)};ht.getAngleUnitSpacing=function(t){return lt.Check.typeOf.string("angleUnits",t),t===vt.RADIANS?" ":""};function sn(t,i,o){t=t??2;let l={};return typeof t=="number"?(lt.Check.typeOf.number.greaterThanOrEquals("options",t,0),l.maximumFractionDigits=l.minimumFractionDigits=t):typeof t=="function"?l=t(i,o):l=t,l}var Go=-0,Zo=0;function Ve(t,i,o){let l=sn(o,t,i),h=t.toLocaleString(i,l),b=Go.toLocaleString(i,l);return h===b?Zo.toLocaleString(i,l):h}function nn(t){if(t===Dt.METERS)return 1;if(t===Dt.CENTIMETERS)return .01;if(t===Dt.KILOMETERS)return 1e3;if(t===Dt.FEET)return .3048;if(t===Dt.US_SURVEY_FEET)return 1200/3937;if(t===Dt.INCHES)return .0254;if(t===Dt.YARDS)return .9144;if(t===Dt.MILES)return 1609.344;throw new lt.DeveloperError(`Invalid distance units:${t}`)}function on(t){if(t===Et.SQUARE_METERS)return 1;if(t===Et.SQUARE_CENTIMETERS)return 1e-4;if(t===Et.SQUARE_KILOMETERS)return 1e6;if(t===Et.SQUARE_FEET)return .3048*.3048;if(t===Et.SQUARE_INCHES)return .0254*.0254;if(t===Et.SQUARE_YARDS)return .9144*.9144;if(t===Et.SQUARE_MILES)return 1609.344*1609.344;if(t===Et.ACRES)return 4046.85642232;if(t===Et.HECTARES)return 1e4;throw new lt.DeveloperError(`Invalid area units:${t}`)}function rn(t){if(t===Nt.CUBIC_METERS)return 1;if(t===Nt.CUBIC_CENTIMETERS)return 1e-6;if(t===Nt.CUBIC_KILOMETERS)return 1e9;if(t===Nt.CUBIC_FEET)return .3048*.3048*.3048;if(t===Nt.CUBIC_INCHES)return .0254*.0254*.0254;if(t===Nt.CUBIC_YARDS)return .9144*.9144*.9144;if(t===Nt.CUBIC_MILES)return 1609.344*1609.344*1609.344;throw new lt.DeveloperError(`Invalid volume units:${t}`)}var qo=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i;function Jo(t,i){if(i===vt.RADIANS)return t;if(i===vt.DEGREES)return lt.Math.toRadians(t);if(i===vt.GRADE)return t===Number.POSITIVE_INFINITY?lt.Math.PI_OVER_TWO:Math.atan(t/100);if(i===vt.RATIO)return Math.atan(t);if(i===vt.DEGREES_MINUTES_SECONDS){let o=qo.exec(t);if(!(0,lt.defined)(o))throw new lt.RuntimeError(`Could not convert angle to radians: ${t}`);let l=o[1].length>0?-1:1,h=parseInt(o[2]),b=parseInt(o[3]),C=parseFloat(o[4]),S=o[5];S.length===1&&(S=S.toUpperCase(),(S==="W"||S==="S")&&(l*=-1));let O=l*(h+b/60+C/3600);return lt.Math.toRadians(O)}throw new lt.DeveloperError(`Invalid angle units: ${i}`)}function Di(t,i){if(i===vt.RADIANS)return t;if(i===vt.DEGREES)return lt.Math.toDegrees(t);if(i===vt.GRADE)return t=lt.Math.clamp(Math.abs(t),0,lt.Math.PI_OVER_TWO),t===lt.Math.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(t);if(i===vt.RATIO){let o=Math.sin(t),l=Math.cos(t);return o/l}throw new lt.DeveloperError(`Invalid angle units: ${i}`)}var ft=ht;var Xo=new it.Cartesian2,Qo=new it.Cartesian2,Ko=new it.Cartesian3,tr=new it.Cartesian3,er=new it.Cartesian3,ir=new it.Cartesian3,nr=new it.Cartesian3;function or(t,i,o){let l=it.Cartesian3.subtract(t,i,ir),h=it.Cartesian3.subtract(o,i,nr),b=it.Cartesian3.cross(l,h,l);return it.Cartesian3.magnitude(b)*.5}function Xt(t){t=t??it.Frozen.EMPTY_OBJECT,it.Check.defined("options.scene",t.scene),it.Check.defined("options.primitives",t.primitives),it.Check.defined("options.units",t.units),it.Check.defined("options.points",t.points),it.Check.defined("options.labels",t.labels),t.polylineOptions=ot.getPolylineOptions({ellipsoid:t.ellipsoid}),t.pointOptions=ot.getPointOptions(),t.polygonOptions={color:ot.color.withAlpha(.8)},Me.call(this,t);let i=t.labels;this._labelCollection=i,this._label=i.add(ot.getLabelOptions()),this._selectedUnits=t.units,this._selectedLocale=t.locale,this._area=0;let o=this;this._removeEvent=this._scene.preRender.addEventListener(function(){o.updateLabel()})}Xt.prototype=Object.create(Me.prototype);Xt.prototype.constructor=Xt;Object.defineProperties(Xt.prototype,{area:{get:function(){return this._area}}});Xt.prototype.updateArea=function(t){let i=it.CoplanarPolygonGeometry.createGeometry(it.CoplanarPolygonGeometry.fromPositions({positions:t,vertexFormat:it.VertexFormat.POSITION_ONLY}));if(!(0,it.defined)(i)){this._label.text="";return}let o=i.attributes.position.values,l=i.indices,h=0;for(let b=0;b<l.length;b+=3){let C=l[b],S=l[b+1],O=l[b+2],R=it.Cartesian3.unpack(o,C*3,Ko),V=it.Cartesian3.unpack(o,S*3,tr),Z=it.Cartesian3.unpack(o,O*3,er);h+=or(R,V,Z)}this._area=h,this._refreshLabels()};Xt.prototype._refreshLabels=function(){let t=this._label;t.text=ft.areaToString(this._area,this._selectedUnits.areaUnits,this._selectedLocale)};Xt.prototype.updateLabel=function(){let t=this._positions;if(t.length<2)return;let i=this._scene,o=t[0],l=it.SceneTransforms.worldToWindowCoordinates(i,o,Xo),h=(0,it.defined)(l)?l.y:Number.POSITIVE_INFINITY;for(let b=1;b<t.length;b++){let C=it.SceneTransforms.worldToWindowCoordinates(i,t[b],Qo);(0,it.defined)(C)&&C.y<h&&(h=C.y,o=t[b])}this._label.position=o};Xt.prototype.addPoint=function(t){Me.prototype.addPoint.call(this,t),this.updateArea(this._positions)};Xt.prototype.handleClick=function(t){it.Check.defined("clickPosition",t),this._mode===gt.AfterDraw&&this.reset();let i=Me.prototype.handleClick.call(this,t);(0,it.defined)(i)&&(this._label.show=!0,this._polygon.show=!0,this._polyline.show=!0)};Xt.prototype.handleMouseMove=function(t){it.Check.defined("mousePosition",t);let i=Me.prototype.handleMouseMove.call(this,t);if(!(0,it.defined)(i))return;let o=this._positions.slice();o.push(i),this.updateArea(o)};Xt.prototype.reset=function(){this._label.show=!1,this._label.text="",this._positions=[],this._polyline.positions=[],this._polygon.positions=[],this._polyline.show=!1,this._polygon.show=!1,this._area=0;let t=this._points,i=this._pointCollection;for(let o=0;o<t.length;o++)i.remove(t[o]);t.length=0,this._mode=gt.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};Xt.prototype.destroy=function(){this._removeEvent(),this._labelCollection.remove(this._label),Me.prototype.destroy.call(this)};var ri=Xt;function an(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <circle r="2.0788691" cy="293.99896" cx="3.8532958"/>
                   <circle r="2.0788691" cy="282.76791" cx="26.927404"/>
                   <circle r="2.0788691" cy="270.20621" cx="4.0090437"/>
                   <path d="m 26.326048,283.77014 -9.394396,5.02295 -9.3943948,5.02295 0.3471933,-10.64726 0.3471933,-10.64726 9.0472022,5.62431 z" transform="matrix(1.1625734,0,0,0.99297729,-4.6787891,1.2180486)"/>
                 </g>
               </svg>`}function ne(t){t=t??si.Frozen.EMPTY_OBJECT,Ct.call(this,t),this._drawing=new ri(t)}ne.prototype=Object.create(Ct.prototype);ne.prototype.constructor=ne;Object.defineProperties(ne.prototype,{area:{get:function(){return this._drawing.area}},icon:{value:an(15)},thumbnail:{value:an(25)},type:{value:"Area"},instructions:{value:["Click to start drawing a polygon","Keep clicking to add more points","Double click to finish drawing"]},id:{value:"areaMeasurement"}});ne.prototype._refreshLabels=function(){this._drawing._refreshLabels()};ne.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};ne.prototype.handleClick=function(t){this._drawing.handleClick(t)};ne.prototype.handleMouseMove=function(t){this._drawing.handleMouseMove(t)};ne.prototype.reset=function(){this._drawing.reset()};ne.prototype.isDestroyed=function(){return!1};ne.prototype.destroy=function(){return this._drawing.destroy(),(0,si.destroyObject)(this)};var ai=ne;var L=rt(nt(),1);var xe={BeforeDraw:0,Drawing:1,AfterDraw:2},rr=new L.Cartesian2,sr=new L.Cartesian2,ln=new L.Cartographic,Se=new L.Cartesian3,cn=new L.Cartesian3,ar=new L.Cartesian3;function un(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                  <path d="m 4.934989,292.6549 20.67981,-20.80395"/>
                   <circle r="2.0788691" cy="270.1637" cx="27.025297"/>
                   <circle r="2.0788691" cy="294.07068" cx="3.1183045"/>
                 </g>
               </svg>
`}function hn(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <path d="m 4.934989,292.6549 20.67981,-20.80395" />
                   <circle r="2.0788691" cy="270.1637" cx="27.025297" />
                   <circle r="2.0788691" cy="294.07068" cx="3.1183045" />
                   <path style="stroke-dasharray:2.00314951, 1.00157475;stroke-dashoffset:0;" d="m 3.3194019,292.73274 -0.046996,-22.53109 21.6420984,-0.0266" />
                 </g>
               </svg>
`}function Ft(t){t=t??L.Frozen.EMPTY_OBJECT,Ct.call(this,t);let i=this,o=this._pointCollection,l=this._labelCollection,h=this._primitives,b=this._scene,C=[new L.Cartesian3,new L.Cartesian3],S=[new L.Cartesian3,new L.Cartesian3,new L.Cartesian3],O=[new L.Cartesian3,new L.Cartesian3,new L.Cartesian3],R=new L.Cartesian2(-9,0),V=new L.Cartesian2(9,0),Z=b.frameState.mapProjection.ellipsoid;this._startPoint=o.add(ot.getPointOptions()),this._endPoint=o.add(ot.getPointOptions()),this._positions=C,this._polyline=h.add(new Ut(ot.getPolylineOptions({ellipsoid:Z,width:3,show:!1,positions:C}))),this._xyPolylinePositions=S,this._xyPolyline=h.add(new Ut(ot.getPolylineOptions({ellipsoid:Z,width:2,positions:S,materialType:L.Material.PolylineDashType}))),this._xyBoxPositions=O,this._xyBox=h.add(new Ut(ot.getPolylineOptions({ellipsoid:Z,width:1,positions:O}))),this._label=l.add(ot.getLabelOptions({horizontalOrigin:L.HorizontalOrigin.LEFT,verticalOrigin:L.VerticalOrigin.TOP,pixelOffset:new L.Cartesian2(10,10)})),this._xPixelOffset=V,this._xLabel=l.add(ot.getLabelOptions()),this._xAngleLabel=l.add(ot.getLabelOptions({horizontalOrigin:L.HorizontalOrigin.LEFT,verticalOrigin:L.VerticalOrigin.MIDDLE,pixelOffset:V})),this._yPixelOffset=R,this._yLabel=l.add(ot.getLabelOptions({horizontalOrigin:L.HorizontalOrigin.RIGHT,pixelOffset:R})),this._yAngleLabel=l.add(ot.getLabelOptions({verticalOrigin:L.VerticalOrigin.TOP,pixelOffset:new L.Cartesian2(0,9)})),this._distance=0,this._xDistance=0,this._yDistance=0,this._xAngle=0,this._yAngle=0,this._mode=xe.BeforeDraw,this._showComponentLines=t.showComponentLines??!1,this._removeEvent=b.preRender.addEventListener(function(){i._updateLabelPosition()})}Ft.prototype=Object.create(Ct.prototype);Ft.prototype.constructor=Ft;Object.defineProperties(Ft.prototype,{distance:{get:function(){return this._distance}},horizontalDistance:{get:function(){return this._xDistance}},verticalDistance:{get:function(){return this._yDistance}},angleFromHorizontal:{get:function(){return this._xAngle}},angleFromVertical:{get:function(){return this._yAngle}},icon:{get:function(){return this._showComponentLines?hn(15):un(15)}},thumbnail:{get:function(){return this._showComponentLines?hn(25):un(25)}},type:{get:function(){return this._showComponentLines?"Component Distance":"Distance"}},instructions:{value:["Click on the point cloud or the globe to set the start point and end points","To make a new measurement, click to clear the previous measurement"]},id:{get:function(){return this._showComponentLines?"componentDistanceMeasurement":"distanceMeasurement"}},showComponentLines:{get:function(){return this._showComponentLines},set:function(t){this._showComponentLines=t,this._mode!==xe.BeforeDraw&&this._updateComponents()}}});Ft.prototype._refreshLabels=function(){this._refreshDistanceText(),this._refreshComponentsText()};Ft.prototype._refreshDistanceText=function(){let t=this._label,i=this._distance;t.text=ft.distanceToString(i,this._selectedUnits.distanceUnits,this._selectedLocale)};Ft.prototype._refreshComponentsText=function(){let t=this._xLabel,i=this._yLabel,o=this._xAngleLabel,l=this._yAngleLabel,h=this._xDistance,b=this._yDistance,C=this._xAngle,S=this._yAngle,O=this._selectedUnits,R=this._selectedLocale;t.text=ft.distanceToString(h,O.distanceUnits,R),i.text=ft.distanceToString(b,O.distanceUnits,R),o.text=ft.angleToString(C,O.slopeUnits,R),l.text=ft.angleToString(S,O.slopeUnits,R)};Ft.prototype._updateComponents=function(){let t=this._showComponentLines,i=this._xLabel,o=this._yLabel,l=this._xAngleLabel,h=this._yAngleLabel,b=this._xyPolyline,C=this._xyBox;if(i.show=!1,o.show=!1,l.show=!1,h.show=!1,b.show=!1,C.show=!1,!t)return;let S=this._scene.frameState.mapProjection.ellipsoid,O=this._positions,R=O[0],V=O[1],Z=S.cartesianToCartographic(R,ln).height,q=S.cartesianToCartographic(V,ln).height,Q,e,Tt,W;Z<q?(Q=R,e=V,Tt=q,W=Z):(Q=V,e=R,Tt=Z,W=q);let at=this._xyPolylinePositions;at[0]=L.Cartesian3.clone(Q,at[0]),at[2]=L.Cartesian3.clone(e,at[2]);let pt=S.geodeticSurfaceNormal(Q,Se);pt=L.Cartesian3.multiplyByScalar(pt,Tt-W,pt);let Mt=L.Cartesian3.add(Q,pt,at[1]);if(b.positions=at,L.Cartesian3.equalsEpsilon(Mt,e,L.Math.EPSILON10)||L.Cartesian3.equalsEpsilon(Mt,Q,L.Math.EPSILON10))return;o.show=!0,i.show=!0,h.show=!0,l.show=!0,b.show=!0,C.show=!0;let tt=L.Cartesian3.subtract(e,Mt,Se),dt=L.Cartesian3.subtract(Q,Mt,cn),ce=Math.min(L.Cartesian3.magnitude(tt),L.Cartesian3.magnitude(dt)),_e=ce>15?ce*.15:ce*.25;tt=L.Cartesian3.normalize(tt,tt),dt=L.Cartesian3.normalize(dt,dt),tt=L.Cartesian3.multiplyByScalar(tt,_e,tt),dt=L.Cartesian3.multiplyByScalar(dt,_e,dt);let Rt=this._xyBoxPositions;Rt[0]=L.Cartesian3.add(Mt,tt,Rt[0]),Rt[1]=L.Cartesian3.add(Rt[0],dt,Rt[1]),Rt[2]=L.Cartesian3.add(Mt,dt,Rt[2]),C.positions=Rt,i.position=L.Cartesian3.midpoint(Mt,e,Se),o.position=L.Cartesian3.midpoint(Q,Mt,Se),l.position=L.Cartesian3.clone(e,Se),h.position=L.Cartesian3.clone(Q,Se);let St=L.Cartesian3.subtract(Mt,e,cn),xt=L.Cartesian3.subtract(Mt,Q,Se),n=L.Cartesian3.subtract(e,Q,ar),r=L.Cartesian3.angleBetween(xt,n);n=L.Cartesian3.negate(n,n);let s=L.Cartesian3.angleBetween(St,n),a=L.Cartesian3.magnitude(St),d=L.Cartesian3.magnitude(xt);this._xDistance=a,this._yDistance=d,this._xAngle=s,this._yAngle=r,this._refreshComponentsText()};Ft.prototype._updateLabelPosition=function(){let t=this._positions;if(this._mode===xe.BeforeDraw)return;let i=this._scene,o=t[0],l=t[1],h=L.SceneTransforms.worldToWindowCoordinates(i,o,rr),b=L.SceneTransforms.worldToWindowCoordinates(i,l,sr);if(!(0,L.defined)(h)||!(0,L.defined)(b))return;let C=this._label,S=this._yLabel,O=this._xAngleLabel;(h.y-b.y)/(b.x-h.x)>0?(this._yPixelOffset.x=-9,this._xPixelOffset.x=12,S.pixelOffset=this._yPixelOffset,S.horizontalOrigin=L.HorizontalOrigin.RIGHT,O.pixelOffset=this._xPixelOffset,O.horizontalOrigin=L.HorizontalOrigin.LEFT,C.horizontalOrigin=L.HorizontalOrigin.LEFT):(this._yPixelOffset.x=9,this._xPixelOffset.x=-12,S.pixelOffset=this._yPixelOffset,S.horizontalOrigin=L.HorizontalOrigin.LEFT,O.pixelOffset=this._xPixelOffset,O.horizontalOrigin=L.HorizontalOrigin.RIGHT,C.horizontalOrigin=L.HorizontalOrigin.RIGHT)};Ft.prototype.handleClick=function(t){L.Check.defined("clickPosition",t);let i=this._scene;this._mode===xe.AfterDraw&&this.reset();let o=this._mode,l=this._positions;if(o===xe.BeforeDraw){let h=Ft._getWorldPosition(i,t,Pt,l[0]);if(!(0,L.defined)(h))return;this._polyline.show=!0,l[0]=h.clone(l[0]),l[1]=h.clone(l[1]),this._startPoint.position=h,this._startPoint.show=!0,this._mode=xe.Drawing,this._polyline.positions=l}else o===xe.Drawing&&(this._endPoint.position=l[1],this._endPoint.show=!0,this._polyline.positions=l,this._mode=xe.AfterDraw)};Ft.prototype.handleMouseMove=function(t){if(L.Check.defined("mousePosition",t),this._mode!==xe.Drawing)return;let i=this._scene,o=this._positions,l=Ft._getWorldPosition(i,t,Pt,Se);if(!(0,L.defined)(l))return;let h=o[0],b=L.Cartesian3.clone(l,o[1]),C=L.Cartesian3.subtract(b,h,Se);this._distance=L.Cartesian3.magnitude(C),this._polyline.positions=o;let S=this._label;S.position=L.Cartesian3.midpoint(h,b,Se),S.show=!0,this._refreshDistanceText(),this._updateComponents()};Ft.prototype.reset=function(){this._polyline.show=!1,this._xyPolyline.show=!1,this._xyBox.show=!1,this._label.show=!1,this._xLabel.show=!1,this._yLabel.show=!1,this._xAngleLabel.show=!1,this._yAngleLabel.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._mode=xe.BeforeDraw,this._distance=0,this._xDistance=0,this._yDistance=0,this._xAngle=0,this._yAngle=0};Ft.prototype.isDestroyed=function(){return!1};Ft.prototype.destroy=function(){this._removeEvent();let t=this._primitives;t.remove(this._polyline),t.remove(this._xyPolyline),t.remove(this._xyBox);let i=this._pointCollection;i.remove(this._startPoint),i.remove(this._endPoint);let o=this._labelCollection;return o.remove(this._label),o.remove(this._xLabel),o.remove(this._yLabel),o.remove(this._xAngleLabel),o.remove(this._yAngleLabel),(0,L.destroyObject)(this)};Ft._getWorldPosition=jt;var Xe=Ft;var At=rt(nt(),1);var lr=new At.Cartesian3,cr=new At.Cartographic;function fn(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
             <g transform="translate(0,-267)">
               <path d="m 15.042838,272.34414 0.01712,19.60575"/>
               <circle r="2.0788691" cy="270.01154" cx="15.078616"/>
               <path d="m 0.64901081,296.20687 8.80039389,-6.01044 7.9375003,3.1183 12.347278,-3.34365"/>
             </g>
           </svg>`}function oe(t){t=t??At.Frozen.EMPTY_OBJECT,Ct.call(this,t);let i=[new At.Cartesian3,new At.Cartesian3],o=this._pointCollection;this._startPoint=o.add(ot.getPointOptions()),this._endPoint=o.add(ot.getPointOptions()),this._polyline=this._primitives.add(new Ut(ot.getPolylineOptions({ellipsoid:this._scene.frameState.mapProjection.ellipsoid,positions:i}))),this._label=this._labelCollection.add(ot.getLabelOptions({horizontalOrigin:At.HorizontalOrigin.LEFT,verticalOrigin:At.VerticalOrigin.TOP,pixelOffset:new At.Cartesian2(10,10)})),this._positions=i,this._distance=0}oe.prototype=Object.create(Ct.prototype);oe.prototype.constructor=oe;Object.defineProperties(oe.prototype,{distance:{get:function(){return this._distance}},icon:{value:fn(15)},thumbnail:{value:fn(25)},type:{value:"Height from terrain"},instructions:{value:["Click on the point cloud to get a distance from that point to terrain"]},id:{value:"heightMeasurement"}});oe.prototype.handleClick=function(t){let i=this._scene;this.reset();let o=this._positions,l=oe._getWorldPosition(i,t,Pt,o[0]);if(!(0,At.defined)(l))return;let h=i.globe,b=i.frameState.mapProjection.ellipsoid,C=b.cartesianToCartographic(l,cr);(0,At.defined)(h)?C.height=h.getHeight(C)??0:C.height=0;let S=b.cartographicToCartesian(C,o[1]),O=At.Cartesian3.subtract(S,l,lr),R=At.Cartesian3.magnitude(O),V=this._label;V.position=l,V.show=!0,this._polyline.positions=o,this._polyline.show=!0,this._startPoint.position=l,this._startPoint.show=!0,this._endPoint.position=S,this._endPoint.show=!0,this._distance=R,this._refreshLabels()};oe.prototype._refreshLabels=function(){let t=this._label;t.text=ft.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale)};oe.prototype.reset=function(){this._polyline.show=!1,this._label.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._distance=0};oe.prototype.isDestroyed=function(){return!1};oe.prototype.destroy=function(){this._primitives.remove(this._polyline);let t=this._pointCollection;return t.remove(this._startPoint),t.remove(this._endPoint),this._labelCollection.remove(this._label),(0,At.destroyObject)(this)};oe._getWorldPosition=jt;var li=oe;var Ne=rt(nt(),1);var K=rt(nt(),1);var ur=new K.Cartesian3,hr=new K.Cartesian2,fr=new K.Cartesian2,dn=new K.Cartesian2,dr=new K.Cartesian3;function re(t){t=t??K.Frozen.EMPTY_OBJECT,K.Check.defined("options.scene",t.scene),K.Check.defined("options.primitives",t.primitives),K.Check.defined("options.units",t.units),K.Check.defined("options.points",t.points),K.Check.defined("options.labels",t.labels),Te.call(this,t);let i=t.labels;this._labelCollection=i,this._label=i.add(ot.getLabelOptions({horizontalOrigin:K.HorizontalOrigin.LEFT,verticalOrigin:K.VerticalOrigin.BOTTOM,pixelOffset:new K.Cartesian2(10,-10)})),this._segmentLabels=[],this._segmentDistances=[],this._selectedUnits=t.units,this._selectedLocale=t.locale,this._previousDistance=0,this._distance=0;let o=this;this._removeEvent=this._scene.preRender.addEventListener(function(){o.updateLabels()})}re.prototype=Object.create(Te.prototype);re.prototype.constructor=re;Object.defineProperties(re.prototype,{distance:{get:function(){return this._distance}}});re.prototype.updateLabels=function(){let t=this._positions;if(t.length<2)return;let i=this._scene,o=t[0],l=K.SceneTransforms.worldToWindowCoordinates(i,o,hr),h=(0,K.defined)(l)?K.Cartesian2.clone(l,dn):K.Cartesian2.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,dn),b=h.y,C=this._segmentLabels;C[0].show=this._polyline.positions.length>2;for(let S=1;S<t.length;S++){let O=K.SceneTransforms.worldToWindowCoordinates(i,t[S],fr);if(!(0,K.defined)(O))continue;let R=(h.y-O.y)/(O.x-h.x),V=C[S-1];R>0?V.horizontalOrigin=K.HorizontalOrigin.LEFT:V.horizontalOrigin=K.HorizontalOrigin.RIGHT,O.y<b&&(b=O.y,o=t[S]),h=K.Cartesian2.clone(O,h)}this._mode===gt.AfterDraw&&(this._label.position=o)};re.prototype.addPoint=function(t){let i=this._positions;if(i.length>0){this._previousDistance=this._distance;let o=this._labelCollection.add(ot.getLabelOptions({scale:.8,horizontalOrigin:K.HorizontalOrigin.LEFT,verticalOrigin:K.VerticalOrigin.TOP,pixelOffset:new K.Cartesian2(5,5)})),l=i[i.length-1];o.position=K.Cartesian3.midpoint(l,t,new K.Cartesian3),o.text=ft.distanceToString(K.Cartesian3.distance(l,t),this._selectedUnits.distanceUnits,this._selectedLocale),o.show=!0,this._segmentDistances.push(K.Cartesian3.distance(l,t)),this._segmentLabels.push(o)}Te.prototype.addPoint.call(this,t)};re.prototype.handleClick=function(t){this._mode===gt.AfterDraw&&this.reset();let i=Te.prototype.handleClick.call(this,t);(0,K.defined)(i)&&(this._label.show=!0,this._polyline.show=!0)};re.prototype._refreshLabels=function(){let t=this._label;t.text=ft.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale);let i=this._segmentLabels;for(let o=0;o<i.length;o++)i[o].text=ft.distanceToString(this._segmentDistances[o],this._selectedUnits.distanceUnits,this._selectedLocale)};re.prototype.handleMouseMove=function(t,i){K.Check.defined("mousePosition",t),K.Check.defined("shift",i);let o=Te.prototype.handleMouseMove.call(this,t,i);if(!(0,K.defined)(o))return;let l=this._positions,h=l[l.length-1],b=K.Cartesian3.subtract(o,h,dr),C=this._previousDistance+K.Cartesian3.magnitude(b),S=this._label;S.position=K.Cartesian3.midpoint(h,o,ur),S.text=ft.distanceToString(C,this._selectedUnits.distanceUnits,this._selectedLocale),S.show=!0,this._distance=C};re.prototype.reset=function(){let t,i=this._primitives,o=this._dashedLines;for(t=0;t<o.length;t++)i.remove(o[t]);this._dashedLines=[],this._polyline.positions=[],this._polyline.show=!1,this._label.show=!1,this._label.text="",this._previousDistance=0,this._distance=0,this._positions=[];let l=this._points,h=this._pointCollection;for(t=0;t<l.length;t++)h.remove(l[t]);l.length=0;let b=this._labelCollection,C=this._segmentLabels,S=this._segmentDistances;for(t=0;t<C.length;t++)b.remove(C[t]);C.length=0,S.length=0,this._moveDashLine.show=!1,this._mode=gt.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};re.prototype.destroy=function(){this._removeEvent();let t,i=this._labelCollection,o=this._segmentLabels;for(t=0;t<o.length;t++)i.remove(o[t]);let l=this._primitives,h=this._dashedLines;for(t=0;t<h.length;t++)l.remove(h[t]);this._labelCollection.remove(this._label),Te.prototype.destroy.call(this)};var ci=re;function pn(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <path d="m 5.5492003,281.78808 18.9375757,0.0497"/>
                   <circle r="2.0788691" cy="281.63776" cx="3.0514872"/>
                   <circle r="2.0788691" cy="281.71384" cx="26.985731"/>
                 </g>
               </svg>`}function se(t){t=t??Ne.Frozen.EMPTY_OBJECT,Ct.call(this,t),this._drawing=new ci(t)}se.prototype=Object.create(Ct.prototype);se.prototype.constructor=se;Object.defineProperties(se.prototype,{distance:{get:function(){return this._drawing.distance}},icon:{value:pn(15)},thumbnail:{value:pn(25)},type:{value:"Horizontal distance"},instructions:{value:["Click on the point cloud or the globe to set the start point","Move the mouse to drag the line","Press this shift key to clamp the direction of the line","Click again to set the end point","To make a new measurement, click to clear the previous measurement"]},id:{value:"horizontalMeasurement"}});se.prototype._refreshLabels=function(){this._drawing._refreshLabels()};se.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};se.prototype.handleClick=function(t){Ne.Check.defined("clickPosition",t),this._drawing.handleClick(t)};se.prototype.handleMouseMove=function(t,i){Ne.Check.defined("mousePosition",t),Ne.Check.defined("shift",i),this._drawing.handleMouseMove(t,i)};se.prototype.reset=function(){this._drawing.reset()};se.prototype.isDestroyed=function(){return!1};se.prototype.destroy=function(){return this._drawing.destroy(),(0,Ne.destroyObject)(this)};var ui=se;var Ie=rt(nt(),1);var Qe;typeof ko<"u"&&(Qe=ko);(function(){/*!
 * Knockout JavaScript library v3.5.1
 * (c) The Knockout.js team - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */(function(){(function(t){var i=this||(0,eval)("this"),o=i.document,l=i.navigator,h=i.jQuery,b=i.JSON;h||typeof jQuery>"u"||(h=jQuery),function(C){C(i.ko={})}(function(C,S){function O(n,r){return n===null||typeof n in Tt?n===r:!1}function R(n,r){var s;return function(){s||(s=e.a.setTimeout(function(){s=t,n()},r))}}function V(n,r){var s;return function(){clearTimeout(s),s=e.a.setTimeout(n,r)}}function Z(n,r){r&&r!=="change"?r==="beforeChange"?this.pc(n):this.gb(n,r):this.qc(n)}function q(n,r){r!==null&&r.s&&r.s()}function Q(n,r){var s=this.qd,a=s[tt];a.ra||(this.Qb&&this.mb[r]?(s.uc(r,n,this.mb[r]),this.mb[r]=null,--this.Qb):a.I[r]||s.uc(r,n,a.J?{da:n}:s.$c(n)),n.Ja&&n.gd())}var e=typeof C<"u"?C:{};e.b=function(n,r){for(var s=n.split("."),a=e,d=0;d<s.length-1;d++)a=a[s[d]];a[s[s.length-1]]=r},e.L=function(n,r,s){n[r]=s},e.version="3.5.1",e.b("version",e.version),e.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},e.a=function(){function n(c,w){for(var _ in c)d.call(c,_)&&w(_,c[_])}function r(c,w){if(w)for(var _ in w)d.call(w,_)&&(c[_]=w[_]);return c}function s(c,w){return c.__proto__=w,c}function a(c,w,_,E){var M=c[w].match(v)||[];e.a.D(_.match(v),function(x){e.a.Na(M,x,E)}),c[w]=M.join(" ")}var d=Object.prototype.hasOwnProperty,m={__proto__:[]}instanceof Array,p=typeof Symbol=="function",g={},f={};g[l&&/Firefox\/2/i.test(l.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],g.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),n(g,function(c,w){if(w.length)for(var _=0,E=w.length;_<E;_++)f[w[_]]=c});var u={propertychange:!0},y=o&&function(){for(var c=3,w=o.createElement("div"),_=w.getElementsByTagName("i");w.innerHTML="<!--[if gt IE "+ ++c+"]><i></i><![endif]-->",_[0];);return 4<c?c:t}(),v=/\S+/g,P;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(c,w,_){for(var E=0,M=c.length;E<M;E++)w.call(_,c[E],E,c)},A:typeof Array.prototype.indexOf=="function"?function(c,w){return Array.prototype.indexOf.call(c,w)}:function(c,w){for(var _=0,E=c.length;_<E;_++)if(c[_]===w)return _;return-1},Lb:function(c,w,_){for(var E=0,M=c.length;E<M;E++)if(w.call(_,c[E],E,c))return c[E];return t},Pa:function(c,w){var _=e.a.A(c,w);0<_?c.splice(_,1):_===0&&c.shift()},wc:function(c){var w=[];return c&&e.a.D(c,function(_){0>e.a.A(w,_)&&w.push(_)}),w},Mb:function(c,w,_){var E=[];if(c)for(var M=0,x=c.length;M<x;M++)E.push(w.call(_,c[M],M));return E},jb:function(c,w,_){var E=[];if(c)for(var M=0,x=c.length;M<x;M++)w.call(_,c[M],M)&&E.push(c[M]);return E},Nb:function(c,w){if(w instanceof Array)c.push.apply(c,w);else for(var _=0,E=w.length;_<E;_++)c.push(w[_]);return c},Na:function(c,w,_){var E=e.a.A(e.a.bc(c),w);0>E?_&&c.push(w):_||c.splice(E,1)},Ba:m,extend:r,setPrototypeOf:s,Ab:m?s:r,P:n,Ga:function(c,w,_){if(!c)return c;var E={},M;for(M in c)d.call(c,M)&&(E[M]=w.call(_,c[M],M,c));return E},Tb:function(c){for(;c.firstChild;)e.removeNode(c.firstChild)},Yb:function(c){c=e.a.la(c);for(var w=(c[0]&&c[0].ownerDocument||o).createElement("div"),_=0,E=c.length;_<E;_++)w.appendChild(e.oa(c[_]));return w},Ca:function(c,w){for(var _=0,E=c.length,M=[];_<E;_++){var x=c[_].cloneNode(!0);M.push(w?e.oa(x):x)}return M},va:function(c,w){if(e.a.Tb(c),w)for(var _=0,E=w.length;_<E;_++)c.appendChild(w[_])},Xc:function(c,w){var _=c.nodeType?[c]:c;if(0<_.length){for(var E=_[0],M=E.parentNode,x=0,T=w.length;x<T;x++)M.insertBefore(w[x],E);for(x=0,T=_.length;x<T;x++)e.removeNode(_[x])}},Ua:function(c,w){if(c.length){for(w=w.nodeType===8&&w.parentNode||w;c.length&&c[0].parentNode!==w;)c.splice(0,1);for(;1<c.length&&c[c.length-1].parentNode!==w;)c.length--;if(1<c.length){var _=c[0],E=c[c.length-1];for(c.length=0;_!==E;)c.push(_),_=_.nextSibling;c.push(E)}}return c},Zc:function(c,w){7>y?c.setAttribute("selected",w):c.selected=w},Db:function(c){return c===null||c===t?"":c.trim?c.trim():c.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(c,w){return c=c||"",w.length>c.length?!1:c.substring(0,w.length)===w},vd:function(c,w){if(c===w)return!0;if(c.nodeType===11)return!1;if(w.contains)return w.contains(c.nodeType!==1?c.parentNode:c);if(w.compareDocumentPosition)return(w.compareDocumentPosition(c)&16)==16;for(;c&&c!=w;)c=c.parentNode;return!!c},Sb:function(c){return e.a.vd(c,c.ownerDocument.documentElement)},kd:function(c){return!!e.a.Lb(c,e.a.Sb)},R:function(c){return c&&c.tagName&&c.tagName.toLowerCase()},Ac:function(c){return e.onError?function(){try{return c.apply(this,arguments)}catch(w){throw e.onError&&e.onError(w),w}}:c},setTimeout:function(c,w){return setTimeout(e.a.Ac(c),w)},Gc:function(c){setTimeout(function(){throw e.onError&&e.onError(c),c},0)},B:function(c,w,_){var E=e.a.Ac(_);if(_=u[w],e.options.useOnlyNativeEvents||_||!h)if(_||typeof c.addEventListener!="function")if(typeof c.attachEvent<"u"){var M=function(T){E.call(c,T)},x="on"+w;c.attachEvent(x,M),e.a.K.za(c,function(){c.detachEvent(x,M)})}else throw Error("Browser doesn't support addEventListener or attachEvent");else c.addEventListener(w,E,!1);else P||(P=typeof h(c).on=="function"?"on":"bind"),h(c)[P](w,E)},Fb:function(c,w){if(!c||!c.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var _;if(e.a.R(c)==="input"&&c.type&&w.toLowerCase()=="click"?(_=c.type,_=_=="checkbox"||_=="radio"):_=!1,e.options.useOnlyNativeEvents||!h||_)if(typeof o.createEvent=="function")if(typeof c.dispatchEvent=="function")_=o.createEvent(f[w]||"HTMLEvents"),_.initEvent(w,!0,!0,i,0,0,0,0,0,!1,!1,!1,!1,0,c),c.dispatchEvent(_);else throw Error("The supplied element doesn't support dispatchEvent");else if(_&&c.click)c.click();else if(typeof c.fireEvent<"u")c.fireEvent("on"+w);else throw Error("Browser doesn't support triggering events");else h(c).trigger(w)},f:function(c){return e.O(c)?c():c},bc:function(c){return e.O(c)?c.v():c},Eb:function(c,w,_){var E;w&&(typeof c.classList=="object"?(E=c.classList[_?"add":"remove"],e.a.D(w.match(v),function(M){E.call(c.classList,M)})):typeof c.className.baseVal=="string"?a(c.className,"baseVal",w,_):a(c,"className",w,_))},Bb:function(c,w){var _=e.a.f(w);(_===null||_===t)&&(_="");var E=e.h.firstChild(c);!E||E.nodeType!=3||e.h.nextSibling(E)?e.h.va(c,[c.ownerDocument.createTextNode(_)]):E.data=_,e.a.Ad(c)},Yc:function(c,w){if(c.name=w,7>=y)try{var _=c.name.replace(/[&<>'"]/g,function(E){return"&#"+E.charCodeAt(0)+";"});c.mergeAttributes(o.createElement("<input name='"+_+"'/>"),!1)}catch{}},Ad:function(c){9<=y&&(c=c.nodeType==1?c:c.parentNode,c.style&&(c.style.zoom=c.style.zoom))},wd:function(c){if(y){var w=c.style.width;c.style.width=0,c.style.width=w}},Pd:function(c,w){c=e.a.f(c),w=e.a.f(w);for(var _=[],E=c;E<=w;E++)_.push(E);return _},la:function(c){for(var w=[],_=0,E=c.length;_<E;_++)w.push(c[_]);return w},Da:function(c){return p?Symbol(c):c},Zd:y===6,$d:y===7,W:y,Lc:function(c,w){for(var _=e.a.la(c.getElementsByTagName("input")).concat(e.a.la(c.getElementsByTagName("textarea"))),E=typeof w=="string"?function(T){return T.name===w}:function(T){return w.test(T.name)},M=[],x=_.length-1;0<=x;x--)E(_[x])&&M.push(_[x]);return M},Nd:function(c){return typeof c=="string"&&(c=e.a.Db(c))?b&&b.parse?b.parse(c):new Function("return "+c)():null},hc:function(c,w,_){if(!b||!b.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return b.stringify(e.a.f(c),w,_)},Od:function(c,w,_){_=_||{};var E=_.params||{},M=_.includeFields||this.Jc,x=c;if(typeof c=="object"&&e.a.R(c)==="form")for(var x=c.action,T=M.length-1;0<=T;T--)for(var I=e.a.Lc(c,M[T]),B=I.length-1;0<=B;B--)E[I[B].name]=I[B].value;w=e.a.f(w);var z=o.createElement("form");z.style.display="none",z.action=x,z.method="post";for(var U in w)c=o.createElement("input"),c.type="hidden",c.name=U,c.value=e.a.hc(e.a.f(w[U])),z.appendChild(c);n(E,function(J,Ht){var Ot=o.createElement("input");Ot.type="hidden",Ot.name=J,Ot.value=Ht,z.appendChild(Ot)}),o.body.appendChild(z),_.submitter?_.submitter(z):z.submit(),setTimeout(function(){z.parentNode.removeChild(z)},0)}}}(),e.b("utils",e.a),e.b("utils.arrayForEach",e.a.D),e.b("utils.arrayFirst",e.a.Lb),e.b("utils.arrayFilter",e.a.jb),e.b("utils.arrayGetDistinctValues",e.a.wc),e.b("utils.arrayIndexOf",e.a.A),e.b("utils.arrayMap",e.a.Mb),e.b("utils.arrayPushAll",e.a.Nb),e.b("utils.arrayRemoveItem",e.a.Pa),e.b("utils.cloneNodes",e.a.Ca),e.b("utils.createSymbolOrString",e.a.Da),e.b("utils.extend",e.a.extend),e.b("utils.fieldsIncludedWithJsonPost",e.a.Jc),e.b("utils.getFormFields",e.a.Lc),e.b("utils.objectMap",e.a.Ga),e.b("utils.peekObservable",e.a.bc),e.b("utils.postJson",e.a.Od),e.b("utils.parseJson",e.a.Nd),e.b("utils.registerEventHandler",e.a.B),e.b("utils.stringifyJson",e.a.hc),e.b("utils.range",e.a.Pd),e.b("utils.toggleDomNodeCssClass",e.a.Eb),e.b("utils.triggerEvent",e.a.Fb),e.b("utils.unwrapObservable",e.a.f),e.b("utils.objectForEach",e.a.P),e.b("utils.addOrRemoveItem",e.a.Na),e.b("utils.setTextContent",e.a.Bb),e.b("unwrap",e.a.f),Function.prototype.bind||(Function.prototype.bind=function(n){var r=this;if(arguments.length===1)return function(){return r.apply(n,arguments)};var s=Array.prototype.slice.call(arguments,1);return function(){var a=s.slice(0);return a.push.apply(a,arguments),r.apply(n,a)}}),e.a.g=new function(){var n=0,r="__ko__"+new Date().getTime(),s={},a,d;return e.a.W?(a=function(m,p){var g=m[r];if(!g||g==="null"||!s[g]){if(!p)return t;g=m[r]="ko"+n++,s[g]={}}return s[g]},d=function(m){var p=m[r];return p?(delete s[p],m[r]=null,!0):!1}):(a=function(m,p){var g=m[r];return!g&&p&&(g=m[r]={}),g},d=function(m){return m[r]?(delete m[r],!0):!1}),{get:function(m,p){var g=a(m,!1);return g&&g[p]},set:function(m,p,g){(m=a(m,g!==t))&&(m[p]=g)},Ub:function(m,p,g){return m=a(m,!0),m[p]||(m[p]=g)},clear:d,Z:function(){return n+++r}}},e.b("utils.domData",e.a.g),e.b("utils.domData.clear",e.a.g.clear),e.a.K=new function(){function n(p,g){var f=e.a.g.get(p,a);return f===t&&g&&(f=[],e.a.g.set(p,a,f)),f}function r(p){var g=n(p,!1);if(g)for(var g=g.slice(0),f=0;f<g.length;f++)g[f](p);e.a.g.clear(p),e.a.K.cleanExternalData(p),m[p.nodeType]&&s(p.childNodes,!0)}function s(p,g){for(var f=[],u,y=0;y<p.length;y++)if((!g||p[y].nodeType===8)&&(r(f[f.length]=u=p[y]),p[y]!==u))for(;y--&&e.a.A(f,p[y])==-1;);}var a=e.a.g.Z(),d={1:!0,8:!0,9:!0},m={1:!0,9:!0};return{za:function(p,g){if(typeof g!="function")throw Error("Callback must be a function");n(p,!0).push(g)},yb:function(p,g){var f=n(p,!1);f&&(e.a.Pa(f,g),f.length==0&&e.a.g.set(p,a,t))},oa:function(p){return e.u.G(function(){d[p.nodeType]&&(r(p),m[p.nodeType]&&s(p.getElementsByTagName("*")))}),p},removeNode:function(p){e.oa(p),p.parentNode&&p.parentNode.removeChild(p)},cleanExternalData:function(p){h&&typeof h.cleanData=="function"&&h.cleanData([p])}}},e.oa=e.a.K.oa,e.removeNode=e.a.K.removeNode,e.b("cleanNode",e.oa),e.b("removeNode",e.removeNode),e.b("utils.domNodeDisposal",e.a.K),e.b("utils.domNodeDisposal.addDisposeCallback",e.a.K.za),e.b("utils.domNodeDisposal.removeDisposeCallback",e.a.K.yb),function(){var n=[0,"",""],r=[1,"<table>","</table>"],s=[3,"<table><tbody><tr>","</tr></tbody></table>"],a=[1,"<select multiple='multiple'>","</select>"],d={thead:r,tbody:r,tfoot:r,tr:[2,"<table><tbody>","</tbody></table>"],td:s,th:s,option:a,optgroup:a},m=8>=e.a.W;e.a.ua=function(p,g){var f;if(h){if(h.parseHTML)f=h.parseHTML(p,g)||[];else if((f=h.clean([p],g))&&f[0]){for(var u=f[0];u.parentNode&&u.parentNode.nodeType!==11;)u=u.parentNode;u.parentNode&&u.parentNode.removeChild(u)}}else{(f=g)||(f=o);var u=f.parentWindow||f.defaultView||i,y=e.a.Db(p).toLowerCase(),v=f.createElement("div"),P;for(P=(y=y.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&d[y[1]]||n,y=P[0],P="ignored<div>"+P[1]+p+P[2]+"</div>",typeof u.innerShiv=="function"?v.appendChild(u.innerShiv(P)):(m&&f.body.appendChild(v),v.innerHTML=P,m&&v.parentNode.removeChild(v));y--;)v=v.lastChild;f=e.a.la(v.lastChild.childNodes)}return f},e.a.Md=function(p,g){var f=e.a.ua(p,g);return f.length&&f[0].parentElement||e.a.Yb(f)},e.a.fc=function(p,g){if(e.a.Tb(p),g=e.a.f(g),g!==null&&g!==t)if(typeof g!="string"&&(g=g.toString()),h)h(p).html(g);else for(var f=e.a.ua(g,p.ownerDocument),u=0;u<f.length;u++)p.appendChild(f[u])}}(),e.b("utils.parseHtmlFragment",e.a.ua),e.b("utils.setHtml",e.a.fc),e.aa=function(){function n(s,a){if(s){if(s.nodeType==8){var d=e.aa.Uc(s.nodeValue);d!=null&&a.push({ud:s,Kd:d})}else if(s.nodeType==1)for(var d=0,m=s.childNodes,p=m.length;d<p;d++)n(m[d],a)}}var r={};return{Xb:function(s){if(typeof s!="function")throw Error("You can only pass a function to ko.memoization.memoize()");var a=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return r[a]=s,"<!--[ko_memo:"+a+"]-->"},bd:function(s,a){var d=r[s];if(d===t)throw Error("Couldn't find any memo with ID "+s+". Perhaps it's already been unmemoized.");try{return d.apply(null,a||[]),!0}finally{delete r[s]}},cd:function(s,a){var d=[];n(s,d);for(var m=0,p=d.length;m<p;m++){var g=d[m].ud,f=[g];a&&e.a.Nb(f,a),e.aa.bd(d[m].Kd,f),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},Uc:function(s){return(s=s.match(/^\[ko_memo\:(.*?)\]$/))?s[1]:null}}}(),e.b("memoization",e.aa),e.b("memoization.memoize",e.aa.Xb),e.b("memoization.unmemoize",e.aa.bd),e.b("memoization.parseMemoText",e.aa.Uc),e.b("memoization.unmemoizeDomNodeAndDescendants",e.aa.cd),e.na=function(){function n(){if(d){for(var g=d,f=0,u;p<d;)if(u=a[p++]){if(p>g){if(5e3<=++f){p=d,e.a.Gc(Error("'Too much recursion' after processing "+f+" task groups."));break}g=d}try{u()}catch(y){e.a.Gc(y)}}}}function r(){n(),p=d=a.length=0}var s,a=[],d=0,m=1,p=0;return i.MutationObserver?s=function(g){var f=o.createElement("div");return new MutationObserver(g).observe(f,{attributes:!0}),function(){f.classList.toggle("foo")}}(r):s=o&&"onreadystatechange"in o.createElement("script")?function(g){var f=o.createElement("script");f.onreadystatechange=function(){f.onreadystatechange=null,o.documentElement.removeChild(f),f=null,g()},o.documentElement.appendChild(f)}:function(g){setTimeout(g,0)},{scheduler:s,zb:function(g){return d||e.na.scheduler(r),a[d++]=g,m++},cancel:function(g){g=g-(m-d),g>=p&&g<d&&(a[g]=null)},resetForTesting:function(){var g=d-p;return p=d=a.length=0,g},Sd:n}}(),e.b("tasks",e.na),e.b("tasks.schedule",e.na.zb),e.b("tasks.runEarly",e.na.Sd),e.Ta={throttle:function(n,r){n.throttleEvaluation=r;var s=null;return e.$({read:n,write:function(a){clearTimeout(s),s=e.a.setTimeout(function(){n(a)},r)}})},rateLimit:function(n,r){var s,a,d;typeof r=="number"?s=r:(s=r.timeout,a=r.method),n.Hb=!1,d=typeof a=="function"?a:a=="notifyWhenChangesStop"?V:R,n.ub(function(m){return d(m,s,r)})},deferred:function(n,r){if(r!==!0)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");n.Hb||(n.Hb=!0,n.ub(function(s){var a,d=!1;return function(){if(!d){e.na.cancel(a),a=e.na.zb(s);try{d=!0,n.notifySubscribers(t,"dirty")}finally{d=!1}}}}))},notify:function(n,r){n.equalityComparer=r=="always"?null:O}};var Tt={undefined:1,boolean:1,number:1,string:1};e.b("extenders",e.Ta),e.ic=function(n,r,s){this.da=n,this.lc=r,this.mc=s,this.Ib=!1,this.fb=this.Jb=null,e.L(this,"dispose",this.s),e.L(this,"disposeWhenNodeIsRemoved",this.l)},e.ic.prototype.s=function(){this.Ib||(this.fb&&e.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},e.ic.prototype.l=function(n){this.Jb=n,e.a.K.za(n,this.fb=this.s.bind(this))},e.T=function(){e.a.Ab(this,W),W.qb(this)};var W={qb:function(n){n.U={change:[]},n.sc=1},subscribe:function(n,r,s){var a=this;s=s||"change";var d=new e.ic(a,r?n.bind(r):n,function(){e.a.Pa(a.U[s],d),a.hb&&a.hb(s)});return a.Qa&&a.Qa(s),a.U[s]||(a.U[s]=[]),a.U[s].push(d),d},notifySubscribers:function(n,r){if(r=r||"change",r==="change"&&this.Gb(),this.Wa(r)){var s=r==="change"&&this.ed||this.U[r].slice(0);try{e.u.xc();for(var a=0,d;d=s[a];++a)d.Ib||d.lc(n)}finally{e.u.end()}}},ob:function(){return this.sc},Dd:function(n){return this.ob()!==n},Gb:function(){++this.sc},ub:function(n){var r=this,s=e.O(r),a,d,m,p,g;r.gb||(r.gb=r.notifySubscribers,r.notifySubscribers=Z);var f=n(function(){r.Ja=!1,s&&p===r&&(p=r.nc?r.nc():r());var u=d||g&&r.sb(m,p);g=d=a=!1,u&&r.gb(m=p)});r.qc=function(u,y){y&&r.Ja||(g=!y),r.ed=r.U.change.slice(0),r.Ja=a=!0,p=u,f()},r.pc=function(u){a||(m=u,r.gb(u,"beforeChange"))},r.rc=function(){g=!0},r.gd=function(){r.sb(m,r.v(!0))&&(d=!0)}},Wa:function(n){return this.U[n]&&this.U[n].length},Bd:function(n){if(n)return this.U[n]&&this.U[n].length||0;var r=0;return e.a.P(this.U,function(s,a){s!=="dirty"&&(r+=a.length)}),r},sb:function(n,r){return!this.equalityComparer||!this.equalityComparer(n,r)},toString:function(){return"[object Object]"},extend:function(n){var r=this;return n&&e.a.P(n,function(s,a){var d=e.Ta[s];typeof d=="function"&&(r=d(r,a)||r)}),r}};e.L(W,"init",W.qb),e.L(W,"subscribe",W.subscribe),e.L(W,"extend",W.extend),e.L(W,"getSubscriptionsCount",W.Bd),e.a.Ba&&e.a.setPrototypeOf(W,Function.prototype),e.T.fn=W,e.Qc=function(n){return n!=null&&typeof n.subscribe=="function"&&typeof n.notifySubscribers=="function"},e.b("subscribable",e.T),e.b("isSubscribable",e.Qc),e.S=e.u=function(){function n(m){s.push(a),a=m}function r(){a=s.pop()}var s=[],a,d=0;return{xc:n,end:r,cc:function(m){if(a){if(!e.Qc(m))throw Error("Only subscribable things can act as dependencies");a.od.call(a.pd,m,m.fd||(m.fd=++d))}},G:function(m,p,g){try{return n(),m.apply(p,g||[])}finally{r()}},qa:function(){if(a)return a.o.qa()},Va:function(){if(a)return a.o.Va()},Ya:function(){if(a)return a.Ya},o:function(){if(a)return a.o}}}(),e.b("computedContext",e.S),e.b("computedContext.getDependenciesCount",e.S.qa),e.b("computedContext.getDependencies",e.S.Va),e.b("computedContext.isInitial",e.S.Ya),e.b("computedContext.registerDependency",e.S.cc),e.b("ignoreDependencies",e.Yd=e.u.G);var at=e.a.Da("_latestValue");e.ta=function(n){function r(){return 0<arguments.length?(r.sb(r[at],arguments[0])&&(r.ya(),r[at]=arguments[0],r.xa()),this):(e.u.cc(r),r[at])}return r[at]=n,e.a.Ba||e.a.extend(r,e.T.fn),e.T.fn.qb(r),e.a.Ab(r,pt),e.options.deferUpdates&&e.Ta.deferred(r,!0),r};var pt={equalityComparer:O,v:function(){return this[at]},xa:function(){this.notifySubscribers(this[at],"spectate"),this.notifySubscribers(this[at])},ya:function(){this.notifySubscribers(this[at],"beforeChange")}};e.a.Ba&&e.a.setPrototypeOf(pt,e.T.fn);var Mt=e.ta.Ma="__ko_proto__";pt[Mt]=e.ta,e.O=function(n){if((n=typeof n=="function"&&n[Mt])&&n!==pt[Mt]&&n!==e.o.fn[Mt])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!n},e.Za=function(n){return typeof n=="function"&&(n[Mt]===pt[Mt]||n[Mt]===e.o.fn[Mt]&&n.Nc)},e.b("observable",e.ta),e.b("isObservable",e.O),e.b("isWriteableObservable",e.Za),e.b("isWritableObservable",e.Za),e.b("observable.fn",pt),e.L(pt,"peek",pt.v),e.L(pt,"valueHasMutated",pt.xa),e.L(pt,"valueWillMutate",pt.ya),e.Ha=function(n){if(n=n||[],typeof n!="object"||!("length"in n))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return n=e.ta(n),e.a.Ab(n,e.Ha.fn),n.extend({trackArrayChanges:!0})},e.Ha.fn={remove:function(n){for(var r=this.v(),s=[],a=typeof n!="function"||e.O(n)?function(p){return p===n}:n,d=0;d<r.length;d++){var m=r[d];if(a(m)){if(s.length===0&&this.ya(),r[d]!==m)throw Error("Array modified during remove; cannot remove item");s.push(m),r.splice(d,1),d--}}return s.length&&this.xa(),s},removeAll:function(n){if(n===t){var r=this.v(),s=r.slice(0);return this.ya(),r.splice(0,r.length),this.xa(),s}return n?this.remove(function(a){return 0<=e.a.A(n,a)}):[]},destroy:function(n){var r=this.v(),s=typeof n!="function"||e.O(n)?function(m){return m===n}:n;this.ya();for(var a=r.length-1;0<=a;a--){var d=r[a];s(d)&&(d._destroy=!0)}this.xa()},destroyAll:function(n){return n===t?this.destroy(function(){return!0}):n?this.destroy(function(r){return 0<=e.a.A(n,r)}):[]},indexOf:function(n){var r=this();return e.a.A(r,n)},replace:function(n,r){var s=this.indexOf(n);0<=s&&(this.ya(),this.v()[s]=r,this.xa())},sorted:function(n){var r=this().slice(0);return n?r.sort(n):r.sort()},reversed:function(){return this().slice(0).reverse()}},e.a.Ba&&e.a.setPrototypeOf(e.Ha.fn,e.ta.fn),e.a.D("pop push reverse shift sort splice unshift".split(" "),function(n){e.Ha.fn[n]=function(){var r=this.v();this.ya(),this.zc(r,n,arguments);var s=r[n].apply(r,arguments);return this.xa(),s===r?this:s}}),e.a.D(["slice"],function(n){e.Ha.fn[n]=function(){var r=this();return r[n].apply(r,arguments)}}),e.Pc=function(n){return e.O(n)&&typeof n.remove=="function"&&typeof n.push=="function"},e.b("observableArray",e.Ha),e.b("isObservableArray",e.Pc),e.Ta.trackArrayChanges=function(n,r){function s(){function v(){if(g){var P=[].concat(n.v()||[]),c;n.Wa("arrayChange")&&((!d||1<g)&&(d=e.a.Pb(f,P,n.Ob)),c=d),f=P,d=null,g=0,c&&c.length&&n.notifySubscribers(c,"arrayChange")}}a?v():(a=!0,p=n.subscribe(function(){++g},null,"spectate"),f=[].concat(n.v()||[]),d=null,m=n.subscribe(v))}if(n.Ob={},r&&typeof r=="object"&&e.a.extend(n.Ob,r),n.Ob.sparse=!0,!n.zc){var a=!1,d=null,m,p,g=0,f,u=n.Qa,y=n.hb;n.Qa=function(v){u&&u.call(n,v),v==="arrayChange"&&s()},n.hb=function(v){y&&y.call(n,v),v!=="arrayChange"||n.Wa("arrayChange")||(m&&m.s(),p&&p.s(),p=m=null,a=!1,f=t)},n.zc=function(v,P,c){function w(z,U,J){return _[_.length]={status:z,value:U,index:J}}if(a&&!g){var _=[],E=v.length,M=c.length,x=0;switch(P){case"push":x=E;case"unshift":for(P=0;P<M;P++)w("added",c[P],x+P);break;case"pop":x=E-1;case"shift":E&&w("deleted",v[x],x);break;case"splice":P=Math.min(Math.max(0,0>c[0]?E+c[0]:c[0]),E);for(var E=M===1?E:Math.min(P+(c[1]||0),E),M=P+M-2,x=Math.max(E,M),T=[],I=[],B=2;P<x;++P,++B)P<E&&I.push(w("deleted",v[P],P)),P<M&&T.push(w("added",c[B],P));e.a.Kc(I,T);break;default:return}d=_}}}};var tt=e.a.Da("_state");e.o=e.$=function(n,r,s){function a(){if(0<arguments.length){if(typeof d=="function")d.apply(m.nb,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return m.ra||e.u.cc(a),(m.ka||m.J&&a.Xa())&&a.ha(),m.X}if(typeof n=="object"?s=n:(s=s||{},n&&(s.read=n)),typeof s.read!="function")throw Error("Pass a function that returns the value of the ko.computed");var d=s.write,m={X:t,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:s.read,nb:r||s.owner,l:s.disposeWhenNodeIsRemoved||s.l||null,Sa:s.disposeWhen||s.Sa,Rb:null,I:{},V:0,Ic:null};return a[tt]=m,a.Nc=typeof d=="function",e.a.Ba||e.a.extend(a,e.T.fn),e.T.fn.qb(a),e.a.Ab(a,dt),s.pure?(m.wb=!0,m.J=!0,e.a.extend(a,ce)):s.deferEvaluation&&e.a.extend(a,_e),e.options.deferUpdates&&e.Ta.deferred(a,!0),m.l&&(m.jc=!0,m.l.nodeType||(m.l=null)),m.J||s.deferEvaluation||a.ha(),m.l&&a.ja()&&e.a.K.za(m.l,m.Rb=function(){a.s()}),a};var dt={equalityComparer:O,qa:function(){return this[tt].V},Va:function(){var n=[];return e.a.P(this[tt].I,function(r,s){n[s.Ka]=s.da}),n},Vb:function(n){if(!this[tt].V)return!1;var r=this.Va();return e.a.A(r,n)!==-1?!0:!!e.a.Lb(r,function(s){return s.Vb&&s.Vb(n)})},uc:function(n,r,s){if(this[tt].wb&&r===this)throw Error("A 'pure' computed must not be called recursively");this[tt].I[n]=s,s.Ka=this[tt].V++,s.La=r.ob()},Xa:function(){var n,r,s=this[tt].I;for(n in s)if(Object.prototype.hasOwnProperty.call(s,n)&&(r=s[n],this.Ia&&r.da.Ja||r.da.Dd(r.La)))return!0},Jd:function(){this.Ia&&!this[tt].rb&&this.Ia(!1)},ja:function(){var n=this[tt];return n.ka||0<n.V},Rd:function(){this.Ja?this[tt].ka&&(this[tt].sa=!0):this.Hc()},$c:function(n){if(n.Hb){var r=n.subscribe(this.Jd,this,"dirty"),s=n.subscribe(this.Rd,this);return{da:n,s:function(){r.s(),s.s()}}}return n.subscribe(this.Hc,this)},Hc:function(){var n=this,r=n.throttleEvaluation;r&&0<=r?(clearTimeout(this[tt].Ic),this[tt].Ic=e.a.setTimeout(function(){n.ha(!0)},r)):n.Ia?n.Ia(!0):n.ha(!0)},ha:function(n){var r=this[tt],s=r.Sa,a=!1;if(!r.rb&&!r.ra){if(r.l&&!e.a.Sb(r.l)||s&&s()){if(!r.jc){this.s();return}}else r.jc=!1;r.rb=!0;try{a=this.zd(n)}finally{r.rb=!1}return a}},zd:function(n){var r=this[tt],a=!1,s=r.wb?t:!r.V,a={qd:this,mb:r.I,Qb:r.V};e.u.xc({pd:a,od:Q,o:this,Ya:s}),r.I={},r.V=0;var d=this.yd(r,a);return r.V?a=this.sb(r.X,d):(this.s(),a=!0),a&&(r.J?this.Gb():this.notifySubscribers(r.X,"beforeChange"),r.X=d,this.notifySubscribers(r.X,"spectate"),!r.J&&n&&this.notifySubscribers(r.X),this.rc&&this.rc()),s&&this.notifySubscribers(r.X,"awake"),a},yd:function(n,r){try{var s=n.Wc;return n.nb?s.call(n.nb):s()}finally{e.u.end(),r.Qb&&!n.J&&e.a.P(r.mb,q),n.sa=n.ka=!1}},v:function(n){var r=this[tt];return(r.ka&&(n||!r.V)||r.J&&this.Xa())&&this.ha(),r.X},ub:function(n){e.T.fn.ub.call(this,n),this.nc=function(){return this[tt].J||(this[tt].sa?this.ha():this[tt].ka=!1),this[tt].X},this.Ia=function(r){this.pc(this[tt].X),this[tt].ka=!0,r&&(this[tt].sa=!0),this.qc(this,!r)}},s:function(){var n=this[tt];!n.J&&n.I&&e.a.P(n.I,function(r,s){s.s&&s.s()}),n.l&&n.Rb&&e.a.K.yb(n.l,n.Rb),n.I=t,n.V=0,n.ra=!0,n.sa=!1,n.ka=!1,n.J=!1,n.l=t,n.Sa=t,n.Wc=t,this.Nc||(n.nb=t)}},ce={Qa:function(n){var r=this,s=r[tt];if(!s.ra&&s.J&&n=="change"){if(s.J=!1,s.sa||r.Xa())s.I=null,s.V=0,r.ha()&&r.Gb();else{var a=[];e.a.P(s.I,function(d,m){a[m.Ka]=d}),e.a.D(a,function(d,m){var p=s.I[d],g=r.$c(p.da);g.Ka=m,g.La=p.La,s.I[d]=g}),r.Xa()&&r.ha()&&r.Gb()}s.ra||r.notifySubscribers(s.X,"awake")}},hb:function(n){var r=this[tt];r.ra||n!="change"||this.Wa("change")||(e.a.P(r.I,function(s,a){a.s&&(r.I[s]={da:a.da,Ka:a.Ka,La:a.La},a.s())}),r.J=!0,this.notifySubscribers(t,"asleep"))},ob:function(){var n=this[tt];return n.J&&(n.sa||this.Xa())&&this.ha(),e.T.fn.ob.call(this)}},_e={Qa:function(n){n!="change"&&n!="beforeChange"||this.v()}};e.a.Ba&&e.a.setPrototypeOf(dt,e.T.fn);var Rt=e.ta.Ma;dt[Rt]=e.o,e.Oc=function(n){return typeof n=="function"&&n[Rt]===dt[Rt]},e.Fd=function(n){return e.Oc(n)&&n[tt]&&n[tt].wb},e.b("computed",e.o),e.b("dependentObservable",e.o),e.b("isComputed",e.Oc),e.b("isPureComputed",e.Fd),e.b("computed.fn",dt),e.L(dt,"peek",dt.v),e.L(dt,"dispose",dt.s),e.L(dt,"isActive",dt.ja),e.L(dt,"getDependenciesCount",dt.qa),e.L(dt,"getDependencies",dt.Va),e.xb=function(n,r){return typeof n=="function"?e.o(n,r,{pure:!0}):(n=e.a.extend({},n),n.pure=!0,e.o(n,r))},e.b("pureComputed",e.xb),function(){function n(a,d,m){if(m=m||new s,a=d(a),typeof a!="object"||a===null||a===t||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var p=a instanceof Array?[]:{};return m.save(a,p),r(a,function(g){var f=d(a[g]);switch(typeof f){case"boolean":case"number":case"string":case"function":p[g]=f;break;case"object":case"undefined":var u=m.get(f);p[g]=u!==t?u:n(f,d,m)}}),p}function r(a,d){if(a instanceof Array){for(var m=0;m<a.length;m++)d(m);typeof a.toJSON=="function"&&d("toJSON")}else for(m in a)d(m)}function s(){this.keys=[],this.values=[]}e.ad=function(a){if(arguments.length==0)throw Error("When calling ko.toJS, pass the object you want to convert.");return n(a,function(d){for(var m=0;e.O(d)&&10>m;m++)d=d();return d})},e.toJSON=function(a,d,m){return a=e.ad(a),e.a.hc(a,d,m)},s.prototype={constructor:s,save:function(a,d){var m=e.a.A(this.keys,a);0<=m?this.values[m]=d:(this.keys.push(a),this.values.push(d))},get:function(a){return a=e.a.A(this.keys,a),0<=a?this.values[a]:t}}}(),e.b("toJS",e.ad),e.b("toJSON",e.toJSON),e.Wd=function(n,r,s){function a(d){var m=e.xb(n,s).extend({ma:"always"}),p=m.subscribe(function(g){g&&(p.s(),d(g))});return m.notifySubscribers(m.v()),p}return typeof Promise!="function"||r?a(r.bind(s)):new Promise(a)},e.b("when",e.Wd),function(){e.w={M:function(n){switch(e.a.R(n)){case"option":return n.__ko__hasDomDataOptionValue__===!0?e.a.g.get(n,e.c.options.$b):7>=e.a.W?n.getAttributeNode("value")&&n.getAttributeNode("value").specified?n.value:n.text:n.value;case"select":return 0<=n.selectedIndex?e.w.M(n.options[n.selectedIndex]):t;default:return n.value}},cb:function(n,r,s){switch(e.a.R(n)){case"option":typeof r=="string"?(e.a.g.set(n,e.c.options.$b,t),"__ko__hasDomDataOptionValue__"in n&&delete n.__ko__hasDomDataOptionValue__,n.value=r):(e.a.g.set(n,e.c.options.$b,r),n.__ko__hasDomDataOptionValue__=!0,n.value=typeof r=="number"?r:"");break;case"select":(r===""||r===null)&&(r=t);for(var a=-1,d=0,m=n.options.length,p;d<m;++d)if(p=e.w.M(n.options[d]),p==r||p===""&&r===t){a=d;break}(s||0<=a||r===t&&1<n.size)&&(n.selectedIndex=a,e.a.W===6&&e.a.setTimeout(function(){n.selectedIndex=a},0));break;default:(r===null||r===t)&&(r=""),n.value=r}}}}(),e.b("selectExtensions",e.w),e.b("selectExtensions.readValue",e.w.M),e.b("selectExtensions.writeValue",e.w.cb),e.m=function(){function n(g){g=e.a.Db(g),g.charCodeAt(0)===123&&(g=g.slice(1,-1)),g+=`
,`;var f=[],u=g.match(a),y,v=[],P=0;if(1<u.length){for(var c=0,w;w=u[c];++c){var _=w.charCodeAt(0);if(_===44){if(0>=P){f.push(y&&v.length?{key:y,value:v.join("")}:{unknown:y||v.join("")}),y=P=0,v=[];continue}}else if(_===58){if(!P&&!y&&v.length===1){y=v.pop();continue}}else{if(_===47&&1<w.length&&(w.charCodeAt(1)===47||w.charCodeAt(1)===42))continue;_===47&&c&&1<w.length?(_=u[c-1].match(d))&&!m[_[0]]&&(g=g.substr(g.indexOf(w)+1),u=g.match(a),c=-1,w="/"):_===40||_===123||_===91?++P:_===41||_===125||_===93?--P:y||v.length||_!==34&&_!==39||(w=w.slice(1,-1))}v.push(w)}if(0<P)throw Error("Unbalanced parentheses, braces, or brackets")}return f}var r=["true","false","null","undefined"],s=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,a=RegExp(`"(?:\\\\.|[^"])*"|'(?:\\\\.|[^'])*'|\`(?:\\\\.|[^\`])*\`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*
|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,"'\`{}()/:[\\]]*[^\\s,"'\`{}()/:[\\]]|[^\\s]`,"g"),d=/[\])"'A-Za-z0-9_$]+$/,m={in:1,return:1,typeof:1},p={};return{Ra:[],wa:p,ac:n,vb:function(g,f){function u(_,E){var M;if(!c){var x=e.getBindingHandler(_);if(x&&x.preprocess&&!(E=x.preprocess(E,_,u)))return;(x=p[_])&&(M=E,0<=e.a.A(r,M)?M=!1:(x=M.match(s),M=x===null?!1:x[1]?"Object("+x[1]+")"+x[2]:M),x=M),x&&v.push("'"+(typeof p[_]=="string"?p[_]:_)+"':function(_z){"+M+"=_z}")}P&&(E="function(){return "+E+" }"),y.push("'"+_+"':"+E)}f=f||{};var y=[],v=[],P=f.valueAccessors,c=f.bindingParams,w=typeof g=="string"?n(g):g;return e.a.D(w,function(_){u(_.key||_.unknown,_.value)}),v.length&&u("_ko_property_writers","{"+v.join(",")+" }"),y.join(",")},Id:function(g,f){for(var u=0;u<g.length;u++)if(g[u].key==f)return!0;return!1},eb:function(g,f,u,y,v){g&&e.O(g)?!e.Za(g)||v&&g.v()===y||g(y):(g=f.get("_ko_property_writers"))&&g[u]&&g[u](y)}}}(),e.b("expressionRewriting",e.m),e.b("expressionRewriting.bindingRewriteValidators",e.m.Ra),e.b("expressionRewriting.parseObjectLiteral",e.m.ac),e.b("expressionRewriting.preProcessBindings",e.m.vb),e.b("expressionRewriting._twoWayBindings",e.m.wa),e.b("jsonExpressionRewriting",e.m),e.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",e.m.vb),function(){function n(u){return u.nodeType==8&&m.test(d?u.text:u.nodeValue)}function r(u){return u.nodeType==8&&p.test(d?u.text:u.nodeValue)}function s(u,y){for(var v=u,P=1,c=[];v=v.nextSibling;){if(r(v)&&(e.a.g.set(v,f,!0),P--,P===0))return c;c.push(v),n(v)&&P++}if(!y)throw Error("Cannot find closing comment tag to match: "+u.nodeValue);return null}function a(u,y){var v=s(u,y);return v?0<v.length?v[v.length-1].nextSibling:u.nextSibling:null}var d=o&&o.createComment("test").text==="<!--test-->",m=d?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,p=d?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,g={ul:!0,ol:!0},f="__ko_matchedEndComment__";e.h={ea:{},childNodes:function(u){return n(u)?s(u):u.childNodes},Ea:function(u){if(n(u)){u=e.h.childNodes(u);for(var y=0,v=u.length;y<v;y++)e.removeNode(u[y])}else e.a.Tb(u)},va:function(u,y){if(n(u)){e.h.Ea(u);for(var v=u.nextSibling,P=0,c=y.length;P<c;P++)v.parentNode.insertBefore(y[P],v)}else e.a.va(u,y)},Vc:function(u,y){var v;n(u)?(v=u.nextSibling,u=u.parentNode):v=u.firstChild,v?y!==v&&u.insertBefore(y,v):u.appendChild(y)},Wb:function(u,y,v){v?(v=v.nextSibling,n(u)&&(u=u.parentNode),v?y!==v&&u.insertBefore(y,v):u.appendChild(y)):e.h.Vc(u,y)},firstChild:function(u){if(n(u))return!u.nextSibling||r(u.nextSibling)?null:u.nextSibling;if(u.firstChild&&r(u.firstChild))throw Error("Found invalid end comment, as the first child of "+u);return u.firstChild},nextSibling:function(u){if(n(u)&&(u=a(u)),u.nextSibling&&r(u.nextSibling)){var y=u.nextSibling;if(r(y)&&!e.a.g.get(y,f))throw Error("Found end comment without a matching opening comment, as child of "+u);return null}return u.nextSibling},Cd:n,Vd:function(u){return(u=(d?u.text:u.nodeValue).match(m))?u[1]:null},Sc:function(u){if(g[e.a.R(u)]){var y=u.firstChild;if(y)do if(y.nodeType===1){var v;v=y.firstChild;var P=null;if(v)do if(P)P.push(v);else if(n(v)){var c=a(v,!0);c?v=c:P=[v]}else r(v)&&(P=[v]);while(v=v.nextSibling);if(v=P)for(P=y.nextSibling,c=0;c<v.length;c++)P?u.insertBefore(v[c],P):u.appendChild(v[c])}while(y=y.nextSibling)}}}}(),e.b("virtualElements",e.h),e.b("virtualElements.allowedBindings",e.h.ea),e.b("virtualElements.emptyNode",e.h.Ea),e.b("virtualElements.insertAfter",e.h.Wb),e.b("virtualElements.prepend",e.h.Vc),e.b("virtualElements.setDomNodeChildren",e.h.va),function(){e.ga=function(){this.nd={}},e.a.extend(e.ga.prototype,{nodeHasBindings:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind")!=null||e.j.getComponentNameForNode(n);case 8:return e.h.Cd(n);default:return!1}},getBindings:function(n,r){var s=this.getBindingsString(n,r),s=s?this.parseBindingsString(s,r,n):null;return e.j.tc(s,n,r,!1)},getBindingAccessors:function(n,r){var s=this.getBindingsString(n,r),s=s?this.parseBindingsString(s,r,n,{valueAccessors:!0}):null;return e.j.tc(s,n,r,!0)},getBindingsString:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind");case 8:return e.h.Vd(n);default:return null}},parseBindingsString:function(n,r,s,a){try{var d=this.nd,m=n+(a&&a.valueAccessors||""),p;if(!(p=d[m])){var g,f="with($context){with($data||{}){return{"+e.m.vb(n,a)+"}}}";g=new Function("$context","$element",f),p=d[m]=g}return p(r,s)}catch(u){throw u.message=`Unable to parse bindings.
Bindings value: `+n+`
Message: `+u.message,u}}}),e.ga.instance=new e.ga}(),e.b("bindingProvider",e.ga),function(){function n(x){var T=(x=e.a.g.get(x,M))&&x.N;T&&(x.N=null,T.Tc())}function r(x,T,I){this.node=x,this.yc=T,this.kb=[],this.H=!1,T.N||e.a.K.za(x,n),I&&I.N&&(I.N.kb.push(x),this.Kb=I)}function s(x){return function(){return x}}function a(x){return x()}function d(x){return e.a.Ga(e.u.G(x),function(T,I){return function(){return x()[I]}})}function m(x,T,I){return typeof x=="function"?d(x.bind(null,T,I)):e.a.Ga(x,s)}function p(x,T){return d(this.getBindings.bind(this,x,T))}function g(x,T){var I=e.h.firstChild(T);if(I){var B,z=e.ga.instance,U=z.preprocessNode;if(U){for(;B=I;)I=e.h.nextSibling(B),U.call(z,B);I=e.h.firstChild(T)}for(;B=I;)I=e.h.nextSibling(B),f(x,B)}e.i.ma(T,e.i.H)}function f(x,T){var I=x,B=T.nodeType===1;B&&e.h.Sc(T),(B||e.ga.instance.nodeHasBindings(T))&&(I=y(T,null,x).bindingContextForDescendants),I&&!_[e.a.R(T)]&&g(I,T)}function u(x){var T=[],I={},B=[];return e.a.P(x,function z(U){if(!I[U]){var J=e.getBindingHandler(U);J&&(J.after&&(B.push(U),e.a.D(J.after,function(Ht){if(x[Ht]){if(e.a.A(B,Ht)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+B.join(", "));z(Ht)}}),B.length--),T.push({key:U,Mc:J})),I[U]=!0}}),T}function y(x,T,I){var B=e.a.g.Ub(x,M,{}),z=B.hd;if(!T){if(z)throw Error("You cannot apply bindings multiple times to the same element.");B.hd=!0}z||(B.context=I),B.Zb||(B.Zb={});var U;if(T&&typeof T!="function")U=T;else{var J=e.ga.instance,Ht=J.getBindingAccessors||p,Ot=e.$(function(){return(U=T?T(I,x):Ht.call(J,x,I))&&(I[P]&&I[P](),I[w]&&I[w]()),U},null,{l:x});U&&Ot.ja()||(Ot=null)}var Kt=I,zt;if(U){var te=function(){return e.a.Ga(Ot?Ot():U,a)},ue=Ot?function(ct){return function(){return a(Ot()[ct])}}:function(ct){return U[ct]};te.get=function(ct){return U[ct]&&a(ue(ct))},te.has=function(ct){return ct in U},e.i.H in U&&e.i.subscribe(x,e.i.H,function(){var ct=(0,U[e.i.H])();if(ct){var ye=e.h.childNodes(x);ye.length&&ct(ye,e.Ec(ye[0]))}}),e.i.pa in U&&(Kt=e.i.Cb(x,I),e.i.subscribe(x,e.i.pa,function(){var ct=(0,U[e.i.pa])();ct&&e.h.firstChild(x)&&ct(x)})),B=u(U),e.a.D(B,function(ct){var ye=ct.Mc.init,Ae=ct.Mc.update,ve=ct.key;if(x.nodeType===8&&!e.h.ea[ve])throw Error("The binding '"+ve+"' cannot be used with virtual elements");try{typeof ye=="function"&&e.u.G(function(){var ke=ye(x,ue(ve),te,Kt.$data,Kt);if(ke&&ke.controlsDescendantBindings){if(zt!==t)throw Error("Multiple bindings ("+zt+" and "+ve+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");zt=ve}}),typeof Ae=="function"&&e.$(function(){Ae(x,ue(ve),te,Kt.$data,Kt)},null,{l:x})}catch(ke){throw ke.message='Unable to process binding "'+ve+": "+U[ve]+`"
Message: `+ke.message,ke}})}return B=zt===t,{shouldBindDescendants:B,bindingContextForDescendants:B&&Kt}}function v(x,T){return x&&x instanceof e.fa?x:new e.fa(x,t,t,T)}var P=e.a.Da("_subscribable"),c=e.a.Da("_ancestorBindingInfo"),w=e.a.Da("_dataDependency");e.c={};var _={script:!0,textarea:!0,template:!0};e.getBindingHandler=function(x){return e.c[x]};var E={};e.fa=function(x,T,I,B,z){function U(){var ue=Kt?Ot():Ot,ct=e.a.f(ue);return T?(e.a.extend(J,T),c in T&&(J[c]=T[c])):(J.$parents=[],J.$root=ct,J.ko=e),J[P]=zt,Ht?ct=J.$data:(J.$rawData=ue,J.$data=ct),I&&(J[I]=ct),B&&B(J,T,ct),T&&T[P]&&!e.S.o().Vb(T[P])&&T[P](),te&&(J[w]=te),J.$data}var J=this,Ht=x===E,Ot=Ht?t:x,Kt=typeof Ot=="function"&&!e.O(Ot),zt,te=z&&z.dataDependency;z&&z.exportDependencies?U():(zt=e.xb(U),zt.v(),zt.ja()?zt.equalityComparer=null:J[P]=t)},e.fa.prototype.createChildContext=function(x,T,I,B){if(!B&&T&&typeof T=="object"&&(B=T,T=B.as,I=B.extend),T&&B&&B.noChildContext){var z=typeof x=="function"&&!e.O(x);return new e.fa(E,this,null,function(U){I&&I(U),U[T]=z?x():x},B)}return new e.fa(x,this,T,function(U,J){U.$parentContext=J,U.$parent=J.$data,U.$parents=(J.$parents||[]).slice(0),U.$parents.unshift(U.$parent),I&&I(U)},B)},e.fa.prototype.extend=function(x,T){return new e.fa(E,this,null,function(I){e.a.extend(I,typeof x=="function"?x(I):x)},T)};var M=e.a.g.Z();r.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},r.prototype.sd=function(x){e.a.Pa(this.kb,x),!this.kb.length&&this.H&&this.Cc()},r.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,e.a.K.yb(this.node,n),e.i.ma(this.node,e.i.pa),this.Tc())},e.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(x,T,I,B,z){var U=e.a.g.Ub(x,M,{});return U.Fa||(U.Fa=new e.T),z&&z.notifyImmediately&&U.Zb[T]&&e.u.G(I,B,[x]),U.Fa.subscribe(I,B,T)},ma:function(x,T){var I=e.a.g.get(x,M);if(I&&(I.Zb[T]=!0,I.Fa&&I.Fa.notifySubscribers(x,T),T==e.i.H)){if(I.N)I.N.Cc();else if(I.N===t&&I.Fa&&I.Fa.Wa(e.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")}},Cb:function(x,T){var I=e.a.g.Ub(x,M,{});return I.N||(I.N=new r(x,I,T[c])),T[c]==I?T:T.extend(function(B){B[c]=I})}},e.Td=function(x){return(x=e.a.g.get(x,M))&&x.context},e.ib=function(x,T,I){return x.nodeType===1&&e.h.Sc(x),y(x,T,v(I))},e.ld=function(x,T,I){return I=v(I),e.ib(x,m(T,I,x),I)},e.Oa=function(x,T){T.nodeType!==1&&T.nodeType!==8||g(v(x),T)},e.vc=function(x,T,I){if(!h&&i.jQuery&&(h=i.jQuery),2>arguments.length){if(T=o.body,!T)throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!T||T.nodeType!==1&&T.nodeType!==8)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");f(v(x,I),T)},e.Dc=function(x){return!x||x.nodeType!==1&&x.nodeType!==8?t:e.Td(x)},e.Ec=function(x){return(x=e.Dc(x))?x.$data:t},e.b("bindingHandlers",e.c),e.b("bindingEvent",e.i),e.b("bindingEvent.subscribe",e.i.subscribe),e.b("bindingEvent.startPossiblyAsyncContentBinding",e.i.Cb),e.b("applyBindings",e.vc),e.b("applyBindingsToDescendants",e.Oa),e.b("applyBindingAccessorsToNode",e.ib),e.b("applyBindingsToNode",e.ld),e.b("contextFor",e.Dc),e.b("dataFor",e.Ec)}(),function(n){function r(p,g){var f=Object.prototype.hasOwnProperty.call(d,p)?d[p]:n,u;f?f.subscribe(g):(f=d[p]=new e.T,f.subscribe(g),s(p,function(y,v){var P=!(!v||!v.synchronous);m[p]={definition:y,Gd:P},delete d[p],u||P?f.notifySubscribers(y):e.na.zb(function(){f.notifySubscribers(y)})}),u=!0)}function s(p,g){a("getConfig",[p],function(f){f?a("loadComponent",[p,f],function(u){g(u,f)}):g(null,null)})}function a(p,g,f,u){u||(u=e.j.loaders.slice(0));var y=u.shift();if(y){var v=y[p];if(v){var P=!1;if(v.apply(y,g.concat(function(c){P?f(null):c!==null?f(c):a(p,g,f,u)}))!==n&&(P=!0,!y.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else a(p,g,f,u)}else f(null)}var d={},m={};e.j={get:function(p,g){var f=Object.prototype.hasOwnProperty.call(m,p)?m[p]:n;f?f.Gd?e.u.G(function(){g(f.definition)}):e.na.zb(function(){g(f.definition)}):r(p,g)},Bc:function(p){delete m[p]},oc:a},e.j.loaders=[],e.b("components",e.j),e.b("components.get",e.j.get),e.b("components.clearCachedDefinition",e.j.Bc)}(),function(){function n(f,u,y,v){function P(){--w===0&&v(c)}var c={},w=2,_=y.template;y=y.viewModel,_?d(u,_,function(E){e.j.oc("loadTemplate",[f,E],function(M){c.template=M,P()})}):P(),y?d(u,y,function(E){e.j.oc("loadViewModel",[f,E],function(M){c[g]=M,P()})}):P()}function r(f,u,y){if(typeof u=="function")y(function(P){return new u(P)});else if(typeof u[g]=="function")y(u[g]);else if("instance"in u){var v=u.instance;y(function(){return v})}else"viewModel"in u?r(f,u.viewModel,y):f("Unknown viewModel value: "+u)}function s(f){switch(e.a.R(f)){case"script":return e.a.ua(f.text);case"textarea":return e.a.ua(f.value);case"template":if(a(f.content))return e.a.Ca(f.content.childNodes)}return e.a.Ca(f.childNodes)}function a(f){return i.DocumentFragment?f instanceof DocumentFragment:f&&f.nodeType===11}function d(f,u,y){typeof u.require=="string"?S||i.require?(S||i.require)([u.require],function(v){v&&typeof v=="object"&&v.Xd&&v.default&&(v=v.default),y(v)}):f("Uses require, but no AMD loader is present"):y(u)}function m(f){return function(u){throw Error("Component '"+f+"': "+u)}}var p={};e.j.register=function(f,u){if(!u)throw Error("Invalid configuration for "+f);if(e.j.tb(f))throw Error("Component "+f+" is already registered");p[f]=u},e.j.tb=function(f){return Object.prototype.hasOwnProperty.call(p,f)},e.j.unregister=function(f){delete p[f],e.j.Bc(f)},e.j.Fc={getConfig:function(f,u){u(e.j.tb(f)?p[f]:null)},loadComponent:function(f,u,y){var v=m(f);d(v,u,function(P){n(f,v,P,y)})},loadTemplate:function(f,u,y){if(f=m(f),typeof u=="string")y(e.a.ua(u));else if(u instanceof Array)y(u);else if(a(u))y(e.a.la(u.childNodes));else if(u.element)if(u=u.element,i.HTMLElement?u instanceof HTMLElement:u&&u.tagName&&u.nodeType===1)y(s(u));else if(typeof u=="string"){var v=o.getElementById(u);v?y(s(v)):f("Cannot find element with ID "+u)}else f("Unknown element type: "+u);else f("Unknown template value: "+u)},loadViewModel:function(f,u,y){r(m(f),u,y)}};var g="createViewModel";e.b("components.register",e.j.register),e.b("components.isRegistered",e.j.tb),e.b("components.unregister",e.j.unregister),e.b("components.defaultLoader",e.j.Fc),e.j.loaders.push(e.j.Fc),e.j.dd=p}(),function(){function n(s,a){var d=s.getAttribute("params");if(d){var d=r.parseBindingsString(d,a,s,{valueAccessors:!0,bindingParams:!0}),d=e.a.Ga(d,function(g){return e.o(g,null,{l:s})}),m=e.a.Ga(d,function(g){var f=g.v();return g.ja()?e.o({read:function(){return e.a.f(g())},write:e.Za(f)&&function(u){g()(u)},l:s}):f});return Object.prototype.hasOwnProperty.call(m,"$raw")||(m.$raw=d),m}return{$raw:{}}}e.j.getComponentNameForNode=function(s){var a=e.a.R(s);if(e.j.tb(a)&&(a.indexOf("-")!=-1||""+s=="[object HTMLUnknownElement]"||8>=e.a.W&&s.tagName===a))return a},e.j.tc=function(s,a,d,m){if(a.nodeType===1){var p=e.j.getComponentNameForNode(a);if(p){if(s=s||{},s.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var g={name:p,params:n(a,d)};s.component=m?function(){return g}:g}}return s};var r=new e.ga;9>e.a.W&&(e.j.register=function(s){return function(a){return s.apply(this,arguments)}}(e.j.register),o.createDocumentFragment=function(s){return function(){var a=s(),d=e.j.dd,m;for(m in d);return a}}(o.createDocumentFragment))}(),function(){function n(a,d,m){if(d=d.template,!d)throw Error("Component '"+a+"' has no template");a=e.a.Ca(d),e.h.va(m,a)}function r(a,d,m){var p=a.createViewModel;return p?p.call(a,d,m):d}var s=0;e.c.component={init:function(a,d,m,p,g){function f(){var c=u&&u.dispose;typeof c=="function"&&c.call(u),v&&v.s(),y=u=v=null}var u,y,v,P=e.a.la(e.h.childNodes(a));return e.h.Ea(a),e.a.K.za(a,f),e.o(function(){var c=e.a.f(d()),w,_;if(typeof c=="string"?w=c:(w=e.a.f(c.name),_=e.a.f(c.params)),!w)throw Error("No component name specified");var E=e.i.Cb(a,g),M=y=++s;e.j.get(w,function(x){if(y===M){if(f(),!x)throw Error("Unknown component '"+w+"'");n(w,x,a);var T=r(x,_,{element:a,templateNodes:P});x=E.createChildContext(T,{extend:function(I){I.$component=T,I.$componentTemplateNodes=P}}),T&&T.koDescendantsComplete&&(v=e.i.subscribe(a,e.i.pa,T.koDescendantsComplete,T)),u=T,e.Oa(x,a)}})},null,{l:a}),{controlsDescendantBindings:!0}}},e.h.ea.component=!0}();var St={class:"className",for:"htmlFor"};e.c.attr={update:function(n,r){var s=e.a.f(r())||{};e.a.P(s,function(a,d){d=e.a.f(d);var m=a.indexOf(":"),m="lookupNamespaceURI"in n&&0<m&&n.lookupNamespaceURI(a.substr(0,m)),p=d===!1||d===null||d===t;p?m?n.removeAttributeNS(m,a):n.removeAttribute(a):d=d.toString(),8>=e.a.W&&a in St?(a=St[a],p?n.removeAttribute(a):n[a]=d):p||(m?n.setAttributeNS(m,a,d):n.setAttribute(a,d)),a==="name"&&e.a.Yc(n,p?"":d)})}},function(){e.c.checked={after:["value","attr"],init:function(n,r,s){function a(){var c=n.checked,w=m();if(!e.S.Ya()&&(c||!g&&!e.S.qa())){var _=e.u.G(r);if(u){var E=y?_.v():_,M=P;P=w,M!==w?c&&(e.a.Na(E,w,!0),e.a.Na(E,M,!1)):e.a.Na(E,w,c),y&&e.Za(_)&&_(E)}else p&&(w===t?w=c:c||(w=t)),e.m.eb(_,s,"checked",w,!0)}}function d(){var c=e.a.f(r()),w=m();u?(n.checked=0<=e.a.A(c,w),P=w):n.checked=p&&w===t?!!c:m()===c}var m=e.xb(function(){if(s.has("checkedValue"))return e.a.f(s.get("checkedValue"));if(v)return s.has("value")?e.a.f(s.get("value")):n.value}),p=n.type=="checkbox",g=n.type=="radio";if(p||g){var f=r(),u=p&&e.a.f(f)instanceof Array,y=!(u&&f.push&&f.splice),v=g||u,P=u?m():t;g&&!n.name&&e.c.uniqueName.init(n,function(){return!0}),e.o(a,null,{l:n}),e.a.B(n,"click",a),e.o(d,null,{l:n}),f=t}}},e.m.wa.checked=!0,e.c.checkedValue={update:function(n,r){n.value=e.a.f(r())}}}(),e.c.class={update:function(n,r){var s=e.a.Db(e.a.f(r()));e.a.Eb(n,n.__ko__cssValue,!1),n.__ko__cssValue=s,e.a.Eb(n,s,!0)}},e.c.css={update:function(n,r){var s=e.a.f(r());s!==null&&typeof s=="object"?e.a.P(s,function(a,d){d=e.a.f(d),e.a.Eb(n,a,d)}):e.c.class.update(n,r)}},e.c.enable={update:function(n,r){var s=e.a.f(r());s&&n.disabled?n.removeAttribute("disabled"):s||n.disabled||(n.disabled=!0)}},e.c.disable={update:function(n,r){e.c.enable.update(n,function(){return!e.a.f(r())})}},e.c.event={init:function(n,r,s,a,d){var m=r()||{};e.a.P(m,function(p){typeof p=="string"&&e.a.B(n,p,function(g){var f,u=r()[p];if(u){try{var y=e.a.la(arguments);a=d.$data,y.unshift(a),f=u.apply(a,y)}finally{f!==!0&&(g.preventDefault?g.preventDefault():g.returnValue=!1)}s.get(p+"Bubble")===!1&&(g.cancelBubble=!0,g.stopPropagation&&g.stopPropagation())}})})}},e.c.foreach={Rc:function(n){return function(){var r=n(),s=e.a.bc(r);return!s||typeof s.length=="number"?{foreach:r,templateEngine:e.ba.Ma}:(e.a.f(r),{foreach:s.data,as:s.as,noChildContext:s.noChildContext,includeDestroyed:s.includeDestroyed,afterAdd:s.afterAdd,beforeRemove:s.beforeRemove,afterRender:s.afterRender,beforeMove:s.beforeMove,afterMove:s.afterMove,templateEngine:e.ba.Ma})}},init:function(n,r){return e.c.template.init(n,e.c.foreach.Rc(r))},update:function(n,r,s,a,d){return e.c.template.update(n,e.c.foreach.Rc(r),s,a,d)}},e.m.Ra.foreach=!1,e.h.ea.foreach=!0,e.c.hasfocus={init:function(n,r,s){function a(p){n.__ko_hasfocusUpdating=!0;var g=n.ownerDocument;if("activeElement"in g){var f;try{f=g.activeElement}catch{f=g.body}p=f===n}g=r(),e.m.eb(g,s,"hasfocus",p,!0),n.__ko_hasfocusLastValue=p,n.__ko_hasfocusUpdating=!1}var d=a.bind(null,!0),m=a.bind(null,!1);e.a.B(n,"focus",d),e.a.B(n,"focusin",d),e.a.B(n,"blur",m),e.a.B(n,"focusout",m),n.__ko_hasfocusLastValue=!1},update:function(n,r){var s=!!e.a.f(r());n.__ko_hasfocusUpdating||n.__ko_hasfocusLastValue===s||(s?n.focus():n.blur(),!s&&n.__ko_hasfocusLastValue&&n.ownerDocument.body.focus(),e.u.G(e.a.Fb,null,[n,s?"focusin":"focusout"]))}},e.m.wa.hasfocus=!0,e.c.hasFocus=e.c.hasfocus,e.m.wa.hasFocus="hasfocus",e.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,r){e.a.fc(n,r())}},function(){function n(r,s,a){e.c[r]={init:function(d,m,p,g,f){var u,y,v={},P,c,w;if(s){g=p.get("as");var _=p.get("noChildContext");w=!(g&&_),v={as:g,noChildContext:_,exportDependencies:w}}return c=(P=p.get("completeOn")=="render")||p.has(e.i.pa),e.o(function(){var E=e.a.f(m()),M=!a!=!E,x=!y,T;(w||M!==u)&&(c&&(f=e.i.Cb(d,f)),M&&((!s||w)&&(v.dataDependency=e.S.o()),T=s?f.createChildContext(typeof E=="function"?E:m,v):e.S.qa()?f.extend(null,v):f),x&&e.S.qa()&&(y=e.a.Ca(e.h.childNodes(d),!0)),M?(x||e.h.va(d,e.a.Ca(y)),e.Oa(T,d)):(e.h.Ea(d),P||e.i.ma(d,e.i.H)),u=M)},null,{l:d}),{controlsDescendantBindings:!0}}},e.m.Ra[r]=!1,e.h.ea[r]=!0}n("if"),n("ifnot",!1,!0),n("with",!0)}(),e.c.let={init:function(n,r,s,a,d){return r=d.extend(r),e.Oa(r,n),{controlsDescendantBindings:!0}}},e.h.ea.let=!0;var xt={};e.c.options={init:function(n){if(e.a.R(n)!=="select")throw Error("options binding applies only to SELECT elements");for(;0<n.length;)n.remove(0);return{controlsDescendantBindings:!0}},update:function(n,r,s){function a(){return e.a.jb(n.options,function(_){return _.selected})}function d(_,E,M){var x=typeof E;return x=="function"?E(_):x=="string"?_[E]:M}function m(_,E){if(c&&u)e.i.ma(n,e.i.H);else if(P.length){var M=0<=e.a.A(P,e.w.M(E[0]));e.a.Zc(E[0],M),c&&!M&&e.u.G(e.a.Fb,null,[n,"change"])}}var p=n.multiple,g=n.length!=0&&p?n.scrollTop:null,f=e.a.f(r()),u=s.get("valueAllowUnset")&&s.has("value"),y=s.get("optionsIncludeDestroyed");r={};var v,P=[];u||(p?P=e.a.Mb(a(),e.w.M):0<=n.selectedIndex&&P.push(e.w.M(n.options[n.selectedIndex]))),f&&(typeof f.length>"u"&&(f=[f]),v=e.a.jb(f,function(_){return y||_===t||_===null||!e.a.f(_._destroy)}),s.has("optionsCaption")&&(f=e.a.f(s.get("optionsCaption")),f!==null&&f!==t&&v.unshift(xt)));var c=!1;if(r.beforeRemove=function(_){n.removeChild(_)},f=m,s.has("optionsAfterRender")&&typeof s.get("optionsAfterRender")=="function"&&(f=function(_,E){m(0,E),e.u.G(s.get("optionsAfterRender"),null,[E[0],_!==xt?_:t])}),e.a.ec(n,v,function(_,E,M){return M.length&&(P=!u&&M[0].selected?[e.w.M(M[0])]:[],c=!0),E=n.ownerDocument.createElement("option"),_===xt?(e.a.Bb(E,s.get("optionsCaption")),e.w.cb(E,t)):(M=d(_,s.get("optionsValue"),_),e.w.cb(E,e.a.f(M)),_=d(_,s.get("optionsText"),M),e.a.Bb(E,_)),[E]},r,f),!u){var w;p?w=P.length&&a().length<P.length:w=P.length&&0<=n.selectedIndex?e.w.M(n.options[n.selectedIndex])!==P[0]:P.length||0<=n.selectedIndex,w&&e.u.G(e.a.Fb,null,[n,"change"])}(u||e.S.Ya())&&e.i.ma(n,e.i.H),e.a.wd(n),g&&20<Math.abs(g-n.scrollTop)&&(n.scrollTop=g)}},e.c.options.$b=e.a.g.Z(),e.c.selectedOptions={init:function(n,r,s){function a(){var p=r(),g=[];e.a.D(n.getElementsByTagName("option"),function(f){f.selected&&g.push(e.w.M(f))}),e.m.eb(p,s,"selectedOptions",g)}function d(){var p=e.a.f(r()),g=n.scrollTop;p&&typeof p.length=="number"&&e.a.D(n.getElementsByTagName("option"),function(f){var u=0<=e.a.A(p,e.w.M(f));f.selected!=u&&e.a.Zc(f,u)}),n.scrollTop=g}if(e.a.R(n)!="select")throw Error("selectedOptions binding applies only to SELECT elements");var m;e.i.subscribe(n,e.i.H,function(){m?a():(e.a.B(n,"change",a),m=e.o(d,null,{l:n}))},null,{notifyImmediately:!0})},update:function(){}},e.m.wa.selectedOptions=!0,e.c.style={update:function(n,r){var s=e.a.f(r()||{});e.a.P(s,function(a,d){if(d=e.a.f(d),(d===null||d===t||d===!1)&&(d=""),h)h(n).css(a,d);else if(/^--/.test(a))n.style.setProperty(a,d);else{a=a.replace(/-(\w)/g,function(p,g){return g.toUpperCase()});var m=n.style[a];n.style[a]=d,d===m||n.style[a]!=m||isNaN(d)||(n.style[a]=d+"px")}})}},e.c.submit={init:function(n,r,s,a,d){if(typeof r()!="function")throw Error("The value for a submit binding must be a function");e.a.B(n,"submit",function(m){var p,g=r();try{p=g.call(d.$data,n)}finally{p!==!0&&(m.preventDefault?m.preventDefault():m.returnValue=!1)}})}},e.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(n,r){e.a.Bb(n,r())}},e.h.ea.text=!0,function(){if(i&&i.navigator){var n=function(v){if(v)return parseFloat(v[1])},r=i.navigator.userAgent,s,a,d,m,p;(s=i.opera&&i.opera.version&&parseInt(i.opera.version()))||(p=n(r.match(/Edge\/([^ ]+)$/)))||n(r.match(/Chrome\/([^ ]+)/))||(a=n(r.match(/Version\/([^ ]+) Safari/)))||(d=n(r.match(/Firefox\/([^ ]+)/)))||(m=e.a.W||n(r.match(/MSIE ([^ ]+)/)))||(m=n(r.match(/rv:([^ )]+)/)))}if(8<=m&&10>m)var g=e.a.g.Z(),f=e.a.g.Z(),u=function(v){var P=this.activeElement;(P=P&&e.a.g.get(P,f))&&P(v)},y=function(v,P){var c=v.ownerDocument;e.a.g.get(c,g)||(e.a.g.set(c,g,!0),e.a.B(c,"selectionchange",u)),e.a.g.set(v,f,P)};e.c.textInput={init:function(v,P,c){function w(U,J){e.a.B(v,U,J)}function _(){var U=e.a.f(P());(U===null||U===t)&&(U=""),I!==t&&U===I?e.a.setTimeout(_,4):v.value!==U&&(z=!0,v.value=U,z=!1,x=v.value)}function E(){T||(I=v.value,T=e.a.setTimeout(M,4))}function M(){clearTimeout(T),I=T=t;var U=v.value;x!==U&&(x=U,e.m.eb(P(),c,"textInput",U))}var x=v.value,T,I,B=e.a.W==9?E:M,z=!1;m&&w("keypress",M),11>m&&w("propertychange",function(U){z||U.propertyName!=="value"||B(U)}),m==8&&(w("keyup",M),w("keydown",M)),y&&(y(v,B),w("dragend",E)),(!m||9<=m)&&w("input",B),5>a&&e.a.R(v)==="textarea"?(w("keydown",E),w("paste",E),w("cut",E)):11>s?w("keydown",E):4>d?(w("DOMAutoComplete",M),w("dragdrop",M),w("drop",M)):p&&v.type==="number"&&w("keydown",E),w("change",M),w("blur",M),e.o(_,null,{l:v})}},e.m.wa.textInput=!0,e.c.textinput={preprocess:function(v,P,c){c("textInput",v)}}}(),e.c.uniqueName={init:function(n,r){if(r()){var s="ko_unique_"+ ++e.c.uniqueName.rd;e.a.Yc(n,s)}}},e.c.uniqueName.rd=0,e.c.using={init:function(n,r,s,a,d){var m;return s.has("as")&&(m={as:s.get("as"),noChildContext:s.get("noChildContext")}),r=d.createChildContext(r,m),e.Oa(r,n),{controlsDescendantBindings:!0}}},e.h.ea.using=!0,e.c.value={init:function(n,r,s){var a=e.a.R(n),d=a=="input";if(!d||n.type!="checkbox"&&n.type!="radio"){var m=[],p=s.get("valueUpdate"),g=!1,f=null;p&&(typeof p=="string"?m=[p]:m=e.a.wc(p),e.a.Pa(m,"change"));var u=function(){f=null,g=!1;var P=r(),c=e.w.M(n);e.m.eb(P,s,"value",c)};!e.a.W||!d||n.type!="text"||n.autocomplete=="off"||n.form&&n.form.autocomplete=="off"||e.a.A(m,"propertychange")!=-1||(e.a.B(n,"propertychange",function(){g=!0}),e.a.B(n,"focus",function(){g=!1}),e.a.B(n,"blur",function(){g&&u()})),e.a.D(m,function(P){var c=u;e.a.Ud(P,"after")&&(c=function(){f=e.w.M(n),e.a.setTimeout(u,0)},P=P.substring(5)),e.a.B(n,P,c)});var y;if(y=d&&n.type=="file"?function(){var P=e.a.f(r());P===null||P===t||P===""?n.value="":e.u.G(u)}:function(){var P=e.a.f(r()),c=e.w.M(n);f!==null&&P===f?e.a.setTimeout(y,0):(P!==c||c===t)&&(a==="select"?(c=s.get("valueAllowUnset"),e.w.cb(n,P,c),c||P===e.w.M(n)||e.u.G(u)):e.w.cb(n,P))},a==="select"){var v;e.i.subscribe(n,e.i.H,function(){v?s.get("valueAllowUnset")?y():u():(e.a.B(n,"change",u),v=e.o(y,null,{l:n}))},null,{notifyImmediately:!0})}else e.a.B(n,"change",u),e.o(y,null,{l:n})}else e.ib(n,{checkedValue:r})},update:function(){}},e.m.wa.value=!0,e.c.visible={update:function(n,r){var s=e.a.f(r()),a=n.style.display!="none";s&&!a?n.style.display="":!s&&a&&(n.style.display="none")}},e.c.hidden={update:function(n,r){e.c.visible.update(n,function(){return!e.a.f(r())})}},function(n){e.c[n]={init:function(r,s,a,d,m){return e.c.event.init.call(this,r,function(){var p={};return p[n]=s(),p},a,d,m)}}}("click"),e.ca=function(){},e.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},e.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},e.ca.prototype.makeTemplateSource=function(n,r){if(typeof n=="string"){r=r||o;var s=r.getElementById(n);if(!s)throw Error("Cannot find template with ID "+n);return new e.C.F(s)}if(n.nodeType==1||n.nodeType==8)return new e.C.ia(n);throw Error("Unknown template type: "+n)},e.ca.prototype.renderTemplate=function(n,r,s,a){return n=this.makeTemplateSource(n,a),this.renderTemplateSource(n,r,s,a)},e.ca.prototype.isTemplateRewritten=function(n,r){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(n,r).data("isRewritten")},e.ca.prototype.rewriteTemplate=function(n,r,s){n=this.makeTemplateSource(n,s),r=r(n.text()),n.text(r),n.data("isRewritten",!0)},e.b("templateEngine",e.ca),e.kc=function(){function n(a,d,m,p){a=e.m.ac(a);for(var g=e.m.Ra,f=0;f<a.length;f++){var u=a[f].key;if(Object.prototype.hasOwnProperty.call(g,u)){var y=g[u];if(typeof y=="function"){if(u=y(a[f].value))throw Error(u)}else if(!y)throw Error("This template engine does not support the '"+u+"' binding within its templates")}}return m="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+e.m.vb(a,{valueAccessors:!0})+" } })()},'"+m.toLowerCase()+"')",p.createJavaScriptEvaluatorBlock(m)+d}var r=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,s=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(a,d,m){d.isTemplateRewritten(a,m)||d.rewriteTemplate(a,function(p){return e.kc.Ld(p,d)},m)},Ld:function(a,d){return a.replace(r,function(m,p,g,f,u){return n(u,p,g,d)}).replace(s,function(m,p){return n(p,"<!-- ko -->","#comment",d)})},md:function(a,d){return e.aa.Xb(function(m,p){var g=m.nextSibling;g&&g.nodeName.toLowerCase()===d&&e.ib(g,a,p)})}}}(),e.b("__tr_ambtns",e.kc.md),function(){e.C={},e.C.F=function(s){if(this.F=s){var a=e.a.R(s);this.ab=a==="script"?1:a==="textarea"?2:a=="template"&&s.content&&s.content.nodeType===11?3:4}},e.C.F.prototype.text=function(){var s=this.ab===1?"text":this.ab===2?"value":"innerHTML";if(arguments.length==0)return this.F[s];var a=arguments[0];s==="innerHTML"?e.a.fc(this.F,a):this.F[s]=a};var n=e.a.g.Z()+"_";e.C.F.prototype.data=function(s){if(arguments.length===1)return e.a.g.get(this.F,n+s);e.a.g.set(this.F,n+s,arguments[1])};var r=e.a.g.Z();e.C.F.prototype.nodes=function(){var s=this.F;if(arguments.length==0){var a=e.a.g.get(s,r)||{},d=a.lb||(this.ab===3?s.content:this.ab===4?s:t);if(!d||a.jd){var m=this.text();m&&m!==a.bb&&(d=e.a.Md(m,s.ownerDocument),e.a.g.set(s,r,{lb:d,bb:m,jd:!0}))}return d}a=arguments[0],this.ab!==t&&this.text(""),e.a.g.set(s,r,{lb:a})},e.C.ia=function(s){this.F=s},e.C.ia.prototype=new e.C.F,e.C.ia.prototype.constructor=e.C.ia,e.C.ia.prototype.text=function(){if(arguments.length==0){var s=e.a.g.get(this.F,r)||{};return s.bb===t&&s.lb&&(s.bb=s.lb.innerHTML),s.bb}e.a.g.set(this.F,r,{bb:arguments[0]})},e.b("templateSources",e.C),e.b("templateSources.domElement",e.C.F),e.b("templateSources.anonymousTemplate",e.C.ia)}(),function(){function n(f,u,y){var v;for(u=e.h.nextSibling(u);f&&(v=f)!==u;)f=e.h.nextSibling(v),y(v,f)}function r(f,u){if(f.length){var y=f[0],v=f[f.length-1],P=y.parentNode,c=e.ga.instance,w=c.preprocessNode;if(w){if(n(y,v,function(_,E){var M=_.previousSibling,x=w.call(c,_);x&&(_===y&&(y=x[0]||E),_===v&&(v=x[x.length-1]||M))}),f.length=0,!y)return;y===v?f.push(y):(f.push(y,v),e.a.Ua(f,P))}n(y,v,function(_){_.nodeType!==1&&_.nodeType!==8||e.vc(u,_)}),n(y,v,function(_){_.nodeType!==1&&_.nodeType!==8||e.aa.cd(_,[u])}),e.a.Ua(f,P)}}function s(f){return f.nodeType?f:0<f.length?f[0]:null}function a(f,u,y,v,P){P=P||{};var c=(f&&s(f)||y||{}).ownerDocument,w=P.templateEngine||m;if(e.kc.xd(y,w,c),y=w.renderTemplate(y,v,P,c),typeof y.length!="number"||0<y.length&&typeof y[0].nodeType!="number")throw Error("Template engine must return an array of DOM nodes");switch(c=!1,u){case"replaceChildren":e.h.va(f,y),c=!0;break;case"replaceNode":e.a.Xc(f,y),c=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+u)}return c&&(r(y,v),P.afterRender&&e.u.G(P.afterRender,null,[y,v[P.as||"$data"]]),u=="replaceChildren"&&e.i.ma(f,e.i.H)),y}function d(f,u,y){return e.O(f)?f():typeof f=="function"?f(u,y):f}var m;e.gc=function(f){if(f!=t&&!(f instanceof e.ca))throw Error("templateEngine must inherit from ko.templateEngine");m=f},e.dc=function(f,u,y,v,P){if(y=y||{},(y.templateEngine||m)==t)throw Error("Set a template engine before calling renderTemplate");if(P=P||"replaceChildren",v){var c=s(v);return e.$(function(){var _=u&&u instanceof e.fa?u:new e.fa(u,null,null,null,{exportDependencies:!0}),w=d(f,_.$data,_),_=a(v,P,w,_,y);P=="replaceNode"&&(v=_,c=s(v))},null,{Sa:function(){return!c||!e.a.Sb(c)},l:c&&P=="replaceNode"?c.parentNode:c})}return e.aa.Xb(function(w){e.dc(f,u,y,w,"replaceNode")})},e.Qd=function(f,u,y,v,P){function c(I,B){e.u.G(e.a.ec,null,[v,I,_,y,w,B]),e.i.ma(v,e.i.H)}function w(I,B){r(B,E),y.afterRender&&y.afterRender(B,I),E=null}function _(I,B){E=P.createChildContext(I,{as:M,noChildContext:y.noChildContext,extend:function(U){U.$index=B,M&&(U[M+"Index"]=B)}});var z=d(f,I,E);return a(v,"ignoreTargetNode",z,E,y)}var E,M=y.as,x=y.includeDestroyed===!1||e.options.foreachHidesDestroyed&&!y.includeDestroyed;if(x||y.beforeRemove||!e.Pc(u))return e.$(function(){var I=e.a.f(u)||[];typeof I.length>"u"&&(I=[I]),x&&(I=e.a.jb(I,function(B){return B===t||B===null||!e.a.f(B._destroy)})),c(I)},null,{l:v});c(u.v());var T=u.subscribe(function(I){c(u(),I)},null,"arrayChange");return T.l(v),T};var p=e.a.g.Z(),g=e.a.g.Z();e.c.template={init:function(f,u){var y=e.a.f(u());if(typeof y=="string"||"name"in y)e.h.Ea(f);else if("nodes"in y){if(y=y.nodes||[],e.O(y))throw Error('The "nodes" option must be a plain, non-observable array.');var v=y[0]&&y[0].parentNode;v&&e.a.g.get(v,g)||(v=e.a.Yb(y),e.a.g.set(v,g,!0)),new e.C.ia(f).nodes(v)}else if(y=e.h.childNodes(f),0<y.length)v=e.a.Yb(y),new e.C.ia(f).nodes(v);else throw Error("Anonymous template defined, but no template content was provided");return{controlsDescendantBindings:!0}},update:function(f,u,y,v,P){var c=u();u=e.a.f(c),y=!0,v=null,typeof u=="string"?u={}:(c="name"in u?u.name:f,"if"in u&&(y=e.a.f(u.if)),y&&"ifnot"in u&&(y=!e.a.f(u.ifnot)),y&&!c&&(y=!1)),"foreach"in u?v=e.Qd(c,y&&u.foreach||[],u,f,P):y?(y=P,"data"in u&&(y=P.createChildContext(u.data,{as:u.as,noChildContext:u.noChildContext,exportDependencies:!0})),v=e.dc(c,y,u,f)):e.h.Ea(f),P=v,(u=e.a.g.get(f,p))&&typeof u.s=="function"&&u.s(),e.a.g.set(f,p,!P||P.ja&&!P.ja()?t:P)}},e.m.Ra.template=function(f){return f=e.m.ac(f),f.length==1&&f[0].unknown||e.m.Id(f,"name")?null:"This template engine does not support anonymous templates nested within its templates"},e.h.ea.template=!0}(),e.b("setTemplateEngine",e.gc),e.b("renderTemplate",e.dc),e.a.Kc=function(n,r,s){if(n.length&&r.length){var a,d,m,p,g;for(a=d=0;(!s||a<s)&&(p=n[d]);++d){for(m=0;g=r[m];++m)if(p.value===g.value){p.moved=g.index,g.moved=p.index,r.splice(m,1),a=m=0;break}a+=m}}},e.a.Pb=function(){function n(r,s,a,d,m){var p=Math.min,g=Math.max,f=[],u,y=r.length,v,P=s.length,c=P-y||1,w=y+P+1,_,E,M;for(u=0;u<=y;u++)for(E=_,f.push(_=[]),M=p(P,u+c),v=g(0,u-1);v<=M;v++)_[v]=v?u?r[u-1]===s[v-1]?E[v-1]:p(E[v]||w,_[v-1]||w)+1:v+1:u+1;for(p=[],g=[],c=[],u=y,v=P;u||v;)P=f[u][v]-1,v&&P===f[u][v-1]?g.push(p[p.length]={status:a,value:s[--v],index:v}):u&&P===f[u-1][v]?c.push(p[p.length]={status:d,value:r[--u],index:u}):(--v,--u,m.sparse||p.push({status:"retained",value:s[v]}));return e.a.Kc(c,g,!m.dontLimitMoves&&10*y),p.reverse()}return function(r,s,a){return a=typeof a=="boolean"?{dontLimitMoves:a}:a||{},r=r||[],s=s||[],r.length<s.length?n(r,s,"added","deleted",a):n(s,r,"deleted","added",a)}}(),e.b("utils.compareArrays",e.a.Pb),function(){function n(a,d,m,p,g){var f=[],u=e.$(function(){var y=d(m,g,e.a.Ua(f,a))||[];0<f.length&&(e.a.Xc(f,y),p&&e.u.G(p,null,[m,y,g])),f.length=0,e.a.Nb(f,y)},null,{l:a,Sa:function(){return!e.a.kd(f)}});return{Y:f,$:u.ja()?u:t}}var r=e.a.g.Z(),s=e.a.g.Z();e.a.ec=function(a,d,m,p,g,f){function u(ct){z={Aa:ct,pb:e.ta(E++)},w.push(z),c||B.push(z)}function y(ct){z=P[ct],E!==z.pb.v()&&I.push(z),z.pb(E++),e.a.Ua(z.Y,a),w.push(z)}function v(ct,ye){if(ct)for(var Ae=0,ve=ye.length;Ae<ve;Ae++)e.a.D(ye[Ae].Y,function(ke){ct(ke,Ae,ye[Ae].Aa)})}d=d||[],typeof d.length>"u"&&(d=[d]),p=p||{};var P=e.a.g.get(a,r),c=!P,w=[],_=0,E=0,M=[],x=[],T=[],I=[],B=[],z,U=0;if(c)e.a.D(d,u);else{if(!f||P&&P._countWaitingForRemove){var J=e.a.Mb(P,function(ct){return ct.Aa});f=e.a.Pb(J,d,{dontLimitMoves:p.dontLimitMoves,sparse:!0})}for(var J=0,Ht,Ot,Kt;Ht=f[J];J++)switch(Ot=Ht.moved,Kt=Ht.index,Ht.status){case"deleted":for(;_<Kt;)y(_++);Ot===t&&(z=P[_],z.$&&(z.$.s(),z.$=t),e.a.Ua(z.Y,a).length&&(p.beforeRemove&&(w.push(z),U++,z.Aa===s?z=null:T.push(z)),z&&M.push.apply(M,z.Y))),_++;break;case"added":for(;E<Kt;)y(_++);Ot!==t?(x.push(w.length),y(Ot)):u(Ht.value)}for(;E<d.length;)y(_++);w._countWaitingForRemove=U}e.a.g.set(a,r,w),v(p.beforeMove,I),e.a.D(M,p.beforeRemove?e.oa:e.removeNode);var zt,te,ue;try{ue=a.ownerDocument.activeElement}catch{}if(x.length)for(;(J=x.shift())!=t;){for(z=w[J],zt=t;J;)if((te=w[--J].Y)&&te.length){zt=te[te.length-1];break}for(d=0;_=z.Y[d];zt=_,d++)e.h.Wb(a,_,zt)}for(J=0;z=w[J];J++){for(z.Y||e.a.extend(z,n(a,m,z.Aa,g,z.pb)),d=0;_=z.Y[d];zt=_,d++)e.h.Wb(a,_,zt);!z.Ed&&g&&(g(z.Aa,z.Y,z.pb),z.Ed=!0,zt=z.Y[z.Y.length-1])}for(ue&&a.ownerDocument.activeElement!=ue&&ue.focus(),v(p.beforeRemove,T),J=0;J<T.length;++J)T[J].Aa=s;v(p.afterMove,I),v(p.afterAdd,B)}}(),e.b("utils.setDomNodeChildrenFromArrayMapping",e.a.ec),e.ba=function(){this.allowTemplateRewriting=!1},e.ba.prototype=new e.ca,e.ba.prototype.constructor=e.ba,e.ba.prototype.renderTemplateSource=function(n,r,s,a){return(r=!(9>e.a.W)&&n.nodes?n.nodes():null)?e.a.la(r.cloneNode(!0).childNodes):(n=n.text(),e.a.ua(n,a))},e.ba.Ma=new e.ba,e.gc(e.ba.Ma),e.b("nativeTemplateEngine",e.ba),function(){e.$a=function(){var r=this.Hd=function(){if(!h||!h.tmpl)return 0;try{if(0<=h.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch{}return 1}();this.renderTemplateSource=function(s,a,d,m){if(m=m||o,d=d||{},2>r)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var p=s.data("precompiled");return p||(p=s.text()||"",p=h.template(null,"{{ko_with $item.koBindingContext}}"+p+"{{/ko_with}}"),s.data("precompiled",p)),s=[a.$data],a=h.extend({koBindingContext:a},d.templateOptions),a=h.tmpl(p,s,a),a.appendTo(m.createElement("div")),h.fragments={},a},this.createJavaScriptEvaluatorBlock=function(s){return"{{ko_code ((function() { return "+s+" })()) }}"},this.addTemplate=function(s,a){o.write("<script type='text/html' id='"+s+"'>"+a+"<\/script>")},0<r&&(h.tmpl.tag.ko_code={open:"__.push($1 || '');"},h.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},e.$a.prototype=new e.ca,e.$a.prototype.constructor=e.$a;var n=new e.$a;0<n.Hd&&e.gc(n),e.b("jqueryTmplTemplateEngine",e.$a)}()})})()})()})();var pr=ko;typeof window<"u"?(ko=window.ko,typeof Qe<"u"?window.ko=Qe:delete window.ko):(ko=global.ko,typeof Qe<"u"?global.ko=Qe:delete global.ko);var Ge=pr;/**
 * @license
 * Knockout ES5 plugin - https://github.com/SteveSanderson/knockout-es5
 * Copyright (c) Steve Sanderson
 * MIT license
 */var Ai="__knockoutObservables",ki="__knockoutSubscribable";function mn(t,i){if(!t)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var o=this,l=gn(t,!0);return i=i||Object.getOwnPropertyNames(t),i.forEach(function(h){if(!(h===Ai||h===ki)&&!(h in l)){var b=t[h],C=b instanceof Array,S=o.isObservable(b)?b:C?o.observableArray(b):o.observable(b);Object.defineProperty(t,h,{configurable:!0,enumerable:!0,get:S,set:o.isWriteableObservable(S)?S:void 0}),l[h]=S,C&&gr(o,S)}}),t}function gn(t,i){var o=t[Ai];return!o&&i&&(o={},Object.defineProperty(t,Ai,{value:o})),o}function mr(t,i,o){var l=this,h={owner:t,deferEvaluation:!0};if(typeof o=="function")h.read=o;else{if("value"in o)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if(typeof o.get!="function")throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');h.read=o.get,h.write=o.set}return t[i]=l.computed(h),mn.call(l,t,[i]),t}function gr(t,i){var o=null;t.computed(function(){o&&(o.dispose(),o=null);var l=i();l instanceof Array&&(o=_r(t,i,l))})}function _r(t,i,o){var l=yr(t,o);return l.subscribe(i)}function yr(t,i){var o=i[ki];if(!o){o=new t.subscribable,Object.defineProperty(i,ki,{value:o});var l={};vr(i,o,l),wr(t,i,o,l)}return o}function vr(t,i,o){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(l){var h=t[l];t[l]=function(){var b=h.apply(this,arguments);return o.pause!==!0&&i.notifySubscribers(this),b}})}function wr(t,i,o,l){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(h){Object.defineProperty(i,h,{enumerable:!1,value:function(){var b;l.pause=!0;try{b=t.observableArray.fn[h].apply(t.observableArray(i),arguments)}finally{l.pause=!1}return o.notifySubscribers(i),b}})})}function _n(t,i){if(!t)return null;var o=gn(t,!1);return o&&o[i]||null}function br(t,i){var o=_n(t,i);o&&o.valueHasMutated()}function Sr(t){t.track=mn,t.getObservable=_n,t.valueHasMutated=br,t.defineProperty=mr}var hi={attachToKo:Sr};hi.attachToKo(Ge);ii.register(Ge);var wt=Ge;var Lt=rt(nt(),1);var bt=rt(nt(),1);function Gt(t){bt.Check.defined("scene",t),this.selectedMeasurement=void 0,this._sseh=new bt.ScreenSpaceEventHandler(t.canvas),this._scene=t}Object.defineProperties(Gt.prototype,{scene:{get:function(){return this._scene}}});Gt.prototype.activate=function(){let t=this._sseh;t.setInputAction(this._click.bind(this),bt.ScreenSpaceEventType.LEFT_CLICK),t.setInputAction(this._clickShift.bind(this),bt.ScreenSpaceEventType.LEFT_CLICK,bt.KeyboardEventModifier.SHIFT),t.setInputAction(this._mouseMove.bind(this),bt.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(this._mouseMoveShift.bind(this),bt.ScreenSpaceEventType.MOUSE_MOVE,bt.KeyboardEventModifier.SHIFT),t.setInputAction(this._handleLeftDown.bind(this),bt.ScreenSpaceEventType.LEFT_DOWN),t.setInputAction(this._handleLeftUp.bind(this),bt.ScreenSpaceEventType.LEFT_UP),t.setInputAction(this._handleDoubleClick.bind(this),bt.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)};Gt.prototype.deactivate=function(){let t=this._sseh;t.removeInputAction(bt.ScreenSpaceEventType.LEFT_CLICK),t.removeInputAction(bt.ScreenSpaceEventType.LEFT_CLICK,bt.KeyboardEventModifier.SHIFT),t.removeInputAction(bt.ScreenSpaceEventType.MOUSE_MOVE),t.removeInputAction(bt.ScreenSpaceEventType.MOUSE_MOVE,bt.KeyboardEventModifier.SHIFT),t.removeInputAction(bt.ScreenSpaceEventType.LEFT_DOWN),t.removeInputAction(bt.ScreenSpaceEventType.LEFT_UP),t.removeInputAction(bt.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)};Gt.prototype._handleDoubleClick=function(t){this.selectedMeasurement.handleDoubleClick(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};Gt.prototype._handleClick=function(t,i){this.selectedMeasurement.handleClick(t.position,i);let o=this._scene;o.requestRenderMode&&o.requestRender()};Gt.prototype._clickShift=function(t){this._handleClick(t,!0)};Gt.prototype._click=function(t){this._handleClick(t,!1)};Gt.prototype._handleMouseMove=function(t,i){this.selectedMeasurement.handleMouseMove(t.endPosition,i);let o=this._scene;o.requestRenderMode&&o.requestRender()};Gt.prototype._mouseMove=function(t){this._handleMouseMove(t,!1)};Gt.prototype._mouseMoveShift=function(t){this._handleMouseMove(t,!0)};Gt.prototype._handleLeftDown=function(t){this.selectedMeasurement.handleLeftDown(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};Gt.prototype._handleLeftUp=function(t){this.selectedMeasurement.handleLeftUp(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};Gt.prototype.isDestroyed=function(){return!1};Gt.prototype.destroy=function(){return this.deactivate(),this._sseh.destroy(),(0,bt.destroyObject)(this)};var fi=Gt;var mt=rt(nt(),1);var H=rt(nt(),1);var xr=new H.Cartesian3,Pr=new H.Cartesian3,Cr=new H.Cartesian3,di=[new H.Cartesian2,new H.Cartesian2,new H.Cartesian2,new H.Cartesian2],Ke=[new H.Cartesian3,new H.Cartesian3,new H.Cartesian3,new H.Cartesian3,new H.Cartesian3];function je(t,i){H.Check.defined("scene",t),H.Check.defined("windowCoordinates",i);let o=je._getWorldPosition(t,i,Pt,xr);if(!(0,H.defined)(o))return;let l=1e4,h=2,b=.05,C=t.camera.position,S=H.Cartesian3.distance(o,C);if(S>l)return;let O=Ke[0],R=Ke[1],V=Ke[2],Z=Ke[3],q=t.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(o,Pr);q=H.Cartesian3.negate(q,q);let Q=H.Cartesian2.clone(i,di[0]);Q.x-=h,Q.y-=h;let e=H.Cartesian2.clone(i,di[1]);e.x-=h,e.y+=h;let Tt=H.Cartesian2.clone(i,di[2]);Tt.x+=h,Tt.y+=h;let W=H.Cartesian2.clone(i,di[3]);W.x+=h,W.y-=h;let at=je._getWorldPosition(t,Q,Pt,O),pt=je._getWorldPosition(t,e,Pt,R),Mt=je._getWorldPosition(t,Tt,Pt,V),tt=je._getWorldPosition(t,W,Pt,Z),dt,ce,_e,Rt;if((0,H.defined)(at)){let n=H.Cartesian3.subtract(at,o,O);dt=H.Cartesian3.magnitude(n)/S<=b?H.Cartesian3.normalize(n,O):void 0}if((0,H.defined)(pt)){let n=H.Cartesian3.subtract(pt,o,R);ce=H.Cartesian3.magnitude(n)/S<=b?H.Cartesian3.normalize(n,R):void 0}if((0,H.defined)(Mt)){let n=H.Cartesian3.subtract(Mt,o,V);_e=H.Cartesian3.magnitude(n)/S<=b?H.Cartesian3.normalize(n,V):void 0}if((0,H.defined)(tt)){let n=H.Cartesian3.subtract(tt,o,Z);Rt=H.Cartesian3.magnitude(n)/S<=b?H.Cartesian3.normalize(n,Z):void 0}let St=H.Cartesian3.clone(H.Cartesian3.ZERO,Cr),xt=Ke[4];if((0,H.defined)(dt)&&(0,H.defined)(ce)&&(xt=H.Cartesian3.normalize(H.Cartesian3.cross(dt,ce,xt),xt),St=H.Cartesian3.add(St,xt,St)),(0,H.defined)(ce)&&(0,H.defined)(_e)&&(xt=H.Cartesian3.normalize(H.Cartesian3.cross(ce,_e,xt),xt),St=H.Cartesian3.add(St,xt,St)),(0,H.defined)(_e)&&(0,H.defined)(Rt)&&(xt=H.Cartesian3.normalize(H.Cartesian3.cross(_e,Rt,xt),xt),St=H.Cartesian3.add(St,xt,St)),(0,H.defined)(Rt)&&(0,H.defined)(dt)&&(xt=H.Cartesian3.normalize(H.Cartesian3.cross(Rt,dt,xt),xt),St=H.Cartesian3.add(St,xt,St)),!St.equals(H.Cartesian3.ZERO))return St=H.Cartesian3.normalize(St,St),H.Math.asinClamped(Math.abs(Math.sin(H.Cartesian3.angleBetween(St,q))))}je._getWorldPosition=jt;var pi=je;var Er=new mt.Cartesian3,vn=new mt.Cartographic;function yn(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <circle r="2.0788691" cy="281.90503" cx="15.212251"/>
                 </g>
               </svg>`}function Zt(t){t=t??mt.Frozen.EMPTY_OBJECT,Ct.call(this,t),this._point=this._pointCollection.add(ot.getPointOptions()),this._label=this._labelCollection.add(ot.getLabelOptions({horizontalOrigin:mt.HorizontalOrigin.LEFT,verticalOrigin:mt.VerticalOrigin.CENTER,pixelOffset:new mt.Cartesian2(10,0)})),this._position=new mt.Cartesian3,this._height=0,this._slope=0}Zt.prototype=Object.create(Ct.prototype);Zt.prototype.constructor=Zt;Object.defineProperties(Zt.prototype,{position:{get:function(){return this._position}},height:{get:function(){return this._height}},slope:{get:function(){return this._slope}},icon:{value:yn(15)},thumbnail:{value:yn(25)},type:{value:"Point coordinates"},instructions:{value:["Move the mouse to see the longitude, latitude and height of the point"]},id:{value:"pointMeasurement"}});Zt.prototype._pickPositionSupported=function(){return this._scene.pickPositionSupported};Zt.prototype.handleMouseMove=function(t){let i=this._scene;if(this.reset(),i.mode===mt.SceneMode.MORPHING)return;this._point.show=!1;let o=Zt._getWorldPosition(i,t,Pt,Er);if(!(0,mt.defined)(o))return;this._point.position=o;let l=i.frameState.mapProjection.ellipsoid.cartesianToCartographic(o,vn),h=0;(0,mt.defined)(i.globe)&&(h=i.globe.getHeight(l)??0),h=l.height-h,mt.Math.equalsEpsilon(h,0,mt.Math.EPSILON3)&&(h=0);let b;i.mode!==mt.SceneMode.SCENE2D&&(b=Zt._getSlope(i,t,this._primitives)),this._point.show=!0;let C=this._label;C.position=o,C.show=!0,this._position=mt.Cartesian3.clone(o,this._position),this._height=h,this._slope=b,this._refreshLabels()};Zt.prototype._refreshLabels=function(){let t=this._scene,i=this._label,o=t.frameState.mapProjection.ellipsoid.cartesianToCartographic(this._position,vn);i.text=`lon: ${ft.angleToString(o.longitude,vt.DEGREES_MINUTES_SECONDS,this._selectedLocale)}
lat: ${ft.angleToString(o.latitude,vt.DEGREES_MINUTES_SECONDS,this._selectedLocale)}`,t.mode!==mt.SceneMode.SCENE2D&&this._pickPositionSupported()&&(i.text+=`
height: ${ft.distanceToString(this._height,this._selectedUnits.distanceUnits,this._selectedLocale)}`,(0,mt.defined)(this._slope)&&(i.text+=`
slope: ${ft.angleToString(this._slope,this._selectedUnits.slopeUnits,this._selectedLocale,3)}`))};Zt.prototype.reset=function(){this._label.show=!1,this._point.show=!1,this._position=mt.Cartesian3.clone(mt.Cartesian3.ZERO,this._position)};Zt.prototype.isDestroyed=function(){return!1};Zt.prototype.destroy=function(){return this._labelCollection.remove(this._label),this._pointCollection.remove(this._point),(0,mt.destroyObject)(this)};Zt._getSlope=pi;Zt._getWorldPosition=jt;var mi=Zt;var _i=rt(nt(),1);var st=rt(nt(),1);var Tr=new st.Cartesian2,Mr=new st.Cartesian2,wn=new st.Cartesian2,Or=new st.Cartesian3;function ae(t){t=t??st.Frozen.EMPTY_OBJECT,st.Check.defined("options.scene",t.scene),st.Check.defined("options.primitives",t.primitives),st.Check.defined("options.units",t.units),st.Check.defined("options.points",t.points),st.Check.defined("options.labels",t.labels),t.polylineOptions=ot.getPolylineOptions({ellipsoid:t.ellipsoid}),t.pointOptions=ot.getPointOptions(),$t.call(this,t);let i=this._scene,o=t.labels;this._labelCollection=o,this._label=o.add(ot.getLabelOptions()),this._segmentLabels=[],this._segmentDistances=[],this._selectedUnits=t.units,this._selectedLocale=t.locale,this._previousDistance=0,this._distance=0;let l=this;this._removeEvent=i.preRender.addEventListener(function(){l.updateLabel()})}ae.prototype=Object.create($t.prototype);ae.prototype.constructor=ae;Object.defineProperties(ae.prototype,{distance:{get:function(){return this._distance}}});ae.prototype.updateLabel=function(){let t=this._positions;if(t.length<2)return;let i=this._scene,o=t[0],l=st.SceneTransforms.worldToWindowCoordinates(i,o,Tr),h=(0,st.defined)(l)?st.Cartesian2.clone(l,wn):st.Cartesian2.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,wn),b=h.y,C=this._segmentLabels;C[0].show=this._polyline.positions.length>2;for(let S=1;S<t.length;S++){let O=st.SceneTransforms.worldToWindowCoordinates(i,t[S],Mr);if(!(0,st.defined)(O))continue;let R=(h.y-O.y)/(O.x-h.x),V=C[S-1];R>0?V.horizontalOrigin=st.HorizontalOrigin.LEFT:V.horizontalOrigin=st.HorizontalOrigin.RIGHT,O.y<b&&(b=O.y,o=t[S]),h=st.Cartesian2.clone(O,h)}this._mode===gt.AfterDraw&&(this._label.position=o)};ae.prototype.addPoint=function(t){let i=this._positions;if(i.length>0){this._previousDistance=this._distance;let o=this._labelCollection.add(ot.getLabelOptions({scale:.8,horizontalOrigin:st.HorizontalOrigin.LEFT,verticalOrigin:st.VerticalOrigin.TOP,pixelOffset:new st.Cartesian2(5,5)})),l=i[i.length-1],h=st.Cartesian3.distance(l,t);o.position=st.Cartesian3.midpoint(l,t,new st.Cartesian3),o.text=ft.distanceToString(h,this._selectedUnits.distanceUnits,this._selectedLocale),o.show=!0,this._segmentDistances.push(h),this._segmentLabels.push(o)}$t.prototype.addPoint.call(this,t)};ae.prototype.handleClick=function(t){this._mode===gt.AfterDraw&&this.reset();let i=$t.prototype.handleClick.call(this,t);(0,st.defined)(i)&&(this._label.show=!0,this._polyline.show=!0)};ae.prototype.handleMouseMove=function(t){let i=$t.prototype.handleMouseMove.call(this,t);if(!(0,st.defined)(i))return;let o=this._positions[this._positions.length-1],l=i,h=st.Cartesian3.subtract(l,o,Or),b=this._previousDistance+st.Cartesian3.magnitude(h),C=this._label;C.position=l,C.text=ft.distanceToString(b,this._selectedUnits.distanceUnits,this._selectedLocale),C.show=!0,this._distance=b};ae.prototype._refreshLabels=function(){let t=this._label;t.text=ft.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale);let i=this._segmentLabels;for(let o=0;o<i.length;o++)i[o].text=ft.distanceToString(this._segmentDistances[o],this._selectedUnits.distanceUnits,this._selectedLocale)};ae.prototype.reset=function(){this._label.show=!1,this._label.text="",this._positions=[],this._polyline.positions=[],this._polyline.show=!1,this._previousDistance=0,this._distance=0;let t,i=this._points,o=this._pointCollection;for(t=0;t<i.length;t++)o.remove(i[t]);i.length=0;let l=this._labelCollection,h=this._segmentLabels,b=this._segmentDistances;for(t=0;t<h.length;t++)l.remove(h[t]);h.length=0,b.length=0,this._mode=gt.BeforeDraw,this._lastClickPosition.x=Number.POSITIVE_INFINITY,this._lastClickPosition.y=Number.POSITIVE_INFINITY};ae.prototype.destroy=function(){this._removeEvent();let t=this._labelCollection;t.remove(this._label);let i=this._segmentLabels;for(let o=0;o<i.length;o++)t.remove(i[o]);$t.prototype.destroy.call(this)};var gi=ae;function bn(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                  <g transform="translate(0,-267)">
                   <circle cx="3.8532958" cy="293.99896" r="2.0788691" />
                   <circle cx="7.2651663" cy="276.26389" r="2.0788691" />
                   <circle cx="24.571842" cy="285.56577" r="2.0788691" />
                   <circle cx="26.916754" cy="270.38345" r="2.0788691" />
                   <path d="m 3.7523356,294.14823 3.602242,-17.81109 17.3608064,9.35582 2.401494,-15.00934" />
                 </g>
               </svg>`}function le(t){t=t??_i.Frozen.EMPTY_OBJECT,Ct.call(this,t),this._drawing=new gi(t)}le.prototype=Object.create(Ct.prototype);le.prototype.constructor=le;Object.defineProperties(le.prototype,{distance:{get:function(){return this._drawing.distance}},icon:{value:bn(15)},thumbnail:{value:bn(25)},type:{value:"Polyline Distance"},instructions:{value:["Click to start drawing a polyline","Keep clicking to add more points","Double click to finish drawing"]},id:{value:"polylineMeasurement"}});le.prototype._refreshLabels=function(){this._drawing._refreshLabels()};le.prototype.handleDoubleClick=function(){this._drawing.handleDoubleClick()};le.prototype.handleClick=function(t){this._drawing.handleClick(t)};le.prototype.handleMouseMove=function(t){this._drawing.handleMouseMove(t)};le.prototype.reset=function(){this._drawing.reset()};le.prototype.isDestroyed=function(){return!1};le.prototype.destroy=function(){return this._drawing.destroy(),(0,_i.destroyObject)(this)};var yi=le;var G=rt(nt(),1);var Oe={BeforeDraw:0,Drawing:1,AfterDraw:2},Cn=new G.Cartesian3,Ir=new G.Cartesian2,Sn=new G.Cartesian3,Ze=new G.Cartesian3,Dr=new G.Ray,Ar=new G.Cartesian3,xn=new G.Cartographic;function Pn(t){return`<svg viewBox="0 0 30 30" height="${t}px" width="${t}px">
                 <g transform="translate(0,-267)">
                   <path d="m 15.042838,272.34414 -0.0497,18.93758"/>
                   <circle r="2.0788691" cy="270.01154" cx="15.078616"/>
                   <circle r="2.0788691" cy="293.97095" cx="15.092237"/>
                 </g>
               </svg>`}function kr(t,i){let o=t._positions,l=o[0],h=o[1],b=t._draggingPlane,C=t._surfaceNormal,S=t._scene,O=S.camera,R=O.direction,V=S.frameState.mapProjection.ellipsoid,Z=l,q=C;if(S.mode===G.SceneMode.COLUMBUS_VIEW){q=G.Cartesian3.UNIT_X;let W=V.cartesianToCartographic(l,xn);Z=S.mapProjection.project(W,Cn),G.Cartesian3.fromElements(Z.z,Z.x,Z.y,Z)}let Q=G.Cartesian3.cross(q,R,Sn);Q=G.Cartesian3.cross(q,Q,Q),Q=G.Cartesian3.normalize(Q,Q),b=G.Plane.fromPointNormal(Z,Q,b);let e=O.getPickRay(i,Dr);if(h=G.IntersectionTests.rayPlane(e,b,h),!(0,G.defined)(h))return;if(S.mode===G.SceneMode.COLUMBUS_VIEW){h=G.Cartesian3.fromElements(h.y,h.z,h.x,h);let W=S.mapProjection.unproject(h,xn);h=V.cartographicToCartesian(W,h)}return G.SceneTransforms.worldToWindowCoordinates(S,o[0],Ir).y<i.y&&(C=G.Cartesian3.negate(C,Sn)),Ze=G.Cartesian3.subtract(h,l,Ze),Ze=G.Cartesian3.projectVector(Ze,C,Ze),h=G.Cartesian3.add(l,Ze,h),h}function qt(t){t=t??G.Frozen.EMPTY_OBJECT,Ct.call(this,t);let i=this._pointCollection,o=[new G.Cartesian3,new G.Cartesian3];this._startPoint=i.add(ot.getPointOptions()),this._endPoint=i.add(ot.getPointOptions()),this._positions=o,this._polyline=this._primitives.add(new Ut(ot.getPolylineOptions({ellipsoid:this._scene.frameState.mapProjection.ellipsoid,positions:o}))),this._label=this._labelCollection.add(ot.getLabelOptions({horizontalOrigin:G.HorizontalOrigin.LEFT,verticalOrigin:G.VerticalOrigin.TOP,pixelOffset:new G.Cartesian2(10,10)})),this._mode=Oe.BeforeDraw,this._draggingPlane=new G.Plane(G.Cartesian3.UNIT_X,0),this._surfaceNormal=new G.Cartesian3,this._distance=0}qt.prototype=Object.create(Ct.prototype);qt.prototype.constructor=qt;Object.defineProperties(qt.prototype,{distance:{get:function(){return this._distance}},type:{value:"Vertical distance"},icon:{value:Pn(15)},thumbnail:{value:Pn(25)},instructions:{value:["Click on the point cloud or the globe to set the start point","Move the mouse to drag the line","Click again to set the end point","To make a new measurement, click to clear the previous measurement"]},id:{value:"verticalMeasurement"}});qt.prototype.handleClick=function(t){G.Check.defined("clickPosition",t);let i=this._scene,o=i.frameState.mapProjection.ellipsoid;this._mode===Oe.AfterDraw&&this.reset();let l=this._mode,h=this._positions;if(l===Oe.BeforeDraw){let b=qt._getWorldPosition(i,t,Pt,h[0]);if(!(0,G.defined)(b))return;this._polyline.show=!0,h[0]=G.Cartesian3.clone(b,h[0]),h[1]=G.Cartesian3.clone(b,h[1]),this._startPoint.position=b,this._startPoint.show=!0,this._mode=Oe.Drawing,this._polyline.positions=h,this._surfaceNormal=o.geodeticSurfaceNormal(b,this._surfaceNormal)}else l===Oe.Drawing&&(this._endPoint.position=h[1],this._endPoint.show=!0,this._mode=Oe.AfterDraw)};qt.prototype.handleMouseMove=function(t){if(G.Check.defined("mousePosition",t),this._mode!==Oe.Drawing)return;let i=this._label;if(this._scene.mode===G.SceneMode.SCENE2D){i.position=this._positions[0],i.text=ft.distanceToString(0,this._selectedUnits.distanceUnits,this._selectedLocale),i.show=!0,this._mode=Oe.AfterDraw;return}let o=qt._getHeightPosition(this,t);if(!(0,G.defined)(o))return;let l=this._positions,h=l[0],b=l[1],C=G.Cartesian3.subtract(b,h,Cn),S=G.Cartesian3.magnitude(C);i.position=G.Cartesian3.midpoint(h,b,Ar),i.show=!0,this._polyline.positions=l,this._distance=S,this._refreshLabels()};qt.prototype._refreshLabels=function(){let t=this._label;t.text=ft.distanceToString(this._distance,this._selectedUnits.distanceUnits,this._selectedLocale)};qt.prototype.reset=function(){this._polyline.show=!1,this._label.show=!1,this._startPoint.show=!1,this._endPoint.show=!1,this._mode=Oe.BeforeDraw,this._distance=0};qt.prototype.isDestroyed=function(){return!1};qt.prototype.destroy=function(){this._primitives.remove(this._polyline);let t=this._pointCollection;return t.remove(this._startPoint),t.remove(this._endPoint),this._labelCollection.remove(this._label),(0,G.destroyObject)(this)};qt._getWorldPosition=jt;qt._getHeightPosition=kr;var vi=qt;function pe(t){t=t??Lt.Frozen.EMPTY_OBJECT;let i=t.scene;Lt.Check.defined("options.scene",i);let o=(0,Lt.defined)(t.units)?t.units:new ft,l=(0,Lt.defined)(t.primitives)?t.primitives:i.primitives.add(new Lt.PrimitiveCollection),h=l.add(new Lt.PointPrimitiveCollection),b=l.add(new Lt.LabelCollection),C=new fi(i),S={scene:i,units:o,locale:t.locale,points:h,labels:b,primitives:l},O=(0,Lt.clone)(S);O.showComponentLines=!0;let R=[new Xe(S),new Xe(O),new yi(S),new ui(S),new vi(S),new li(S),new ai(S),new mi(S)];this.expanded=!1;let V=wt.observable(!1);wt.defineProperty(this,"expanded",{get:function(){return V()},set:function(q){Lt.Check.typeOf.bool("expanded",q),q!==V()&&(V(q),q?this._activate():this._deactivate())}}),this.instructionsVisible=!1,this.selectedMeasurement=void 0;let Z=wt.observable();wt.defineProperty(this,"selectedMeasurement",{get:function(){return Z()},set:function(q){let Q=Z();(0,Lt.defined)(Q)&&Q.reset(),Z(q),C.selectedMeasurement=q,i.requestRenderMode&&i.requestRender()}}),wt.track(this,["expanded","instructionsVisible"]),this._measurements=R,this._units=o,this._mouseHandler=C,this._primitives=l,this._scene=i,this._removeListener=i.morphStart.addEventListener(pe.prototype.onMorph,this)}Object.defineProperties(pe.prototype,{scene:{get:function(){return this._scene}},measurements:{get:function(){return this._measurements}},units:{get:function(){return this._units},set:function(t){this._units=t,this.selectedMeasurement.selectedUnits=t}}});pe.prototype.toggleActive=function(){this.expanded=!this.expanded};pe.prototype.toggleInstructions=function(){this.instructionsVisible=!this.instructionsVisible};pe.prototype._activate=function(){this._mouseHandler.activate(),this.selectedMeasurement=this._measurements[0]};pe.prototype._deactivate=function(){this._mouseHandler.deactivate(),this.selectedMeasurement=void 0,this.reset()};pe.prototype.onMorph=function(t,i,o,l){this.reset()};pe.prototype.reset=function(){this.instructionsVisible=!1,this._measurements.forEach(function(t){t.reset()})};pe.prototype.isDestroyed=function(){return!1};pe.prototype.destroy=function(){return this._deactivate(),this._mouseHandler.destroy(),this._measurements.forEach(function(t){t.destroy()}),this._scene.primitives.remove(this._primitives),(0,Lt.destroyObject)(this)};var wi=pe;var Nr=`<div class="cesium-measure-toolbar" data-bind="css: {expanded: expanded}">
                   <div class="cesium-measure-button cesium-measure-button-main" data-bind="click: toggleActive, attr: {title: expanded ? 'Collapse' : 'Expand'}">
                       <svg width="25px" height="25px" viewBox="0 0 30 30">                          <path d="M 14.851122,11.545456 25.578177,0.95157924 29.306163,4.6249483 18.537701,15.246448 M 15.097088,18.640104 4.1531358,29.434698 0.62547531,25.653101 11.515909,14.853004"/>                          <path d="M 22.983411,26.662767 0.8350882,3.9632787 4.2110211,0.77972226 26.222602,23.217308 Z"/>                          <path d="m 23.126668,26.856584 5.906658,2.311965 -2.630951,-5.79394"/>                          <path d="M 3.8120758,6.6472825 7.2277612,3.4338416"/>                          <path d="M 5.2416124,27.76234 3.6377555,26.08552"/>                          <path d="M 7.0148521,26.015847 5.4109952,24.339027"/>                          <path d="M 8.9787697,24.078675 7.3749129,22.401855"/>                          <path d="M 10.974467,22.173284 9.3706099,20.496464"/>                          <path d="m 12.990856,20.120081 -1.603857,-1.67682"/>                          <path d="m 19.676091,13.638423 -1.603857,-1.67682"/>                          <path d="M 21.449331,11.89193 19.845474,10.21511"/>                          <path d="M 23.413248,9.9547586 21.809392,8.2779376"/>                          <path d="M 25.448671,7.9858073 23.805089,6.3725466"/>                          <path d="M 27.425335,5.9961636 25.765864,4.3670131"/>                    </svg>               </div>
                   <!-- ko foreach: measurements -->
                   <div class="cesium-measure-button" data-bind="click: function($data) { $parent.selectedMeasurement = $data; }, attr: {title: type}, css: {active: $data === $parent.selectedMeasurement}, html: thumbnail"></div>
                   <!-- /ko -->
                   <div class="cesium-measure-button cesium-measure-help" title="Settings and Help" data-bind="click: toggleInstructions, css: {active: instructionsVisible}">
                       <svg width="20px" height="20px" viewBox="0 0 30 30">                            <g transform="translate(0,-267)">                            <g>                            <path d="M 16.891904,289.31984 H 11.7387 q -0.02021,-1.11147 -0.02021,-1.35398 0,-2.50587 0.828554,-4.12256 0.828555,-1.61669 3.314218,-3.63756 2.485663,-2.02086 2.970671,-2.64733 0.747719,-0.99022 0.747719,-2.18253 0,-1.65711 -1.33377,-2.82921 -1.313562,-1.19231 -3.556721,-1.19231 -2.162325,0 -3.617348,1.23273 -1.4550219,1.23272 -2.0006553,3.7588 l -5.2138301,-0.64667 q 0.2222951,-3.61735 3.0717138,-6.14343 2.8696274,-2.52608 7.5176156,-2.52608 4.890492,0 7.780328,2.5665 2.889836,2.54629 2.889836,5.94134 0,1.8794 -1.071058,3.55672 -1.05085,1.67732 -4.526737,4.56715 -1.798569,1.49544 -2.243159,2.40483 -0.424381,0.90939 -0.383964,3.25359 z m -5.153204,7.63887 v -5.67863 h 5.678629 v 5.67863 z" />                            </g>                            </g>                        </svg>                   </div>
               </div>
               <div class="cesium-measure-instructions" data-bind="visible: instructionsVisible">
                   <!-- ko foreach: measurements -->
                   <div><div class="cesium-measure-icon" data-bind="html: icon" style="display: inline"></div><span data-bind="text: type"></span></div>
                   <ul data-bind="foreach: instructions">
                       <li data-bind="text: $data"></li>
                   </ul>
                   <hr>
                   <!-- /ko -->
               </div>`;function bi(t){t=t??Ie.Frozen.EMPTY_OBJECT;let i=t.container;Ie.Check.defined("options.container",i),Ie.Check.defined("options.scene",t.scene);let o=Ye(Nr);i=(0,Ie.getElement)(i),o=i.appendChild(o);let l=new wi(t);wt.applyBindings(l,i),this._viewModel=l,this._container=i,this._element=o,this._dropdown=o.getElementsByClassName("cesium-measure-instructions")[0]}Object.defineProperties(bi.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}},tilesetMeasurementSupported:{get:function(){return this._scene.pickPositionSupported}}});bi.prototype.isDestroyed=function(){return!1};bi.prototype.destroy=function(){return this._viewModel.destroy(),wt.cleanNode(this._container),this._container.removeChild(this._element),(0,Ie.destroyObject)(this)};var Si=bi;var et=rt(nt(),1);function ti(t){et.Check.defined("options",t),et.Check.defined("options.positions",t.positions),et.Check.defined("options.color",t.color),this.show=t.show??!0,this.id=t.id;let i=t.positions;t.loop&&(i=i.slice(),i.push(i[0]));let o=t.arrow??!1;this._width=(0,et.defined)(t.width)?t.width:o?25:8,this._color=t.color,this._depthFailColor=t.color.withAlpha(.3),this._positions=i,this._arrow=o,this._depthFail=t.depthFail??!0,this._primitive=void 0,this._boundingSphere=et.BoundingSphere.fromPoints(i),this._transformedBoundingSphere=et.BoundingSphere.clone(this._boundingSphere),this._modelMatrix=et.Matrix4.clone(et.Matrix4.IDENTITY),this._update=!0}Object.defineProperties(ti.prototype,{modelMatrix:{get:function(){return this._modelMatrix},set:function(t){et.Matrix4.equalsEpsilon(t,this._modelMatrix,et.Math.EPSILON10)||(this._modelMatrix=et.Matrix4.clone(t,this._modelMatrix),this._update=!0)}},positions:{get:function(){return this._positions},set:function(t){this._positions=t,this._update=!0}},color:{get:function(){return this._color}},width:{get:function(){return this._width}},boundingVolume:{get:function(){return this._transformedBoundingSphere}}});ti.prototype.update=function(t){if(this.show){if(this._update){this._update=!1,this._primitive=this._primitive&&this._primitive.destroy();let i=new et.PolylineGeometry({positions:this._positions,width:this._width,vertexFormat:et.PolylineMaterialAppearance.VERTEX_FORMAT,arcType:et.ArcType.NONE}),o,l;this._arrow?(o=new et.PolylineMaterialAppearance({material:et.Material.fromType(et.Material.PolylineArrowType,{color:this._color})}),this._depthFail&&(l=new et.PolylineMaterialAppearance({material:et.Material.fromType(et.Material.PolylineArrowType,{color:this._depthFailColor})}))):(o=new et.PolylineColorAppearance({translucent:this._color.alpha!==1}),this._depthFail&&(l=new et.PolylineColorAppearance({translucent:this._depthFailColor.alpha!==1})));let h=this._modelMatrix;this._primitive=new et.Primitive({geometryInstances:new et.GeometryInstance({geometry:i,attributes:{color:et.ColorGeometryInstanceAttribute.fromColor(this._color),depthFailColor:et.ColorGeometryInstanceAttribute.fromColor(this._depthFailColor)},id:this.id,modelMatrix:h}),appearance:o,depthFailAppearance:l,asynchronous:!1}),this._transformedBoundingSphere=et.BoundingSphere.transform(this._boundingSphere,h,this._transformedBoundingSphere)}this._primitive.update(t)}};ti.prototype.isDestroyed=function(){return!1};ti.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,et.destroyObject)(this)};var Pe=ti;var Lr={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale"},Ce=Object.freeze(Lr);var k=rt(nt(),1);var Qt=rt(nt(),1),Rr=new Qt.Cartesian3(1,1,1),zr=new Qt.Matrix4,Fr=new Qt.Cartesian3;function Br(t,i,o){Qt.Check.defined("transform",t),Qt.Check.defined("originOffset",i),Qt.Check.defined("result",o);let l=Qt.Matrix4.getScale(t,Fr),h=Qt.Matrix4.setScale(t,Rr,zr);return Qt.Matrix4.multiplyByPoint(h,Qt.Cartesian3.multiplyComponents(i,l,o),o)}var me=Br;var Le=rt(nt(),1),We={X:"X",Y:"Y",Z:"Z"};We.getValue=function(t){return t===We.X?Le.Cartesian3.UNIT_X:t===We.Y?Le.Cartesian3.UNIT_Y:Le.Cartesian3.UNIT_Z};We.getColor=function(t){return t===We.X?Le.Color.RED:t===We.Y?Le.Color.GREEN:Le.Color.BLUE};var ut=Object.freeze(We);var On=new k.Cartesian3(1,1,1),En=new k.Cartesian3,Ur=new k.Cartesian3,Hr=new k.Cartesian3,Vr=new k.Matrix4,jr=new k.Matrix4,Wr=new k.Cartesian3,Yr=new k.Cartesian3,Li=new k.Cartesian2,In=new k.Cartesian2,$r=new k.HeadingPitchRoll,Dn=new k.Ray,Gr=new k.Cartesian3,Zr=new k.Quaternion,qr=new k.Matrix3,Tn=100,Mn=1/0;function Jr(){let t=[],i=[],o=[];for(let l=0;l<360;l++){let h=k.Math.toRadians(l),b=Math.cos(h),C=Math.sin(h);t.push(new k.Cartesian3(0,b,C)),i.push(new k.Cartesian3(C,0,b)),o.push(new k.Cartesian3(b,C,0))}return{x:t,y:i,z:o}}function An(t,i,o,l,h){let b=k.Matrix4.inverse(t,jr),C=k.Matrix4.multiplyByPoint(b,l,Wr),S=k.Matrix4.multiplyByPoint(b,h,Yr);C=k.Cartesian3.subtract(C,i,C),S=k.Cartesian3.subtract(S,i,S);let O=Li,R=In;o.x?(O.x=C.y,O.y=C.z,R.x=S.y,R.y=S.z):o.y?(O.x=-C.x,O.y=C.z,R.x=-S.x,R.y=S.z):(O.x=C.x,O.y=C.y,R.x=S.x,R.y=S.y);let V=O.x*R.y-O.y*R.x>=0,Z=k.Cartesian2.angleBetween(O,R);return V||(Z=-Z),Z}function Ni(t,i){return new Pe({positions:t,color:ut.getColor(i),loop:!0,show:!1,id:i})}function De(t){t=t??k.Frozen.EMPTY_OBJECT;let i=t.scene;this._vectorLine1=i.primitives.add(new Pe({width:5,positions:[new k.Cartesian3,new k.Cartesian3],color:k.Color.YELLOW,show:!1})),this._vectorLine2=i.primitives.add(new Pe({width:5,positions:[new k.Cartesian3,new k.Cartesian3],color:k.Color.YELLOW,show:!1}));let o=Jr();if(this._polylineX=i.primitives.add(Ni(o.x,ut.X)),this._polylineY=i.primitives.add(Ni(o.y,ut.Y)),this._polylineZ=i.primitives.add(Ni(o.z,ut.Z)),this._modelMatrix=k.Matrix4.clone(k.Matrix4.IDENTITY),this.originOffset=t.originOffset,this._scene=i,this._setHPRCallback=t.setHeadingPitchRoll,this._setPositionCallback=t.setPosition,this._transform=t.transform,this._radius=t.radius,this._active=!1,this._dragging=!1,this._startTransform=new k.Matrix4,this._startRotation=new k.Matrix3,this._widgetOrigin=new k.Cartesian3,this._modelOrigin=new k.Cartesian3,this._rotationAxis=void 0,this._rotationPlane=new k.Plane(k.Cartesian3.UNIT_X,0),this._rotationStartPoint=new k.Cartesian3,this._pixelSize=(0,k.defined)(t.pixelSize)?new k.Cartesian2(t.pixelSize,t.pixelSize):new k.Cartesian2(Tn,Tn),this._maximumSizeInMeters=(0,k.defined)(t.maximumSizeInMeters)?new k.Cartesian2(t.maximumSizeInMeters,t.maximumSizeInMeters):new k.Cartesian2(Mn,Mn),this._pixelSize.x<0)throw new k.DeveloperError(`pixelSize = ${this._pixelSize.x}, must be >= 0`);if(this._maximumSizeInMeters.x<0)throw new k.DeveloperError(`maximumSizeInMeters = ${this._maximumSizeInMeters.x}, must be >= 0`);this.update()}Object.defineProperties(De.prototype,{active:{get:function(){return this._active},set:function(t){this._active=t,t?(this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});De.prototype.update=function(){let t=this._transform,i=this._modelMatrix;i=k.Matrix4.setScale(t,On,i);let o=me(t,this.originOffset,Ur);i=k.Matrix4.setTranslation(i,o,i);let l=this._radius*k.Matrix4.getMaximumScale(this._transform)*1.25;i=k.Matrix4.multiplyByUniformScale(i,l,i),this._pixelSize.x>0&&(i=he(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,i,i)),this._polylineX.modelMatrix=i,this._polylineY.modelMatrix=i,this._polylineZ.modelMatrix=i};De.prototype.handleLeftDown=function(t){let i=this._scene,o=i.drillPick(t),l;for(let q=0;q<o.length;q++){let Q=o[q];if((0,k.defined)(Q.id)&&(0,k.defined)(ut[Q.id])){l=Q.id;break}}if(!(0,k.defined)(l))return;let h=ut.getValue(l),b=k.Matrix4.setScale(this._transform,On,this._startTransform);this._startRotation=k.Matrix4.getMatrix3(b,this._startRotation);let C=k.Matrix4.getTranslation(b,this._modelOrigin),S=me(this._transform,this.originOffset,this._widgetOrigin),O=k.Matrix4.multiplyByPoint(b,h,Hr),R=k.Cartesian3.subtract(O,C,O);R=k.Cartesian3.normalize(R,R);let V=k.Plane.fromPointNormal(S,R,this._rotationPlane),Z=k.IntersectionTests.rayPlane(i.camera.getPickRay(t,Dn),V,this._rotationStartPoint);this._dragging=(0,k.defined)(Z),this._rotationAxis=h,i.screenSpaceCameraController.enableInputs=!1};De.prototype.handleMouseMove=function(t){if(!this._dragging)return;let i=this._scene,o=i.camera.getPickRay(t,Dn),l=k.IntersectionTests.rayPlane(o,this._rotationPlane,Gr);if(!(0,k.defined)(l))return;let h=this._widgetOrigin,b=this._modelOrigin,C=this._rotationStartPoint,S=this._vectorLine1,O=S.positions,R=this._vectorLine2,V=R.positions,Z=k.Cartesian3.subtract(C,h,Li),q=k.Cartesian3.subtract(l,h,In);q=k.Cartesian3.normalize(q,q),q=k.Cartesian3.multiplyByScalar(q,k.Cartesian3.magnitude(Z),q),l=k.Cartesian3.add(h,q,l),O[0]=h,O[1]=C,V[0]=h,V[1]=l,S.positions=O,R.positions=V,S.show=!0,R.show=!0;let Q=k.Cartesian3.multiplyComponents(this.originOffset,k.Matrix4.getScale(this._transform,En),En),e=this._rotationAxis,Tt=An(this._startTransform,Q,e,C,l),W=k.Matrix3.fromQuaternion(k.Quaternion.fromAxisAngle(e,Tt,Zr),qr);W=k.Matrix3.multiply(this._startRotation,W,W);let at=k.Matrix4.fromRotationTranslation(W,b,Vr);this._setHPRCallback(k.Transforms.fixedFrameToHeadingPitchRoll(at,i.mapProjection.ellipsoid,void 0,$r));let pt=k.Cartesian3.negate(Q,Li);pt=k.Matrix3.multiplyByVector(W,pt,pt),b=k.Cartesian3.add(pt,h,b),this._setPositionCallback(b)};De.prototype.handleLeftUp=function(){this._dragging=!1,this._vectorLine1.show=!1,this._vectorLine2.show=!1,this._scene.screenSpaceCameraController.enableInputs=!0};De.prototype.isDestroyed=function(){return!1};De.prototype.destroy=function(){this.active=!1;let t=this._scene;t.primitives.remove(this._vectorLine1),t.primitives.remove(this._vectorLine2),t.primitives.remove(this._polylineX),t.primitives.remove(this._polylineY),t.primitives.remove(this._polylineZ),(0,k.destroyObject)(this)};De._getRotationAngle=An;var xi=De;var F=rt(nt(),1);var Xr=new F.Cartesian3,Qr=new F.Cartesian3,Ln=new F.Cartesian3,Kr=new F.Cartesian3,ts=new F.Cartesian3,es=new F.Cartesian3,is=new F.Cartesian3,Rn=new F.Ray,ns=new F.Cartesian3(1,1,1),Jt=new F.Cartesian3,kn=100,Nn=1/0;function Ri(t){return{position:ut.getValue(t),show:!1,color:ut.getColor(t),pixelSize:20,disableDepthTestDistance:Number.POSITIVE_INFINITY,id:t}}function zi(t){return new Pe({positions:[F.Cartesian3.ZERO,ut.getValue(t)],color:ut.getColor(t),id:t,show:!1})}function Re(t){t=t??F.Frozen.EMPTY_OBJECT;let i=t.scene,o=t.transform,l=i.primitives.add(new F.PointPrimitiveCollection);if(this.originOffset=t.originOffset,this._points=l,this._pointX=l.add(Ri(ut.X)),this._pointY=l.add(Ri(ut.Y)),this._pointZ=l.add(Ri(ut.Z)),this._polylineX=i.primitives.add(zi(ut.X)),this._polylineY=i.primitives.add(zi(ut.Y)),this._polylineZ=i.primitives.add(zi(ut.Z)),this._scene=i,this._canvas=i.canvas,this._enableNonUniformScaling=t.enableNonUniformScaling,this._setPositionCallback=t.setPosition,this._setScaleCallback=t.setScale,this._modelMatrix=new F.Matrix4,this._pickedAxis=void 0,this._dragAlongVector=void 0,this._offsetVector=new F.Cartesian3,this._pickingPlane=new F.Plane(F.Cartesian3.UNIT_X,0),this._dragging=!1,this._startPosition=new F.Cartesian3,this._startScale=new F.Cartesian3,this._startOffset=new F.Cartesian3,this._startTransform=new F.Matrix4,this._active=!1,this._transform=o,this._lineLength=t.radius*1.5,this._pixelSize=(0,F.defined)(t.pixelSize)?new F.Cartesian2(t.pixelSize,t.pixelSize):new F.Cartesian2(kn,kn),this._maximumSizeInMeters=(0,F.defined)(t.maximumSizeInMeters)?new F.Cartesian2(t.maximumSizeInMeters,t.maximumSizeInMeters):new F.Cartesian2(Nn,Nn),this._pixelSize.x<0)throw new F.DeveloperError(`pixelSize = ${this._pixelSize.x}, must be >= 0`);if(this._maximumSizeInMeters.x<0)throw new F.DeveloperError(`maximumSizeInMeters = ${this._maximumSizeInMeters.x}, must be >= 0`);this.update()}Object.defineProperties(Re.prototype,{active:{get:function(){return this._active},set:function(t){this._active=t,t?(this._pointX.show=!0,this._pointY.show=!0,this._pointZ.show=!0,this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._pointX.show=!1,this._pointY.show=!1,this._pointZ.show=!1,this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});Re.prototype.handleLeftDown=function(t){let i=this._scene,o=this._transform,l=i.camera,h=i.drillPick(t),b=F.Matrix4.getTranslation(o,Qr),C;for(let e=0;e<h.length;e++){let Tt=h[e];if((0,F.defined)(Tt.id)&&(0,F.defined)(ut[Tt.id])){C=Tt.id;break}}if(!(0,F.defined)(C))return;let S=ut.getValue(C),O=F.Matrix4.multiplyByPointAsVector(this._modelMatrix,S,Ln),R=Kr;Math.abs(F.Cartesian3.dot(l.upWC,O))>.7?R=F.Cartesian3.cross(l.rightWC,O,R):R=F.Cartesian3.cross(l.upWC,O,R),F.Cartesian3.normalize(R,R);let V=F.Plane.fromPointNormal(b,R,this._pickingPlane),Z=F.IntersectionTests.rayPlane(l.getPickRay(t,Rn),V,this._startPosition);if(!(0,F.defined)(Z))return;this._offsetVector=F.Cartesian3.subtract(Z,b,this._offsetVector),this._dragging=!0;let q=F.Matrix4.getScale(o,this._startScale),Q;C===ut.X?Q=q.x:C===ut.Y?Q=q.y:Q=q.z,this._startValue=Q,this._startOffset=F.Cartesian3.multiplyComponents(this.originOffset,q,this._startOffset),this._dragAlongVector=S,this._pickedAxis=C,this._startTransform=F.Matrix4.setScale(o,ns,this._startTransform),i.screenSpaceCameraController.enableInputs=!1};Re.prototype.handleMouseMove=function(t){if(!this._dragging)return;let o=this._scene.camera,l=F.IntersectionTests.rayPlane(o.getPickRay(t,Rn),this._pickingPlane,ts);if(!(0,F.defined)(l))return;let h=this._dragAlongVector,b=F.Matrix4.multiplyByPointAsVector(this._modelMatrix,h,Ln),C=F.Cartesian3.subtract(l,this._startPosition,es);C=F.Cartesian3.projectVector(C,b,C);let S=F.Cartesian3.magnitude(C);if(F.Cartesian3.dot(C,this._offsetVector)<0&&(S=-S),S/=this._lineLength,S+=this._startValue,S<=0)return;let O=this._pickedAxis,R=this._startScale;this._enableNonUniformScaling()?O===ut.X?R.x=S:O===ut.Y?R.y=S:R.z=S:(R.x=S,R.y=S,R.z=S);let V=F.Cartesian3.multiplyComponents(this.originOffset,R,is);V=F.Cartesian3.subtract(this._startOffset,V,V),V=F.Matrix4.multiplyByPoint(this._startTransform,V,V),this._setScaleCallback(R),this._setPositionCallback(V)};Re.prototype.handleLeftUp=function(){this._dragging=!1,this._scene.screenSpaceCameraController.enableInputs=!0};Re.prototype.update=function(){let t=this._transform,i=me(t,this.originOffset,Xr),o=this._modelMatrix;o=F.Matrix4.multiplyByUniformScale(t,this._lineLength,o),o=F.Matrix4.setTranslation(this._modelMatrix,i,o);let l=this._pixelSize.x>0;l&&(o=he(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,o,o)),l&&this._enableNonUniformScaling&&(Jt=F.Matrix4.getScale(o,Jt),Jt.x>=Jt.y?(Jt.y=Jt.x,Jt.z=Jt.x):Jt.y>=Jt.x&&(Jt.x=Jt.y,Jt.z=Jt.y),o=F.Matrix4.setScale(o,Jt,o)),this._polylineX.modelMatrix=o,this._polylineY.modelMatrix=o,this._polylineZ.modelMatrix=o,this._points.modelMatrix=o};Re.prototype.isDestroyed=function(){return!1};Re.prototype.destroy=function(){this.active=!1;let t=this._scene;this._points.removeAll(),t.primitives.remove(this._polylineX),t.primitives.remove(this._polylineY),t.primitives.remove(this._polylineZ),t.primitives.remove(this._points),(0,F.destroyObject)(this)};var Pi=Re;var ge=rt(nt(),1);var N=rt(nt(),1);var j=rt(nt(),1);var os=new j.Cartesian3,Bi=new j.Cartesian3,Bn=new j.Cartesian3,rs=new j.Cartesian3,ss=new j.Cartesian3,as=new j.Cartesian3,ls=new j.Cartesian3,Un=new j.Ray,zn=100,Fn=1/0;function Fi(t){return new Pe({positions:[j.Cartesian3.ZERO,ut.getValue(t)],arrow:!0,color:ut.getColor(t),id:t,show:!1})}function ze(t){t=t??j.Frozen.EMPTY_OBJECT;let i=t.scene;if(this.originOffset=t.originOffset,this._polylineX=i.primitives.add(Fi(ut.X)),this._polylineY=i.primitives.add(Fi(ut.Y)),this._polylineZ=i.primitives.add(Fi(ut.Z)),this._scene=i,this._canvas=i.canvas,this._setPositionCallback=t.setPosition,this._modelMatrix=new j.Matrix4,this._fixedFrame=new j.Matrix4,this._hpr=new j.HeadingPitchRoll,this._dragAlongVector=void 0,this._offsetVector=new j.Cartesian3,this._pickingPlane=new j.Plane(j.Cartesian3.UNIT_X,0),this._dragging=!1,this._active=!1,this._transform=t.transform,this._radius=t.radius,this._pixelSize=(0,j.defined)(t.pixelSize)?new j.Cartesian2(t.pixelSize,t.pixelSize):new j.Cartesian2(zn,zn),this._maximumSizeInMeters=(0,j.defined)(t.maximumSizeInMeters)?new j.Cartesian2(t.maximumSizeInMeters,t.maximumSizeInMeters):new j.Cartesian2(Fn,Fn),this._pixelSize.x<0)throw new j.DeveloperError(`pixelSize = ${this._pixelSize.x}, must be >= 0`);if(this._maximumSizeInMeters.x<0)throw new j.DeveloperError(`maximumSizeInMeters = ${this._maximumSizeInMeters.x}, must be >= 0`);this.update()}Object.defineProperties(ze.prototype,{active:{get:function(){return this._active},set:function(t){this._active=t,t?(this._polylineX.show=!0,this._polylineY.show=!0,this._polylineZ.show=!0):(this._polylineX.show=!1,this._polylineY.show=!1,this._polylineZ.show=!1,this._dragging=!1)}},pixelSize:{get:function(){return this._pixelSize.x}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters.x}}});ze.prototype.update=function(){let t=this._transform,i=this._scene.mapProjection.ellipsoid,o=this._modelMatrix,l=j.Matrix4.getTranslation(t,Bi),h=me(t,this.originOffset,os),b=this._radius*j.Matrix4.getMaximumScale(this._transform)*1.5,C=j.Transforms.fixedFrameToHeadingPitchRoll(this._transform,i,void 0,this._hpr);C.pitch=0,C.roll=0;let S=j.Transforms.headingPitchRollToFixedFrame(l,C,i,void 0,this._fixedFrame);S=j.Matrix4.setTranslation(S,h,S),o=j.Matrix4.multiplyByUniformScale(S,b,o),this._pixelSize.x>0&&(o=he(this._pixelSize,this._maximumSizeInMeters,this._scene.frameState,o,o)),this._polylineX.modelMatrix=o,this._polylineY.modelMatrix=o,this._polylineZ.modelMatrix=o};ze.prototype.handleLeftDown=function(t){let i=this._scene,o=i.camera,l=i.drillPick(t),h;for(let Z=0;Z<l.length;Z++){let q=l[Z];if((0,j.defined)(q.id)&&(0,j.defined)(ut[q.id])){h=q.id;break}}if(!(0,j.defined)(h))return;let b=j.Matrix4.getTranslation(this._transform,Bi),C=ut.getValue(h),S=j.Matrix4.multiplyByPointAsVector(this._fixedFrame,C,Bn),O=rs;Math.abs(j.Cartesian3.dot(o.upWC,S))>.7?O=j.Cartesian3.cross(o.rightWC,S,O):O=j.Cartesian3.cross(o.upWC,S,O),j.Cartesian3.normalize(O,O);let R=j.Plane.fromPointNormal(b,O,this._pickingPlane),V=j.IntersectionTests.rayPlane(o.getPickRay(t,Un),R,this._offsetVector);(0,j.defined)(V)&&(j.Cartesian3.subtract(V,b,V),this._dragging=!0,this._dragAlongVector=C,i.screenSpaceCameraController.enableInputs=!1)};ze.prototype.handleMouseMove=function(t){if(!this._dragging)return;let o=this._scene.camera,l=j.IntersectionTests.rayPlane(o.getPickRay(t,Un),this._pickingPlane,ss);if(!(0,j.defined)(l))return;let h=this._dragAlongVector,b=j.Matrix4.getTranslation(this._transform,Bi),C=j.Matrix4.multiplyByPointAsVector(this._fixedFrame,h,Bn),S=j.Cartesian3.subtract(l,b,as);S=j.Cartesian3.projectVector(S,C,S);let O=j.Cartesian3.projectVector(this._offsetVector,C,ls);S=j.Cartesian3.subtract(S,O,S),b=j.Cartesian3.add(b,S,b),this._setPositionCallback(b)};ze.prototype.handleLeftUp=function(){this._dragging=!1,this._scene.screenSpaceCameraController.enableInputs=!0};ze.prototype.isDestroyed=function(){return!1};ze.prototype.destroy=function(){this.active=!1;let t=this._scene;t.primitives.remove(this._polylineX),t.primitives.remove(this._polylineY),t.primitives.remove(this._polylineZ),(0,j.destroyObject)(this)};var Ci=ze;var cs=new N.Cartesian3,us=new N.Cartesian2,hs=new N.Cartesian3(1,1,1),fs=new N.Matrix4,ds=new N.Cartesian3,ps=new N.Cartesian3,ms=100,gs=1/0,_s=new N.Quaternion,ys=new N.Quaternion,vs=new N.Cartesian3,ws=new N.Cartesian3,bs=new N.Cartesian3,Ss=new N.Matrix4,xs=new N.Matrix3;function Ui(t,i){N.Check.defined("transform",t),N.Check.defined("headingPitchRoll",i);let o=N.Quaternion.fromHeadingPitchRoll(i,_s),l=N.Matrix4.getTranslation(t,vs),h=N.Matrix4.getScale(t,ws),b=N.Matrix4.multiplyByPoint(t,N.Cartesian3.ZERO,bs),C=N.Transforms.eastNorthUpToFixedFrame(b,void 0,Ss),S=N.Matrix4.getMatrix3(C,xs),O=N.Quaternion.fromRotationMatrix(S,ys),R=N.Quaternion.multiply(O,o,S);return N.Matrix4.fromTranslationQuaternionRotationScale(l,R,h,t)}function Bt(t){t=t??N.Frozen.EMPTY_OBJECT,N.Check.defined("options.scene",t.scene),N.Check.defined("options.transform",t.transform),N.Check.defined("options.boundingSphere",t.boundingSphere);let i=t.scene,o=t.transform,l=t.boundingSphere.clone(),h=t.originOffset??N.Cartesian3.ZERO,b=N.Matrix4.getTranslation(o,new N.Cartesian3),C=N.Transforms.fixedFrameToHeadingPitchRoll(o,i.mapProjection.ellipsoid,void 0,new N.HeadingPitchRoll),S=N.Matrix4.getScale(o,new N.Cartesian3);N.Cartesian3.equalsEpsilon(b,N.Cartesian3.ZERO,N.Math.EPSILON10)&&(b=N.Cartesian3.fromDegrees(0,0,0,i.mapProjection.ellipsoid,b),o=N.Matrix4.setTranslation(o,b,o),Ui(o,C));let O=!0;N.Math.equalsEpsilon(S.x,S.y,N.Math.EPSILON10)&&N.Math.equalsEpsilon(S.x,S.z,N.Math.EPSILON10)&&(O=!1,S.y=S.x,S.z=S.x);let R=l.radius/N.Cartesian3.maximumComponent(S);if(this._pixelSize=t.pixelSize??ms,this._maximumSizeInMeters=t.maximumSizeInMeters??gs,this._pixelSize<0)throw new N.DeveloperError(`pixelSize = ${this._pixelSize}, must be >= 0`);if(this._maximumSizeInMeters<0)throw new N.DeveloperError(`maximumSizeInMeters = ${this._maximumSizeInMeters}, must be >= 0`);this.editorMode=void 0;let V=wt.observable();wt.defineProperty(this,"editorMode",{get:function(){return V()},set:function(W){V(W),(0,N.defined)(this._activeEditor)&&(this._activeEditor.active=!1);let at;W===Ce.ROTATION?at=this._rotationEditor:W===Ce.TRANSLATION?at=this._translationEditor:W===Ce.SCALE&&(at=this._scaleEditor),at.update(),at.active=!0,this._activeEditor=at}}),this.enableNonUniformScaling=O;let Z=wt.observable(this.enableNonUniformScaling);wt.defineProperty(this,"enableNonUniformScaling",{get:function(){return Z()},set:function(W){W!==Z()&&(Z(W),W||(this.scale=new N.Cartesian3(S.x,S.x,S.x),i.requestRenderMode&&i.requestRender()))}}),this.position=b;let q=wt.observable(this.position);wt.defineProperty(this,"position",{get:function(){return q()},set:function(W){if(N.Cartesian3.equals(W,this.position))return;let at=N.Cartesian3.clone(W,this.position);q(at);let pt=this._transform;pt=N.Matrix4.setTranslation(pt,at,pt),Ui(pt,this.headingPitchRoll),i.requestRenderMode&&i.requestRender()}}),this.headingPitchRoll=C;let Q=wt.observable(this.headingPitchRoll);wt.defineProperty(this,"headingPitchRoll",{get:function(){return Q()},set:function(W){if(N.HeadingPitchRoll.equals(W,this.headingPitchRoll))return;let at=N.HeadingPitchRoll.clone(W,this.headingPitchRoll);Q(at),Ui(this._transform,at),i.requestRenderMode&&i.requestRender()}}),this.scale=S;let e=wt.observable(this.scale);wt.defineProperty(this,"scale",{get:function(){return e()},set:function(W){if(N.Cartesian3.equals(W,this.scale))return;let at=N.Cartesian3.clone(W,this.scale);e(at),N.Matrix4.setScale(this._transform,at,this._transform),this._translationEditor.update(),this._rotationEditor.update(),i.requestRenderMode&&i.requestRender()}}),this.menuExpanded=!1,this.left="0",this.top="0",this.active=!1,wt.track(this,["menuExpanded","left","top","active"]);let Tt=this;this._rotationEditor=new xi({scene:i,transform:o,radius:R,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:h,setPosition:function(W){Tt.position=W},setHeadingPitchRoll:function(W){Tt.headingPitchRoll=W}}),this._translationEditor=new Ci({scene:i,transform:o,radius:R,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:h,setPosition:function(W){Tt.position=W}}),this._scaleEditor=new Pi({scene:i,transform:o,enableNonUniformScaling:Z,radius:R,pixelSize:this._pixelSize,maximumSizeInMeters:this._maximumSizeInMeters,originOffset:h,setScale:function(W){Tt.scale=W},setPosition:function(W){Tt.position=W}}),this._sseh=new N.ScreenSpaceEventHandler(i.canvas),this._scene=i,this._transform=o,this._boundingSphere=l,this._active=!1,this._activeEditor=void 0,this._originOffset=h,this.position=b,this.headingPitchRoll=C,this.scale=S,this._removePostUpdateEvent=this._scene.preUpdate.addEventListener(Bt.prototype._update,this)}Object.defineProperties(Bt.prototype,{originOffset:{get:function(){return this._originOffset},set:function(t){N.Check.defined("value",t),this._originOffset=t,this._translationEditor.originOffset=t,this._rotationEditor.originOffset=t,this._scaleEditor.originOffset=t}},pixelSize:{get:function(){return this._pixelSize}},maximumSizeInMeters:{get:function(){return this._maximumSizeInMeters}}});Bt.prototype.setOriginPosition=function(t){N.Check.defined("position",t);let i=N.Matrix4.setScale(this._transform,hs,fs),o=N.Matrix4.inverseTransformation(i,i),l=N.Matrix4.multiplyByPoint(o,t,ds),h=N.Cartesian3.divideComponents(l,N.Matrix4.getScale(this._transform,ps),l);this.originOffset=h};Bt.prototype.activate=function(){let t=this._sseh,i=this._scene;t.setInputAction(this._leftDown.bind(this),N.ScreenSpaceEventType.LEFT_DOWN),t.setInputAction(this._leftUp.bind(this),N.ScreenSpaceEventType.LEFT_UP),t.setInputAction(this._mouseMove.bind(this),N.ScreenSpaceEventType.MOUSE_MOVE),this.active=!0,(0,N.defined)(this._activeEditor)?this._activeEditor.active=!0:this.setModeTranslation(),i.requestRenderMode&&i.requestRender()};Bt.prototype.deactivate=function(){let t=this._sseh,i=this._scene;t.removeInputAction(N.ScreenSpaceEventType.LEFT_DOWN),t.removeInputAction(N.ScreenSpaceEventType.LEFT_UP),t.removeInputAction(N.ScreenSpaceEventType.MOUSE_MOVE),this.active=!1,(0,N.defined)(this._activeEditor)&&(this._activeEditor.active=!1),i.requestRenderMode&&i.requestRender()};Bt.prototype.expandMenu=function(){this.menuExpanded=!0};Bt.prototype.setModeTranslation=function(){this.editorMode=Ce.TRANSLATION,this.menuExpanded=!1};Bt.prototype.setModeRotation=function(){this.editorMode=Ce.ROTATION,this.menuExpanded=!1};Bt.prototype.setModeScale=function(){this.editorMode=Ce.SCALE,this.menuExpanded=!1};Bt.prototype.toggleNonUniformScaling=function(){this.enableNonUniformScaling=!this.enableNonUniformScaling};Bt.prototype._leftDown=function(t){this._activeEditor.handleLeftDown(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};Bt.prototype._mouseMove=function(t){this._activeEditor.handleMouseMove(t.endPosition);let i=this._scene;i.requestRenderMode&&i.requestRender()};Bt.prototype._leftUp=function(t){this.menuExpanded=!1,this._activeEditor.handleLeftUp(t.position);let i=this._scene;i.requestRenderMode&&i.requestRender()};Bt.prototype._update=function(){if(!this.active)return;this._activeEditor.update();let t=this._scene,i=me(this._transform,this._originOffset,cs),o=N.SceneTransforms.worldToWindowCoordinates(t,i,us);(0,N.defined)(o)&&(this.left=`${Math.floor(o.x-13)}px`,this.top=`${Math.floor(o.y)}px`)};Bt.prototype.isDestroyed=function(){return!1};Bt.prototype.destroy=function(){this.deactivate(),this._sseh.destroy(),this._rotationEditor.destroy(),this._translationEditor.destroy(),this._scaleEditor.destroy(),this._removePostUpdateEvent(),(0,N.destroyObject)(this)};Bt.EditorMode=Ce;var Ei=Bt;var Ps=`<div class="transform-editor-menu" data-bind="style: {left: left, top: top}, visible: active">        <div class="cesium-button transform-editor-button" data-bind="click: expandMenu, visible: !menuExpanded">            <svg width="20" height="20" viewBox="0 0 20 20">                <g>                    <circle cx="2" cy="10" r="2" />                    <circle cx="10" cy="10" r="2" />                    <circle cx="18" cy="10" r="2" />                </g>            </svg>        </div>        <div class="transform-editor-options" data-bind="visible: menuExpanded">            <div class="transform-editor-button-row">                <div title="Translation" data-bind="click: setModeTranslation, css: {selected: editorMode === 'translation'}">                    <svg viewBox="0 0 25 25" height="25" width="25">                        <g>                            <circle r="3" cy="22" cx="3" />                            <path d="M 19.543379,4.59439 3.9750205,19.96158 5.3793174,21.3854 20.947676,6.01822 Z"/>                            <path d="m 14.699824,3.80366 10.231411,-3.34922 -3.215586,10.03096 z"/>                        </g>                    </svg>                </div                ><div title="Rotation" data-bind="click: setModeRotation, css: {selected: editorMode === 'rotation'}">                    <svg viewBox="0 0 25 25" height="25" width="25">                        <g>                            <path d="M 13.033371,10.08295 2.6713568,7.16272 10.931013,0.62527 Z"/>                            <path d="m 13.741358,3.87055 c -0.747592,-0.006 -1.506137,0.0593 -2.263621,0.20287 l 0.484334,2.29127 c 4.712769,-0.89305 9.471467,2.11386 10.414021,6.57912 0.942553,4.46525 -2.229345,8.97402 -6.942115,9.86707 -4.71277,0.89305 -9.4731664,-2.11226 -10.4157205,-6.57752 l -2.4165696,0.45729 c 1.2119755,5.74161 7.2550484,9.55981 13.3149241,8.41149 6.059877,-1.14833 10.089725,-6.87562 8.87775,-12.61723 -1.060479,-5.02391 -5.819851,-8.57436 -11.053003,-8.61436 z"/>                        </g>                    </svg>               </div>            </div>            <div class="transform-editor-button-row">                <div title="Scale" data-bind="click: setModeScale, css: {selected: editorMode === 'scale'}">                    <svg width="25" height="25" viewBox="0 0 25 25">                        <g>                            <path d="M 19.543379,4.59439 3.9750205,19.96158 5.3793174,21.3854 20.947676,6.01822 Z"/>                            <path d="m 14.699824,3.80366 10.231411,-3.34922 -3.215586,10.03096 z" />                            <path d="M 10.333866,21.9809 0.10245523,25.33012 3.3180412,15.29916 Z" />                        </g>                    </svg>                </div                ><div data-bind="click: toggleNonUniformScaling">                    <div title="Switch to non-uniform scaling" data-bind="visible: !enableNonUniformScaling">                        <svg width="25" height="25" viewBox="0 0 25 25">                            <g>                                <path d="m 0.5,1.38477 h 1.9960938 v -1 H 0.5 c 0,0.33333 0,0.66667 0,1 z m 2.9941406,0 h 1.9980469 v -1 H 3.4941406 Z m 2.9960938,0 h 1.9960937 v -1 H 6.4902344 Z m 2.9960937,0 h 1.9960939 v -1 H 9.4863281 Z m 2.9941409,0 h 1.998047 v -1 h -1.998047 z m 2.996093,0 h 1.996094 v -1 h -1.996094 z m 2.994141,0 h 1.998047 v -1 h -1.998047 z m 2.996094,0 h 1.998047 v -1 h -1.998047 z m 2.535156,-0.5 v 1.95898 H 25 v -1.95898 z M 0,4.0332 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 V 3.8418 H 24.001953 Z M 0,7.0293 h 0.99804688 v -1.99805 H 0 Z m 24.001953,1.80468 H 25 v -1.99609 H 24.001953 Z M 0,10.02344 h 0.99804688 v -1.9961 H 0 Z m 24.001953,1.80664 H 25 v -1.99805 H 24.001953 Z M 0,13.01953 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 v -1.9961 H 24.001953 Z M 0,16.01562 h 0.99804688 v -1.99804 H 0 Z m 24.001953,1.80469 H 25 v -1.99804 H 24.001953 Z M 0,19.00977 h 0.99804688 v -1.9961 H 0 Z m 24.001953,1.80664 H 25 v -1.99805 H 24.001953 Z M 0,22.00586 h 0.99804688 v -1.99609 H 0 Z m 24.001953,1.80469 H 25 v -1.9961 H 24.001953 Z M 0,24.88672 v 0.49805 h 0.5 0.11523438 v -0.49805 h 0.3828125 v -1.88281 H 0 Z m 1.6132812,0.49805 H 3.609375 v -0.99805 H 1.6132812 Z m 2.9941407,0 h 1.9980469 v -0.99805 H 4.6074219 Z m 2.9960937,0 h 1.9980469 v -0.99805 H 7.6035156 Z m 2.9960934,0 h 1.996094 v -0.99805 h -1.996094 z m 2.994141,0 h 1.998047 v -0.99805 H 13.59375 Z m 2.996094,0 h 1.996094 v -0.99805 h -1.996094 z m 2.996094,0 h 1.996093 v -0.99805 h -1.996093 z m 2.99414,0 H 24.5 25 v -0.49805 -0.0781 h -0.5 v -0.42187 h -1.919922 z" />                                <path d="m 0,10.38477 v 1.02343 13.97657 h 15 v -15 z m 2.0449219,2.04492 H 12.955078 V 23.3418 H 2.0449219 Z"/>                                <g>                                    <path d="m 21.158203,3.81836 0.355469,0.35156 0.351562,-0.35547 -0.353515,-0.35156 z m -0.703125,0.70898 0.355469,0.35157 0.351562,-0.35352 -0.355468,-0.35351 z m -0.705078,0.71094 0.355469,0.35156 0.351562,-0.35546 -0.353515,-0.35157 z m -0.703125,0.70899 0.355469,0.35351 0.351562,-0.35547 -0.355468,-0.35156 z m -0.705078,0.71093 0.355469,0.35157 0.353515,-0.35547 -0.355469,-0.35157 z m -0.703125,0.71094 0.355469,0.35156 0.351562,-0.35547 -0.355469,-0.35156 z m -0.703125,0.70898 0.353515,0.35157 0.353516,-0.35352 -0.355469,-0.35351 z m -0.705078,0.71094 0.355469,0.35156 0.351562,-0.35546 -0.355469,-0.35157 z m -0.703125,0.70899 0.353515,0.35351 0.353516,-0.35547 -0.355469,-0.35351 z m -0.705078,0.71093 0.355468,0.35157 0.351563,-0.35547 -0.355469,-0.35156 z"/>                                    <path d="m 23.382049,1.93037 -1.015775,3.8652 -2.840556,-2.81624 z"/>                                </g>                            </g>                        </svg>                    </div>                    <div title="Switch to uniform scaling" data-bind="visible: enableNonUniformScaling">                        <svg width="25" height="25" viewBox="0 0 25 25">                            <g>                                <path d="M 0.49414062,10.87891 H 0 v 1.95117 h 0.98828125 v -1.45703 H 2.4707031 v -0.98828 H 0.49414062 Z m 2.96289058,0.49414 h 1.9765626 v -0.98828 H 3.4570312 Z m 2.9648438,0 h 1.9765625 v -0.98828 H 6.421875 Z m 2.9628906,0 h 1.9765624 v -0.98828 H 9.3847656 Z m 2.9648434,0 h 1.976563 v -0.98828 h -1.976563 z m 2.964844,0 h 1.974609 v -0.98828 h -1.974609 z m 2.962891,0 h 1.976562 v -0.98828 h -1.976562 z m 2.964844,0 h 1.974609 v -0.98828 h -1.974609 z m 2.96289,-0.49414 h -0.193359 v 1.67578 H 25 v -1.67578 -0.49414 h -0.494141 -0.300781 z m -0.193359,4.63867 H 25 v -1.97461 H 24.011719 Z M 0,15.79297 h 0.98828125 v -1.97461 H 0 Z m 24.011719,2.68945 H 25 v -1.97656 H 24.011719 Z M 0,18.75781 h 0.98828125 v -1.97656 H 0 Z m 24.011719,2.6875 H 25 V 19.4707 H 24.011719 Z M 0,21.7207 h 0.98828125 v -1.97461 H 0 Z m 24.011719,2.68946 H 25 v -1.97657 H 24.011719 Z M 0,24.68555 h 0.98828125 v -1.97657 H 0 Z m 1.2753906,0.69922 h 1.9765625 v -0.98829 H 1.2753906 Z m 2.9648438,0 h 1.9765625 v -0.98829 H 4.2402344 Z m 2.9628906,0 h 1.9765625 v -0.98829 H 7.203125 Z m 2.964844,0 h 1.976562 v -0.98829 h -1.976562 z m 2.96289,0 h 1.976563 v -0.98829 h -1.976563 z m 2.964844,0 h 1.976563 v -0.98829 h -1.976563 z m 2.962891,0 h 1.976562 v -0.98829 h -1.976562 z m 2.964844,0 H 24 v -0.98829 h -1.976562 z"/>                                <path d="m 0,10.38477 v 1.02343 13.97657 h 15 v -15 z m 2.0449219,2.04492 H 12.955078 V 23.3418 H 2.0449219 Z"/>                                <g>                                    <path d="m 22.251953,18.26172 h 0.179688 l -0.0039,-0.5 h -0.179687 z m -1.003906,-0.49024 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.01 0.0039,0.5 0.5,-0.006 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.01 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z m -1,0.008 0.0039,0.5 0.5,-0.004 -0.0039,-0.5 z"/>                                    <path d="m 23.885095,18.00809 -2.030696,1.17348 -0.02037,-2.31243 z"/>                                </g>                            </g>                        </svg>                    </div>                </div>            </div>        </div>    </div>`;function Ti(t){t=t??ge.Frozen.EMPTY_OBJECT,ge.Check.defined("options.container",t.container),ge.Check.defined("options.scene",t.scene),ge.Check.defined("options.transform",t.transform),ge.Check.defined("options.boundingSphere",t.boundingSphere);let i=(0,ge.getElement)(t.container),o=Ye(Ps);i.appendChild(o);let l=new Ei(t);wt.applyBindings(l,o),this._viewModel=l,this._element=o,this._container=i}Object.defineProperties(Ti.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}});Ti.prototype.isDestroyed=function(){return!1};Ti.prototype.destroy=function(){return wt.cleanNode(this._element),this._container.removeChild(this._element),this._viewModel.destroy(),(0,ge.destroyObject)(this)};var Hn=Ti;var Ee=rt(nt(),1);function Cs(t,i){if(!(0,Ee.defined)(t))throw new Ee.DeveloperError("viewer is required.");i=i??Ee.Frozen.EMPTY_OBJECT;let o=t.scene,l=document.createElement("div");l.className="cesium-viewer-measureContainer",t._toolbar.insertBefore(l,t._toolbar.firstChild),i=(0,Ee.clone)(i),i.container=l,i.scene=o;let h=new Si(i),b=o.postUpdate.addEventListener(function(){let C=t._container.clientHeight-125;h._dropdown.style.maxHeight=`${C}px`});t.destroy=(0,Ee.wrapFunction)(t,t.destroy,function(){b(),h.destroy()}),Object.defineProperties(t,{measure:{get:function(){return h}}})}var Vn=Cs;globalThis.ION_SDK_VERSION="1.128";return Jn(Es);})();
//# sourceMappingURL=IonSdkMeasurements.js.map
