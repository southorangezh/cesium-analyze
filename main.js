!function(){
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */
var e,t,n,i;
/*!
 * Bootstrap v3.4.1 (https://getbootstrap.com/)
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under the MIT license
 */
if(define("Core/getDocumentBaseUri",[],function(){"use strict";const e=Cesium.defined,t=Cesium.getBaseUri;return function(){let n;if(e(document.baseURI))n=document.baseURI;else{const t=document.getElementsByTagName("base")[0];n=e(t)?t.getAttribute("href"):window.location.href}return t(n)}}),define("generated/ApplicationMode",["require","exports","module"],function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationMode=void 0,t.isValidApplicationMode=function(e){return e===i.CESIUM_ION||e===i.SINGLE_USER||e===i.SAML},function(e){e.CESIUM_ION="cesium-ion",e.SINGLE_USER="single-user",e.SAML="saml"}(i||(t.ApplicationMode=i={}))}),define("generated/getEnumKeys",["require","exports","module"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnumKeys=function(e){return Object.keys(e).filter(e=>Number.isNaN(Number(e)))}}),define("generated/getEnumValues",["require","exports","module","./getEnumKeys"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnumValues=function(e){return(0,i.getEnumKeys)(e).map(t=>e[t])};const i=e("./getEnumKeys")}),define("generated/IonEnvironmentName",["require","exports","module"],function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.IonEnvironmentName=void 0,t.getIonEnvironmentNameFromUrl=function(e){switch(("string"==typeof e?new URL(e):e).hostname){case"ion.cesium.com":return i.PRODUCTION;case"ion-staging.cesium.com":return i.STAGING;case"ion-development.cesium.com":return i.DEVELOPMENT;case"ion.test":return i.LOCAL;default:return i.UNKNOWN}},function(e){e.PRODUCTION="PRODUCTION",e.STAGING="STAGING",e.DEVELOPMENT="DEVELOPMENT",e.LOCAL="LOCAL",e.UNKNOWN="UNKNOWN"}(i||(t.IonEnvironmentName=i={}))}),define("generated/Feature",["require","exports","module","./ApplicationMode","./getEnumValues","./IonEnvironmentName"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Feature=void 0,t.isUserFeature=u,t.isServerFeature=h;const i=Cesium,r=e("./ApplicationMode"),o=e("./getEnumValues"),a=e("./IonEnvironmentName");var s,l;!function(e){e.ASSET_ARCHIVES_FULL="ASSET_ARCHIVES_FULL",e.ASSET_DEPOT="ASSET_DEPOT",e.ASSET_DEPOT_FROM_PREFIX="ASSET_DEPOT_FROM_PREFIX",e.ASSET_DEPOT_LABELS="ASSET_DEPOT_LABELS",e.ASSET_DEPOT_HIDDEN_ASSETS="ASSET_DEPOT_HIDDEN_ASSETS",e.ASSET_EXPORT_S3="ASSET_EXPORT_S3",e.ASSET_IMPORT_S3="ASSET_IMPORT_S3",e.ASSET_EXPORT_AZURE="ASSET_EXPORT_AZURE",e.ASSET_IMPORT_AZURE="ASSET_IMPORT_AZURE",e.ASSET_SOURCES="ASSET_SOURCES",e.BILLING="BILLING",e.CESIUM_HOSTED_ION="CESIUM_HOSTED_ION",e.GEOCODER="GEOCODER",e.HUBSPOT="HUBSPOT",e.ITWIN="ITWIN",e.LABELS="LABELS",e.MULTI_USER="MULTI_USER",e.OAUTH_CLIENT="OAUTH_CLIENT",e.OAUTH_PROVIDER="OAUTH_PROVIDER",e.PASSWORD_AUTHENTICATION="PASSWORD_AUTHENTICATION",e.PROXY_BING="PROXY_BING",e.PUBLIC_INTERNET_ACCESS="PUBLIC_INTERNET_ACCESS",e.SAML_AUTHENTICATION="SAML_AUTHENTICATION",e.SEND_EMAILS="SEND_EMAILS",e.TEAMS="TEAMS",e.TOKENS="TOKENS",e.USAGE="USAGE",e.CLICK_THROUGH_AGREEMENTS="CLICK_THROUGH_AGREEMENTS",e.VRICON_PROMOTION="VRICON_PROMOTION",e.DELETE_SOURCES="DELETE_SOURCES",e.STORIES_ASSET_CLIPPING="STORIES_ASSET_CLIPPING",e.LICENSE_TRACKING="LICENSE_TRACKING",e.USER_NOTES="USER_NOTES"}(s||(s={})),function(e){e.ASSET_ARCHIVES_CLIPS="ASSET_ARCHIVES_CLIPS",e.SKETCHFAB="SKETCHFAB",e.MULTI_FACTOR_AUTHENTICATION="MULTI_FACTOR_AUTHENTICATION",e.DESIGN_TILER="DESIGN_TILER",e.GAUSSIAN_SPLATS="GAUSSIAN_SPLATS",e.RECONSTRUCT_MESH="RECONSTRUCT_MESH",e.REALITY_ANALYSIS="REALITY_ANALYSIS"}(l||(l={}));const c=new Set((0,o.getEnumValues)(l));function u(e){return c.has(e)}const d=new Set((0,o.getEnumValues)(s));function h(e){return d.has(e)}let p,f;t.Feature={isEnabledForServer:function(e,t=f){var n;if(!h(e)&&!u(e))throw new i.DeveloperError(`Invalid Feature :"${e}"`);if(!t)throw new i.DeveloperError("'serverContext' was not provided and 'Feature.serverContext' is undefined");const o=t.applicationMode===r.ApplicationMode.CESIUM_ION;switch(e){case s.ASSET_ARCHIVES_FULL:return t.archives;case l.ASSET_ARCHIVES_CLIPS:return!0;case s.ASSET_DEPOT:return t.applicationMode!==r.ApplicationMode.SINGLE_USER;case s.ASSET_DEPOT_FROM_PREFIX:case s.ASSET_DEPOT_HIDDEN_ASSETS:case s.ASSET_DEPOT_LABELS:return o;case s.ASSET_EXPORT_S3:return t.s3Export;case s.ASSET_IMPORT_S3:return t.s3Import;case s.ASSET_EXPORT_AZURE:return t.azureExport;case s.ASSET_IMPORT_AZURE:return t.azureImport;case s.ASSET_SOURCES:case s.CLICK_THROUGH_AGREEMENTS:return o;case s.HUBSPOT:return Boolean(o&&t.hubspot);case s.BILLING:return o&&t.billing;case s.CESIUM_HOSTED_ION:return o;case s.GEOCODER:return o||t.ionConnection;case s.LABELS:case l.MULTI_FACTOR_AUTHENTICATION:return o;case s.MULTI_USER:return t.applicationMode!==r.ApplicationMode.SINGLE_USER;case s.OAUTH_CLIENT:case l.SKETCHFAB:return o;case s.OAUTH_PROVIDER:return t.applicationMode!==r.ApplicationMode.SINGLE_USER;case s.PASSWORD_AUTHENTICATION:case s.PUBLIC_INTERNET_ACCESS:return o;case s.SAML_AUTHENTICATION:return t.applicationMode===r.ApplicationMode.SAML;case s.TEAMS:return t.applicationMode!==r.ApplicationMode.SINGLE_USER;case s.DELETE_SOURCES:return!o&&t.deleteSources;case s.TOKENS:return t.applicationMode!==r.ApplicationMode.SINGLE_USER;case s.USAGE:return o&&t.usage;case s.VRICON_PROMOTION:case s.SEND_EMAILS:return o;case s.ITWIN:return Boolean(o&&t.iTwinStorage);case s.PROXY_BING:return Boolean(o&&t.proxyBing);case l.DESIGN_TILER:case l.GAUSSIAN_SPLATS:return!0;case l.RECONSTRUCT_MESH:case l.REALITY_ANALYSIS:return o;case s.STORIES_ASSET_CLIPPING:return o&&(t.ionEnvironmentName===a.IonEnvironmentName.DEVELOPMENT||t.ionEnvironmentName===a.IonEnvironmentName.LOCAL);case s.LICENSE_TRACKING:return o&&t.licenseTracking;case s.USER_NOTES:return null===(n=t.userNotes)||void 0===n||n;default:return!1}},isServerFeature:h,isEnabledForUser:function(e,n=p,r=f){if(!u(e))throw new i.DeveloperError(`Invalid Feature.User Flag: "${e}"`);if(!n)throw new i.DeveloperError("'userContext' was not provide and 'Feature.userContext' is undefined");if(!t.Feature.isEnabledForServer(e,r))return!1;switch(e){case l.GAUSSIAN_SPLATS:case l.RECONSTRUCT_MESH:case l.REALITY_ANALYSIS:case l.DESIGN_TILER:case l.ASSET_ARCHIVES_CLIPS:case l.SKETCHFAB:case l.MULTI_FACTOR_AUTHENTICATION:}return!0},isUserFeature:u,User:l,Server:s,get serverContext(){return f},set serverContext(e){e&&(i.Check.typeOf.object("serverContext",e),i.Check.typeOf.bool("serverContext.billing",e.billing),i.Check.typeOf.bool("serverContext.usage",e.usage),i.Check.typeOf.bool("serverContext.s3Import",e.s3Import),i.Check.typeOf.bool("serverContext.s3Export",e.s3Export),i.Check.typeOf.bool("serverContext.archives",e.archives),i.Check.typeOf.bool("serverContext.ionConnection",e.ionConnection),i.Check.typeOf.bool("serverContext.deleteSources",e.deleteSources),i.Check.typeOf.bool("serverContext.licenseTracking",e.licenseTracking),i.Check.typeOf.bool("serverContext.userNotes",e.userNotes),(0,i.defined)(e.hubspot)&&i.Check.typeOf.bool("serverContext.hubspot",e.hubspot),(0,i.defined)(e.iTwinStorage)&&i.Check.typeOf.bool("serverContext.iTwinStorage",e.iTwinStorage),(0,i.defined)(e.proxyBing)&&i.Check.typeOf.bool("serverContext.proxyBing",e.proxyBing)),f=e},get userContext(){return p},set userContext(e){e&&(e!==t.Feature.UNAUTHENTICATED_USER_CONTEXT&&i.Check.typeOf.number.greaterThan("userContext.id",e.id,0),i.Check.typeOf.bool("userContext.betaTester",e.betaTester),i.Check.typeOf.bool("userContext.employee",e.employee),i.Check.typeOf.bool("userContext.admin",e.admin)),p=e},UNAUTHENTICATED_USER_CONTEXT:Object.freeze({id:0,betaTester:!1,employee:!1,admin:!1})}}),define("Core/Feature",["generated/Feature"],function(e){"use strict";return e.Feature}),define("Core/Analytics",["Core/getDocumentBaseUri","Core/Feature"],function(e,t){"use strict";Cesium.Check;const n=Cesium.defined,i={tagId:{"ion.cesium.com":"G-R8E99FY9Q0","ion-staging.cesium.com":"G-XB3TMMTXV3","ion.test":"G-XB3TMMTXV3"}[window.location.hostname],_lastPageData:void 0,available:function(){return t.isEnabledForServer(t.Server.PUBLIC_INTERNET_ACCESS)},initialize:function(){if(i._lastPageData=void 0,!i.tagId||!t.isEnabledForServer(t.Server.PUBLIC_INTERNET_ACCESS))return;window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",i.tagId,{send_page_view:!1});const e=document.createElement("script");e.src=`https://www.googletagmanager.com/gtag/js?id=${i.tagId}`,e.async=!0,document.head.appendChild(e)},sendEvent4:function(e,t){n(window.gtag)&&window.gtag("event",e,Object.assign({},t,i._lastPageData))},sendEvent:function(e,t,n,r){i.sendEvent4(t,{label:n,category:e,value:r})}};return Object.defineProperties(i,{category:{get:function(){return{ION_DASHBOARD:"Cesium ion Dashboard",TILES_LOCATION_EDITOR:"3D Tiles Location Editor"}}},action:{get:function(){return{OPEN_SUPPORT:"Open support",CLICK_COMMUNITY_SUPPORT:"Click community support",CLICK_PRIVATE_SUPPORT:"Click private support",OPEN_CHANGELOG:"Open changelog",CREATE_ITEM:"create_item"}}},label:{get:function(){return{APPLICATION:"Application"}}}}),i.setUserId=function(e){n(window.gtag)&&window.gtag("config",i.tagId,{user_id:e})},i.trackRouter=function(t){t.on("router:navigation:complete").then(function(r,o){if(n(r.router)&&t!==r.router)return;if(!n(window.gtag))return;const a=e();let s=o.config.hash;n(s)?"/"===s[0]&&(s=s.substr(1)):s="",i._lastPageData={page_title:o.config.title,page_location:a+s,page_referrer:n(i._lastPageData)?i._lastPageData.page_location:void 0},window.gtag("event","page_view",i._lastPageData)})},i}),define("Core/defaultValue",[],function(){"use strict";return function(e,t){return null!=e?e:t}}),define("Core/AppData",["generated/ApplicationMode","generated/IonEnvironmentName","Core/defaultValue","Core/Feature"],function(e,t,n,i){"use strict";const r={accountRules:void 0,plans:void 0,billingKey:void 0,billingDisabled:void 0,usageDisabled:void 0,assetViewerImageryId:void 0,epicClientId:void 0,googleClientId:void 0,googleTilesAssetId:void 0,moonTilesAssetId:void 0,marsTilesAssetId:void 0,githubClientId:void 0,applicationMode:void 0,dataStoreType:void 0,fileSystemUploadMaxChunkSize:void 0,bentleyClientId:void 0,bentleyImsEndpoint:void 0,sketchfabClientId:void 0,s3Import:void 0,deleteSources:void 0,s3Export:void 0,azureImport:void 0,azureExport:void 0,limits:void 0},o={maxClipRegionForUserData:2e8,maxClipRegionForAssetDepot:25e6};class a{static set(e){Object.assign(r,e),i.serverContext={applicationMode:a.applicationMode,billing:!a.billingDisabled,usage:!a.usageDisabled,s3Import:a.s3Import,s3Export:a.s3Export,azureImport:a.azureImport,azureExport:a.azureExport,archives:a.archives,deleteSources:a.deleteSources,ionConnection:n(r.ionConnection,!1),ionEnvironmentName:t.getIonEnvironmentNameFromUrl(window.location),licenseTracking:a.licenseTracking,userNotes:a.userNotes}}static get accountRules(){return r.accountRules}static get plans(){return r.plans}static get billingKey(){return r.billingKey}static get billingDisabled(){return r.billingDisabled}static get usageDisabled(){return r.usageDisabled}static get assetViewerImageryId(){return r.assetViewerImageryId}static get moonTilesAssetId(){return r.moonTilesAssetId}static get marsTilesAssetId(){return r.marsTilesAssetId}static get epicClientId(){return r.epicClientId}static get githubClientId(){return r.githubClientId}static get googleClientId(){return r.googleClientId}static get googleTilesAssetId(){return r.googleTilesAssetId}static get sketchfabClientId(){return r.sketchfabClientId}static get bentleyClientId(){return r.bentleyClientId}static get bentleyImsEndpoint(){return r.bentleyImsEndpoint}static get applicationMode(){return n(r.applicationMode,e.ApplicationMode.CESIUM_ION)}static get dataStoreType(){return r.dataStoreType}static get fileSystemUploadMaxChunkSize(){return r.fileSystemUploadMaxChunkSize}static get s3Import(){return n(r.s3Import,!0)}static get s3Export(){return n(r.s3Export,!0)}static get deleteSources(){return n(r.deleteSources,!1)}static get azureImport(){return n(r.azureImport,!0)}static get azureExport(){return n(r.azureExport,!0)}static get archives(){return n(r.archives,!0)}static get limits(){return n(r.limits,o)}static get licenseTracking(){return n(r.licenseTracking,!1)}static get userNotes(){return n(r.userNotes,!1)}static get licenseInfo(){return r.licenseInfo}}return a}),e=this,t=function(){return function(){var e={686:function(e,t,i){"use strict";i.d(t,{default:function(){return S}});var r=i(279),o=i.n(r),a=i(370),s=i.n(a),l=i(817),c=i.n(l);function u(e){try{return document.execCommand(e)}catch(t){return!1}}var d=function(e){var t=c()(e);return u("cut"),t},h=function(e,t){var n=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(i,"px"),n.setAttribute("readonly",""),n.value=e,n}(e);t.container.appendChild(n);var i=c()(n);return u("copy"),n.remove(),i},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof e?n=h(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?n=h(e.value,t):(n=c()(e),u("copy")),n};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,i=e.container,r=e.target,o=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==r){if(!r||"object"!==f(r)||1!==r.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&r.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(r.hasAttribute("readonly")||r.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return o?p(o,{container:i}):r?"cut"===n?d(r):p(r,{container:i}):void 0};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var n,i=w(e);if(t){var r=w(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function _(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,n,i,r=y(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this)).resolveOptions(t),n.listenClick(e),n}return t=o,n=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===g(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=s()(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy",i=m({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(i?"success":"error",{action:n,text:i,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return _("action",e)}},{key:"defaultTarget",value:function(e){var t=_("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return _("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],i=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return p(e,t)}},{key:"cut",value:function(e){return d(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}],n&&v(t.prototype,n),i&&v(t,i),o}(o()),S=x},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,n){var i=n(828);function r(e,t,n,i,r){var a=o.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}e.exports=function(e,t,n,i,o){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return r(e,t,n,i,o)}))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var i=n(879),r=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(i.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}(e,t,n);if(i.string(e))return function(e,t,n){return r(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r),t=i.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function r(){i.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}return i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i(686)}().default},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("clipboard",[],t):"object"==typeof exports?exports.ClipboardJS=t():e.ClipboardJS=t(),
/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */
function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var i=[],r=Object.getPrototypeOf,o=i.slice,a=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},s=i.push,l=i.indexOf,c={},u=c.toString,d=c.hasOwnProperty,h=d.toString,p=h.call(Object),f={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},g=function(e){return null!=e&&e===e.window},v=e.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function y(e,t,n){var i,r,o=(n=n||v).createElement("script");if(o.text=e,t)for(i in b)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[u.call(e)]||"object":typeof e}var _="3.7.1",x=/HTML$/i,S=function(e,t){return new S.fn.init(e,t)};function T(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}S.fn=S.prototype={jquery:_,constructor:S,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},S.extend=S.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(c&&i&&(S.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[t],o=r&&!Array.isArray(n)?[]:r||S.isPlainObject(n)?n:{},r=!1,a[t]=S.extend(c,o,i)):void 0!==i&&(a[t]=i));return a},S.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==u.call(e))&&(!(t=r(e))||"function"==typeof(n=d.call(t,"constructor")&&t.constructor)&&h.call(n)===p)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){y(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(T(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,n="",i=0,r=e.nodeType;if(!r)for(;t=e[i++];)n+=S.text(t);return 1===r||11===r?e.textContent:9===r?e.documentElement.textContent:3===r||4===r?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?S.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!x.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,s=[];if(T(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&s.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&s.push(r);return a(s)},guid:1,support:f}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=i[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var C=i.pop,E=i.sort,k=i.splice,I="[\\x20\\t\\r\\n\\f]",P=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g");S.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var D=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function O(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}S.escapeSelector=function(e){return(e+"").replace(D,O)};var M=v,L=s;!function(){var t,r,a,s,c,u,h,p,m,g,v=L,b=S.expando,y=0,w=0,_=te(),x=te(),T=te(),D=te(),O=function(e,t){return e===t&&(c=!0),0},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="(?:\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+I+"*("+N+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+I+"*\\]",U=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",V=new RegExp(I+"+","g"),B=new RegExp("^"+I+"*,"+I+"*"),$=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),H=new RegExp(I+"|>"),G=new RegExp(U),j=new RegExp("^"+N+"$"),z={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,X=new RegExp("\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\([^\\r\\n\\f])","g"),Z=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},J=function(){ce()},Q=pe(function(e){return!0===e.disabled&&A(e,"fieldset")},{dir:"parentNode",next:"legend"});try{v.apply(i=o.call(M.childNodes),M.childNodes),i[M.childNodes.length].nodeType}catch(n){v={apply:function(e,t){L.apply(e,o.call(t))},call:function(e){L.apply(e,o.call(arguments,1))}}}function ee(e,t,n,i){var r,o,a,s,l,c,d,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!i&&(ce(t),t=t||u,p)){if(11!==g&&(l=W.exec(e)))if(r=l[1]){if(9===g){if(!(a=t.getElementById(r)))return n;if(a.id===r)return v.call(n,a),n}else if(h&&(a=h.getElementById(r))&&ee.contains(t,a)&&a.id===r)return v.call(n,a),n}else{if(l[2])return v.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&t.getElementsByClassName)return v.apply(n,t.getElementsByClassName(r)),n}if(!(D[e+" "]||m&&m.test(e))){if(d=e,h=t,1===g&&(H.test(e)||$.test(e))){for((h=K.test(e)&&le(t.parentNode)||t)==t&&f.scope||((s=t.getAttribute("id"))?s=S.escapeSelector(s):t.setAttribute("id",s=b)),o=(c=de(e)).length;o--;)c[o]=(s?"#"+s:":scope")+" "+he(c[o]);d=c.join(",")}try{return v.apply(n,h.querySelectorAll(d)),n}catch(y){D(e,!0)}finally{s===b&&t.removeAttribute("id")}}}return ye(e.replace(P,"$1"),t,n,i)}function te(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ne(e){return e[b]=!0,e}function ie(e){var t=u.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return A(t,"input")&&t.type===e}}function oe(e){return function(t){return(A(t,"input")||A(t,"button"))&&t.type===e}}function ae(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Q(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return ne(function(t){return t=+t,ne(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function le(e){return e&&void 0!==e.getElementsByTagName&&e}function ce(e){var t,i=e?e.ownerDocument||e:M;return i!=u&&9===i.nodeType&&i.documentElement?(h=(u=i).documentElement,p=!S.isXMLDoc(u),g=h.matches||h.webkitMatchesSelector||h.msMatchesSelector,h.msMatchesSelector&&M!=u&&(t=u.defaultView)&&t.top!==t&&t.addEventListener("unload",J),f.getById=ie(function(e){return h.appendChild(e).id=S.expando,!u.getElementsByName||!u.getElementsByName(S.expando).length}),f.disconnectedMatch=ie(function(e){return g.call(e,"*")}),f.scope=ie(function(){return u.querySelectorAll(":scope")}),f.cssHas=ie(function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(n){return!0}}),f.getById?(r.filter.ID=function(e){var t=e.replace(X,Z);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(X,Z);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},r.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&p)return t.getElementsByClassName(e)},m=[],ie(function(e){var t;h.appendChild(e).innerHTML="<a id='"+b+"' href='' disabled='disabled'></a><select id='"+b+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||m.push("\\["+I+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+b+"-]").length||m.push("~="),e.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll(":checked").length||m.push(":checked"),(t=u.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),(t=u.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+I+"*name"+I+"*="+I+"*(?:''|\"\")")}),f.cssHas||m.push(":has"),m=m.length&&new RegExp(m.join("|")),O=function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e===u||e.ownerDocument==M&&ee.contains(M,e)?-1:t===u||t.ownerDocument==M&&ee.contains(M,t)?1:s?l.call(s,e)-l.call(s,t):0:4&n?-1:1)},u):u}for(t in ee.matches=function(e,t){return ee(e,null,null,t)},ee.matchesSelector=function(e,t){if(ce(e),p&&!D[t+" "]&&(!m||!m.test(t)))try{var i=g.call(e,t);if(i||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(n){D(t,!0)}return ee(t,u,null,[e]).length>0},ee.contains=function(e,t){return(e.ownerDocument||e)!=u&&ce(e),S.contains(e,t)},ee.attr=function(e,t){(e.ownerDocument||e)!=u&&ce(e);var n=r.attrHandle[t.toLowerCase()],i=n&&d.call(r.attrHandle,t.toLowerCase())?n(e,t,!p):void 0;return void 0!==i?i:e.getAttribute(t)},ee.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},S.uniqueSort=function(e){var t,n=[],i=0,r=0;if(c=!f.sortStable,s=!f.sortStable&&o.call(e,0),E.call(e,O),c){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)k.call(e,n[i],1)}return s=null,e},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(o.apply(this)))},r=S.expr={cacheLength:50,createPseudo:ne,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(X,Z),e[3]=(e[3]||e[4]||e[5]||"").replace(X,Z),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ee.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ee.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=de(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(X,Z).toLowerCase();return"*"===e?function(){return!0}:function(e){return A(e,t)}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=ee.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f=o!==a?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!l&&!s,w=!1;if(m){if(o){for(;f;){for(d=t;d=d[f];)if(s?A(d,g):1===d.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&v){for(w=(h=(c=(u=m[b]||(m[b]={}))[e]||[])[0]===y&&c[1])&&c[2],d=h&&m.childNodes[h];d=++h&&d&&d[f]||(w=h=0)||p.pop();)if(1===d.nodeType&&++w&&d===t){u[e]=[y,h,w];break}}else if(v&&(w=h=(c=(u=t[b]||(t[b]={}))[e]||[])[0]===y&&c[1]),!1===w)for(;(d=++h&&d&&d[f]||(w=h=0)||p.pop())&&(!(s?A(d,g):1===d.nodeType)||!++w||(v&&((u=d[b]||(d[b]={}))[e]=[y,w]),d!==t)););return(w-=r)===i||w%i===0&&w/i>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ee.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ne(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=l.call(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ne(function(e){var t=[],n=[],i=be(e.replace(P,"$1"));return i[b]?ne(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:ne(function(e){return function(t){return ee(e,t).length>0}}),contains:ne(function(e){return e=e.replace(X,Z),function(t){return(t.textContent||S.text(t)).indexOf(e)>-1}}),lang:ne(function(e){return j.test(e||"")||ee.error("unsupported lang: "+e),e=e.replace(X,Z).toLowerCase(),function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===function(){try{return u.activeElement}catch(e){}}()&&u.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ae(!1),disabled:ae(!0),checked:function(e){return A(e,"input")&&!!e.checked||A(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return q.test(e.nodeName)},button:function(e){return A(e,"input")&&"button"===e.type||A(e,"button")},text:function(e){var t;return A(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se(function(){return[0]}),last:se(function(e,t){return[t-1]}),eq:se(function(e,t,n){return[n<0?n+t:n]}),even:se(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:se(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:se(function(e,t,n){var i;for(i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:se(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=re(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=oe(t);function ue(){}function de(e,t){var n,i,o,a,s,l,c,u=x[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=r.preFilter;s;){for(a in n&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=$.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(P," ")}),s=s.slice(n.length)),r.filter)!(i=z[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ee.error(e):x(e,l).slice(0)}function he(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function pe(e,t,n){var i=t.dir,r=t.next,o=r||i,a=n&&"parentNode"===o,s=w++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,l){var c,u,d=[y,s];if(l){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(u=t[b]||(t[b]={}),r&&A(t,r))t=t[i]||t;else{if((c=u[o])&&c[0]===y&&c[1]===s)return d[2]=c[2];if(u[o]=d,d[2]=e(t,n,l))return!0}return!1}}function fe(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function me(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),c&&t.push(s)));return a}function ge(e,t,n,i,r,o){return i&&!i[b]&&(i=ge(i)),r&&!r[b]&&(r=ge(r,o)),ne(function(o,a,s,c){var u,d,h,p,f=[],m=[],g=a.length,b=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ee(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?b:me(b,f,e,s,c);if(n?n(y,p=r||(o?e:g||i)?[]:a,s,c):p=y,i)for(u=me(p,m),i(u,[],s,c),d=u.length;d--;)(h=u[d])&&(p[m[d]]=!(y[m[d]]=h));if(o){if(r||e){if(r){for(u=[],d=p.length;d--;)(h=p[d])&&u.push(y[d]=h);r(null,p=[],u,c)}for(d=p.length;d--;)(h=p[d])&&(u=r?l.call(o,h):f[d])>-1&&(o[u]=!(a[u]=h))}}else p=me(p===a?p.splice(g,p.length):p),r?r(null,a,p,c):v.apply(a,p)})}function ve(e){for(var t,n,i,o=e.length,s=r.relative[e[0].type],c=s||r.relative[" "],u=s?1:0,d=pe(function(e){return e===t},c,!0),h=pe(function(e){return l.call(t,e)>-1},c,!0),p=[function(e,n,i){var r=!s&&(i||n!=a)||((t=n).nodeType?d(e,n,i):h(e,n,i));return t=null,r}];u<o;u++)if(n=r.relative[e[u].type])p=[pe(fe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return ge(u>1&&fe(p),u>1&&he(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(P,"$1"),n,u<i&&ve(e.slice(u,i)),i<o&&ve(e=e.slice(i)),i<o&&he(e))}p.push(n)}return fe(p)}function be(e,t){var n,i=[],o=[],s=T[e+" "];if(!s){for(t||(t=de(e)),n=t.length;n--;)(s=ve(t[n]))[b]?i.push(s):o.push(s);s=T(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,s,l,c,d){var h,f,m,g=0,b="0",w=o&&[],_=[],x=a,T=o||i&&r.find.TAG("*",d),A=y+=null==x?1:Math.random()||.1,E=T.length;for(d&&(a=s==u||s||d);b!==E&&null!=(h=T[b]);b++){if(i&&h){for(f=0,s||h.ownerDocument==u||(ce(h),l=!p);m=e[f++];)if(m(h,s||u,l)){v.call(c,h);break}d&&(y=A)}n&&((h=!m&&h)&&g--,o&&w.push(h))}if(g+=b,n&&b!==g){for(f=0;m=t[f++];)m(w,_,s,l);if(o){if(g>0)for(;b--;)w[b]||_[b]||(_[b]=C.call(c));_=me(_)}v.apply(c,_),d&&!o&&_.length>0&&g+t.length>1&&S.uniqueSort(c)}return d&&(y=A,a=x),w};return n?ne(o):o}(o,i)),s.selector=e}return s}function ye(e,t,n,i){var o,a,s,l,c,u="function"==typeof e&&e,d=!i&&de(e=u.selector||e);if(n=n||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===t.nodeType&&p&&r.relative[a[1].type]){if(!(t=(r.find.ID(s.matches[0].replace(X,Z),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=z.needsContext.test(e)?0:a.length;o--&&(s=a[o],!r.relative[l=s.type]);)if((c=r.find[l])&&(i=c(s.matches[0].replace(X,Z),K.test(a[0].type)&&le(t.parentNode)||t))){if(a.splice(o,1),!(e=i.length&&he(a)))return v.apply(n,i),n;break}}return(u||be(e,d))(i,t,!p,n,!t||K.test(e)&&le(t.parentNode)||t),n}ue.prototype=r.filters=r.pseudos,r.setFilters=new ue,f.sortStable=b.split("").sort(O).join("")===b,ce(),f.sortDetached=ie(function(e){return 1&e.compareDocumentPosition(u.createElement("fieldset"))}),S.find=ee,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,ee.compile=be,ee.select=ye,ee.setDocument=ce,ee.tokenize=de,ee.escape=S.escapeSelector,ee.getText=S.text,ee.isXML=S.isXMLDoc,ee.selectors=S.expr,ee.support=S.support,ee.uniqueSort=S.uniqueSort}();var R=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&S(e).is(n))break;i.push(e)}return i},N=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},F=S.expr.match.needsContext,U=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(e,t,n){return m(t)?S.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?S.grep(e,function(e){return e===t!==n}):"string"!=typeof t?S.grep(e,function(e){return l.call(t,e)>-1!==n}):S.filter(t,e,n)}S.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?S.find.matchesSelector(i,e)?[i]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<i;t++)if(S.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)S.find(e,r[t],n);return i>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(V(this,e||[],!1))},not:function(e){return this.pushStack(V(this,e||[],!0))},is:function(e){return!!V(this,"string"==typeof e&&F.test(e)?S(e):e||[],!1).length}});var B,$=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,H=S.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||B,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:$.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:v,!0)),U.test(i[1])&&S.isPlainObject(t))for(i in t)m(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=v.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)};H.prototype=S.fn,B=S(v);var G=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function z(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&S(e);if(!F.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?l.call(S(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return R(e,"parentNode")},parentsUntil:function(e,t,n){return R(e,"parentNode",n)},next:function(e){return z(e,"nextSibling")},prev:function(e){return z(e,"previousSibling")},nextAll:function(e){return R(e,"nextSibling")},prevAll:function(e){return R(e,"previousSibling")},nextUntil:function(e,t,n){return R(e,"nextSibling",n)},prevUntil:function(e,t,n){return R(e,"previousSibling",n)},siblings:function(e){return N((e.parentNode||{}).firstChild,e)},children:function(e){return N(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(e,t){S.fn[e]=function(n,i){var r=S.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=S.filter(i,r)),this.length>1&&(j[e]||S.uniqueSort(r),G.test(e)&&r.reverse()),this.pushStack(r)}});var q=/[^\x20\t\r\n\f]+/g;function Y(e){return e}function W(e){throw e}function K(e,t,n,i){var r;try{e&&m(r=e.promise)?r.call(e).done(t).fail(n):e&&m(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(q)||[],function(e,n){t[n]=!0}),t}(e):S.extend({},e);var t,n,i,r,o=[],a=[],s=-1,l=function(){for(r=r||e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){S.each(n,function(n,i){m(i)?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==w(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return S.each(arguments,function(e,t){for(var n;(n=S.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?S.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||t||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},S.extend({Deferred:function(t){var i=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred(function(t){S.each(i,function(n,i){var r=m(e[i[4]])&&e[i[4]];a[i[1]](function(){var e=r&&r.apply(this,arguments);e&&m(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,r,o){var a=0;function s(t,i,r,o){return function(){var l=this,c=arguments,u=function(){var e,n;if(!(t<a)){if((e=r.apply(l,c))===i.promise())throw new TypeError("Thenable self-resolution");n=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(n)?o?n.call(e,s(a,i,Y,o),s(a,i,W,o)):(a++,n.call(e,s(a,i,Y,o),s(a,i,W,o),s(a,i,Y,i.notifyWith))):(r!==Y&&(l=void 0,c=[e]),(o||i.resolveWith)(l,c))}},d=o?u:function(){try{u()}catch(n){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(n,d.error),t+1>=a&&(r!==W&&(l=void 0,c=[n]),i.rejectWith(l,c))}};t?d():(S.Deferred.getErrorHook?d.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(d.error=S.Deferred.getStackHook()),e.setTimeout(d))}}return S.Deferred(function(e){i[0][3].add(s(0,e,m(o)?o:Y,e.notifyWith)),i[1][3].add(s(0,e,m(t)?t:Y)),i[2][3].add(s(0,e,m(r)?r:W))}).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},a={};return S.each(i,function(e,t){var n=t[2],s=t[5];o[t[1]]=n.add,s&&n.add(function(){r=s},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),n.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=n.fireWith}),o.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,n=t,i=Array(n),r=o.call(arguments),a=S.Deferred(),s=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(i,r)}};if(t<=1&&(K(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||m(r[n]&&r[n].then)))return a.then();for(;n--;)K(r[n],s(n),a.reject);return a.promise()}});var X=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&X.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},S.readyException=function(t){e.setTimeout(function(){throw t})};var Z=S.Deferred();function J(){v.removeEventListener("DOMContentLoaded",J),e.removeEventListener("load",J),S.ready()}S.fn.ready=function(e){return Z.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||Z.resolveWith(v,[S]))}}),S.ready.then=Z.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?e.setTimeout(S.ready):(v.addEventListener("DOMContentLoaded",J),e.addEventListener("load",J));var Q=function(e,t,n,i,r,o,a){var s=0,l=e.length,c=null==n;if("object"===w(n))for(s in r=!0,n)Q(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,m(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(S(e),n)})),t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):o},ee=/^-ms-/,te=/-([a-z])/g;function ne(e,t){return t.toUpperCase()}function ie(e){return e.replace(ee,"ms-").replace(te,ne)}var re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function oe(){this.expando=S.expando+oe.uid++}oe.uid=1,oe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[ie(t)]=n;else for(i in t)r[ie(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in i?[t]:t.match(q)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||S.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var ae=new oe,se=new oe,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ce=/[A-Z]/g;function ue(e,t,i){var r;if(void 0===i&&1===e.nodeType)if(r="data-"+t.replace(ce,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(r))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}(i)}catch(n){}se.set(e,t,i)}else i=void 0;return i}S.extend({hasData:function(e){return se.hasData(e)||ae.hasData(e)},data:function(e,t,n){return se.access(e,t,n)},removeData:function(e,t){se.remove(e,t)},_data:function(e,t,n){return ae.access(e,t,n)},_removeData:function(e,t){ae.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=se.get(o),1===o.nodeType&&!ae.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=ie(i.slice(5)),ue(o,i,r[i]));ae.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){se.set(this,e)}):Q(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=se.get(o,e))||void 0!==(n=ue(o,e))?n:void 0;this.each(function(){se.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){se.remove(this,e)})}}),S.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=ae.get(e,t),n&&(!i||Array.isArray(n)?i=ae.access(e,t,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),i=n.length,r=n.shift(),o=S._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){S.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae.get(e,n)||ae.access(e,n,{empty:S.Callbacks("once memory").add(function(){ae.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each(function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=S.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=ae.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],fe=v.documentElement,me=function(e){return S.contains(e.ownerDocument,e)},ge={composed:!0};fe.getRootNode&&(me=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ge)===e.ownerDocument});var ve=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&me(e)&&"none"===S.css(e,"display")};function be(e,t,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return S.css(e,t,"")},l=s(),c=n&&n[3]||(S.cssNumber[t]?"":"px"),u=e.nodeType&&(S.cssNumber[t]||"px"!==c&&+l)&&he.exec(S.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)S.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,S.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var ye={};function we(e){var t,n=e.ownerDocument,i=e.nodeName,r=ye[i];return r||(t=n.body.appendChild(n.createElement(i)),r=S.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ye[i]=r,r)}function _e(e,t){for(var n,i,r=[],o=0,a=e.length;o<a;o++)(i=e[o]).style&&(n=i.style.display,t?("none"===n&&(r[o]=ae.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&ve(i)&&(r[o]=we(i))):"none"!==n&&(r[o]="none",ae.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}S.fn.extend({show:function(){return _e(this,!0)},hide:function(){return _e(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ve(this)?S(this).show():S(this).hide()})}});var xe,Se,Te=/^(?:checkbox|radio)$/i,Ae=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;xe=v.createDocumentFragment().appendChild(v.createElement("div")),(Se=v.createElement("input")).setAttribute("type","radio"),Se.setAttribute("checked","checked"),Se.setAttribute("name","t"),xe.appendChild(Se),f.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML="<option></option>",f.option=!!xe.lastChild;var Ee={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ke(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function Ie(e,t){for(var n=0,i=e.length;n<i;n++)ae.set(e[n],"globalEval",!t||ae.get(t[n],"globalEval"))}Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead,Ee.th=Ee.td,f.option||(Ee.optgroup=Ee.option=[1,"<select multiple='multiple'>","</select>"]);var Pe=/<|&#?\w+;/;function De(e,t,n,i,r){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===w(o))S.merge(h,o.nodeType?[o]:o);else if(Pe.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(Ae.exec(o)||["",""])[1].toLowerCase(),l=Ee[s]||Ee._default,a.innerHTML=l[1]+S.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;S.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",p=0;o=h[p++];)if(i&&S.inArray(o,i)>-1)r&&r.push(o);else if(c=me(o),a=ke(d.appendChild(o),"script"),c&&Ie(a),n)for(u=0;o=a[u++];)Ce.test(o.type||"")&&n.push(o);return d}var Oe=/^([^.]*)(?:\.(.+)|)/;function Me(){return!0}function Le(){return!1}function Re(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)Re(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Le;else if(!r)return e;return 1===o&&(a=r,r=function(e){return S().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,r,i,n)})}function Ne(e,t,n){n?(ae.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,i=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(i)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=o.call(arguments),ae.set(this,t,i),this[t](),n=ae.get(this,t),ae.set(this,t,!1),i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else i&&(ae.set(this,t,S.event.trigger(i[0],i.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Me)}})):void 0===ae.get(e,t)&&S.event.add(e,t,Me)}S.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,p,f,m,g=ae.get(e);if(re(e))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&S.find.matchesSelector(fe,r),n.guid||(n.guid=S.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(q)||[""]).length;c--;)p=m=(s=Oe.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p&&(d=S.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=S.event.special[p]||{},u=S.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:f.join(".")},o),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),S.event.global[p]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,p,f,m,g=ae.hasData(e)&&ae.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(q)||[""]).length;c--;)if(p=m=(s=Oe.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(d=S.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||S.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)S.event.remove(e,p+t[c],n,i,!0);S.isEmptyObject(l)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=new Array(arguments.length),l=S.event.fix(e),c=(ae.get(this,"events")||Object.create(null))[l.type]||[],u=S.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=S.event.handlers.call(this,l,c),t=0;(r=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(i=((S.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?S(r,this).index(c)>-1:S.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Te.test(t.type)&&t.click&&A(t,"input")&&Ne(t,"click",!0),!1},trigger:function(e){var t=this||e;return Te.test(t.type)&&t.click&&A(t,"input")&&Ne(t,"click"),!0},_default:function(e){var t=e.target;return Te.test(t.type)&&t.click&&A(t,"input")&&ae.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Me:Le,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Le,isPropagationStopped:Le,isImmediatePropagationStopped:Le,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){if(v.documentMode){var n=ae.get(this,"handle"),i=S.event.fix(e);i.type="focusin"===e.type?"focus":"blur",i.isSimulated=!0,n(e),i.target===i.currentTarget&&n(i)}else S.event.simulate(t,e.target,S.event.fix(e))}S.event.special[e]={setup:function(){var i;if(Ne(this,e,!0),!v.documentMode)return!1;(i=ae.get(this,t))||this.addEventListener(t,n),ae.set(this,t,(i||0)+1)},trigger:function(){return Ne(this,e),!0},teardown:function(){var e;if(!v.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,n),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},S.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=v.documentMode?this:i,o=ae.get(r,t);o||(v.documentMode?this.addEventListener(t,n):i.addEventListener(e,n,!0)),ae.set(r,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=v.documentMode?this:i,o=ae.get(r,t)-1;o?ae.set(r,t,o):(v.documentMode?this.removeEventListener(t,n):i.removeEventListener(e,n,!0),ae.remove(r,t))}}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||S.contains(this,i))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),S.fn.extend({on:function(e,t,n,i){return Re(this,e,t,n,i)},one:function(e,t,n,i){return Re(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,S(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Le),this.each(function(){S.event.remove(this,e,n,t)})}});var Fe=/<script|<style|<link/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Be(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function $e(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ge(e,t){var n,i,r,o,a,s;if(1===t.nodeType){if(ae.hasData(e)&&(s=ae.get(e).events))for(r in ae.remove(t,"handle events"),s)for(n=0,i=s[r].length;n<i;n++)S.event.add(t,r,s[r][n]);se.hasData(e)&&(o=se.access(e),a=S.extend({},o),se.set(t,a))}}function je(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Te.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function ze(e,t,n,i){t=a(t);var r,o,s,l,c,u,d=0,h=e.length,p=h-1,g=t[0],v=m(g);if(v||h>1&&"string"==typeof g&&!f.checkClone&&Ue.test(g))return e.each(function(r){var o=e.eq(r);v&&(t[0]=g.call(this,r,o.html())),ze(o,t,n,i)});if(h&&(o=(r=De(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(l=(s=S.map(ke(r,"script"),$e)).length;d<h;d++)c=r,d!==p&&(c=S.clone(c,!0,!0),l&&S.merge(s,ke(c,"script"))),n.call(e[d],c,d);if(l)for(u=s[s.length-1].ownerDocument,S.map(s,He),d=0;d<l;d++)c=s[d],Ce.test(c.type||"")&&!ae.access(c,"globalEval")&&S.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?S._evalUrl&&!c.noModule&&S._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):y(c.textContent.replace(Ve,""),c,u))}return e}function qe(e,t,n){for(var i,r=t?S.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||S.cleanData(ke(i)),i.parentNode&&(n&&me(i)&&Ie(ke(i,"script")),i.parentNode.removeChild(i));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),l=me(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ke(s),i=0,r=(o=ke(e)).length;i<r;i++)je(o[i],a[i]);if(t)if(n)for(o=o||ke(e),a=a||ke(s),i=0,r=o.length;i<r;i++)Ge(o[i],a[i]);else Ge(e,s);return(a=ke(s,"script")).length>0&&Ie(a,!l&&ke(e,"script")),s},cleanData:function(e){for(var t,n,i,r=S.event.special,o=0;void 0!==(n=e[o]);o++)if(re(n)){if(t=n[ae.expando]){if(t.events)for(i in t.events)r[i]?S.event.remove(n,i):S.removeEvent(n,i,t.handle);n[ae.expando]=void 0}n[se.expando]&&(n[se.expando]=void 0)}}}),S.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return Q(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return ze(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Be(this,e).appendChild(e)})},prepend:function(){return ze(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return ze(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ze(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ke(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return Q(this,function(e){var t=this[0]||{},i=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Fe.test(e)&&!Ee[(Ae.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<r;i++)1===(t=this[i]||{}).nodeType&&(S.cleanData(ke(t,!1)),t.innerHTML=e);t=0}catch(n){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return ze(this,arguments,function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(ke(this)),n&&n.replaceChild(t,this))},e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){S.fn[e]=function(e){for(var n,i=[],r=S(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),S(r[a])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var Ye=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),We=/^--/,Ke=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Xe=function(e,t,n){var i,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=o[r];return i},Ze=new RegExp(pe.join("|"),"i");function Je(e,t,n){var i,r,o,a,s=We.test(t),l=e.style;return(n=n||Ke(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(P,"$1")||void 0),""!==a||me(e)||(a=S.style(e,t)),!f.pixelBoxStyles()&&Ye.test(a)&&Ze.test(t)&&(i=l.width,r=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=i,l.minWidth=r,l.maxWidth=o)),void 0!==a?a+"":a}function Qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",fe.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);i="1%"!==t.top,l=12===n(t.marginLeft),u.style.right="60%",a=36===n(t.right),r=36===n(t.width),u.style.position="absolute",o=12===n(u.offsetWidth/3),fe.removeChild(c),u=null}}function n(e){return Math.round(parseFloat(e))}var i,r,o,a,s,l,c=v.createElement("div"),u=v.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===u.style.backgroundClip,S.extend(f,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,n,i,r;return null==s&&(t=v.createElement("table"),n=v.createElement("tr"),i=v.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="box-sizing:content-box;border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",fe.appendChild(t).appendChild(n).appendChild(i),r=e.getComputedStyle(n),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===n.offsetHeight,fe.removeChild(t)),s}}))}();var et=["Webkit","Moz","ms"],tt=v.createElement("div").style,nt={};function it(e){var t=S.cssProps[e]||nt[e];return t||(e in tt?e:nt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=et.length;n--;)if((e=et[n]+t)in tt)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,ot={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function st(e,t,n){var i=he.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function lt(e,t,n,i,r,o){var a="width"===t?1:0,s=0,l=0,c=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=S.css(e,n+pe[a],!0,r)),i?("content"===n&&(l-=S.css(e,"padding"+pe[a],!0,r)),"margin"!==n&&(l-=S.css(e,"border"+pe[a]+"Width",!0,r))):(l+=S.css(e,"padding"+pe[a],!0,r),"padding"!==n?l+=S.css(e,"border"+pe[a]+"Width",!0,r):s+=S.css(e,"border"+pe[a]+"Width",!0,r));return!i&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l+c}function ct(e,t,n){var i=Ke(e),r=(!f.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,i),o=r,a=Je(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ye.test(a)){if(!n)return a;a="auto"}return(!f.boxSizingReliable()&&r||!f.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===S.css(e,"boxSizing",!1,i),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+lt(e,t,n||(r?"border":"content"),o,i,a)+"px"}function ut(e,t,n,i,r){return new ut.prototype.init(e,t,n,i,r)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Je(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=ie(t),l=We.test(t),c=e.style;if(l||(t=it(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];"string"===(o=typeof n)&&(r=he.exec(n))&&r[1]&&(n=be(e,t,r),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=r&&r[3]||(S.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,o,a,s=ie(t);return We.test(t)||(t=it(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=Je(e,t,i)),"normal"===r&&t in at&&(r=at[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),S.each(["height","width"],function(e,t){S.cssHooks[t]={get:function(e,n,i){if(n)return!rt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ct(e,t,i):Xe(e,ot,function(){return ct(e,t,i)})},set:function(e,n,i){var r,o=Ke(e),a=!f.scrollboxSize()&&"absolute"===o.position,s=(a||i)&&"border-box"===S.css(e,"boxSizing",!1,o),l=i?lt(e,t,i,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-lt(e,t,"border",!1,o)-.5)),l&&(r=he.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),st(0,n,l)}}}),S.cssHooks.marginLeft=Qe(f.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Je(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(e,t){S.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+pe[i]+t]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(S.cssHooks[e+t].set=st)}),S.fn.extend({css:function(e,t){return Q(this,function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=Ke(e),r=t.length;a<r;a++)o[t[a]]=S.css(e,t[a],!1,i);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,arguments.length>1)}}),S.Tween=ut,ut.prototype={constructor:ut,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=ut.propHooks[this.prop];return e&&e.get?e.get(this):ut.propHooks._default.get(this)},run:function(e){var t,n=ut.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ut.propHooks._default.set(this),this}},ut.prototype.init.prototype=ut.prototype,ut.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[it(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},ut.propHooks.scrollTop=ut.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=ut.prototype.init,S.fx.step={};var dt,ht,pt=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function mt(){ht&&(!1===v.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(mt):e.setTimeout(mt,S.fx.interval),S.fx.tick())}function gt(){return e.setTimeout(function(){dt=void 0}),dt=Date.now()}function vt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=pe[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function bt(e,t,n){for(var i,r=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function yt(e,t,n){var i,r,o=0,a=yt.prefilters.length,s=S.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=dt||gt(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(i);return s.notifyWith(e,[c,i,n]),i<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||gt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=S.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=ie(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=S.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);o<a;o++)if(i=yt.prefilters[o].call(c,e,u,c.opts))return m(i.stop)&&(S._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return S.map(u,bt,c),m(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}S.Animation=S.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return be(n.elem,e,he.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(q);for(var n,i=0,r=e.length;i<r;i++)n=e[i],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,l,c,u,d="width"in t||"height"in t,h=this,p={},f=e.style,m=e.nodeType&&ve(e),g=ae.get(e,"fxshow");for(i in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[i],pt.test(r)){if(delete t[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||S.style(e,i)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(p))for(i in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=ae.get(e,"display")),"none"===(u=S.css(e,"display"))&&(c?u=c:(_e([e],!0),c=e.style.display||c,u=S.css(e,"display"),_e([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===S.css(e,"float")&&(l||(h.done(function(){f.display=c}),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=ae.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&_e([e],!0),h.done(function(){for(i in m||_e([e]),ae.remove(e,"fxshow"),p)S.style(e,i,p[i])})),l=bt(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),S.speed=function(e,t,n){var i=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ve).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=S.isEmptyObject(e),o=S.speed(t,n,i),a=function(){var t=yt(this,S.extend({},e),o);(r||ae.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=S.timers,a=ae.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&ft.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||S.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ae.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=S.timers,a=i?i.length:0;for(n.finish=!0,S.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),S.each(["toggle","show","hide"],function(e,t){var n=S.fn[t];S.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(vt(t,!0),e,i,r)}}),S.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){S.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(dt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),dt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ht||(ht=!0,mt())},S.fx.stop=function(){ht=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,n){return t=S.fx&&S.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=v.createElement("input"),t=v.createElement("select").appendChild(v.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=t.selected,(e=v.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var wt,_t=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return Q(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(r=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?wt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=S.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(q);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),wt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var n=_t[t]||S.find.attr;_t[t]=function(e,t,i){var r,o,a=t.toLowerCase();return i||(o=_t[a],_t[a]=r,r=null!=n(e,t,i)?a:null,_t[a]=o),r}});var xt=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;function Tt(e){return(e.match(q)||[]).join(" ")}function At(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(q)||[]}S.fn.extend({prop:function(e,t){return Q(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,r=S.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(e){var t,n,i,r,o,a;return m(e)?this.each(function(t){S(this).addClass(e.call(this,t,At(this)))}):(t=Ct(e)).length?this.each(function(){if(i=At(this),n=1===this.nodeType&&" "+Tt(i)+" "){for(o=0;o<t.length;o++)r=t[o],n.indexOf(" "+r+" ")<0&&(n+=r+" ");a=Tt(n),i!==a&&this.setAttribute("class",a)}}):this},removeClass:function(e){var t,n,i,r,o,a;return m(e)?this.each(function(t){S(this).removeClass(e.call(this,t,At(this)))}):arguments.length?(t=Ct(e)).length?this.each(function(){if(i=At(this),n=1===this.nodeType&&" "+Tt(i)+" "){for(o=0;o<t.length;o++)for(r=t[o];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");a=Tt(n),i!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(e,t){var n,i,r,o,a=typeof e,s="string"===a||Array.isArray(e);return m(e)?this.each(function(n){S(this).toggleClass(e.call(this,n,At(this),t),t)}):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=Ct(e),this.each(function(){if(s)for(o=S(this),r=0;r<n.length;r++)i=n[r],o.hasClass(i)?o.removeClass(i):o.addClass(i);else void 0!==e&&"boolean"!==a||((i=At(this))&&ae.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":ae.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+Tt(At(n))+" ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g;S.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=m(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,S(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=S.map(r,function(e){return null==e?"":e+""})),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=S.valHooks[r.type]||S.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Et,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:Tt(S.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=S.makeArray(t),a=r.length;a--;)((i=r[a]).selected=S.inArray(S.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},f.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var kt=e.location,It={guid:Date.now()},Pt=/\?/;S.parseXML=function(t){var i,r;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(n){}return r=i&&i.getElementsByTagName("parsererror")[0],i&&!r||S.error("Invalid XML: "+(r?S.map(r.childNodes,function(e){return e.textContent}).join("\n"):t)),i};var Dt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(t,n,i,r){var o,a,s,l,c,u,h,p,f=[i||v],b=d.call(t,"type")?t.type:t,y=d.call(t,"namespace")?t.namespace.split("."):[];if(a=p=s=i=i||v,3!==i.nodeType&&8!==i.nodeType&&!Dt.test(b+S.event.triggered)&&(b.indexOf(".")>-1&&(y=b.split("."),b=y.shift(),y.sort()),c=b.indexOf(":")<0&&"on"+b,(t=t[S.expando]?t:new S.Event(b,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:S.makeArray(n,[t]),h=S.event.special[b]||{},r||!h.trigger||!1!==h.trigger.apply(i,n))){if(!r&&!h.noBubble&&!g(i)){for(l=h.delegateType||b,Dt.test(l+b)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(i.ownerDocument||v)&&f.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=f[o++])&&!t.isPropagationStopped();)p=a,t.type=o>1?l:h.bindType||b,(u=(ae.get(a,"events")||Object.create(null))[t.type]&&ae.get(a,"handle"))&&u.apply(a,n),(u=c&&a[c])&&u.apply&&re(a)&&(t.result=u.apply(a,n),!1===t.result&&t.preventDefault());return t.type=b,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),n)||!re(i)||c&&m(i[b])&&!g(i)&&((s=i[c])&&(i[c]=null),S.event.triggered=b,t.isPropagationStopped()&&p.addEventListener(b,Ot),i[b](),t.isPropagationStopped()&&p.removeEventListener(b,Ot),S.event.triggered=void 0,s&&(i[c]=s)),t.result}},simulate:function(e,t,n){var i=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(i,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}});var Mt=/\[\]$/,Lt=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Ft(e,t,n,i){var r;if(Array.isArray(t))S.each(t,function(t,r){n||Mt.test(e)?i(e,r):Ft(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==w(t))i(e,t);else for(r in t)Ft(e+"["+r+"]",t[r],n,i)}S.param=function(e,t){var n,i=[],r=function(e,t){var n=m(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){r(this.name,this.value)});else for(n in e)Ft(n,e[n],t,r);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!Te.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Ut=/%20/g,Vt=/#.*$/,Bt=/([?&])_=[^&]*/,$t=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,Gt=/^\/\//,jt={},zt={},qt="*/".concat("*"),Yt=v.createElement("a");function Wt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(q)||[];if(m(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Kt(e,t,n,i){var r={},o=e===zt;function a(s){var l;return r[s]=!0,S.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function Xt(e,t){var n,i,r=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&S.extend(!0,e,i),e}Yt.href=kt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Xt(Xt(e,S.ajaxSettings),t):Xt(S.ajaxSettings,e)},ajaxPrefilter:Wt(jt),ajaxTransport:Wt(zt),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var r,o,a,s,l,c,u,d,h,p,f=S.ajaxSetup({},i),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?S(m):S.event,b=S.Deferred(),y=S.Callbacks("once memory"),w=f.statusCode||{},_={},x={},T="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=$t.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)A.always(e[A.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||T;return r&&r.abort(t),C(0,t),this}};if(b.promise(A),f.url=((t||f.url||kt.href)+"").replace(Gt,kt.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(q)||[""],null==f.crossDomain){c=v.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Yt.protocol+"//"+Yt.host!=c.protocol+"//"+c.host}catch(n){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=S.param(f.data,f.traditional)),Kt(jt,f,i,A),u)return A;for(h in(d=S.event&&f.global)&&0===S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ht.test(f.type),o=f.url.replace(Vt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ut,"+")):(p=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(Pt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Bt,"$1"),p=(Pt.test(o)?"&":"?")+"_="+It.guid+++p),f.url=o+p),f.ifModified&&(S.lastModified[o]&&A.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&A.setRequestHeader("If-None-Match",S.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&A.setRequestHeader("Content-Type",f.contentType),A.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+qt+"; q=0.01":""):f.accepts["*"]),f.headers)A.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(m,A,f)||u))return A.abort();if(T="abort",y.add(f.complete),A.done(f.success),A.fail(f.error),r=Kt(zt,f,i,A)){if(A.readyState=1,d&&g.trigger("ajaxSend",[A,f]),u)return A;f.async&&f.timeout>0&&(l=e.setTimeout(function(){A.abort("timeout")},f.timeout));try{u=!1,r.send(_,C)}catch(n){if(u)throw n;C(-1,n)}}else C(-1,"No Transport");function C(t,i,s,c){var h,p,v,_,x,T=i;u||(u=!0,l&&e.clearTimeout(l),r=void 0,a=c||"",A.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(_=function(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,A,s)),!h&&S.inArray("script",f.dataTypes)>-1&&S.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),_=function(e,t,i,r){var o,a,s,l,c,u={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=d.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=a,a=d.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(!(s=u[c+" "+a]||u["* "+a]))for(o in u)if((l=o.split(" "))[1]===a&&(s=u[c+" "+l[0]]||u["* "+l[0]])){!0===s?s=u[o]:!0!==u[o]&&(a=l[0],d.unshift(l[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(n){return{state:"parsererror",error:s?n:"No conversion from "+c+" to "+a}}}return{state:"success",data:t}}(f,_,A,h),h?(f.ifModified&&((x=A.getResponseHeader("Last-Modified"))&&(S.lastModified[o]=x),(x=A.getResponseHeader("etag"))&&(S.etag[o]=x)),204===t||"HEAD"===f.type?T="nocontent":304===t?T="notmodified":(T=_.state,p=_.data,h=!(v=_.error))):(v=T,!t&&T||(T="error",t<0&&(t=0))),A.status=t,A.statusText=(i||T)+"",h?b.resolveWith(m,[p,T,A]):b.rejectWith(m,[A,T,v]),A.statusCode(w),w=void 0,d&&g.trigger(h?"ajaxSuccess":"ajaxError",[A,f,h?p:v]),y.fireWith(m,[A,T]),d&&(g.trigger("ajaxComplete",[A,f]),--S.active||S.event.trigger("ajaxStop")))}return A},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,t){S[t]=function(e,n,i,r){return m(n)&&(r=r||i,i=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:r,data:n,success:i},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return m(e)?this.each(function(t){S(this).wrapInner(e.call(this,t))}):this.each(function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=m(e);return this.each(function(n){S(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(n){}};var Zt={0:200,1223:204},Jt=S.ajaxSettings.xhr();f.cors=!!Jt&&"withCredentials"in Jt,f.ajax=Jt=!!Jt,S.ajaxTransport(function(t){var i,r;if(f.cors||Jt&&!t.crossDomain)return{send:function(o,a){var s,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)l[s]=t.xhrFields[s];for(s in t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)l.setRequestHeader(s,o[s]);i=function(e){return function(){i&&(i=r=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?a(0,"error"):a(l.status,l.statusText):a(Zt[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=i(),r=l.onerror=l.ontimeout=i("error"),void 0!==l.onabort?l.onabort=r:l.onreadystatechange=function(){4===l.readyState&&e.setTimeout(function(){i&&r()})},i=i("abort");try{l.send(t.hasContent&&t.data||null)}catch(n){if(i)throw n}},abort:function(){i&&i()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),v.head.appendChild(t[0])},abort:function(){n&&n()}}});var Qt,en=[],tn=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||S.expando+"_"+It.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=!1!==t.jsonp&&(tn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(tn,"$1"+r):!1!==t.jsonp&&(t.url+=(Pt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||S.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){void 0===o?S(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,en.push(r)),a&&m(o)&&o(a[0]),a=o=void 0}),"script"}),f.createHTMLDocument=((Qt=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qt.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(f.createHTMLDocument?((i=(t=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,t.head.appendChild(i)):t=v),o=!n&&[],(r=U.exec(e))?[t.createElement(r[1])]:(r=De([e],t,o),o&&o.length&&S(o).remove(),S.merge([],r.childNodes)));var i,r,o},S.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=Tt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&S.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?S("<div>").append(S.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,function(t){return e===t.elem}).length},S.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,c=S.css(e,"position"),u=S(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=S.css(e,"top"),l=S.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){S.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===S.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),r.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-S.css(i,"marginTop",!0),left:t.left-r.left-S.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||fe})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;S.fn[e]=function(i){return Q(this,function(e,i,r){var o;if(g(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r},e,i,arguments.length)}}),S.each(["top","left"],function(e,t){S.cssHooks[t]=Qe(f.pixelPosition,function(e,n){if(n)return n=Je(e,t),Ye.test(n)?S(e).position()[t]+"px":n})}),S.each({Height:"height",Width:"width"},function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){S.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return Q(this,function(t,n,r){var o;return g(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?S.css(t,n,s):S.style(t,n,r,s)},t,a?r:void 0,a)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var nn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return i=o.call(arguments,2),r=function(){return e.apply(t||this,i.concat(o.call(arguments)))},r.guid=e.guid=e.guid||S.guid++,r},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=g,S.camelCase=ie,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(nn,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var rn=e.jQuery,on=e.$;return S.noConflict=function(t){return e.$===S&&(e.$=on),t&&e.jQuery===S&&(e.jQuery=rn),S},void 0===t&&(e.jQuery=e.$=S),S}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";var e,t;function i(){return e.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(a(e,t))return!1;return!0}function l(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=[],r=e.length;for(n=0;n<r;++n)i.push(t(e[n],n));return i}function h(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,i){return Lt(e,t,n,i,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){var n=null,i=!1,r=e._d&&!isNaN(e._d.getTime());return r&&(n=f(e),i=t.call(n.parsedDateParts,function(e){return null!=e}),r=n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&i),e._strict&&(r=r&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?r:(e._isValid=r,e._isValid)}function g(e){var t=p(NaN);return null!=e?h(f(t),e):f(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var v=i.momentProperties=[],b=!1;function y(e,t){var n,i,r,o=v.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=f(t)),l(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)l(r=t[i=v[n]])||(e[i]=r);return e}function w(e){y(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,i.updateOffset(this),b=!1)}function _(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function x(e){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var n=!0;return h(function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var r,o,s,l=[],c=arguments.length;for(o=0;o<c;o++){if(r="","object"==typeof arguments[o]){for(s in r+="\n["+o+"] ",arguments[0])a(arguments[0],s)&&(r+=s+": "+arguments[0][s]+", ");r=r.slice(0,-2)}else r=arguments[o];l.push(r)}x(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}var T,A={};function C(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),A[e]||(x(t),A[e]=!0)}function E(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function k(e,t){var n,i=h({},e);for(n in t)a(t,n)&&(o(e[n])&&o(t[n])?(i[n]={},h(i[n],e[n]),h(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)a(e,n)&&!a(t,n)&&o(e[n])&&(i[n]=h({},i[n]));return i}function I(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)a(e,t)&&n.push(t);return n};function P(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var D=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,O=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,M={},L={};function R(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(L[e]=r),t&&(L[t[0]]=function(){return P(r.apply(this,arguments),t[1],t[2])}),n&&(L[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function F(e,t){return e.isValid()?(t=U(t,e.localeData()),M[t]=M[t]||function(e){var t,n,i=e.match(D);for(t=0,n=i.length;t<n;t++)L[i[t]]?i[t]=L[i[t]]:i[t]=N(i[t]);return function(t){var r,o="";for(r=0;r<n;r++)o+=E(i[r])?i[r].call(t,e):i[r];return o}}(t),M[t](e)):e.localeData().invalidDate()}function U(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(O.lastIndex=0;n>=0&&O.test(e);)e=e.replace(O,i),O.lastIndex=0,n-=1;return e}var V={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function B(e){return"string"==typeof e?V[e]||V[e.toLowerCase()]:void 0}function $(e){var t,n,i={};for(n in e)a(e,n)&&(t=B(n))&&(i[t]=e[n]);return i}var H={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};var G,j=/\d/,z=/\d\d/,q=/\d{3}/,Y=/\d{4}/,W=/[+-]?\d{6}/,K=/\d\d?/,X=/\d\d\d\d?/,Z=/\d\d\d\d\d\d?/,J=/\d{1,3}/,Q=/\d{1,4}/,ee=/[+-]?\d{1,6}/,te=/\d+/,ne=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,re=/Z|[+-]\d\d(?::?\d\d)?/gi,oe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ae=/^[1-9]\d?/,se=/^([1-9]\d|\d)/;function le(e,t,n){G[e]=E(t)?t:function(e,i){return e&&n?n:t}}function ce(e,t){return a(G,e)?G[e](t._strict,t._locale):new RegExp(ue(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})))}function ue(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function de(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function he(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=de(t)),n}G={};var pe={};function fe(e,t){var n,i,r=t;for("string"==typeof e&&(e=[e]),c(t)&&(r=function(e,n){n[t]=he(e)}),i=e.length,n=0;n<i;n++)pe[e[n]]=r}function me(e,t){fe(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function ge(e,t,n){null!=t&&a(pe,e)&&pe[e](t,n._a,n,e)}function ve(e){return e%4==0&&e%100!=0||e%400==0}var be=0,ye=1,we=2,_e=3,xe=4,Se=5,Te=6,Ae=7,Ce=8;function Ee(e){return ve(e)?366:365}R("Y",0,0,function(){var e=this.year();return e<=9999?P(e,4):"+"+e}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),le("Y",ne),le("YY",K,z),le("YYYY",Q,Y),le("YYYYY",ee,W),le("YYYYYY",ee,W),fe(["YYYYY","YYYYYY"],be),fe("YYYY",function(e,t){t[be]=2===e.length?i.parseTwoDigitYear(e):he(e)}),fe("YY",function(e,t){t[be]=i.parseTwoDigitYear(e)}),fe("Y",function(e,t){t[be]=parseInt(e,10)}),i.parseTwoDigitYear=function(e){return he(e)+(he(e)>68?1900:2e3)};var ke,Ie=Pe("FullYear",!0);function Pe(e,t){return function(n){return null!=n?(Oe(this,e,n),i.updateOffset(this,t),this):De(this,e)}}function De(e,t){if(!e.isValid())return NaN;var n=e._d,i=e._isUTC;switch(t){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Oe(e,t,n){var i,r,o,a,s;if(e.isValid()&&!isNaN(n)){switch(i=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(r?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(r?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(r?i.setUTCHours(n):i.setHours(n));case"Date":return void(r?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}o=n,a=e.month(),s=29!==(s=e.date())||1!==a||ve(o)?s:28,r?i.setUTCFullYear(o,a,s):i.setFullYear(o,a,s)}}function Me(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1===i?ve(e)?29:28:31-i%7%2}ke=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),R("MMMM",0,0,function(e){return this.localeData().months(this,e)}),le("M",K,ae),le("MM",K,z),le("MMM",function(e,t){return t.monthsShortRegex(e)}),le("MMMM",function(e,t){return t.monthsRegex(e)}),fe(["M","MM"],function(e,t){t[ye]=he(e)-1}),fe(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[ye]=r:f(n).invalidMonth=e});var Le="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Re="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ne=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Fe=oe,Ue=oe;function Ve(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=ke.call(this._shortMonthsParse,a))?r:null:-1!==(r=ke.call(this._longMonthsParse,a))?r:null:"MMM"===t?-1!==(r=ke.call(this._shortMonthsParse,a))||-1!==(r=ke.call(this._longMonthsParse,a))?r:null:-1!==(r=ke.call(this._longMonthsParse,a))||-1!==(r=ke.call(this._shortMonthsParse,a))?r:null}function Be(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=he(t);else if(!c(t=e.localeData().monthsParse(t)))return e;var n=t,i=e.date();return i=i<29?i:Math.min(i,Me(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,i):e._d.setMonth(n,i),e}function $e(e){return null!=e?(Be(this,e),i.updateOffset(this,!0),this):De(this,"Month")}function He(){function e(e,t){return t.length-e.length}var t,n,i,r,o=[],a=[],s=[];for(t=0;t<12;t++)n=p([2e3,t]),i=ue(this.monthsShort(n,"")),r=ue(this.months(n,"")),o.push(i),a.push(r),s.push(r),s.push(i);o.sort(e),a.sort(e),s.sort(e),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Ge(e,t,n,i,r,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,r,o,a),s}function je(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function ze(e,t,n){var i=7+t-n;return-((7+je(e,0,i).getUTCDay()-t)%7)+i-1}function qe(e,t,n,i,r){var o,a,s=1+7*(t-1)+(7+n-i)%7+ze(e,i,r);return s<=0?a=Ee(o=e-1)+s:s>Ee(e)?(o=e+1,a=s-Ee(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Ye(e,t,n){var i,r,o=ze(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?i=a+We(r=e.year()-1,t,n):a>We(e.year(),t,n)?(i=a-We(e.year(),t,n),r=e.year()+1):(r=e.year(),i=a),{week:i,year:r}}function We(e,t,n){var i=ze(e,t,n),r=ze(e+1,t,n);return(Ee(e)-i+r)/7}R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),le("w",K,ae),le("ww",K,z),le("W",K,ae),le("WW",K,z),me(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=he(e)});function Ke(e,t){return e.slice(t,7).concat(e.slice(0,t))}R("d",0,"do","day"),R("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),R("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),R("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),le("d",K),le("e",K),le("E",K),le("dd",function(e,t){return t.weekdaysMinRegex(e)}),le("ddd",function(e,t){return t.weekdaysShortRegex(e)}),le("dddd",function(e,t){return t.weekdaysRegex(e)}),me(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:f(n).invalidWeekday=e}),me(["d","e","E"],function(e,t,n,i){t[i]=he(e)});var Xe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Je="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Qe=oe,et=oe,tt=oe;function nt(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=ke.call(this._weekdaysParse,a))?r:null:"ddd"===t?-1!==(r=ke.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=ke.call(this._minWeekdaysParse,a))?r:null:"dddd"===t?-1!==(r=ke.call(this._weekdaysParse,a))||-1!==(r=ke.call(this._shortWeekdaysParse,a))||-1!==(r=ke.call(this._minWeekdaysParse,a))?r:null:"ddd"===t?-1!==(r=ke.call(this._shortWeekdaysParse,a))||-1!==(r=ke.call(this._weekdaysParse,a))||-1!==(r=ke.call(this._minWeekdaysParse,a))?r:null:-1!==(r=ke.call(this._minWeekdaysParse,a))||-1!==(r=ke.call(this._weekdaysParse,a))||-1!==(r=ke.call(this._shortWeekdaysParse,a))?r:null}function it(){function e(e,t){return t.length-e.length}var t,n,i,r,o,a=[],s=[],l=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),i=ue(this.weekdaysMin(n,"")),r=ue(this.weekdaysShort(n,"")),o=ue(this.weekdays(n,"")),a.push(i),s.push(r),l.push(o),c.push(i),c.push(r),c.push(o);a.sort(e),s.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function rt(){return this.hours()%12||12}function ot(e,t){R(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function at(e,t){return t._meridiemParse}R("H",["HH",2],0,"hour"),R("h",["hh",2],0,rt),R("k",["kk",2],0,function(){return this.hours()||24}),R("hmm",0,0,function(){return""+rt.apply(this)+P(this.minutes(),2)}),R("hmmss",0,0,function(){return""+rt.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)}),R("Hmm",0,0,function(){return""+this.hours()+P(this.minutes(),2)}),R("Hmmss",0,0,function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)}),ot("a",!0),ot("A",!1),le("a",at),le("A",at),le("H",K,se),le("h",K,ae),le("k",K,ae),le("HH",K,z),le("hh",K,z),le("kk",K,z),le("hmm",X),le("hmmss",Z),le("Hmm",X),le("Hmmss",Z),fe(["H","HH"],_e),fe(["k","kk"],function(e,t,n){var i=he(e);t[_e]=24===i?0:i}),fe(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),fe(["h","hh"],function(e,t,n){t[_e]=he(e),f(n).bigHour=!0}),fe("hmm",function(e,t,n){var i=e.length-2;t[_e]=he(e.substr(0,i)),t[xe]=he(e.substr(i)),f(n).bigHour=!0}),fe("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[_e]=he(e.substr(0,i)),t[xe]=he(e.substr(i,2)),t[Se]=he(e.substr(r)),f(n).bigHour=!0}),fe("Hmm",function(e,t,n){var i=e.length-2;t[_e]=he(e.substr(0,i)),t[xe]=he(e.substr(i))}),fe("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[_e]=he(e.substr(0,i)),t[xe]=he(e.substr(i,2)),t[Se]=he(e.substr(r))});var st=Pe("Hours",!0);var lt,ct={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Le,monthsShort:Re,week:{dow:0,doy:6},weekdays:Xe,weekdaysMin:Je,weekdaysShort:Ze,meridiemParse:/[ap]\.?m?\.?/i},ut={},dt={};function ht(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function pt(e){return e?e.toLowerCase().replace("_","-"):e}function ft(e){var t=null;if(void 0===ut[e]&&"undefined"!=typeof module&&module&&module.exports&&function(e){return!(!e||!e.match("^[^/\\\\]*$"))}(e))try{t=lt._abbr,require("./locale/"+e),mt(t)}catch(n){ut[e]=null}return ut[e]}function mt(e,t){var n;return e&&((n=l(t)?vt(e):gt(e,t))?lt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),lt._abbr}function gt(e,t){if(null!==t){var n,i=ct;if(t.abbr=e,null!=ut[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ut[e]._config;else if(null!=t.parentLocale)if(null!=ut[t.parentLocale])i=ut[t.parentLocale]._config;else{if(null==(n=ft(t.parentLocale)))return dt[t.parentLocale]||(dt[t.parentLocale]=[]),dt[t.parentLocale].push({name:e,config:t}),null;i=n._config}return ut[e]=new I(k(i,t)),dt[e]&&dt[e].forEach(function(e){gt(e.name,e.config)}),mt(e),ut[e]}return delete ut[e],null}function vt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return lt;if(!r(e)){if(t=ft(e))return t;e=[e]}return function(e){for(var t,n,i,r,o=0;o<e.length;){for(t=(r=pt(e[o]).split("-")).length,n=(n=pt(e[o+1]))?n.split("-"):null;t>0;){if(i=ft(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&ht(r,n)>=t-1)break;t--}o++}return lt}(e)}function bt(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ye]<0||n[ye]>11?ye:n[we]<1||n[we]>Me(n[be],n[ye])?we:n[_e]<0||n[_e]>24||24===n[_e]&&(0!==n[xe]||0!==n[Se]||0!==n[Te])?_e:n[xe]<0||n[xe]>59?xe:n[Se]<0||n[Se]>59?Se:n[Te]<0||n[Te]>999?Te:-1,f(e)._overflowDayOfYear&&(t<be||t>we)&&(t=we),f(e)._overflowWeeks&&-1===t&&(t=Ae),f(e)._overflowWeekday&&-1===t&&(t=Ce),f(e).overflow=t),e}var yt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,xt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],St=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Tt=/^\/?Date\((-?\d+)/i,At=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ct={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Et(e){var t,n,i,r,o,a,s=e._i,l=yt.exec(s)||wt.exec(s),c=xt.length,u=St.length;if(l){for(f(e).iso=!0,t=0,n=c;t<n;t++)if(xt[t][1].exec(l[1])){r=xt[t][0],i=!1!==xt[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=u;t<n;t++)if(St[t][1].exec(l[3])){o=(l[2]||" ")+St[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(l[4]){if(!_t.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=r+(o||"")+(a||""),Ot(e)}else e._isValid=!1}function kt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function It(e){var t,n,i,r,o,a,s,l,c=At.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],i=c[3],r=c[2],o=c[5],a=c[6],s=c[7],l=[kt(n),Re.indexOf(i),parseInt(r,10),parseInt(o,10),parseInt(a,10)],s&&l.push(parseInt(s,10)),t=l,!function(e,t,n){return!e||Ze.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return Ct[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(c[8],c[9],c[10]),e._d=je.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function Pt(e,t,n){return null!=e?e:null!=t?t:n}function Dt(e){var t,n,r,o,a,s=[];if(!e._d){for(r=function(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[we]&&null==e._a[ye]&&function(e){var t,n,i,r,o,a,s,l,c;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,a=4,n=Pt(t.GG,e._a[be],Ye(Rt(),1,4).year),i=Pt(t.W,1),((r=Pt(t.E,1))<1||r>7)&&(l=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,c=Ye(Rt(),o,a),n=Pt(t.gg,e._a[be],c.year),i=Pt(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(l=!0)):r=o);i<1||i>We(n,o,a)?f(e)._overflowWeeks=!0:null!=l?f(e)._overflowWeekday=!0:(s=qe(n,i,r,o,a),e._a[be]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=Pt(e._a[be],r[be]),(e._dayOfYear>Ee(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),n=je(a,0,e._dayOfYear),e._a[ye]=n.getUTCMonth(),e._a[we]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[_e]&&0===e._a[xe]&&0===e._a[Se]&&0===e._a[Te]&&(e._nextDay=!0,e._a[_e]=0),e._d=(e._useUTC?je:Ge).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_e]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(f(e).weekdayMismatch=!0)}}function Ot(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],f(e).empty=!0;var t,n,r,o,a,s,l,c=""+e._i,u=c.length,d=0;for(l=(r=U(e._f,e._locale).match(D)||[]).length,t=0;t<l;t++)o=r[t],(n=(c.match(ce(o,e))||[])[0])&&((a=c.substr(0,c.indexOf(n))).length>0&&f(e).unusedInput.push(a),c=c.slice(c.indexOf(n)+n.length),d+=n.length),L[o]?(n?f(e).empty=!1:f(e).unusedTokens.push(o),ge(o,n,e)):e._strict&&!n&&f(e).unusedTokens.push(o);f(e).charsLeftOver=u-d,c.length>0&&f(e).unusedInput.push(c),e._a[_e]<=12&&!0===f(e).bigHour&&e._a[_e]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[_e]=function(e,t,n){var i;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[_e],e._meridiem),null!==(s=f(e).era)&&(e._a[be]=e._locale.erasConvertYear(s,e._a[be])),Dt(e),bt(e)}else It(e);else Et(e)}function Mt(e){var t=e._i,n=e._f;return e._locale=e._locale||vt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),_(t)?new w(bt(t)):(u(t)?e._d=t:r(n)?function(e){var t,n,i,r,o,a,s=!1,l=e._f.length;if(0===l)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<l;r++)o=0,a=!1,t=y({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Ot(t),m(t)&&(a=!0),o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,s?o<i&&(i=o,n=t):(null==i||o<i||a)&&(i=o,n=t,a&&(s=!0));h(e,n||t)}(e):n?Ot(e):function(e){var t=e._i;l(t)?e._d=new Date(i.now()):u(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=Tt.exec(e._i);null===t?(Et(e),!1===e._isValid&&(delete e._isValid,It(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):r(t)?(e._a=d(t.slice(0),function(e){return parseInt(e,10)}),Dt(e)):o(t)?function(e){if(!e._d){var t=$(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Dt(e)}}(e):c(t)?e._d=new Date(t):i.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function Lt(e,t,n,i,a){var l,c={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(o(e)&&s(e)||r(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=n,c._i=e,c._f=t,c._strict=i,(l=new w(bt(Mt(c))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function Rt(e,t,n,i){return Lt(e,t,n,i,!1)}i.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),i.ISO_8601=function(){},i.RFC_2822=function(){};var Nt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Rt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()}),Ft=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Rt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()});function Ut(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Rt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Vt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Bt(e){var t=$(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,i=!1,r=Vt.length;for(t in e)if(a(e,t)&&(-1===ke.call(Vt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<r;++n)if(e[Vt[n]]){if(i)return!1;parseFloat(e[Vt[n]])!==he(e[Vt[n]])&&(i=!0)}return!0}(t),this._milliseconds=+d+1e3*u+6e4*c+1e3*l*60*60,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=vt(),this._bubble()}function $t(e){return e instanceof Bt}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Gt(e,t){R(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+P(~~(e/60),2)+t+P(~~e%60,2)})}Gt("Z",":"),Gt("ZZ",""),le("Z",re),le("ZZ",re),fe(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=zt(re,e)});var jt=/([\+\-]|\d\d)/gi;function zt(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(jt)||["-",0,0])[1]+he(n[2]))?0:"+"===n[0]?i:-i}function qt(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(_(e)||u(e)?e.valueOf():Rt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):Rt(e).local()}function Yt(e){return-Math.round(e._d.getTimezoneOffset())}function Wt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}i.updateOffset=function(){};var Kt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Xt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Zt(e,t){var n,i,r,o=e,s=null;return $t(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(s=Kt.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:he(s[we])*n,h:he(s[_e])*n,m:he(s[xe])*n,s:he(s[Se])*n,ms:he(Ht(1e3*s[Te]))*n}):(s=Xt.exec(e))?(n="-"===s[1]?-1:1,o={y:Jt(s[2],n),M:Jt(s[3],n),w:Jt(s[4],n),d:Jt(s[5],n),h:Jt(s[6],n),m:Jt(s[7],n),s:Jt(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=qt(t,e),e.isBefore(t)?n=Qt(e,t):((n=Qt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Rt(o.from),Rt(o.to)),(o={}).ms=r.milliseconds,o.M=r.months),i=new Bt(o),$t(e)&&a(e,"_locale")&&(i._locale=e._locale),$t(e)&&a(e,"_isValid")&&(i._isValid=e._isValid),i}function Jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function en(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),tn(this,Zt(n,i),e),this}}function tn(e,t,n,r){var o=t._milliseconds,a=Ht(t._days),s=Ht(t._months);e.isValid()&&(r=null==r||r,s&&Be(e,De(e,"Month")+s*n),a&&Oe(e,"Date",De(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),r&&i.updateOffset(e,a||s))}Zt.fn=Bt.prototype,Zt.invalid=function(){return Zt(NaN)};var nn=en(1,"add"),rn=en(-1,"subtract");function on(e){return"string"==typeof e||e instanceof String}function an(e){return _(e)||u(e)||on(e)||c(e)||function(e){var t=r(e),n=!1;t&&(n=0===e.filter(function(t){return!c(t)&&on(e)}).length);return t&&n}(e)||function(e){var t,n,i=o(e)&&!s(e),r=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=l.length;for(t=0;t<c;t+=1)n=l[t],r=r||a(e,n);return i&&r}(e)||null==e}function sn(e,t){if(e.date()<t.date())return-sn(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function ln(e){var t;return void 0===e?this._locale._abbr:(null!=(t=vt(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var cn=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function un(){return this._locale}var dn=1e3,hn=6e4,pn=36e5,fn=126227808e5;function mn(e,t){return(e%t+t)%t}function gn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-fn:new Date(e,t,n).valueOf()}function vn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-fn:Date.UTC(e,t,n)}function bn(e,t){return t.erasAbbrRegex(e)}function yn(){var e,t,n,i,r,o=[],a=[],s=[],l=[],c=this.eras();for(e=0,t=c.length;e<t;++e)n=ue(c[e].name),i=ue(c[e].abbr),r=ue(c[e].narrow),a.push(n),o.push(i),s.push(r),l.push(n),l.push(i),l.push(r);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}function wn(e,t){R(0,[e,e.length],0,t)}function _n(e,t,n,i,r){var o;return null==e?Ye(this,i,r).year:(t>(o=We(e,i,r))&&(t=o),xn.call(this,e,t,n,i,r))}function xn(e,t,n,i,r){var o=qe(e,t,n,i,r),a=je(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}R("N",0,0,"eraAbbr"),R("NN",0,0,"eraAbbr"),R("NNN",0,0,"eraAbbr"),R("NNNN",0,0,"eraName"),R("NNNNN",0,0,"eraNarrow"),R("y",["y",1],"yo","eraYear"),R("y",["yy",2],0,"eraYear"),R("y",["yyy",3],0,"eraYear"),R("y",["yyyy",4],0,"eraYear"),le("N",bn),le("NN",bn),le("NNN",bn),le("NNNN",function(e,t){return t.erasNameRegex(e)}),le("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),fe(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?f(n).era=r:f(n).invalidEra=e}),le("y",te),le("yy",te),le("yyy",te),le("yyyy",te),le("yo",function(e,t){return t._eraYearOrdinalRegex||te}),fe(["y","yy","yyy","yyyy"],be),fe(["yo"],function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[be]=n._locale.eraYearOrdinalParse(e,r):t[be]=parseInt(e,10)}),R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100}),wn("gggg","weekYear"),wn("ggggg","weekYear"),wn("GGGG","isoWeekYear"),wn("GGGGG","isoWeekYear"),le("G",ne),le("g",ne),le("GG",K,z),le("gg",K,z),le("GGGG",Q,Y),le("gggg",Q,Y),le("GGGGG",ee,W),le("ggggg",ee,W),me(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=he(e)}),me(["gg","GG"],function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)}),R("Q",0,"Qo","quarter"),le("Q",j),fe("Q",function(e,t){t[ye]=3*(he(e)-1)}),R("D",["DD",2],"Do","date"),le("D",K,ae),le("DD",K,z),le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),fe(["D","DD"],we),fe("Do",function(e,t){t[we]=he(e.match(K)[0])});var Sn=Pe("Date",!0);R("DDD",["DDDD",3],"DDDo","dayOfYear"),le("DDD",J),le("DDDD",q),fe(["DDD","DDDD"],function(e,t,n){n._dayOfYear=he(e)}),R("m",["mm",2],0,"minute"),le("m",K,se),le("mm",K,z),fe(["m","mm"],xe);var Tn=Pe("Minutes",!1);R("s",["ss",2],0,"second"),le("s",K,se),le("ss",K,z),fe(["s","ss"],Se);var An,Cn,En=Pe("Seconds",!1);for(R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,function(){return 10*this.millisecond()}),R(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),R(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),R(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),R(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),R(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),le("S",J,j),le("SS",J,z),le("SSS",J,q),An="SSSS";An.length<=9;An+="S")le(An,te);function kn(e,t){t[Te]=he(1e3*("0."+e))}for(An="S";An.length<=9;An+="S")fe(An,kn);Cn=Pe("Milliseconds",!1),R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var In=w.prototype;function Pn(e){return e}In.add=nn,In.calendar=function(e,t){1===arguments.length&&(arguments[0]?an(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,n=o(e)&&!s(e),i=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)i=i||a(e,r[t]);return n&&i}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Rt(),r=qt(n,this).startOf("day"),l=i.calendarFormat(this,r)||"sameElse",c=t&&(E(t[l])?t[l].call(this,n):t[l]);return this.format(c||this.localeData().calendar(l,this,Rt(n)))},In.clone=function(){return new w(this)},In.diff=function(e,t,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=qt(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=B(t)){case"year":o=sn(this,i)/12;break;case"month":o=sn(this,i);break;case"quarter":o=sn(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:de(o)},In.endOf=function(e){var t,n;if(void 0===(e=B(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vn:gn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=pn-mn(t+(this._isUTC?0:this.utcOffset()*hn),pn)-1;break;case"minute":t=this._d.valueOf(),t+=hn-mn(t,hn)-1;break;case"second":t=this._d.valueOf(),t+=dn-mn(t,dn)-1}return this._d.setTime(t),i.updateOffset(this,!0),this},In.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=F(this,e);return this.localeData().postformat(t)},In.from=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||Rt(e).isValid())?Zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},In.fromNow=function(e){return this.from(Rt(),e)},In.to=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||Rt(e).isValid())?Zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},In.toNow=function(e){return this.to(Rt(),e)},In.get=function(e){return E(this[e=B(e)])?this[e]():this},In.invalidAt=function(){return f(this).overflow},In.isAfter=function(e,t){var n=_(e)?e:Rt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},In.isBefore=function(e,t){var n=_(e)?e:Rt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},In.isBetween=function(e,t,n,i){var r=_(e)?e:Rt(e),o=_(t)?t:Rt(t);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n)))},In.isSame=function(e,t){var n,i=_(e)?e:Rt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},In.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},In.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},In.isValid=function(){return m(this)},In.lang=cn,In.locale=ln,In.localeData=un,In.max=Ft,In.min=Nt,In.parsingFlags=function(){return h({},f(this))},In.set=function(e,t){if("object"==typeof e){var n,i=function(e){var t,n=[];for(t in e)a(e,t)&&n.push({unit:t,priority:H[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=$(e)),r=i.length;for(n=0;n<r;n++)this[i[n].unit](e[i[n].unit])}else if(E(this[e=B(e)]))return this[e](t);return this},In.startOf=function(e){var t,n;if(void 0===(e=B(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vn:gn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mn(t+(this._isUTC?0:this.utcOffset()*hn),pn);break;case"minute":t=this._d.valueOf(),t-=mn(t,hn);break;case"second":t=this._d.valueOf(),t-=mn(t,dn)}return this._d.setTime(t),i.updateOffset(this,!0),this},In.subtract=rn,In.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},In.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},In.toDate=function(){return new Date(this.valueOf())},In.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?F(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",F(n,"Z")):F(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},In.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(In[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),In.toJSON=function(){return this.isValid()?this.toISOString():null},In.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},In.unix=function(){return Math.floor(this.valueOf()/1e3)},In.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},In.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},In.eraName=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""},In.eraNarrow=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""},In.eraAbbr=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""},In.eraYear=function(){var e,t,n,r,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,r=this.clone().startOf("day").valueOf(),o[e].since<=r&&r<=o[e].until||o[e].until<=r&&r<=o[e].since)return(this.year()-i(o[e].since).year())*n+o[e].offset;return this.year()},In.year=Ie,In.isLeapYear=function(){return ve(this.year())},In.weekYear=function(e){return _n.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},In.isoWeekYear=function(e){return _n.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},In.quarter=In.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},In.month=$e,In.daysInMonth=function(){return Me(this.year(),this.month())},In.week=In.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},In.isoWeek=In.isoWeeks=function(e){var t=Ye(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},In.weeksInYear=function(){var e=this.localeData()._week;return We(this.year(),e.dow,e.doy)},In.weeksInWeekYear=function(){var e=this.localeData()._week;return We(this.weekYear(),e.dow,e.doy)},In.isoWeeksInYear=function(){return We(this.year(),1,4)},In.isoWeeksInISOWeekYear=function(){return We(this.isoWeekYear(),1,4)},In.date=Sn,In.day=In.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=De(this,"Day");return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},In.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},In.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},In.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},In.hour=In.hours=st,In.minute=In.minutes=Tn,In.second=In.seconds=En,In.millisecond=In.milliseconds=Cn,In.utcOffset=function(e,t,n){var r,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=zt(re,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=Yt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!t||this._changeInProgress?tn(this,Zt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Yt(this)},In.utc=function(e){return this.utcOffset(0,e)},In.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Yt(this),"m")),this},In.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=zt(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},In.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Rt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},In.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},In.isLocal=function(){return!!this.isValid()&&!this._isUTC},In.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},In.isUtc=Wt,In.isUTC=Wt,In.zoneAbbr=function(){return this._isUTC?"UTC":""},In.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},In.dates=S("dates accessor is deprecated. Use date instead.",Sn),In.months=S("months accessor is deprecated. Use month instead",$e),In.years=S("years accessor is deprecated. Use year instead",Ie),In.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),In.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return y(t,this),(t=Mt(t))._a?(e=t._isUTC?p(t._a):Rt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&he(e[i])!==he(t[i]))&&a++;return a+o}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var Dn=I.prototype;function On(e,t,n,i){var r=vt(),o=p().set(i,t);return r[n](o,e)}function Mn(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return On(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=On(e,i,n,"month");return r}function Ln(e,t,n,i){"boolean"==typeof e?(c(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,c(t)&&(n=t,t=void 0),t=t||"");var r,o=vt(),a=e?o._week.dow:0,s=[];if(null!=n)return On(t,(n+a)%7,i,"day");for(r=0;r<7;r++)s[r]=On(t,(r+a)%7,i,"day");return s}Dn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return E(i)?i.call(t,n):i},Dn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(D).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},Dn.invalidDate=function(){return this._invalidDate},Dn.ordinal=function(e){return this._ordinal.replace("%d",e)},Dn.preparse=Pn,Dn.postformat=Pn,Dn.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return E(r)?r(e,t,n,i):r.replace(/%d/i,e)},Dn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)},Dn.set=function(e){var t,n;for(n in e)a(e,n)&&(E(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Dn.eras=function(e,t){var n,r,o,a=this._eras||vt("en")._eras;for(n=0,r=a.length;n<r;++n){if("string"==typeof a[n].since)o=i(a[n].since).startOf("day"),a[n].since=o.valueOf();switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=i(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}}return a},Dn.erasParse=function(e,t,n){var i,r,o,a,s,l=this.eras();for(e=e.toUpperCase(),i=0,r=l.length;i<r;++i)if(o=l[i].name.toUpperCase(),a=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[i];break;case"NNNN":if(o===e)return l[i];break;case"NNNNN":if(s===e)return l[i]}else if([o,a,s].indexOf(e)>=0)return l[i]},Dn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n},Dn.erasAbbrRegex=function(e){return a(this,"_erasAbbrRegex")||yn.call(this),e?this._erasAbbrRegex:this._erasRegex},Dn.erasNameRegex=function(e){return a(this,"_erasNameRegex")||yn.call(this),e?this._erasNameRegex:this._erasRegex},Dn.erasNarrowRegex=function(e){return a(this,"_erasNarrowRegex")||yn.call(this),e?this._erasNarrowRegex:this._erasRegex},Dn.months=function(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ne).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone},Dn.monthsShort=function(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ne.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Dn.monthsParse=function(e,t,n){var i,r,o;if(this._monthsParseExact)return Ve.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},Dn.monthsRegex=function(e){return this._monthsParseExact?(a(this,"_monthsRegex")||He.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=Ue),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Dn.monthsShortRegex=function(e){return this._monthsParseExact?(a(this,"_monthsRegex")||He.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Fe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Dn.week=function(e){return Ye(e,this._week.dow,this._week.doy).week},Dn.firstDayOfYear=function(){return this._week.doy},Dn.firstDayOfWeek=function(){return this._week.dow},Dn.weekdays=function(e,t){var n=r(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ke(n,this._week.dow):e?n[e.day()]:n},Dn.weekdaysMin=function(e){return!0===e?Ke(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Dn.weekdaysShort=function(e){return!0===e?Ke(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Dn.weekdaysParse=function(e,t,n){var i,r,o;if(this._weekdaysParseExact)return nt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},Dn.weekdaysRegex=function(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Dn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=et),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Dn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=tt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Dn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Dn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},mt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===he(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=S("moment.lang is deprecated. Use moment.locale instead.",mt),i.langData=S("moment.langData is deprecated. Use moment.localeData instead.",vt);var Rn=Math.abs;function Nn(e,t,n,i){var r=Zt(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Fn(e){return e<0?Math.floor(e):Math.ceil(e)}function Un(e){return 4800*e/146097}function Vn(e){return 146097*e/4800}function Bn(e){return function(){return this.as(e)}}var $n=Bn("ms"),Hn=Bn("s"),Gn=Bn("m"),jn=Bn("h"),zn=Bn("d"),qn=Bn("w"),Yn=Bn("M"),Wn=Bn("Q"),Kn=Bn("y"),Xn=$n;function Zn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Jn=Zn("milliseconds"),Qn=Zn("seconds"),ei=Zn("minutes"),ti=Zn("hours"),ni=Zn("days"),ii=Zn("months"),ri=Zn("years");var oi=Math.round,ai={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function si(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}var li=Math.abs;function ci(e){return(e>0)-(e<0)||+e}function ui(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,o,a,s,l=li(this._milliseconds)/1e3,c=li(this._days),u=li(this._months),d=this.asSeconds();return d?(e=de(l/60),t=de(e/60),l%=60,e%=60,n=de(u/12),u%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=d<0?"-":"",o=ci(this._months)!==ci(d)?"-":"",a=ci(this._days)!==ci(d)?"-":"",s=ci(this._milliseconds)!==ci(d)?"-":"",r+"P"+(n?o+n+"Y":"")+(u?o+u+"M":"")+(c?a+c+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+i+"S":"")):"P0D"}var di=Bt.prototype;return di.isValid=function(){return this._isValid},di.abs=function(){var e=this._data;return this._milliseconds=Rn(this._milliseconds),this._days=Rn(this._days),this._months=Rn(this._months),e.milliseconds=Rn(e.milliseconds),e.seconds=Rn(e.seconds),e.minutes=Rn(e.minutes),e.hours=Rn(e.hours),e.months=Rn(e.months),e.years=Rn(e.years),this},di.add=function(e,t){return Nn(this,e,t,1)},di.subtract=function(e,t){return Nn(this,e,t,-1)},di.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=B(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Un(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Vn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},di.asMilliseconds=$n,di.asSeconds=Hn,di.asMinutes=Gn,di.asHours=jn,di.asDays=zn,di.asWeeks=qn,di.asMonths=Yn,di.asQuarters=Wn,di.asYears=Kn,di.valueOf=Xn,di._bubble=function(){var e,t,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Fn(Vn(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=de(o/1e3),l.seconds=e%60,t=de(e/60),l.minutes=t%60,n=de(t/60),l.hours=n%24,a+=de(n/24),s+=r=de(Un(a)),a-=Fn(Vn(r)),i=de(s/12),s%=12,l.days=a,l.months=s,l.years=i,this},di.clone=function(){return Zt(this)},di.get=function(e){return e=B(e),this.isValid()?this[e+"s"]():NaN},di.milliseconds=Jn,di.seconds=Qn,di.minutes=ei,di.hours=ti,di.days=ni,di.weeks=function(){return de(this.days()/7)},di.months=ii,di.years=ri,di.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=ai;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(o=Object.assign({},ai,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),i=function(e,t,n,i){var r=Zt(e).abs(),o=oi(r.as("s")),a=oi(r.as("m")),s=oi(r.as("h")),l=oi(r.as("d")),c=oi(r.as("M")),u=oi(r.as("w")),d=oi(r.as("y")),h=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||u<=1&&["w"]||u<n.w&&["ww",u]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=+e>0,h[4]=i,si.apply(null,h)}(this,!r,o,n=this.localeData()),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},di.toISOString=ui,di.toString=ui,di.toJSON=ui,di.locale=ln,di.localeData=un,di.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ui),di.lang=cn,R("X",0,0,"unix"),R("x",0,0,"valueOf"),le("x",ne),le("X",/[+-]?\d+(\.\d{1,3})?/),fe("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),fe("x",function(e,t,n){n._d=new Date(he(e))}),
//! moment.js
i.version="2.30.1",e=Rt,i.fn=In,i.min=function(){return Ut("isBefore",[].slice.call(arguments,0))},i.max=function(){return Ut("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=p,i.unix=function(e){return Rt(1e3*e)},i.months=function(e,t){return Mn(e,t,"months")},i.isDate=u,i.locale=mt,i.invalid=g,i.duration=Zt,i.isMoment=_,i.weekdays=function(e,t,n){return Ln(e,t,n,"weekdays")},i.parseZone=function(){return Rt.apply(null,arguments).parseZone()},i.localeData=vt,i.isDuration=$t,i.monthsShort=function(e,t){return Mn(e,t,"monthsShort")},i.weekdaysMin=function(e,t,n){return Ln(e,t,n,"weekdaysMin")},i.defineLocale=gt,i.updateLocale=function(e,t){if(null!=t){var n,i,r=ct;null!=ut[e]&&null!=ut[e].parentLocale?ut[e].set(k(ut[e]._config,t)):(null!=(i=ft(e))&&(r=i._config),t=k(r,t),null==i&&(t.abbr=e),(n=new I(t)).parentLocale=ut[e],ut[e]=n),mt(e)}else null!=ut[e]&&(null!=ut[e].parentLocale?(ut[e]=ut[e].parentLocale,e===mt()&&mt(e)):null!=ut[e]&&delete ut[e]);return ut[e]},i.locales=function(){return T(ut)},i.weekdaysShort=function(e,t,n){return Ln(e,t,n,"weekdaysShort")},i.normalizeUnits=B,i.relativeTimeRounding=function(e){return void 0===e?oi:"function"==typeof e&&(oi=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==ai[e]&&(void 0===t?ai[e]:(ai[e]=t,"s"===e&&(ai.ss=t-1),!0))},i.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=In,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}),function(e){e("toastr",["jquery"],function(e){return function(){var t,n,i,r=0,o="error",a="info",s="success",l="warning",c={clear:function(n,i){var r=f();t||u(r);d(n,r,i)||function(n){for(var i=t.children(),r=i.length-1;r>=0;r--)d(e(i[r]),n)}(r)},remove:function(n){var i=f();t||u(i);if(n&&0===e(":focus",n).length)return void m(n);t.children().length&&t.remove()},error:function(e,t,n){return p({type:o,iconClass:f().iconClasses.error,message:e,optionsOverride:n,title:t})},getContainer:u,info:function(e,t,n){return p({type:a,iconClass:f().iconClasses.info,message:e,optionsOverride:n,title:t})},options:{},subscribe:function(e){n=e},success:function(e,t,n){return p({type:s,iconClass:f().iconClasses.success,message:e,optionsOverride:n,title:t})},version:"2.1.4",warning:function(e,t,n){return p({type:l,iconClass:f().iconClasses.warning,message:e,optionsOverride:n,title:t})}};return c;function u(n,i){return n||(n=f()),(t=e("#"+n.containerId)).length||i&&(t=function(n){return t=e("<div/>").attr("id",n.containerId).addClass(n.positionClass),t.appendTo(e(n.target)),t}(n)),t}function d(t,n,i){var r=!(!i||!i.force)&&i.force;return!(!t||!r&&0!==e(":focus",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){m(t)}}),!0)}function h(e){n&&n(e)}function p(n){var o=f(),a=n.iconClass||o.iconClass;if(void 0!==n.optionsOverride&&(o=e.extend(o,n.optionsOverride),a=n.optionsOverride.iconClass||a),!function(e,t){if(e.preventDuplicates){if(t.message===i)return!0;i=t.message}return!1}(o,n)){r++,t=u(o,!0);var s=null,l=e("<div/>"),c=e("<div/>"),d=e("<div/>"),p=e("<div/>"),g=e(o.closeHtml),v={intervalId:null,hideEta:null,maxHideTime:null},b={toastId:r,state:"visible",startTime:new Date,options:o,map:n};return n.iconClass&&l.addClass(o.toastClass).addClass(a),function(){if(n.title){var e=n.title;o.escapeHtml&&(e=y(n.title)),c.append(e).addClass(o.titleClass),l.append(c)}}(),function(){if(n.message){var e=n.message;o.escapeHtml&&(e=y(n.message)),d.append(e).addClass(o.messageClass),l.append(d)}}(),o.closeButton&&(g.addClass(o.closeClass).attr("role","button"),l.prepend(g)),o.progressBar&&(p.addClass(o.progressClass),l.prepend(p)),o.rtl&&l.addClass("rtl"),o.newestOnTop?t.prepend(l):t.append(l),function(){var e="";switch(n.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}l.attr("aria-live",e)}(),l.hide(),l[o.showMethod]({duration:o.showDuration,easing:o.showEasing,complete:o.onShown}),o.timeOut>0&&(s=setTimeout(w,o.timeOut),v.maxHideTime=parseFloat(o.timeOut),v.hideEta=(new Date).getTime()+v.maxHideTime,o.progressBar&&(v.intervalId=setInterval(S,10))),function(){o.closeOnHover&&l.hover(x,_);!o.onclick&&o.tapToDismiss&&l.click(w);o.closeButton&&g&&g.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),o.onCloseClick&&o.onCloseClick(e),w(!0)});o.onclick&&l.click(function(e){o.onclick(e),w()})}(),h(b),o.debug&&console&&console.log(b),l}function y(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(t){var n=t&&!1!==o.closeMethod?o.closeMethod:o.hideMethod,i=t&&!1!==o.closeDuration?o.closeDuration:o.hideDuration,r=t&&!1!==o.closeEasing?o.closeEasing:o.hideEasing;if(!e(":focus",l).length||t)return clearTimeout(v.intervalId),l[n]({duration:i,easing:r,complete:function(){m(l),clearTimeout(s),o.onHidden&&"hidden"!==b.state&&o.onHidden(),b.state="hidden",b.endTime=new Date,h(b)}})}function _(){(o.timeOut>0||o.extendedTimeOut>0)&&(s=setTimeout(w,o.extendedTimeOut),v.maxHideTime=parseFloat(o.extendedTimeOut),v.hideEta=(new Date).getTime()+v.maxHideTime)}function x(){clearTimeout(s),v.hideEta=0,l.stop(!0,!0)[o.showMethod]({duration:o.showDuration,easing:o.showEasing})}function S(){var e=(v.hideEta-(new Date).getTime())/v.maxHideTime*100;p.width(e+"%")}}function f(){return e.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},c.options)}function m(e){t||(t=u()),e.is(":visible")||(e.remove(),e=null,0===t.children().length&&(t.remove(),i=void 0))}}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),define("knockout",["clipboard","jquery","moment","toastr"],function(e,t,n,i){"use strict";const r=Cesium.JulianDate,o=Cesium.knockout;return o.options.useOnlyNativeEvents=!0,o.bindingHandlers.clipboardCopy={init:function(t,n){if(!document.queryCommandSupported("copy")){let e=t.parentNode,n=t;for(;1===e.childNodes.length;)n=e,e=e.parentNode;return void e.removeChild(n)}const r=new e(t,{text:function(){const e=n(),t=o.unwrap(e);let i=t;return"object"==typeof t&&(i=o.unwrap(t.data)),i}});r.on("success",function(){const e=n(),t=o.unwrap(e);let r="Data copied to clipboard.";"object"==typeof t&&(r=t.message),i.success(r,void 0,{timeOut:1e3,preventDuplicates:!0})}),r.on("error",function(){i.error("Failed to copy data to the clipboard.")}),o.utils.domNodeDisposal.addDisposeCallback(t,function(){r.destroy()})}},o.bindingHandlers.dateTimePicker={init:function(e,n,i){const a=i().dateTimePickerOptions||{};a.defaultDate=o.unwrap(n());t(e).datetimepicker(a).on("dp.change",function(e){const t=n();if(o.isObservable(t)){let n=e.date;if(!1===n)return;const o=i().type;"JulianDate"===o?n=r.fromDate(n.toDate()):"Date"===o&&(n=n.toDate()),t(n)}}),o.utils.domNodeDisposal.addDisposeCallback(e,function(){const n=t(e).data("DateTimePicker");n&&n.destroy()})},update:function(e,i,a){const s=t(e).data("DateTimePicker");if(s){let e=o.utils.unwrapObservable(i());const t=a().type;"JulianDate"===t?e=n(r.toDate(e)):"Date"===t&&(e=n.utc(e)),s.date(e)}}},o.bindingHandlers.enterKey={init:function(e,t,n,i){const r=t();e.addEventListener("keydown",function(e){return!!("Enter"!==e.key&&13!==e.keyCode||e.shiftKey)||(r.call(i),!1)})}},o.bindingHandlers.element={init:function(e,t){const n=o.unwrap(t());e.appendChild(n)},update:function(e,t){e.innerHTML="";const n=o.unwrap(t());e.appendChild(n)}},o}),define("Core/CookieBanner",["./Analytics","knockout"],function(e,t){"use strict";const n=t.observable(!0),i={initialize:function(){e.available()&&(n(/(^|;+\s*)cesium\.comCookiePermissions\s*=/.test(document.cookie)),n()&&e.initialize())}};return i.aggreedToCookies=n,i.hide=function(){e.available()&&(document.cookie="cesium.comCookiePermissions=true;Path=/;max-age=15552000",n(!0))},i}),define("Core/decodeJwtPayload",["knockout"],function(e){"use strict";Cesium.DeveloperError;function t(e){return t._implementation(e)}return t._implementation=function(e){const t=e.split(".");return JSON.parse(atob(t[1]))},t}),define("Core/defer",[],function(){"use strict";return function(){let e,t;const n=new Promise((n,i)=>{e=n,t=i});return{resolve:e,reject:t,promise:n}}}),define("@uppy/core",[],function(){var e=(()=>{var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,a=(e,t)=>function(){return t||(0,e[i(e)[0]])((t={exports:{}}).exports,t),t.exports},s=(e,r,a,s)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let l of i(r))o.call(e,l)||l===a||t(e,l,{get:()=>r[l],enumerable:!(s=n(r,l))||s.enumerable});return e},l=(n,i,o)=>(o=null!=n?e(r(n)):{},s(!i&&n&&n.__esModule?o:t(o,"default",{value:n,enumerable:!0}),n)),c=a({"../../node_modules/lodash/isObject.js"(e,t){t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}}),u=a({"../../node_modules/lodash/_freeGlobal.js"(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;t.exports=n}}),d=a({"../../node_modules/lodash/_root.js"(e,t){var n=u(),i="object"==typeof self&&self&&self.Object===Object&&self,r=n||i||Function("return this")();t.exports=r}}),h=a({"../../node_modules/lodash/now.js"(e,t){var n=d();t.exports=function(){return n.Date.now()}}}),p=a({"../../node_modules/lodash/_trimmedEndIndex.js"(e,t){var n=/\s/;t.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}}}),f=a({"../../node_modules/lodash/_baseTrim.js"(e,t){var n=p(),i=/^\s+/;t.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}}}),m=a({"../../node_modules/lodash/_Symbol.js"(e,t){var n=d().Symbol;t.exports=n}}),g=a({"../../node_modules/lodash/_getRawTag.js"(e,t){var n=m(),i=Object.prototype,r=i.hasOwnProperty,o=i.toString,a=n?n.toStringTag:void 0;t.exports=function(e){var t=r.call(e,a),n=e[a];try{e[a]=void 0;var i=!0}catch(l){}var s=o.call(e);return i&&(t?e[a]=n:delete e[a]),s}}}),v=a({"../../node_modules/lodash/_objectToString.js"(e,t){var n=Object.prototype.toString;t.exports=function(e){return n.call(e)}}}),b=a({"../../node_modules/lodash/_baseGetTag.js"(e,t){var n=m(),i=g(),r=v(),o=n?n.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):r(e)}}}),y=a({"../../node_modules/lodash/isObjectLike.js"(e,t){t.exports=function(e){return null!=e&&"object"==typeof e}}}),w=a({"../../node_modules/lodash/isSymbol.js"(e,t){var n=b(),i=y();t.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}}}),_=a({"../../node_modules/lodash/toNumber.js"(e,t){var n=f(),i=c(),r=w(),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var c=a.test(e);return c||s.test(e)?l(e.slice(2),c?2:8):o.test(e)?NaN:+e}}}),x=a({"../../node_modules/lodash/debounce.js"(e,t){var n=c(),i=h(),r=_(),o=Math.max,a=Math.min;t.exports=function(e,t,s){var l,c,u,d,h,p,f=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=l,i=c;return l=c=void 0,f=t,d=e.apply(i,n)}function y(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-f>=u}function w(){var e=i();if(y(e))return _(e);h=setTimeout(w,function(e){var n=t-(e-p);return g?a(n,u-(e-f)):n}(e))}function _(e){return h=void 0,v&&l?b(e):(l=c=void 0,d)}function x(){var e=i(),n=y(e);if(l=arguments,c=this,p=e,n){if(void 0===h)return function(e){return f=e,h=setTimeout(w,t),m?b(e):d}(p);if(g)return clearTimeout(h),h=setTimeout(w,t),b(p)}return void 0===h&&(h=setTimeout(w,t)),d}return t=r(t)||0,n(s)&&(m=!!s.leading,u=(g="maxWait"in s)?o(r(s.maxWait)||0,t):u,v="trailing"in s?!!s.trailing:v),x.cancel=function(){void 0!==h&&clearTimeout(h),f=0,l=p=c=h=void 0},x.flush=function(){return void 0===h?d:_(i())},x}}}),S=a({"../../node_modules/lodash/throttle.js"(e,t){var n=x(),i=c();t.exports=function(e,t,r){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),n(e,t,{leading:o,maxWait:t,trailing:a})}}}),T=a({"../../node_modules/namespace-emitter/index.js"(e,t){t.exports=function(){var e={},t=e._fns={};return e.emit=function(e,n,i,r,o,a,s){var l=function(e){var n=t[e]?t[e]:[],i=e.indexOf(":"),r=-1===i?[e]:[e.substring(0,i),e.substring(i+1)],o=Object.keys(t),a=0,s=o.length;for(;a<s;a++){var l=o[a];if("*"===l&&(n=n.concat(t[l])),2===r.length&&r[0]===l){n=n.concat(t[l]);break}}return n}(e);l.length&&function(e,t,n){var i=0,r=t.length;for(;i<r&&t[i];i++)t[i].event=e,t[i].apply(t[i],n)}(e,l,[n,i,r,o,a,s])},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){this.on(t,function i(){n.apply(this,arguments),e.off(t,i)})},e.off=function(e,t){var n=[];if(e&&t)for(var i=this._fns[e],r=0,o=i?i.length:0;r<o;r++)i[r]!==t&&n.push(i[r]);n.length?this._fns[e]=n:delete this._fns[e]},e}}}),A=a({"../../node_modules/@transloadit/prettier-bytes/dist/prettierBytes.js"(e,t){"use strict";t.exports=function(e){if("number"!=typeof e||Number.isNaN(e))throw new TypeError("Expected a number, got "+typeof e);const t=e<0;let n=Math.abs(e);if(t&&(n=-n),0===n)return"0 B";const i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.min(Math.floor(Math.log(n)/Math.log(1024)),i.length-1),o=Number(n/1024**r),a=i[r];return`${o>=10||o%1==0?Math.round(o):o.toFixed(1)} ${a}`}}}),C=a({"../../node_modules/wildcard/index.js"(e,t){"use strict";function n(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}n.prototype.match=function(e){var t,n,i=!0,r=this.parts,o=r.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;i&&t<o;t++)"*"!==r[t]&&(i=t<n.length&&r[t]===n[t]);i=i&&n}else i=!1;else if("function"==typeof e.splice)for(i=[],t=e.length;t--;)this.match(e[t])&&(i[i.length]=e[t]);else if("object"==typeof e)for(var a in i={},e)this.match(a)&&(i[a]=e[a]);return i},t.exports=function(e,t,i){var r=new n(e,i||/[\/\.]/);return void 0!==t?r.match(t):r}}}),E=a({"../../node_modules/mime-match/index.js"(e,t){var n=C(),i=/[\/\+\.]/;t.exports=function(e,t){function r(t){var r=n(t,e,i);return r&&r.length>=2}return t?r(t.split(";")[0]):r}}}),k={};function I(e,t,n){const i=[];return e.forEach(e=>"string"!=typeof e?i.push(e):t[Symbol.split](e).forEach((e,t,r)=>{""!==e&&i.push(e),t<r.length-1&&i.push(n)})),i}function P(e,t){const n=/\$/g;let i=[e];if(null==t)return i;for(const r of Object.keys(t))if("_"!==r){let e=t[r];"string"==typeof e&&(e=n[Symbol.replace](e,"$$$$")),i=I(i,new RegExp(`%\\{${r}\\}`,"g"),e)}return i}((e,n)=>{for(var i in n)t(e,i,{get:n[i],enumerable:!0})})(k,{BasePlugin:()=>M,UIPlugin:()=>pt,Uppy:()=>Mt,debugLogger:()=>F,default:()=>Mt});var D=e=>{throw new Error(`missing string: ${e}`)},O=class{locale;constructor(e,{onMissingKey:t=D}={}){this.locale={strings:{},pluralize:e=>1===e?0:1},Array.isArray(e)?e.forEach(this.#e,this):this.#e(e),this.#t=t}#t;#e(e){if(!e?.strings)return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let n=this.locale.strings[e];null==n&&(this.#t(e),n=e);if("object"==typeof n){if(t&&void 0!==t.smart_count){return P(n[this.locale.pluralize(t.smart_count)],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof n)throw new Error("string was not a string");return P(n,t)}},M=class{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new O([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function L(e){return e<10?`0${e}`:e.toString()}function R(){const e=new Date;return`${L(e.getHours())}:${L(e.getMinutes())}:${L(e.getSeconds())}`}var N={debug:()=>{},warn:()=>{},error:(...e)=>console.error(`[Uppy] [${R()}]`,...e)},F={debug:(...e)=>console.debug(`[Uppy] [${R()}]`,...e),warn:(...e)=>console.warn(`[Uppy] [${R()}]`,...e),error:(...e)=>console.error(`[Uppy] [${R()}]`,...e)};var U=function(e,t=document){return"string"==typeof e?t.querySelector(e):"object"==typeof(n=e)&&null!==n&&"nodeType"in n&&n.nodeType===Node.ELEMENT_NODE?e:null;var n};var V,B,$,H,G,j,z,q,Y,W,K,X,Z,J,Q=function(e){for(;e&&!e.dir;)e=e.parentNode;return e?.dir},ee={},te=[],ne=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ie=Array.isArray;function re(e,t){for(var n in t)e[n]=t[n];return e}function oe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ae(e,t,n){var i,r,o,a={};for(o in t)"key"==o?i=t[o]:"ref"==o?r=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?V.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===a[o]&&(a[o]=e.defaultProps[o]);return se(e,a,i,r,null)}function se(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++$:r,__i:-1,__u:0};return null==r&&null!=B.vnode&&B.vnode(o),o}function le(e){return e.children}function ce(e,t){this.props=e,this.context=t}function ue(e,t){if(null==t)return e.__?ue(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?ue(e):null}function de(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return de(e)}}function he(e){(!e.__d&&(e.__d=!0)&&H.push(e)&&!pe.__r++||G!=B.debounceRendering)&&((G=B.debounceRendering)||j)(pe)}function pe(){for(var e,t,n,i,r,o,a,s=1;H.length;)H.length>s&&H.sort(z),e=H.shift(),s=H.length,e.__d&&(n=void 0,i=void 0,r=(i=(t=e).__v).__e,o=[],a=[],t.__P&&((n=re({},i)).__v=i.__v+1,B.vnode&&B.vnode(n),_e(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,o,null==r?ue(i):r,!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,Se(o,n,a),i.__e=i.__=null,n.__e!=r&&de(n)));pe.__r=0}function fe(e,t,n,i,r,o,a,s,l,c,u){var d,h,p,f,m,g,v,b=i&&i.__k||te,y=t.length;for(l=function(e,t,n,i,r){var o,a,s,l,c,u=n.length,d=u,h=0;for(e.__k=new Array(r),o=0;o<r;o++)null!=(a=t[o])&&"boolean"!=typeof a&&"function"!=typeof a?(l=o+h,(a=e.__k[o]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?se(null,a,null,null,null):ie(a)?se(le,{children:a},null,null,null):null==a.constructor&&a.__b>0?se(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,s=null,-1!=(c=a.__i=ve(a,n,l,d))&&(d--,(s=n[c])&&(s.__u|=2)),null==s||null==s.__v?(-1==c&&(r>u?h--:r<u&&h++),"function"!=typeof a.type&&(a.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,a.__u|=4))):e.__k[o]=null;if(d)for(o=0;o<u;o++)null!=(s=n[o])&&!(2&s.__u)&&(s.__e==i&&(i=ue(s)),Ce(s,s));return i}(n,t,b,l,y),d=0;d<y;d++)null!=(p=n.__k[d])&&(h=-1==p.__i?ee:b[p.__i]||ee,p.__i=d,g=_e(e,p,h,r,o,a,s,l,c,u),f=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&Ae(h.ref,null,p),u.push(p.ref,p.__c||f,p)),null==m&&null!=f&&(m=f),(v=!!(4&p.__u))||h.__k===p.__k?l=me(p,l,e,v):"function"==typeof p.type&&void 0!==g?l=g:f&&(l=f.nextSibling),p.__u&=-7);return n.__e=m,l}function me(e,t,n,i){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=me(r[o],t,n,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=ue(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function ge(e,t){return t=t||[],null==e||"boolean"==typeof e||(ie(e)?e.some(function(e){ge(e,t)}):t.push(e)),t}function ve(e,t,n,i){var r,o,a,s=e.key,l=e.type,c=t[n],u=null!=c&&!(2&c.__u);if(null===c&&null==e.key||u&&s==c.key&&l==c.type)return n;if(i>(u?1:0))for(r=n-1,o=n+1;r>=0||o<t.length;)if(null!=(c=t[a=r>=0?r--:o++])&&!(2&c.__u)&&s==c.key&&l==c.type)return a;return-1}function be(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||ne.test(t)?n:n+"px"}function ye(e,t,n,i,r){var o,a;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||be(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||be(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])o=t!=(t=t.replace(q,"$1")),a=t.toLowerCase(),t=a in e||"onFocusOut"==t||"onFocusIn"==t?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=Y,e.addEventListener(t,o?K:W,o)):e.removeEventListener(t,o?K:W,o);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(s){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function we(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=Y++;else if(t.t<n.u)return;return n(B.event?B.event(t):t)}}}function _e(e,t,n,i,r,o,a,s,l,c){var u,d,h,p,f,m,g,v,b,y,w,_,x,S,T,A,C,E=t.type;if(null!=t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=t.__e=n.__e]),(u=B.__b)&&u(t);e:if("function"==typeof E)try{if(v=t.props,b="prototype"in E&&E.prototype.render,y=(u=E.contextType)&&i[u.__c],w=u?y?y.props.value:u.__:i,n.__c?g=(d=t.__c=n.__c).__=d.__E:(b?t.__c=d=new E(v,w):(t.__c=d=new ce(v,w),d.constructor=E,d.render=Ee),y&&y.sub(d),d.props=v,d.state||(d.state={}),d.context=w,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),b&&null==d.__s&&(d.__s=d.state),b&&null!=E.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=re({},d.__s)),re(d.__s,E.getDerivedStateFromProps(v,d.__s))),p=d.props,f=d.state,d.__v=t,h)b&&null==E.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),b&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(b&&null==E.getDerivedStateFromProps&&v!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(v,w),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(v,d.__s,w)||t.__v==n.__v){for(t.__v!=n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(v,d.__s,w),b&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,f,m)})}if(d.context=w,d.props=v,d.__P=e,d.__e=!1,x=B.__r,S=0,b){for(d.state=d.__s,d.__d=!1,x&&x(t),u=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do{d.__d=!1,x&&x(t),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++S<25);d.state=d.__s,null!=d.getChildContext&&(i=re(re({},i),d.getChildContext())),b&&!h&&null!=d.getSnapshotBeforeUpdate&&(m=d.getSnapshotBeforeUpdate(p,f)),A=u,null!=u&&u.type===le&&null==u.key&&(A=Te(u.props.children)),s=fe(e,ie(A)?A:[A],t,n,i,r,o,a,s,l,c),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),g&&(d.__E=d.__=null)}catch(k){if(t.__v=null,l||null!=o)if(k.then){for(t.__u|=l?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else{for(C=o.length;C--;)oe(o[C]);xe(t)}else t.__e=n.__e,t.__k=n.__k,k.then||xe(t);B.__e(k,t,n)}else null==o&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=function(e,t,n,i,r,o,a,s,l){var c,u,d,h,p,f,m,g=n.props,v=t.props,b=t.type;if("svg"==b?r="http://www.w3.org/2000/svg":"math"==b?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=o)for(c=0;c<o.length;c++)if((p=o[c])&&"setAttribute"in p==!!b&&(b?p.localName==b:3==p.nodeType)){e=p,o[c]=null;break}if(null==e){if(null==b)return document.createTextNode(v);e=document.createElementNS(r,b,v.is&&v),s&&(B.__m&&B.__m(t,o),s=!1),o=null}if(null==b)g===v||s&&e.data==v||(e.data=v);else{if(o=o&&V.call(e.childNodes),g=n.props||ee,!s&&null!=o)for(g={},c=0;c<e.attributes.length;c++)g[(p=e.attributes[c]).name]=p.value;for(c in g)if(p=g[c],"children"==c);else if("dangerouslySetInnerHTML"==c)d=p;else if(!(c in v)){if("value"==c&&"defaultValue"in v||"checked"==c&&"defaultChecked"in v)continue;ye(e,c,null,p,r)}for(c in v)p=v[c],"children"==c?h=p:"dangerouslySetInnerHTML"==c?u=p:"value"==c?f=p:"checked"==c?m=p:s&&"function"!=typeof p||g[c]===p||ye(e,c,p,g[c],r);if(u)s||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),fe("template"==t.type?e.content:e,ie(h)?h:[h],t,n,i,"foreignObject"==b?"http://www.w3.org/1999/xhtml":r,o,a,o?o[0]:n.__k&&ue(n,0),s,l),null!=o)for(c=o.length;c--;)oe(o[c]);s||(c="value","progress"==b&&null==f?e.removeAttribute("value"):null!=f&&(f!==e[c]||"progress"==b&&!f||"option"==b&&f!=g[c])&&ye(e,c,f,g[c],r),c="checked",null!=m&&m!=e[c]&&ye(e,c,m,g[c],r))}return e}(n.__e,t,n,i,r,o,a,l,c);return(u=B.diffed)&&u(t),128&t.__u?void 0:s}function xe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(xe)}function Se(e,t,n){for(var i=0;i<n.length;i++)Ae(n[i],n[++i],n[++i]);B.__c&&B.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(n){B.__e(n,t.__v)}})}function Te(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:ie(e)?e.map(Te):re({},e)}function Ae(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(r){B.__e(r,n)}}function Ce(e,t,n){var i,r;if(B.unmount&&B.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||Ae(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){B.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&Ce(i[r],t,n||"function"!=typeof e.type);n||oe(e.__e),e.__c=e.__=e.__e=void 0}function Ee(e,t,n){return this.constructor(e,n)}V=te.slice,B={__e:function(e,t,n,i){for(var r,o,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(e)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),a=r.__d),a)return r.__E=r}catch(s){e=s}throw e}},$=0,ce.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=re({},this.state),"function"==typeof e&&(e=e(re({},n),this.props)),e&&re(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),he(this))},ce.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),he(this))},ce.prototype.render=le,H=[],j="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,z=function(e,t){return e.__v.__b-t.__v.__b},pe.__r=0,q=/(PointerCapture)$|Capture$/i,Y=0,W=we(!1),K=we(!0);var ke=[],Ie=B,Pe=Ie.__b,De=Ie.__r,Oe=Ie.diffed,Me=Ie.__c,Le=Ie.unmount,Re=Ie.__;function Ne(){for(var e;e=ke.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ve),e.__H.__h.forEach(Be),e.__H.__h=[]}catch(t){e.__H.__h=[],Ie.__e(t,e.__v)}}Ie.__b=function(e){X=null,Pe&&Pe(e)},Ie.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Re&&Re(e,t)},Ie.__r=function(e){De&&De(e);var t=(X=e.__c).__H;t&&(Z===X?(t.__h=[],X.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(Ve),t.__h.forEach(Be),t.__h=[],0)),Z=X},Ie.diffed=function(e){Oe&&Oe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==ke.push(t)&&J===Ie.requestAnimationFrame||((J=Ie.requestAnimationFrame)||Ue)(Ne)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),Z=X=null},Ie.__c=function(e,t){t.some(function(e){try{e.__h.forEach(Ve),e.__h=e.__h.filter(function(e){return!e.__||Be(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],Ie.__e(n,e.__v)}}),Me&&Me(e,t)},Ie.unmount=function(e){Le&&Le(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{Ve(e)}catch(n){t=n}}),n.__H=void 0,t&&Ie.__e(t,n.__v))};var Fe="function"==typeof requestAnimationFrame;function Ue(e){var t,n=function(){clearTimeout(i),Fe&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);Fe&&(t=requestAnimationFrame(n))}function Ve(e){var t=X,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),X=t}function Be(e){var t=X;e.__c=e.__(),X=t}function $e(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var i in t)if("__source"!==i&&e[i]!==t[i])return!0;return!1}function He(e,t){this.props=e,this.context=t}(He.prototype=new ce).isPureReactComponent=!0,He.prototype.shouldComponentUpdate=function(e,t){return $e(this.props,e)||$e(this.state,t)};var Ge=B.__b;B.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ge&&Ge(e)};"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var je=B.__e;B.__e=function(e,t,n,i){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);je(e,t,n,i)};var ze=B.unmount;function qe(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),e.__c.__H=null),null!=(e=function(e,t){for(var n in t)e[n]=t[n];return e}({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(e){return qe(e,t,n)})),e}function Ye(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(e){return Ye(e,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function We(){this.__u=0,this.o=null,this.__b=null}function Ke(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Xe(){this.i=null,this.l=null}B.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),ze&&ze(e)},(We.prototype=new ce).__c=function(e,t){var n=t.__c,i=this;null==i.o&&(i.o=[]),i.o.push(n);var r=Ke(i.__v),o=!1,a=function(){o||(o=!0,n.__R=null,r?r(s):s())};n.__R=a;var s=function(){if(! --i.__u){if(i.state.__a){var e=i.state.__a;i.__v.__k[0]=Ye(e,e.__c.__P,e.__c.__O)}var t;for(i.setState({__a:i.__b=null});t=i.o.pop();)t.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(a,a)},We.prototype.componentWillUnmount=function(){this.o=[]},We.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=qe(this.__b,n,i.__O=i.__P)}this.__b=null}var r=t.__a&&ae(le,null,e.fallback);return r&&(r.__u&=-33),[ae(le,null,t.__a?null:e.children),r]};var Ze=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(Xe.prototype=new ce).__a=function(e){var t=this,n=Ke(t.__v),i=t.l.get(e);return i[0]++,function(r){var o=function(){t.props.revealOrder?(i.push(r),Ze(t,e,i)):r()};n?n(o):o()}},Xe.prototype.render=function(e){this.i=null,this.l=new Map;var t=ge(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Xe.prototype.componentDidUpdate=Xe.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Ze(e,n,t)})};var Je="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Qe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,et=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,tt=/[A-Z0-9]/g,nt="undefined"!=typeof document,it=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};function rt(e,t,n){return null==t.__k&&(t.textContent=""),function(e,t,n){var i,r,o,a;t==document&&(t=document.documentElement),B.__&&B.__(e,t),r=(i="function"==typeof n)?null:n&&n.__k||t.__k,o=[],a=[],_e(t,e=(!i&&n||t).__k=ae(le,null,[e]),r||ee,ee,t.namespaceURI,!i&&n?[n]:r?null:t.firstChild?V.call(t.childNodes):null,o,!i&&n?n:r?r.__e:t.firstChild,i,a),Se(o,e,a)}(e,t),"function"==typeof n&&n(),e?e.__c:null}ce.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(ce.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var ot=B.event;function at(){}function st(){return this.cancelBubble}function lt(){return this.defaultPrevented}B.event=function(e){return ot&&(e=ot(e)),e.persist=at,e.isPropagationStopped=st,e.isDefaultPrevented=lt,e.nativeEvent=e};var ct={enumerable:!1,configurable:!0,get:function(){return this.class}},ut=B.vnode;B.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,i={},r=-1===n.indexOf("-");for(var o in t){var a=t[o];if(!("value"===o&&"defaultValue"in t&&null==a||nt&&"children"===o&&"noscript"===n||"class"===o||"className"===o)){var s=o.toLowerCase();"defaultValue"===o&&"value"in t&&null==t.value?o="value":"download"===o&&!0===a?a="":"translate"===s&&"no"===a?a=!1:"o"===s[0]&&"n"===s[1]?"ondoubleclick"===s?o="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||it(t.type)?"onfocus"===s?o="onfocusin":"onblur"===s?o="onfocusout":et.test(o)&&(o=s):s=o="oninput":r&&Qe.test(o)?o=o.replace(tt,"-$&").toLowerCase():null===a&&(a=void 0),"oninput"===s&&i[o=s]&&(o="oninputCapture"),i[o]=a}}"select"==n&&i.multiple&&Array.isArray(i.value)&&(i.value=ge(t.children).forEach(function(e){e.props.selected=-1!=i.value.indexOf(e.props.value)})),"select"==n&&null!=i.defaultValue&&(i.value=ge(t.children).forEach(function(e){e.props.selected=i.multiple?-1!=i.defaultValue.indexOf(e.props.value):i.defaultValue==e.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",ct)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(e),e.$$typeof=Je,ut&&ut(e)};var dt=B.__r;B.__r=function(e){dt&&dt(e),e.__c};var ht=B.diffed;B.diffed=function(e){ht&&ht(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value)};var pt=class e extends M{#n;isTargetDOMEl;el;parent;title;getTargetPlugin(t){let n;if("function"==typeof t?.addTarget)n=t,n instanceof e||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin:e}}));else if("function"==typeof t){const e=t;this.uppy.iteratePlugins(t=>{t instanceof e&&(n=t)})}return n}mount(e,t){const n=t.id,i=U(e);if(i){this.isTargetDOMEl=!0;const t=document.createElement("div");return t.classList.add("uppy-Root"),this.#n=function(e){let t,n=null;return(...i)=>(t=i,n||(n=Promise.resolve().then(()=>(n=null,e(...t)))),n)}(e=>{this.uppy.getPlugin(this.id)&&(rt(this.render(e,t),t),this.afterUpdate())}),this.uppy.log(`Installing ${n} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(i.innerHTML=""),rt(this.render(this.uppy.getState(),t),t),this.el=t,i.appendChild(t),t.dir=this.opts.direction||Q(t)||"ltr",this.onMount(),this.el}const r=this.getTargetPlugin(e);if(r)return this.uppy.log(`Installing ${n} to ${r.id}`),this.parent=r,this.el=r.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${n}`);let o=`Invalid target option given to ${n}.`;throw o+="function"==typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){null!=this.el&&this.#n?.(e)}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}},ft="4.3.2",mt=class{static VERSION=ft;state={};#i=new Set;getState(){return this.state}setState(e){const t={...this.state},n={...this.state,...e};this.state=n,this.#r(t,n,e)}subscribe(e){return this.#i.add(e),()=>{this.#i.delete(e)}}#r(...e){this.#i.forEach(t=>{t(...e)})}};function gt(e){const t=e.lastIndexOf(".");return-1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}var vt={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function bt(e){if(e.type)return e.type;const t=e.name?gt(e.name).extension?.toLowerCase():null;return t&&t in vt?vt[t]:"application/octet-stream"}function yt(e){let t="";return e.replace(/[^A-Z0-9]/gi,e=>(t+=`-${function(e){return e.charCodeAt(0).toString(32)}(e)}`,"/"))+t}function wt(e,t){if(function(e){return!(!e.isRemote||!e.remote)&&new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}(e))return e.id;const n=bt(e);return function(e,t){let n=t||"uppy";return"string"==typeof e.name&&(n+=`-${yt(e.name.toLowerCase())}`),void 0!==e.type&&(n+=`-${e.type}`),e.meta&&"string"==typeof e.meta.relativePath&&(n+=`-${yt(e.meta.relativePath.toLowerCase())}`),void 0!==e.data.size&&(n+=`-${e.data.size}`),void 0!==e.data.lastModified&&(n+=`-${e.data.lastModified}`),n}({...e,type:n},t)}var _t=l(S(),1),xt=l(T(),1),St="4.5.3";var Tt={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}},At=l(A(),1),Ct=l(E(),1),Et={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},kt=class extends Error{isUserFacing;file;constructor(e,t){super(e),this.isUserFacing=t?.isUserFacing??!0,t?.file&&(this.file=t.file)}isRestriction=!0},It=class{getI18n;getOpts;constructor(e,t){this.getI18n=t,this.getOpts=()=>{const t=e();if(null!=t.restrictions?.allowedFileTypes&&!Array.isArray(t.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return t}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:n,maxNumberOfFiles:i}=this.getOpts().restrictions;if(i){if(e.filter(e=>!e.isGhost).length+t.length>i)throw new kt(`${this.getI18n()("youCanOnlyUploadX",{smart_count:i})}`)}if(n){const i=[...e,...t].reduce((e,t)=>e+(t.size??0),0);if(i>n)throw new kt(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,At.default)(n),size:(0,At.default)(i)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:n,allowedFileTypes:i}=this.getOpts().restrictions;if(i){if(!i.some(t=>t.includes("/")?!!e.type&&(0,Ct.default)(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.slice(1).toLowerCase())){const t=i.join(", ");throw new kt(this.getI18n()("youCanOnlyUploadFileTypes",{types:t}),{file:e})}}if(t&&null!=e.size&&e.size>t)throw new kt(this.getI18n()("exceedsSize",{size:(0,At.default)(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(n&&null!=e.size&&e.size<n)throw new kt(this.getI18n()("inferiorSize",{size:(0,At.default)(n)}),{file:e})}validate(e,t){t.forEach(e=>{this.validateSingleFile(e)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new kt(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new kt(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,i=[];for(const r of n)Object.hasOwn(e.meta,r)&&""!==e.meta[r]||i.push(r);return{missingFields:i,error:t}}};function Pt(e){if(null==e&&"undefined"!=typeof navigator&&(e=navigator.userAgent),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const n=t[1].split(".",2),i=parseInt(n[0],10),r=parseInt(n[1],10);return i<15||15===i&&r<15063||(i>18||18===i&&r>=18218)}var Dt,Ot={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Mt=class e{static VERSION=St;#o=Object.create(null);#a;#s;#l=(0,xt.default)();#c=new Set;#u=new Set;#d=new Set;defaultLocale;locale;opts;store;i18n;i18nArray;scheduledAutoProceed=null;wasOffline=!1;constructor(t){this.defaultLocale=Tt;const n={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Et,meta:{},onBeforeFileAdded:(e,t)=>!Object.hasOwn(t,e.id),onBeforeUpload:e=>e,store:new mt,logger:N,infoTimeout:5e3},i={...n,...t};this.opts={...i,restrictions:{...n.restrictions,...t?.restrictions}},t?.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t?.debug&&(this.opts.logger=F),this.log(`Using Core v${e.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Ot,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Pt(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),this.#a=new It(()=>this.opts,()=>this.i18n),this.#s=this.store.subscribe((e,t,n)=>{this.emit("state-update",e,t,n),this.updateAll(t)}),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),this.#h()}emit(e,...t){this.#l.emit(e,...t)}on(e,t){return this.#l.on(e,t),this}once(e,t){return this.#l.once(e,t),this}off(e,t){return this.#l.off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([e,n])=>[e,{...t[e],...n}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can’t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=new O([this.defaultLocale,this.opts.locale],{onMissingKey:e=>this.log(`Missing i18n string: ${e}`,"error")});this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},n=Object.create(null);Object.keys(t).forEach(i=>{n[i]={...t[i],progress:{...t[i].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:n,...Ot})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Ot,files:{}})}addPreProcessor(e){this.#c.add(e)}removePreProcessor(e){return this.#c.delete(e)}addPostProcessor(e){this.#d.add(e)}removePostProcessor(e){return this.#d.delete(e)}addUploader(e){this.#u.add(e)}removeUploader(e){return this.#u.delete(e)}setMeta(e){const t={...this.getState().meta,...e},n={...this.getState().files};Object.keys(n).forEach(t=>{n[t]={...n[t],meta:{...n[t].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})}setFileMeta(e,t){const n={...this.getState().files};if(!n[e])return void this.log(`Was trying to set metadata for a file that has been removed: ${e}`);const i={...n[e].meta,...t};n[e]={...n[e],meta:i},this.setState({files:n})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(e=>this.getFile(e))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:n}=this.getState(),i=Object.values(e),r=[],o=[],a=[],s=[],l=[],c=[],u=[],d=[],h=[];for(const p of i){const{progress:e}=p;!e.uploadComplete&&e.uploadStarted&&(r.push(p),p.isPaused||d.push(p)),e.uploadStarted||o.push(p),(e.uploadStarted||e.preprocess||e.postprocess)&&a.push(p),e.uploadStarted&&s.push(p),p.isPaused&&l.push(p),e.uploadComplete&&c.push(p),p.error&&u.push(p),(e.preprocess||e.postprocess)&&h.push(p)}return{newFiles:o,startedFiles:a,uploadStartedFiles:s,pausedFiles:l,completeFiles:c,erroredFiles:u,inProgressFiles:r,inProgressNotPausedFiles:d,processingFiles:h,isUploadStarted:s.length>0,isAllComplete:100===t&&c.length===i.length&&0===h.length,isAllErrored:!!n&&u.length===i.length,isAllPaused:0!==r.length&&l.length===r.length,isUploadInProgress:r.length>0,isSomeGhost:i.some(e=>e.isGhost)}}#p(e){for(const r of e)r.isRestriction?this.emit("restriction-failed",r.file,r):this.emit("error",r,r.file),this.log(r,"warning");const t=e.filter(e=>e.isUserFacing),n=t.slice(0,4),i=t.slice(4);n.forEach(({message:e,details:t=""})=>{this.info({message:e,details:t},"error",this.opts.infoTimeout)}),i.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:i.length})})}validateRestrictions(e,t=this.getFiles()){try{this.#a.validate(t,[e])}catch(n){return n}return null}validateSingleFile(e){try{this.#a.validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{this.#a.validateAggregateRestrictions(t,e)}catch(n){return n.message}return null}#f(e){const{missingFields:t,error:n}=this.#a.getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:n.message}),this.log(n.message),this.emit("restriction-failed",e,n),!1):(0===t.length&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)}#m(e){let t=!0;for(const n of Object.values(e))this.#f(n)||(t=!1);return t}#g(e){const{allowNewUpload:t}=this.getState();if(!1===t){const t=new kt(this.i18n("noMoreFilesAllowed"),{file:e});throw this.#p([t]),t}}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!(!t[e]||t[e].isGhost)}#v(e){const t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,n=bt(t),i=function(e,t){return t.name?t.name:"image"===e.split("/")[0]?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}(n,t),r=gt(i).extension,o=wt(t,this.getID()),a=t.meta||{};a.name=i,a.type=n;const s=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:o,name:i,extension:r||"",meta:{...this.getState().meta,...a},type:n,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:s,uploadComplete:!1,uploadStarted:null},size:s,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}}#b(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}#y(e){let{files:t}=this.getState(),n={...t};const i=[],r=[];for(const a of e)try{let e=this.#v(a);const r=t[e.id]?.isGhost;if(r){e={...t[e.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${e.name}, ${e.id}`)}const o=this.opts.onBeforeFileAdded(e,n);if(t=this.getState().files,n={...t,...n},!o&&this.checkIfFileAlreadyExists(e.id))throw new kt(this.i18n("noDuplicates",{fileName:e.name??this.i18n("unnamed")}),{file:a});if(!1===o&&!r)throw new kt("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});"object"==typeof o&&null!==o&&(e=o),this.#a.validateSingleFile(e),n[e.id]=e,i.push(e)}catch(o){r.push(o)}try{this.#a.validateAggregateRestrictions(Object.values(t),i)}catch(o){return r.push(o),{nextFilesState:t,validFilesToAdd:[],errors:r}}return{nextFilesState:n,validFilesToAdd:i,errors:r}}addFile(e){this.#g(e);const{nextFilesState:t,validFilesToAdd:n,errors:i}=this.#y([e]),r=i.filter(e=>e.isRestriction);if(this.#p(r),i.length>0)throw i[0];this.setState({files:t});const[o]=n;return this.emit("file-added",o),this.emit("files-added",n),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),this.#b(),o.id}addFiles(e){this.#g();const{nextFilesState:t,validFilesToAdd:n,errors:i}=this.#y(e),r=i.filter(e=>e.isRestriction);this.#p(r);const o=i.filter(e=>!e.isRestriction);if(o.length>0){let e="Multiple errors occurred while adding files:\n";if(o.forEach(t=>{e+=`\n * ${t.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:e},"error",this.opts.infoTimeout),"function"==typeof AggregateError)throw new AggregateError(o,e);{const t=new Error(e);throw t.errors=o,t}}this.setState({files:t}),n.forEach(e=>{this.emit("file-added",e)}),this.emit("files-added",n),n.length>5?this.log(`Added batch of ${n.length} files`):Object.values(n).forEach(e=>{this.log(`Added file: ${e.name}\n id: ${e.id}\n type: ${e.type}`)}),n.length>0&&this.#b()}removeFiles(e){const{files:t,currentUploads:n}=this.getState(),i={...t},r={...n},o=Object.create(null);function a(e){return void 0===o[e]}e.forEach(e=>{t[e]&&(o[e]=t[e],delete i[e])}),Object.keys(r).forEach(e=>{const t=n[e].fileIDs.filter(a);if(0===t.length)return void delete r[e];const{capabilities:i}=this.getState();if(t.length!==n[e].fileIDs.length&&!i.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");r[e]={...n[e],fileIDs:t}});const s={currentUploads:r,files:i};0===Object.keys(i).length&&(s.allowNewUpload=!0,s.error=null,s.recoveredState=null),this.setState(s),this.#w();const l=Object.keys(o);l.forEach(e=>{this.emit("file-removed",o[e])}),l.length>5?this.log(`Removed ${l.length} files`):this.log(`Removed files: ${l.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),n=!(t.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted).forEach(t=>{const n={...e[t],isPaused:!0};e[t]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted).forEach(t=>{const n={...e[t],isPaused:!1,error:null};e[t]=n}),this.setState({files:e}),this.emit("resume-all")}#_(){const{files:e}=this.getState();return Object.keys(e).filter(t=>{const n=e[t];return n.error&&(!n.missingRequiredMetaFields||0===n.missingRequiredMetaFields.length)})}async#x(){const e=this.#_(),t={...this.getState().files};if(e.forEach(e=>{t[e]={...t[e],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),0===e.length)return{successful:[],failed:[]};const n=this.#S(e,{forceAllowNewUpload:!0});return this.#T(n)}async retryAll(){const e=await this.#x();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Ot)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=this.#S([e],{forceAllowNewUpload:!0});return this.#T(t)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}#A=(e,t)=>{const n=e?this.getFile(e.id):void 0;if(null==e||!n)return void this.log(`Not setting progress for a file that has been removed: ${e?.id}`);if(100===n.progress.percentage)return void this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);const i={bytesTotal:t.bytesTotal,percentage:null!=t.bytesTotal&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};null!=n.progress.uploadStarted?this.setFileState(e.id,{progress:{...n.progress,...i,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...n.progress,...i}}),this.#w()};#C(){const e=this.#E();let t=null;null!=e&&(t=Math.round(100*e),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})}#w=(0,_t.default)(()=>this.#C(),500,{leading:!0,trailing:!0});[Symbol.for("uppy test: updateTotalProgress")](){return this.#C()}#E(){const e=this.getFiles().filter(e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess);if(0===e.length)return 0;if(e.every(e=>e.progress.uploadComplete))return 1;const t=e=>null!=e.progress.bytesTotal&&0!==e.progress.bytesTotal,n=e.filter(t),i=e.filter(e=>!t(e));if(n.every(e=>e.progress.uploadComplete)&&i.length>0&&!i.every(e=>e.progress.uploadComplete))return null;const r=n.reduce((e,t)=>e+(t.progress.bytesTotal??0),0),o=n.reduce((e,t)=>e+(t.progress.bytesUploaded||0),0);return 0===r?0:o/r}#h(){const e=(e,t,n)=>{let i=e.message||"Unknown error";e.details&&(i+=` ${e.details}`),this.setState({error:i}),null!=t&&t.id in this.getState().files&&this.setFileState(t.id,{error:i,response:n})};this.on("error",e),this.on("upload-error",(t,n,i)=>{if(e(n,t,i),"object"==typeof n&&n.message){this.log(n.message,"error");const e=new Error(this.i18n("failedToUpload",{file:t?.name??""}));e.isUserFacing=!0,e.details=n.message,n.details&&(e.details+=` ${n.details}`),this.#p([e])}else this.#p([n])});let t=null;this.on("upload-stalled",(e,n)=>{const{message:i}=e,r=n.map(e=>e.meta.name).join(", ");t||(this.info({message:i,details:r},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${i} ${r}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});this.on("upload-start",e=>{const t=e.filter(e=>{const t=null!=e&&this.getFile(e.id);return t||this.log(`Not setting progress for a file that has been removed: ${e?.id}`),t}),n=Object.fromEntries(t.map(e=>[e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:e.size}}]));this.patchFilesState(n)}),this.on("upload-progress",this.#A),this.on("upload-success",(e,t)=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${e?.id}`);const n=this.getFile(e.id).progress;this.setFileState(e.id,{progress:{...n,postprocess:this.#d.size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:n.bytesTotal},response:t,uploadURL:t.uploadURL,isPaused:!1}),null==e.size&&this.setFileState(e.id,{size:t.bytesUploaded||n.bytesTotal}),this.#w()}),this.on("preprocess-progress",(e,t)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,preprocess:t}}):this.log(`Not setting progress for a file that has been removed: ${e?.id}`)}),this.on("preprocess-complete",e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${e?.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.preprocess,this.setState({files:t})}),this.on("postprocess-progress",(e,t)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getState().files[e.id].progress,postprocess:t}}):this.log(`Not setting progress for a file that has been removed: ${e?.id}`)}),this.on("postprocess-complete",e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${e?.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.postprocess,this.setState({files:t})}),this.on("restored",()=>{this.#w()}),this.on("dashboard:file-edit-complete",e=>{e&&this.#f(e)}),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",this.#k),window.addEventListener("offline",this.#k),setTimeout(this.#k,3e3))}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}#k=this.updateOnlineStatus.bind(this);getID(){return this.opts.id}use(e,...t){if("function"!=typeof e){throw new TypeError(`Expected a plugin class, but got ${null===e?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`)}const n=new e(this,...t),i=n.id;if(!i)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");const r=this.getPlugin(i);if(r){const e=`Already found a plugin named '${r.id}'. Tried to use: '${i}'.\nUppy plugins must have unique \`id\` options.`;throw new Error(e)}return e.VERSION&&this.log(`Using ${i} v${e.VERSION}`),n.type in this.#o?this.#o[n.type].push(n):this.#o[n.type]=[n],n.install(),this.emit("plugin-added",n),this}getPlugin(e){for(const t of Object.values(this.#o)){const n=t.find(t=>t.id===e);if(null!=n)return n}}[Symbol.for("uppy test: getPlugins")](e){return this.#o[e]}iteratePlugins(e){Object.values(this.#o).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=this.#o[e.type],n=t.findIndex(t=>t.id===e.id);-1!==n&&t.splice(n,1);const i={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(i)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),this.#s(),this.iteratePlugins(e=>{this.removePlugin(e)}),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("online",this.#k),window.removeEventListener("offline",this.#k))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",n=3e3){const i="object"==typeof e;this.setState({info:[...this.getState().info,{type:t,message:i?e.message:e,details:i?e.details:null}]}),setTimeout(()=>this.hideInfo(),n),this.emit("info-visible")}log(e,t){const{logger:n}=this.opts;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e)}}#I=new Map;registerRequestClient(e,t){this.#I.set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=this.#I.get(e.remote.requestClientId);if(null==t)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?this.#T(e):(this.#P(e),Promise.reject(new Error("Nonexistent upload")))}#S(e,t={}){const{forceAllowNewUpload:n=!1}=t,{allowNewUpload:i,currentUploads:r}=this.getState();if(!i&&!n)throw new Error("Cannot create a new upload: already uploading.");const o=((e=21)=>{let t="",n=0|e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t})();return this.emit("upload",o,this.getFilesByIds(e)),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:{...r,[o]:{fileIDs:e,step:0,result:{}}}}),o}[Symbol.for("uppy test: createUpload")](...e){return this.#S(...e)}#D(e){const{currentUploads:t}=this.getState();return t[e]}addResultData(e,t){if(!this.#D(e))return void this.log(`Not setting result for an upload that has been removed: ${e}`);const{currentUploads:n}=this.getState(),i={...n[e],result:{...n[e].result,...t}};this.setState({currentUploads:{...n,[e]:i}})}#P(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async#T(e){const t=()=>{const{currentUploads:t}=this.getState();return t[e]};let n=t();const i=[...this.#c,...this.#u,...this.#d];try{for(let r=n.step||0;r<i.length&&n;r++){const o=i[r];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...n,step:r}}});const{fileIDs:a}=n;await o(a,e),n=t()}}catch(o){throw this.#P(e),o}if(n){n.fileIDs.forEach(e=>{const t=this.getFile(e);t?.progress.postprocess&&this.emit("postprocess-complete",t)});const i=n.fileIDs.map(e=>this.getFile(e)),r=i.filter(e=>!e.error),o=i.filter(e=>e.error);this.addResultData(e,{successful:r,failed:o,uploadID:e}),n=t()}let r;return n&&(r=n.result,this.#P(e)),null==r&&(this.log(`Not setting result for an upload that has been removed: ${e}`),r={successful:[],failed:[],uploadID:e}),r}async upload(){this.#o.uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(this.#_().length>0){const t=await this.#x();if(!(this.getFiles().filter(e=>null==e.progress.uploadStarted).length>0))return this.emit("complete",t),t;({files:e}=this.getState())}const t=this.opts.onBeforeUpload(e);return!1===t?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(t&&"object"==typeof t&&(e=t,this.setState({files:e})),Promise.resolve().then(()=>this.#a.validateMinNumberOfFiles(e)).catch(e=>{throw this.#p([e]),e}).then(()=>{if(!this.#m(e))throw new kt(this.i18n("missingRequiredMetaField"))}).catch(e=>{throw e}).then(async()=>{const{currentUploads:t}=this.getState(),n=Object.values(t).flatMap(e=>e.fileIDs),i=[];Object.keys(e).forEach(e=>{const t=this.getFile(e);t.progress.uploadStarted||-1!==n.indexOf(e)||i.push(t.id)});const r=this.#S(i),o=await this.#T(r);return this.emit("complete",o),o}).catch(e=>{throw this.emit("error",e),this.log(e,"error"),e}))}};return Dt=k,s(t({},"__esModule",{value:!0}),Dt)})();
/*! Bundled license information:

@uppy/utils/lib/Translator.js:
  (**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param phrase that needs interpolation, with placeholders
   * @param options with values that will be used to replace placeholders
   *)
*/return e}),define("@uppy/tus",[],function(){var e=(()=>{var e=Object.create,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,s=(e,t)=>function(){return t||(0,e[r(e)[0]])((t={exports:{}}).exports,t),t.exports},l=(e,n,o,s)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let l of r(n))a.call(e,l)||l===o||t(e,l,{get:()=>n[l],enumerable:!(s=i(n,l))||s.enumerable});return e},c=s({"../../node_modules/requires-port/index.js"(e,t){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}}}),u=s({"../../node_modules/querystringify/index.js"(e){"use strict";var t=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(n){return null}}function r(e){try{return encodeURIComponent(e)}catch(n){return null}}e.stringify=function(e,n){n=n||"";var i,o,a=[];for(o in"string"!=typeof n&&(n="?"),e)if(t.call(e,o)){if((i=e[o])||null!=i&&!isNaN(i)||(i=""),o=r(o),i=r(i),null===o||null===i)continue;a.push(o+"="+i)}return a.length?n+a.join("&"):""},e.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),a=i(t[2]);null===o||null===a||o in r||(r[o]=a)}return r}}}),d=s({"../../node_modules/url-parse/index.js"(e,t){"use strict";var n=c(),i=u(),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function h(e){return(e||"").toString().replace(r,"")}var p=[["#","hash"],["?","query"],function(e,t){return g(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function m(e){var t,n=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).location||{},i={},r=typeof(e=e||n);if("blob:"===e.protocol)i=new b(unescape(e.pathname),{});else if("string"===r)for(t in i=new b(e,{}),f)delete i[t];else if("object"===r){for(t in e)t in f||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function g(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function v(e,t){e=(e=h(e)).replace(o,""),t=t||{};var n,i=l.exec(e),r=i[1]?i[1].toLowerCase():"",a=!!i[2],s=!!i[3],c=0;return a?s?(n=i[2]+i[3]+i[4],c=i[2].length+i[3].length):(n=i[2]+i[4],c=i[2].length):s?(n=i[3]+i[4],c=i[3].length):n=i[4],"file:"===r?c>=2&&(n=n.slice(2)):g(r)?n=i[4]:r?a&&(n=n.slice(2)):c>=2&&g(t.protocol)&&(n=i[4]),{protocol:r,slashes:a||g(r),slashesCount:c,rest:n}}function b(e,t,r){if(e=(e=h(e)).replace(o,""),!(this instanceof b))return new b(e,t,r);var a,s,l,c,u,f,y=p.slice(),w=typeof t,_=this,x=0;for("object"!==w&&"string"!==w&&(r=t,t=null),r&&"function"!=typeof r&&(r=i.parse),a=!(s=v(e||"",t=m(t))).protocol&&!s.slashes,_.slashes=s.slashes||a&&t.slashes,_.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||d.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!g(_.protocol)))&&(y[3]=[/(.*)/,"pathname"]);x<y.length;x++)"function"!=typeof(c=y[x])?(l=c[0],f=c[1],l!=l?_[f]=e:"string"==typeof l?~(u="@"===l?e.lastIndexOf(l):e.indexOf(l))&&("number"==typeof c[2]?(_[f]=e.slice(0,u),e=e.slice(u+c[2])):(_[f]=e.slice(u),e=e.slice(0,u))):(u=l.exec(e))&&(_[f]=u[1],e=e.slice(0,u.index)),_[f]=_[f]||a&&c[3]&&t[f]||"",c[4]&&(_[f]=_[f].toLowerCase())):e=c(e,_);r&&(_.query=r(_.query)),a&&t.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==t.pathname)&&(_.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=n.length,r=n[i-1],o=!1,a=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),a++):a&&(0===i&&(o=!0),n.splice(i,1),a--);return o&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(_.pathname,t.pathname)),"/"!==_.pathname.charAt(0)&&g(_.protocol)&&(_.pathname="/"+_.pathname),n(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(~(u=_.auth.indexOf(":"))?(_.username=_.auth.slice(0,u),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=_.auth.slice(u+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(_.auth)),_.auth=_.password?_.username+":"+_.password:_.username),_.origin="file:"!==_.protocol&&g(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString()}b.prototype={set:function(e,t,r){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,n(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,s.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var l=t.indexOf(":");~l?(o.username=t.slice(0,l),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(l+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<p.length;c++){var u=p[c];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&g(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var a=o+(n.protocol&&n.slashes||g(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&g(n.protocol)&&!r&&"/"!==n.pathname&&(a+="@"),(":"===r[r.length-1]||s.test(n.hostname)&&!n.port)&&(r+=":"),a+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a}},b.extractProtocol=v,b.location=m,b.trimLeft=h,b.qs=i,t.exports=b}}),h={};function p(e,t,n){const i=[];return e.forEach(e=>"string"!=typeof e?i.push(e):t[Symbol.split](e).forEach((e,t,r)=>{""!==e&&i.push(e),t<r.length-1&&i.push(n)})),i}function f(e,t){const n=/\$/g;let i=[e];if(null==t)return i;for(const r of Object.keys(t))if("_"!==r){let e=t[r];"string"==typeof e&&(e=n[Symbol.replace](e,"$$$$")),i=p(i,new RegExp(`%\\{${r}\\}`,"g"),e)}return i}((e,n)=>{for(var i in n)t(e,i,{get:n[i],enumerable:!0})})(h,{default:()=>Et});var m=e=>{throw new Error(`missing string: ${e}`)},g=class{locale;constructor(e,{onMissingKey:t=m}={}){this.locale={strings:{},pluralize:e=>1===e?0:1},Array.isArray(e)?e.forEach(this.#e,this):this.#e(e),this.#t=t}#t;#e(e){if(!e?.strings)return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let n=this.locale.strings[e];null==n&&(this.#t(e),n=e);if("object"==typeof n){if(t&&void 0!==t.smart_count){return f(n[this.locale.pluralize(t.smart_count)],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof n)throw new Error("string was not a string");return f(n,t)}},v=class{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new g([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}},b=class{#O;#M=[];constructor(e){this.#O=e}on(e,t){return this.#M.push([e,t]),this.#O.on(e,t)}remove(){for(const[e,t]of this.#M.splice(0))this.#O.off(e,t)}onFilePause(e,t){this.on("upload-pause",(n,i)=>{e===n?.id&&t(i)})}onFileRemove(e,t){this.on("file-removed",n=>{e===n.id&&t(n.id)})}onPause(e,t){this.on("upload-pause",(n,i)=>{e===n?.id&&t(i)})}onRetry(e,t){this.on("upload-retry",n=>{e===n?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{this.#O.getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{this.#O.getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...n)=>{this.#O.getFile(e)&&t(...n)})}onResumeAll(e,t){this.on("resume-all",()=>{this.#O.getFile(e)&&t()})}};function y(e,t){return Object.hasOwn(e,t)}var w=function(e){return!!e&&(0!==e.readyState&&4!==e.readyState||0===e.status)},_=class extends Error{cause;isNetworkError;request;constructor(e,t=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}};function x(e){if(null!=e){const t=()=>this.abort(e.reason);e.addEventListener("abort",t,{once:!0});const n=()=>{e.removeEventListener("abort",t)};this.then?.(n,n)}return this}var S=class{#L=0;#R=[];#N=!1;#F;#U=1;#V;#B;limit;constructor(e){this.limit="number"!=typeof e||0===e?1/0:e}#$(e){this.#L+=1;let t,n=!1;try{t=e()}catch(i){throw this.#L-=1,i}return{abort:e=>{n||(n=!0,this.#L-=1,t?.(e),this.#H())},done:()=>{n||(n=!0,this.#L-=1,this.#H())}}}#H(){queueMicrotask(()=>this.#G())}#G(){if(this.#N||this.#L>=this.limit)return;if(0===this.#R.length)return;const e=this.#R.shift();if(null==e)throw new Error("Invariant violation: next is null");const t=this.#$(e.fn);e.abort=t.abort,e.done=t.done}#j(e,t){const n={fn:e,priority:t?.priority||0,abort:()=>{this.#z(n)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=this.#R.findIndex(e=>n.priority>e.priority);return-1===i?this.#R.push(n):this.#R.splice(i,0,n),n}#z(e){const t=this.#R.indexOf(e);-1!==t&&this.#R.splice(t,1)}run(e,t){return!this.#N&&this.#L<this.limit?this.#$(e):this.#j(e,t)}wrapSyncFunction(e,t){return(...n)=>{const i=this.run(()=>(e(...n),queueMicrotask(()=>i.done()),()=>{}),t);return{abortOn:x,abort(){i.abort()}}}}wrapPromiseFunction(e,t){return(...n)=>{let i;const r=new Promise((r,o)=>{i=this.run(()=>{let t,a;try{a=Promise.resolve(e(...n))}catch(s){a=Promise.reject(s)}return a.then(e=>{t?o(t):(i.done(),r(e))},e=>{t?o(t):(i.done(),o(e))}),e=>{t=function(e){return new Error("Cancelled",{cause:e})}(e)}},t)});return r.abort=e=>{i.abort(e)},r.abortOn=x,r}}resume(){this.#N=!1,clearTimeout(this.#F);for(let e=0;e<this.limit;e++)this.#H()}#q=()=>this.resume();pause(e=null){this.#N=!0,clearTimeout(this.#F),null!=e&&(this.#F=setTimeout(this.#q,e))}rateLimit(e){clearTimeout(this.#B),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(this.#V=this.limit-1,this.limit=this.#U,this.#B=setTimeout(this.#Y,e))}#Y=()=>{if(this.#N)this.#B=setTimeout(this.#Y,0);else{this.#U=this.limit,this.limit=Math.ceil((this.#V+this.#U)/2);for(let e=this.#U;e<=this.limit;e++)this.#H();this.#V-this.#U>3?this.#B=setTimeout(this.#Y,2e3):this.#U=Math.floor(this.#U/2)}};get isPaused(){return this.#N}};Symbol("__queue");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,C(i.key),i)}}function C(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=T(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}function E(e,t,n){return t=D(t),function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I()?Reflect.construct(t,n||[],D(e).constructor):t.apply(e,n))}function k(e){var t="function"==typeof Map?new Map:void 0;return k=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(n){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return function(e,t,n){if(I())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&P(r,n.prototype),r}(e,arguments,D(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),P(i,e)},k(e)}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(I=function(){return!!e})()}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,t,[e])).originalRequest=r,n.originalResponse=o,n.causingError=i,null!=i&&(e+=", caused by ".concat(i.toString())),null!=r){var a=r.getHeader("X-Request-ID")||"n/a",s=r.getMethod(),l=r.getURL(),c=o?o.getStatus():"n/a",u=o?o.getBody()||"":"n/a";e+=", originated from request (method: ".concat(s,", url: ").concat(l,", response code: ").concat(c,", response text: ").concat(u,", request id: ").concat(a,")")}return n.message=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),n=t,i&&A(n.prototype,i),r&&A(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,r}(k(Error)),M=O;function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,N(i.key),i)}}function N(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=L(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}var F,U,V,B=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),$="function"==typeof Buffer,H=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),G=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),j=(e=>{let t={};return e.forEach((e,n)=>t[e]=n),t})(G),z=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,q=String.fromCharCode.bind(String),Y=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_")),W=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),K=e=>{let t,n,i,r,o="";const a=e.length%3;for(let s=0;s<e.length;){if((n=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255||(r=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|r,o+=G[t>>18&63]+G[t>>12&63]+G[t>>6&63]+G[63&t]}return a?o.slice(0,a-3)+"===".substring(a):o},X="function"==typeof btoa?e=>btoa(e):$?e=>Buffer.from(e,"binary").toString("base64"):K,Z=$?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,i=e.length;n<i;n+=4096)t.push(q.apply(null,e.subarray(n,n+4096)));return X(t.join(""))},J=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?q(192|t>>>6)+q(128|63&t):q(224|t>>>12&15)+q(128|t>>>6&63)+q(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return q(240|t>>>18&7)+q(128|t>>>12&63)+q(128|t>>>6&63)+q(128|63&t)},Q=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ee=e=>e.replace(Q,J),te=$?e=>Buffer.from(e,"utf8").toString("base64"):H?e=>Z(H.encode(e)):e=>X(ee(e)),ne=(e,t=!1)=>t?Y(te(e)):te(e),ie=e=>{if(e=e.replace(/\s+/g,""),!z.test(e))throw new TypeError("malformed base64.");let t,n,i;e+="==".slice(2-(3&e.length));let r=[];for(let o=0;o<e.length;)t=j[e.charAt(o++)]<<18|j[e.charAt(o++)]<<12|(n=j[e.charAt(o++)])<<6|(i=j[e.charAt(o++)]),64===n?r.push(q(t>>16&255)):64===i?r.push(q(t>>16&255,t>>8&255)):r.push(q(t>>16&255,t>>8&255,255&t));return r.join("")},re=ne,oe=(F=d(),V=null!=F?e(o(F)):{},l(!U&&F&&F.__esModule?V:t(V,"default",{value:F,enumerable:!0}),F));function ae(){"use strict";ae=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new P(i||[]);return r(a,"_invoke",{value:C(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};c(w,a,function(){return this});var _=Object.getPrototypeOf,x=_&&_(_(D([])));x&&x!==n&&i.call(x,a)&&(w=x);var S=y.prototype=v.prototype=Object.create(w);function T(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(r,o,a,s){var l=d(e[r],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==ce(u)&&i.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t(function(t,r){n(e,i,t,r)})}return o=o?o.then(r,r):r()}})}function C(t,n,i){var r=h;return function(o,a){if(r===f)throw Error("Generator is already running");if(r===m){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var l=E(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var c=d(t,n,i);if("normal"===c.type){if(r=i.done?m:p,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=m,i.method="throw",i.arg=c.arg)}}}function E(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=d(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(ce(t)+" is not iterable")}return b.prototype=y,r(S,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new A(u(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},T(S),c(S,l,"Generator"),c(S,a,function(){return this}),c(S,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=D,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function se(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach(function(t){fe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fe(e,t,n){return(t=ge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ge(i.key),i)}}function ge(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=ce(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ce(t)?t:t+""}var ve="tus-v1",be="ietf-draft-03",ye="ietf-draft-05",we={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:ke,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:ve},_e=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return t=e,n=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then(function(t){return e._urlStorage.findUploadsByFingerprint(t)})}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if([ve,be,ye].includes(this.options.protocol))if(this.options.endpoint||this.options.uploadUrl||this.url){var n=this.options.retryDelays;if(null==n||"[object Array]"===Object.prototype.toString.call(n)){if(this.options.parallelUploads>1)for(var i=0,r=["uploadUrl","uploadSize","uploadLengthDeferred"];i<r.length;i++){var o=r[i];if(this.options[o])return void this._emitError(new Error("tus: cannot use the ".concat(o," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(t,this.options).then(function(n){return null==n||"Calculated fingerprint: ".concat(n),e._fingerprint=n,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)}).then(function(t){if(e._source=t,e.options.uploadLengthDeferred)e._size=null;else if(null!=e.options.uploadSize){if(e._size=Number(e.options.uploadSize),Number.isNaN(e._size))return void e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(e._size=e._source.size,null==e._size)return void e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()}).catch(function(t){e._emitError(t)})}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t,n=this,i=this._size,r=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,a=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function(e,t){for(var n=Math.floor(e/t),i=[],r=0;r<t;r++)i.push({start:n*r,end:n*(r+1)});return i[t-1].end=e,i}(this._source.size,o);this._parallelUploadUrls&&a.forEach(function(e,t){e.uploadUrl=n._parallelUploadUrls[t]||null}),this._parallelUploadUrls=new Array(a.length);var s,l=a.map(function(t,o){var s=0;return n._source.slice(t.start,t.end).then(function(l){var c=l.value;return new Promise(function(l,u){var d=pe(pe({},n.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:n.options.metadataForPartialUploads,headers:pe(pe({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:l,onError:u,onProgress:function(e){r=r-s+e,s=e,n._emitProgress(r,i)},onUploadUrlAvailable:function(){n._parallelUploadUrls[o]=h.url,n._parallelUploadUrls.filter(function(e){return Boolean(e)}).length===a.length&&n._saveUploadInUrlStorage()}}),h=new e(c,d);h.start(),n._parallelUploads.push(h)})})});Promise.all(l).then(function(){(s=n._openRequest("POST",n.options.endpoint)).setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var e=xe(n.options.metadata);return""!==e&&s.setHeader("Upload-Metadata",e),n._sendRequest(s,null)}).then(function(e){if(Se(e.getStatus(),200)){var t=e.getHeader("Location");null!=t?(n.url=Ie(n.options.endpoint,t),"Created upload at ".concat(n.url),n._emitSuccess(e)):n._emitHttpError(s,e,"tus: invalid or missing Location header")}else n._emitHttpError(s,e,"tus: unexpected response while creating upload")}).catch(function(e){n._emitError(e)})}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?("Resuming upload from previous URL: ".concat(this.url),void this._resumeUpload()):null!=this.options.uploadUrl?("Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,void this._resumeUpload()):void this._createUpload()}},{key:"abort",value:function(t){var n=this;if(null!=this._parallelUploads){var i,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ue(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this._parallelUploads);try{for(r.s();!(i=r.n()).done;)i.value.abort(t)}catch(o){r.e(o)}finally{r.f()}}return null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then(function(){return n._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,n,i){this._emitError(new M(n,i,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),Ee(e,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout(function(){t.start()},n))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(e){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess({lastResponse:e})}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length","1"):t.setHeader("Upload-Length","".concat(this._size));var n,i=xe(this.options.metadata);""!==i&&t.setHeader("Upload-Metadata",i),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(t)):(this.options.protocol!==be&&this.options.protocol!==ye||t.setHeader("Upload-Complete","?0"),n=this._sendRequest(t,null)),n.then(function(n){if(Se(n.getStatus(),200)){var i=n.getHeader("Location");if(null!=i){if(e.url=Ie(e.options.endpoint,i),"Created upload at ".concat(e.url),"function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),0===e._size)return e._emitSuccess(n),void e._source.close();e._saveUploadInUrlStorage().then(function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(t,n):(e._offset=0,e._performUpload())})}else e._emitHttpError(t,n,"tus: invalid or missing Location header")}else e._emitHttpError(t,n,"tus: unexpected response while creating upload")}).catch(function(n){e._emitHttpError(t,null,"tus: failed to create upload",n)})}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then(function(n){var i=n.getStatus();if(!Se(i,200))return 423===i?void e._emitHttpError(t,n,"tus: upload is currently locked; retry later"):(Se(i,400)&&e._removeFromUrlStorage(),e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var r=Number.parseInt(n.getHeader("Upload-Offset"),10);if(Number.isNaN(r))e._emitHttpError(t,n,"tus: invalid or missing offset value");else{var o=Number.parseInt(n.getHeader("Upload-Length"),10);!Number.isNaN(o)||e.options.uploadLengthDeferred||e.options.protocol!==ve?("function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),e._saveUploadInUrlStorage().then(function(){if(r===o)return e._emitProgress(o,o),void e._emitSuccess(n);e._offset=r,e._performUpload()})):e._emitHttpError(t,n,"tus: invalid or missing length value")}}).catch(function(n){e._emitHttpError(t,null,"tus: failed to resume upload",n)})}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset","".concat(this._offset)),this._addChunkToRequest(e).then(function(n){Se(n.getStatus(),200)?t._handleUploadResponse(e,n):t._emitHttpError(e,n,"tus: unexpected response while uploading chunk")}).catch(function(n){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),n)}))}},{key:"_addChunkToRequest",value:function(e){var t=this,n=this._offset,i=this._offset+this.options.chunkSize;return e.setProgressHandler(function(e){t._emitProgress(n+e,t._size)}),this.options.protocol===ve?e.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===ye&&e.setHeader("Content-Type","application/partial-upload"),(i===Number.POSITIVE_INFINITY||i>this._size)&&!this.options.uploadLengthDeferred&&(i=this._size),this._source.slice(n,i).then(function(n){var i=n.value,r=n.done,o=null!=i&&i.size?i.size:0;t.options.uploadLengthDeferred&&r&&(t._size=t._offset+o,e.setHeader("Upload-Length","".concat(t._size)));var a=t._offset+o;return!t.options.uploadLengthDeferred&&r&&a!==t._size?Promise.reject(new Error("upload was configured with a size of ".concat(t._size," bytes, but the source is done after ").concat(a," bytes"))):null===i?t._sendRequest(e):(t.options.protocol!==be&&t.options.protocol!==ye||e.setHeader("Upload-Complete",r?"?1":"?0"),t._emitProgress(t._offset,t._size),t._sendRequest(e,i))})}},{key:"_handleUploadResponse",value:function(e,t){var n=Number.parseInt(t.getHeader("Upload-Offset"),10);if(Number.isNaN(n))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n===this._size)return this._emitSuccess(t),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var n=Te(e,t,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(t){e._emitError(t)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then(function(t){e._urlStorageKey=t})}},{key:"_sendRequest",value:function(e){return Ae(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],i=[{key:"terminate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Te("DELETE",t,n);return Ae(i,null,n).then(function(e){if(204!==e.getStatus())throw new M("tus: unexpected response while terminating upload",null,i,e)}).catch(function(r){if(r instanceof M||(r=new M("tus: failed to terminate upload",r,i,null)),!Ee(r,0,n))throw r;var o=n.retryDelays[0],a=n.retryDelays.slice(1),s=pe(pe({},n),{},{retryDelays:a});return new Promise(function(e){return setTimeout(e,o)}).then(function(){return e.terminate(t,s)})})}}],n&&me(t.prototype,n),i&&me(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();function xe(e){return Object.entries(e).map(function(e){var t=le(e,2),n=t[0],i=t[1];return"".concat(n," ").concat(re(String(i)))}).join(",")}function Se(e,t){return e>=t&&e<t+100}function Te(e,t,n){var i=n.httpStack.createRequest(e,t);n.protocol===be?i.setHeader("Upload-Draft-Interop-Version","5"):n.protocol===ye?i.setHeader("Upload-Draft-Interop-Version","6"):i.setHeader("Tus-Resumable","1.0.0");for(var r=n.headers||{},o=0,a=Object.entries(r);o<a.length;o++){var s=le(a[o],2),l=s[0],c=s[1];i.setHeader(l,c)}if(n.addRequestId){var u="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});i.setHeader("X-Request-ID",u)}return i}function Ae(e,t,n){return Ce.apply(this,arguments)}function Ce(){var e;return e=ae().mark(function e(t,n,i){var r;return ae().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof i.onBeforeRequest){e.next=3;break}return e.next=3,i.onBeforeRequest(t);case 3:return e.next=5,t.send(n);case 5:if(r=e.sent,"function"!=typeof i.onAfterResponse){e.next=9;break}return e.next=9,i.onAfterResponse(t,r);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}),Ce=function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function a(e){se(o,i,r,a,s,"next",e)}function s(e){se(o,i,r,a,s,"throw",e)}a(void 0)})},Ce.apply(this,arguments)}function Ee(e,t,n){return!(null==n.retryDelays||t>=n.retryDelays.length||null==e.originalRequest)&&(n&&"function"==typeof n.onShouldRetry?n.onShouldRetry(e,t,n):ke(e))}function ke(e){var t,n=e.originalResponse?e.originalResponse.getStatus():0;return(!Se(n,400)||409===n||423===n)&&(t=!0,"undefined"!=typeof navigator&&!1===navigator.onLine&&(t=!1),t)}function Ie(e,t){return new oe.default(t,e).toString()}_e.defaultOptions=we;var Pe=_e,De=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function Oe(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.responseType="blob",i.onload=function(){var e=i.response;t(e)},i.onerror=function(e){n(e)},i.open("GET",e),i.send()})}var Me=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ne(i.key),i)}}function Ne(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Le(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}var Fe=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size},(t=[{key:"slice",value:function(e,t){if(Me())return n=this._file.slice(e,t),new Promise(function(e,t){var i=new FileReader;i.onload=function(){var t=new Uint8Array(i.result);e({value:t})},i.onerror=function(e){t(e)},i.readAsArrayBuffer(n)});var n,i=this._file.slice(e,t),r=t>=this.size;return Promise.resolve({value:i,done:r})}},{key:"close",value:function(){}}])&&Re(e.prototype,t),n&&Re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Be(i.key),i)}}function Be(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Ue(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ue(t)?t:t+""}function $e(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var He=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1},(t=[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var n=this,i=t<=this._bufferOffset+$e(this._buffer);if(this._done||i){var r=this._getDataFromBuffer(e,t),o=null==r&&this._done;return Promise.resolve({value:r,done:o})}return this._reader.read().then(function(i){var r=i.value;return i.done?n._done=!0:void 0===n._buffer?n._buffer=r:n._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(n._buffer,r),n._readUntilEnoughDataOrDone(e,t)})}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===$e(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&Ve(e.prototype,t),n&&Ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(){"use strict";je=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new P(i||[]);return r(a,"_invoke",{value:C(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};c(w,a,function(){return this});var _=Object.getPrototypeOf,x=_&&_(_(D([])));x&&x!==n&&i.call(x,a)&&(w=x);var S=y.prototype=v.prototype=Object.create(w);function T(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(r,o,a,s){var l=d(e[r],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Ge(u)&&i.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t(function(t,r){n(e,i,t,r)})}return o=o?o.then(r,r):r()}})}function C(t,n,i){var r=h;return function(o,a){if(r===f)throw Error("Generator is already running");if(r===m){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var l=E(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var c=d(t,n,i);if("normal"===c.type){if(r=i.done?m:p,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=m,i.method="throw",i.arg=c.arg)}}}function E(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=d(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ge(t)+" is not iterable")}return b.prototype=y,r(S,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new A(u(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},T(S),c(S,l,"Generator"),c(S,a,function(){return this}),c(S,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=D,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function ze(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ye(i.key),i)}}function Ye(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Ge(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ge(t)?t:t+""}var We=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"openFile",value:(i=je().mark(function e(t,n){var i;return je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!De()||!t||void 0===t.uri){e.next=11;break}return e.prev=1,e.next=4,Oe(t.uri);case 4:return i=e.sent,e.abrupt("return",new Fe(i));case 8:throw e.prev=8,e.t0=e.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e.t0));case 11:if("function"!=typeof t.slice||void 0===t.size){e.next=13;break}return e.abrupt("return",Promise.resolve(new Fe(t)));case 13:if("function"!=typeof t.read){e.next=18;break}if(n=Number(n),Number.isFinite(n)){e.next=17;break}return e.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return e.abrupt("return",Promise.resolve(new He(t,n)));case 18:return e.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return e.stop()}},e,null,[[1,8]])}),r=function(){var e=this,t=arguments;return new Promise(function(n,r){var o=i.apply(e,t);function a(e){ze(o,n,r,a,s,"next",e)}function s(e){ze(o,n,r,a,s,"throw",e)}a(void 0)})},function(e,t){return r.apply(this,arguments)})}],t&&qe(e.prototype,t),n&&qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,i,r}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Qe(i.key),i)}}function Je(e,t,n){return t&&Ze(e.prototype,t),n&&Ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qe(e){var t=function(e,t){if("object"!=Ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Ke(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ke(t)?t:t+""}var et=function(){return Je(function e(){Xe(this,e)},[{key:"createRequest",value:function(e,t){return new tt(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}])}(),tt=function(){return Je(function e(t,n){Xe(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,n,!0),this._method=t,this._url=n,this._headers={}},[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(n,i){e._xhr.onload=function(){n(new nt(e._xhr))},e._xhr.onerror=function(e){i(e)},e._xhr.send(t)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}(),nt=function(){return Je(function e(t){Xe(this,e),this._xhr=t},[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}();function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ot(i.key),i)}}function ot(e){var t=function(e,t){if("object"!=it(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=it(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==it(t)?t:t+""}var at,st,lt=!1;try{lt="localStorage"in window,at="tusSupport",st=localStorage.getItem(at),localStorage.setItem(at,st),null===st&&localStorage.removeItem(at)}catch(n){if(n.code!==n.SECURITY_ERR&&n.code!==n.QUOTA_EXCEEDED_ERR)throw n;lt=!1}var ct=lt,ut=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var n=Math.round(1e12*Math.random()),i="tus::".concat(e,"::").concat(n);return localStorage.setItem(i,JSON.stringify(t)),Promise.resolve(i)}},{key:"_findEntries",value:function(e){for(var t=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);if(0===i.indexOf(e))try{var r=JSON.parse(localStorage.getItem(i));r.urlStorageKey=i,t.push(r)}catch(o){}}return t}}],t&&rt(e.prototype,t),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,wt(i.key),i)}}function pt(e,t,n){return t=mt(t),function(e,t){if(t&&("object"===dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ft()?Reflect.construct(t,n||[],mt(e).constructor):t.apply(e,n))}function ft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ft=function(){return!!e})()}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach(function(t){yt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yt(e,t,n){return(t=wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){var t=function(e,t){if("object"!=dt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=dt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dt(t)?t:t+""}var _t=bt(bt({},Pe.defaultOptions),{},{httpStack:new et,fileReader:new We,urlStorage:ct?new ut:new B,fingerprint:function(e,t){return De()?Promise.resolve(function(e,t){var n=e.exif?function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),xt=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pt(this,t,[e,n=bt(bt({},_t),n)])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gt(e,t)}(t,e),n=t,r=[{key:"terminate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=bt(bt({},_t),t),Pe.terminate(e,t)}}],(i=null)&&ht(n.prototype,i),r&&ht(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,r}(Pe),St=("function"==typeof XMLHttpRequest&&"function"==typeof Blob&&Blob.prototype.slice,"4.3.2");function Tt(e){return(t,n)=>{if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)||"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return _t.fingerprint(t,n);const i=["tus",e.id,n.endpoint].join("-");return Promise.resolve(i)}}var At={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},Ct={limit:20,retryDelays:At.retryDelays,withCredentials:!1,allowedMetaFields:!0},Et=class extends v{static VERSION=St;#W;requests;uploaders;uploaderEvents;constructor(e,t){if(super(e,{...Ct,...t}),this.type="uploader",this.id=this.opts.id||"Tus",void 0===t?.allowedMetaFields&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in t)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=this.opts.rateLimitedQueue??new S(this.opts.limit),this.#W=this.opts.retryDelays?.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(e,t){const n=this.uploaders[e];n&&(n.abort(),t?.abort&&n.abort(!0),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}#K(e){return this.resetUploaderReferences(e.id),new Promise((t,n)=>{let i,r,o;const a={...this.opts,...e.tus||{}};"function"==typeof a.headers&&(a.headers=a.headers(e));const{onShouldRetry:s,onBeforeRequest:l,...c}=a,u={...At,...c};u.fingerprint=Tt(e),u.onBeforeRequest=async t=>{let n;if(t.getUnderlyingObject().withCredentials=!!a.withCredentials,"function"==typeof l&&(n=l(t,e)),y(i,"shouldBeRequeued")){if(!i.shouldBeRequeued)return Promise.reject();let t;const r=new Promise(e=>{t=e});return i=this.requests.run(()=>(e.isPaused&&i.abort(),t(),()=>{})),void(await Promise.all([r,n]))}return n},u.onError=t=>{this.uppy.log(t);const r=null!=t.originalRequest?t.originalRequest.getUnderlyingObject():null;w(r)&&(t=new _(t,r)),this.resetUploaderReferences(e.id),i?.abort(),"function"==typeof a.onError&&a.onError(t),n(t)},u.onProgress=(t,n)=>{this.onReceiveUploadUrl(e,o.url),"function"==typeof a.onProgress&&a.onProgress(t,n);const i=this.uppy.getFile(e.id);this.uppy.emit("upload-progress",i,{uploadStarted:i.progress.uploadStarted??0,bytesUploaded:t,bytesTotal:n})},u.onSuccess=n=>{const r={uploadURL:o.url??void 0,status:200,body:{xhr:n.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(e.id),r),this.resetUploaderReferences(e.id),i.done(),o.url){const{name:e}=o.file;this.uppy.log(`Download ${e} from ${o.url}`)}"function"==typeof a.onSuccess&&a.onSuccess(n),t(o)};const d=e=>{const t=e?.originalResponse?.getStatus();if(429===t){if(!this.requests.isPaused){const e=this.#W?.next();if(null==e||e.done)return!1;this.requests.rateLimit(e.value)}}else{if(null!=t&&t>=400&&t<500&&409!==t&&423!==t)return!1;"undefined"!=typeof navigator&&!1===navigator.onLine&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return i.abort(),i={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};u.onShouldRetry=null!=s?(e,t)=>s(e,t,a,d):d;const h=(e,t,n)=>{y(e,t)&&!y(e,n)&&(e[n]=e[t])},p={},f=function(e,t){return!0===e?Object.keys(t):Array.isArray(e)?e:[]}(a.allowedMetaFields,e.meta);f.forEach(t=>{p[t]=String(e.meta[t])}),h(p,"type","filetype"),h(p,"name","filename"),u.metadata=p,o=new xt(e.data,u),this.uploaders[e.id]=o;const m=new b(this.uppy);this.uploaderEvents[e.id]=m,r=()=>(e.isPaused||o.start(),()=>{}),o.findPreviousUploads().then(t=>{const n=t[0];n&&(this.uppy.log(`[Tus] Resuming upload of ${e.id} started at ${n.creationTime}`),o.resumeFromPreviousUpload(n)),i=this.requests.run(r)}),m.onFileRemove(e.id,n=>{i.abort(),this.resetUploaderReferences(e.id,{abort:!!o.url}),t(`upload ${n} was removed`)}),m.onPause(e.id,e=>{i.abort(),e?o.abort():i=this.requests.run(r)}),m.onPauseAll(e.id,()=>{i.abort(),o.abort()}),m.onCancelAll(e.id,()=>{i.abort(),this.resetUploaderReferences(e.id,{abort:!!o.url}),t(`upload ${e.id} was canceled`)}),m.onResumeAll(e.id,()=>{i.abort(),e.error&&o.abort(),i=this.requests.run(r)})}).catch(t=>{throw this.uppy.emit("upload-error",e,t),t})}onReceiveUploadUrl(e,t){const n=this.uppy.getFile(e.id);n&&(n.tus&&n.tus.uploadUrl===t||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(n.id,{tus:{...n.tus,uploadUrl:t}})))}#X(e){const t={...this.opts};return e.tus&&Object.assign(t,e.tus),"function"==typeof t.headers&&(t.headers=t.headers(e)),{...e.remote?.body,endpoint:t.endpoint,uploadUrl:t.uploadUrl,protocol:"tus",size:e.data.size,headers:t.headers,metadata:e.meta}}async#Z(e){const t=function(e){return e.filter(e=>!(e=>"error"in e&&!!e.error)(e))}(e),n=function(e){return e.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}(t);this.uppy.emit("upload-start",n),await Promise.allSettled(t.map(e=>{if(e.isRemote){const t=()=>this.requests,n=new AbortController,i=t=>{t.id===e.id&&n.abort()};this.uppy.on("file-removed",i);const r=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,this.#X(e),{signal:n.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",i)},{priority:-1})(),r}return this.#K(e)}))}#J=async e=>{if(0===e.length)return void this.uppy.log("[Tus] No files to upload");0===this.opts.limit&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const t=this.uppy.getFilesByIds(e);await this.#Z(t)};install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(this.#J)}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(this.#J)}};return(e=>l(t({},"__esModule",{value:!0}),e))(h)})();
/*! Bundled license information:

@uppy/utils/lib/Translator.js:
  (**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param phrase that needs interpolation, with placeholders
   * @param options with values that will be used to replace placeholders
   *)

tus-js-client/lib.esm/upload.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)

tus-js-client/lib.esm/browser/fileReader.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/return e}),define("@uppy/xhr-upload",[],function(){
/*! Bundled license information:

@uppy/utils/lib/Translator.js:
  (**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param phrase that needs interpolation, with placeholders
   * @param options with values that will be used to replace placeholders
   *)
*/
return(()=>{var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,r={};function o(e,t,n){const i=[];return e.forEach(e=>"string"!=typeof e?i.push(e):t[Symbol.split](e).forEach((e,t,r)=>{""!==e&&i.push(e),t<r.length-1&&i.push(n)})),i}function a(e,t){const n=/\$/g;let i=[e];if(null==t)return i;for(const r of Object.keys(t))if("_"!==r){let e=t[r];"string"==typeof e&&(e=n[Symbol.replace](e,"$$$$")),i=o(i,new RegExp(`%\\{${r}\\}`,"g"),e)}return i}((t,n)=>{for(var i in n)e(t,i,{get:n[i],enumerable:!0})})(r,{default:()=>A});var s=e=>{throw new Error(`missing string: ${e}`)},l=class{locale;constructor(e,{onMissingKey:t=s}={}){this.locale={strings:{},pluralize:e=>1===e?0:1},Array.isArray(e)?e.forEach(this.#e,this):this.#e(e),this.#t=t}#t;#e(e){if(!e?.strings)return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let n=this.locale.strings[e];null==n&&(this.#t(e),n=e);if("object"==typeof n){if(t&&void 0!==t.smart_count){return a(n[this.locale.pluralize(t.smart_count)],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof n)throw new Error("string was not a string");return a(n,t)}},c=class{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new l([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}},u=class{#O;#M=[];constructor(e){this.#O=e}on(e,t){return this.#M.push([e,t]),this.#O.on(e,t)}remove(){for(const[e,t]of this.#M.splice(0))this.#O.off(e,t)}onFilePause(e,t){this.on("upload-pause",(n,i)=>{e===n?.id&&t(i)})}onFileRemove(e,t){this.on("file-removed",n=>{e===n.id&&t(n.id)})}onPause(e,t){this.on("upload-pause",(n,i)=>{e===n?.id&&t(i)})}onRetry(e,t){this.on("upload-retry",n=>{e===n?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{this.#O.getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{this.#O.getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...n)=>{this.#O.getFile(e)&&t(...n)})}onResumeAll(e,t){this.on("resume-all",()=>{this.#O.getFile(e)&&t()})}},d=class extends Error{cause;isNetworkError;request;constructor(e,t=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}},h=class{#Q;#ee=!1;#te;#ne;constructor(e,t){this.#ne=e,this.#te=()=>t(e)}progress(){this.#ee||this.#ne>0&&(clearTimeout(this.#Q),this.#Q=setTimeout(this.#te,this.#ne))}done(){this.#ee||(clearTimeout(this.#Q),this.#Q=void 0,this.#ee=!0)}},p=()=>{};function f(e,t){return!0===e?Object.keys(t):Array.isArray(e)?e:[]}var m=function(e){return!!e&&(0!==e.readyState&&4!==e.readyState||0===e.status)};function g(e){if(null!=e){const t=()=>this.abort(e.reason);e.addEventListener("abort",t,{once:!0});const n=()=>{e.removeEventListener("abort",t)};this.then?.(n,n)}return this}var v=class{#L=0;#R=[];#N=!1;#F;#U=1;#V;#B;limit;constructor(e){this.limit="number"!=typeof e||0===e?1/0:e}#$(e){this.#L+=1;let t,n=!1;try{t=e()}catch(i){throw this.#L-=1,i}return{abort:e=>{n||(n=!0,this.#L-=1,t?.(e),this.#H())},done:()=>{n||(n=!0,this.#L-=1,this.#H())}}}#H(){queueMicrotask(()=>this.#G())}#G(){if(this.#N||this.#L>=this.limit)return;if(0===this.#R.length)return;const e=this.#R.shift();if(null==e)throw new Error("Invariant violation: next is null");const t=this.#$(e.fn);e.abort=t.abort,e.done=t.done}#j(e,t){const n={fn:e,priority:t?.priority||0,abort:()=>{this.#z(n)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=this.#R.findIndex(e=>n.priority>e.priority);return-1===i?this.#R.push(n):this.#R.splice(i,0,n),n}#z(e){const t=this.#R.indexOf(e);-1!==t&&this.#R.splice(t,1)}run(e,t){return!this.#N&&this.#L<this.limit?this.#$(e):this.#j(e,t)}wrapSyncFunction(e,t){return(...n)=>{const i=this.run(()=>(e(...n),queueMicrotask(()=>i.done()),()=>{}),t);return{abortOn:g,abort(){i.abort()}}}}wrapPromiseFunction(e,t){return(...n)=>{let i;const r=new Promise((r,o)=>{i=this.run(()=>{let t,a;try{a=Promise.resolve(e(...n))}catch(s){a=Promise.reject(s)}return a.then(e=>{t?o(t):(i.done(),r(e))},e=>{t?o(t):(i.done(),o(e))}),e=>{t=function(e){return new Error("Cancelled",{cause:e})}(e)}},t)});return r.abort=e=>{i.abort(e)},r.abortOn=g,r}}resume(){this.#N=!1,clearTimeout(this.#F);for(let e=0;e<this.limit;e++)this.#H()}#q=()=>this.resume();pause(e=null){this.#N=!0,clearTimeout(this.#F),null!=e&&(this.#F=setTimeout(this.#q,e))}rateLimit(e){clearTimeout(this.#B),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(this.#V=this.limit-1,this.limit=this.#U,this.#B=setTimeout(this.#Y,e))}#Y=()=>{if(this.#N)this.#B=setTimeout(this.#Y,0);else{this.#U=this.limit,this.limit=Math.ceil((this.#V+this.#U)/2);for(let e=this.#U;e<=this.limit;e++)this.#H();this.#V-this.#U>3?this.#B=setTimeout(this.#Y,2e3):this.#U=Math.floor(this.#U/2)}};get isPaused(){return this.#N}},b=Symbol("__queue"),y="4.4.2",w={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function _(e,t){let n=t;return n||(n=new Error("Upload error")),"string"==typeof n&&(n=new Error(n)),n instanceof Error||(n=Object.assign(new Error("Upload error"),{data:n})),m(e)?(n=new d(n,e),n):(n.request=e,n)}function x(e){return e.data.slice(0,e.data.size,e.meta.type)}var S,T={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:3e4,limit:5,withCredentials:!1,responseType:""},A=class extends c{static VERSION=y;#ie;requests;uploaderEvents;constructor(e,t){if(super(e,{...T,fieldName:t.bundle?"files[]":"file",...t}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=w,this.i18nInit(),b in this.opts?this.requests=this.opts[b]:this.requests=new v(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&"function"==typeof this.opts.headers)throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if(void 0===t?.allowedMetaFields&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),this.#ie=e=>async(t,n)=>{try{const r=await function(e,t={}){const{body:n=null,headers:i={},method:r="GET",onBeforeRequest:o=p,onUploadProgress:a=p,shouldRetry:s=()=>!0,onAfterResponse:l=p,onTimeout:c=p,responseType:u,retries:f=3,signal:m=null,timeout:g=3e4,withCredentials:v=!1}=t,b=e=>.3*2**(e-1)*1e3,y=new h(g,c);return function t(c=0){return new Promise(async(h,p)=>{const g=new XMLHttpRequest,w=e=>{s(g)&&c<f?setTimeout(()=>{t(c+1).then(h,p)},b(c)):(y.done(),p(e))};g.open(r,e,!0),g.withCredentials=v,u&&(g.responseType=u),m?.addEventListener("abort",()=>{g.abort(),p(new DOMException("Aborted","AbortError"))}),g.onload=async()=>{try{await l(g,c)}catch(e){return e.request=g,void w(e)}g.status>=200&&g.status<300?(y.done(),h(g)):s(g)&&c<f?setTimeout(()=>{t(c+1).then(h,p)},b(c)):(y.done(),p(new d(g.statusText,g)))},g.onerror=()=>w(new d(g.statusText,g)),g.upload.onprogress=e=>{y.progress(),a(e)},i&&Object.keys(i).forEach(e=>{g.setRequestHeader(e,i[e])}),await o(g,c),g.send(n)})}()}(t,{...n,onBeforeRequest:(t,n)=>this.opts.onBeforeRequest?.(t,n,e),shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:t=>{const n=Math.ceil(t/1e3),i=new Error(this.i18n("uploadStalled",{seconds:n}));this.uppy.emit("upload-stalled",i,e)},onUploadProgress:t=>{if(t.lengthComputable)for(const{id:n}of e){const e=this.uppy.getFile(n);this.uppy.emit("upload-progress",e,{uploadStarted:e.progress.uploadStarted??0,bytesUploaded:t.loaded/t.total*e.size,bytesTotal:e.size})}}});let o=await(this.opts.getResponseData?.(r));if("json"===r.responseType)o??=r.response;else try{o??=JSON.parse(r.responseText)}catch(i){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:i})}const a="string"==typeof o?.url?o.url:void 0;for(const{id:t}of e)this.uppy.emit("upload-success",this.uppy.getFile(t),{status:r.status,body:o,uploadURL:a});return r}catch(r){if("AbortError"===r.name)return;const t=r.request;for(const n of e)this.uppy.emit("upload-error",this.uppy.getFile(n.id),_(t,r),t);throw r}}}getOptions(e){const t=this.uppy.getState().xhrUpload,{headers:n}=this.opts,i={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return"function"==typeof n?i.headers=n(e):Object.assign(i.headers,this.opts.headers),t&&Object.assign(i.headers,t.headers),e.xhrUpload&&Object.assign(i.headers,e.xhrUpload.headers),i}addMetadata(e,t,n){f(n.allowedMetaFields,t).forEach(n=>{const i=t[n];Array.isArray(i)?i.forEach(t=>e.append(n,t)):e.append(n,i)})}createFormDataUpload(e,t){const n=new FormData;this.addMetadata(n,e.meta,t);const i=x(e);return e.name?n.append(t.fieldName,i,e.meta.name):n.append(t.fieldName,i),n}createBundledUpload(e,t){const n=new FormData,{meta:i}=this.uppy.getState();return this.addMetadata(n,i,t),e.forEach(e=>{const t=this.getOptions(e),i=x(e);e.name?n.append(t.fieldName,i,e.name):n.append(t.fieldName,i)}),n}async#K(e){const t=new u(this.uppy),n=new AbortController,i=this.requests.wrapPromiseFunction(async()=>{const t=this.getOptions(e),i=this.#ie([e]),r=t.formData?this.createFormDataUpload(e,t):e.data;return i("string"==typeof t.endpoint?t.endpoint:await t.endpoint(e),{...t,body:r,signal:n.signal})});t.onFileRemove(e.id,()=>n.abort()),t.onCancelAll(e.id,()=>{n.abort()});try{await i().abortOn(n.signal)}catch(r){if("Cancelled"!==r.message)throw r}finally{t.remove()}}async#re(e){const t=new AbortController,n=this.requests.wrapPromiseFunction(async()=>{const n=this.uppy.getState().xhrUpload??{},i=this.#ie(e),r=this.createBundledUpload(e,{...this.opts,...n});return i("string"==typeof this.opts.endpoint?this.opts.endpoint:await this.opts.endpoint(e),{...this.opts,body:r,signal:t.signal})});function i(){t.abort()}this.uppy.once("cancel-all",i);try{await n().abortOn(t.signal)}catch(r){if("Cancelled"!==r.message)throw r}finally{this.uppy.off("cancel-all",i)}}#X(e){const t=this.getOptions(e),n=f(t.allowedMetaFields,e.meta);return{...e.remote?.body,protocol:"multipart",endpoint:t.endpoint,size:e.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(n.map(t=>[t,e.meta[t]])),httpMethod:t.method,useFormData:t.formData,headers:t.headers}}async#Z(e){await Promise.allSettled(e.map(e=>{if(e.isRemote){const t=()=>this.requests,n=new AbortController,i=t=>{t.id===e.id&&n.abort()};this.uppy.on("file-removed",i);const r=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,this.#X(e),{signal:n.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",i)},{priority:-1})(),r}return this.#K(e)}))}#J=async e=>{if(0===e.length)return void this.uppy.log("[XHRUpload] No files to upload!");0!==this.opts.limit||this.opts[b]||this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const t=function(e){return e.filter(e=>!(e=>"error"in e&&!!e.error)(e))}(this.uppy.getFilesByIds(e)),n=function(e){return e.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}(t);if(this.uppy.emit("upload-start",n),this.opts.bundle){if(t.some(e=>e.isRemote))throw new Error("Can’t upload remote files when the `bundle: true` option is set");if("function"==typeof this.opts.headers)throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await this.#re(t)}else await this.#Z(t)};install(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(this.#J)}uninstall(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(this.#J)}};return S=r,((r,o,a,s)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let l of n(o))i.call(r,l)||l===a||e(r,l,{get:()=>o[l],enumerable:!(s=t(o,l))||s.enumerable});return r})(e({},"__esModule",{value:!0}),S)})()}),define("Core/Resource",["./defaultValue","./defer","@uppy/core","@uppy/tus","@uppy/xhr-upload","Core/AppData"],function(e,t,n,i,r,o){"use strict";Cesium.Check;const a=Cesium.clone,s=Cesium.defined,l=Cesium.RequestErrorEvent,c=Cesium.Resource,u=Cesium.TrustedServers;return c._ionSendJson=async function(t,n){n=a(n);let i=e(n.data,null);"object"==typeof i&&(i=JSON.stringify(i)),n.data=i;let r=n.headers;s(r)||(r={},n.headers=r),r.Accept=e(r.Accept,"application/json,*/*;q=0.01"),r["Content-Type"]=e(r["Content-Type"],"application/json");const o=await t(n);return o?JSON.parse(o):o},c.patchJson=async function(e){return c._ionSendJson(c.patch,e)},c.postJson=async function(e){return c._ionSendJson(c.post,e)},c.putJson=async function(e){return c._ionSendJson(c.put,e)},c.deleteJson=async function(e){return c._ionSendJson(c.delete,e)},c._addFile=function(t,n){const i=n.body,r=e(i.__ionKey,i.name),o=t.addFile({name:r,meta:{filename:i.name},data:i});t.setFileState(o,{xhrUpload:{fieldName:r}})},c._useTus=function(e,t){e.use(i.default,{endpoint:t,withCredentials:!0,uploadDataDuringCreation:!0,chunkSize:o.fileSystemUploadMaxChunkSize})},c._useXHR=function(e,t){e.use(r.default,{endpoint:t,withCredentials:!0,bundle:!0,getResponseData:()=>({url:t})})},c._startUpload=function(e,t){return new Promise((n,i)=>{e.on("complete",n),e.on("error",i),e.on("upload-progress",(e,n)=>t({loaded:n.bytesUploaded,total:n.bytesTotal})),e.upload()})},c.sendFiles=function(e){const t=e.url,i=e.files,r=e.progressFunction,a=new n.Uppy;for(let n=0;n<i.length;n++){const e=i[n];0!==e.size&&c._addFile(a,e)}o.fileSystemUploadMaxChunkSize?c._useTus(a,t):c._useXHR(a,t);return{promise:c._startUpload(a,r),request:{abort:a.cancelAll}}},c.simpleFetch=async function(e,n){const i=t(),r=new XMLHttpRequest;return u.contains(e)&&(r.withCredentials=!0),r.open("GET",e,!0),s(n)&&(r.responseType=n),r.onload=function(){r.status<200||r.status>=300?i.reject(new l(r.status,r.response,r.getAllResponseHeaders())):i.resolve(r)},r.onerror=function(){i.reject(new l)},r.send(),i.promise},c}),define("Core/TeamRole",[],function(){"use strict";Cesium.DeveloperError;const e={OWNER:"OWNER",MEMBER:"MEMBER",toString:function(t){return t===e.OWNER?"Owner":t===e.MEMBER?"Member":void 0}};return Object.freeze(e)}),define("generated/ClientErrorCodes",["require","exports","module","./getEnumValues"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientErrorCodes=void 0,t.isValidClientErrorCode=function(e){return o.some(t=>t===e)};const i=e("./getEnumValues");var r;!function(e){e.NEW_OWNER_NOT_FOUND="NEW_OWNER_NOT_FOUND",e.USER_NAME_CONFLICT="USER_NAME_CONFLICT",e.INVALID_SAML_NAME_ID_FORMAT="INVALID_SAML_NAME_ID_FORMAT",e.INVALID_SAML_RESPONSE="INVALID_SAML_RESPONSE",e.TOO_MANY_FAILED_LOGIN_ATTEMPTS="TOO_MANY_FAILED_LOGIN_ATTEMPTS",e.WEAK_PASSWORD="WEAK_PASSWORD",e.ACCOUNT_DISABLED="ACCOUNT_DISABLED",e.INVALID_TOKEN="INVALID_TOKEN",e.INVITATION_NOT_FOUND="INVITATION_NOT_FOUND",e.INVITATION_FOR_DIFFERENT_ACCOUNT="INVITATION_FOR_DIFFERENT_ACCOUNT",e.ACCOUNT_ALREADY_LINKED="ACCOUNT_ALREADY_LINKED",e.TEAM_SIGN_IN_ATTEMPT="TEAM_SIGN_IN_ATTEMPT",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.READONLY_MAINTENANCE="READONLY_MAINTENANCE",e.CANNOT_MOVE_BETWEEN_DATA_CENTERS="CANNOT_MOVE_BETWEEN_DATA_CENTERS"}(r||(t.ClientErrorCodes=r={}));const o=(0,i.getEnumValues)(r)}),define("Core/isStringEmptyOrWhitespace",[],function(){"use strict";Cesium.defined,Cesium.DeveloperError;return function(e){return/^\s*$/g.test(e)}}),define("generated/SignInStatus",["require","exports","module"],function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SignInStatus=void 0,function(e){e.COMPLETE="COMPLETE",e.SECOND_FACTOR="SECOND_FACTOR",e.SIGN_UP="SIGN_UP"}(i||(t.SignInStatus=i={}))}),define("generated/LicenseSignature",["require","exports","module"],function(e,t,n){"use strict";var i;function r(e){return e instanceof Date||void 0===e?e:null!==e?new Date(e):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.isStandard=t.UserLicenseSignature=t.LicenseAgreementType=void 0,function(e){e.STANDARD="STANDARD",e.CUSTOM="CUSTOM"}(i||(t.LicenseAgreementType=i={}));t.UserLicenseSignature=class{constructor(e){this.id=e.id,this.userId=e.userId,this.licenseType=e.licenseType,this.licenseVersion=e.licenseVersion,this.forced=e.forced,this.licenseeName=e.licenseeName,this.licenseeEmail=e.licenseeEmail,this.acceptanceDate=r(e.acceptanceDate),this.gracePeriodExpires=r(e.gracePeriodExpires),this.customExpires=r(e.customExpires)}};t.isStandard=e=>e.licenseType===i.STANDARD}),define("Core/PlanCode",[],function(){"use strict";const e={COMMUNITY:"COMMUNITY",COMMERCIAL:"COMMERCIAL",PREMIUM:"PREMIUM",ANNUAL_COMMERCIAL:"ANNUAL_COMMERCIAL",ANNUAL_PREMIUM:"ANNUAL_PREMIUM",PROMO_COMMERCIAL:"PROMO_COMMERCIAL",PROMO_PREMIUM:"PROMO_PREMIUM",PO_COMMERCIAL:"PO_COMMERCIAL",PO_PREMIUM:"PO_PREMIUM",PO_E365_PREMIUM:"PO_E365_PREMIUM",getNonCustomOptions:function(){return[e.COMMUNITY,e.COMMERCIAL,e.PREMIUM,e.ANNUAL_COMMERCIAL,e.ANNUAL_PREMIUM]},hasExpiration:function(t){return t===e.PROMO_COMMERCIAL||t===e.PROMO_PREMIUM||t===e.PO_COMMERCIAL||t===e.PO_PREMIUM||t===e.PO_E365_PREMIUM},isPurchaseOrderPlan:function(t){return t===e.PO_COMMERCIAL||t===e.PO_PREMIUM||t===e.PO_E365_PREMIUM},isPromoPlan:function(t){return t===e.PROMO_COMMERCIAL||t===e.PROMO_PREMIUM},isRecurring:function(t){return t===e.COMMERCIAL||t===e.PREMIUM||t===e.ANNUAL_COMMERCIAL||t===e.ANNUAL_PREMIUM}};return Object.freeze(e)}),define("Core/Services",["./Analytics","./AppData","./CookieBanner","./decodeJwtPayload","./defaultValue","./Feature","./Resource","./TeamRole","generated/ClientErrorCodes","./isStringEmptyOrWhitespace","generated/SignInStatus","knockout","generated/LicenseSignature","Core/PlanCode"],function(e,t,i,r,o,a,s,l,c,u,d,h,p,f){"use strict";const m=Cesium.Check,g=Cesium.Credit,v=Cesium.defined,b=Cesium.DeveloperError,y=Cesium.Ion,w=Cesium.Matrix4,_=Cesium.TrustedServers,x=Cesium.BingMapsImageryProvider,S=Cesium.CreditDisplay,T=d.SignInStatus,A=window.location.protocol,C=window.location.hostname;let E=`api.${C}`;"ion-staging.cesium.com"===C?E="api-staging.cesium.com":"ion.cesium.com"===C&&(E="api.cesium.com");let k,I=Number(window.location.port);(isNaN(I)||0===I)&&(I="https:"===A?443:80),ge(E);const P={code:"InternalServer",message:"Internal server error"};let D,O,M;const L=h.observable(!1),R=h.observable(!1),N=h.observable(""),F=h.observable(""),U=h.observable(!1),V=h.observable(""),B=h.observable(!1),$=h.observable(""),H=h.observable(""),G=h.observable(!1),j=h.observable(!1),z=h.observable(""),q=h.observable(""),Y=h.observable(""),W=h.observable(""),K=h.observable(""),X=h.observable(!1),Z=h.observable(),J=h.observable("false"),Q=h.observable(""),ee=h.observableArray([]),te=h.observable(""),ne=h.observable(void 0),ie=h.observable(!1),re=h.observable(!1),oe=h.observable(a.UNAUTHENTICATED_USER_CONTEXT);a.userContext=a.UNAUTHENTICATED_USER_CONTEXT;const ae=h.observable(void 0);ae.subscribe(e=>a.userContext=v(e)?e:a.UNAUTHENTICATED_USER_CONTEXT);const se=h.pureComputed(function(){const{signature:{acceptanceDate:e,licenseVersion:n}={}}=ae()??{};return v(e)&&n===t.licenseInfo.standardLicenseVersion}),le=h.pureComputed(function(){return ae()?.signature});async function ce(t){if(y.defaultAccessToken=void 0,!v(t))return ae(void 0),void ue();if(!v(t.token))return void ae(void 0);ae(t),L(!0),i.hide();const n=r(t.token),o=-1!==n.scopes.indexOf("admn");if(D=t,O=new Date(t.lastLogIn),t.id=n.id,ne(t.disabledReason),N(t.username),F(t.email),U(t.canEmail),V(t.md5email),R(o),B(t.verified),G(t.betaTester),j(t.employee),$(t.planCode),z(t.googleUsername),q(t.gitHubUsername),W(t.epicUsername),K(t.bentleyUsername),X(t.isTeam),Z(t.id),ie(t.planCode===f.COMMUNITY),re(t.planCode===f.PO_COMMERCIAL||t.planCode===f.PO_PREMIUM||t.planCode===f.PO_E365_PREMIUM),e.setUserId(n.id),await s.fetchJson({url:`${k}recordLogin`}),t.disabled)M=void 0,de({used:0,total:0}),ee([]);else{const e=await s.fetchJson({url:`${k}v2/tokens/default`});if(M=e.token,de(await s.fetchJson({url:`${k}storage`})),ee(a.isEnabledForServer(a.Server.TEAMS)?await s.fetchJson({url:`${k}teams`}):[]),a.isEnabledForServer(a.Server.OAUTH_CLIENT)){const e=await s.fetchJson({url:`${k}sketchfabUsername`});Y(e.sketchfabUsername)}}if(t.isTeam){const e=await s.fetchJson({url:`${k}teams/${t.id}/users/${n.requestedBy}`});J(n.role===l.OWNER),Q(e.username)}else J(!1),Q("");return t}async function ue(){L(!1),Z(),ee([]),X(!1)}function de(e){te(e.used),H(e.total)}async function he(e){const t=e?`?signInAs=${encodeURIComponent(e)}`:"";try{const e=await s.fetchJson({url:`${k}refresh${t}`});e.signature=e.signature?new p.UserLicenseSignature(e.signature):void 0,await ce(e)}catch(n){ue()}}function pe(e){return{Authorization:`Bearer ${e}`}}async function fe(e){const t=await s.simpleFetch(e,"json"),n=t.response,i="string"==typeof n?JSON.parse(t.response):n,r=t.getResponseHeader("Link"),o={};if(v(r)){const e=r.split(/,\s*/);for(let t=0;t<e.length;t++){let n=e[t].match(/<?([^>]*)>(.*)/);const i=n[1];n=n[2].match(/.*rel="([^"]*)"/);o[n[1]]=i}}return{items:i.items,total:i.total,links:o}}$.subscribe(e=>{const t=Object.assign({},ae(),{planCode:e});ae(t)}),G.subscribe(e=>{const t=Object.assign({},ae(),{betaTester:e});ae(t)});const me={initError:!1,init:async function(e){try{await async function(){try{const e=await s.fetchJson({url:`${window.location.origin}/config.json`});v(e)&&v(e.apiHostname)&&(ge(e.apiHostname),me.apiEndpoint=k)}catch(n){}const e=await s.fetchJson({url:`${k}appData`});t.set(e),S.cesiumCredit=new g(e.attribution,!0),x._logoData="/Images/bing_maps.png"}(),await he(e),i.initialize()}catch(n){503===n.statusCode&&window.location.replace("license.html"),console.error(n),me.initError=!0}},refreshUser:he,refreshAppData:async function(){const e=await s.fetchJson({url:`${k}appData`});t.set(e)},apiEndpoint:k,apiHostname:E,signIn:async function(e){const t=await s.postJson({url:`${k}signIn`,data:e,headers:{"x-cesium-csrf":(new Date).valueOf()}});return t.status===T.COMPLETE&&await ce(t.user),t},signInEpic:async function(e,t){const n=await s.postJson({url:`${k}signInEpic`,data:{code:e,teamName:t}});return n.status===T.COMPLETE&&await ce(n.user),n},signInGitHub:async function(e,t){const n=await s.postJson({url:`${k}signInGitHub`,data:{code:e,teamName:t}});return n.status===T.COMPLETE&&await ce(n.user),n},signInSketchfab:async function(e,t,n){const i=await s.postJson({url:`${k}signInSketchfab`,data:{code:e,teamName:t,signedInEmail:n}});return i.status===T.COMPLETE&&await ce(i.user),i},signInGoogle:async function(e,t,n){const i=await s.postJson({url:`${k}signInGoogle`,data:{code:e,hash:t,teamName:n}});return i.status===T.COMPLETE&&await ce(i.user),i},signInBentley:async function(e,t){m.typeOf.string("code",e);const n=await s.postJson({url:`${k}signInBentley`,data:{code:e,teamName:t}});return n.status===T.COMPLETE&&await ce(n.user),n},signUp:async function(e){const t=await s.postJson({url:`${k}signUp`,data:e});return await ce(t)},postSendEpicCode:async function(e){return s.postJson({url:`${k}sendEpicCode`,data:{email:e}})},getSketchfabModels:async function(e){const t=e.customUrl,n=e.search,i=e.category,r=e.date,o=e.sortBy;if(v(t)){const e=await fetch(t);return await e.json()}let a="https://sketchfab.com/v3/search?type=models&downloadable=true";if(v(n)&&!u(n)){a=`${a}&q=${encodeURIComponent(n)}`}v(i)&&!u(i)&&(a=`${a}&categories=${i}`),v(r)&&!u(r)&&(a=`${a}&date=${r}`),v(o)&&!u(o)&&(a=`${a}&sort_by=${o}`);const s=await fetch(a);return await s.json()},getSketchfabModel:async function(e){const t=`https://api.sketchfab.com/v3/models/${e}`,n=await fetch(t);return await n.json()},postVerifyEpicCode:async function(e,t,n,i,r){const o=await s.postJson({url:`${k}verifyEpicCode`,data:{ssoId:e,epicId:t,epicUsername:n,verificationCode:i,email:r}});return await ce(o)},completeSignUp:async function(e,t){const n=await s.postJson({url:`${k}completeSignUp`,data:e,headers:pe(t)});return await ce(n)},getCaptcha:async function(){return s.fetchJson({url:`${k}captcha`})},getAssetRelatedLogs:async function(e){return s.fetchJson({url:`${k}admin/logs/${e}`})},getUser:async function(e){return s.fetchJson({url:`${k}admin/users/${e}`})},getUserSubscriptions:async function(e){return s.fetchJson({url:`${k}admin/users/${e}/subscriptions`})},getUserOverage:async function(e){return s.fetchJson({url:`${k}admin/users/${e}/overage`})},getUsers:async function(e){e=o(e,Cesium.Frozen.EMPTY_OBJECT);const t={limit:50};v(e.page)&&(t.page=e.page),v(e.search)&&(t.search=e.search),v(e.sortBy)&&(t.sortBy=e.sortBy),v(e.sortOrder)&&(t.sortOrder=e.sortOrder),v(e.plan)&&(t.plan=e.plan),v(e.type)&&(t.type=e.type),v(e.productFilter)&&e.productFilter.length>0&&(t.productFilter=e.productFilter),v(e.accountType)&&(t.accountType=e.accountType),v(e.isDeleted)&&(t.isDeleted=e.isDeleted),v(e.loggedInSince)&&(t.loggedInSince=e.loggedInSince);return fe(new s({url:`${k}admin/users`,queryParameters:t}).url)},getUserCount:async function(e){const t={};return v(e)&&(t.lastLoggedIn=e),s.fetchJson({url:`${k}admin/users/count`,queryParameters:t})},getNextOrPreviousPage:async function(e){return fe(e)},deleteUsers:async function(e,t){return s.deleteJson({url:`${k}users/${e}`,data:{username:t}})},deleteUser:async function(e){return s.deleteJson({url:`${k}admin/users/${e}`})},undeleteUser:async function(e){return s.postJson({url:`${k}admin/users/${e}/undelete`})},postUser:async function(e){return s.postJson({url:`${k}admin/users`,data:e})},patchUserAdmin:async function(e,t){return s.patchJson({url:`${k}admin/users/${e}`,data:t})},addDebugAccess:async function(e,t){return m.typeOf.number("userId",e),m.typeOf.string("email",t),s.postJson({url:`${k}admin/users/${e}/debug-access`,data:{email:t}})},getDebugAccess:async function(e){return m.typeOf.number("userId",e),s.fetchJson({url:`${k}admin/users/${e}/debug-access`})},removeDebugAccess:async function(e,t){m.typeOf.number("userId",e),m.typeOf.object("member",t),m.typeOf.string("member.id",t.id),m.typeOf.bool("member.pending",t.pending);const n=t.pending?"invite":"member";return s.delete({url:`${k}admin/users/${e}/debug-access/${n}/${t.id}`})},getAssetDepotLabels:async function(){return s.fetchJson({url:`${k}admin/assetDepotLabels`})},patchAssetDepotLabel:async function(e,t){return s.patchJson({url:`${k}admin/assetDepotLabels/${e}`,data:t})},deleteAssetDepotLabel:async function(e){return s.deleteJson({url:`${k}admin/assetDepotLabels/${e}`})},postAssetDepotLabels:async function(e){return s.postJson({url:`${k}admin/assetDepotLabels`,data:e})},postAddUserToTeamByAdmin:async function(e,t){return s.postJson({url:`${k}admin/users/${e}/addUserToTeam`,data:t})},patchUser:async function(e){const t=await s.patchJson({url:`${k}account`,data:e});me.userObject(t),me.username(t.username),me.email(t.email),me.canEmail(t.canEmail),me.verified(t.verified),me.gitHubUsername(t.gitHubUsername),me.googleUsername(t.googleUsername),me.epicUsername(t.epicUsername),me.bentleyUsername(t.bentleyUsername),V(t.md5email)},unlinkSketchfab:async function(){await s.postJson({url:`${k}unlinkSketchfabAccount`}),me.sketchfabUsername(void 0)},getEmailPendingVerification:async function(){return(await s.fetchJson({url:`${k}emailPendingVerification`})).email},deleteEmailPendingVerification:function(){return s.deleteJson({url:`${k}emailPendingVerification`})},patchTeam:async function(e,t){const n=await s.patchJson({url:`${k}teams/${e}`,data:t});me.username(n.username)},signOut:async function(){await s.postJson({url:`${k}signOut`}),ue()},postTeam:async function(e){const t=await s.postJson({url:`${k}teams`,data:e});return v(t.team)?t:{team:t,moveData:{requested:!1,started:!1}}},adminPostTeam:async function(e){return s.postJson({url:`${k}admin/teams`,data:e})},getTeamsForUser:async function(){return s.fetchJson({url:`${k}teams`})},getSwitchProfile:async function(e){let t="";return v(e)&&(t=`?requestedTeamId=${e}`),await s.fetchJson({url:`${k}switchProfile${t}`})},postUserInvitation:async function(e,t){return s.postJson({url:`${k}teams/${e}/invites`,data:{usernameOrEmail:t.usernameOrEmail,role:t.role}})},getUsersInTeam:async function(e){return s.fetchJson({url:`${k}teams/${e}/users`})},getInvitesInTeam:async function(e){return s.fetchJson({url:`${k}teams/${e}/invites`})},getInvites:async function(){return s.fetchJson({url:`${k}users/invites`})},deleteTeamUser:async function(e,t){return s.deleteJson({url:`${k}teams/${e}/users/${t}`})},deleteTeamInvite:async function(e,t){return s.deleteJson({url:`${k}teams/${e}/invites/${t}`})},postAcceptUserInvitation:async function(e,t,n){return await s.postJson({url:`${k}teams/${e}/invites/${t}`,data:{token:n}})},postAcceptUserInviteToken:async function(e){return await s.postJson({url:`${k}teams/invites/accept`,data:{token:e}})},patchChangeRole:async function(e,t,n){return s.patchJson({url:`${k}teams/${e}/users/${t}`,data:{role:n}})},putCancelSubscription:async function(){return s.putJson({url:`${k}subscription`})},putReactivateSubscription:async function(){return s.putJson({url:`${k}subscription/reactivate`})},changePassword:async function(e){const t=await s.postJson({url:`${k}passwordChange`,data:e});return await ce(t)},resetPassword:async function(e){const t=e.token,n=e.password,i=e.factorType,r=e.factorResponse;m.typeOf.string("token",t),m.typeOf.string("password",n);const o=await s.postJson({url:`${k}passwordReset`,data:{newPassword:n,factorType:i,factorResponse:r},headers:pe(t)});return o.complete&&await ce(o.user),o},patchStory:async function(e,t){return s.patchJson({url:`${k}stories/${e}`,data:t})},postStory:async function(e){return s.postJson({url:`${k}stories`,data:e})},getStories:async function(){return s.fetchJson({url:`${k}stories`})},getStoryThumbnailUrl:function(e){return`${k}stories/${e}/thumbnail`},deleteStory:async function(e){return s.deleteJson({url:`${k}stories/${e}`})},shareStory:async function(e){return s.putJson({url:`${k}stories/${e}/shared`,data:{shared:!0}})},unshareStory:async function(e){return s.putJson({url:`${k}stories/${e}/shared`,data:{shared:!1}})},putStoryLabels:async function(e,t){return s.putJson({url:`${k}stories/${e}/labels`,data:{labelIds:t}})},verifyAccount:async function(e){m.typeOf.object("options",e),m.typeOf.string("options.string",e.code);const t=await s.putJson({url:`${k}verification`,data:{code:e.code}});return await ce(t)},getTokens:async function(e){e=o(e,Cesium.Frozen.EMPTY_OBJECT);const t={limit:o(e.limit,50)};v(e.page)&&(t.page=e.page),v(e.search)&&(t.search=e.search),v(e.sortBy)&&(t.sortBy=e.sortBy),v(e.sortOrder)&&(t.sortOrder=e.sortOrder);return fe(new s({url:`${k}v2/tokens`,queryParameters:t}).url)},postToken:async function(e){return s.postJson({url:`${k}v2/tokens`,data:{name:e.name,assetIds:e.assetIds,allowedUrls:e.allowedUrls,scopes:e.scopes}})},patchTokenMetadata:async function(e,t){return s.patchJson({url:`${k}v2/tokens/${e}`,data:{name:t.name,scopes:t.scopes,assetIds:t.assetIds,allowedUrls:t.allowedUrls}})},deleteToken:async function(e){return s.deleteJson({url:`${k}v2/tokens/${e}`})},regenerateDefaultToken:async function(){return s.fetchJson({url:`${k}tokens/default/regenerate`})},resetPasswordRequest:async function(e){return s.postJson({url:`${k}passwordResetRequest`,data:{email:e}})},accountLookup:async function(e){return s.postJson({url:`${k}accountLookup`,data:{email:e}})},getError:function(e){if(!v(e))return P;let t;if(v(e.message))t=e;else if("object"==typeof e.response)t=e.response;else if("string"==typeof e.response)try{t=JSON.parse(e.response)}catch(n){}return t=o(t,P),t.message=v(t.message)&&""!==t.message?t.message:P.message,t.code=v(t.code)&&""!==t.code?t.code:P.code,t},getErrorMessage:function(e){const t=me.getError(e);return t.code===c.ClientErrorCodes.WEAK_PASSWORD?"Please choose a stronger password. Try a mix of letters, numbers, and symbols.":t.message},assetViewerImageryId:void 0,isSignedIn:L,accountDisabledReason:ne,isAdmin:R,md5Email:V,username:N,email:F,canEmail:U,verified:B,planCode:$,quotaInBytes:H,storageUsed:te,isBetaTester:G,isEmployee:j,googleUsername:z,gitHubUsername:q,sketchfabUsername:Y,epicUsername:W,bentleyUsername:K,teams:ee,isTeam:X,userId:Z,isOwner:J,currentTeamUsersUsername:Q,userObject:ae,isCommunityUser:ie,hasSignedLicense:se,licenseSignature:le,featureUserContext:oe,isPOUser:re,getLastLogin:function(){return O},getCurrentUser:function(){return D},getDefaultToken:function(){return M},getUserPlanDetails:async function(e){return s.fetchJson({url:`${k}admin/users/${e}/planDetails`})},getStorage:async function(){const e=await s.fetchJson({url:`${k}storage`});return de(e),e},getAssets:async function(e){e=o(e,Cesium.Frozen.EMPTY_OBJECT);const t={limit:o(e.limit,50)};v(e.page)&&(t.page=e.page),v(e.search)&&(t.search=e.search),v(e.status)&&(t.status=e.status),v(e.type)&&(t.type=e.type),v(e.sortBy)&&(t.sortBy=e.sortBy),v(e.sortOrder)&&(t.sortOrder=e.sortOrder),v(e.addedAfter)&&(t.addedAfter=e.addedAfter.toISOString()),v(e.addedBefore)&&(t.addedBefore=e.addedBefore.toISOString());return fe(new s({url:`${k}v1/assets`,queryParameters:t}).url)},getBilling:async function(){return s.fetchJson({url:`${k}billing`})},postBilling:async function(e){return s.postJson({url:`${k}billing`,data:e})},getSubscription:async function(){return s.fetchJson({url:`${k}subscription`})},postSubscription:async function(e){return s.postJson({url:`${k}subscription`,data:{plan:e}})},getAssetsForUser:async function(e,t){t=o(t,Cesium.Frozen.EMPTY_OBJECT);const n={limit:o(t.limit,50)};v(t.page)&&(n.page=t.page),v(t.sortBy)&&(n.sortBy=t.sortBy),v(t.sortOrder)&&(n.sortOrder=t.sortOrder),v(t.search)&&(n.search=t.search);return fe(new s({url:`${k}admin/users/${e}/assets`,queryParameters:n}).url)},getAssetStories:async function(e){return s.fetchJson({url:`${k}assets/${e}/stories`})},getAssetMetadata:async function(e){const t=`${k}v1/assets/${e}`;return s.fetchJson({url:t})},postAssetArchiveDeprecated:async function(e){m.typeOf.number("assetId",e);const t=`${k}v1/assets/${e}/archives`;return s.postJson({url:t,data:{format:"ZIP"}})},postAssetArchive:async function(e){m.typeOf.object("data",e),m.defined("data.assetIds",e.assetIds),m.typeOf.string("data.type",e.type),m.typeOf.string("data.format",e.format);const t=`${k}v1/archives`;return s.postJson({url:t,data:e})},patchAssetArchive(e,t){if(m.typeOf.number("archiveId",e),m.typeOf.object("options",t),m.typeOf.string("options.name",t.name),!a.isEnabledForUser(a.User.ASSET_ARCHIVES_CLIPS))throw new b("ASSET_ARCHIVES_CLIPS not supported for this user");return s.patchJson({url:`${k}v1/archives/${e}`,data:{name:t.name}})},getAssetArchive:async function(e){const t=`${k}v1/archives/${e}`;return s.fetchJson({url:t})},getAssetArchives:async function(e){if(e=o(e,Cesium.Frozen.EMPTY_OBJECT),v(e.url))return me.getNextOrPreviousPage(e.url);const t={};for(const i of["archiveId","assetId","clipped","sortBy","sortOrder","limit","page","search"])v(e[i])&&(t[i]=e[i]);const n=new s({url:`${k}v1/archives`,queryParameters:t});return me.getNextOrPreviousPage(n.url)},getAreAssetsClippable:async function(e){if(!Array.isArray(e))throw new b("Expected 'assetIds' to be an array of numbers");if(!a.isEnabledForUser(a.User.ASSET_ARCHIVES_CLIPS))throw new b("ASSET_ARCHIVES_CLIPS not supported for this user");return s.fetchJson({url:`${k}v1/archives/clippable`,queryParameters:{id:e}})},getClippedArchiveUsage:async function(){return s.fetchJson({url:`${k}v1/archives/clipUsage`})},getHasPremiumData:async function(e){return s.fetchJson({url:`${k}v1/archives/hasPremiumData/${e}`})},deleteAssetArchiveDeprecated:async function(e,t){return m.typeOf.number("archiveId",t),m.typeOf.number("assetId",e),s.deleteJson({url:`${k}v1/assets/${e}/archives/${t}`})},deleteAssetArchive:async function(e){return m.typeOf.number("archiveId",e),s.deleteJson({url:`${k}v1/archives/${e}`})},patchAssetsMetadata:async function(e,t){return s.patchJson({url:`${k}v1/assets/${e}`,data:t})},putAssetLabels:async function(e,t){return s.putJson({url:`${k}assets/${e}/labels`,data:{labelIds:t}})},patchAssetMetadataAdmin:async function(e,t){return s.patchJson({url:`${k}admin/assets/${e}`,data:t})},getPremiumAssetMetadata:async function(e){return s.fetchJson({url:`${k}premiumAssets/${e}`})},patchPremiumAssetMetadataAdmin:async function(e,t){return s.patchJson({url:`${k}admin/premiumAssets/${e}`,data:t})},getAdminAssetMetadata:async function(e){return s.fetchJson({url:`${k}admin/assets/${e}`})},deleteAdminPremiumAsset:async function(e){return s.deleteJson({url:`${k}admin/premiumAssets/${e}`})},getAdminPremiumAssets:async function(){return s.fetchJson({url:`${k}admin/premiumAssets`})},getRealityData:async function(e){return m.typeOf.number("assetId",e),s.fetchJson({url:`${k}admin/assets/${e}/reality-data`})},getRealityDataAccess:async function(e,t){return m.typeOf.number("assetId",e),m.typeOf.string("realityId",t),s.fetchJson({url:`${k}admin/assets/${e}/reality-data/${t}`})},postAdminAssets:async function(e){return s.postJson({url:`${k}admin/assets`,data:e})},postAdminPremiumAssets:async function(e){return s.postJson({url:`${k}admin/premiumAssets`,data:e})},postAdminSubscribeUserToPremiumAsset:async function(e){return m.typeOf.number("options.userId",e.userId),m.typeOf.number("options.assetId",e.assetId),s.postJson({url:`${k}admin/users/${e.userId}/addPremiumAsset`,data:{assetId:e.assetId}})},postAssets:async function(e){return s.postJson({url:`${k}v1/assets`,data:e})},postFiles:function(e,t,n){return s.sendFiles({url:`${k}v1/assets/${t}/files`,files:e,progressFunction:n})},deleteAsset:async function(e){return s.deleteJson({url:`${k}v1/assets/${e}`})},getPremiumAssets:async function(){return s.fetchJson({url:`${k}premiumAssets`})},addPremiumAsset:async function(e){return s.postJson({url:`${k}premiumAssets/${e}/add`})},removePremiumAsset:async function(e){return s.postJson({url:`${k}premiumAssets/${e}/remove`})},adminDeleteUserAsset:async function(e,t){return s.postJson({url:`${k}admin/users/${e}/deleteAsset`,data:t})},adminRemoveUserPremiumAsset:async function(e,t){return s.postJson({url:`${k}admin/users/${e}/removePremiumAsset`,data:t})},adminSendVerificationEmail:async function(e){return s.postJson({url:`${k}admin/verificationEmailSend`,data:{userId:e}})},adminGetAuthenticationFactors:async function(e){return m.typeOf.number("userId",e),s.fetchJson({url:`${k}admin/users/${e}/mfa`})},adminDeleteAuthenticationFactors:async function(e){return m.typeOf.number("userId",e),s.delete({url:`${k}admin/users/${e}/mfa`})},sendVerificationEmail:async function(){return s.postJson({url:`${k}verificationEmailSend`})},getCountOfStoriesWithAsset:async function(e){return(await s.fetchJson({url:`${k}admin/assets/${e}/storyCount`})).count},getAssetSources:async function(e){return s.fetchJson({url:`${k}assets/${e}/sources`})},getDefaults:async function(){return s.fetchJson({url:`${k}v1/defaults?noQuickAdd=1`})},getJobs:async function(e){if(e=o(e,Cesium.Frozen.EMPTY_OBJECT),v(e.url))return me.getNextOrPreviousPage(e.url);const t={};for(const i of["sortBy","sortOrder","limit","page","search","userId","assetId","archiveId","exportId","showComplete","type"])v(e[i])&&(t[i]=e[i]);const n=new s({url:`${k}admin/jobs`,queryParameters:t});return me.getNextOrPreviousPage(n.url)},restartJob:async function(e,t,n){return s.postJson({url:`${k}admin/jobs/restart`,data:{jobType:e,itemId:t,options:n}})},getLabels:async function(){return s.fetchJson({url:`${k}labels`})},postLabels:async function(e){return s.postJson({url:`${k}labels`,data:e})},patchLabel:async function(e,t){return s.patchJson({url:`${k}labels/${e}`,data:t})},deleteLabel:async function(e){return s.deleteJson({url:`${k}labels/${e}`})},postAssetExports:async function(e,t){const n=`${k}v1/assets/${e}/exports`;return s.postJson({url:n,data:t})},getAssetExports:async function(e){const t=`${k}v1/assets/${e}/exports`;return s.fetchJson({url:t})},getApplications:async function(){return s.fetchJson({url:`${k}applications`})},postApplication:async function(e){return s.postJson({url:`${k}applications`,data:e})},putApplication:async function(e,t){return s.putJson({url:`${k}applications/${e}`,data:t})},deleteApplication:async function(e){return s.deleteJson({url:`${k}applications/${e}`})},getAuthorizedApplications:async function(){return s.fetchJson({url:`${k}authorizedApplications`})},deleteAuthorizedApplication:async function(e){return s.deleteJson({url:`${k}authorizedApplications/${e}`})},getAppSettings:async function(){return s.fetchJson({url:`${k}admin/settings`})},setAppSettings:async function(e){return s.postJson({url:`${k}admin/settings`,data:e})},getTerrainChildren:async function(e){return s.fetchJson({url:`${k}assets/${e}/children`})},getAssetsMultiDelete:async function(e){if(!Array.isArray(e))throw new b("Expected 'assetIds' to be an array of numbers");return s.fetchJson({url:`${k}assets/multi-delete`,queryParameters:{id:e}})},postAssetsMultiDelete:async function(e){if(!Array.isArray(e))throw new b("Expected 'assetIds' to be an array of numbers");return s.postJson({url:`${k}assets/multi-delete`,data:{ids:e}})},postAssetAnalyze:async function(e,t){return s.postJson({url:`${k}assets/${e}/analyze`,data:t})},getDetectors:async function(){return s.fetchJson({url:`${k}analyze/detectors`})},getAssetAnalysisUsage:async function(){return s.fetchJson({url:`${k}analyze/usage`})},getAssetAnalysisUsageDetails:async function(e){return m.defined("options.start",e.start),m.defined("options.end",e.end),s.fetchJson({url:`${k}analyze/usage/details`,queryParameters:{start:e.start.toISOString(),end:e.end.toISOString()}})},getTerrainExtent:async function(e,t){return s.fetchJson({url:`${k}assets/${e}/extent`,queryParameters:v(t)?{userId:t}:void 0})},putTilesetTransform:async function(e,t,n){return s.putJson({url:`${k}assets/${e}/transform`,data:{transform:w.toArray(t),terrainId:n}})},getUsage:async function(e,t,n){let i=`${k}tokens/`;return v(n)&&(i+=`${n}/`),i+="usage",s.fetchJson({url:i,queryParameters:{from:e.format("YYYY-MM-DD"),to:t.format("YYYY-MM-DD")}})},postOauthAuthorize:async function(e){return s.postJson({url:`${k}oauth/authorize`,data:e})},getOauthClient:async function(e){return s.fetchJson({url:`${k}oauth/client/${e}`})},getS3Preview:async function(e,t,n,i,r){return s.postJson({url:`${k}s3/preview`,data:{accessKey:e,secretAccessKey:t,bucket:n,prefix:i,sessionToken:r}})},getAzurePreview:async function(e){return s.postJson({url:`${k}azure/preview`,data:e})},getCountries:async function(){return s.fetchJson("ThirdParty/countries.json")},getPlanLimits:async function(){return s.fetchJson({url:`${k}planLimits`})},redirectToSamlLogin:async function(e){try{const t=await s.fetchText({url:`${k}saml/loginRequestURL`,queryParameters:{redirectTo:e}});window.location=t}catch(t){console.error(t);const e=new URL("/error",window.location);e.searchParams.append("code","UNABLE_TO_GET_SAML_LOGIN_REQUEST_URL"),window.location=e.toString()}},createAuthenticationFactor:async function(e){m.typeOf.string("type",e);return await s.postJson({url:`${k}mfa`,data:{type:e}})},getAuthenticationFactors:async function(){return await s.fetchJson({url:`${k}mfa`})},confirmAuthenticationFactor:async function(e){m.typeOf.object("data",e),m.typeOf.string("data.type",e.type);return await s.postJson({url:`${k}mfa/confirm`,data:e})},signInTwoFactor:async function(e){m.typeOf.object("options",e),m.typeOf.string("options.type",e.type),m.typeOf.string("options.response",e.response);const t=await s.postJson({url:`${k}mfa/signIn`,data:e});return t.complete&&await ce(t.user),t},deleteTwoFactorAuthentication:async function(){return s.delete({url:`${k}mfa`})},getUserLicenseSignature:async e=>{try{return new p.UserLicenseSignature(await s.fetchJson({url:`${k}admin/users/${e}/license-signature`}))}catch(n){if(404===n?.statusCode)return}},setUserLicenseSignature:async(e,t)=>new p.UserLicenseSignature(await s.postJson({url:`${k}admin/users/${e}/license-signature`,data:t})),getLicenseSignature:async()=>{try{return new p.UserLicenseSignature(await s.fetchJson({url:`${k}license-signature`}))}catch(n){if(404===n?.statusCode)return}},postLicenseSignature:async e=>{const t=new p.UserLicenseSignature(await s.postJson({url:`${k}license-signature`,data:e}));return ae(Object.assign({},ae(),{signature:t})),t},getUserNotes:async function(e){return(await s.fetchJson({url:`${k}admin/users/${e}/notes`})).map(e=>({...e,posted:new Date(e.posted)}))},addUserNote:async function(e,t){const n=await s.postJson({url:`${k}admin/users/${e}/notes`,data:{note:t}});return{...n,posted:new Date(n.posted)}},updateUserNote:async function(e,t){const n=await s.putJson({url:`${k}admin/users/notes/${e}`,data:{note:t}});return{...n,posted:new Date(n.posted)}},deleteUserNote:async function(e){try{return await s.delete({url:`${k}admin/users/notes/${e}`}),!0}catch(n){return!1}}};function ge(e){const t=e.split(":");E=t[0];const n=o(t[1],I);_.add(E,n),80!==n&&443!==n&&(E+=`:${n}`),k=`${A}//${E}`,y.defaultServer=k,k+="/"}return me}),define("Core/injectThirdPartyScriptsAndStyles",["Core/Feature"],function(e){"use strict";function t(t){if(!e.isEnabledForServer(e.Server.PUBLIC_INTERNET_ACCESS))throw new Cesium.DeveloperError(`Running in isolated network mode but trying to load third party dependencies hosted on public internet: ${t}`)}return async function(){var n;e.isEnabledForServer(e.Server.BILLING)&&(!function(e){t(e);const n=document.createElement("link");n.rel="stylesheet",n.href=e,document.head.appendChild(n)}("https://js.recurly.com/v4/recurly.css"),await(n="https://js.recurly.com/v4/recurly.js",t(n),new Promise(function(e,t){const i=document.createElement("script");i.src=n,i.addEventListener("load",()=>e()),i.addEventListener("error",()=>t(new Error(`script failed to load: ${n}`))),document.head.appendChild(i)})))}}),define("durandal/system",["require","jquery"],function(e,t){var n,i=!1,r=Object.keys,o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=!1,l=Array.isArray,c=Array.prototype.slice;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(g){s=!0}e.on&&e.on("moduleLoaded",function(e,t){n.setModuleId(e,t)}),"undefined"!=typeof requirejs&&(requirejs.onResourceLoad=function(e,t,i){n.setModuleId(e.defined[t.id],t.id)});var u=function(){},d=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;e<arguments.length;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==c.call(arguments).length&&"string"==typeof c.call(arguments)[0]?console.log(c.call(arguments).toString()):console.log.apply(console,c.call(arguments));else Function.prototype.bind&&!s||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,c.call(arguments))}catch(t){}},h=function(e,t){var n;(n=e instanceof Error?e:new Error(e)).innerError=t;try{"undefined"!=typeof console&&"function"==typeof console.error?console.error(n):Function.prototype.bind&&!s||"undefined"==typeof console||"object"!=typeof console.error||Function.prototype.call.call(console.error,console,n)}catch(i){}throw n};n={version:"2.2.0",noop:u,getModuleId:function(e){return e?"function"==typeof e&&e.prototype?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){e&&("function"==typeof e&&e.prototype?e.prototype.__moduleId__=t:"string"!=typeof e&&(e.__moduleId__=t))},resolveObject:function(e){return n.isFunction(e)?new e:e},debug:function(e){return 1==arguments.length&&((i=e)?(this.log=d,this.error=h,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=u,this.error=u)),i},log:u,error:u,assert:function(e,t){e||n.error(new Error(t||"Assert:Failed"))},defer:function(e){return t.Deferred(e)},guid:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)})},acquire:function(){var t,i=arguments[0],r=!1;return n.isArray(i)?(t=i,r=!0):t=c.call(arguments,0),this.defer(function(n){e(t,function(){var e=arguments;setTimeout(function(){e.length>1||r?n.resolve(c.call(e,0)):n.resolve(e[0])},1)},function(e){n.reject(e)})}).promise()},extend:function(e){for(var t=c.call(arguments,1),n=0;n<t.length;n++){var i=t[n];if(i)for(var r in i)e[r]=i[r]}return e},wait:function(e){return n.defer(function(t){setTimeout(t.resolve,e)}).promise()}},n.keys=r||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)o.call(e,n)&&(t[t.length]=n);return t},n.isElement=function(e){return!(!e||1!==e.nodeType)},n.isArray=l||function(e){return"[object Array]"==a.call(e)},n.isObject=function(e){return e===Object(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isPromise=function(e){return e&&n.isFunction(e.then)};var p=["Arguments","Function","String","Number","Date","RegExp"];function f(e){var t="[object "+e+"]";n["is"+e]=function(e){return a.call(e)==t}}for(var m=0;m<p.length;m++)f(p[m]);return n}),define("durandal/viewEngine",["durandal/system","jquery"],function(e,t){return{cache:{},viewExtension:".html",viewPlugin:"text",viewPluginParameters:"",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return(this.viewPlugin?this.viewPlugin+"!":"")+e+this.viewExtension+this.viewPluginParameters},parseMarkup:t.parseHTML?function(e){return t.parseHTML(e)}:function(e){return t(e).get()},processMarkup:function(e){var t=this.parseMarkup(e);return this.ensureSingleElement(t)},ensureSingleElement:function(e){if(e){if(1==e.length)return e[0]}else t("<div></div>")[0];for(var n=[],i=0;i<e.length;i++){var r=e[i];if(8!=r.nodeType){if(3==r.nodeType)if(!/\S/.test(r.nodeValue))continue;n.push(r)}}return n.length>1?t(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},tryGetViewFromCache:function(e){return this.cache[e]},putViewInCache:function(e,t){this.cache[e]=t},createView:function(t){var n=this,i=this.convertViewIdToRequirePath(t),r=this.tryGetViewFromCache(i);return r?e.defer(function(e){e.resolve(r.cloneNode(!0))}).promise():e.defer(function(r){e.acquire(i).then(function(e){var o=n.processMarkup(e);o.setAttribute("data-view",t),n.putViewInCache(i,o),r.resolve(o.cloneNode(!0))}).fail(function(e){n.createFallbackView(t,i,e).then(function(e){e.setAttribute("data-view",t),n.cache[i]=e,r.resolve(e.cloneNode(!0))})})}).promise()},createFallbackView:function(t,n,i){var r=this,o='View Not Found. Searched for "'+t+'" via path "'+n+'".';return e.defer(function(e){e.resolve(r.processMarkup('<div class="durandal-view-404">'+o+"</div>"))}).promise()}}}),define("durandal/viewLocator",["durandal/system","durandal/viewEngine"],function(e,t){return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var i=new RegExp((e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1"),"gi");this.convertModuleIdToViewId=function(e){return e.replace(i,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n,i){var r;if(t.getView&&(r=t.getView()))return this.locateView(r,n,i);if(t.viewUrl)return this.locateView(t.viewUrl,n,i);var o=e.getModuleId(t);return o?this.locateView(this.convertModuleIdToViewId(o),n,i):this.locateView(this.determineFallbackViewId(t),n,i)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/.exec(e.constructor.toString()),n=t&&t.length>1?t[1]:"";return"views/"+(n=n.trim())},translateViewIdToArea:function(e,t){return e},locateView:function(n,i,r){if("string"==typeof n){var o;if(o=t.isViewUrl(n)?t.convertViewUrlToViewId(n):n,i&&(o=this.translateViewIdToArea(o,i)),r){var a=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.getAttribute("data-view")==t)return i}}(r,o);if(a)return e.defer(function(e){e.resolve(a)}).promise()}return t.createView(o)}return e.defer(function(e){e.resolve(n)}).promise()}}}),define("durandal/binder",["durandal/system","knockout"],function(e,t){var i,r="Insufficient Information to Bind",o="Unexpected View Type",a="durandal-binding-instruction";function s(s,l,c,u){if(l&&c)if(l.getAttribute){var d,h=l.getAttribute("data-view");try{var p;return s&&s.binding&&(p=s.binding(l)),p=void 0===(d=p)?{applyBindings:!0}:e.isBoolean(d)?{applyBindings:d}:(void 0===d.applyBindings&&(d.applyBindings=!0),d),i.binding(u,l,p),p.applyBindings?(e.log("Binding",h,u),t.applyBindings(c,l)):s&&t.utils.domData.set(l,"__ko_bindingContext__",{$data:s}),i.bindingComplete(u,l,p),s&&s.bindingComplete&&s.bindingComplete(l),t.utils.domData.set(l,a,p),p}catch(n){n.message=n.message+";\nView: "+h+";\nModuleId: "+e.getModuleId(u),i.throwOnErrors?e.error(n):e.log(n.message)}}else i.throwOnErrors?e.error(o):e.log(o,l,u);else i.throwOnErrors?e.error(r):e.log(r,l,u)}return i={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,a)},bindContext:function(e,t,n,i){return n&&e&&(e=e.createChildContext(n,"string"==typeof i?i:null)),s(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return s(e,t,e,e)}}}),define("durandal/activator",["durandal/system","knockout"],function(e,t){var n,i={canDeactivate:!0};function r(t,n,i){return e.isArray(i)?t[n].apply(t,i):t[n](i)}function o(t,n,i,r,o){if(t&&t.deactivate){var a;e.log("Deactivating",t);try{a=t.deactivate(n)}catch(s){return e.log("ERROR: "+s.message,s),void r.resolve(!1)}a&&a.then?a.then(function(){i.afterDeactivate(t,n,o),r.resolve(!0)},function(t){t&&e.log(t),r.resolve(!1)}):(i.afterDeactivate(t,n,o),r.resolve(!0))}else t&&i.afterDeactivate(t,n,o),r.resolve(!0)}return n={defaults:{closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return e.isObject(n)&&(n=n.can||!1),e.isString(n)?-1!==t.utils.arrayIndexOf(this.affirmations,n.toLowerCase()):n},areSameItem:function(e,t,n,i){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)},findChildActivator:function(e){return null}},create:function(a,s){var l,c=t.observable(null);s=function(t){return null==t&&(t={}),e.isBoolean(t.closeOnDeactivate)||(t.closeOnDeactivate=n.defaults.closeOnDeactivate),t.beforeActivate||(t.beforeActivate=n.defaults.beforeActivate),t.afterDeactivate||(t.afterDeactivate=n.defaults.afterDeactivate),t.affirmations||(t.affirmations=n.defaults.affirmations),t.interpretResponse||(t.interpretResponse=n.defaults.interpretResponse),t.areSameItem||(t.areSameItem=n.defaults.areSameItem),t.findChildActivator||(t.findChildActivator=n.defaults.findChildActivator),t}(s);var u=t.computed({read:function(){return c()},write:function(e){u.viaSetter=!0,u.activateItem(e)}});return u.__activator__=!0,u.settings=s,s.activator=u,u.isActivating=t.observable(!1),u.forceActiveItem=function(e){c(e)},u.canDeactivateItem=function(t,n,r){return function(t,n,r,o){return o=e.extend({},i,o),r.lifecycleData=null,e.defer(function(i){function a(){if(t&&t.canDeactivate&&o.canDeactivate){var a;try{a=t.canDeactivate(n)}catch(s){return e.log("ERROR: "+s.message,s),void i.resolve(!1)}a.then?a.then(function(e){r.lifecycleData=e,i.resolve(r.interpretResponse(e))},function(t){t&&e.log("ERROR: "+t.message,t),i.resolve(!1)}):(r.lifecycleData=a,i.resolve(r.interpretResponse(a)))}else i.resolve(!0)}var s=r.findChildActivator(t);s?s.canDeactivate().then(function(e){e?a():i.resolve(!1)}):a()}).promise()}(t,n,s,r)},u.deactivateItem=function(t,n){return e.defer(function(e){u.canDeactivateItem(t,n).then(function(i){i?o(t,n,s,e,c):(u.notifySubscribers(),e.resolve(!1))})}).promise()},u.canActivateItem=function(t,n){return function(t,n,i,o,a){return i.lifecycleData=null,e.defer(function(s){if(i.areSameItem(n(),t,o,a))s.resolve(!0);else if(t&&t.canActivate){var l;try{l=r(t,"canActivate",a)}catch(c){return e.log("ERROR: "+c.message,c),void s.resolve(!1)}l.then?l.then(function(e){i.lifecycleData=e,s.resolve(i.interpretResponse(e))},function(t){t&&e.log("ERROR: "+t.message,t),s.resolve(!1)}):(i.lifecycleData=l,s.resolve(i.interpretResponse(l)))}else s.resolve(!0)}).promise()}(t,c,s,l,n)},u.activateItem=function(t,n,i){var a=u.viaSetter;return u.viaSetter=!1,e.defer(function(d){if(u.isActivating())d.resolve(!1);else{u.isActivating(!0);var h=c();if(s.areSameItem(h,t,l,n))return u.isActivating(!1),void d.resolve(!0);u.canDeactivateItem(h,s.closeOnDeactivate,i).then(function(i){i?u.canActivateItem(t,n).then(function(i){i?e.defer(function(e){o(h,s.closeOnDeactivate,s,e)}).promise().then(function(){!function(t,n,i,o){var a;if(t&&t.activate){e.log("Activating",t);try{a=r(t,"activate",o)}catch(s){return e.log("ERROR: "+s.message,s),void i(!1)}}a&&a.then?a.then(function(){n(t),i(!0)},function(t){t&&e.log("ERROR: "+t.message,t),i(!1)}):(n(t),i(!0))}(t=s.beforeActivate(t,n),c,function(e){l=n,u.isActivating(!1),d.resolve(e)},n)}):(a&&u.notifySubscribers(),u.isActivating(!1),d.resolve(!1))}):(a&&u.notifySubscribers(),u.isActivating(!1),d.resolve(!1))})}}).promise()},u.canActivate=function(){var e;return a?(e=a,a=!1):e=u(),u.canActivateItem(e)},u.activate=function(){var e;return a?(e=a,a=!1):e=u(),u.activateItem(e)},u.canDeactivate=function(e){return u.canDeactivateItem(u(),e)},u.deactivate=function(e){return u.deactivateItem(u(),e)},u.includeIn=function(e){e.canActivate=function(){return u.canActivate()},e.activate=function(){return u.activate()},e.canDeactivate=function(e){return u.canDeactivate(e)},e.deactivate=function(e){return u.deactivate(e)}},s.includeIn?u.includeIn(s.includeIn):a&&u.activate(),u.forItems=function(t){s.closeOnDeactivate=!1,s.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&n<e.length-1?e[n]:null},s.beforeActivate=function(e){var n=u();if(e){var i=t.indexOf(e);-1==i?t.push(e):e=t()[i]}else e=s.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},s.afterDeactivate=function(e,n){n&&t.remove(e)};var n=u.canDeactivate;u.canDeactivate=function(i){return i?e.defer(function(e){var n=t(),r=[];function o(){for(var t=0;t<r.length;t++)if(!r[t])return void e.resolve(!1);e.resolve(!0)}for(var a=0;a<n.length;a++)u.canDeactivateItem(n[a],i).then(function(e){r.push(e),r.length==n.length&&o()})}).promise():n()};var i=u.deactivate;return u.deactivate=function(n){return n?e.defer(function(e){var i=t(),r=0,o=i.length;function a(i){setTimeout(function(){u.deactivateItem(i,n).then(function(){r++,t.remove(i),r==o&&e.resolve()})},1)}for(var s=0;s<o;s++)a(i[s])}).promise():i()},u},u},isActivator:function(e){return e&&e.__activator__}}}),define("durandal/composition",["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(e,t,i,r,o,a,s){var l,c={},u="data-active-view",d=[],h=0,p="durandal-composition-data",f=["model","view","transition","area","strategy","activationData","onError"],m="durandal-visibility-data",g=["compose:"];function v(t,i,r){try{if(t.onError)try{t.onError(i,r)}catch(n){e.error(n)}else e.error(i)}finally{b(t,r,!0)}}function b(e,t,i){if(0===--h){var r=d;d=[],i||setTimeout(function(){for(var i=r.length;i--;)try{r[i]()}catch(n){v(e,n,t)}},1)}!function(e){delete e.activeView,delete e.viewElements}(e)}function y(t,i){if((t=this).activeView&&t.activeView.removeAttribute(u),t.child)try{t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t),t.attached&&t.attached(t.child,t.parent,t),t.child.setAttribute(u,!0),t.composingNewView&&t.model&&t.model.detached&&s.utils.domNodeDisposal.addDisposeCallback(t.child,function(){try{t.model.detached(t.child,t.parent,t)}catch(e){v(t,e,i)}})}catch(n){v(t,n,i)}t.triggerAttach=e.noop}function w(e){for(var t=0,n=e.length,i=[];t<n;t++){var r=e[t].cloneNode(!0);i.push(r)}return i}function _(t){var n=w(t.parts),i=l.getParts(n),r=l.getParts(t.child);for(var o in i){var s=r[o];s||(s=a('[data-part="'+o+'"]',t.child).get(0))?s.parentNode.replaceChild(i[o],s):e.log("Could not find part to override: "+o)}}function x(t){var n,i,r=s.virtualElements.childNodes(t.parent);if(!e.isArray(r)){var o=[];for(n=0,i=r.length;n<i;n++)o[n]=r[n];r=o}for(n=1,i=r.length;n<i;n++)s.removeNode(r[n])}function S(e){s.utils.domData.set(e,m,e.style.display),e.style.display="none"}function T(e){var t=s.utils.domData.get(e,m);e.style.display="none"===t?"block":t}function A(e){var t=e.getAttribute("data-bind");if(!t)return!1;for(var n=0,i=g.length;n<i;n++)if(t.indexOf(g[n])>-1)return!0;return!1}return l={composeBindings:g,convertTransitionToModuleId:function(e){return"transitions/"+e},defaultTransitionName:null,current:{complete:function(e){d.push(e)}},addBindingHandler:function(e,t,n){var i,r,o="composition-handler-"+e;for(i in t=t||s.bindingHandlers[e],n=n||function(){},r=s.bindingHandlers[e]={init:function(e,i,r,a,c){if(h>0){var u={trigger:s.observable(null)};l.current.complete(function(){t.init&&t.init(e,i,r,a,c),t.update&&(s.utils.domData.set(e,o,t),u.trigger("trigger"))}),s.utils.domData.set(e,o,u)}else s.utils.domData.set(e,o,t),t.init&&t.init(e,i,r,a,c);return n(e,i,r,a,c)},update:function(e,t,n,i,r){var a=s.utils.domData.get(e,o);if(a.update)return a.update(e,t,n,i,r);a.trigger&&a.trigger()}},t)"init"!==i&&"update"!==i&&(r[i]=t[i])},getParts:function(e,t){if(t=t||{},!e)return t;void 0===e.length&&(e=[e]);for(var n=0,i=e.length;n<i;n++){var r,o=e[n];o.getAttribute&&((r=o.getAttribute("data-part"))&&(t[r]=o),o.hasChildNodes()&&!A(o)&&l.getParts(o.childNodes,t))}return t},cloneNodes:w,finalize:function(t,n){if(void 0===t.transition&&(t.transition=this.defaultTransitionName),t.child||t.activeView)if(function(t){if(e.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId)return t.activeView.getAttribute("data-view")!=t.child.getAttribute("data-view")}return!0}return!1}(t)){var r=this.convertTransitionToModuleId(t.transition);e.acquire(r).then(function(e){t.transition=e,e(t).then(function(){if(t.cacheViews){if(t.activeView){var e=i.getBindingInstruction(t.activeView);e&&null!=e.cacheViews&&!e.cacheViews?s.removeNode(t.activeView):S(t.activeView)}}else t.child?x(t):s.virtualElements.emptyNode(t.parent);t.child&&T(t.child),t.triggerAttach(t,n),b(t,n)})}).fail(function(e){v(t,"Failed to load transition ("+r+"). Details: "+e.message,n)})}else{if(t.child!=t.activeView){if(t.cacheViews&&t.activeView){var o=i.getBindingInstruction(t.activeView);!o||null!=o.cacheViews&&!o.cacheViews?s.removeNode(t.activeView):S(t.activeView)}t.child?(t.cacheViews||x(t),T(t.child)):t.cacheViews||s.virtualElements.emptyNode(t.parent)}t.triggerAttach(t,n),b(t,n)}else t.cacheViews||s.virtualElements.emptyNode(t.parent),t.triggerAttach(t,n),b(t,n)},bindAndShow:function(t,o,a,u){a.child=t,a.parent.__composition_context=a,a.cacheViews?a.composingNewView=-1==s.utils.arrayIndexOf(a.viewElements,t):a.composingNewView=!0,function(t,i,r,o){if(r)i();else if(t.activate&&t.model&&t.model.activate){var a;try{(a=e.isArray(t.activationData)?t.model.activate.apply(t.model,t.activationData):t.model.activate(t.activationData))&&a.then?a.then(i,function(e){v(t,e,o),i()}):a||void 0===a?i():b(t,o)}catch(n){v(t,n,o)}}else i()}(a,function(){if(a.parent.__composition_context==a){try{delete a.parent.__composition_context}catch(n){a.parent.__composition_context=void 0}if(a.binding&&a.binding(a.child,a.parent,a),a.preserveContext&&a.bindingContext)a.composingNewView&&(a.parts&&_(a),S(t),s.virtualElements.prepend(a.parent,t),i.bindContext(a.bindingContext,t,a.model,a.as));else if(t){var e=a.model||c;if(s.dataFor(t)!=e){if(!a.composingNewView)return s.removeNode(t),void r.createView(t.getAttribute("data-view")).then(function(e){l.bindAndShow(e,o,a,!0)});a.parts&&_(a),S(t),s.virtualElements.prepend(a.parent,t),i.bind(e,t)}}l.finalize(a,o)}else b(a,o)},u,o)},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.area,e.viewElements)},getSettings:function(t,n){var i=t(),a=s.utils.unwrapObservable(i)||{},l=o.isActivator(i);if(e.isString(a))return a=r.isViewUrl(a)?{view:a}:{model:a,activate:!l};if(e.getModuleId(a))return a={model:a,activate:!l};for(var c in!l&&a.model&&(l=o.isActivator(a.model)),a)-1!=s.utils.arrayIndexOf(f,c)?a[c]=s.utils.unwrapObservable(a[c]):a[c]=a[c];return l?a.activate=!1:void 0===a.activate&&(a.activate=!0),a},executeStrategy:function(e,t){e.strategy(e).then(function(n){l.bindAndShow(n,t,e)})},inject:function(n,i){n.model?n.view?t.locateView(n.view,n.area,n.viewElements).then(function(e){l.bindAndShow(e,i,n)}):(n.strategy||(n.strategy=this.defaultStrategy),e.isString(n.strategy)?e.acquire(n.strategy).then(function(e){n.strategy=e,l.executeStrategy(n,i)}).fail(function(e){v(n,"Failed to load view strategy ("+n.strategy+"). Details: "+e.message,i)}):this.executeStrategy(n,i)):this.bindAndShow(null,i,n)},compose:function(n,i,r,o){h++,o||(i=l.getSettings(function(){return i},n)),i.compositionComplete&&d.push(function(){i.compositionComplete(i.child,i.parent,i)}),d.push(function(){i.composingNewView&&i.model&&i.model.compositionComplete&&i.model.compositionComplete(i.child,i.parent,i)});var a=function(e){for(var t=[],n={childElements:t,activeView:null},i=s.virtualElements.firstChild(e);i;)1==i.nodeType&&(t.push(i),i.getAttribute(u)&&(n.activeView=i)),i=s.virtualElements.nextSibling(i);return n.activeView||(n.activeView=t[0]),n}(n);i.activeView=a.activeView,i.parent=n,i.triggerAttach=y,i.bindingContext=r,i.cacheViews&&!i.viewElements&&(i.viewElements=a.childElements),i.model?e.isString(i.model)?e.acquire(i.model).then(function(t){i.model=e.resolveObject(t),l.inject(i,n)}).fail(function(e){v(i,"Failed to load composed module ("+i.model+"). Details: "+e.message,n)}):l.inject(i,n):i.view?(i.area=i.area||"partial",i.preserveContext=!0,t.locateView(i.view,i.area,i.viewElements).then(function(e){l.bindAndShow(e,n,i)})):this.bindAndShow(null,n,i)}},s.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,o){var a=l.getSettings(t,e);if(a.mode){var c=s.utils.domData.get(e,p);if(!c){var u=s.virtualElements.childNodes(e);c={},"inline"===a.mode?c.view=r.ensureSingleElement(u):"templated"===a.mode&&(c.parts=w(u)),s.virtualElements.emptyNode(e),s.utils.domData.set(e,p,c)}"inline"===a.mode?a.view=c.view.cloneNode(!0):"templated"===a.mode&&(a.parts=c.parts),a.preserveContext=!0}l.compose(e,a,o,!0)}},s.virtualElements.allowedBindings.compose=!0,l}),define("durandal/events",["durandal/system"],function(e){var t=/\s+/,n=function(){},i=function(e,t){this.owner=e,this.events=t};return i.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},i.prototype.on=i.prototype.then,i.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,r){var o,a;if(n){for(o=this.callbacks||(this.callbacks={}),e=e.split(t);a=e.shift();)(o[a]||(o[a]=[])).push(n,r);return this}return new i(this,e)},n.prototype.off=function(n,i,r){var o,a,s,l;if(!(a=this.callbacks))return this;if(!(n||i||r))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(a);o=n.shift();)if((s=a[o])&&(i||r))for(l=s.length-2;l>=0;l-=2)i&&s[l]!==i||r&&s[l+1]!==r||s.splice(l,2);else delete a[o];return this},n.prototype.trigger=function(e){var n,i,r,o,a,s,l,c;if(!(i=this.callbacks))return this;for(c=[],e=e.split(t),o=1,a=arguments.length;o<a;o++)c[o-1]=arguments[o];for(;n=e.shift();){if((l=i.all)&&(l=l.slice()),(r=i[n])&&(r=r.slice()),r)for(o=0,a=r.length;o<a;o+=2)r[o].apply(r[o+1]||this,c);if(l)for(s=[n].concat(c),o=0,a=l.length;o<a;o+=2)l[o].apply(l[o+1]||this,s)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n}),define("durandal/app",["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,i,r){var o,a=[],s=[];return o={title:"Application",configurePlugins:function(t,n){var i=e.keys(t);-1===(n=n||"plugins/").indexOf("/",n.length-1)&&(n+="/");for(var r=0;r<i.length;r++){var o=i[r];a.push(n+o),s.push(t[o])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){r(function(){e.defer(function(t){0!=a.length?e.acquire(a).then(function(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.install){var o=s[i];e.isObject(o)||(o={}),r.install(o),e.log("Plugin:Installed "+a[i])}else e.log("Plugin:Loaded "+a[i])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}):t.resolve()}).promise().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(i,r,o){var a,s={activate:!0,transition:r};function l(){if(s.model)if(s.model.canActivate)try{var t=s.model.canActivate();t&&t.then?t.then(function(e){e&&n.compose(a,s)}).fail(function(t){e.error(t)}):t&&n.compose(a,s)}catch(i){e.error(i)}else n.compose(a,s);else n.compose(a,s)}a=!o||e.isString(o)?document.getElementById(o||"applicationHost"):o,e.isString(i)&&t.isViewUrl(i)?s.view=i:s.model=i,e.isString(s.model)?e.acquire(s.model).then(function(t){s.model=e.resolveObject(t),l()}).fail(function(t){e.error("Failed to load root module ("+s.model+"). Details: "+t.message)}):l()}},i.includeIn(o),o}),define("plugins/dialog",["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(e,t,n,i,r,o,a){var s,l={},c=a.observable(0),u=function(e,t,n,i,r){this.message=e,this.title=t||u.defaultTitle,this.options=n||u.defaultOptions,this.autoclose=i||!1,this.settings=o.extend({},u.defaultSettings,r)};return u.prototype.selectOption=function(e){s.close(this,e)},u.prototype.getView=function(){return r.processMarkup(u.defaultViewMarkup)},u.setViewUrl=function(e){delete u.prototype.getView,u.prototype.viewUrl=e},u.defaultTitle=t.title||"Application",u.defaultOptions=["Ok"],u.defaultSettings={buttonClass:"btn btn-default",primaryButtonClass:"btn-primary autofocus",secondaryButtonClass:"",class:"modal-content messageBox",style:null},u.setDefaults=function(e){o.extend(u.defaultSettings,e)},u.prototype.getButtonClass=function(e){var t="";return this.settings&&(this.settings.buttonClass&&(t=this.settings.buttonClass),0===e()&&this.settings.primaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.primaryButtonClass),e()>0&&this.settings.secondaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.secondaryButtonClass)),t},u.prototype.getClass=function(){return this.settings?this.settings.class:"messageBox"},u.prototype.getStyle=function(){return this.settings?this.settings.style:null},u.prototype.getButtonText=function(t){var n=o.type(t);return"string"===n?t:"object"===n?"string"===o.type(t.text)?t.text:(e.error("The object for a MessageBox button does not have a text property that is a string."),null):(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},u.prototype.getButtonValue=function(t){var n=o.type(t);return"string"===n?t:"object"===n?"undefined"===o.type(t.value)?(e.error("The object for a MessageBox button does not have a value property defined."),null):t.value:(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},u.defaultViewMarkup=['<div data-view="plugins/messageBox" data-bind="css: getClass(), style: getStyle()">','<div class="modal-header">','<h3 data-bind="html: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="html: message"></p>',"</div>",'<div class="modal-footer">',"\x3c!-- ko foreach: options --\x3e",'<button data-bind="click: function () { $parent.selectOption($parent.getButtonValue($data)); }, text: $parent.getButtonText($data), css: $parent.getButtonClass($index)"></button>',"\x3c!-- /ko --\x3e",'<div style="clear:both;"></div>',"</div>","</div>"].join("\n"),s={MessageBox:u,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:a.computed(function(){return c()>0}),getContext:function(e){return l[e||"default"]},addContext:function(e,t){t.name=e,l[e]=t,this["show"+e.substr(0,1).toUpperCase()+e.substr(1)]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1,transition:!1};return t.binding&&(n.binding=t.binding),t.attached&&(n.attached=t.attached),t.compositionComplete&&(n.compositionComplete=t.compositionComplete),n},getDialog:function(e){if(e)return e.__dialog__},close:function(e){var t=this.getDialog(e);if(t){var n=Array.prototype.slice.call(arguments,1);t.close.apply(t,n)}},show:function(t,r,o){var a=this,s=l[o||"default"];return e.defer(function(o){var l;(l=t,e.defer(function(t){e.isString(l)?e.acquire(l).then(function(n){t.resolve(e.resolveObject(n))}).fail(function(t){e.error("Failed to load dialog module ("+l+"). Details: "+t.message)}):t.resolve(l)}).promise()).then(function(e){var t=i.create();t.activateItem(e,r).then(function(i){if(i){var r=e.__dialog__={owner:e,context:s,activator:t,close:function(){var n=arguments;t.deactivateItem(e,!0).then(function(t){t&&(c(c()-1),s.removeHost(r),delete e.__dialog__,0===n.length?o.resolve():1===n.length?o.resolve(n[0]):o.resolve.apply(o,n))})}};r.settings=a.createCompositionSettings(e,s),s.addHost(r),c(c()+1),n.compose(r.host,r.settings)}else o.resolve(!1)})})}).promise()},showMessage:function(t,n,i,r,o){return e.isString(this.MessageBox)?s.show(this.MessageBox,[t,n||u.defaultTitle,i||u.defaultOptions,r||!1,o||{}]):s.show(new this.MessageBox(t,n,i,r,o))},install:function(e){t.showDialog=function(e,t,n){return s.show(e,t,n)},t.closeDialog=function(){return s.close.apply(s,arguments)},t.showMessage=function(e,t,n,i,r){return s.showMessage(e,t,n,i,r)},e.messageBox&&(s.MessageBox=e.messageBox),e.messageBoxView&&(s.MessageBox.prototype.getView=function(){return r.processMarkup(e.messageBoxView)}),e.messageBoxViewUrl&&s.MessageBox.setViewUrl(e.messageBoxViewUrl)}},s.addContext("default",{blockoutOpacity:.2,removeDelay:200,minYMargin:5,minXMargin:5,addHost:function(e){var t=o("body"),n=o('<div class="modalBlockout"></div>').css({"z-index":s.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),i=o('<div class="modalHost"></div>').css({"z-index":s.getNextZIndex()}).appendTo(t);if(e.host=i.get(0),e.blockout=n.get(0),!s.isOpen()){e.oldBodyMarginRight=t.css("margin-right"),e.oldInlineMarginRight=t.get(0).style.marginRight;var r=o("html"),a=t.outerWidth(!0),l=r.scrollTop();o("html").css("overflow-y","hidden");var c=o("body").outerWidth(!0);t.css("margin-right",c-a+parseInt(e.oldBodyMarginRight,10)+"px"),r.scrollTop(l)}},removeHost:function(e){if(o(e.host).css("opacity",0),o(e.blockout).css("opacity",0),setTimeout(function(){a.removeNode(e.host),a.removeNode(e.blockout)},this.removeDelay),!s.isOpen()){var t=o("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),e.oldInlineMarginRight?o("body").css("margin-right",e.oldBodyMarginRight):o("body").css("margin-right","")}},attached:function(e){o(e).css("visibility","hidden")},compositionComplete:function(e,t,n){var i=s.getDialog(n.model),r=o(e),a=r.find("img").filter(function(){var e=o(this);return!(this.style.width&&this.style.height||e.attr("width")&&e.attr("height"))});r.data("predefinedWidth",r.get(0).style.width);var l=function(e,t){setTimeout(function(){var n=o(e);t.context.reposition(e),o(t.host).css("opacity",1),n.css("visibility","visible"),n.find(".autofocus").first().focus()},1)};l(e,i),a.load(function(){l(e,i)}),(r.hasClass("autoclose")||n.model.autoclose)&&o(i.blockout).click(function(){i.close()})},reposition:function(e){var t=o(e),n=o(window);t.data("predefinedWidth")||t.css({width:""}),t.css({height:""});var i=t.outerWidth(!1),r=t.outerHeight(!1),a=n.height()-2*this.minYMargin,s=n.width()-2*this.minXMargin,l=Math.min(r,a),c=Math.min(i,s);t.css({"margin-top":(-l/2).toString()+"px","margin-left":(-c/2).toString()+"px"}),r>a?t.css("overflow-y","auto").outerHeight(a):t.css({"overflow-y":"",height:""}),i>s?t.css("overflow-x","auto").outerWidth(s):(t.css("overflow-x",""),t.data("predefinedWidth")?t.css("width",t.data("predefinedWidth")):t.outerWidth(c))}}),s}),define("plugins/history",["durandal/system","jquery"],function(e,t){var n=/^[#\/]|\s+$/g,i=/^\/+|\/+$/g,r=/msie [\w.]+/,o=/\/$/;function a(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");s.history.replaceState?s.history.replaceState({},document.title,i+"#"+t):e.replace(i+"#"+t)}else e.hash="#"+t}var s={interval:50,active:!1};return"undefined"!=typeof window&&(s.location=window.location,s.history=window.history),s.getHash=function(e){var t=(e||s).location.href.match(/#(.*)$/);return t?t[1]:""},s.getFragment=function(e,t){if(null==e)if(s._hasPushState||!s._wantsHashChange||t){e=s.location.pathname+s.location.search;var i=s.root.replace(o,"");e.indexOf(i)||(e=e.substr(i.length))}else e=s.getHash();return e.replace(n,"")},s.activate=function(o){s.active&&e.error("History has already been activated."),s.active=!0,s.options=e.extend({},{root:"/"},s.options,o),s.root=s.options.root,s._wantsHashChange=!1!==s.options.hashChange,s._wantsPushState=!!s.options.pushState,s._hasPushState=!!(s.options.pushState&&s.history&&s.history.pushState);var a=s.getFragment(),l=document.documentMode,c=r.exec(navigator.userAgent.toLowerCase())&&(!l||l<=7);s.root=("/"+s.root+"/").replace(i,"/"),c&&s._wantsHashChange&&(s.iframe=t('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,s.navigate(a,!1)),s._hasPushState?t(window).on("popstate",s.checkUrl):s._wantsHashChange&&"onhashchange"in window&&!c?t(window).on("hashchange",s.checkUrl):s._wantsHashChange&&(s._checkUrlInterval=setInterval(s.checkUrl,s.interval)),s.fragment=a;var u=s.location,d=u.pathname.replace(/[^\/]$/,"$&/")===s.root;if(s._wantsHashChange&&s._wantsPushState){if(!s._hasPushState&&!d)return s.fragment=s.getFragment(null,!0),s.location.replace(s.root+s.location.search+"#"+s.fragment),!0;s._hasPushState&&d&&u.hash&&(this.fragment=s.getHash().replace(n,""),this.history.replaceState({},document.title,s.root+s.fragment+u.search))}if(!s.options.silent)return s.loadUrl(o.startRoute)},s.deactivate=function(){t(window).off("popstate",s.checkUrl).off("hashchange",s.checkUrl),clearInterval(s._checkUrlInterval),s.active=!1},s.checkUrl=function(){var e=s.getFragment();if(e===s.fragment&&s.iframe&&(e=s.getFragment(s.getHash(s.iframe))),e===s.fragment)return!1;s.iframe&&s.navigate(e,!1),s.loadUrl()},s.loadUrl=function(e){var t=s.fragment=s.getFragment(e);return!!s.options.routeHandler&&s.options.routeHandler(t)},s.navigate=function(t,n){if(!s.active)return!1;if(void 0===n?n={trigger:!0}:e.isBoolean(n)&&(n={trigger:n}),t=s.getFragment(t||""),s.fragment!==t){s.fragment=t;var i=s.root+t;if(""===t&&"/"!==i&&(i=i.slice(0,-1)),s._hasPushState)s.history[n.replace?"replaceState":"pushState"]({},document.title,i);else{if(!s._wantsHashChange)return s.location.assign(i);a(s.location,t,n.replace),s.iframe&&t!==s.getFragment(s.getHash(s.iframe))&&(n.replace||s.iframe.document.open().close(),a(s.iframe.location,t,n.replace))}return n.trigger?s.loadUrl(t):void 0}},s.navigateBack=function(){s.history.back()},s}),define("plugins/router",["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(e,t,n,i,r,o,a,s){var l,c,u=/\((.*?)\)/g,d=/(\(\?)?:\w+/g,h=/\*\w+/g,p=/[\-{}\[\]+?.,\\\^$|#\s]/g,f=/\/$/,m=!1,g="/",v="/";function b(e){return e=e.replace(p,"\\$&").replace(u,"(?:$1)?").replace(d,function(e,t){return t?e:"([^/]+)"}).replace(h,"(.*?)"),new RegExp("^"+e+"$",m?void 0:"i")}function y(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)}function w(e,t){return-1!==e.indexOf(t,e.length-t.length)}function _(e){return e.queryString?e.fragment+"?"+e.queryString:e.fragment}var x=function(){var r,s,u,h=[],p=a.observable(!1),m=n.create(),S={handlers:[],routes:[],navigationModel:a.observableArray([]),activeItem:m,isNavigating:a.computed(function(){var e=m(),t=p(),n=!!(e&&e.router&&e.router!=S&&e.router.isNavigating());return t||n}),activeInstruction:a.observable(null),__router__:!0};function T(e,t){return e.router&&e.router.parent==t}function A(e){s&&s.config.isActive&&s.config.isActive(e)}function C(t,n){e.log("Navigation Cancelled"),S.activeInstruction(s),S.navigate(g,!1),p(!1),c.explicitNavigation=!1,c.navigatingBack=!1,S.trigger("router:navigation:cancelled",t,n,S)}function E(t){e.log("Navigation Redirecting"),p(!1),c.explicitNavigation=!1,c.navigatingBack=!1,S.navigate(t,{trigger:!0,replace:!0})}function k(t,n,i){c.navigatingBack=!c.explicitNavigation&&r!=i.fragment,S.trigger("router:route:activating",n,i,S);var o={canDeactivate:!S.parent};t.activateItem(n,i.params,o).then(function(o){if(o){var a=r,u=T(n,S),d="";if(S.parent?u||(d="lastChildRouter"):d=u?"rootRouterWithChild":"rootRouter",function(t,n,i){e.log("Navigation Complete",t,n);var o=e.getModuleId(r);o&&S.trigger("router:navigation:from:"+o),r=t,A(!1),s=n,A(!0);var a=e.getModuleId(r);switch(a&&S.trigger("router:navigation:to:"+a),T(t,S)||S.updateDocumentTitle(t,n),i){case"rootRouter":g=_(s);break;case"rootRouterWithChild":v=_(s);break;case"lastChildRouter":g=v}c.explicitNavigation=!1,c.navigatingBack=!1,S.trigger("router:navigation:complete",t,n,S)}(n,i,d),u){n.router.trigger("router:route:before-child-routes",n,i,S);var h=i.fragment;i.queryString&&(h+="?"+i.queryString),n.router.loadUrl(h)}a==n&&(S.attached(),S.compositionComplete())}else t.settings.lifecycleData&&t.settings.lifecycleData.redirect?E(t.settings.lifecycleData.redirect):C(n,i);l&&(l.resolve(),l=null)}).fail(function(t){e.error(t)})}function I(t,n,i){S.guardRoute?function(t,n,i){var r=S.guardRoute(n,i);r||""===r?r.then?r.then(function(r){r?e.isString(r)?E(r):k(t,n,i):C(n,i)}):e.isString(r)?E(r):k(t,n,i):C(n,i)}(t,n,i):k(t,n,i)}function P(){if(!p()){var t=h.shift();if(h=[],t)if(p(!0),S.activeInstruction(t),S.trigger("router:navigation:processing",t,S),function(e){return s&&s.config.moduleId==e.config.moduleId&&r&&(r.canReuseForRoute&&r.canReuseForRoute.apply(r,e.params)||!r.canReuseForRoute&&r.router&&r.router.loadUrl)}(t)){var i=n.create();i.forceActiveItem(r),i.settings.areSameItem=m.settings.areSameItem,i.settings.findChildActivator=m.settings.findChildActivator,I(i,r,t)}else t.config.moduleId?e.acquire(t.config.moduleId).then(function(n){var i=e.resolveObject(n);t.config.viewUrl&&(i.viewUrl=t.config.viewUrl),I(m,i,t)}).fail(function(n){C(null,t),e.error("Failed to load routed module ("+t.config.moduleId+"). Details: "+n.message,n)}):I(m,{viewUrl:t.config.viewUrl,canReuseForRoute:function(){return!0}},t)}}function D(e){h.unshift(e),P()}function O(e,t,n){for(var i=e.exec(t).slice(1),r=0;r<i.length;r++){var o=i[r];i[r]=o?decodeURIComponent(o):null}var a=S.parseQueryString(n);return a&&i.push(a),{params:i,queryParams:a}}function M(t){S.trigger("router:route:before-config",t,S),e.isRegExp(t.route)?t.routePattern=t.route:(t.title=t.title||S.convertRouteToTitle(t.route),t.viewUrl||(t.moduleId=t.moduleId||S.convertRouteToModuleId(t.route)),t.hash=t.hash||S.convertRouteToHash(t.route),t.hasChildRoutes&&(t.route=t.route+"*childRoutes"),t.routePattern=b(t.route)),t.isActive=t.isActive||a.observable(!1),S.trigger("router:route:after-config",t,S),S.routes.push(t),S.route(t.routePattern,function(e,n){var i=O(t.routePattern,e,n);D({fragment:e,queryString:n,config:t,params:i.params,queryParams:i.queryParams})})}function L(e){var n=a.unwrap(t.title);document.title=n?e+" | "+n:e}return i.includeIn(S),m.settings.areSameItem=function(e,t,n,i){return e==t&&function(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!=t[n])return!1;return!0}(n,i)},m.settings.findChildActivator=function(e){return e&&e.router&&e.router.parent==S?e.router.activeItem:null},S.parseQueryString=function(t){var n,i;if(!t)return null;if(0==(i=t.split("&")).length)return null;n={};for(var r=0;r<i.length;r++){var o=i[r];if(""!==o){var a=o.indexOf("="),s=-1===a?o:o.substr(0,a),l=-1===a?null:decodeURIComponent(o.substr(a+1).replace(/\+/g," ")),c=n[s];c?e.isArray(c)?c.push(l):n[s]=[c,l]:n[s]=l}}return n},S.route=function(e,t){S.handlers.push({routePattern:e,callback:t})},S.loadUrl=function(t){var n=S.handlers,i=null,r=t,a=t.indexOf("?");if(-1!=a&&(r=t.substring(0,a),i=t.substr(a+1)),S.relativeToParentRouter){var l=this.parent.activeInstruction();(r=-1==a?l.params.join("/"):l.params.slice(0,-1).join("/"))&&"/"==r.charAt(0)&&(r=r.substr(1)),r||(r=""),r=r.replace("//","/").replace("//","/")}r=r.replace(f,"");for(var u=0;u<n.length;u++){var d=n[u];if(d.routePattern.test(r))return d.callback(r,i),!0}return e.log("Route Not Found",t,s),S.trigger("router:route:not-found",t,S),S.parent&&(g=v),o.navigate(g,{trigger:!1,replace:!0}),c.explicitNavigation=!1,c.navigatingBack=!1,!1},a.isObservable(t.title)&&t.title.subscribe(function(){var e=S.activeInstruction();L(null!=e?a.unwrap(e.config.title):"")}),S.updateDocumentTitle=function(e,n){var i=a.unwrap(t.title),r=n.config.title;u&&u.dispose(),r?a.isObservable(r)?(u=r.subscribe(L),L(r())):L(r):i&&(document.title=i)},S.navigate=function(t,n){return t&&-1!=t.indexOf("://")?(window.location.href=t,!0):((void 0===n||e.isBoolean(n)&&n||e.isObject(n)&&n.trigger)&&(c.explicitNavigation=!0),(e.isBoolean(n)&&!n||n&&null!=n.trigger&&!n.trigger)&&(g=t),o.navigate(t,n))},S.navigateBack=function(){o.navigateBack()},S.attached=function(){S.trigger("router:navigation:attached",r,s,S)},S.compositionComplete=function(){p(!1),S.trigger("router:navigation:composition-complete",r,s,S),P()},S.convertRouteToHash=function(e){if(e=e.replace(/\*.*$/,""),S.relativeToParentRouter){var t=S.parent.activeInstruction(),n=e?t.config.hash+"/"+e:t.config.hash;return o._hasPushState&&(n="/"+n),n=n.replace("//","/").replace("//","/")}return o._hasPushState?e:"#"+e},S.convertRouteToModuleId=function(e){return y(e)},S.convertRouteToTitle=function(e){var t=y(e);return t.substring(0,1).toUpperCase()+t.substring(1)},S.map=function(t,n){if(e.isArray(t)){for(var i=0;i<t.length;i++)S.map(t[i]);return S}return e.isString(t)||e.isRegExp(t)?(n?e.isString(n)&&(n={moduleId:n}):n={},n.route=t):n=t,function(t){if(e.isArray(t.route))for(var n=t.isActive||a.observable(!1),i=0,r=t.route.length;i<r;i++){var o=e.extend({},t);o.route=t.route[i],o.isActive=n,i>0&&delete o.nav,M(o)}else M(t);return S}(n)},S.buildNavigationModel=function(t){for(var n=[],i=S.routes,r=t||100,o=0;o<i.length;o++){var a=i[o];a.nav&&(e.isNumber(a.nav)||(a.nav=++r),n.push(a))}return n.sort(function(e,t){return e.nav-t.nav}),S.navigationModel(n),S},S.mapUnknownRoutes=function(t,n){var i="*catchall",r=b(i);return S.route(r,function(a,s){var l=O(r,a,s),c={fragment:a,queryString:s,config:{route:i,routePattern:r},params:l.params,queryParams:l.queryParams};if(t)if(e.isString(t))c.config.moduleId=t,n&&o.navigate(n,{trigger:!1,replace:!0});else if(e.isFunction(t)){var u=t(c);if(u&&u.then)return void u.then(function(){S.trigger("router:route:before-config",c.config,S),S.trigger("router:route:after-config",c.config,S),D(c)})}else c.config=t,c.config.route=i,c.config.routePattern=r;else c.config.moduleId=a;S.trigger("router:route:before-config",c.config,S),S.trigger("router:route:after-config",c.config,S),D(c)}),S},S.reset=function(){return s=r=void 0,S.handlers=[],S.routes=[],S.off(),delete S.options,S},S.makeRelative=function(t){return e.isString(t)&&(t={moduleId:t,route:t}),t.moduleId&&!w(t.moduleId,"/")&&(t.moduleId+="/"),t.route&&!w(t.route,"/")&&(t.route+="/"),t.fromParent&&(S.relativeToParentRouter=!0),S.on("router:route:before-config").then(function(e){t.moduleId&&(e.moduleId=t.moduleId+e.moduleId),t.route&&(""===e.route?e.route=t.route.substring(0,t.route.length-1):e.route=t.route+e.route)}),t.dynamicHash&&(S.on("router:route:after-config").then(function(e){e.routePattern=b(e.route?t.dynamicHash+"/"+e.route:t.dynamicHash),e.dynamicHash=e.dynamicHash||a.observable(e.hash)}),S.on("router:route:before-child-routes").then(function(e,t,n){for(var i=e.router,r=0;r<i.routes.length;r++){var o=i.routes[r],a=t.params.slice(0);o.hash=i.convertRouteToHash(o.route).replace(d,function(e){return a.length>0?a.shift():e}),o.dynamicHash(o.hash)}})),S},S.createChildRouter=function(){var e=x();return e.parent=S,e},S};return(c=x()).explicitNavigation=!1,c.navigatingBack=!1,c.makeRoutesCaseSensitive=function(){m=!0},c.targetIsThisWindow=function(e){var t=s(e.target).attr("target");return!t||t===window.name||"_self"===t||"top"===t&&window===window.top},c.activate=function(t){return e.defer(function(n){if(l=n,c.options=e.extend({routeHandler:c.loadUrl},c.options,t),o.activate(c.options),o._hasPushState)for(var i=c.routes,r=i.length;r--;){var a=i[r];a.hash=a.hash.replace("#","/")}var u=c.options.root&&new RegExp("^"+c.options.root+"/");s(document).delegate("a","click",function(e){if(!e.isDefaultPrevented())if(o._hasPushState){if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&c.targetIsThisWindow(e)){var t=s(this).attr("href");null==t||"#"===t.charAt(0)||/^[a-z]+:/i.test(t)||(c.explicitNavigation=!0,e.preventDefault(),u&&(t=t.replace(u,"")),o.navigate(t))}}else c.explicitNavigation=!0}),o.options.silent&&l&&(l.resolve(),l=null)}).promise()},c.deactivate=function(){c.activeItem(null),o.deactivate()},c.install=function(){a.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,o){var s=a.utils.unwrapObservable(t())||{};if(s.__router__)s={model:s.activeItem(),attached:s.attached,compositionComplete:s.compositionComplete,activate:!1};else{var l=a.utils.unwrapObservable(s.router||i.router)||c;s.model=l.activeItem(),s.attached=l.attached,s.compositionComplete=l.compositionComplete,s.activate=!1}r.compose(e,s,o)}},a.virtualElements.allowedBindings.router=!0},c}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});return setTimeout(function(){n||e(i).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.4.1",n.TRANSITION_DURATION=150,n.prototype.close=function(t){var i=e(this),r=i.attr("data-target");r||(r=(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),r="#"===r?[]:r;var o=e(document).find(r);function a(){o.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.isLoading=!1};function n(n){return this.each(function(){var i=e(this),r=i.data("bs.button"),o="object"==typeof n&&n;r||i.data("bs.button",r=new t(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})}t.VERSION="3.4.1",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();t+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy(function(){i[r](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var i=e(t.target).closest(".btn");n.call(i,"toggle"),e(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),i.is("input,button")?i.trigger("focus"):i.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};function n(n){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n),a="string"==typeof n?n:o.slide;r||i.data("bs.carousel",r=new t(this,o)),"number"==typeof n?r.to(n):a?r[a]():o.interval&&r.pause().cycle()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);if(("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap)return t;var i=(n+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(i)},t.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(!this.sliding)return this.slide("next")},t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},t.prototype.slide=function(n,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(n,r),a=this.interval,s="next"==n?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(n),"object"==typeof o&&o.length&&o[0].offsetWidth,r.addClass(s),o.addClass(s),r.one("bsTransitionEnd",function(){o.removeClass([n,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(t){var i=e(this),r=i.attr("href");r&&(r=r.replace(/.*(?=#[^\s]+$)/,""));var o=i.attr("data-target")||r,a=e(document).find(o);if(a.hasClass("carousel")){var s=e.extend({},a.data(),i.data()),l=i.attr("data-slide-to");l&&(s.interval=!1),n.call(a,s),l&&a.data("bs.carousel").to(l),t.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(document).find(i)}function i(n){return this.each(function(){var i=e(this),r=i.data("bs.collapse"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!r&&o.toggle&&/show|hide/.test(n)&&(o.toggle=!1),r||i.data("bs.collapse",r=new t(this,o)),"string"==typeof n&&r[n]()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(n=r.data("bs.collapse"))&&n.transitioning)){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(i.call(r,"hide"),n||r.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[a](this.$element[0][l])}}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=e.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return r.call(this);this.$element[i](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,i){var r=e(i);this.addAriaAndCollapsedClass(n(r),r)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var r=e(this);r.attr("data-target")||t.preventDefault();var o=n(r),a=o.data("bs.collapse")?"toggle":r.data();i.call(o,a)})}(jQuery),function(e){"use strict";var t='[data-toggle="dropdown"]',n=function(t){e(t).on("click.bs.dropdown",this.toggle)};function i(t){var n=t.attr("data-target");n||(n=(n=t.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i="#"!==n?e(document).find(n):null;return i&&i.length?i:t.parent()}function r(n){n&&3===n.which||(e(".dropdown-backdrop").remove(),e(t).each(function(){var t=e(this),r=i(t),o={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(r[0],n.target)||(r.trigger(n=e.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(t.attr("aria-expanded","false"),r.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}n.VERSION="3.4.1",n.prototype.toggle=function(t){var n=e(this);if(!n.is(".disabled, :disabled")){var o=i(n),a=o.hasClass("open");if(r(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",r);var s={relatedTarget:this};if(o.trigger(t=e.Event("show.bs.dropdown",s)),t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},n.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var o=i(r),a=o.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&o.find(t).trigger("focus"),r.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),r=i.data("bs.dropdown");r||i.data("bs.dropdown",r=new n(this)),"string"==typeof t&&r[t].call(i)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",t,n.prototype.toggle).on("keydown.bs.dropdown.data-api",t,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(e){"use strict";var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function n(n,i){return this.each(function(){var r=e(this),o=r.data("bs.modal"),a=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);o||r.data("bs.modal",o=new t(this,a)),"string"==typeof n?o[n](i):a.show&&o.show(i)})}t.VERSION="3.4.1",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var i=this,r=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:n});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(t.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):a()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var n=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",t+n),e(this.fixedContent).each(function(t,i){var r=i.style.paddingRight,o=e(i).css("padding-right");e(i).data("padding-right",r).css("padding-right",parseFloat(o)+n+"px")}))},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),e(this.fixedContent).each(function(t,n){var i=e(n).data("padding-right");e(n).removeData("padding-right"),n.style.paddingRight=i||""})},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),r=i.attr("href"),o=i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,""),a=e(document).find(o),s=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},a.data(),i.data());i.is("a")&&t.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),n.call(a,s,this)})}(jQuery),function(e){"use strict";var t=["sanitize","whiteList","sanitizeFn"],n=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],i={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,o=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function a(t,i){var a=t.nodeName.toLowerCase();if(-1!==e.inArray(a,i))return-1===e.inArray(a,n)||Boolean(t.nodeValue.match(r)||t.nodeValue.match(o));for(var s=e(i).filter(function(e,t){return t instanceof RegExp}),l=0,c=s.length;l<c;l++)if(a.match(s[l]))return!0;return!1}function s(t,n,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;var r=document.implementation.createHTMLDocument("sanitization");r.body.innerHTML=t;for(var o=e.map(n,function(e,t){return t}),s=e(r.body).find("*"),l=0,c=s.length;l<c;l++){var u=s[l],d=u.nodeName.toLowerCase();if(-1!==e.inArray(d,o))for(var h=e.map(u.attributes,function(e){return e}),p=[].concat(n["*"]||[],n[d]||[]),f=0,m=h.length;f<m;f++)a(h[f],p)||u.removeAttribute(h[f].nodeName);else u.parentNode.removeChild(u)}return r.body.innerHTML}var l=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};l.VERSION="3.4.1",l.TRANSITION_DURATION=150,l.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:i},l.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(document).find(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},l.prototype.getDefaults=function(){return l.DEFAULTS},l.prototype.getOptions=function(n){var i=this.$element.data();for(var r in i)i.hasOwnProperty(r)&&-1!==e.inArray(r,t)&&delete i[r];return(n=e.extend({},this.getDefaults(),i,n)).delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),n.sanitize&&(n.template=s(n.template,n.whiteList,n.sanitizeFn)),n},l.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},l.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},l.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},l.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},l.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var i=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,c=s.test(a);c&&(a=a.replace(s,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(e(document).find(this.options.container)):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=r[0].offsetWidth,h=r[0].offsetHeight;if(c){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&u.bottom+h>f.bottom?"top":"top"==a&&u.top-h<f.top?"bottom":"right"==a&&u.right+d>f.width?"left":"left"==a&&u.left-d<f.left?"right":a,r.removeClass(p).addClass(a)}var m=this.getCalculatedOffset(a,u,d,h);this.applyPlacement(m,a);var g=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(l.TRANSITION_DURATION):g()}},l.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),h=d?2*u.left-r+l:2*u.top-o+c,p=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(h,i[0][p],d)},l.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},l.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();this.options.html?(this.options.sanitize&&(t=s(t,this.options.whiteList,this.options.sanitizeFn)),e.find(".tooltip-inner").html(t)):e.find(".tooltip-inner").text(t),e.removeClass("fade in top bottom left right")},l.prototype.hide=function(t){var n=this,i=e(this.$tip),r=e.Event("hide.bs."+this.type);function o(){"in"!=n.hoverState&&i.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),t&&t()}if(this.$element.trigger(r),!r.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(l.TRANSITION_DURATION):o(),this.hoverState=null,this},l.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},l.prototype.hasContent=function(){return this.getTitle()},l.prototype.getPosition=function(t){var n=(t=t||this.$element)[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=i?{top:0,left:0}:o?null:t.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,s,l,a)},l.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},l.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var c=t.left-o,u=t.left+o+n;c<a.left?r.left=a.left-c:u>a.right&&(r.left=a.left+a.width-u)}return r},l.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},l.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},l.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},l.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},l.prototype.enable=function(){this.enabled=!0},l.prototype.disable=function(){this.enabled=!1},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled},l.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},l.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})},l.prototype.sanitizeHtml=function(e){return s(e,this.options.whiteList,this.options.sanitizeFn)};var c=e.fn.tooltip;e.fn.tooltip=function(t){return this.each(function(){var n=e(this),i=n.data("bs.tooltip"),r="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||n.data("bs.tooltip",i=new l(this,r)),"string"==typeof t&&i[t]())})},e.fn.tooltip.Constructor=l,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=c,this}}(jQuery),function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.4.1",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype)).constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();if(this.options.html){var i=typeof n;this.options.sanitize&&(t=this.sanitizeHtml(t),"string"===i&&(n=this.sanitizeHtml(n))),e.find(".popover-title").html(t),e.find(".popover-content").children().detach().end()["string"===i?"html":"append"](n)}else e.find(".popover-title").text(t),e.find(".popover-content").children().detach().end().text(n);e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),r=i.data("bs.popover"),o="object"==typeof n&&n;!r&&/destroy|hide/.test(n)||(r||i.data("bs.popover",r=new t(this,o)),"string"==typeof n&&r[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(n).is(document.body)?e(window):e(n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,o)),"string"==typeof n&&r[n]()})}t.VERSION="3.4.1",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),r=t.data("target")||t.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[n]().top+i,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)a!=o[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),function(e){"use strict";var t=function(t){this.element=e(t)};function n(n){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new t(this)),"string"==typeof n&&r[n]()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(document).find(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},t.prototype.activate=function(n,i,r){var o=i.find("> .active"),a=r&&e.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(t.TRANSITION_DURATION):s(),o.removeClass("in")};var i=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i);var r=this.options.target===t.DEFAULTS.target?e(this.options.target):e(document).find(this.options.target);this.$target=r.on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each(function(){var i=e(this),r=i.data("bs.affix"),o="object"==typeof n&&n;r||i.data("bs.affix",r=new t(this,o)),"string"==typeof n&&r[n]()})}t.VERSION="3.4.1",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return r<n&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=o.top)&&"bottom":!(r+a<=e-i)&&"bottom";var s=null==this.affixed,l=s?r:o.top;return null!=n&&r<=n?"top":null!=i&&l+(s?a:t)>=e-i&&"bottom"},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),i=this.options.offset,r=i.top,o=i.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof i&&(o=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element));var s=this.getState(a,n,r,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-n-o})}};var i=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),n.call(t,i)})})}(jQuery),define("bootstrap",["jquery"],function(){}),
/*! version : 4.17.37
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
function(e){"use strict";if("function"==typeof define&&define.amd)define("datetimepicker",["jquery","moment"],e);else if("object"==typeof exports)e(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){"use strict";if(!t)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var n=function(n,i){var r,o,a,s,l,c,u,d,h,p={},f=!0,m=!1,g=!1,v=0,b=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],y=["days","months","years","decades"],w=["top","bottom","auto"],_=["left","right","auto"],x=["default","top","bottom"],S={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},T={},A=function(e){var n,r,o,a,s=!1;return void 0!==t.tz&&void 0!==i.timeZone&&null!==i.timeZone&&""!==i.timeZone&&(s=!0),null==e?n=s?t().tz(i.timeZone).startOf("d"):t().startOf("d"):s?(r=t().tz(i.timeZone).utcOffset(),t(e,c,i.useStrict).utcOffset()!==r?(o=t().tz(i.timeZone).format("Z"),a=t(e,c,i.useStrict).format("YYYY-MM-DD[T]HH:mm:ss")+o,n=t(a,c,i.useStrict).tz(i.timeZone)):n=t(e,c,i.useStrict).tz(i.timeZone)):n=t(e,c,i.useStrict),n},C=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==l.indexOf("Y");case"M":return-1!==l.indexOf("M");case"d":return-1!==l.toLowerCase().indexOf("d");case"h":case"H":return-1!==l.toLowerCase().indexOf("h");case"m":return-1!==l.indexOf("m");case"s":return-1!==l.indexOf("s");default:return!1}},E=function(){return C("h")||C("m")||C("s")},k=function(){return C("y")||C("M")||C("d")},I=function(){var t,n,r,o,a,l,c,u,d,h,p=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),f=e("<div>").addClass("datepicker").append((d=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(i.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",i.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(i.icons.next)))),h=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",i.calendarWeeks?"8":"7"))),[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(d).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(d.clone()).append(h.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(d.clone()).append(h.clone())),e("<div>").addClass("datepicker-decades").append(e("<table>").addClass("table-condensed").append(d.clone()).append(h.clone()))])),m=e("<div>").addClass("timepicker").append((a=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),l=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),c=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),u=[(n=e("<tr>"),r=e("<tr>"),o=e("<tr>"),C("h")&&(n.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(i.icons.up)))),r.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:i.tooltips.pickHour}).attr("data-action","showHours"))),o.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(i.icons.down))))),C("m")&&(C("h")&&(n.append(e("<td>").addClass("separator")),r.append(e("<td>").addClass("separator").html(":")),o.append(e("<td>").addClass("separator"))),n.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(i.icons.up)))),r.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:i.tooltips.pickMinute}).attr("data-action","showMinutes"))),o.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(i.icons.down))))),C("s")&&(C("m")&&(n.append(e("<td>").addClass("separator")),r.append(e("<td>").addClass("separator").html(":")),o.append(e("<td>").addClass("separator"))),n.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(i.icons.up)))),r.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:i.tooltips.pickSecond}).attr("data-action","showSeconds"))),o.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(i.icons.down))))),s||(n.append(e("<td>").addClass("separator")),r.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:i.tooltips.togglePeriod}))),o.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([n,r,o])))],C("h")&&u.push(a),C("m")&&u.push(l),C("s")&&u.push(c),u)),g=e("<ul>").addClass("list-unstyled"),v=e("<li>").addClass("picker-switch"+(i.collapse?" accordion-toggle":"")).append((t=[],i.showTodayButton&&t.push(e("<td>").append(e("<a>").attr({"data-action":"today",title:i.tooltips.today}).append(e("<span>").addClass(i.icons.today)))),!i.sideBySide&&k()&&E()&&t.push(e("<td>").append(e("<a>").attr({"data-action":"togglePicker",title:i.tooltips.selectTime}).append(e("<span>").addClass(i.icons.time)))),i.showClear&&t.push(e("<td>").append(e("<a>").attr({"data-action":"clear",title:i.tooltips.clear}).append(e("<span>").addClass(i.icons.clear)))),i.showClose&&t.push(e("<td>").append(e("<a>").attr({"data-action":"close",title:i.tooltips.close}).append(e("<span>").addClass(i.icons.close)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))));return i.inline&&p.removeClass("dropdown-menu"),s&&p.addClass("usetwentyfour"),C("s")&&!s&&p.addClass("wider"),i.sideBySide&&k()&&E()?(p.addClass("timepicker-sbs"),"top"===i.toolbarPlacement&&p.append(v),p.append(e("<div>").addClass("row").append(f.addClass("col-md-6")).append(m.addClass("col-md-6"))),"bottom"===i.toolbarPlacement&&p.append(v),p):("top"===i.toolbarPlacement&&g.append(v),k()&&g.append(e("<li>").addClass(i.collapse&&E()?"collapse in":"").append(f)),"default"===i.toolbarPlacement&&g.append(v),E()&&g.append(e("<li>").addClass(i.collapse&&k()?"collapse":"").append(m)),"bottom"===i.toolbarPlacement&&g.append(v),p.append(g))},P=function(){var t,r=(m||n).position(),o=(m||n).offset(),a=i.widgetPositioning.vertical,s=i.widgetPositioning.horizontal;if(i.widgetParent)t=i.widgetParent.append(g);else if(n.is("input"))t=n.after(g).parent();else{if(i.inline)return void(t=n.append(g));t=n,n.children().first().after(g)}if("auto"===a&&(a=o.top+1.5*g.height()>=e(window).height()+e(window).scrollTop()&&g.height()+n.outerHeight()<o.top?"top":"bottom"),"auto"===s&&(s=t.width()<o.left+g.outerWidth()/2&&o.left+g.outerWidth()>e(window).width()?"right":"left"),"top"===a?g.addClass("top").removeClass("bottom"):g.addClass("bottom").removeClass("top"),"right"===s?g.addClass("pull-right"):g.removeClass("pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===e(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");g.css({top:"top"===a?"auto":r.top+n.outerHeight(),bottom:"top"===a?r.top+n.outerHeight():"auto",left:"left"===s?t===n?0:r.left:"auto",right:"left"===s?"auto":t.outerWidth()-n.outerWidth()-(t===n?0:r.left)})},D=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||n.trigger(e)},O=function(e){"y"===e&&(e="YYYY"),D({type:"dp.update",change:e,viewDate:o.clone()})},M=function(e){g&&(e&&(u=Math.max(v,Math.min(3,u+e))),g.find(".datepicker > div").hide().filter(".datepicker-"+b[u].clsName).show())},L=function(t,n){if(!t.isValid())return!1;if(i.disabledDates&&"d"===n&&(r=t,!0===i.disabledDates[r.format("YYYY-MM-DD")]))return!1;var r;if(i.enabledDates&&"d"===n&&!function(e){return!0===i.enabledDates[e.format("YYYY-MM-DD")]}(t))return!1;if(i.minDate&&t.isBefore(i.minDate,n))return!1;if(i.maxDate&&t.isAfter(i.maxDate,n))return!1;if(i.daysOfWeekDisabled&&"d"===n&&-1!==i.daysOfWeekDisabled.indexOf(t.day()))return!1;if(i.disabledHours&&("h"===n||"m"===n||"s"===n)&&function(e){return!0===i.disabledHours[e.format("H")]}(t))return!1;if(i.enabledHours&&("h"===n||"m"===n||"s"===n)&&!function(e){return!0===i.enabledHours[e.format("H")]}(t))return!1;if(i.disabledTimeIntervals&&("h"===n||"m"===n||"s"===n)){var o=!1;if(e.each(i.disabledTimeIntervals,function(){if(t.isBetween(this[0],this[1]))return o=!0,!1}),o)return!1}return!0},R=function(){var n,a,s,l,c=g.find(".datepicker-days"),u=c.find("th"),d=[];if(k()){for(u.eq(0).find("span").attr("title",i.tooltips.prevMonth),u.eq(1).attr("title",i.tooltips.selectMonth),u.eq(2).find("span").attr("title",i.tooltips.nextMonth),c.find(".disabled").removeClass("disabled"),u.eq(1).text(o.format(i.dayViewHeaderFormat)),L(o.clone().subtract(1,"M"),"M")||u.eq(0).addClass("disabled"),L(o.clone().add(1,"M"),"M")||u.eq(2).addClass("disabled"),n=o.clone().startOf("M").startOf("w").startOf("d"),l=0;l<42;l++)0===n.weekday()&&(a=e("<tr>"),i.calendarWeeks&&a.append('<td class="cw">'+n.week()+"</td>"),d.push(a)),s="",n.isBefore(o,"M")&&(s+=" old"),n.isAfter(o,"M")&&(s+=" new"),n.isSame(r,"d")&&!f&&(s+=" active"),L(n,"d")||(s+=" disabled"),n.isSame(A(),"d")&&(s+=" today"),0!==n.day()&&6!==n.day()||(s+=" weekend"),a.append('<td data-action="selectDay" data-day="'+n.format("L")+'" class="day'+s+'">'+n.date()+"</td>"),n.add(1,"d");var h,p,m;c.find("tbody").empty().append(d),h=g.find(".datepicker-months"),p=h.find("th"),m=h.find("tbody").find("span"),p.eq(0).find("span").attr("title",i.tooltips.prevYear),p.eq(1).attr("title",i.tooltips.selectYear),p.eq(2).find("span").attr("title",i.tooltips.nextYear),h.find(".disabled").removeClass("disabled"),L(o.clone().subtract(1,"y"),"y")||p.eq(0).addClass("disabled"),p.eq(1).text(o.year()),L(o.clone().add(1,"y"),"y")||p.eq(2).addClass("disabled"),m.removeClass("active"),r.isSame(o,"y")&&!f&&m.eq(r.month()).addClass("active"),m.each(function(t){L(o.clone().month(t),"M")||e(this).addClass("disabled")}),function(){var e=g.find(".datepicker-years"),t=e.find("th"),n=o.clone().subtract(5,"y"),a=o.clone().add(6,"y"),s="";for(t.eq(0).find("span").attr("title",i.tooltips.prevDecade),t.eq(1).attr("title",i.tooltips.selectDecade),t.eq(2).find("span").attr("title",i.tooltips.nextDecade),e.find(".disabled").removeClass("disabled"),i.minDate&&i.minDate.isAfter(n,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(n.year()+"-"+a.year()),i.maxDate&&i.maxDate.isBefore(a,"y")&&t.eq(2).addClass("disabled");!n.isAfter(a,"y");)s+='<span data-action="selectYear" class="year'+(n.isSame(r,"y")&&!f?" active":"")+(L(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");e.find("td").html(s)}(),function(){var e=g.find(".datepicker-decades"),n=e.find("th"),a=t({y:o.year()-o.year()%100-1}),s=a.clone().add(100,"y"),l=a.clone(),c="";for(n.eq(0).find("span").attr("title",i.tooltips.prevCentury),n.eq(2).find("span").attr("title",i.tooltips.nextCentury),e.find(".disabled").removeClass("disabled"),(a.isSame(t({y:1900}))||i.minDate&&i.minDate.isAfter(a,"y"))&&n.eq(0).addClass("disabled"),n.eq(1).text(a.year()+"-"+s.year()),(a.isSame(t({y:2e3}))||i.maxDate&&i.maxDate.isBefore(s,"y"))&&n.eq(2).addClass("disabled");!a.isAfter(s,"y");)c+='<span data-action="selectDecade" class="decade'+(a.isSame(r,"y")?" active":"")+(L(a,"y")?"":" disabled")+'" data-selection="'+(a.year()+6)+'">'+(a.year()+1)+" - "+(a.year()+12)+"</span>",a.add(12,"y");c+="<span></span><span></span><span></span>",e.find("td").html(c),n.eq(1).text(l.year()+1+"-"+a.year())}()}},N=function(){var t,n,a=g.find(".timepicker span[data-time-component]");s||(t=g.find(".timepicker [data-action=togglePeriod]"),n=r.clone().add(r.hours()>=12?-12:12,"h"),t.text(r.format("A")),L(n,"h")?t.removeClass("disabled"):t.addClass("disabled")),a.filter("[data-time-component=hours]").text(r.format(s?"HH":"hh")),a.filter("[data-time-component=minutes]").text(r.format("mm")),a.filter("[data-time-component=seconds]").text(r.format("ss")),function(){var t=g.find(".timepicker-hours table"),n=o.clone().startOf("d"),i=[],r=e("<tr>");for(o.hour()>11&&!s&&n.hour(12);n.isSame(o,"d")&&(s||o.hour()<12&&n.hour()<12||o.hour()>11);)n.hour()%4==0&&(r=e("<tr>"),i.push(r)),r.append('<td data-action="selectHour" class="hour'+(L(n,"h")?"":" disabled")+'">'+n.format(s?"HH":"hh")+"</td>"),n.add(1,"h");t.empty().append(i)}(),function(){for(var t=g.find(".timepicker-minutes table"),n=o.clone().startOf("h"),r=[],a=e("<tr>"),s=1===i.stepping?5:i.stepping;o.isSame(n,"h");)n.minute()%(4*s)==0&&(a=e("<tr>"),r.push(a)),a.append('<td data-action="selectMinute" class="minute'+(L(n,"m")?"":" disabled")+'">'+n.format("mm")+"</td>"),n.add(s,"m");t.empty().append(r)}(),function(){for(var t=g.find(".timepicker-seconds table"),n=o.clone().startOf("m"),i=[],r=e("<tr>");o.isSame(n,"m");)n.second()%20==0&&(r=e("<tr>"),i.push(r)),r.append('<td data-action="selectSecond" class="second'+(L(n,"s")?"":" disabled")+'">'+n.format("ss")+"</td>"),n.add(5,"s");t.empty().append(i)}()},F=function(){g&&(R(),N())},U=function(e){var t=f?null:r;if(!e)return f=!0,a.val(""),n.data("date",""),D({type:"dp.change",date:!1,oldDate:t}),void F();e=e.clone().locale(i.locale),1!==i.stepping&&e.minutes(Math.round(e.minutes()/i.stepping)*i.stepping%60).seconds(0),L(e)?(o=(r=e).clone(),a.val(r.format(l)),n.data("date",r.format(l)),f=!1,F(),D({type:"dp.change",date:r.clone(),oldDate:t})):(i.keepInvalid||a.val(f?"":r.format(l)),D({type:"dp.error",date:e}))},V=function(){var t=!1;return g?(g.find(".collapse").each(function(){var n=e(this).data("collapse");return!n||!n.transitioning||(t=!0,!1)}),t||(m&&m.hasClass("btn")&&m.toggleClass("active"),g.hide(),e(window).off("resize",P),g.off("click","[data-action]"),g.off("mousedown",!1),g.remove(),g=!1,D({type:"dp.hide",date:r.clone()}),a.blur()),p):p},B=function(){U(null)},$={next:function(){var e=b[u].navFnc;o.add(b[u].navStep,e),R(),O(e)},previous:function(){var e=b[u].navFnc;o.subtract(b[u].navStep,e),R(),O(e)},pickerSwitch:function(){M(1)},selectMonth:function(t){var n=e(t.target).closest("tbody").find("span").index(e(t.target));o.month(n),u===v?(U(r.clone().year(o.year()).month(o.month())),i.inline||V()):(M(-1),R()),O("M")},selectYear:function(t){var n=parseInt(e(t.target).text(),10)||0;o.year(n),u===v?(U(r.clone().year(o.year())),i.inline||V()):(M(-1),R()),O("YYYY")},selectDecade:function(t){var n=parseInt(e(t.target).data("selection"),10)||0;o.year(n),u===v?(U(r.clone().year(o.year())),i.inline||V()):(M(-1),R()),O("YYYY")},selectDay:function(t){var n=o.clone();e(t.target).is(".old")&&n.subtract(1,"M"),e(t.target).is(".new")&&n.add(1,"M"),U(n.date(parseInt(e(t.target).text(),10))),E()||i.keepOpen||i.inline||V()},incrementHours:function(){var e=r.clone().add(1,"h");L(e,"h")&&U(e)},incrementMinutes:function(){var e=r.clone().add(i.stepping,"m");L(e,"m")&&U(e)},incrementSeconds:function(){var e=r.clone().add(1,"s");L(e,"s")&&U(e)},decrementHours:function(){var e=r.clone().subtract(1,"h");L(e,"h")&&U(e)},decrementMinutes:function(){var e=r.clone().subtract(i.stepping,"m");L(e,"m")&&U(e)},decrementSeconds:function(){var e=r.clone().subtract(1,"s");L(e,"s")&&U(e)},togglePeriod:function(){U(r.clone().add(r.hours()>=12?-12:12,"h"))},togglePicker:function(t){var n,r=e(t.target),o=r.closest("ul"),a=o.find(".in"),s=o.find(".collapse:not(.in)");if(a&&a.length){if((n=a.data("collapse"))&&n.transitioning)return;a.collapse?(a.collapse("hide"),s.collapse("show")):(a.removeClass("in"),s.addClass("in")),r.is("span")?r.toggleClass(i.icons.time+" "+i.icons.date):r.find("span").toggleClass(i.icons.time+" "+i.icons.date)}},showPicker:function(){g.find(".timepicker > div:not(.timepicker-picker)").hide(),g.find(".timepicker .timepicker-picker").show()},showHours:function(){g.find(".timepicker .timepicker-picker").hide(),g.find(".timepicker .timepicker-hours").show()},showMinutes:function(){g.find(".timepicker .timepicker-picker").hide(),g.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){g.find(".timepicker .timepicker-picker").hide(),g.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=parseInt(e(t.target).text(),10);s||(r.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),U(r.clone().hours(n)),$.showPicker.call(p)},selectMinute:function(t){U(r.clone().minutes(parseInt(e(t.target).text(),10))),$.showPicker.call(p)},selectSecond:function(t){U(r.clone().seconds(parseInt(e(t.target).text(),10))),$.showPicker.call(p)},clear:B,today:function(){var e=A();L(e,"d")&&U(e)},close:V},H=function(t){return e(t.currentTarget).is(".disabled")||$[e(t.currentTarget).data("action")].apply(p,arguments),!1},G=function(){var t;return a.prop("disabled")||!i.ignoreReadonly&&a.prop("readonly")||g||(void 0!==a.val()&&0!==a.val().trim().length?U(z(a.val().trim())):i.useCurrent&&f&&(a.is("input")&&0===a.val().trim().length||i.inline)&&(t=A(),"string"==typeof i.useCurrent&&(t={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}}[i.useCurrent](t)),U(t)),g=I(),function(){var t=e("<tr>"),n=o.clone().startOf("w").startOf("d");for(!0===i.calendarWeeks&&t.append(e("<th>").addClass("cw").text("#"));n.isBefore(o.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(n.format("dd"))),n.add(1,"d");g.find(".datepicker-days thead").append(t)}(),function(){for(var t=[],n=o.clone().startOf("y").startOf("d");n.isSame(o,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(n.format("MMM"))),n.add(1,"M");g.find(".datepicker-months td").empty().append(t)}(),g.find(".timepicker-hours").hide(),g.find(".timepicker-minutes").hide(),g.find(".timepicker-seconds").hide(),F(),M(),e(window).on("resize",P),g.on("click","[data-action]",H),g.on("mousedown",!1),m&&m.hasClass("btn")&&m.toggleClass("active"),g.show(),P(),i.focusOnShow&&!a.is(":focus")&&a.focus(),D({type:"dp.show"})),p},j=function(){return g?V():G()},z=function(e){return(e=void 0===i.parseInputDate?t.isMoment(e)||e instanceof Date?t(e):A(e):i.parseInputDate(e)).locale(i.locale),e},q=function(e){var t,n,r,o,a=null,s=[],l={},c=e.which;for(t in T[c]="p",T)T.hasOwnProperty(t)&&"p"===T[t]&&(s.push(t),parseInt(t,10)!==c&&(l[t]=!0));for(t in i.keyBinds)if(i.keyBinds.hasOwnProperty(t)&&"function"==typeof i.keyBinds[t]&&(r=t.split(" ")).length===s.length&&S[c]===r[r.length-1]){for(o=!0,n=r.length-2;n>=0;n--)if(!(S[r[n]]in l)){o=!1;break}if(o){a=i.keyBinds[t];break}}a&&(a.call(p,g),e.stopPropagation(),e.preventDefault())},Y=function(e){T[e.which]="r",e.stopPropagation(),e.preventDefault()},W=function(t){var n=e(t.target).val().trim(),i=n?z(n):null;return U(i),t.stopImmediatePropagation(),!1},K=function(t){var n={};return e.each(t,function(){var e=z(this);e.isValid()&&(n[e.format("YYYY-MM-DD")]=!0)}),!!Object.keys(n).length&&n},X=function(t){var n={};return e.each(t,function(){n[this]=!0}),!!Object.keys(n).length&&n},Z=function(){var e=i.format||"L LT";l=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return(r.localeData().longDateFormat(e)||e).replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return r.localeData().longDateFormat(e)||e})}),(c=i.extraFormats?i.extraFormats.slice():[]).indexOf(e)<0&&c.indexOf(l)<0&&c.push(l),s=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,C("y")&&(v=2),C("M")&&(v=1),C("d")&&(v=0),u=Math.max(v,u),f||U(r)};if(p.destroy=function(){V(),a.off({change:W,blur:blur,keydown:q,keyup:Y,focus:i.allowInputToggle?V:""}),n.is("input")?a.off({focus:G}):m&&(m.off("click",j),m.off("mousedown",!1)),n.removeData("DateTimePicker"),n.removeData("date")},p.toggle=j,p.show=G,p.hide=V,p.disable=function(){return V(),m&&m.hasClass("btn")&&m.addClass("disabled"),a.prop("disabled",!0),p},p.enable=function(){return m&&m.hasClass("btn")&&m.removeClass("disabled"),a.prop("disabled",!1),p},p.ignoreReadonly=function(e){if(0===arguments.length)return i.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return i.ignoreReadonly=e,p},p.options=function(t){if(0===arguments.length)return e.extend(!0,{},i);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,i,t),e.each(i,function(e,t){if(void 0===p[e])throw new TypeError("option "+e+" is not recognized!");p[e](t)}),p},p.date=function(e){if(0===arguments.length)return f?null:r.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return U(null===e?null:z(e)),p},p.format=function(e){if(0===arguments.length)return i.format;if("string"!=typeof e&&("boolean"!=typeof e||!1!==e))throw new TypeError("format() expects a sting or boolean:false parameter "+e);return i.format=e,l&&Z(),p},p.timeZone=function(e){return 0===arguments.length?i.timeZone:(i.timeZone=e,p)},p.dayViewHeaderFormat=function(e){if(0===arguments.length)return i.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return i.dayViewHeaderFormat=e,p},p.extraFormats=function(e){if(0===arguments.length)return i.extraFormats;if(!1!==e&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return i.extraFormats=e,c&&Z(),p},p.disabledDates=function(t){if(0===arguments.length)return i.disabledDates?e.extend({},i.disabledDates):i.disabledDates;if(!t)return i.disabledDates=!1,F(),p;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return i.disabledDates=K(t),i.enabledDates=!1,F(),p},p.enabledDates=function(t){if(0===arguments.length)return i.enabledDates?e.extend({},i.enabledDates):i.enabledDates;if(!t)return i.enabledDates=!1,F(),p;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return i.enabledDates=K(t),i.disabledDates=!1,F(),p},p.daysOfWeekDisabled=function(e){if(0===arguments.length)return i.daysOfWeekDisabled.splice(0);if("boolean"==typeof e&&!e)return i.daysOfWeekDisabled=!1,F(),p;if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(i.daysOfWeekDisabled=e.reduce(function(e,t){return(t=parseInt(t,10))>6||t<0||isNaN(t)||-1===e.indexOf(t)&&e.push(t),e},[]).sort(),i.useCurrent&&!i.keepInvalid){for(var t=0;!L(r,"d");){if(r.add(1,"d"),7===t)throw"Tried 7 times to find a valid date";t++}U(r)}return F(),p},p.maxDate=function(e){if(0===arguments.length)return i.maxDate?i.maxDate.clone():i.maxDate;if("boolean"==typeof e&&!1===e)return i.maxDate=!1,F(),p;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=A()));var t=z(e);if(!t.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(i.minDate&&t.isBefore(i.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+t.format(l));return i.maxDate=t,i.useCurrent&&!i.keepInvalid&&r.isAfter(e)&&U(i.maxDate),o.isAfter(t)&&(o=t.clone().subtract(i.stepping,"m")),F(),p},p.minDate=function(e){if(0===arguments.length)return i.minDate?i.minDate.clone():i.minDate;if("boolean"==typeof e&&!1===e)return i.minDate=!1,F(),p;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=A()));var t=z(e);if(!t.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(i.maxDate&&t.isAfter(i.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+t.format(l));return i.minDate=t,i.useCurrent&&!i.keepInvalid&&r.isBefore(e)&&U(i.minDate),o.isBefore(t)&&(o=t.clone().add(i.stepping,"m")),F(),p},p.defaultDate=function(e){if(0===arguments.length)return i.defaultDate?i.defaultDate.clone():i.defaultDate;if(!e)return i.defaultDate=!1,p;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=A()));var t=z(e);if(!t.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!L(t))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return i.defaultDate=t,(i.defaultDate&&i.inline||""===a.val().trim())&&U(i.defaultDate),p},p.locale=function(e){if(0===arguments.length)return i.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return i.locale=e,r.locale(i.locale),o.locale(i.locale),l&&Z(),g&&(V(),G()),p},p.stepping=function(e){return 0===arguments.length?i.stepping:(e=parseInt(e,10),(isNaN(e)||e<1)&&(e=1),i.stepping=e,p)},p.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return i.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return i.useCurrent=e,p},p.collapse=function(e){if(0===arguments.length)return i.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return i.collapse===e||(i.collapse=e,g&&(V(),G())),p},p.icons=function(t){if(0===arguments.length)return e.extend({},i.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(i.icons,t),g&&(V(),G()),p},p.tooltips=function(t){if(0===arguments.length)return e.extend({},i.tooltips);if(!(t instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return e.extend(i.tooltips,t),g&&(V(),G()),p},p.useStrict=function(e){if(0===arguments.length)return i.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return i.useStrict=e,p},p.sideBySide=function(e){if(0===arguments.length)return i.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return i.sideBySide=e,g&&(V(),G()),p},p.viewMode=function(e){if(0===arguments.length)return i.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===y.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+y.join(", ")+") value");return i.viewMode=e,u=Math.max(y.indexOf(e),v),M(),p},p.toolbarPlacement=function(e){if(0===arguments.length)return i.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===x.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+x.join(", ")+") value");return i.toolbarPlacement=e,g&&(V(),G()),p},p.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},i.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===_.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+_.join(", ")+")");i.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===w.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+w.join(", ")+")");i.widgetPositioning.vertical=t.vertical}return F(),p},p.calendarWeeks=function(e){if(0===arguments.length)return i.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return i.calendarWeeks=e,F(),p},p.showTodayButton=function(e){if(0===arguments.length)return i.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return i.showTodayButton=e,g&&(V(),G()),p},p.showClear=function(e){if(0===arguments.length)return i.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return i.showClear=e,g&&(V(),G()),p},p.widgetParent=function(t){if(0===arguments.length)return i.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof e))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return i.widgetParent=t,g&&(V(),G()),p},p.keepOpen=function(e){if(0===arguments.length)return i.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return i.keepOpen=e,p},p.focusOnShow=function(e){if(0===arguments.length)return i.focusOnShow;if("boolean"!=typeof e)throw new TypeError("focusOnShow() expects a boolean parameter");return i.focusOnShow=e,p},p.inline=function(e){if(0===arguments.length)return i.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return i.inline=e,p},p.clear=function(){return B(),p},p.keyBinds=function(e){return i.keyBinds=e,p},p.getMoment=function(e){return A(e)},p.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return i.debug=e,p},p.allowInputToggle=function(e){if(0===arguments.length)return i.allowInputToggle;if("boolean"!=typeof e)throw new TypeError("allowInputToggle() expects a boolean parameter");return i.allowInputToggle=e,p},p.showClose=function(e){if(0===arguments.length)return i.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return i.showClose=e,p},p.keepInvalid=function(e){if(0===arguments.length)return i.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return i.keepInvalid=e,p},p.datepickerInput=function(e){if(0===arguments.length)return i.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return i.datepickerInput=e,p},p.parseInputDate=function(e){if(0===arguments.length)return i.parseInputDate;if("function"!=typeof e)throw new TypeError("parseInputDate() sholud be as function");return i.parseInputDate=e,p},p.disabledTimeIntervals=function(t){if(0===arguments.length)return i.disabledTimeIntervals?e.extend({},i.disabledTimeIntervals):i.disabledTimeIntervals;if(!t)return i.disabledTimeIntervals=!1,F(),p;if(!(t instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return i.disabledTimeIntervals=t,F(),p},p.disabledHours=function(t){if(0===arguments.length)return i.disabledHours?e.extend({},i.disabledHours):i.disabledHours;if(!t)return i.disabledHours=!1,F(),p;if(!(t instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(i.disabledHours=X(t),i.enabledHours=!1,i.useCurrent&&!i.keepInvalid){for(var n=0;!L(r,"h");){if(r.add(1,"h"),24===n)throw"Tried 24 times to find a valid date";n++}U(r)}return F(),p},p.enabledHours=function(t){if(0===arguments.length)return i.enabledHours?e.extend({},i.enabledHours):i.enabledHours;if(!t)return i.enabledHours=!1,F(),p;if(!(t instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(i.enabledHours=X(t),i.disabledHours=!1,i.useCurrent&&!i.keepInvalid){for(var n=0;!L(r,"h");){if(r.add(1,"h"),24===n)throw"Tried 24 times to find a valid date";n++}U(r)}return F(),p},p.viewDate=function(e){if(0===arguments.length)return o.clone();if(!e)return o=r.clone(),p;if(!("string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return o=z(e),O(),p},n.is("input"))a=n;else if(0===(a=n.find(i.datepickerInput)).size())a=n.find("input");else if(!a.is("input"))throw new Error('CSS class "'+i.datepickerInput+'" cannot be applied to non input element');if(n.hasClass("input-group")&&(m=0===n.find(".datepickerbutton").size()?n.find(".input-group-addon"):n.find(".datepickerbutton")),!i.inline&&!a.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return r=A(),o=r.clone(),e.extend(!0,i,(h={},(d=n.is("input")||i.inline?n.data():n.find("input").data()).dateOptions&&d.dateOptions instanceof Object&&(h=e.extend(!0,h,d.dateOptions)),e.each(i,function(e){var t="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==d[t]&&(h[e]=d[t])}),h)),p.options(i),Z(),a.on({change:W,blur:i.debug?"":V,keydown:q,keyup:Y,focus:i.allowInputToggle?G:""}),n.is("input")?a.on({focus:G}):m&&(m.on("click",j),m.on("mousedown",!1)),a.prop("disabled")&&p.disable(),a.is("input")&&0!==a.val().trim().length?U(z(a.val().trim())):i.defaultDate&&void 0===a.attr("placeholder")&&U(i.defaultDate),i.inline&&G(),p};e.fn.datetimepicker=function(t){return this.each(function(){var i=e(this);i.data("DateTimePicker")||(t=e.extend(!0,{},e.fn.datetimepicker.defaults,t),i.data("DateTimePicker",n(i,t)))})},e.fn.datetimepicker.defaults={timeZone:"Etc/UTC",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:t.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(7,"d")):this.date(t.clone().add(this.stepping(),"m"))}},down:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(7,"d")):this.date(t.clone().subtract(this.stepping(),"m"))}else this.show()},"control up":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(1,"y")):this.date(t.clone().add(1,"h"))}},"control down":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(1,"y")):this.date(t.clone().subtract(1,"h"))}},left:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"d"))}},right:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"d"))}},pageUp:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"M"))}},pageDown:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){e.find(".timepicker").is(":visible")&&e.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}}),
/*!
 * PEP v0.5.1 | https://github.com/jquery/PEP
 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pep",t):e.PointerEventsPolyfill=t()}(this,function(){"use strict";var e=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],t=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function i(n,i){i=i||Object.create(null);var r=document.createEvent("Event");r.initEvent(n,i.bubbles||!1,i.cancelable||!1);for(var o,a=2;a<e.length;a++)r[o=e[a]]=i[o]||t[a];r.buttons=i.buttons||0;var s=0;return s=void 0!==i.pressure&&r.buttons?i.pressure:r.buttons?.5:0,r.x=r.clientX,r.y=r.clientY,r.pointerId=i.pointerId||0,r.width=i.width||1,r.height=i.height||1,r.pressure=s,r.tiltX=i.tiltX||0,r.tiltY=i.tiltY||0,r.twist=i.twist||0,r.tangentialPressure=i.tangentialPressure||0,r.pointerType=i.pointerType||"",r.hwTimestamp=i.hwTimestamp||0,r.isPrimary=i.isPrimary||!1,r.detail=0,r}var r=window.Map&&window.Map.prototype.forEach?Map:o;function o(){this.array=[],this.size=0}o.prototype={set:function(e,t){if(void 0===t)return this.delete(e);this.has(e)||this.size++,this.array[e]=t},has:function(e){return void 0!==this.array[e]},delete:function(e){this.has(e)&&(delete this.array[e],this.size--)},get:function(e){return this.array[e]},clear:function(){this.array.length=0,this.size=0},forEach:function(e,t){return this.array.forEach(function(n,i){e.call(t,n,i,this)},this)}};var a=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],s=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],l={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},c="undefined"!=typeof SVGElementInstance,u={pointermap:new r,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(e,t){var n=t,i=n.events;i&&(i.forEach(function(e){n[e]&&(this.eventMap[e]=n[e].bind(n))},this),this.eventSources[e]=n,this.eventSourceList.push(n))},register:function(e){for(var t,n=this.eventSourceList.length,i=0;i<n&&(t=this.eventSourceList[i]);i++)t.register.call(t,e)},unregister:function(e){for(var t,n=this.eventSourceList.length,i=0;i<n&&(t=this.eventSourceList[i]);i++)t.unregister.call(t,e)},contains:function(e,t){try{return e.contains(t)}catch(n){return!1}},down:function(e){e.bubbles=!0,this.fireEvent("pointerdown",e)},move:function(e){e.bubbles=!0,this.fireEvent("pointermove",e)},up:function(e){e.bubbles=!0,this.fireEvent("pointerup",e)},enter:function(e){e.bubbles=!1,this.fireEvent("pointerenter",e)},leave:function(e){e.bubbles=!1,this.fireEvent("pointerleave",e)},over:function(e){e.bubbles=!0,this.fireEvent("pointerover",e)},out:function(e){e.bubbles=!0,this.fireEvent("pointerout",e)},cancel:function(e){e.bubbles=!0,this.fireEvent("pointercancel",e)},leaveOut:function(e){this.out(e),this.propagate(e,this.leave,!1)},enterOver:function(e){this.over(e),this.propagate(e,this.enter,!0)},eventHandler:function(e){if(!e._handledByPE){var t=e.type,n=this.eventMap&&this.eventMap[t];n&&n(e),e._handledByPE=!0}},listen:function(e,t){t.forEach(function(t){this.addEvent(e,t)},this)},unlisten:function(e,t){t.forEach(function(t){this.removeEvent(e,t)},this)},addEvent:function(e,t){e.addEventListener(t,this.boundHandler)},removeEvent:function(e,t){e.removeEventListener(t,this.boundHandler)},makeEvent:function(e,t){this.captureInfo[t.pointerId]&&(t.relatedTarget=null);var n=new i(e,t);return t.preventDefault&&(n.preventDefault=t.preventDefault),n._target=n._target||t.target,n},fireEvent:function(e,t){var n=this.makeEvent(e,t);return this.dispatchEvent(n)},cloneEvent:function(e){for(var t,n=Object.create(null),i=0;i<a.length;i++)n[t=a[i]]=e[t]||s[i],!c||"target"!==t&&"relatedTarget"!==t||n[t]instanceof SVGElementInstance&&(n[t]=n[t].correspondingUseElement);return e.preventDefault&&(n.preventDefault=function(){e.preventDefault()}),n},getTarget:function(e){var t=this.captureInfo[e.pointerId];return t?e._target!==t&&e.type in l?void 0:t:e._target},propagate:function(e,t,n){for(var i=e.target,r=[];null!=i&&i!==document&&!i.contains(e.relatedTarget);)if(r.push(i),!(i=i.parentNode))return;n&&r.reverse(),r.forEach(function(n){e.target=n,t.call(this,e)},this)},setCapture:function(e,t,n){this.captureInfo[e]&&this.releaseCapture(e,n),this.captureInfo[e]=t,this.implicitRelease=this.releaseCapture.bind(this,e,n),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var r=new i("gotpointercapture",{bubbles:!0});r.pointerId=e,r._target=t,n||this.asyncDispatchEvent(r)},releaseCapture:function(e,t){var n=this.captureInfo[e];if(n){this.captureInfo[e]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var r=new i("lostpointercapture",{bubbles:!0});r.pointerId=e,r._target=n,t||this.asyncDispatchEvent(r)}},dispatchEvent:function(e){var t=this.getTarget(e);if(t)return t.dispatchEvent(e)},asyncDispatchEvent:function(e){requestAnimationFrame(this.dispatchEvent.bind(this,e))}};u.boundHandler=u.eventHandler.bind(u);var d={shadow:function(e){if(e)return e.shadowRoot||e.webkitShadowRoot},canTarget:function(e){return e&&Boolean(e.elementFromPoint)},targetingShadow:function(e){var t=this.shadow(e);if(this.canTarget(t))return t},olderShadow:function(e){var t=e.olderShadowRoot;if(!t){var n=e.querySelector("shadow");n&&(t=n.olderShadowRoot)}return t},allShadows:function(e){for(var t=[],n=this.shadow(e);n;)t.push(n),n=this.olderShadow(n);return t},searchRoot:function(e,t,n){if(e){var i,r,o=e.elementFromPoint(t,n);for(r=this.targetingShadow(o);r;){if(i=r.elementFromPoint(t,n)){var a=this.targetingShadow(i);return this.searchRoot(a,t,n)||i}r=this.olderShadow(r)}return o}},owner:function(e){for(var t=e;t.parentNode;)t=t.parentNode;return t.nodeType!==Node.DOCUMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(t=document),t},findTarget:function(e){var t=e.clientX,n=e.clientY,i=this.owner(e.target);return i.elementFromPoint(t,n)||(i=document),this.searchRoot(i,t,n)}},h=Array.prototype.forEach.call.bind(Array.prototype.forEach),p=Array.prototype.map.call.bind(Array.prototype.map),f=Array.prototype.slice.call.bind(Array.prototype.slice),m=Array.prototype.filter.call.bind(Array.prototype.filter),g=window.MutationObserver||window.WebKitMutationObserver,v={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function b(e,t,n,i){this.addCallback=e.bind(i),this.removeCallback=t.bind(i),this.changedCallback=n.bind(i),g&&(this.observer=new g(this.mutationWatcher.bind(this)))}function y(e){return"{ -ms-touch-action: "+e+"; touch-action: "+e+"; }"}b.prototype={watchSubtree:function(e){this.observer&&d.canTarget(e)&&this.observer.observe(e,v)},enableOnSubtree:function(e){this.watchSubtree(e),e===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(e)},installNewSubtree:function(e){h(this.findElements(e),this.addElement,this)},findElements:function(e){return e.querySelectorAll?e.querySelectorAll("[touch-action]"):[]},removeElement:function(e){this.removeCallback(e)},addElement:function(e){this.addCallback(e)},elementChanged:function(e,t){this.changedCallback(e,t)},concatLists:function(e,t){return e.concat(f(t))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(e){return e.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(e){var t=p(e,this.findElements,this);return t.push(m(e,this.isElement)),t.reduce(this.concatLists,[])},mutationWatcher:function(e){e.forEach(this.mutationHandler,this)},mutationHandler:function(e){"childList"===e.type?(this.flattenMutationTree(e.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(e.removedNodes).forEach(this.removeElement,this)):"attributes"===e.type&&this.elementChanged(e.target,e.oldValue)}};var w=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],_="",x=window.PointerEvent||window.MSPointerEvent,S=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;var T=u.pointermap,A=[1,4,2,8,16],C=!1;try{C=1===new MouseEvent("test",{buttons:1}).buttons}catch(n){}var E,k={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(e){u.listen(e,this.events)},unregister:function(e){u.unlisten(e,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(e){for(var t,n=this.lastTouches,i=e.clientX,r=e.clientY,o=0,a=n.length;o<a&&(t=n[o]);o++){var s=Math.abs(i-t.x),l=Math.abs(r-t.y);if(s<=25&&l<=25)return!0}},prepareEvent:function(e){var t=u.cloneEvent(e),n=t.preventDefault;return t.preventDefault=function(){e.preventDefault(),n()},t.pointerId=this.POINTER_ID,t.isPrimary=!0,t.pointerType=this.POINTER_TYPE,"webkitForce"in e&&(t.pressure=e.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),t},prepareButtonsForMove:function(e,t){var n=T.get(this.POINTER_ID);0!==t.which&&n?e.buttons=n.buttons:e.buttons=0,t.buttons=e.buttons},mousedown:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=T.get(this.POINTER_ID),n=this.prepareEvent(e);C||(n.buttons=A[n.button],t&&(n.buttons|=t.buttons),e.buttons=n.buttons),T.set(this.POINTER_ID,e),t&&0!==t.buttons?u.move(n):u.down(n)}},webkitmouseforcechanged:function(e){this.mousemove(e)},mousemove:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);C||this.prepareButtonsForMove(t,e),t.button=-1,T.set(this.POINTER_ID,e),u.move(t)}},mouseup:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=T.get(this.POINTER_ID),n=this.prepareEvent(e);if(!C){var i=A[n.button];n.buttons=t?t.buttons&~i:0,e.buttons=n.buttons}T.set(this.POINTER_ID,e),n.buttons&=~A[n.button],0===n.buttons?u.up(n):u.move(n)}},mouseover:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);C||this.prepareButtonsForMove(t,e),t.button=-1,T.set(this.POINTER_ID,e),u.enterOver(t)}},mouseout:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);C||this.prepareButtonsForMove(t,e),t.button=-1,u.leaveOut(t)}},cancel:function(e){var t=this.prepareEvent(e);u.cancel(t),this.deactivateMouse()},deactivateMouse:function(){T.delete(this.POINTER_ID)}},I=u.captureInfo,P=d.findTarget.bind(d),D=d.allShadows.bind(d),O=u.pointermap,M="touch-action",L={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(e){E.enableOnSubtree(e)},unregister:function(){},elementAdded:function(e){var t=e.getAttribute(M),n=this.touchActionToScrollType(t);"number"==typeof n&&(e._scrollType=n,u.listen(e,this.events),D(e).forEach(function(e){e._scrollType=n,u.listen(e,this.events)},this))},elementRemoved:function(e){if(O.size>0){var t=this.events;e.addEventListener("touchend",function(){e._scrollType=void 0,u.unlisten(e,t)})}else e._scrollType=void 0,u.unlisten(e,this.events);D(e).forEach(function(e){e._scrollType=void 0,u.unlisten(e,this.events)},this)},elementChanged:function(e,t){var n=e.getAttribute(M),i=this.touchActionToScrollType(n),r=this.touchActionToScrollType(t);"number"==typeof i&&"number"==typeof r?(e._scrollType=i,D(e).forEach(function(e){e._scrollType=i},this)):"number"==typeof r?this.elementRemoved(e):"number"==typeof i&&this.elementAdded(e)},scrollTypes:{UP:function(e){return e.includes("pan-y")||e.includes("pan-up")?1:0},DOWN:function(e){return e.includes("pan-y")||e.includes("pan-down")?2:0},LEFT:function(e){return e.includes("pan-x")||e.includes("pan-left")?4:0},RIGHT:function(e){return e.includes("pan-x")||e.includes("pan-right")?8:0}},touchActionToScrollType:function(e){if(e){if("auto"===e)return 15;if("none"===e)return 0;var t=e.split(" "),n=this.scrollTypes;return n.UP(t)|n.DOWN(t)|n.LEFT(t)|n.RIGHT(t)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(e){return this.firstTouch===e.identifier},setPrimaryTouch:function(e){(0===O.size||1===O.size&&O.has(1))&&(this.firstTouch=e.identifier,this.firstXY={X:e.clientX,Y:e.clientY},this.scrolling=!1)},removePrimaryPointer:function(e){e.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(e){var t=0;return"touchstart"!==e&&"touchmove"!==e&&"touchforcechange"!==e||(t=1),t},touchToPointer:function(e){var t=this.currentTouchEvent,n=u.cloneEvent(e),i=n.pointerId=e.identifier+2;if(n.target=I[i]||P(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=this.typeToButtons(t.type),n.width=2*(e.radiusX||e.webkitRadiusX||0),n.height=2*(e.radiusY||e.webkitRadiusY||0),n.pressure=void 0!==e.force?e.force:void 0!==e.webkitForce?e.webkitForce:void 0,n.isPrimary=this.isPrimaryTouch(e),e.altitudeAngle){var r=Math.tan(e.altitudeAngle),o=180/Math.PI;n.tiltX=Math.atan(Math.cos(e.azimuthAngle)/r)*o,n.tiltY=Math.atan(Math.sin(e.azimuthAngle)/r)*o}else n.tiltX=0,n.tiltY=0;"stylus"===e.touchType?n.pointerType="pen":n.pointerType=this.POINTER_TYPE,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey;var a=this;return n.preventDefault=function(){a.scrolling=!1,a.firstXY=null,t.preventDefault()},n},processTouches:function(e,t){var n=e.changedTouches;this.currentTouchEvent=e;for(var i,r=0;r<n.length;r++)i=n[r],t.call(this,this.touchToPointer(i))},shouldScroll:function(e){if(this.firstXY){var t,n=e.currentTarget._scrollType;if(0===n)t=!1;else if(15===n)t=!0;else{var i=e.changedTouches[0],r=i.clientY-this.firstXY.Y,o=Math.abs(r),a=i.clientX-this.firstXY.X,s=Math.abs(a),l=1&n,c=2&n,u=4&n,d=8&n;u&&d?t=s>o:u?t=s>o&&a>0:d&&(t=s>o&&a<0),t||(l&&c?t=s<o:l?t=s<o&&r>0:c&&(t=s<o&&r<0))}return this.firstXY=null,t}},findTouch:function(e,t){for(var n,i=0,r=e.length;i<r&&(n=e[i]);i++)if(n.identifier===t)return!0},vacuumTouches:function(e){var t=e.touches;if(O.size>=t.length){var n=[];O.forEach(function(e,i){if(1!==i&&!this.findTouch(t,i-2)){var r=e.out;n.push(r)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(e){this.vacuumTouches(e),this.setPrimaryTouch(e.changedTouches[0]),this.dedupSynthMouse(e),this.scrolling||this.processTouches(e,this.overDown)},overDown:function(e){O.set(e.pointerId,{target:e.target,out:e,outTarget:e.target}),u.enterOver(e),u.down(e)},touchforcechange:function(e){this.touchmove(e)},touchmove:function(e){this.scrolling||(this.shouldScroll(e)?(this.scrolling=!0,this.touchcancel(e)):("touchforcechange"!==e.type&&e.preventDefault(),this.processTouches(e,this.moveOverOut)))},moveOverOut:function(e){var t=e,n=O.get(t.pointerId);if(n){var i=n.out,r=n.outTarget;u.move(t),i&&r!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=r,i.target=r,t.target?(u.leaveOut(i),u.enterOver(t)):(t.target=r,t.relatedTarget=null,this.cancelOut(t))),n.out=t,n.outTarget=t.target}},touchend:function(e){this.dedupSynthMouse(e),this.processTouches(e,this.upOut)},upOut:function(e){this.scrolling||(u.up(e),u.leaveOut(e)),this.cleanUpPointer(e)},touchcancel:function(e){this.processTouches(e,this.cancelOut)},cancelOut:function(e){u.cancel(e),u.leaveOut(e),this.cleanUpPointer(e)},cleanUpPointer:function(e){O.delete(e.pointerId),this.removePrimaryPointer(e)},dedupSynthMouse:function(e){var t=k.lastTouches,n=e.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};t.push(i);var r=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}.bind(null,t,i);setTimeout(r,2500)}}};E=new b(L.elementAdded,L.elementRemoved,L.elementChanged,L);var R,N,F,U=u.pointermap,V=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,B={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(e){u.listen(e,this.events)},unregister:function(e){u.unlisten(e,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(e){var t=e;return V&&((t=u.cloneEvent(e)).pointerType=this.POINTER_TYPES[e.pointerType]),t},cleanup:function(e){U.delete(e)},MSPointerDown:function(e){U.set(e.pointerId,e);var t=this.prepareEvent(e);u.down(t)},MSPointerMove:function(e){var t=this.prepareEvent(e);u.move(t)},MSPointerUp:function(e){var t=this.prepareEvent(e);u.up(t),this.cleanup(e.pointerId)},MSPointerOut:function(e){var t=this.prepareEvent(e);u.leaveOut(t)},MSPointerOver:function(e){var t=this.prepareEvent(e);u.enterOver(t)},MSPointerCancel:function(e){var t=this.prepareEvent(e);u.cancel(t),this.cleanup(e.pointerId)},MSLostPointerCapture:function(e){var t=u.makeEvent("lostpointercapture",e);u.dispatchEvent(t)},MSGotPointerCapture:function(e){var t=u.makeEvent("gotpointercapture",e);u.dispatchEvent(t)}};function $(e){if(!u.pointermap.has(e)){var t=new Error("NotFoundError");throw t.name="NotFoundError",t}}function H(e){for(var t=e.parentNode;t&&t!==e.ownerDocument;)t=t.parentNode;if(!t){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function G(e){return 0!==u.pointermap.get(e).buttons}return window.navigator.msPointerEnabled?(R=function(e){$(e),H(this),G(e)&&(u.setCapture(e,this,!0),this.msSetPointerCapture(e))},N=function(e){$(e),u.releaseCapture(e,!0),this.msReleasePointerCapture(e)}):(R=function(e){$(e),H(this),G(e)&&u.setCapture(e,this)},N=function(e){$(e),u.releaseCapture(e)}),F=function(e){return!!u.captureInfo[e]},function(){if(x){w.forEach(function(e){_+=e.selector+y(e.value)+"\n",S&&(_+=function(e){return"body /shadow-deep/ "+e}(e.selector)+y(e.value)+"\n")});var e=document.createElement("style");e.textContent=_,document.head.appendChild(e)}}(),function(){if(!window.PointerEvent){if(window.PointerEvent=i,window.navigator.msPointerEnabled){var e=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:e,enumerable:!0}),u.registerSource("ms",B)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),u.registerSource("mouse",k),void 0!==window.ontouchstart&&u.registerSource("touch",L);u.register(document)}}(),window.Element&&!window.Element.prototype.setPointerCapture&&Object.defineProperties(window.Element.prototype,{setPointerCapture:{value:R},releasePointerCapture:{value:N},hasPointerCapture:{value:F}}),{dispatcher:u,Installer:b,PointerEvent:i,PointerMap:r,targetFinding:d}}),
/*!
 * typeahead.js 1.3.3
 * https://github.com/corejavascript/typeahead.js
 * Copyright 2013-2024 Twitter, Inc. and other contributors; Licensed MIT
 */
function(e,t){"function"==typeof define&&define.amd?define("typeahead",["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){e.each(t,function(e,t){return n(t,e)})},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,r){if(!(i=n.call(null,r,e,t)))return!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,r){if(i=n.call(null,r,e,t))return!1}),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){return e.isFunction(t)?t:function(){return String(t)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,r;return function(){var o,a,s=this,l=arguments;return o=function(){i=null,n||(r=e.apply(s,l))},a=n&&!i,clearTimeout(i),i=setTimeout(o,t),a&&(r=e.apply(s,l)),r}},throttle:function(e,t){var n,i,r,o,a,s;return a=0,s=function(){a=new Date,r=null,o=e.apply(n,i)},function(){var l=new Date,c=t-(l-a);return n=this,i=arguments,c<=0?(clearTimeout(r),r=null,a=l,o=e.apply(n,i)):r||(r=setTimeout(s,c)),o}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},guid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+e()+e(!0)+e(!0)+e()},noop:function(){}}}(),i=function(){"use strict";var e={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(o){var a,s;return s=t.mixin({},e,o),{css:(a={css:r(),classes:s,html:n(s),selectors:i(s)}).css,html:a.html,classes:a.classes,selectors:a.selectors,mixin:function(e){t.mixin(e,a)}}};function n(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div role="listbox" class="'+e.menu+'"></div>'}}function i(e){var n={};return t.each(e,function(e,t){n[t]="."+e}),n}function r(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}}(),r=function(){"use strict";var n;function i(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}return n={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(i.prototype,{_trigger:function(t,n){var i=e.Event("typeahead:"+t);return this.$el.trigger.call(this.$el,i,n||[]),i},before:function(e){var t;return t=[].slice.call(arguments,1),this._trigger("before"+e,t).isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=n[e])&&this._trigger(t,[].slice.call(arguments,1))}}),i}(),o=function(){"use strict";var e=/\s+/,t=function(){var e;e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)};return e}();return{onSync:function(e,t,i){return n.call(this,"sync",e,t,i)},onAsync:function(e,t,i){return n.call(this,"async",e,t,i)},off:function(t){var n;if(!this._callbacks)return this;t=t.split(e);for(;n=t.shift();)delete this._callbacks[n];return this},trigger:function(n){var r,o,a,s,l;if(!this._callbacks)return this;n=n.split(e),a=[].slice.call(arguments,1);for(;(r=n.shift())&&(o=this._callbacks[r]);)s=i(o.sync,this,[r].concat(a)),l=i(o.async,this,[r].concat(a)),s()&&t(l);return this}};function n(t,n,i,r){var o;if(!i)return this;for(n=n.split(e),i=r?function(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}(i,r):i,this._callbacks=this._callbacks||{};o=n.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][t].push(i);return this}function i(e,t,n){return function(){for(var i,r=0,o=e.length;!i&&r<o;r+=1)i=!1===e[r].apply(t,n);return!i}}}(),a=function(e){"use strict";var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},i={A:"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",B:"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",C:"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",D:"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",E:"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",F:"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",G:"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",H:"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",I:"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",J:"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",K:"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",L:"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",M:"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",N:"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",O:"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",P:"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",Q:"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",R:"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",S:"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",T:"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",U:"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",V:"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",W:"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",X:"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",Y:"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",Z:"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"};return function(i){var o;(i=t.mixin({},n,i)).node&&i.pattern&&(i.pattern=t.isArray(i.pattern)?i.pattern:[i.pattern],o=function(e,n,i,o){for(var a,s=[],l=0,c=e.length;l<c;l++){var u=t.escapeRegExChars(e[l]);o&&(u=u.replace(/\S/g,r)),s.push(u)}return a=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(a):new RegExp(a,"i")}(i.pattern,i.caseSensitive,i.wordsOnly,i.diacriticInsensitive),function e(t,n){for(var i,r=0;r<t.childNodes.length;r++)3===(i=t.childNodes[r]).nodeType?r+=n(i)?1:0:e(i,n)}(i.node,function(t){var n,r,a;(n=o.exec(t.data))&&(a=e.createElement(i.tagName),i.className&&(a.className=i.className),(r=t.splitText(n.index)).splitText(n[0].length),a.appendChild(r.cloneNode(!0)),t.parentNode.replaceChild(a,r));return!!n}))};function r(e){return i[e.toUpperCase()]||e}}(window.document),s=function(){"use strict";var n;function i(n,i){var r,o;(n=n||{}).input||e.error("input is missing"),i.mixin(this),this.$hint=e(n.hint),this.$input=e(n.input),this.$menu=e(n.menu),r=this.$input.attr("id")||t.guid(),this.$menu.attr("id",r+"_listbox"),this.$hint.attr({"aria-hidden":!0}),this.$input.attr({"aria-owns":r+"_listbox","aria-controls":r+"_listbox",role:"combobox","aria-autocomplete":"list","aria-expanded":!1}),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=(o=this.$input,e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:o.css("font-family"),fontSize:o.css("font-size"),fontStyle:o.css("font-style"),fontVariant:o.css("font-variant"),fontWeight:o.css("font-weight"),wordSpacing:o.css("word-spacing"),letterSpacing:o.css("letter-spacing"),textIndent:o.css("text-indent"),textRendering:o.css("text-rendering"),textTransform:o.css("text-transform")}).insertAfter(o)),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),this.onSync("cursorchange",this._updateDescendent)}return n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(i.prototype,o,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=n[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!r(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;if("tab"===e)n=!r(t);else n=!0;return n},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,r,o,a;o=e,a=this.query,r=!!(n=i.normalizeQuery(o)===i.normalizeQuery(a))&&this.query.length!==e.length,this.query=e,t||n?!t&&r&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(e,t){this.$input.attr("aria-activedescendant",t)},bind:function(){var e,i,r,o,a=this;return e=t.bind(this._onBlur,this),i=t.bind(this._onFocus,this),r=t.bind(this._onKeydown,this),o=t.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",i).on("keydown.tt",r),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",o):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){n[e.which||e.keyCode]||t.defer(t.bind(a._onInput,a,e))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n;n=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),!(""!==e&&n&&!this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||((i=document.selection.createRange()).moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=e("<div>")},setAriaExpanded:function(e){this.$input.attr("aria-expanded",e)}}),i;function r(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}}(),l=function(){"use strict";var n,i;function r(n,r){var o;(n=n||{}).templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||e.error("missing source"),n.node||e.error("missing node"),n.name&&(o=n.name,!/^[_a-zA-Z0-9-]+$/.test(o))&&e.error("invalid dataset name: "+n.name),r.mixin(this),this.highlight=!!n.highlight,this.name=t.toStr(n.name||i()),this.limit=n.limit||5,this.displayFn=function(e){return e=e||t.stringify,t.isFunction(e)?e:n;function n(t){return t[e]}}(n.display||n.displayKey),this.templates=function(n,i){return{notFound:n.notFound&&t.templatify(n.notFound),pending:n.pending&&t.templatify(n.pending),header:n.header&&t.templatify(n.header),footer:n.footer&&t.templatify(n.footer),suggestion:n.suggestion?r:o};function r(i){var r=n.suggestion;return e(r(i)).attr("id",t.guid())}function o(n){return e('<div role="option">').attr("id",t.guid()).text(i(n))}}(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=t.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=e(n.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return n={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},i=t.getIdGenerator(),r.extractData=function(t){var i=e(t);return i.data(n.obj)?{dataset:i.data(n.dataset)||"",val:i.data(n.val)||"",obj:i.data(n.obj)||null}:null},t.mixin(r.prototype,o,{_overwrite:function(e,t){(t=t||[]).length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",t,!1,this.name)},_append:function(e,t){(t=t||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",t,!0,this.name)},_renderSuggestions:function(e,t){var n;n=this._getSuggestionsFragment(e,t),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var n,i;i=(n=this._getSuggestionsFragment(e,t)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,r){var o,s=this;return o=document.createDocumentFragment(),t.each(r,function(t){var r,a;a=s._injectQuery(i,t),r=e(s.templates.suggestion(a)).data(n.dataset,s.name).data(n.obj,t).data(n.val,s.displayFn(t)).addClass(s.classes.suggestion+" "+s.classes.selectable),o.appendChild(r[0])}),this.highlight&&a({className:this.classes.highlight,node:o,pattern:i}),e(o)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=e()},_injectQuery:function(e,n){return t.isObject(n)?t.mixin({_query:e},n):n},update:function(t){var n=this,i=!1,r=!1,o=0;function a(e){r||(r=!0,e=(e||[]).slice(0,n.limit),o=e.length,n._overwrite(t,e),o<n.limit&&n.async&&n.trigger("asyncRequested",t,n.name))}this.cancel(),this.cancel=function(){i=!0,n.cancel=e.noop,n.async&&n.trigger("asyncCanceled",t,n.name)},this.source(t,a,function(r){if(r=r||[],!i&&o<n.limit){n.cancel=e.noop;var a=Math.abs(o-n.limit);o+=a,n._append(t,r.slice(0,a)),n.async&&n.trigger("asyncReceived",t,n.name)}}),!r&&a([])},cancel:e.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=e("<div>")}}),r}(),c=function(){"use strict";function n(n,i){var r=this;(n=n||{}).node||e.error("node is required"),i.mixin(this),this.$node=e(n.node),this.query=null,this.datasets=t.map(n.datasets,function(t){var n=r.$node.find(t.node).first();return t.node=n.length?n:e("<div>").appendTo(r.$node),new l(t,i)})}return t.mixin(n.prototype,o,{_onSelectableClick:function(t){this.trigger("selectableClicked",e(t.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return t.every(this.datasets,t.bind(function(e){var t=e.isEmpty();return this.$node.attr("aria-expanded",!t),t},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,n,i,r;n=(t=e.position().top)+e.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),t<0?this.$node.scrollTop(i+t):r<n&&this.$node.scrollTop(i+(n-r))},bind:function(){var n,i=this;return n=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,n),this.$node.on("mouseover",this.selectors.selectable,function(){i.setCursor(e(this))}),this.$node.on("mouseleave",function(){i._removeCursor()}),t.each(this.datasets,function(e){e.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,n,i;return n=this.getActiveSelectable(),t=this._getSelectables(),-1===(i=(i=((i=(n?t.index(n):-1)+e)+1)%(t.length+1)-1)<-1?t.length-1:i)?null:t.eq(i)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?l.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(e){var n=e!==this.query;return n&&(this.query=e,t.each(this.datasets,function(t){t.update(e)})),n},empty:function(){t.each(this.datasets,function(e){e.clear()}),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=e("<div>"),t.each(this.datasets,function(e){e.destroy()})}}),n}(),u=function(){"use strict";function n(n){this.$el=e("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),n.$input.after(this.$el),t.each(n.menu.datasets,t.bind(function(e){e.onSync&&(e.onSync("rendered",t.bind(this.update,this)),e.onSync("cleared",t.bind(this.cleared,this)))},this))}return t.mixin(n.prototype,{update:function(e,t){var n,i=t.length;n=1===i?{result:"result",is:"is"}:{result:"results",is:"are"},this.$el.text(i+" "+n.result+" "+n.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),n}(),d=function(){"use strict";var e=c.prototype;function n(){c.apply(this,[].slice.call(arguments,0))}return t.mixin(n.prototype,c.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),e.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),e.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),n}(),h=function(){"use strict";function n(n,r){var o,a,s,l,c,u,d,h,p,f,m;(n=n||{}).input||e.error("missing input"),n.menu||e.error("missing menu"),n.eventBus||e.error("missing event bus"),r.mixin(this),this.eventBus=n.eventBus,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.autoselect=!!n.autoselect,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),o=i(this,"activate","open","_onFocused"),a=i(this,"deactivate","_onBlurred"),s=i(this,"isActive","isOpen","_onEnterKeyed"),l=i(this,"isActive","isOpen","_onTabKeyed"),c=i(this,"isActive","_onEscKeyed"),u=i(this,"isActive","open","_onUpKeyed"),d=i(this,"isActive","open","_onDownKeyed"),h=i(this,"isActive","isOpen","_onLeftKeyed"),p=i(this,"isActive","isOpen","_onRightKeyed"),f=i(this,"_openIfActive","_onQueryChanged"),m=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",o,this).onSync("blurred",a,this).onSync("enterKeyed",s,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",u,this).onSync("downKeyed",d,this).onSync("leftKeyed",h,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}return t.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||e("<div>"),i=this.menu.$node||e("<div>"),n.on("blur.tt",function(e){var r,o,a;r=document.activeElement,o=i.is(r),a=i.has(r).length>0,t.isMsie()&&(o||a)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){if(this._updateHint(),this.autoselect){var r=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(r)}this.eventBus.trigger("render",t,n,i)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&(t.preventDefault(),t.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(t.preventDefault(),t.stopPropagation())},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():this.autoselect&&(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return(e=t.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var e,n,i,r,o,a;e=this.menu.getTopSelectable(),n=this.menu.getSelectableData(e),i=this.input.getInputValue(),!n||t.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=s.normalizeQuery(i),o=t.escapeRegExChars(r),(a=new RegExp("^(?:"+o+")(.+$)","i").exec(n.val))&&this.input.setHint(i+a[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.input.setAriaExpanded(!0),this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.input.setAriaExpanded(!1),this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(t.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return!(!t||this.eventBus.before("select",t.obj,t.dataset))&&(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj,t.dataset),this.close(),!0)},autocomplete:function(e){var t,n;return t=this.input.getQuery(),!(!((n=this.menu.getSelectableData(e))&&t!==n.val)||this.eventBus.before("autocomplete",n.obj,n.dataset))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj,n.dataset),!0)},moveCursor:function(e){var t,n,i,r,o,a;return t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),r=(i=this.menu.getSelectableData(n))?i.obj:null,o=i?i.dataset:null,a=n?n.attr("id"):null,this.input.trigger("cursorchange",a),!(this._minLengthMet()&&this.menu.update(t))&&!this.eventBus.before("cursorchange",r,o)&&(this.menu.setCursor(n),i?"string"==typeof i.val&&this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r,o),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n;function i(e){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(n,function(t){return e[t].apply(e,i)})}}}();!function(){"use strict";var o,a,l;function p(t,n){t.each(function(){var t,i=e(this);(t=i.data(a.typeahead))&&n(t,i)})}function f(n){var i;return(i=t.isJQuery(n)||t.isElement(n)?e(n).first():[]).length?i:null}o=e.fn.typeahead,a={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},l={initialize:function(o,l){var p;return l=t.isArray(l)?l:[].slice.call(arguments,1),p=i((o=o||{}).classNames),this.each(function(){var i,m,g,v,b,y,w,_,x,S,T;t.each(l,function(e){e.highlight=!!o.highlight}),i=e(this),m=e(p.html.wrapper),g=f(o.hint),v=f(o.menu),b=!1!==o.hint&&!g,y=!1!==o.menu&&!v,b&&(g=function(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css((n=e,{backgroundAttachment:n.css("background-attachment"),backgroundClip:n.css("background-clip"),backgroundColor:n.css("background-color"),backgroundImage:n.css("background-image"),backgroundOrigin:n.css("background-origin"),backgroundPosition:n.css("background-position"),backgroundRepeat:n.css("background-repeat"),backgroundSize:n.css("background-size")})).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1});var n}(i,p)),y&&(v=e(p.html.menu).css(p.css.menu)),g&&g.val(""),i=function(e,t){e.data(a.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(n){}return e}(i,p),(b||y)&&(m.css(p.css.wrapper),i.css(b?p.css.input:p.css.inputWithNoHint),i.wrap(m).parent().prepend(b?g:null).append(y?v:null));T=y?d:c,w=new r({el:i}),_=new s({hint:g,input:i,menu:v},p),x=new T({node:v,datasets:l},p),new u({$input:i,menu:x}),S=new h({input:_,menu:x,eventBus:w,minLength:o.minLength,autoselect:o.autoselect},p),i.data(a.www,p),i.data(a.typeahead,S)})},isEnabled:function(){var e;return p(this.first(),function(t){e=t.isEnabled()}),e},enable:function(){return p(this,function(e){e.enable()}),this},disable:function(){return p(this,function(e){e.disable()}),this},isActive:function(){var e;return p(this.first(),function(t){e=t.isActive()}),e},activate:function(){return p(this,function(e){e.activate()}),this},deactivate:function(){return p(this,function(e){e.deactivate()}),this},isOpen:function(){var e;return p(this.first(),function(t){e=t.isOpen()}),e},open:function(){return p(this,function(e){e.open()}),this},close:function(){return p(this,function(e){e.close()}),this},select:function(t){var n=!1,i=e(t);return p(this.first(),function(e){n=e.select(i)}),n},autocomplete:function(t){var n=!1,i=e(t);return p(this.first(),function(e){n=e.autocomplete(i)}),n},moveCursor:function(e){var t=!1;return p(this.first(),function(n){t=n.moveCursor(e)}),t},val:function(e){var n;return arguments.length?(p(this,function(n){n.setVal(t.toStr(e))}),this):(p(this.first(),function(e){n=e.getVal()}),n)},destroy:function(){return p(this,function(e,n){!function(e){var n,i;n=e.data(a.www),i=e.parent().filter(n.selectors.wrapper),t.each(e.data(a.attrs),function(n,i){t.isUndefined(n)?e.removeAttr(i):e.attr(i,n)}),e.removeData(a.typeahead).removeData(a.www).removeData(a.attr).removeClass(n.classes.input),i.length&&(e.detach().insertAfter(i),i.remove())}(n),e.destroy()}),this}},e.fn.typeahead=function(e){return l[e]?l[e].apply(this,[].slice.call(arguments,1)):l.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=o,this}}()}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("d3",["exports"],t):t((e=e||self).d3=e.d3||{})}(this,function(e){"use strict";function t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function n(e){var n;return 1===e.length&&(n=e,e=function(e,i){return t(n(e),i)}),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var o=i+r>>>1;e(t[o],n)<0?i=o+1:r=o}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var o=i+r>>>1;e(t[o],n)>0?r=o:i=o+1}return i}}}var i=n(t),r=i.right,o=i.left;function a(e,t){return[e,t]}function s(e){return null===e?NaN:+e}function l(e,t){var n,i,r=e.length,o=0,a=-1,l=0,c=0;if(null==t)for(;++a<r;)isNaN(n=s(e[a]))||(c+=(i=n-l)*(n-(l+=i/++o)));else for(;++a<r;)isNaN(n=s(t(e[a],a,e)))||(c+=(i=n-l)*(n-(l+=i/++o)));if(o>1)return c/(o-1)}function c(e,t){var n=l(e,t);return n?Math.sqrt(n):n}function u(e,t){var n,i,r,o=e.length,a=-1;if(null==t){for(;++a<o;)if(null!=(n=e[a])&&n>=n)for(i=r=n;++a<o;)null!=(n=e[a])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++a<o;)if(null!=(n=t(e[a],a,e))&&n>=n)for(i=r=n;++a<o;)null!=(n=t(e[a],a,e))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}var d=Array.prototype,h=d.slice,p=d.map;function f(e){return function(){return e}}function m(e){return e}function g(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}var v=Math.sqrt(50),b=Math.sqrt(10),y=Math.sqrt(2);function w(e,t,n){var i,r,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(a=_(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(r=Math.ceil(t-e+1));++s<r;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(r=Math.ceil(e-t+1));++s<r;)o[s]=(e-s)/a;return i&&o.reverse(),o}function _(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=v?10:o>=b?5:o>=y?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=v?10:o>=b?5:o>=y?2:1)}function x(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=v?r*=10:o>=b?r*=5:o>=y&&(r*=2),t<e?-r:r}function S(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function T(e,t,n){if(null==n&&(n=s),i=e.length){if((t=+t)<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(r-o)}}function A(e,t){var n,i,r=e.length,o=-1;if(null==t){for(;++o<r;)if(null!=(n=e[o])&&n>=n)for(i=n;++o<r;)null!=(n=e[o])&&n>i&&(i=n)}else for(;++o<r;)if(null!=(n=t(e[o],o,e))&&n>=n)for(i=n;++o<r;)null!=(n=t(e[o],o,e))&&n>i&&(i=n);return i}function C(e){for(var t,n,i,r=e.length,o=-1,a=0;++o<r;)a+=e[o].length;for(n=new Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n}function E(e,t){var n,i,r=e.length,o=-1;if(null==t){for(;++o<r;)if(null!=(n=e[o])&&n>=n)for(i=n;++o<r;)null!=(n=e[o])&&i>n&&(i=n)}else for(;++o<r;)if(null!=(n=t(e[o],o,e))&&n>=n)for(i=n;++o<r;)null!=(n=t(e[o],o,e))&&i>n&&(i=n);return i}function k(e){if(!(r=e.length))return[];for(var t=-1,n=E(e,I),i=new Array(n);++t<n;)for(var r,o=-1,a=i[t]=new Array(r);++o<r;)a[o]=e[o][t];return i}function I(e){return e.length}var P=Array.prototype.slice;function D(e){return e}var O=1e-6;function M(e){return"translate("+(e+.5)+",0)"}function L(e){return"translate(0,"+(e+.5)+")"}function R(e){return function(t){return+e(t)}}function N(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function F(){return!this.__axis}function U(e,t){var n=[],i=null,r=null,o=6,a=6,s=3,l=1===e||4===e?-1:1,c=4===e||2===e?"x":"y",u=1===e||3===e?M:L;function d(d){var h=null==i?t.ticks?t.ticks.apply(t,n):t.domain():i,p=null==r?t.tickFormat?t.tickFormat.apply(t,n):D:r,f=Math.max(o,0)+s,m=t.range(),g=+m[0]+.5,v=+m[m.length-1]+.5,b=(t.bandwidth?N:R)(t.copy()),y=d.selection?d.selection():d,w=y.selectAll(".domain").data([null]),_=y.selectAll(".tick").data(h,t).order(),x=_.exit(),S=_.enter().append("g").attr("class","tick"),T=_.select("line"),A=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(S),T=T.merge(S.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),A=A.merge(S.append("text").attr("fill","currentColor").attr(c,l*f).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),d!==y&&(w=w.transition(d),_=_.transition(d),T=T.transition(d),A=A.transition(d),x=x.transition(d).attr("opacity",O).attr("transform",function(e){return isFinite(e=b(e))?u(e):this.getAttribute("transform")}),S.attr("opacity",O).attr("transform",function(e){var t=this.parentNode.__axis;return u(t&&isFinite(t=t(e))?t:b(e))})),x.remove(),w.attr("d",4===e||2==e?a?"M"+l*a+","+g+"H0.5V"+v+"H"+l*a:"M0.5,"+g+"V"+v:a?"M"+g+","+l*a+"V0.5H"+v+"V"+l*a:"M"+g+",0.5H"+v),_.attr("opacity",1).attr("transform",function(e){return u(b(e))}),T.attr(c+"2",l*o),A.attr(c,l*f).text(p),y.filter(F).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),y.each(function(){this.__axis=b})}return d.scale=function(e){return arguments.length?(t=e,d):t},d.ticks=function(){return n=P.call(arguments),d},d.tickArguments=function(e){return arguments.length?(n=null==e?[]:P.call(e),d):n.slice()},d.tickValues=function(e){return arguments.length?(i=null==e?null:P.call(e),d):i&&i.slice()},d.tickFormat=function(e){return arguments.length?(r=e,d):r},d.tickSize=function(e){return arguments.length?(o=a=+e,d):o},d.tickSizeInner=function(e){return arguments.length?(o=+e,d):o},d.tickSizeOuter=function(e){return arguments.length?(a=+e,d):a},d.tickPadding=function(e){return arguments.length?(s=+e,d):s},d}var V={value:function(){}};function B(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new $(i)}function $(e){this._=e}function H(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function G(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=V,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}$.prototype=B.prototype={constructor:$,on:function(e,t){var n,i,r=this._,o=(i=r,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)r[n]=G(r[n],e.name,t);else if(null==t)for(n in r)r[n]=G(r[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=H(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new $(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(i=this._[e]).length;o<n;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};var j="http://www.w3.org/1999/xhtml",z={svg:"http://www.w3.org/2000/svg",xhtml:j,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),z.hasOwnProperty(t)?{space:z[t],local:e}:e}function Y(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===j&&t.documentElement.namespaceURI===j?t.createElement(e):t.createElementNS(n,e)}}function W(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function K(e){var t=q(e);return(t.local?W:Y)(t)}function X(){}function Z(e){return null==e?X:function(){return this.querySelector(e)}}function J(){return[]}function Q(e){return null==e?J:function(){return this.querySelectorAll(e)}}function ee(e){return function(){return this.matches(e)}}function te(e){return new Array(e.length)}function ne(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ne.prototype={constructor:ne,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ie(e,t,n,i,r,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new ne(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function re(e,t,n,i,r,o,a){var s,l,c,u={},d=t.length,h=o.length,p=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(p[s]=c="$"+a.call(l,l.__data__,s,t),c in u?r[s]=l:u[c]=l);for(s=0;s<h;++s)(l=u[c="$"+a.call(e,o[s],s,o)])?(i[s]=l,l.__data__=o[s],u[c]=null):n[s]=new ne(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&u[p[s]]===l&&(r[s]=l)}function oe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ae(e){return function(){this.removeAttribute(e)}}function se(e){return function(){this.removeAttributeNS(e.space,e.local)}}function le(e,t){return function(){this.setAttribute(e,t)}}function ce(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ue(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function de(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function he(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pe(e){return function(){this.style.removeProperty(e)}}function fe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function me(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function ge(e,t){return e.style.getPropertyValue(t)||he(e).getComputedStyle(e,null).getPropertyValue(t)}function ve(e){return function(){delete this[e]}}function be(e,t){return function(){this[e]=t}}function ye(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function we(e){return e.trim().split(/^|\s+/)}function _e(e){return e.classList||new xe(e)}function xe(e){this._node=e,this._names=we(e.getAttribute("class")||"")}function Se(e,t){for(var n=_e(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Te(e,t){for(var n=_e(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Ae(e){return function(){Se(this,e)}}function Ce(e){return function(){Te(this,e)}}function Ee(e,t){return function(){(t.apply(this,arguments)?Se:Te)(this,e)}}function ke(){this.textContent=""}function Ie(e){return function(){this.textContent=e}}function Pe(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function De(){this.innerHTML=""}function Oe(e){return function(){this.innerHTML=e}}function Me(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Le(){this.nextSibling&&this.parentNode.appendChild(this)}function Re(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ne(){return null}function Fe(){var e=this.parentNode;e&&e.removeChild(this)}function Ue(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ve(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}xe.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Be={};(e.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(Be={mouseenter:"mouseover",mouseleave:"mouseout"}));function $e(e,t,n){return e=He(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function He(t,n,i){return function(r){var o=e.event;e.event=r;try{t.call(this,this.__data__,n,i)}finally{e.event=o}}}function Ge(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,o=t.length;i<o;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function je(e,t,n){var i=Be.hasOwnProperty(e.type)?$e:He;return function(r,o,a){var s,l=this.__on,c=i(t,o,a);if(l)for(var u=0,d=l.length;u<d;++u)if((s=l[u]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=t);this.addEventListener(e.type,c,n),s={type:e.type,name:e.name,value:t,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function ze(t,n,i,r){var o=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(i,r)}finally{e.event=o}}function qe(e,t,n){var i=he(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ye(e,t){return function(){return qe(this,e,t)}}function We(e,t){return function(){return qe(this,e,t.apply(this,arguments))}}var Ke=[null];function Xe(e,t){this._groups=e,this._parents=t}function Ze(){return new Xe([[document.documentElement]],Ke)}function Je(e){return"string"==typeof e?new Xe([[document.querySelector(e)]],[document.documentElement]):new Xe([[e]],Ke)}Xe.prototype=Ze.prototype={constructor:Xe,select:function(e){"function"!=typeof e&&(e=Z(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,a,s=t[r],l=s.length,c=i[r]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new Xe(i,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=Q(e));for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(i.push(e.call(a,a.__data__,c,s)),r.push(a));return new Xe(i,r)},filter:function(e){"function"!=typeof e&&(e=ee(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,a=t[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new Xe(i,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),c=-1,this.each(function(e){p[++c]=e}),p;var n=t?re:ie,i=this._parents,r=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=r[c],h=d.length,p=e.call(u,u&&u.__data__,c,i),f=p.length,m=s[c]=new Array(f),g=a[c]=new Array(f);n(u,d,m,g,l[c]=new Array(h),p,t);for(var v,b,y=0,w=0;y<f;++y)if(v=m[y]){for(y>=w&&(w=y+1);!(b=g[w])&&++w<f;);v._next=b||null}}return(a=new Xe(a,i))._enter=s,a._exit=l,a},enter:function(){return new Xe(this._enter||this._groups.map(te),this._parents)},exit:function(){return new Xe(this._exit||this._groups.map(te),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,o=this.exit();return i="function"==typeof e?e(i):i.append(e+""),null!=t&&(r=t(r)),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(e){for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,c=t[s],u=n[s],d=c.length,h=a[s]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;s<i;++s)a[s]=t[s];return new Xe(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=oe);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,s=n[o],l=s.length,c=r[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new Xe(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,o=t[n],a=0,s=o.length;a<s;++a)(r=o[a])&&e.call(r,r.__data__,a,o);return this},attr:function(e,t){var n=q(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?se:ae:"function"==typeof t?n.local?de:ue:n.local?ce:le)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?pe:"function"==typeof t?me:fe)(e,t,null==n?"":n)):ge(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ve:"function"==typeof t?ye:be)(e,t)):this.node()[e]},classed:function(e,t){var n=we(e+"");if(arguments.length<2){for(var i=_e(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?Ee:t?Ae:Ce)(n,t))},text:function(e){return arguments.length?this.each(null==e?ke:("function"==typeof e?Pe:Ie)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?De:("function"==typeof e?Me:Oe)(e)):this.node().innerHTML},raise:function(){return this.each(Le)},lower:function(){return this.each(Re)},append:function(e){var t="function"==typeof e?e:K(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:K(e),i=null==t?Ne:"function"==typeof t?t:Z(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(Fe)},clone:function(e){return this.select(e?Ve:Ue)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?je:Ge,null==n&&(n=!1),i=0;i<a;++i)this.each(s(o[i],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(i=0,l=s[c];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?We:Ye)(e,t))}};var Qe=0;function et(){return new tt}function tt(){this._="@"+(++Qe).toString(36)}function nt(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function it(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}function rt(e){var t=nt();return t.changedTouches&&(t=t.changedTouches[0]),it(e,t)}function ot(e,t,n){arguments.length<3&&(n=t,t=nt().changedTouches);for(var i,r=0,o=t?t.length:0;r<o;++r)if((i=t[r]).identifier===n)return it(e,i);return null}function at(){e.event.stopImmediatePropagation()}function st(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function lt(e){var t=e.document.documentElement,n=Je(e).on("dragstart.drag",st,!0);"onselectstart"in t?n.on("selectstart.drag",st,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ct(e,t){var n=e.document.documentElement,i=Je(e).on("dragstart.drag",null);t&&(i.on("click.drag",st,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ut(e){return function(){return e}}function dt(e,t,n,i,r,o,a,s,l,c){this.target=e,this.type=t,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=a,this.dx=s,this.dy=l,this._=c}function ht(){return!e.event.ctrlKey&&!e.event.button}function pt(){return this.parentNode}function ft(t){return null==t?{x:e.event.x,y:e.event.y}:t}function mt(){return navigator.maxTouchPoints||"ontouchstart"in this}function gt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vt(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function bt(){}tt.prototype=et.prototype={constructor:tt,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}},dt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var yt=.7,wt=1/yt,_t="\\s*([+-]?\\d+)\\s*",xt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",St="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tt=/^#([0-9a-f]{3,8})$/,At=new RegExp("^rgb\\("+[_t,_t,_t]+"\\)$"),Ct=new RegExp("^rgb\\("+[St,St,St]+"\\)$"),Et=new RegExp("^rgba\\("+[_t,_t,_t,xt]+"\\)$"),kt=new RegExp("^rgba\\("+[St,St,St,xt]+"\\)$"),It=new RegExp("^hsl\\("+[xt,St,St]+"\\)$"),Pt=new RegExp("^hsla\\("+[xt,St,St,xt]+"\\)$"),Dt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ot(){return this.rgb().formatHex()}function Mt(){return this.rgb().formatRgb()}function Lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Rt(t):3===n?new Vt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Nt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Nt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=At.exec(e))?new Vt(t[1],t[2],t[3],1):(t=Ct.exec(e))?new Vt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Et.exec(e))?Nt(t[1],t[2],t[3],t[4]):(t=kt.exec(e))?Nt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=It.exec(e))?Gt(t[1],t[2]/100,t[3]/100,1):(t=Pt.exec(e))?Gt(t[1],t[2]/100,t[3]/100,t[4]):Dt.hasOwnProperty(e)?Rt(Dt[e]):"transparent"===e?new Vt(NaN,NaN,NaN,0):null}function Rt(e){return new Vt(e>>16&255,e>>8&255,255&e,1)}function Nt(e,t,n,i){return i<=0&&(e=t=n=NaN),new Vt(e,t,n,i)}function Ft(e){return e instanceof bt||(e=Lt(e)),e?new Vt((e=e.rgb()).r,e.g,e.b,e.opacity):new Vt}function Ut(e,t,n,i){return 1===arguments.length?Ft(e):new Vt(e,t,n,null==i?1:i)}function Vt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function Bt(){return"#"+Ht(this.r)+Ht(this.g)+Ht(this.b)}function $t(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Ht(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Gt(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qt(e,t,n,i)}function jt(e){if(e instanceof qt)return new qt(e.h,e.s,e.l,e.opacity);if(e instanceof bt||(e=Lt(e)),!e)return new qt;if(e instanceof qt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=t===o?(n-i)/s+6*(n<i):n===o?(i-t)/s+2:(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new qt(a,s,l,e.opacity)}function zt(e,t,n,i){return 1===arguments.length?jt(e):new qt(e,t,n,null==i?1:i)}function qt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Yt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}gt(bt,Lt,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ot,formatHex:Ot,formatHsl:function(){return jt(this).formatHsl()},formatRgb:Mt,toString:Mt}),gt(Vt,Ut,vt(bt,{brighter:function(e){return e=null==e?wt:Math.pow(wt,e),new Vt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?yt:Math.pow(yt,e),new Vt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bt,formatHex:Bt,formatRgb:$t,toString:$t})),gt(qt,zt,vt(bt,{brighter:function(e){return e=null==e?wt:Math.pow(wt,e),new qt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?yt:Math.pow(yt,e),new qt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Vt(Yt(e>=240?e-240:e+120,r,i),Yt(e,r,i),Yt(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Wt=Math.PI/180,Kt=180/Math.PI,Xt=.96422,Zt=.82521,Jt=4/29,Qt=6/29,en=3*Qt*Qt,tn=Qt*Qt*Qt;function nn(e){if(e instanceof on)return new on(e.l,e.a,e.b,e.opacity);if(e instanceof hn)return pn(e);e instanceof Vt||(e=Ft(e));var t,n,i=cn(e.r),r=cn(e.g),o=cn(e.b),a=an((.2225045*i+.7168786*r+.0606169*o)/1);return i===r&&r===o?t=n=a:(t=an((.4360747*i+.3850649*r+.1430804*o)/Xt),n=an((.0139322*i+.0971045*r+.7141733*o)/Zt)),new on(116*a-16,500*(t-a),200*(a-n),e.opacity)}function rn(e,t,n,i){return 1===arguments.length?nn(e):new on(e,t,n,null==i?1:i)}function on(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function an(e){return e>tn?Math.pow(e,1/3):e/en+Jt}function sn(e){return e>Qt?e*e*e:en*(e-Jt)}function ln(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function cn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function un(e){if(e instanceof hn)return new hn(e.h,e.c,e.l,e.opacity);if(e instanceof on||(e=nn(e)),0===e.a&&0===e.b)return new hn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Kt;return new hn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function dn(e,t,n,i){return 1===arguments.length?un(e):new hn(e,t,n,null==i?1:i)}function hn(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function pn(e){if(isNaN(e.h))return new on(e.l,0,0,e.opacity);var t=e.h*Wt;return new on(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}gt(on,rn,vt(bt,{brighter:function(e){return new on(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new on(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Vt(ln(3.1338561*(t=Xt*sn(t))-1.6168667*(e=1*sn(e))-.4906146*(n=Zt*sn(n))),ln(-.9787684*t+1.9161415*e+.033454*n),ln(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),gt(hn,dn,vt(bt,{brighter:function(e){return new hn(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new hn(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return pn(this).rgb()}}));var fn=-.14861,mn=1.78277,gn=-.29227,vn=-.90649,bn=1.97294,yn=bn*vn,wn=bn*mn,_n=mn*gn-vn*fn;function xn(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof Sn)return new Sn(e.h,e.s,e.l,e.opacity);e instanceof Vt||(e=Ft(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(_n*i+yn*t-wn*n)/(_n+yn-wn),o=i-r,a=(bn*(n-r)-gn*o)/vn,s=Math.sqrt(a*a+o*o)/(bn*r*(1-r)),l=s?Math.atan2(a,o)*Kt-120:NaN;return new Sn(l<0?l+360:l,s,r,e.opacity)}(e):new Sn(e,t,n,null==i?1:i)}function Sn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Tn(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}function An(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<t-1?e[i+2]:2*o-r;return Tn((n-i/t)*t,a,r,o,s)}}function Cn(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return Tn((n-i/t)*t,r,o,a,s)}}function En(e){return function(){return e}}function kn(e,t){return function(n){return e+n*t}}function In(e,t){var n=t-e;return n?kn(e,n>180||n<-180?n-360*Math.round(n/360):n):En(isNaN(e)?t:e)}function Pn(e){return 1===(e=+e)?Dn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):En(isNaN(t)?n:t)}}function Dn(e,t){var n=t-e;return n?kn(e,n):En(isNaN(e)?t:e)}gt(Sn,xn,vt(bt,{brighter:function(e){return e=null==e?wt:Math.pow(wt,e),new Sn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?yt:Math.pow(yt,e),new Sn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Wt,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Vt(255*(t+n*(fn*i+mn*r)),255*(t+n*(gn*i+vn*r)),255*(t+n*(bn*i)),this.opacity)}}));var On=function e(t){var n=Pn(t);function i(e,t){var i=n((e=Ut(e)).r,(t=Ut(t)).r),r=n(e.g,t.g),o=n(e.b,t.b),a=Dn(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=o(t),e.opacity=a(t),e+""}}return i.gamma=e,i}(1);function Mn(e){return function(t){var n,i,r=t.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=Ut(t[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=e(o),a=e(a),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=a(e),i.b=s(e),i+""}}}var Ln=Mn(An),Rn=Mn(Cn);function Nn(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(o){for(n=0;n<i;++n)r[n]=e[n]*(1-o)+t[n]*o;return r}}function Fn(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Un(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,o=new Array(r),a=new Array(i);for(n=0;n<r;++n)o[n]=zn(e[n],t[n]);for(;n<i;++n)a[n]=t[n];return function(e){for(n=0;n<r;++n)a[n]=o[n](e);return a}}function Vn(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Bn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $n(e,t){var n,i={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=zn(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var Hn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gn=new RegExp(Hn.source,"g");function jn(e,t){var n,i,r,o=Hn.lastIndex=Gn.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Hn.exec(e))&&(i=Gn.exec(t));)(r=i.index)>o&&(r=t.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Bn(n,i)})),o=Gn.lastIndex;return o<t.length&&(r=t.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function zn(e,t){var n,i=typeof t;return null==t||"boolean"===i?En(t):("number"===i?Bn:"string"===i?(n=Lt(t))?(t=n,On):jn:t instanceof Lt?On:t instanceof Date?Vn:Fn(t)?Nn:Array.isArray(t)?Un:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?$n:Bn)(e,t)}function qn(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Yn,Wn,Kn,Xn,Zn=180/Math.PI,Jn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qn(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*Zn,skewX:Math.atan(l)*Zn,scaleX:a,scaleY:s}}function ei(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,i,r,o,a,s){if(e!==r||i!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Bn(e,r)},{i:l-2,x:Bn(i,o)})}else(r||o)&&a.push("translate("+r+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Bn(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Bn(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(o.skewX,a.skewX,s,l),function(e,t,n,i,o,a){if(e!==n||t!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Bn(e,n)},{i:s-2,x:Bn(t,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,i=l.length;++n<i;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var ti=ei(function(e){return"none"===e?Jn:(Yn||(Yn=document.createElement("DIV"),Wn=document.documentElement,Kn=document.defaultView),Yn.style.transform=e,e=Kn.getComputedStyle(Wn.appendChild(Yn),null).getPropertyValue("transform"),Wn.removeChild(Yn),Qn(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),ni=ei(function(e){return null==e?Jn:(Xn||(Xn=document.createElementNS("http://www.w3.org/2000/svg","g")),Xn.setAttribute("transform",e),(e=Xn.transform.baseVal.consolidate())?Qn((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Jn)},", ",")",")"),ii=Math.SQRT2;function ri(e){return((e=Math.exp(e))+1/e)/2}function oi(e,t){var n,i,r=e[0],o=e[1],a=e[2],s=t[0],l=t[1],c=t[2],u=s-r,d=l-o,h=u*u+d*d;if(h<1e-12)i=Math.log(c/a)/ii,n=function(e){return[r+e*u,o+e*d,a*Math.exp(ii*e*i)]};else{var p=Math.sqrt(h),f=(c*c-a*a+4*h)/(2*a*2*p),m=(c*c-a*a-4*h)/(2*c*2*p),g=Math.log(Math.sqrt(f*f+1)-f),v=Math.log(Math.sqrt(m*m+1)-m);i=(v-g)/ii,n=function(e){var t=e*i,n=ri(g),s=a/(2*p)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(ii*t+g)-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[r+s*u,o+s*d,a*n/ri(ii*t+g)]}}return n.duration=1e3*i,n}function ai(e){return function(t,n){var i=e((t=zt(t)).h,(n=zt(n)).h),r=Dn(t.s,n.s),o=Dn(t.l,n.l),a=Dn(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=r(e),t.l=o(e),t.opacity=a(e),t+""}}}var si=ai(In),li=ai(Dn);function ci(e){return function(t,n){var i=e((t=dn(t)).h,(n=dn(n)).h),r=Dn(t.c,n.c),o=Dn(t.l,n.l),a=Dn(t.opacity,n.opacity);return function(e){return t.h=i(e),t.c=r(e),t.l=o(e),t.opacity=a(e),t+""}}}var ui=ci(In),di=ci(Dn);function hi(e){return function t(n){function i(t,i){var r=e((t=xn(t)).h,(i=xn(i)).h),o=Dn(t.s,i.s),a=Dn(t.l,i.l),s=Dn(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,i.gamma=t,i}(1)}var pi=hi(In),fi=hi(Dn);var mi,gi,vi=0,bi=0,yi=0,wi=0,_i=0,xi=0,Si="object"==typeof performance&&performance.now?performance:Date,Ti="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ai(){return _i||(Ti(Ci),_i=Si.now()+xi)}function Ci(){_i=0}function Ei(){this._call=this._time=this._next=null}function ki(e,t,n){var i=new Ei;return i.restart(e,t,n),i}function Ii(){Ai(),++vi;for(var e,t=mi;t;)(e=_i-t._time)>=0&&t._call.call(null,e),t=t._next;--vi}function Pi(){_i=(wi=Si.now())+xi,vi=bi=0;try{Ii()}finally{vi=0,function(){var e,t,n=mi,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:mi=t);gi=e,Oi(i)}(),_i=0}}function Di(){var e=Si.now(),t=e-wi;t>1e3&&(xi-=t,wi=e)}function Oi(e){vi||(bi&&(bi=clearTimeout(bi)),e-_i>24?(e<1/0&&(bi=setTimeout(Pi,e-Si.now()-xi)),yi&&(yi=clearInterval(yi))):(yi||(wi=Si.now(),yi=setInterval(Di,1e3)),vi=1,Ti(Pi)))}function Mi(e,t,n){var i=new Ei;return t=null==t?0:+t,i.restart(function(n){i.stop(),e(n+t)},t,n),i}Ei.prototype=ki.prototype={constructor:Ei,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Ai():+n)+(null==t?0:+t),this._next||gi===this||(gi?gi._next=this:mi=this,gi=this),this._call=e,this._time=n,Oi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oi())}};var Li=B("start","end","cancel","interrupt"),Ri=[];function Ni(e,t,n,i,r,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var c,u,d,h;if(1!==n.state)return l();for(c in r)if((h=r[c]).name===n.name){if(3===h.state)return Mi(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Mi(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=ki(o,0,n.time)}(e,n,{name:t,index:i,group:r,on:Li,tween:Ri,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Fi(e,t){var n=Vi(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ui(e,t){var n=Vi(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Vi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Bi(e,t){var n,i,r,o=e.__transition,a=!0;if(o){for(r in t=null==t?null:t+"",o)(n=o[r]).name===t?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[r]):a=!1;a&&delete e.__transition}}function $i(e,t){var n,i;return function(){var r=Ui(this,e),o=r.tween;if(o!==n)for(var a=0,s=(i=n=o).length;a<s;++a)if(i[a].name===t){(i=i.slice()).splice(a,1);break}r.tween=i}}function Hi(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Ui(this,e),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}o.tween=r}}function Gi(e,t,n){var i=e._id;return e.each(function(){var e=Ui(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Vi(e,i).value[t]}}function ji(e,t){var n;return("number"==typeof t?Bn:t instanceof Lt?On:(n=Lt(t))?(t=n,On):jn)(e,t)}function zi(e){return function(){this.removeAttribute(e)}}function qi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yi(e,t,n){var i,r,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===i?r:r=t(i=a,n)}}function Wi(e,t,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===i?r:r=t(i=a,n)}}function Ki(e,t,n){var i,r,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=t(i=a,l));this.removeAttribute(e)}}function Xi(e,t,n){var i,r,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=t(i=a,l));this.removeAttributeNS(e.space,e.local)}}function Zi(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Ji(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Qi(e,t){return function(){Fi(this,e).delay=+t.apply(this,arguments)}}function er(e,t){return t=+t,function(){Fi(this,e).delay=t}}function tr(e,t){return function(){Ui(this,e).duration=+t.apply(this,arguments)}}function nr(e,t){return t=+t,function(){Ui(this,e).duration=t}}var ir=Ze.prototype.constructor;function rr(e){return function(){this.style.removeProperty(e)}}var or=0;function ar(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function sr(e){return Ze().transition(e)}function lr(){return++or}var cr=Ze.prototype;function ur(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function dr(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}ar.prototype=sr.prototype={constructor:ar,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Z(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s,l,c=i[a],u=c.length,d=o[a]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,Ni(d[h],t,n,h,d,Vi(s,n)));return new ar(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Q(e));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,c=i[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,p=e.call(l,l.__data__,d,c),f=Vi(l,n),m=0,g=p.length;m<g;++m)(h=p[m])&&Ni(h,t,n,m,p,f);o.push(p),a.push(l)}return new ar(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=ee(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o,a=t[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new ar(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,c=t[s],u=n[s],d=c.length,h=a[s]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;s<i;++s)a[s]=t[s];return new ar(a,this._parents,this._name,this._id)},selection:function(){return new ir(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=lr(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=Vi(a,t);Ni(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ar(i,this._parents,e,n)},call:cr.call,nodes:cr.nodes,node:cr.node,size:cr.size,empty:cr.empty,each:cr.each,on:function(e,t){var n=this._id;return arguments.length<2?Vi(this.node(),n).on.on(e):this.each(function(e,t,n){var i,r,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?Fi:Ui;return function(){var a=o(this,e),s=a.on;s!==i&&(r=(i=s).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=q(e),i="transform"===n?ni:ji;return this.attrTween(e,"function"==typeof t?(n.local?Xi:Ki)(n,i,Gi(this,"attr."+e,t)):null==t?(n.local?qi:zi)(n):(n.local?Wi:Yi)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=q(e);return this.tween(n,(i.local?Zi:Ji)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?ti:ji;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var o=ge(this,e),a=(this.style.removeProperty(e),ge(this,e));return o===a?null:o===n&&a===i?r:r=t(n=o,i=a)}}(e,i)).on("end.style."+e,rr(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,r,o;return function(){var a=ge(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=ge(this,e)),a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s))}}(e,i,Gi(this,"style."+e,t))).each(function(e,t){var n,i,r,o,a="style."+t,s="end."+a;return function(){var l=Ui(this,e),c=l.on,u=null==l.value[a]?o||(o=rr(t)):void 0;c===n&&r===u||(i=(n=c).copy()).on(s,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,o=n+"";return function(){var a=ge(this,e);return a===o?null:a===i?r:r=t(i=a,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(e,t,n){var i,r;function o(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,o,n)),i}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Gi(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=Vi(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((null==t?$i:Hi)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Qi:er)(t,e)):Vi(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?tr:nr)(t,e)):Vi(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Ui(this,e).ease=t}}(t,e)):Vi(this.node(),t).ease},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0===--r&&o()}};n.each(function(){var n=Ui(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})})}};var hr=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),pr=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),fr=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),mr=Math.PI,gr=mr/2;function vr(e){return(1-Math.cos(mr*e))/2}function br(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function yr(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var wr=4/11,_r=6/11,xr=8/11,Sr=9/11,Tr=10/11,Ar=21/22,Cr=7.5625;function Er(e){return(e=+e)<wr?Cr*e*e:e<xr?Cr*(e-=_r)*e+.75:e<Tr?Cr*(e-=Sr)*e+.9375:Cr*(e-=Ar)*e+.984375}var kr=1.70158,Ir=function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(kr),Pr=function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(kr),Dr=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(kr),Or=2*Math.PI,Mr=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=Or);function r(e){return t*Math.pow(2,10*--e)*Math.sin((i-e)/n)}return r.amplitude=function(t){return e(t,n*Or)},r.period=function(n){return e(t,n)},r}(1,.3),Lr=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=Or);function r(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+i)/n)}return r.amplitude=function(t){return e(t,n*Or)},r.period=function(n){return e(t,n)},r}(1,.3),Rr=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=Or);function r(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((i-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((i+e)/n))/2}return r.amplitude=function(t){return e(t,n*Or)},r.period=function(n){return e(t,n)},r}(1,.3),Nr={time:null,delay:0,duration:250,ease:dr};function Fr(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Nr.time=Ai(),Nr;return n}Ze.prototype.interrupt=function(e){return this.each(function(){Bi(this,e)})},Ze.prototype.transition=function(e){var t,n;e instanceof ar?(t=e._id,e=e._name):(t=lr(),(n=Nr).time=Ai(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)(a=s[c])&&Ni(a,e,t,c,s,n||Fr(a,t));return new ar(i,this._parents,e,t)};var Ur=[null];function Vr(e){return function(){return e}}function Br(e,t,n){this.target=e,this.type=t,this.selection=n}function $r(){e.event.stopImmediatePropagation()}function Hr(){e.event.preventDefault(),e.event.stopImmediatePropagation()}var Gr={name:"drag"},jr={name:"space"},zr={name:"handle"},qr={name:"center"};function Yr(e){return[+e[0],+e[1]]}function Wr(e){return[Yr(e[0]),Yr(e[1])]}var Kr={name:"x",handles:["w","e"].map(io),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Xr={name:"y",handles:["n","s"].map(io),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Zr={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(io),input:function(e){return null==e?null:Wr(e)},output:function(e){return e}},Jr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},eo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},to={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},no={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function io(e){return{type:e}}function ro(){return!e.event.ctrlKey&&!e.event.button}function oo(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ao(){return navigator.maxTouchPoints||"ontouchstart"in this}function so(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function lo(t){var n,i=oo,r=ro,o=ao,a=!0,s=B("start","brush","end"),l=6;function c(e){var n=e.property("__brush",g).selectAll(".overlay").data([io("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jr.overlay).merge(n).each(function(){var e=so(this).extent;Je(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([io("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,function(e){return e.type});i.exit().remove(),i.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return Jr[e.type]}),e.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(o).on("touchstart.brush",p).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var e=Je(this),t=so(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-l/2:t[0][0]-l/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-l/2:t[0][1]-l/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+l:l}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+l:l})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(e,t,n){return!n&&e.__brush.emitter||new h(e,t)}function h(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function p(){if((!n||e.event.touches)&&r.apply(this,arguments)){var i,o,s,l,c,h,p,f,m,g,v,b,y=this,w=e.event.target.__data__.type,_="selection"===(a&&e.event.metaKey?w="overlay":w)?Gr:a&&e.event.altKey?qr:zr,x=t===Xr?null:to[w],S=t===Kr?null:no[w],T=so(y),A=T.extent,C=T.selection,E=A[0][0],k=A[0][1],I=A[1][0],P=A[1][1],D=0,O=0,M=x&&S&&a&&e.event.shiftKey,L=e.event.touches?(b=e.event.changedTouches[0].identifier,function(t){return ot(t,e.event.touches,b)}):rt,R=L(y),N=R,F=d(y,arguments,!0).beforestart();"overlay"===w?(C&&(m=!0),T.selection=C=[[i=t===Xr?E:R[0],s=t===Kr?k:R[1]],[c=t===Xr?I:i,p=t===Kr?P:s]]):(i=C[0][0],s=C[0][1],c=C[1][0],p=C[1][1]),o=i,l=s,h=c,f=p;var U=Je(y).attr("pointer-events","none"),V=U.selectAll(".overlay").attr("cursor",Jr[w]);if(e.event.touches)F.moved=$,F.ended=G;else{var B=Je(e.event.view).on("mousemove.brush",$,!0).on("mouseup.brush",G,!0);a&&B.on("keydown.brush",function(){switch(e.event.keyCode){case 16:M=x&&S;break;case 18:_===zr&&(x&&(c=h-D*x,i=o+D*x),S&&(p=f-O*S,s=l+O*S),_=qr,H());break;case 32:_!==zr&&_!==qr||(x<0?c=h-D:x>0&&(i=o-D),S<0?p=f-O:S>0&&(s=l-O),_=jr,V.attr("cursor",Jr.selection),H());break;default:return}Hr()},!0).on("keyup.brush",function(){switch(e.event.keyCode){case 16:M&&(g=v=M=!1,H());break;case 18:_===qr&&(x<0?c=h:x>0&&(i=o),S<0?p=f:S>0&&(s=l),_=zr,H());break;case 32:_===jr&&(e.event.altKey?(x&&(c=h-D*x,i=o+D*x),S&&(p=f-O*S,s=l+O*S),_=qr):(x<0?c=h:x>0&&(i=o),S<0?p=f:S>0&&(s=l),_=zr),V.attr("cursor",Jr[w]),H());break;default:return}Hr()},!0),lt(e.event.view)}$r(),Bi(y),u.call(y),F.start()}function $(){var e=L(y);!M||g||v||(Math.abs(e[0]-N[0])>Math.abs(e[1]-N[1])?v=!0:g=!0),N=e,m=!0,Hr(),H()}function H(){var e;switch(D=N[0]-R[0],O=N[1]-R[1],_){case jr:case Gr:x&&(D=Math.max(E-i,Math.min(I-c,D)),o=i+D,h=c+D),S&&(O=Math.max(k-s,Math.min(P-p,O)),l=s+O,f=p+O);break;case zr:x<0?(D=Math.max(E-i,Math.min(I-i,D)),o=i+D,h=c):x>0&&(D=Math.max(E-c,Math.min(I-c,D)),o=i,h=c+D),S<0?(O=Math.max(k-s,Math.min(P-s,O)),l=s+O,f=p):S>0&&(O=Math.max(k-p,Math.min(P-p,O)),l=s,f=p+O);break;case qr:x&&(o=Math.max(E,Math.min(I,i-D*x)),h=Math.max(E,Math.min(I,c+D*x))),S&&(l=Math.max(k,Math.min(P,s-O*S)),f=Math.max(k,Math.min(P,p+O*S)))}h<o&&(x*=-1,e=i,i=c,c=e,e=o,o=h,h=e,w in Qr&&V.attr("cursor",Jr[w=Qr[w]])),f<l&&(S*=-1,e=s,s=p,p=e,e=l,l=f,f=e,w in eo&&V.attr("cursor",Jr[w=eo[w]])),T.selection&&(C=T.selection),g&&(o=C[0][0],h=C[1][0]),v&&(l=C[0][1],f=C[1][1]),C[0][0]===o&&C[0][1]===l&&C[1][0]===h&&C[1][1]===f||(T.selection=[[o,l],[h,f]],u.call(y),F.brush())}function G(){if($r(),e.event.touches){if(e.event.touches.length)return;n&&clearTimeout(n),n=setTimeout(function(){n=null},500)}else ct(e.event.view,m),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);U.attr("pointer-events","all"),V.attr("cursor",Jr.overlay),T.selection&&(C=T.selection),function(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}(C)&&(T.selection=null,u.call(y)),F.end()}}function f(){d(this,arguments).moved()}function m(){d(this,arguments).ended()}function g(){var e=this.__brush||{selection:null};return e.extent=Wr(i.apply(this,arguments)),e.dim=t,e}return c.move=function(e,n){e.selection?e.on("start.brush",function(){d(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){d(this,arguments).end()}).tween("brush",function(){var e=this,i=e.__brush,r=d(e,arguments),o=i.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=zn(o,a);function l(t){i.selection=1===t&&null===a?null:s(t),u.call(e),r.brush()}return null!==o&&null!==a?l:l(1)}):e.each(function(){var e=this,i=arguments,r=e.__brush,o=t.input("function"==typeof n?n.apply(e,i):n,r.extent),a=d(e,i).beforestart();Bi(e),r.selection=null===o?null:o,u.call(e),a.start().brush().end()})},c.clear=function(e){c.move(e,null)},h.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){ze(new Br(c,e,t.output(this.state.selection)),s.apply,s,[e,this.that,this.args])}},c.extent=function(e){return arguments.length?(i="function"==typeof e?e:Vr(Wr(e)),c):i},c.filter=function(e){return arguments.length?(r="function"==typeof e?e:Vr(!!e),c):r},c.touchable=function(e){return arguments.length?(o="function"==typeof e?e:Vr(!!e),c):o},c.handleSize=function(e){return arguments.length?(l=+e,c):l},c.keyModifiers=function(e){return arguments.length?(a=!!e,c):a},c.on=function(){var e=s.on.apply(s,arguments);return e===s?c:e},c}var co=Math.cos,uo=Math.sin,ho=Math.PI,po=ho/2,fo=2*ho,mo=Math.max;var go=Array.prototype.slice;function vo(e){return function(){return e}}var bo=Math.PI,yo=2*bo,wo=1e-6,_o=yo-wo;function xo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function So(){return new xo}function To(e){return e.source}function Ao(e){return e.target}function Co(e){return e.radius}function Eo(e){return e.startAngle}function ko(e){return e.endAngle}xo.prototype=So.prototype={constructor:xo,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,s=n-e,l=i-t,c=o-e,u=a-t,d=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>wo)if(Math.abs(u*s-l*c)>wo&&r){var h=n-o,p=i-a,f=s*s+l*l,m=h*h+p*p,g=Math.sqrt(f),v=Math.sqrt(d),b=r*Math.tan((bo-Math.acos((f+d-m)/(2*g*v)))/2),y=b/v,w=b/g;Math.abs(y-1)>wo&&(this._+="L"+(e+y*c)+","+(t+y*u)),this._+="A"+r+","+r+",0,0,"+ +(u*h>c*p)+","+(this._x1=e+w*s)+","+(this._y1=t+w*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,i,r,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=e+a,c=t+s,u=1^o,d=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>wo||Math.abs(this._y1-c)>wo)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%yo+yo),d>_o?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>wo&&(this._+="A"+n+","+n+",0,"+ +(d>=bo)+","+u+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Io="$";function Po(){}function Do(e,t){var n=new Po;if(e instanceof Po)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var i,r=-1,o=e.length;if(null==t)for(;++r<o;)n.set(r,e[r]);else for(;++r<o;)n.set(t(i=e[r],r,e),i)}else if(e)for(var a in e)n.set(a,e[a]);return n}function Oo(){return{}}function Mo(e,t,n){e[t]=n}function Lo(){return Do()}function Ro(e,t,n){e.set(t,n)}function No(){}Po.prototype=Do.prototype={constructor:Po,has:function(e){return Io+e in this},get:function(e){return this[Io+e]},set:function(e,t){return this[Io+e]=t,this},remove:function(e){var t=Io+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Io&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Io&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Io&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Io&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Io&&++e;return e},empty:function(){for(var e in this)if(e[0]===Io)return!1;return!0},each:function(e){for(var t in this)t[0]===Io&&e(this[t],t.slice(1),this)}};var Fo=Do.prototype;function Uo(e,t){var n=new No;if(e instanceof No)e.each(function(e){n.add(e)});else if(e){var i=-1,r=e.length;if(null==t)for(;++i<r;)n.add(e[i]);else for(;++i<r;)n.add(t(e[i],i,e))}return n}No.prototype=Uo.prototype={constructor:No,has:Fo.has,add:function(e){return this[Io+(e+="")]=e,this},remove:Fo.remove,clear:Fo.clear,values:Fo.keys,size:Fo.size,empty:Fo.empty,each:Fo.each};var Vo=Array.prototype.slice;function Bo(e,t){return e-t}function $o(e){return function(){return e}}function Ho(e,t){for(var n,i=-1,r=t.length;++i<r;)if(n=Go(e,t[i]))return n;return 0}function Go(e,t){for(var n=t[0],i=t[1],r=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],c=l[0],u=l[1],d=e[s],h=d[0],p=d[1];if(jo(l,d,t))return 0;u>i!=p>i&&n<(h-c)*(i-u)/(p-u)+c&&(r=-r)}return r}function jo(e,t,n){var i,r,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(r=e[i=+(e[0]===t[0])],o=n[i],a=t[i],r<=o&&o<=a||a<=o&&o<=r)}function zo(){}var qo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Yo(){var e=1,t=1,n=S,i=s;function r(e){var t=n(e);if(Array.isArray(t))t=t.slice().sort(Bo);else{var i=u(e),r=i[0],a=i[1];t=x(r,a,t),t=g(Math.floor(r/t)*t,Math.floor(a/t)*t,t)}return t.map(function(t){return o(e,t)})}function o(n,r){var o=[],s=[];return function(n,i,r){var o,s,l,c,u,d,h=new Array,p=new Array;o=s=-1,c=n[0]>=i,qo[c<<1].forEach(f);for(;++o<e-1;)l=c,c=n[o+1]>=i,qo[l|c<<1].forEach(f);qo[c|0].forEach(f);for(;++s<t-1;){for(o=-1,c=n[s*e+e]>=i,u=n[s*e]>=i,qo[c<<1|u<<2].forEach(f);++o<e-1;)l=c,c=n[s*e+e+o+1]>=i,d=u,u=n[s*e+o+1]>=i,qo[l|c<<1|u<<2|d<<3].forEach(f);qo[c|u<<3].forEach(f)}o=-1,u=n[s*e]>=i,qo[u<<2].forEach(f);for(;++o<e-1;)d=u,u=n[s*e+o+1]>=i,qo[u<<2|d<<3].forEach(f);function f(e){var t,n,i=[e[0][0]+o,e[0][1]+s],l=[e[1][0]+o,e[1][1]+s],c=a(i),u=a(l);(t=p[c])?(n=h[u])?(delete p[t.end],delete h[n.start],t===n?(t.ring.push(l),r(t.ring)):h[t.start]=p[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete p[t.end],t.ring.push(l),p[t.end=u]=t):(t=h[u])?(n=p[c])?(delete h[t.start],delete p[n.end],t===n?(t.ring.push(l),r(t.ring)):h[n.start]=p[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(i),h[t.start=c]=t):h[c]=p[u]={start:c,end:u,ring:[i,l]}}qo[u<<3].forEach(f)}(n,r,function(e){i(e,n,r),function(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(e)>0?o.push([e]):s.push(e)}),s.forEach(function(e){for(var t,n=0,i=o.length;n<i;++n)if(-1!==Ho((t=o[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:r,coordinates:o}}function a(t){return 2*t[0]+t[1]*(e+1)*4}function s(n,i,r){n.forEach(function(n){var o,a=n[0],s=n[1],l=0|a,c=0|s,u=i[c*e+l];a>0&&a<e&&l===a&&(o=i[c*e+l-1],n[0]=a+(r-o)/(u-o)-.5),s>0&&s<t&&c===s&&(o=i[(c-1)*e+l],n[1]=s+(r-o)/(u-o)-.5)})}return r.contour=o,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.ceil(n[0]),o=Math.ceil(n[1]);if(!(i>0&&o>0))throw new Error("invalid size");return e=i,t=o,r},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?$o(Vo.call(e)):$o(e),r):n},r.smooth=function(e){return arguments.length?(i=e?s:zo,r):i===s},r}function Wo(e,t,n){for(var i=e.width,r=e.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=e.data[s+a*i]),s>=n&&(s>=o&&(l-=e.data[s-o+a*i]),t.data[s-n+a*i]=l/Math.min(s+1,i-1+o-s,o))}function Ko(e,t,n){for(var i=e.width,r=e.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=e.data[a+s*i]),s>=n&&(s>=o&&(l-=e.data[a+(s-o)*i]),t.data[a+(s-n)*i]=l/Math.min(s+1,r-1+o-s,o))}function Xo(e){return e[0]}function Zo(e){return e[1]}function Jo(){return 1}var Qo={},ea={};function ta(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function na(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var i in e)i in t||n.push(t[i]=i)}),n}function ia(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function ra(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+ia(-e,6):e>9999?"+"+ia(e,6):ia(e,4)}(e.getUTCFullYear())+"-"+ia(e.getUTCMonth()+1,2)+"-"+ia(e.getUTCDate(),2)+(r?"T"+ia(t,2)+":"+ia(n,2)+":"+ia(i,2)+"."+ia(r,3)+"Z":i?"T"+ia(t,2)+":"+ia(n,2)+":"+ia(i,2)+"Z":n||t?"T"+ia(t,2)+":"+ia(n,2)+"Z":"")}function oa(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,r=[],o=e.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return ea;if(c)return c=!1,Qo;var t,i,r=a;if(34===e.charCodeAt(r)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(i=e.charCodeAt(a++))?c=!0:13===i&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(r+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(i=e.charCodeAt(t=a++)))c=!0;else if(13===i)c=!0,10===e.charCodeAt(a)&&++a;else if(i!==n)continue;return e.slice(r,t)}return l=!0,e.slice(r,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(i=u())!==ea;){for(var d=[];i!==Qo&&i!==ea;)d.push(i),i=u();t&&null==(d=t(d,s++))||r.push(d)}return r}function r(t,n){return t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?ra(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,o=i(e,function(e,i){if(n)return n(e,i-1);r=e,n=t?function(e,t){var n=ta(e);return function(i,r){return t(n(i),r,e)}}(e,t):ta(e)});return o.columns=r||[],o},parseRows:i,format:function(t,n){return null==n&&(n=na(t)),[n.map(a).join(e)].concat(r(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=na(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}var aa=oa(","),sa=aa.parse,la=aa.parseRows,ca=aa.format,ua=aa.formatBody,da=aa.formatRows,ha=aa.formatRow,pa=aa.formatValue,fa=oa("\t"),ma=fa.parse,ga=fa.parseRows,va=fa.format,ba=fa.formatBody,ya=fa.formatRows,wa=fa.formatRow,_a=fa.formatValue;var xa=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Sa(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function Ta(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function Aa(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Ca(e,t){return fetch(e,t).then(Aa)}function Ea(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=void 0),Ca(t,n).then(function(t){return e(t,i)})}}var ka=Ea(sa),Ia=Ea(ma);function Pa(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.json()}function Da(e){return function(t,n){return Ca(t,n).then(function(t){return(new DOMParser).parseFromString(t,e)})}}var Oa=Da("application/xml"),Ma=Da("text/html"),La=Da("image/svg+xml");function Ra(e){return function(){return e}}function Na(){return 1e-6*(Math.random()-.5)}function Fa(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,o,a,s,l,c,u,d,h,p=e._root,f={data:i},m=e._x0,g=e._y0,v=e._x1,b=e._y1;if(!p)return e._root=f,e;for(;p.length;)if((c=t>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+b)/2))?g=a:b=a,r=p,!(p=p[d=u<<1|c]))return r[d]=f,e;if(s=+e._x.call(null,p.data),l=+e._y.call(null,p.data),t===s&&n===l)return f.next=p,r?r[d]=f:e._root=f,e;do{r=r?r[d]=new Array(4):e._root=new Array(4),(c=t>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+b)/2))?g=a:b=a}while((d=u<<1|c)==(h=(l>=a)<<1|s>=o));return r[h]=p,r[d]=f,e}function Ua(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Va(e){return e[0]}function Ba(e){return e[1]}function $a(e,t,n){var i=new Ha(null==t?Va:t,null==n?Ba:n,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function Ha(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Ga(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ja=$a.prototype=Ha.prototype;function za(e){return e.x+e.vx}function qa(e){return e.y+e.vy}function Ya(e){return e.index}function Wa(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Ka(e){return e.x}function Xa(e){return e.y}ja.copy=function(){var e,t,n=new Ha(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Ga(i),n;for(e=[{source:i,target:n._root=new Array(4)}];i=e.pop();)for(var r=0;r<4;++r)(t=i.source[r])&&(t.length?e.push({source:t,target:i.target[r]=new Array(4)}):i.target[r]=Ga(t));return n},ja.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Fa(this.cover(t,n),t,n,e)},ja.addAll=function(e){var t,n,i,r,o=e.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(r=+this._y.call(null,t))||(a[n]=i,s[n]=r,i<l&&(l=i),i>u&&(u=i),r<c&&(c=r),r>d&&(d=r));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),n=0;n<o;++n)Fa(this,a[n],s[n],e[n]);return this},ja.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var a,s,l=r-n,c=this._root;n>e||e>=r||i>t||t>=o;)switch(s=(t<i)<<1|e<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:r=n+l,o=i+l;break;case 1:n=r-l,o=i+l;break;case 2:r=n+l,i=o-l;break;case 3:n=r-l,i=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},ja.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},ja.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ja.find=function(e,t,n){var i,r,o,a,s,l,c,u=this._x0,d=this._y0,h=this._x1,p=this._y1,f=[],m=this._root;for(m&&f.push(new Ua(m,u,d,h,p)),null==n?n=1/0:(u=e-n,d=t-n,h=e+n,p=t+n,n*=n);l=f.pop();)if(!(!(m=l.node)||(r=l.x0)>h||(o=l.y0)>p||(a=l.x1)<u||(s=l.y1)<d))if(m.length){var g=(r+a)/2,v=(o+s)/2;f.push(new Ua(m[3],g,v,a,s),new Ua(m[2],r,v,g,s),new Ua(m[1],g,o,a,v),new Ua(m[0],r,o,g,v)),(c=(t>=v)<<1|e>=g)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var b=e-+this._x.call(null,m.data),y=t-+this._y.call(null,m.data),w=b*b+y*y;if(w<n){var _=Math.sqrt(n=w);u=e-_,d=t-_,h=e+_,p=t+_,i=m.data}}return i},ja.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,i,r,o,a,s,l,c,u,d,h,p=this._root,f=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(s=(f+g)/2))?f=s:g=s,(u=a>=(l=(m+v)/2))?m=l:v=l,t=p,!(p=p[d=u<<1|c]))return this;if(!p.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,h=d)}for(;p.data!==e;)if(i=p,!(p=p.next))return this;return(r=p.next)&&delete p.next,i?(r?i.next=r:delete i.next,this):t?(r?t[d]=r:delete t[d],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=r,this)},ja.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},ja.root=function(){return this._root},ja.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},ja.visit=function(e){var t,n,i,r,o,a,s=[],l=this._root;for(l&&s.push(new Ua(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,i=t.x0,r=t.y0,o=t.x1,a=t.y1)&&l.length){var c=(i+o)/2,u=(r+a)/2;(n=l[3])&&s.push(new Ua(n,c,u,o,a)),(n=l[2])&&s.push(new Ua(n,i,u,c,a)),(n=l[1])&&s.push(new Ua(n,c,r,o,u)),(n=l[0])&&s.push(new Ua(n,i,r,c,u))}return this},ja.visitAfter=function(e){var t,n=[],i=[];for(this._root&&n.push(new Ua(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var r=t.node;if(r.length){var o,a=t.x0,s=t.y0,l=t.x1,c=t.y1,u=(a+l)/2,d=(s+c)/2;(o=r[0])&&n.push(new Ua(o,a,s,u,d)),(o=r[1])&&n.push(new Ua(o,u,s,l,d)),(o=r[2])&&n.push(new Ua(o,a,d,u,c)),(o=r[3])&&n.push(new Ua(o,u,d,l,c))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},ja.x=function(e){return arguments.length?(this._x=e,this):this._x},ja.y=function(e){return arguments.length?(this._y=e,this):this._y};var Za=Math.PI*(3-Math.sqrt(5));function Ja(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Qa(e){return(e=Ja(Math.abs(e)))?e[1]:NaN}var es,ts=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ns(e){if(!(t=ts.exec(e)))throw new Error("invalid format: "+e);var t;return new is({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function is(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function rs(e,t){var n=Ja(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}ns.prototype=is.prototype,is.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var os={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return rs(100*e,t)},r:rs,s:function(e,t){var n=Ja(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(es=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ja(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function as(e){return e}var ss,ls=Array.prototype.map,cs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function us(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?as:(t=ls.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,o=[],a=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(e.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?as:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(ls.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=ns(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,v=e.trim,b=e.type;"n"===b?(m=!0,b="g"):os[b]||(void 0===g&&(g=12),v=!0,b="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var y="$"===h?r:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===h?o:/[%p]/.test(b)?l:"",_=os[b],x=/[defgprs%]/.test(b);function S(e){var r,o,l,h=y,S=w;if("c"===b)S=_(e)+S,e="";else{var T=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:_(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),T&&0===+e&&"+"!==d&&(T=!1),h=(T?"("===d?d:c:"-"===d||"("===d?"":d)+h,S=("s"===b?cs[8+es/3]:"")+S+(T&&"("===d?")":""),x)for(r=-1,o=e.length;++r<o;)if(48>(l=e.charCodeAt(r))||l>57){S=(46===l?a+e.slice(r+1):e.slice(r))+S,e=e.slice(0,r);break}}m&&!p&&(e=i(e,1/0));var A=h.length+e.length+S.length,C=A<f?new Array(f-A+1).join(t):"";switch(m&&p&&(e=i(C+e,C.length?f-S.length:1/0),C=""),n){case"<":e=h+e+S+C;break;case"=":e=h+C+e+S;break;case"^":e=C.slice(0,A=C.length>>1)+h+e+S+C.slice(A);break;default:e=C+h+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=ns(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Qa(t)/3))),r=Math.pow(10,-i),o=cs[8+i/3];return function(e){return n(r*e)+o}}}}function ds(t){return ss=us(t),e.format=ss.format,e.formatPrefix=ss.formatPrefix,ss}function hs(e){return Math.max(0,-Qa(Math.abs(e)))}function ps(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qa(t)/3)))-Qa(Math.abs(e)))}function fs(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qa(t)-Qa(e))+1}function ms(){return new gs}function gs(){this.reset()}ds({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),gs.prototype={constructor:gs,reset:function(){this.s=this.t=0},add:function(e){bs(vs,e,this.t),bs(this,vs.s,this.s),this.s?this.t+=vs.t:this.s=vs.t},valueOf:function(){return this.s}};var vs=new gs;function bs(e,t,n){var i=e.s=t+n,r=i-t,o=i-r;e.t=t-o+(n-r)}var ys=1e-6,ws=1e-12,_s=Math.PI,xs=_s/2,Ss=_s/4,Ts=2*_s,As=180/_s,Cs=_s/180,Es=Math.abs,ks=Math.atan,Is=Math.atan2,Ps=Math.cos,Ds=Math.ceil,Os=Math.exp,Ms=Math.log,Ls=Math.pow,Rs=Math.sin,Ns=Math.sign||function(e){return e>0?1:e<0?-1:0},Fs=Math.sqrt,Us=Math.tan;function Vs(e){return e>1?0:e<-1?_s:Math.acos(e)}function Bs(e){return e>1?xs:e<-1?-xs:Math.asin(e)}function $s(e){return(e=Rs(e/2))*e}function Hs(){}function Gs(e,t){e&&zs.hasOwnProperty(e.type)&&zs[e.type](e,t)}var js={Feature:function(e,t){Gs(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Gs(n[i].geometry,t)}},zs={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){qs(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)qs(n[i],t,0)},Polygon:function(e,t){Ys(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Ys(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Gs(n[i],t)}};function qs(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function Ys(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)qs(e[n],t,1);t.polygonEnd()}function Ws(e,t){e&&js.hasOwnProperty(e.type)?js[e.type](e,t):Gs(e,t)}var Ks,Xs,Zs,Js,Qs,el=ms(),tl=ms(),nl={point:Hs,lineStart:Hs,lineEnd:Hs,polygonStart:function(){el.reset(),nl.lineStart=il,nl.lineEnd=rl},polygonEnd:function(){var e=+el;tl.add(e<0?Ts+e:e),this.lineStart=this.lineEnd=this.point=Hs},sphere:function(){tl.add(Ts)}};function il(){nl.point=ol}function rl(){al(Ks,Xs)}function ol(e,t){nl.point=al,Ks=e,Xs=t,Zs=e*=Cs,Js=Ps(t=(t*=Cs)/2+Ss),Qs=Rs(t)}function al(e,t){var n=(e*=Cs)-Zs,i=n>=0?1:-1,r=i*n,o=Ps(t=(t*=Cs)/2+Ss),a=Rs(t),s=Qs*a,l=Js*o+s*Ps(r),c=s*i*Rs(r);el.add(Is(c,l)),Zs=e,Js=o,Qs=a}function sl(e){return[Is(e[1],e[0]),Bs(e[2])]}function ll(e){var t=e[0],n=e[1],i=Ps(n);return[i*Ps(t),i*Rs(t),Rs(n)]}function cl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ul(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function dl(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function hl(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function pl(e){var t=Fs(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var fl,ml,gl,vl,bl,yl,wl,_l,xl,Sl,Tl,Al,Cl,El,kl,Il,Pl,Dl,Ol,Ml,Ll,Rl,Nl,Fl,Ul,Vl,Bl=ms(),$l={point:Hl,lineStart:jl,lineEnd:zl,polygonStart:function(){$l.point=ql,$l.lineStart=Yl,$l.lineEnd=Wl,Bl.reset(),nl.polygonStart()},polygonEnd:function(){nl.polygonEnd(),$l.point=Hl,$l.lineStart=jl,$l.lineEnd=zl,el<0?(fl=-(gl=180),ml=-(vl=90)):Bl>ys?vl=90:Bl<-1e-6&&(ml=-90),Sl[0]=fl,Sl[1]=gl},sphere:function(){fl=-(gl=180),ml=-(vl=90)}};function Hl(e,t){xl.push(Sl=[fl=e,gl=e]),t<ml&&(ml=t),t>vl&&(vl=t)}function Gl(e,t){var n=ll([e*Cs,t*Cs]);if(_l){var i=ul(_l,n),r=ul([i[1],-i[0],0],i);pl(r),r=sl(r);var o,a=e-bl,s=a>0?1:-1,l=r[0]*As*s,c=Es(a)>180;c^(s*bl<l&&l<s*e)?(o=r[1]*As)>vl&&(vl=o):c^(s*bl<(l=(l+360)%360-180)&&l<s*e)?(o=-r[1]*As)<ml&&(ml=o):(t<ml&&(ml=t),t>vl&&(vl=t)),c?e<bl?Kl(fl,e)>Kl(fl,gl)&&(gl=e):Kl(e,gl)>Kl(fl,gl)&&(fl=e):gl>=fl?(e<fl&&(fl=e),e>gl&&(gl=e)):e>bl?Kl(fl,e)>Kl(fl,gl)&&(gl=e):Kl(e,gl)>Kl(fl,gl)&&(fl=e)}else xl.push(Sl=[fl=e,gl=e]);t<ml&&(ml=t),t>vl&&(vl=t),_l=n,bl=e}function jl(){$l.point=Gl}function zl(){Sl[0]=fl,Sl[1]=gl,$l.point=Hl,_l=null}function ql(e,t){if(_l){var n=e-bl;Bl.add(Es(n)>180?n+(n>0?360:-360):n)}else yl=e,wl=t;nl.point(e,t),Gl(e,t)}function Yl(){nl.lineStart()}function Wl(){ql(yl,wl),nl.lineEnd(),Es(Bl)>ys&&(fl=-(gl=180)),Sl[0]=fl,Sl[1]=gl,_l=null}function Kl(e,t){return(t-=e)<0?t+360:t}function Xl(e,t){return e[0]-t[0]}function Zl(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var Jl={sphere:Hs,point:Ql,lineStart:tc,lineEnd:rc,polygonStart:function(){Jl.lineStart=oc,Jl.lineEnd=ac},polygonEnd:function(){Jl.lineStart=tc,Jl.lineEnd=rc}};function Ql(e,t){e*=Cs;var n=Ps(t*=Cs);ec(n*Ps(e),n*Rs(e),Rs(t))}function ec(e,t,n){++Tl,Cl+=(e-Cl)/Tl,El+=(t-El)/Tl,kl+=(n-kl)/Tl}function tc(){Jl.point=nc}function nc(e,t){e*=Cs;var n=Ps(t*=Cs);Fl=n*Ps(e),Ul=n*Rs(e),Vl=Rs(t),Jl.point=ic,ec(Fl,Ul,Vl)}function ic(e,t){e*=Cs;var n=Ps(t*=Cs),i=n*Ps(e),r=n*Rs(e),o=Rs(t),a=Is(Fs((a=Ul*o-Vl*r)*a+(a=Vl*i-Fl*o)*a+(a=Fl*r-Ul*i)*a),Fl*i+Ul*r+Vl*o);Al+=a,Il+=a*(Fl+(Fl=i)),Pl+=a*(Ul+(Ul=r)),Dl+=a*(Vl+(Vl=o)),ec(Fl,Ul,Vl)}function rc(){Jl.point=Ql}function oc(){Jl.point=sc}function ac(){lc(Rl,Nl),Jl.point=Ql}function sc(e,t){Rl=e,Nl=t,e*=Cs,t*=Cs,Jl.point=lc;var n=Ps(t);Fl=n*Ps(e),Ul=n*Rs(e),Vl=Rs(t),ec(Fl,Ul,Vl)}function lc(e,t){e*=Cs;var n=Ps(t*=Cs),i=n*Ps(e),r=n*Rs(e),o=Rs(t),a=Ul*o-Vl*r,s=Vl*i-Fl*o,l=Fl*r-Ul*i,c=Fs(a*a+s*s+l*l),u=Bs(c),d=c&&-u/c;Ol+=d*a,Ml+=d*s,Ll+=d*l,Al+=u,Il+=u*(Fl+(Fl=i)),Pl+=u*(Ul+(Ul=r)),Dl+=u*(Vl+(Vl=o)),ec(Fl,Ul,Vl)}function cc(e){return function(){return e}}function uc(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function dc(e,t){return[Es(e)>_s?e+Math.round(-e/Ts)*Ts:e,t]}function hc(e,t,n){return(e%=Ts)?t||n?uc(fc(e),mc(t,n)):fc(e):t||n?mc(t,n):dc}function pc(e){return function(t,n){return[(t+=e)>_s?t-Ts:t<-_s?t+Ts:t,n]}}function fc(e){var t=pc(e);return t.invert=pc(-e),t}function mc(e,t){var n=Ps(e),i=Rs(e),r=Ps(t),o=Rs(t);function a(e,t){var a=Ps(t),s=Ps(e)*a,l=Rs(e)*a,c=Rs(t),u=c*n+s*i;return[Is(l*r-u*o,s*n-c*i),Bs(u*r+l*o)]}return a.invert=function(e,t){var a=Ps(t),s=Ps(e)*a,l=Rs(e)*a,c=Rs(t),u=c*r-l*o;return[Is(l*r+c*o,s*n+u*i),Bs(u*n-s*i)]},a}function gc(e){function t(t){return(t=e(t[0]*Cs,t[1]*Cs))[0]*=As,t[1]*=As,t}return e=hc(e[0]*Cs,e[1]*Cs,e.length>2?e[2]*Cs:0),t.invert=function(t){return(t=e.invert(t[0]*Cs,t[1]*Cs))[0]*=As,t[1]*=As,t},t}function vc(e,t,n,i,r,o){if(n){var a=Ps(t),s=Rs(t),l=i*n;null==r?(r=t+i*Ts,o=t-l/2):(r=bc(a,r),o=bc(a,o),(i>0?r<o:r>o)&&(r+=i*Ts));for(var c,u=r;i>0?u>o:u<o;u-=l)c=sl([a,-s*Ps(u),-s*Rs(u)]),e.point(c[0],c[1])}}function bc(e,t){(t=ll(t))[0]-=e,pl(t);var n=Vs(-t[1]);return((-t[2]<0?-n:n)+Ts-ys)%Ts}function yc(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:Hs,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function wc(e,t){return Es(e[0]-t[0])<ys&&Es(e[1]-t[1])<ys}function _c(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function xc(e,t,n,i,r){var o,a,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(wc(i,a)){for(r.lineStart(),o=0;o<t;++o)r.point((i=e[o])[0],i[1]);r.lineEnd()}else s.push(n=new _c(i,e,null,!0)),l.push(n.o=new _c(i,null,n,!1)),s.push(n=new _c(a,e,null,!1)),l.push(n.o=new _c(a,null,n,!0))}}),s.length){for(l.sort(t),Sc(s),Sc(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,d=s[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)r.point((u=c[o])[0],u[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else i(h.x,h.p.x,-1,r);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);r.lineEnd()}}}function Sc(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}dc.invert=dc;var Tc=ms();function Ac(e){return Es(e[0])<=_s?e[0]:Ns(e[0])*((Es(e[0])+_s)%Ts-_s)}function Cc(e,t){var n=Ac(t),i=t[1],r=Rs(i),o=[Rs(n),-Ps(n),0],a=0,s=0;Tc.reset(),1===r?i=xs+ys:-1===r&&(i=-xs-ys);for(var l=0,c=e.length;l<c;++l)if(d=(u=e[l]).length)for(var u,d,h=u[d-1],p=Ac(h),f=h[1]/2+Ss,m=Rs(f),g=Ps(f),v=0;v<d;++v,p=y,m=_,g=x,h=b){var b=u[v],y=Ac(b),w=b[1]/2+Ss,_=Rs(w),x=Ps(w),S=y-p,T=S>=0?1:-1,A=T*S,C=A>_s,E=m*_;if(Tc.add(Is(E*T*Rs(A),g*x+E*Ps(A))),a+=C?S+T*Ts:S,C^p>=n^y>=n){var k=ul(ll(h),ll(b));pl(k);var I=ul(o,k);pl(I);var P=(C^S>=0?-1:1)*Bs(I[2]);(i>P||i===P&&(k[0]||k[1]))&&(s+=C^S>=0?1:-1)}}return(a<-1e-6||a<ys&&Tc<-1e-6)^1&s}function Ec(e,t,n,i){return function(r){var o,a,s,l=t(r),c=yc(),u=t(c),d=!1,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=b,h.lineEnd=y,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,a=C(a);var e=Cc(o,i);a.length?(d||(r.polygonStart(),d=!0),xc(a,Ic,e,n,r)):e&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(t,n){e(t,n)&&r.point(t,n)}function f(e,t){l.point(e,t)}function m(){h.point=f,l.lineStart()}function g(){h.point=p,l.lineEnd()}function v(e,t){s.push([e,t]),u.point(e,t)}function b(){u.lineStart(),s=[]}function y(){v(s[0][0],s[0][1]),u.lineEnd();var e,t,n,i,l=u.clean(),h=c.result(),p=h.length;if(s.pop(),o.push(s),s=null,p)if(1&l){if((t=(n=h[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),e=0;e<t;++e)r.point((i=n[e])[0],i[1]);r.lineEnd()}}else p>1&&2&l&&h.push(h.pop().concat(h.shift())),a.push(h.filter(kc))}return h}}function kc(e){return e.length>1}function Ic(e,t){return((e=e.x)[0]<0?e[1]-xs-ys:xs-e[1])-((t=t.x)[0]<0?t[1]-xs-ys:xs-t[1])}var Pc=Ec(function(){return!0},function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?_s:-_s,l=Es(o-n);Es(l-_s)<ys?(e.point(n,i=(i+a)/2>0?xs:-xs),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(o,i),t=0):r!==s&&l>=_s&&(Es(n-r)<ys&&(n-=r*ys),Es(o-s)<ys&&(o-=s*ys),i=function(e,t,n,i){var r,o,a=Rs(e-n);return Es(a)>ys?ks((Rs(t)*(o=Ps(i))*Rs(n)-Rs(i)*(r=Ps(t))*Rs(e))/(r*o*a)):(t+i)/2}(n,i,o,a),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=o,i=a),r=s},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*xs,i.point(-_s,r),i.point(0,r),i.point(_s,r),i.point(_s,0),i.point(_s,-r),i.point(0,-r),i.point(-_s,-r),i.point(-_s,0),i.point(-_s,r);else if(Es(e[0]-t[0])>ys){var o=e[0]<t[0]?_s:-_s;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-_s,-xs]);function Dc(e){var t=Ps(e),n=6*Cs,i=t>0,r=Es(t)>ys;function o(e,n){return Ps(e)*Ps(n)>t}function a(e,n,i){var r=[1,0,0],o=ul(ll(e),ll(n)),a=cl(o,o),s=o[0],l=a-s*s;if(!l)return!i&&e;var c=t*a/l,u=-t*s/l,d=ul(r,o),h=hl(r,c);dl(h,hl(o,u));var p=d,f=cl(h,p),m=cl(p,p),g=f*f-m*(cl(h,h)-1);if(!(g<0)){var v=Fs(g),b=hl(p,(-f-v)/m);if(dl(b,h),b=sl(b),!i)return b;var y,w=e[0],_=n[0],x=e[1],S=n[1];_<w&&(y=w,w=_,_=y);var T=_-w,A=Es(T-_s)<ys;if(!A&&S<x&&(y=x,x=S,S=y),A||T<ys?A?x+S>0^b[1]<(Es(b[0]-w)<ys?x:S):x<=b[1]&&b[1]<=S:T>_s^(w<=b[0]&&b[0]<=_)){var C=hl(p,(-f+v)/m);return dl(C,h),[b,sl(C)]}}}function s(t,n){var r=i?e:_s-e,o=0;return t<-r?o|=1:t>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return Ec(o,function(e){var t,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,h){var p,f=[d,h],m=o(d,h),g=i?m?0:s(d,h):m?s(d+(d<0?_s:-_s),h):0;if(!t&&(c=l=m)&&e.lineStart(),m!==l&&(!(p=a(t,f))||wc(t,p)||wc(f,p))&&(f[0]+=ys,f[1]+=ys,m=o(f[0],f[1])),m!==l)u=0,m?(e.lineStart(),p=a(f,t),e.point(p[0],p[1])):(p=a(t,f),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(r&&t&&i^m){var v;g&n||!(v=a(f,t,!0))||(u=0,i?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!m||t&&wc(t,f)||e.point(f[0],f[1]),t=f,l=m,n=g},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}},function(t,i,r,o){vc(o,e,n,r,t,i)},i?[0,-e]:[-_s,e-_s])}var Oc=1e9,Mc=-Oc;function Lc(e,t,n,i){function r(r,o){return e<=r&&r<=n&&t<=o&&o<=i}function o(r,o,s,c){var u=0,d=0;if(null==r||(u=a(r,s))!==(d=a(o,s))||l(r,o)<0^s>0)do{c.point(0===u||3===u?e:n,u>1?i:t)}while((u=(u+s+4)%4)!==d);else c.point(o[0],o[1])}function a(i,r){return Es(i[0]-e)<ys?r>0?0:3:Es(i[0]-n)<ys?r>0?2:1:Es(i[1]-t)<ys?r>0?1:0:r>0?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,c,u,d,h,p,f,m,g,v,b,y=a,w=yc(),_={point:x,lineStart:function(){_.point=S,c&&c.push(u=[]);v=!0,g=!1,f=m=NaN},lineEnd:function(){l&&(S(d,h),p&&g&&w.rejoin(),l.push(w.result()));_.point=x,g&&y.lineEnd()},polygonStart:function(){y=w,l=[],c=[],b=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var o,a,s=c[n],l=1,u=s.length,d=s[0],h=d[0],p=d[1];l<u;++l)o=h,a=p,h=(d=s[l])[0],p=d[1],a<=i?p>i&&(h-o)*(i-a)>(p-a)*(e-o)&&++t:p<=i&&(h-o)*(i-a)<(p-a)*(e-o)&&--t;return t}(),n=b&&t,r=(l=C(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&xc(l,s,t,o,a),a.polygonEnd());y=a,l=c=u=null}};function x(e,t){r(e,t)&&y.point(e,t)}function S(o,a){var s=r(o,a);if(c&&u.push([o,a]),v)d=o,h=a,p=s,v=!1,s&&(y.lineStart(),y.point(o,a));else if(s&&g)y.point(o,a);else{var l=[f=Math.max(Mc,Math.min(Oc,f)),m=Math.max(Mc,Math.min(Oc,m))],w=[o=Math.max(Mc,Math.min(Oc,o)),a=Math.max(Mc,Math.min(Oc,a))];!function(e,t,n,i,r,o){var a,s=e[0],l=e[1],c=0,u=1,d=t[0]-s,h=t[1]-l;if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>c&&(c=a)}if(a=r-s,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<u&&(u=a)}if(a=i-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}return c>0&&(e[0]=s+c*d,e[1]=l+c*h),u<1&&(t[0]=s+u*d,t[1]=l+u*h),!0}}}}}(l,w,e,t,n,i)?s&&(y.lineStart(),y.point(o,a),b=!1):(g||(y.lineStart(),y.point(l[0],l[1])),y.point(w[0],w[1]),s||y.lineEnd(),b=!1)}f=o,m=a,g=s}return _}}var Rc,Nc,Fc,Uc=ms(),Vc={sphere:Hs,point:Hs,lineStart:function(){Vc.point=$c,Vc.lineEnd=Bc},lineEnd:Hs,polygonStart:Hs,polygonEnd:Hs};function Bc(){Vc.point=Vc.lineEnd=Hs}function $c(e,t){Rc=e*=Cs,Nc=Rs(t*=Cs),Fc=Ps(t),Vc.point=Hc}function Hc(e,t){e*=Cs;var n=Rs(t*=Cs),i=Ps(t),r=Es(e-Rc),o=Ps(r),a=i*Rs(r),s=Fc*n-Nc*i*o,l=Nc*n+Fc*i*o;Uc.add(Is(Fs(a*a+s*s),l)),Rc=e,Nc=n,Fc=i}function Gc(e){return Uc.reset(),Ws(e,Vc),+Uc}var jc=[null,null],zc={type:"LineString",coordinates:jc};function qc(e,t){return jc[0]=e,jc[1]=t,Gc(zc)}var Yc={Feature:function(e,t){return Kc(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)if(Kc(n[i].geometry,t))return!0;return!1}},Wc={Sphere:function(){return!0},Point:function(e,t){return Xc(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(Xc(n[i],t))return!0;return!1},LineString:function(e,t){return Zc(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(Zc(n[i],t))return!0;return!1},Polygon:function(e,t){return Jc(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(Jc(n[i],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)if(Kc(n[i],t))return!0;return!1}};function Kc(e,t){return!(!e||!Wc.hasOwnProperty(e.type))&&Wc[e.type](e,t)}function Xc(e,t){return 0===qc(e,t)}function Zc(e,t){for(var n,i,r,o=0,a=e.length;o<a;o++){if(0===(i=qc(e[o],t)))return!0;if(o>0&&(r=qc(e[o],e[o-1]))>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<ws*r)return!0;n=i}return!1}function Jc(e,t){return!!Cc(e.map(Qc),eu(t))}function Qc(e){return(e=e.map(eu)).pop(),e}function eu(e){return[e[0]*Cs,e[1]*Cs]}function tu(e,t,n){var i=g(e,t-ys,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function nu(e,t,n){var i=g(e,t-ys,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function iu(){var e,t,n,i,r,o,a,s,l,c,u,d,h=10,p=h,f=90,m=360,v=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return g(Ds(i/f)*f,n,f).map(u).concat(g(Ds(s/m)*m,a,m).map(d)).concat(g(Ds(t/h)*h,e,h).filter(function(e){return Es(e%f)>ys}).map(l)).concat(g(Ds(o/p)*p,r,p).filter(function(e){return Es(e%m)>ys}).map(c))}return b.lines=function(){return y().map(function(e){return{type:"LineString",coordinates:e}})},b.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(d(a).slice(1),u(n).reverse().slice(1),d(s).reverse().slice(1))]}},b.extent=function(e){return arguments.length?b.extentMajor(e).extentMinor(e):b.extentMinor()},b.extentMajor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),s>a&&(e=s,s=a,a=e),b.precision(v)):[[i,s],[n,a]]},b.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],r=+n[1][1],t>e&&(n=t,t=e,e=n),o>r&&(n=o,o=r,r=n),b.precision(v)):[[t,o],[e,r]]},b.step=function(e){return arguments.length?b.stepMajor(e).stepMinor(e):b.stepMinor()},b.stepMajor=function(e){return arguments.length?(f=+e[0],m=+e[1],b):[f,m]},b.stepMinor=function(e){return arguments.length?(h=+e[0],p=+e[1],b):[h,p]},b.precision=function(h){return arguments.length?(v=+h,l=tu(o,r,90),c=nu(t,e,v),u=tu(s,a,90),d=nu(i,n,v),b):v},b.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function ru(e){return e}var ou,au,su,lu,cu=ms(),uu=ms(),du={point:Hs,lineStart:Hs,lineEnd:Hs,polygonStart:function(){du.lineStart=hu,du.lineEnd=mu},polygonEnd:function(){du.lineStart=du.lineEnd=du.point=Hs,cu.add(Es(uu)),uu.reset()},result:function(){var e=cu/2;return cu.reset(),e}};function hu(){du.point=pu}function pu(e,t){du.point=fu,ou=su=e,au=lu=t}function fu(e,t){uu.add(lu*e-su*t),su=e,lu=t}function mu(){fu(ou,au)}var gu=1/0,vu=gu,bu=-gu,yu=bu,wu={point:function(e,t){e<gu&&(gu=e);e>bu&&(bu=e);t<vu&&(vu=t);t>yu&&(yu=t)},lineStart:Hs,lineEnd:Hs,polygonStart:Hs,polygonEnd:Hs,result:function(){var e=[[gu,vu],[bu,yu]];return bu=yu=-(vu=gu=1/0),e}};var _u,xu,Su,Tu,Au=0,Cu=0,Eu=0,ku=0,Iu=0,Pu=0,Du=0,Ou=0,Mu=0,Lu={point:Ru,lineStart:Nu,lineEnd:Vu,polygonStart:function(){Lu.lineStart=Bu,Lu.lineEnd=$u},polygonEnd:function(){Lu.point=Ru,Lu.lineStart=Nu,Lu.lineEnd=Vu},result:function(){var e=Mu?[Du/Mu,Ou/Mu]:Pu?[ku/Pu,Iu/Pu]:Eu?[Au/Eu,Cu/Eu]:[NaN,NaN];return Au=Cu=Eu=ku=Iu=Pu=Du=Ou=Mu=0,e}};function Ru(e,t){Au+=e,Cu+=t,++Eu}function Nu(){Lu.point=Fu}function Fu(e,t){Lu.point=Uu,Ru(Su=e,Tu=t)}function Uu(e,t){var n=e-Su,i=t-Tu,r=Fs(n*n+i*i);ku+=r*(Su+e)/2,Iu+=r*(Tu+t)/2,Pu+=r,Ru(Su=e,Tu=t)}function Vu(){Lu.point=Ru}function Bu(){Lu.point=Hu}function $u(){Gu(_u,xu)}function Hu(e,t){Lu.point=Gu,Ru(_u=Su=e,xu=Tu=t)}function Gu(e,t){var n=e-Su,i=t-Tu,r=Fs(n*n+i*i);ku+=r*(Su+e)/2,Iu+=r*(Tu+t)/2,Pu+=r,Du+=(r=Tu*e-Su*t)*(Su+e),Ou+=r*(Tu+t),Mu+=3*r,Ru(Su=e,Tu=t)}function ju(e){this._context=e}ju.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ts)}},result:Hs};var zu,qu,Yu,Wu,Ku,Xu=ms(),Zu={point:Hs,lineStart:function(){Zu.point=Ju},lineEnd:function(){zu&&Qu(qu,Yu),Zu.point=Hs},polygonStart:function(){zu=!0},polygonEnd:function(){zu=null},result:function(){var e=+Xu;return Xu.reset(),e}};function Ju(e,t){Zu.point=Qu,qu=Wu=e,Yu=Ku=t}function Qu(e,t){Wu-=e,Ku-=t,Xu.add(Fs(Wu*Wu+Ku*Ku)),Wu=e,Ku=t}function ed(){this._string=[]}function td(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function nd(e){return function(t){var n=new id;for(var i in e)n[i]=e[i];return n.stream=t,n}}function id(){}function rd(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),Ws(n,e.stream(wu)),t(wu.result()),null!=i&&e.clipExtent(i),e}function od(e,t,n){return rd(e,function(n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+t[0][0]+(i-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(r-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])},n)}function ad(e,t,n){return od(e,[[0,0],t],n)}function sd(e,t,n){return rd(e,function(n){var i=+t,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];e.scale(150*r).translate([o,a])},n)}function ld(e,t,n){return rd(e,function(n){var i=+t,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;e.scale(150*r).translate([o,a])},n)}ed.prototype={_radius:4.5,_circle:td(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=td(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},id.prototype={constructor:id,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cd=Ps(30*Cs);function ud(e,t){return+t?function(e,t){function n(i,r,o,a,s,l,c,u,d,h,p,f,m,g){var v=c-i,b=u-r,y=v*v+b*b;if(y>4*t&&m--){var w=a+h,_=s+p,x=l+f,S=Fs(w*w+_*_+x*x),T=Bs(x/=S),A=Es(Es(x)-1)<ys||Es(o-d)<ys?(o+d)/2:Is(_,w),C=e(A,T),E=C[0],k=C[1],I=E-i,P=k-r,D=b*I-v*P;(D*D/y>t||Es((v*I+b*P)/y-.5)>.3||a*h+s*p+l*f<cd)&&(n(i,r,o,a,s,l,E,k,A,w/=S,_/=S,x,m,g),g.point(E,k),n(E,k,A,w,_,x,c,u,d,h,p,f,m,g))}}return function(t){var i,r,o,a,s,l,c,u,d,h,p,f,m={point:g,lineStart:v,lineEnd:y,polygonStart:function(){t.polygonStart(),m.lineStart=w},polygonEnd:function(){t.polygonEnd(),m.lineStart=v}};function g(n,i){n=e(n,i),t.point(n[0],n[1])}function v(){u=NaN,m.point=b,t.lineStart()}function b(i,r){var o=ll([i,r]),a=e(i,r);n(u,d,c,h,p,f,u=a[0],d=a[1],c=i,h=o[0],p=o[1],f=o[2],16,t),t.point(u,d)}function y(){m.point=g,t.lineEnd()}function w(){v(),m.point=_,m.lineEnd=x}function _(e,t){b(i=e,t),r=u,o=d,a=h,s=p,l=f,m.point=b}function x(){n(u,d,c,h,p,f,r,o,i,a,s,l,16,t),m.lineEnd=y,y()}return m}}(e,t):function(e){return nd({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var dd=nd({point:function(e,t){this.stream.point(e*Cs,t*Cs)}});function hd(e,t,n,i,r){function o(o,a){return[t+e*(o*=i),n-e*(a*=r)]}return o.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},o}function pd(e,t,n,i,r,o){var a=Ps(o),s=Rs(o),l=a*e,c=s*e,u=a/e,d=s/e,h=(s*n-a*t)/e,p=(s*t+a*n)/e;function f(e,o){return[l*(e*=i)-c*(o*=r)+t,n-c*e-l*o]}return f.invert=function(e,t){return[i*(u*e-d*t+h),r*(p-d*e-u*t)]},f}function fd(e){return md(function(){return e})()}function md(e){var t,n,i,r,o,a,s,l,c,u,d=150,h=480,p=250,f=0,m=0,g=0,v=0,b=0,y=0,w=1,_=1,x=null,S=Pc,T=null,A=ru,C=.5;function E(e){return l(e[0]*Cs,e[1]*Cs)}function k(e){return(e=l.invert(e[0],e[1]))&&[e[0]*As,e[1]*As]}function I(){var e=pd(d,0,0,w,_,y).apply(null,t(f,m)),i=(y?pd:hd)(d,h-e[0],p-e[1],w,_,y);return n=hc(g,v,b),s=uc(t,i),l=uc(n,s),a=ud(s,C),P()}function P(){return c=u=null,E}return E.stream=function(e){return c&&u===e?c:c=dd(function(e){return nd({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}(n)(S(a(A(u=e)))))},E.preclip=function(e){return arguments.length?(S=e,x=void 0,P()):S},E.postclip=function(e){return arguments.length?(A=e,T=i=r=o=null,P()):A},E.clipAngle=function(e){return arguments.length?(S=+e?Dc(x=e*Cs):(x=null,Pc),P()):x*As},E.clipExtent=function(e){return arguments.length?(A=null==e?(T=i=r=o=null,ru):Lc(T=+e[0][0],i=+e[0][1],r=+e[1][0],o=+e[1][1]),P()):null==T?null:[[T,i],[r,o]]},E.scale=function(e){return arguments.length?(d=+e,I()):d},E.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],I()):[h,p]},E.center=function(e){return arguments.length?(f=e[0]%360*Cs,m=e[1]%360*Cs,I()):[f*As,m*As]},E.rotate=function(e){return arguments.length?(g=e[0]%360*Cs,v=e[1]%360*Cs,b=e.length>2?e[2]%360*Cs:0,I()):[g*As,v*As,b*As]},E.angle=function(e){return arguments.length?(y=e%360*Cs,I()):y*As},E.reflectX=function(e){return arguments.length?(w=e?-1:1,I()):w<0},E.reflectY=function(e){return arguments.length?(_=e?-1:1,I()):_<0},E.precision=function(e){return arguments.length?(a=ud(s,C=e*e),P()):Fs(C)},E.fitExtent=function(e,t){return od(E,e,t)},E.fitSize=function(e,t){return ad(E,e,t)},E.fitWidth=function(e,t){return sd(E,e,t)},E.fitHeight=function(e,t){return ld(E,e,t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&k,I()}}function gd(e){var t=0,n=_s/3,i=md(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*Cs,n=e[1]*Cs):[t*As,n*As]},r}function vd(e,t){var n=Rs(e),i=(n+Rs(t))/2;if(Es(i)<ys)return function(e){var t=Ps(e);function n(e,n){return[e*t,Rs(n)/t]}return n.invert=function(e,n){return[e/t,Bs(n*t)]},n}(e);var r=1+n*(2*i-n),o=Fs(r)/i;function a(e,t){var n=Fs(r-2*i*Rs(t))/i;return[n*Rs(e*=i),o-n*Ps(e)]}return a.invert=function(e,t){var n=o-t,a=Is(e,Es(n))*Ns(n);return n*i<0&&(a-=_s*Ns(e)*Ns(n)),[a/i,Bs((r-(e*e+n*n)*i*i)/(2*i))]},a}function bd(){return gd(vd).scale(155.424).center([0,33.6442])}function yd(){return bd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function wd(e){return function(t,n){var i=Ps(t),r=Ps(n),o=e(i*r);return[o*r*Rs(t),o*Rs(n)]}}function _d(e){return function(t,n){var i=Fs(t*t+n*n),r=e(i),o=Rs(r),a=Ps(r);return[Is(t*o,i*a),Bs(i&&n*o/i)]}}var xd=wd(function(e){return Fs(2/(1+e))});xd.invert=_d(function(e){return 2*Bs(e/2)});var Sd=wd(function(e){return(e=Vs(e))&&e/Rs(e)});function Td(e,t){return[e,Ms(Us((xs+t)/2))]}function Ad(e){var t,n,i,r=fd(e),o=r.center,a=r.scale,s=r.translate,l=r.clipExtent,c=null;function u(){var o=_s*a(),s=r(gc(r.rotate()).invert([0,0]));return l(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===Td?[[Math.max(s[0]-o,c),t],[Math.min(s[0]+o,n),i]]:[[c,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,i)]])}return r.scale=function(e){return arguments.length?(a(e),u()):a()},r.translate=function(e){return arguments.length?(s(e),u()):s()},r.center=function(e){return arguments.length?(o(e),u()):o()},r.clipExtent=function(e){return arguments.length?(null==e?c=t=n=i=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],i=+e[1][1]),u()):null==c?null:[[c,t],[n,i]]},u()}function Cd(e){return Us((xs+e)/2)}function Ed(e,t){var n=Ps(e),i=e===t?Rs(e):Ms(n/Ps(t))/Ms(Cd(t)/Cd(e)),r=n*Ls(Cd(e),i)/i;if(!i)return Td;function o(e,t){r>0?t<-xs+ys&&(t=-xs+ys):t>xs-ys&&(t=xs-ys);var n=r/Ls(Cd(t),i);return[n*Rs(i*e),r-n*Ps(i*e)]}return o.invert=function(e,t){var n=r-t,o=Ns(i)*Fs(e*e+n*n),a=Is(e,Es(n))*Ns(n);return n*i<0&&(a-=_s*Ns(e)*Ns(n)),[a/i,2*ks(Ls(r/o,1/i))-xs]},o}function kd(e,t){return[e,t]}function Id(e,t){var n=Ps(e),i=e===t?Rs(e):(n-Ps(t))/(t-e),r=n/i+e;if(Es(i)<ys)return kd;function o(e,t){var n=r-t,o=i*e;return[n*Rs(o),r-n*Ps(o)]}return o.invert=function(e,t){var n=r-t,o=Is(e,Es(n))*Ns(n);return n*i<0&&(o-=_s*Ns(e)*Ns(n)),[o/i,r-Ns(i)*Fs(e*e+n*n)]},o}Sd.invert=_d(function(e){return e}),Td.invert=function(e,t){return[e,2*ks(Os(t))-xs]},kd.invert=kd;var Pd=1.340264,Dd=-.081106,Od=893e-6,Md=.003796,Ld=Fs(3)/2;function Rd(e,t){var n=Bs(Ld*Rs(t)),i=n*n,r=i*i*i;return[e*Ps(n)/(Ld*(Pd+3*Dd*i+r*(7*Od+9*Md*i))),n*(Pd+Dd*i+r*(Od+Md*i))]}function Nd(e,t){var n=Ps(t),i=Ps(e)*n;return[n*Rs(e)/i,Rs(t)/i]}function Fd(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Ud(e,t){return[Ps(t)*Rs(e),Rs(t)]}function Vd(e,t){var n=Ps(t),i=1+Ps(e)*n;return[n*Rs(e)/i,Rs(t)/i]}function Bd(e,t){return[Ms(Us((xs+t)/2)),-e]}function $d(e,t){return e.parent===t.parent?1:2}function Hd(e,t){return e+t.x}function Gd(e,t){return Math.max(e,t.y)}function jd(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function zd(e,t){var n,i,r,o,a,s=new Kd(e),l=+e.value&&(s.value=e.value),c=[s];for(null==t&&(t=qd);n=c.pop();)if(l&&(n.value=+n.data.value),(r=t(n.data))&&(a=r.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(i=n.children[o]=new Kd(r[o])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(Wd)}function qd(e){return e.children}function Yd(e){e.data=e.data.data}function Wd(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Kd(e){this.data=e,this.depth=this.height=0,this.parent=null}Rd.invert=function(e,t){for(var n,i=t,r=i*i,o=r*r*r,a=0;a<12&&(o=(r=(i-=n=(i*(Pd+Dd*r+o*(Od+Md*r))-t)/(Pd+3*Dd*r+o*(7*Od+9*Md*r)))*i)*r*r,!(Es(n)<ws));++a);return[Ld*e*(Pd+3*Dd*r+o*(7*Od+9*Md*r))/Ps(i),Bs(Rs(i)/Ld)]},Nd.invert=_d(ks),Fd.invert=function(e,t){var n,i=t,r=25;do{var o=i*i,a=o*o;i-=n=(i*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Es(n)>ys&&--r>0);return[e/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},Ud.invert=_d(Bs),Vd.invert=_d(function(e){return 2*ks(e)}),Bd.invert=function(e,t){return[-t,2*ks(Os(e))-xs]},Kd.prototype=zd.prototype={constructor:Kd,count:function(){return this.eachAfter(jd)},each:function(e){var t,n,i,r,o=this,a=[o];do{for(t=a.reverse(),a=[];o=t.pop();)if(e(o),n=o.children)for(i=0,r=n.length;i<r;++i)a.push(n[i])}while(a.length);return this},eachAfter:function(e){for(var t,n,i,r=this,o=[r],a=[];r=o.pop();)if(a.push(r),t=r.children)for(n=0,i=t.length;n<i;++n)o.push(t[n]);for(;r=a.pop();)e(r);return this},eachBefore:function(e){for(var t,n,i=this,r=[i];i=r.pop();)if(e(i),t=i.children)for(n=t.length-1;n>=0;--n)r.push(t[n]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;e=n.pop(),t=i.pop();for(;e===t;)r=e,e=n.pop(),t=i.pop();return r}(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return zd(this).eachBefore(Yd)}};var Xd=Array.prototype.slice;function Zd(e){for(var t,n,i=0,r=(e=function(e){for(var t,n,i=e.length;i;)n=Math.random()*i--|0,t=e[i],e[i]=e[n],e[n]=t;return e}(Xd.call(e))).length,o=[];i<r;)t=e[i],n&&eh(n,t)?++i:(n=nh(o=Jd(o,t)),i=0);return n}function Jd(e,t){var n,i;if(th(t,e))return[t];for(n=0;n<e.length;++n)if(Qd(t,e[n])&&th(ih(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Qd(ih(e[n],e[i]),t)&&Qd(ih(e[n],t),e[i])&&Qd(ih(e[i],t),e[n])&&th(rh(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Qd(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function eh(e,t){var n=e.r-t.r+1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function th(e,t){for(var n=0;n<t.length;++n)if(!eh(e,t[n]))return!1;return!0}function nh(e){switch(e.length){case 1:return function(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return ih(e[0],e[1]);case 3:return rh(e[0],e[1],e[2])}}function ih(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,a=t.y,s=t.r,l=o-n,c=a-i,u=s-r,d=Math.sqrt(l*l+c*c);return{x:(n+o+l/d*u)/2,y:(i+a+c/d*u)/2,r:(d+r+s)/2}}function rh(e,t,n){var i=e.x,r=e.y,o=e.r,a=t.x,s=t.y,l=t.r,c=n.x,u=n.y,d=n.r,h=i-a,p=i-c,f=r-s,m=r-u,g=l-o,v=d-o,b=i*i+r*r-o*o,y=b-a*a-s*s+l*l,w=b-c*c-u*u+d*d,_=p*f-h*m,x=(f*w-m*y)/(2*_)-i,S=(m*g-f*v)/_,T=(p*y-h*w)/(2*_)-r,A=(h*v-p*g)/_,C=S*S+A*A-1,E=2*(o+x*S+T*A),k=x*x+T*T-o*o,I=-(C?(E+Math.sqrt(E*E-4*C*k))/(2*C):k/E);return{x:i+x+S*I,y:r+T+A*I,r:I}}function oh(e,t,n){var i,r,o,a,s=e.x-t.x,l=e.y-t.y,c=s*s+l*l;c?(r=t.r+n.r,r*=r,a=e.r+n.r,r>(a*=a)?(i=(c+a-r)/(2*c),o=Math.sqrt(Math.max(0,a/c-i*i)),n.x=e.x-i*s-o*l,n.y=e.y-i*l+o*s):(i=(c+r-a)/(2*c),o=Math.sqrt(Math.max(0,r/c-i*i)),n.x=t.x+i*s-o*l,n.y=t.y+i*l+o*s)):(n.x=t.x+n.r,n.y=t.y)}function ah(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function sh(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,o=(t.y*n.r+n.y*t.r)/i;return r*r+o*o}function lh(e){this._=e,this.next=null,this.previous=null}function ch(e){if(!(r=e.length))return 0;var t,n,i,r,o,a,s,l,c,u,d;if((t=e[0]).x=0,t.y=0,!(r>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(r>2))return t.r+n.r;oh(n,t,i=e[2]),t=new lh(t),n=new lh(n),i=new lh(i),t.next=i.previous=n,n.next=t.previous=i,i.next=n.previous=t;e:for(s=3;s<r;++s){oh(t._,n._,i=e[s]),i=new lh(i),l=n.next,c=t.previous,u=n._.r,d=t._.r;do{if(u<=d){if(ah(l._,i._)){n=l,t.next=n,n.previous=t,--s;continue e}u+=l._.r,l=l.next}else{if(ah(c._,i._)){(t=c).next=n,n.previous=t,--s;continue e}d+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=t,i.next=n,t.next=n.previous=n=i,o=sh(t);(i=i.next)!==n;)(a=sh(i))<o&&(t=i,o=a);n=t.next}for(t=[n._],i=n;(i=i.next)!==n;)t.push(i._);for(i=Zd(t),s=0;s<r;++s)(t=e[s]).x-=i.x,t.y-=i.y;return i.r}function uh(e){if("function"!=typeof e)throw new Error;return e}function dh(){return 0}function hh(e){return function(){return e}}function ph(e){return Math.sqrt(e.value)}function fh(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function mh(e,t){return function(n){if(i=n.children){var i,r,o,a=i.length,s=e(n)*t||0;if(s)for(r=0;r<a;++r)i[r].r+=s;if(o=ch(i),s)for(r=0;r<a;++r)i[r].r-=s;n.r=o+s}}}function gh(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function vh(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function bh(e,t,n,i,r){for(var o,a=e.children,s=-1,l=a.length,c=e.value&&(i-t)/e.value;++s<l;)(o=a[s]).y0=n,o.y1=r,o.x0=t,o.x1=t+=o.value*c}var yh={depth:-1},wh={};function _h(e){return e.id}function xh(e){return e.parentId}function Sh(e,t){return e.parent===t.parent?1:2}function Th(e){var t=e.children;return t?t[0]:e.t}function Ah(e){var t=e.children;return t?t[t.length-1]:e.t}function Ch(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Eh(e,t,n){return e.a.parent===t.parent?e.a:n}function kh(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Ih(e,t,n,i,r){for(var o,a=e.children,s=-1,l=a.length,c=e.value&&(r-n)/e.value;++s<l;)(o=a[s]).x0=t,o.x1=i,o.y0=n,o.y1=n+=o.value*c}kh.prototype=Object.create(Kd.prototype);var Ph=(1+Math.sqrt(5))/2;function Dh(e,t,n,i,r,o){for(var a,s,l,c,u,d,h,p,f,m,g,v=[],b=t.children,y=0,w=0,_=b.length,x=t.value;y<_;){l=r-n,c=o-i;do{u=b[w++].value}while(!u&&w<_);for(d=h=u,g=u*u*(m=Math.max(c/l,l/c)/(x*e)),f=Math.max(h/g,g/d);w<_;++w){if(u+=s=b[w].value,s<d&&(d=s),s>h&&(h=s),g=u*u*m,(p=Math.max(h/g,g/d))>f){u-=s;break}f=p}v.push(a={value:u,dice:l<c,children:b.slice(y,w)}),a.dice?bh(a,n,i,r,x?i+=c*u/x:o):Ih(a,n,i,x?n+=l*u/x:r,o),x-=u,y=w}return v}var Oh=function e(t){function n(e,n,i,r,o){Dh(t,e,n,i,r,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Ph);var Mh=function e(t){function n(e,n,i,r,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,l,c,u,d=-1,h=a.length,p=e.value;++d<h;){for(l=(s=a[d]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?bh(s,n,i,r,i+=(o-i)*s.value/p):Ih(s,n,i,n+=(r-n)*s.value/p,o),p-=s.value}else e._squarify=a=Dh(t,e,n,i,r,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Ph);function Lh(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Rh(e,t){return e[0]-t[0]||e[1]-t[1]}function Nh(e){for(var t=e.length,n=[0,1],i=2,r=2;r<t;++r){for(;i>1&&Lh(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Fh(){return Math.random()}var Uh=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(Fh),Vh=function e(t){function n(e,n){var i,r;return e=null==e?0:+e,n=null==n?1:+n,function(){var o;if(null!=i)o=i,i=null;else do{i=2*t()-1,o=2*t()-1,r=i*i+o*o}while(!r||r>1);return e+n*o*Math.sqrt(-2*Math.log(r)/r)}}return n.source=e,n}(Fh),Bh=function e(t){function n(){var e=Vh.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(Fh),$h=function e(t){function n(e){return function(){for(var n=0,i=0;i<e;++i)n+=t();return n}}return n.source=e,n}(Fh),Hh=function e(t){function n(e){var n=$h.source(t)(e);return function(){return n()/e}}return n.source=e,n}(Fh),Gh=function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(Fh);function jh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function zh(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}var qh=Array.prototype,Yh=qh.map,Wh=qh.slice,Kh={name:"implicit"};function Xh(){var e=Do(),t=[],n=[],i=Kh;function r(r){var o=r+"",a=e.get(o);if(!a){if(i!==Kh)return i;e.set(o,a=t.push(r))}return n[(a-1)%n.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=Do();for(var i,o,a=-1,s=n.length;++a<s;)e.has(o=(i=n[a])+"")||e.set(o,t.push(i));return r},r.range=function(e){return arguments.length?(n=Wh.call(e),r):n.slice()},r.unknown=function(e){return arguments.length?(i=e,r):i},r.copy=function(){return Xh(t,n).unknown(i)},jh.apply(r,arguments),r}function Zh(){var e,t,n=Xh().unknown(void 0),i=n.domain,r=n.range,o=[0,1],a=!1,s=0,l=0,c=.5;function u(){var n=i().length,u=o[1]<o[0],d=o[u-0],h=o[1-u];e=(h-d)/Math.max(1,n-s+2*l),a&&(e=Math.floor(e)),d+=(h-d-e*(n-s))*c,t=e*(1-s),a&&(d=Math.round(d),t=Math.round(t));var p=g(n).map(function(t){return d+e*t});return r(u?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),u()):i()},n.range=function(e){return arguments.length?(o=[+e[0],+e[1]],u()):o.slice()},n.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,u()):a},n.padding=function(e){return arguments.length?(s=Math.min(1,l=+e),u()):s},n.paddingInner=function(e){return arguments.length?(s=Math.min(1,e),u()):s},n.paddingOuter=function(e){return arguments.length?(l=+e,u()):l},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),u()):c},n.copy=function(){return Zh(i(),o).round(a).paddingInner(s).paddingOuter(l).align(c)},jh.apply(u(),arguments)}function Jh(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Jh(t())},e}function Qh(e){return+e}var ep=[0,1];function tp(e){return e}function np(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function ip(e){var t,n=e[0],i=e[e.length-1];return n>i&&(t=n,n=i,i=t),function(e){return Math.max(n,Math.min(i,e))}}function rp(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1];return r<i?(i=np(r,i),o=n(a,o)):(i=np(i,r),o=n(o,a)),function(e){return o(i(e))}}function op(e,t,n){var i=Math.min(e.length,t.length)-1,o=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)o[s]=np(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=r(e,t,1,i)-1;return a[n](o[n](t))}}function ap(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function sp(){var e,t,n,i,r,o,a=ep,s=ep,l=zn,c=tp;function u(){return i=Math.min(a.length,s.length)>2?op:rp,r=o=null,d}function d(t){return isNaN(t=+t)?n:(r||(r=i(a.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((o||(o=i(s,a.map(e),Bn)))(n)))},d.domain=function(e){return arguments.length?(a=Yh.call(e,Qh),c===tp||(c=ip(a)),u()):a.slice()},d.range=function(e){return arguments.length?(s=Wh.call(e),u()):s.slice()},d.rangeRound=function(e){return s=Wh.call(e),l=qn,u()},d.clamp=function(e){return arguments.length?(c=e?ip(a):tp,d):c!==tp},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,i){return e=n,t=i,u()}}function lp(e,t){return sp()(e,t)}function cp(t,n,i,r){var o,a=x(t,n,i);switch((r=ns(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(o=ps(a,s))||(r.precision=o),e.formatPrefix(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=fs(a,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=hs(a))||(r.precision=o-2*("%"===r.type))}return e.format(r)}function up(e){var t=e.domain;return e.ticks=function(e){var n=t();return w(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return cp(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r=t(),o=0,a=r.length-1,s=r[o],l=r[a];return l<s&&(i=s,s=l,l=i,i=o,o=a,a=i),(i=_(s,l,n))>0?i=_(s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=_(s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i,n)),i>0?(r[o]=Math.floor(s/i)*i,r[a]=Math.ceil(l/i)*i,t(r)):i<0&&(r[o]=Math.ceil(s*i)/i,r[a]=Math.floor(l*i)/i,t(r)),e},e}function dp(e,t){var n,i=0,r=(e=e.slice()).length-1,o=e[i],a=e[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),e[i]=t.floor(o),e[r]=t.ceil(a),e}function hp(e){return Math.log(e)}function pp(e){return Math.exp(e)}function fp(e){return-Math.log(-e)}function mp(e){return-Math.exp(-e)}function gp(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vp(e){return function(t){return-e(-t)}}function bp(t){var n,i,r=t(hp,pp),o=r.domain,a=10;function s(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(a),i=function(e){return 10===e?gp:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(a),o()[0]<0?(n=vp(n),i=vp(i),t(fp,mp)):t(hp,pp),r}return r.base=function(e){return arguments.length?(a=+e,s()):a},r.domain=function(e){return arguments.length?(o(e),s()):o()},r.ticks=function(e){var t,r=o(),s=r[0],l=r[r.length-1];(t=l<s)&&(h=s,s=l,l=h);var c,u,d,h=n(s),p=n(l),f=null==e?10:+e,m=[];if(!(a%1)&&p-h<f){if(h=Math.round(h)-1,p=Math.round(p)+1,s>0){for(;h<p;++h)for(u=1,c=i(h);u<a;++u)if(!((d=c*u)<s)){if(d>l)break;m.push(d)}}else for(;h<p;++h)for(u=a-1,c=i(h);u>=1;--u)if(!((d=c*u)<s)){if(d>l)break;m.push(d)}}else m=w(h,p,Math.min(p-h,f)).map(i);return t?m.reverse():m},r.tickFormat=function(t,o){if(null==o&&(o=10===a?".0e":","),"function"!=typeof o&&(o=e.format(o)),t===1/0)return o;null==t&&(t=10);var s=Math.max(1,a*t/r.ticks().length);return function(e){var t=e/i(Math.round(n(e)));return t*a<a-.5&&(t*=a),t<=s?o(e):""}},r.nice=function(){return o(dp(o(),{floor:function(e){return i(Math.floor(n(e)))},ceil:function(e){return i(Math.ceil(n(e)))}}))},r}function yp(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function wp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function _p(e){var t=1,n=e(yp(t),wp(t));return n.constant=function(n){return arguments.length?e(yp(t=+n),wp(t)):t},up(n)}function xp(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Sp(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Tp(e){return e<0?-e*e:e*e}function Ap(e){var t=e(tp,tp),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(tp,tp):.5===n?e(Sp,Tp):e(xp(n),xp(1/n)):n},up(t)}function Cp(){var e=Ap(sp());return e.copy=function(){return ap(e,Cp()).exponent(e.exponent())},jh.apply(e,arguments),e}var Ep=new Date,kp=new Date;function Ip(e,t,n,i){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=function(t){return e(t=new Date(+t)),t},r.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},r.round=function(e){var t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},r.range=function(n,i,o){var a,s=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<i);return s},r.filter=function(n){return Ip(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););})},n&&(r.count=function(t,i){return Ep.setTime(+t),kp.setTime(+i),e(Ep),e(kp),Math.floor(n(Ep,kp))},r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?function(t){return i(t)%e===0}:function(t){return r.count(0,t)%e===0}):r:null}),r}var Pp=Ip(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Pp.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ip(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Pp:null};var Dp=Pp.range,Op=1e3,Mp=6e4,Lp=36e5,Rp=864e5,Np=6048e5,Fp=Ip(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*Op)},function(e,t){return(t-e)/Op},function(e){return e.getUTCSeconds()}),Up=Fp.range,Vp=Ip(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Op)},function(e,t){e.setTime(+e+t*Mp)},function(e,t){return(t-e)/Mp},function(e){return e.getMinutes()}),Bp=Vp.range,$p=Ip(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Op-e.getMinutes()*Mp)},function(e,t){e.setTime(+e+t*Lp)},function(e,t){return(t-e)/Lp},function(e){return e.getHours()}),Hp=$p.range,Gp=Ip(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mp)/Rp},function(e){return e.getDate()-1}),jp=Gp.range;function zp(e){return Ip(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mp)/Np})}var qp=zp(0),Yp=zp(1),Wp=zp(2),Kp=zp(3),Xp=zp(4),Zp=zp(5),Jp=zp(6),Qp=qp.range,ef=Yp.range,tf=Wp.range,nf=Kp.range,rf=Xp.range,of=Zp.range,af=Jp.range,sf=Ip(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),lf=sf.range,cf=Ip(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});cf.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ip(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var uf=cf.range,df=Ip(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Mp)},function(e,t){return(t-e)/Mp},function(e){return e.getUTCMinutes()}),hf=df.range,pf=Ip(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*Lp)},function(e,t){return(t-e)/Lp},function(e){return e.getUTCHours()}),ff=pf.range,mf=Ip(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Rp},function(e){return e.getUTCDate()-1}),gf=mf.range;function vf(e){return Ip(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/Np})}var bf=vf(0),yf=vf(1),wf=vf(2),_f=vf(3),xf=vf(4),Sf=vf(5),Tf=vf(6),Af=bf.range,Cf=yf.range,Ef=wf.range,kf=_f.range,If=xf.range,Pf=Sf.range,Df=Tf.range,Of=Ip(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),Mf=Of.range,Lf=Ip(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Lf.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ip(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var Rf=Lf.range;function Nf(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ff(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Uf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Vf(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=Yf(r),u=Wf(r),d=Yf(o),h=Wf(o),p=Yf(a),f=Wf(a),m=Yf(s),g=Wf(s),v=Yf(l),b=Wf(l),y={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:mm,e:mm,f:wm,H:gm,I:vm,j:bm,L:ym,m:_m,M:xm,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Xm,s:Zm,S:Sm,u:Tm,U:Am,V:Cm,w:Em,W:km,x:null,X:null,y:Im,Y:Pm,Z:Dm,"%":Km},w={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Om,e:Om,f:Fm,H:Mm,I:Lm,j:Rm,L:Nm,m:Um,M:Vm,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Xm,s:Zm,S:Bm,u:$m,U:Hm,V:Gm,w:jm,W:zm,x:null,X:null,y:qm,Y:Ym,Z:Wm,"%":Km},_={a:function(e,t,n){var i=p.exec(t.slice(n));return i?(e.w=f[i[0].toLowerCase()],n+i[0].length):-1},A:function(e,t,n){var i=d.exec(t.slice(n));return i?(e.w=h[i[0].toLowerCase()],n+i[0].length):-1},b:function(e,t,n){var i=v.exec(t.slice(n));return i?(e.m=b[i[0].toLowerCase()],n+i[0].length):-1},B:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=g[i[0].toLowerCase()],n+i[0].length):-1},c:function(e,n,i){return T(e,t,n,i)},d:om,e:om,f:dm,H:sm,I:sm,j:am,L:um,m:rm,M:lm,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=u[i[0].toLowerCase()],n+i[0].length):-1},q:im,Q:pm,s:fm,S:cm,u:Xf,U:Zf,V:Jf,w:Kf,W:Qf,x:function(e,t,i){return T(e,n,t,i)},X:function(e,t,n){return T(e,i,t,n)},y:tm,Y:em,Z:nm,"%":hm};function x(e,t){return function(n){var i,r,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(r=$f[i=e.charAt(++s)])?i=e.charAt(++s):r="e"===i?" ":"0",(o=t[i])&&(i=o(n,r)),a.push(i),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function S(e,t){return function(n){var i,r,o=Uf(1900,void 0,1);if(T(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=Ff(Uf(o.y,0,1))).getUTCDay(),i=r>4||0===r?yf.ceil(i):yf(i),i=mf.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=Nf(Uf(o.y,0,1))).getDay(),i=r>4||0===r?Yp.ceil(i):Yp(i),i=Gp.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?Ff(Uf(o.y,0,1)).getUTCDay():Nf(Uf(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ff(o)):Nf(o)}}function T(e,t,n,i){for(var r,o,a=0,s=t.length,l=n.length;a<s;){if(i>=l)return-1;if(37===(r=t.charCodeAt(a++))){if(r=t.charAt(a++),!(o=_[r in $f?t.charAt(a++):r])||(i=o(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return y.x=x(n,y),y.X=x(i,y),y.c=x(t,y),w.x=x(n,w),w.X=x(i,w),w.c=x(t,w),{format:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}var Bf,$f={"-":"",_:" ",0:"0"},Hf=/^\s*\d+/,Gf=/^%/,jf=/[\\^$*+?|[\]().{}]/g;function zf(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function qf(e){return e.replace(jf,"\\$&")}function Yf(e){return new RegExp("^(?:"+e.map(qf).join("|")+")","i")}function Wf(e){for(var t={},n=-1,i=e.length;++n<i;)t[e[n].toLowerCase()]=n;return t}function Kf(e,t,n){var i=Hf.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Xf(e,t,n){var i=Hf.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Zf(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Jf(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Qf(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function em(e,t,n){var i=Hf.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function tm(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function nm(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function im(e,t,n){var i=Hf.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function rm(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function om(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function am(e,t,n){var i=Hf.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function sm(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function lm(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function cm(e,t,n){var i=Hf.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function um(e,t,n){var i=Hf.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function dm(e,t,n){var i=Hf.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function hm(e,t,n){var i=Gf.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function pm(e,t,n){var i=Hf.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function fm(e,t,n){var i=Hf.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function mm(e,t){return zf(e.getDate(),t,2)}function gm(e,t){return zf(e.getHours(),t,2)}function vm(e,t){return zf(e.getHours()%12||12,t,2)}function bm(e,t){return zf(1+Gp.count(cf(e),e),t,3)}function ym(e,t){return zf(e.getMilliseconds(),t,3)}function wm(e,t){return ym(e,t)+"000"}function _m(e,t){return zf(e.getMonth()+1,t,2)}function xm(e,t){return zf(e.getMinutes(),t,2)}function Sm(e,t){return zf(e.getSeconds(),t,2)}function Tm(e){var t=e.getDay();return 0===t?7:t}function Am(e,t){return zf(qp.count(cf(e)-1,e),t,2)}function Cm(e,t){var n=e.getDay();return e=n>=4||0===n?Xp(e):Xp.ceil(e),zf(Xp.count(cf(e),e)+(4===cf(e).getDay()),t,2)}function Em(e){return e.getDay()}function km(e,t){return zf(Yp.count(cf(e)-1,e),t,2)}function Im(e,t){return zf(e.getFullYear()%100,t,2)}function Pm(e,t){return zf(e.getFullYear()%1e4,t,4)}function Dm(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zf(t/60|0,"0",2)+zf(t%60,"0",2)}function Om(e,t){return zf(e.getUTCDate(),t,2)}function Mm(e,t){return zf(e.getUTCHours(),t,2)}function Lm(e,t){return zf(e.getUTCHours()%12||12,t,2)}function Rm(e,t){return zf(1+mf.count(Lf(e),e),t,3)}function Nm(e,t){return zf(e.getUTCMilliseconds(),t,3)}function Fm(e,t){return Nm(e,t)+"000"}function Um(e,t){return zf(e.getUTCMonth()+1,t,2)}function Vm(e,t){return zf(e.getUTCMinutes(),t,2)}function Bm(e,t){return zf(e.getUTCSeconds(),t,2)}function $m(e){var t=e.getUTCDay();return 0===t?7:t}function Hm(e,t){return zf(bf.count(Lf(e)-1,e),t,2)}function Gm(e,t){var n=e.getUTCDay();return e=n>=4||0===n?xf(e):xf.ceil(e),zf(xf.count(Lf(e),e)+(4===Lf(e).getUTCDay()),t,2)}function jm(e){return e.getUTCDay()}function zm(e,t){return zf(yf.count(Lf(e)-1,e),t,2)}function qm(e,t){return zf(e.getUTCFullYear()%100,t,2)}function Ym(e,t){return zf(e.getUTCFullYear()%1e4,t,4)}function Wm(){return"+0000"}function Km(){return"%"}function Xm(e){return+e}function Zm(e){return Math.floor(+e/1e3)}function Jm(t){return Bf=Vf(t),e.timeFormat=Bf.format,e.timeParse=Bf.parse,e.utcFormat=Bf.utcFormat,e.utcParse=Bf.utcParse,Bf}Jm({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Qm="%Y-%m-%dT%H:%M:%S.%LZ";var eg=Date.prototype.toISOString?function(e){return e.toISOString()}:e.utcFormat(Qm);var tg=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:e.utcParse(Qm),ng=1e3,ig=6e4,rg=36e5,og=864e5,ag=2592e6,sg=31536e6;function lg(e){return new Date(e)}function cg(e){return e instanceof Date?+e:+new Date(+e)}function ug(e,t,i,r,o,a,s,l,c){var u=lp(tp,tp),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),b=c("%b %d"),y=c("%B"),w=c("%Y"),_=[[s,1,ng],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,ig],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,rg],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,og],[r,2,1728e5],[i,1,6048e5],[t,1,ag],[t,3,7776e6],[e,1,sg]];function S(n){return(s(n)<n?p:a(n)<n?f:o(n)<n?m:r(n)<n?g:t(n)<n?i(n)<n?v:b:e(n)<n?y:w)(n)}function T(t,i,r,o){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-i)/t,s=n(function(e){return e[2]}).right(_,a);s===_.length?(o=x(i/sg,r/sg,t),t=e):s?(o=(s=_[a/_[s-1][2]<_[s][2]/a?s-1:s])[1],t=s[0]):(o=Math.max(x(i,r,t),1),t=l)}return null==o?t:t.every(o)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Yh.call(e,cg)):h().map(lg)},u.ticks=function(e,t){var n,i=h(),r=i[0],o=i[i.length-1],a=o<r;return a&&(n=r,r=o,o=n),n=(n=T(e,r,o,t))?n.range(r,o+1):[],a?n.reverse():n},u.tickFormat=function(e,t){return null==t?S:c(t)},u.nice=function(e,t){var n=h();return(e=T(e,n[0],n[n.length-1],t))?h(dp(n,e)):u},u.copy=function(){return ap(u,ug(e,t,i,r,o,a,s,l,c))},u}function dg(){var e,t,n,i,r,o=0,a=1,s=tp,l=!1;function c(t){return isNaN(t=+t)?r:s(0===n?.5:(t=(i(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}return c.domain=function(r){return arguments.length?(e=i(o=+r[0]),t=i(a=+r[1]),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.unknown=function(e){return arguments.length?(r=e,c):r},function(r){return i=r,e=r(o),t=r(a),n=e===t?0:1/(t-e),c}}function hg(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function pg(){var e=Ap(dg());return e.copy=function(){return hg(e,pg()).exponent(e.exponent())},zh.apply(e,arguments)}function fg(){var e,t,n,i,r,o,a,s=0,l=.5,c=1,u=tp,d=!1;function h(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(e<t?i:r),u(d?Math.max(0,Math.min(1,e)):e))}return h.domain=function(a){return arguments.length?(e=o(s=+a[0]),t=o(l=+a[1]),n=o(c=+a[2]),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),h):[s,l,c]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(u=e,h):u},h.unknown=function(e){return arguments.length?(a=e,h):a},function(a){return o=a,e=a(s),t=a(l),n=a(c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),h}}function mg(){var e=Ap(fg());return e.copy=function(){return hg(e,mg()).exponent(e.exponent())},zh.apply(e,arguments)}function gg(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}var vg=gg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),bg=gg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),yg=gg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),wg=gg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),_g=gg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),xg=gg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Sg=gg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Tg=gg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ag=gg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Cg=gg("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Eg(e){return Ln(e[e.length-1])}var kg=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(gg),Ig=Eg(kg),Pg=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(gg),Dg=Eg(Pg),Og=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(gg),Mg=Eg(Og),Lg=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(gg),Rg=Eg(Lg),Ng=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(gg),Fg=Eg(Ng),Ug=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(gg),Vg=Eg(Ug),Bg=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(gg),$g=Eg(Bg),Hg=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(gg),Gg=Eg(Hg),jg=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(gg),zg=Eg(jg),qg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(gg),Yg=Eg(qg),Wg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(gg),Kg=Eg(Wg),Xg=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(gg),Zg=Eg(Xg),Jg=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(gg),Qg=Eg(Jg),ev=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(gg),tv=Eg(ev),nv=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(gg),iv=Eg(nv),rv=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(gg),ov=Eg(rv),av=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(gg),sv=Eg(av),lv=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(gg),cv=Eg(lv),uv=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(gg),dv=Eg(uv),hv=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(gg),pv=Eg(hv),fv=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(gg),mv=Eg(fv),gv=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(gg),vv=Eg(gv),bv=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(gg),yv=Eg(bv),wv=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(gg),_v=Eg(wv),xv=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(gg),Sv=Eg(xv),Tv=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(gg),Av=Eg(Tv),Cv=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(gg),Ev=Eg(Cv);var kv=fi(xn(300,.5,0),xn(-240,.5,1)),Iv=fi(xn(-100,.75,.35),xn(80,1.5,.8)),Pv=fi(xn(260,.75,.35),xn(80,1.5,.8)),Dv=xn();var Ov=Ut(),Mv=Math.PI/3,Lv=2*Math.PI/3;function Rv(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var Nv=Rv(gg("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Fv=Rv(gg("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Uv=Rv(gg("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Vv=Rv(gg("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Bv(e){return function(){return e}}var $v=Math.abs,Hv=Math.atan2,Gv=Math.cos,jv=Math.max,zv=Math.min,qv=Math.sin,Yv=Math.sqrt,Wv=1e-12,Kv=Math.PI,Xv=Kv/2,Zv=2*Kv;function Jv(e){return e>=1?Xv:e<=-1?-Xv:Math.asin(e)}function Qv(e){return e.innerRadius}function eb(e){return e.outerRadius}function tb(e){return e.startAngle}function nb(e){return e.endAngle}function ib(e){return e&&e.padAngle}function rb(e,t,n,i,r,o,a){var s=e-n,l=t-i,c=(a?o:-o)/Yv(s*s+l*l),u=c*l,d=-c*s,h=e+u,p=t+d,f=n+u,m=i+d,g=(h+f)/2,v=(p+m)/2,b=f-h,y=m-p,w=b*b+y*y,_=r-o,x=h*m-f*p,S=(y<0?-1:1)*Yv(jv(0,_*_*w-x*x)),T=(x*y-b*S)/w,A=(-x*b-y*S)/w,C=(x*y+b*S)/w,E=(-x*b+y*S)/w,k=T-g,I=A-v,P=C-g,D=E-v;return k*k+I*I>P*P+D*D&&(T=C,A=E),{cx:T,cy:A,x01:-u,y01:-d,x11:T*(r/_-1),y11:A*(r/_-1)}}function ob(e){this._context=e}function ab(e){return new ob(e)}function sb(e){return e[0]}function lb(e){return e[1]}function cb(){var e=sb,t=lb,n=Bv(!0),i=null,r=ab,o=null;function a(a){var s,l,c,u=a.length,d=!1;for(null==i&&(o=r(c=So())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(l,s,a),+t(l,s,a));if(c)return o=null,c+""||null}return a.x=function(t){return arguments.length?(e="function"==typeof t?t:Bv(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Bv(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:Bv(!!e),a):n},a.curve=function(e){return arguments.length?(r=e,null!=i&&(o=r(i)),a):r},a.context=function(e){return arguments.length?(null==e?i=o=null:o=r(i=e),a):i},a}function ub(){var e=sb,t=null,n=Bv(0),i=lb,r=Bv(!0),o=null,a=ab,s=null;function l(l){var c,u,d,h,p,f=l.length,m=!1,g=new Array(f),v=new Array(f);for(null==o&&(s=a(p=So())),c=0;c<=f;++c){if(!(c<f&&r(h=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=c-1;d>=u;--d)s.point(g[d],v[d]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+e(h,c,l),v[c]=+n(h,c,l),s.point(t?+t(h,c,l):g[c],i?+i(h,c,l):v[c]))}if(p)return s=null,p+""||null}function c(){return cb().defined(r).curve(a).context(o)}return l.x=function(n){return arguments.length?(e="function"==typeof n?n:Bv(+n),t=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:Bv(+t),l):e},l.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:Bv(+e),l):t},l.y=function(e){return arguments.length?(n="function"==typeof e?e:Bv(+e),i=null,l):n},l.y0=function(e){return arguments.length?(n="function"==typeof e?e:Bv(+e),l):n},l.y1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Bv(+e),l):i},l.lineX0=l.lineY0=function(){return c().x(e).y(n)},l.lineY1=function(){return c().x(e).y(i)},l.lineX1=function(){return c().x(t).y(n)},l.defined=function(e){return arguments.length?(r="function"==typeof e?e:Bv(!!e),l):r},l.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),l):a},l.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),l):o},l}function db(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function hb(e){return e}ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var pb=mb(ab);function fb(e){this._curve=e}function mb(e){function t(t){return new fb(e(t))}return t._curve=e,t}function gb(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(mb(e)):t()._curve},e}function vb(){return gb(cb().curve(pb))}function bb(){var e=ub().curve(pb),t=e.curve,n=e.lineX0,i=e.lineX1,r=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return gb(n())},delete e.lineX0,e.lineEndAngle=function(){return gb(i())},delete e.lineX1,e.lineInnerRadius=function(){return gb(r())},delete e.lineY0,e.lineOuterRadius=function(){return gb(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t(mb(e)):t()._curve},e}function yb(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}fb.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var wb=Array.prototype.slice;function _b(e){return e.source}function xb(e){return e.target}function Sb(e){var t=_b,n=xb,i=sb,r=lb,o=null;function a(){var a,s=wb.call(arguments),l=t.apply(this,s),c=n.apply(this,s);if(o||(o=a=So()),e(o,+i.apply(this,(s[0]=l,s)),+r.apply(this,s),+i.apply(this,(s[0]=c,s)),+r.apply(this,s)),a)return o=null,a+""||null}return a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(e){return arguments.length?(n=e,a):n},a.x=function(e){return arguments.length?(i="function"==typeof e?e:Bv(+e),a):i},a.y=function(e){return arguments.length?(r="function"==typeof e?e:Bv(+e),a):r},a.context=function(e){return arguments.length?(o=null==e?null:e,a):o},a}function Tb(e,t,n,i,r){e.moveTo(t,n),e.bezierCurveTo(t=(t+i)/2,n,t,r,i,r)}function Ab(e,t,n,i,r){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+r)/2,i,n,i,r)}function Cb(e,t,n,i,r){var o=yb(t,n),a=yb(t,n=(n+r)/2),s=yb(i,n),l=yb(i,r);e.moveTo(o[0],o[1]),e.bezierCurveTo(a[0],a[1],s[0],s[1],l[0],l[1])}var Eb={draw:function(e,t){var n=Math.sqrt(t/Kv);e.moveTo(n,0),e.arc(0,0,n,0,Zv)}},kb={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Ib=Math.sqrt(1/3),Pb=2*Ib,Db={draw:function(e,t){var n=Math.sqrt(t/Pb),i=n*Ib;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},Ob=Math.sin(Kv/10)/Math.sin(7*Kv/10),Mb=Math.sin(Zv/10)*Ob,Lb=-Math.cos(Zv/10)*Ob,Rb={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),i=Mb*n,r=Lb*n;e.moveTo(0,-n),e.lineTo(i,r);for(var o=1;o<5;++o){var a=Zv*o/5,s=Math.cos(a),l=Math.sin(a);e.lineTo(l*n,-s*n),e.lineTo(s*i-l*r,l*i+s*r)}e.closePath()}},Nb={draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},Fb=Math.sqrt(3),Ub={draw:function(e,t){var n=-Math.sqrt(t/(3*Fb));e.moveTo(0,2*n),e.lineTo(-Fb*n,-n),e.lineTo(Fb*n,-n),e.closePath()}},Vb=-.5,Bb=Math.sqrt(3)/2,$b=1/Math.sqrt(12),Hb=3*($b/2+1),Gb={draw:function(e,t){var n=Math.sqrt(t/Hb),i=n/2,r=n*$b,o=i,a=n*$b+n,s=-o,l=a;e.moveTo(i,r),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(Vb*i-Bb*r,Bb*i+Vb*r),e.lineTo(Vb*o-Bb*a,Bb*o+Vb*a),e.lineTo(Vb*s-Bb*l,Bb*s+Vb*l),e.lineTo(Vb*i+Bb*r,Vb*r-Bb*i),e.lineTo(Vb*o+Bb*a,Vb*a-Bb*o),e.lineTo(Vb*s+Bb*l,Vb*l-Bb*s),e.closePath()}},jb=[Eb,kb,Db,Nb,Rb,Ub,Gb];function zb(){}function qb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Yb(e){this._context=e}function Wb(e){this._context=e}function Kb(e){this._context=e}function Xb(e,t){this._basis=new Yb(e),this._beta=t}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qb(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Wb.prototype={areaStart:zb,areaEnd:zb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:qb(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Kb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:qb(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Xb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i,r=e[0],o=t[0],a=e[n]-r,s=t[n]-o,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(r+i*a),this._beta*t[l]+(1-this._beta)*(o+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Zb=function e(t){function n(e){return 1===t?new Yb(e):new Xb(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function Jb(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Qb(e,t){this._context=e,this._k=(1-t)/6}Qb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Jb(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Jb(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ey=function e(t){function n(e){return new Qb(e,t)}return n.tension=function(t){return e(+t)},n}(0);function ty(e,t){this._context=e,this._k=(1-t)/6}ty.prototype={areaStart:zb,areaEnd:zb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Jb(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ny=function e(t){function n(e){return new ty(e,t)}return n.tension=function(t){return e(+t)},n}(0);function iy(e,t){this._context=e,this._k=(1-t)/6}iy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jb(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ry=function e(t){function n(e){return new iy(e,t)}return n.tension=function(t){return e(+t)},n}(0);function oy(e,t,n){var i=e._x1,r=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Wv){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Wv){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,o,a,e._x2,e._y2)}function ay(e,t){this._context=e,this._alpha=t}ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:oy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var sy=function e(t){function n(e){return t?new ay(e,t):new Qb(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ly(e,t){this._context=e,this._alpha=t}ly.prototype={areaStart:zb,areaEnd:zb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:oy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cy=function e(t){function n(e){return t?new ly(e,t):new ty(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function uy(e,t){this._context=e,this._alpha=t}uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var dy=function e(t){function n(e){return t?new uy(e,t):new iy(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function hy(e){this._context=e}function py(e){return e<0?-1:1}function fy(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(py(o)+py(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function my(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function gy(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,r+s*t,o-s,a-s*n,o,a)}function vy(e){this._context=e}function by(e){this._context=new yy(e)}function yy(e){this._context=e}function wy(e){this._context=e}function _y(e){var t,n,i=e.length-1,r=new Array(i),o=new Array(i),a=new Array(i);for(r[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<i-1;++t)r[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[i-1]=2,o[i-1]=7,a[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)n=r[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(r[i-1]=a[i-1]/o[i-1],t=i-2;t>=0;--t)r[t]=(a[t]-r[t+1])/o[t];for(o[i-1]=(e[i]+r[i-1])/2,t=0;t<i-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function xy(e,t){this._context=e,this._t=t}function Sy(e,t){if((r=e.length)>1)for(var n,i,r,o=1,a=e[t[0]],s=a.length;o<r;++o)for(i=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Ty(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Ay(e,t){return e[t]}function Cy(e){var t=e.map(Ey);return Ty(e).sort(function(e,n){return t[e]-t[n]})}function Ey(e){for(var t,n=-1,i=0,r=e.length,o=-1/0;++n<r;)(t=+e[n][1])>o&&(o=t,i=n);return i}function ky(e){var t=e.map(Iy);return Ty(e).sort(function(e,n){return t[e]-t[n]})}function Iy(e){for(var t,n=0,i=-1,r=e.length;++i<r;)(t=+e[i][1])&&(n+=t);return n}function Py(e){return function(){return e}}function Dy(e){return e[0]}function Oy(e){return e[1]}function My(){this._=null}function Ly(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Ry(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ny(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Fy(e){for(;e.L;)e=e.L;return e}function Uy(e,t,n,i){var r=[null,null],o=lw.push(r)-1;return r.left=e,r.right=t,n&&By(r,e,t,n),i&&By(r,t,e,i),aw[e.index].halfedges.push(o),aw[t.index].halfedges.push(o),r}function Vy(e,t,n){var i=[t,n];return i.left=e,i}function By(e,t,n,i){e[0]||e[1]?e.left===n?e[1]=i:e[0]=i:(e[0]=i,e.left=t,e.right=n)}function $y(e,t,n,i,r){var o,a=e[0],s=e[1],l=a[0],c=a[1],u=0,d=1,h=s[0]-l,p=s[1]-c;if(o=t-l,h||!(o>0)){if(o/=h,h<0){if(o<u)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>u&&(u=o)}if(o=i-l,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>u&&(u=o)}else if(h>0){if(o<u)return;o<d&&(d=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>u&&(u=o)}if(o=r-c,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<d&&(d=o)}return!(u>0||d<1)||(u>0&&(e[0]=[l+u*h,c+u*p]),d<1&&(e[1]=[l+d*h,c+d*p]),!0)}}}}}function Hy(e,t,n,i,r){var o=e[1];if(o)return!0;var a,s,l=e[0],c=e.left,u=e.right,d=c[0],h=c[1],p=u[0],f=u[1],m=(d+p)/2,g=(h+f)/2;if(f===h){if(m<t||m>=i)return;if(d>p){if(l){if(l[1]>=r)return}else l=[m,n];o=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];o=[m,n]}}else if(s=g-(a=(d-p)/(f-h))*m,a<-1||a>1)if(d>p){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(h<f){if(l){if(l[0]>=i)return}else l=[t,a*t+s];o=[i,a*i+s]}else{if(l){if(l[0]<t)return}else l=[i,a*i+s];o=[t,a*t+s]}return e[0]=l,e[1]=o,!0}function Gy(e,t){var n=e.site,i=t.left,r=t.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function jy(e,t){return t[+(t.left!==e.site)]}function zy(e,t){return t[+(t.left===e.site)]}hy.prototype={areaStart:zb,areaEnd:zb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gy(this,this._t0,my(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gy(this,my(this,n=fy(this,e,t)),n);break;default:gy(this,this._t0,n=fy(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(by.prototype=Object.create(vy.prototype)).point=function(e,t){vy.prototype.point.call(this,t,e)},yy.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}},wy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=_y(e),r=_y(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},xy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}},My.prototype={constructor:My,insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Fy(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(Ry(this,n),n=(e=n).U),n.C=!1,i.C=!0,Ny(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(Ny(this,n),n=(e=n).U),n.C=!1,i.C=!0,Ry(this,i)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,o=e.L,a=e.R;if(n=o?a?Fy(a):o:a,r?r.L===e?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=a,a.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,Ry(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ny(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,Ry(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Ny(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Ry(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Ny(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}};var qy,Yy=[];function Wy(){Ly(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ky(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,c=i[1]-s,u=o[0]-a,d=o[1]-s,h=2*(l*d-c*u);if(!(h>=-uw)){var p=l*l+c*c,f=u*u+d*d,m=(d*p-c*f)/h,g=(l*f-u*p)/h,v=Yy.pop()||new Wy;v.arc=e,v.site=r,v.x=m+a,v.y=(v.cy=g+s)+Math.sqrt(m*m+g*g),e.circle=v;for(var b=null,y=sw._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}sw.insert(b,v),b||(qy=v)}}}}function Xy(e){var t=e.circle;t&&(t.P||(qy=t.N),sw.remove(t),Yy.push(t),Ly(t),e.circle=null)}var Zy=[];function Jy(){Ly(this),this.edge=this.site=this.circle=null}function Qy(e){var t=Zy.pop()||new Jy;return t.site=e,t}function ew(e){Xy(e),ow.remove(e),Zy.push(e),Ly(e)}function tw(e){var t=e.circle,n=t.x,i=t.cy,r=[n,i],o=e.P,a=e.N,s=[e];ew(e);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<cw&&Math.abs(i-l.circle.cy)<cw;)o=l.P,s.unshift(l),ew(l),l=o;s.unshift(l),Xy(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<cw&&Math.abs(i-c.circle.cy)<cw;)a=c.N,s.push(c),ew(c),c=a;s.push(c),Xy(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],By(c.edge,l.site,c.site,r);l=s[0],(c=s[d-1]).edge=Uy(l.site,c.site,null,r),Ky(l),Ky(c)}function nw(e){for(var t,n,i,r,o=e[0],a=e[1],s=ow._;s;)if((i=iw(s,a)-o)>cw)s=s.L;else{if(!((r=o-rw(s,a))>cw)){i>-cw?(t=s.P,n=s):r>-cw?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}!function(e){aw[e.index]={site:e,halfedges:[]}}(e);var l=Qy(e);if(ow.insert(t,l),t||n){if(t===n)return Xy(t),n=Qy(t.site),ow.insert(l,n),l.edge=n.edge=Uy(t.site,l.site),Ky(t),void Ky(n);if(n){Xy(t),Xy(n);var c=t.site,u=c[0],d=c[1],h=e[0]-u,p=e[1]-d,f=n.site,m=f[0]-u,g=f[1]-d,v=2*(h*g-p*m),b=h*h+p*p,y=m*m+g*g,w=[(g*b-p*y)/v+u,(h*y-m*b)/v+d];By(n.edge,c,f,w),l.edge=Uy(c,e,null,w),n.edge=Uy(e,f,null,w),Ky(t),Ky(n)}else l.edge=Uy(t.site,l.site)}}function iw(e,t){var n=e.site,i=n[0],r=n[1],o=r-t;if(!o)return i;var a=e.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],c=l-t;if(!c)return s;var u=s-i,d=1/o-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+r-o/2)))/d+i:(i+s)/2}function rw(e,t){var n=e.N;if(n)return iw(n,t);var i=e.site;return i[1]===t?i[0]:1/0}var ow,aw,sw,lw,cw=1e-6,uw=1e-12;function dw(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function hw(e,t){return t[1]-e[1]||t[0]-e[0]}function pw(e,t){var n,i,r,o=e.sort(hw).pop();for(lw=[],aw=new Array(e.length),ow=new My,sw=new My;;)if(r=qy,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(nw(o),n=o[0],i=o[1]),o=e.pop();else{if(!r)break;tw(r.arc)}if(function(){for(var e,t,n,i,r=0,o=aw.length;r<o;++r)if((e=aw[r])&&(i=(t=e.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=Gy(e,lw[t[n]]);for(a.sort(function(e,t){return s[t]-s[e]}),n=0;n<i;++n)s[n]=t[a[n]];for(n=0;n<i;++n)t[n]=s[n]}}(),t){var a=+t[0][0],s=+t[0][1],l=+t[1][0],c=+t[1][1];!function(e,t,n,i){for(var r,o=lw.length;o--;)Hy(r=lw[o],e,t,n,i)&&$y(r,e,t,n,i)&&(Math.abs(r[0][0]-r[1][0])>cw||Math.abs(r[0][1]-r[1][1])>cw)||delete lw[o]}(a,s,l,c),function(e,t,n,i){var r,o,a,s,l,c,u,d,h,p,f,m,g=aw.length,v=!0;for(r=0;r<g;++r)if(o=aw[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)lw[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)f=(p=zy(o,lw[l[s]]))[0],m=p[1],d=(u=jy(o,lw[l[++s%c]]))[0],h=u[1],(Math.abs(f-d)>cw||Math.abs(m-h)>cw)&&(l.splice(s,0,lw.push(Vy(a,p,Math.abs(f-e)<cw&&i-m>cw?[e,Math.abs(d-e)<cw?h:i]:Math.abs(m-i)<cw&&n-f>cw?[Math.abs(h-i)<cw?d:n,i]:Math.abs(f-n)<cw&&m-t>cw?[n,Math.abs(d-n)<cw?h:t]:Math.abs(m-t)<cw&&f-e>cw?[Math.abs(h-t)<cw?d:e,t]:null))-1),++c);c&&(v=!1)}if(v){var b,y,w,_=1/0;for(r=0,v=null;r<g;++r)(o=aw[r])&&(w=(b=(a=o.site)[0]-e)*b+(y=a[1]-t)*y)<_&&(_=w,v=o);if(v){var x=[e,t],S=[e,i],T=[n,i],A=[n,t];v.halfedges.push(lw.push(Vy(a=v.site,x,S))-1,lw.push(Vy(a,S,T))-1,lw.push(Vy(a,T,A))-1,lw.push(Vy(a,A,x))-1)}}for(r=0;r<g;++r)(o=aw[r])&&(o.halfedges.length||delete aw[r])}(a,s,l,c)}this.edges=lw,this.cells=aw,ow=sw=lw=aw=null}function fw(e){return function(){return e}}function mw(e,t,n){this.target=e,this.type=t,this.transform=n}function gw(e,t,n){this.k=e,this.x=t,this.y=n}pw.prototype={constructor:pw,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return jy(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var r,o,a,s=n.site,l=-1,c=t[r[o-1]],u=c.left===s?c.right:c.left;++l<o;)a=u,u=(c=t[r[l]]).left===s?c.right:c.left,a&&u&&i<a.index&&i<u.index&&dw(s,a,u)<0&&e.push([s.data,a.data,u.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var i,r,o=this,a=o._found||0,s=o.cells.length;!(r=o.cells[a]);)if(++a>=s)return null;var l=e-r.site[0],c=t-r.site[1],u=l*l+c*c;do{r=o.cells[i=a],a=null,r.halfedges.forEach(function(n){var i=o.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var l=e-s[0],c=t-s[1],d=l*l+c*c;d<u&&(u=d,a=s.index)}})}while(null!==a);return o._found=i,null==n||u<=n*n?r.site:null}},gw.prototype={constructor:gw,scale:function(e){return 1===e?this:new gw(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new gw(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vw=new gw(1,0,0);function bw(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vw;return e.__zoom}function yw(){e.event.stopImmediatePropagation()}function ww(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function _w(){return!e.event.ctrlKey&&!e.event.button}function xw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Sw(){return this.__zoom||vw}function Tw(){return-e.event.deltaY*(1===e.event.deltaMode?.05:e.event.deltaMode?1:.002)}function Aw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cw(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}bw.prototype=gw.prototype,e.FormatSpecifier=is,e.active=function(e,t){var n,i,r=e.__transition;if(r)for(i in t=null==t?null:t+"",r)if((n=r[i]).state>1&&n.name===t)return new ar([[e]],Ur,t,+i);return null},e.arc=function(){var e=Qv,t=eb,n=Bv(0),i=null,r=tb,o=nb,a=ib,s=null;function l(){var l,c,u=+e.apply(this,arguments),d=+t.apply(this,arguments),h=r.apply(this,arguments)-Xv,p=o.apply(this,arguments)-Xv,f=$v(p-h),m=p>h;if(s||(s=l=So()),d<u&&(c=d,d=u,u=c),d>Wv)if(f>Zv-Wv)s.moveTo(d*Gv(h),d*qv(h)),s.arc(0,0,d,h,p,!m),u>Wv&&(s.moveTo(u*Gv(p),u*qv(p)),s.arc(0,0,u,p,h,m));else{var g,v,b=h,y=p,w=h,_=p,x=f,S=f,T=a.apply(this,arguments)/2,A=T>Wv&&(i?+i.apply(this,arguments):Yv(u*u+d*d)),C=zv($v(d-u)/2,+n.apply(this,arguments)),E=C,k=C;if(A>Wv){var I=Jv(A/u*qv(T)),P=Jv(A/d*qv(T));(x-=2*I)>Wv?(w+=I*=m?1:-1,_-=I):(x=0,w=_=(h+p)/2),(S-=2*P)>Wv?(b+=P*=m?1:-1,y-=P):(S=0,b=y=(h+p)/2)}var D=d*Gv(b),O=d*qv(b),M=u*Gv(_),L=u*qv(_);if(C>Wv){var R,N=d*Gv(y),F=d*qv(y),U=u*Gv(w),V=u*qv(w);if(f<Kv&&(R=function(e,t,n,i,r,o,a,s){var l=n-e,c=i-t,u=a-r,d=s-o,h=d*l-u*c;if(!(h*h<Wv))return[e+(h=(u*(t-o)-d*(e-r))/h)*l,t+h*c]}(D,O,U,V,N,F,M,L))){var B=D-R[0],$=O-R[1],H=N-R[0],G=F-R[1],j=1/qv(function(e){return e>1?0:e<-1?Kv:Math.acos(e)}((B*H+$*G)/(Yv(B*B+$*$)*Yv(H*H+G*G)))/2),z=Yv(R[0]*R[0]+R[1]*R[1]);E=zv(C,(u-z)/(j-1)),k=zv(C,(d-z)/(j+1))}}S>Wv?k>Wv?(g=rb(U,V,D,O,d,k,m),v=rb(N,F,M,L,d,k,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),k<C?s.arc(g.cx,g.cy,k,Hv(g.y01,g.x01),Hv(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,k,Hv(g.y01,g.x01),Hv(g.y11,g.x11),!m),s.arc(0,0,d,Hv(g.cy+g.y11,g.cx+g.x11),Hv(v.cy+v.y11,v.cx+v.x11),!m),s.arc(v.cx,v.cy,k,Hv(v.y11,v.x11),Hv(v.y01,v.x01),!m))):(s.moveTo(D,O),s.arc(0,0,d,b,y,!m)):s.moveTo(D,O),u>Wv&&x>Wv?E>Wv?(g=rb(M,L,N,F,u,-E,m),v=rb(D,O,U,V,u,-E,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),E<C?s.arc(g.cx,g.cy,E,Hv(g.y01,g.x01),Hv(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,E,Hv(g.y01,g.x01),Hv(g.y11,g.x11),!m),s.arc(0,0,u,Hv(g.cy+g.y11,g.cx+g.x11),Hv(v.cy+v.y11,v.cx+v.x11),m),s.arc(v.cx,v.cy,E,Hv(v.y11,v.x11),Hv(v.y01,v.x01),!m))):s.arc(0,0,u,_,w,m):s.lineTo(M,L)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-Kv/2;return[Gv(i)*n,qv(i)*n]},l.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Bv(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Bv(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Bv(+e),l):n},l.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Bv(+e),l):i},l.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:Bv(+e),l):r},l.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Bv(+e),l):o},l.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:Bv(+e),l):a},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l},e.area=ub,e.areaRadial=bb,e.ascending=t,e.autoType=function(e){for(var t in e){var n,i,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;xa&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;e[t]=r}return e},e.axisBottom=function(e){return U(3,e)},e.axisLeft=function(e){return U(4,e)},e.axisRight=function(e){return U(2,e)},e.axisTop=function(e){return U(1,e)},e.bisect=r,e.bisectLeft=o,e.bisectRight=r,e.bisector=n,e.blob=function(e,t){return fetch(e,t).then(Sa)},e.brush=function(){return lo(Zr)},e.brushSelection=function(e){var t=e.__brush;return t?t.dim.output(t.selection):null},e.brushX=function(){return lo(Kr)},e.brushY=function(){return lo(Xr)},e.buffer=function(e,t){return fetch(e,t).then(Ta)},e.chord=function(){var e=0,t=null,n=null,i=null;function r(r){var o,a,s,l,c,u,d=r.length,h=[],p=g(d),f=[],m=[],v=m.groups=new Array(d),b=new Array(d*d);for(o=0,c=-1;++c<d;){for(a=0,u=-1;++u<d;)a+=r[c][u];h.push(a),f.push(g(d)),o+=a}for(t&&p.sort(function(e,n){return t(h[e],h[n])}),n&&f.forEach(function(e,t){e.sort(function(e,i){return n(r[t][e],r[t][i])})}),l=(o=mo(0,fo-e*d)/o)?e:fo/d,a=0,c=-1;++c<d;){for(s=a,u=-1;++u<d;){var y=p[c],w=f[y][u],_=r[y][w],x=a,S=a+=_*o;b[w*d+y]={index:y,subindex:w,startAngle:x,endAngle:S,value:_}}v[y]={index:y,startAngle:s,endAngle:a,value:h[y]},a+=l}for(c=-1;++c<d;)for(u=c-1;++u<d;){var T=b[u*d+c],A=b[c*d+u];(T.value||A.value)&&m.push(T.value<A.value?{source:A,target:T}:{source:T,target:A})}return i?m.sort(i):m}return r.padAngle=function(t){return arguments.length?(e=mo(0,t),r):e},r.sortGroups=function(e){return arguments.length?(t=e,r):t},r.sortSubgroups=function(e){return arguments.length?(n=e,r):n},r.sortChords=function(e){return arguments.length?(null==e?i=null:(t=e,i=function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)})._=e,r):i&&i._;var t},r},e.clientPoint=it,e.cluster=function(){var e=$d,t=1,n=1,i=!1;function r(r){var o,a=0;r.eachAfter(function(t){var n=t.children;n?(t.x=function(e){return e.reduce(Hd,0)/e.length}(n),t.y=function(e){return 1+e.reduce(Gd,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)});var s=function(e){for(var t;t=e.children;)e=t[0];return e}(r),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(r),c=s.x-e(s,l)/2,u=l.x+e(l,s)/2;return r.eachAfter(i?function(e){e.x=(e.x-r.x)*t,e.y=(r.y-e.y)*n}:function(e){e.x=(e.x-c)/(u-c)*t,e.y=(1-(r.y?e.y/r.y:1))*n})}return r.separation=function(t){return arguments.length?(e=t,r):e},r.size=function(e){return arguments.length?(i=!1,t=+e[0],n=+e[1],r):i?null:[t,n]},r.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],n=+e[1],r):i?[t,n]:null},r},e.color=Lt,e.contourDensity=function(){var e=Xo,t=Zo,n=Jo,i=960,r=500,o=20,a=2,s=3*o,l=i+2*s>>a,c=r+2*s>>a,u=$o(20);function d(i){var r=new Float32Array(l*c),d=new Float32Array(l*c);i.forEach(function(i,o,u){var d=+e(i,o,u)+s>>a,h=+t(i,o,u)+s>>a,p=+n(i,o,u);d>=0&&d<l&&h>=0&&h<c&&(r[d+h*l]+=p)}),Wo({width:l,height:c,data:r},{width:l,height:c,data:d},o>>a),Ko({width:l,height:c,data:d},{width:l,height:c,data:r},o>>a),Wo({width:l,height:c,data:r},{width:l,height:c,data:d},o>>a),Ko({width:l,height:c,data:d},{width:l,height:c,data:r},o>>a),Wo({width:l,height:c,data:r},{width:l,height:c,data:d},o>>a),Ko({width:l,height:c,data:d},{width:l,height:c,data:r},o>>a);var p=u(r);if(!Array.isArray(p)){var f=A(r);p=x(0,f,p),(p=g(0,Math.floor(f/p)*p,p)).shift()}return Yo().thresholds(p).size([l,c])(r).map(h)}function h(e){return e.value*=Math.pow(2,-2*a),e.coordinates.forEach(p),e}function p(e){e.forEach(f)}function f(e){e.forEach(m)}function m(e){e[0]=e[0]*Math.pow(2,a)-s,e[1]=e[1]*Math.pow(2,a)-s}function v(){return l=i+2*(s=3*o)>>a,c=r+2*s>>a,d}return d.x=function(t){return arguments.length?(e="function"==typeof t?t:$o(+t),d):e},d.y=function(e){return arguments.length?(t="function"==typeof e?e:$o(+e),d):t},d.weight=function(e){return arguments.length?(n="function"==typeof e?e:$o(+e),d):n},d.size=function(e){if(!arguments.length)return[i,r];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return i=t,r=n,v()},d.cellSize=function(e){if(!arguments.length)return 1<<a;if(!((e=+e)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(e)/Math.LN2),v()},d.thresholds=function(e){return arguments.length?(u="function"==typeof e?e:Array.isArray(e)?$o(Vo.call(e)):$o(e),d):u},d.bandwidth=function(e){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*e*e+1)-1)/2),v()},d},e.contours=Yo,e.create=function(e){return Je(K(e).call(document.documentElement))},e.creator=K,e.cross=function(e,t,n){var i,r,o,s,l=e.length,c=t.length,u=new Array(l*c);for(null==n&&(n=a),i=o=0;i<l;++i)for(s=e[i],r=0;r<c;++r,++o)u[o]=n(s,t[r]);return u},e.csv=ka,e.csvFormat=ca,e.csvFormatBody=ua,e.csvFormatRow=ha,e.csvFormatRows=da,e.csvFormatValue=pa,e.csvParse=sa,e.csvParseRows=la,e.cubehelix=xn,e.curveBasis=function(e){return new Yb(e)},e.curveBasisClosed=function(e){return new Wb(e)},e.curveBasisOpen=function(e){return new Kb(e)},e.curveBundle=Zb,e.curveCardinal=ey,e.curveCardinalClosed=ny,e.curveCardinalOpen=ry,e.curveCatmullRom=sy,e.curveCatmullRomClosed=cy,e.curveCatmullRomOpen=dy,e.curveLinear=ab,e.curveLinearClosed=function(e){return new hy(e)},e.curveMonotoneX=function(e){return new vy(e)},e.curveMonotoneY=function(e){return new by(e)},e.curveNatural=function(e){return new wy(e)},e.curveStep=function(e){return new xy(e,.5)},e.curveStepAfter=function(e){return new xy(e,1)},e.curveStepBefore=function(e){return new xy(e,0)},e.customEvent=ze,e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.deviation=c,e.dispatch=B,e.drag=function(){var t,n,i,r,o=ht,a=pt,s=ft,l=mt,c={},u=B("start","drag","end"),d=0,h=0;function p(e){e.on("mousedown.drag",f).filter(l).on("touchstart.drag",v).on("touchmove.drag",b).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(!r&&o.apply(this,arguments)){var s=w("mouse",a.apply(this,arguments),rt,this,arguments);s&&(Je(e.event.view).on("mousemove.drag",m,!0).on("mouseup.drag",g,!0),lt(e.event.view),at(),i=!1,t=e.event.clientX,n=e.event.clientY,s("start"))}}function m(){if(st(),!i){var r=e.event.clientX-t,o=e.event.clientY-n;i=r*r+o*o>h}c.mouse("drag")}function g(){Je(e.event.view).on("mousemove.drag mouseup.drag",null),ct(e.event.view,i),st(),c.mouse("end")}function v(){if(o.apply(this,arguments)){var t,n,i=e.event.changedTouches,r=a.apply(this,arguments),s=i.length;for(t=0;t<s;++t)(n=w(i[t].identifier,r,ot,this,arguments))&&(at(),n("start"))}}function b(){var t,n,i=e.event.changedTouches,r=i.length;for(t=0;t<r;++t)(n=c[i[t].identifier])&&(st(),n("drag"))}function y(){var t,n,i=e.event.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<o;++t)(n=c[i[t].identifier])&&(at(),n("end"))}function w(t,n,i,r,o){var a,l,h,f=i(n,t),m=u.copy();if(ze(new dt(p,"beforestart",a,t,d,f[0],f[1],0,0,m),function(){return null!=(e.event.subject=a=s.apply(r,o))&&(l=a.x-f[0]||0,h=a.y-f[1]||0,!0)}))return function e(s){var u,g=f;switch(s){case"start":c[t]=e,u=d++;break;case"end":delete c[t],--d;case"drag":f=i(n,t),u=d}ze(new dt(p,s,a,t,u,f[0]+l,f[1]+h,f[0]-g[0],f[1]-g[1],m),m.apply,m,[s,r,o])}}return p.filter=function(e){return arguments.length?(o="function"==typeof e?e:ut(!!e),p):o},p.container=function(e){return arguments.length?(a="function"==typeof e?e:ut(e),p):a},p.subject=function(e){return arguments.length?(s="function"==typeof e?e:ut(e),p):s},p.touchable=function(e){return arguments.length?(l="function"==typeof e?e:ut(!!e),p):l},p.on=function(){var e=u.on.apply(u,arguments);return e===u?p:e},p.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,p):Math.sqrt(h)},p},e.dragDisable=lt,e.dragEnable=ct,e.dsv=function(e,t,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=oa(e);return Ca(t,n).then(function(e){return r.parse(e,i)})},e.dsvFormat=oa,e.easeBack=Dr,e.easeBackIn=Ir,e.easeBackInOut=Dr,e.easeBackOut=Pr,e.easeBounce=Er,e.easeBounceIn=function(e){return 1-Er(1-e)},e.easeBounceInOut=function(e){return((e*=2)<=1?1-Er(1-e):Er(e-1)+1)/2},e.easeBounceOut=Er,e.easeCircle=yr,e.easeCircleIn=function(e){return 1-Math.sqrt(1-e*e)},e.easeCircleInOut=yr,e.easeCircleOut=function(e){return Math.sqrt(1- --e*e)},e.easeCubic=dr,e.easeCubicIn=function(e){return e*e*e},e.easeCubicInOut=dr,e.easeCubicOut=function(e){return--e*e*e+1},e.easeElastic=Lr,e.easeElasticIn=Mr,e.easeElasticInOut=Rr,e.easeElasticOut=Lr,e.easeExp=br,e.easeExpIn=function(e){return Math.pow(2,10*e-10)},e.easeExpInOut=br,e.easeExpOut=function(e){return 1-Math.pow(2,-10*e)},e.easeLinear=function(e){return+e},e.easePoly=fr,e.easePolyIn=hr,e.easePolyInOut=fr,e.easePolyOut=pr,e.easeQuad=ur,e.easeQuadIn=function(e){return e*e},e.easeQuadInOut=ur,e.easeQuadOut=function(e){return e*(2-e)},e.easeSin=vr,e.easeSinIn=function(e){return 1-Math.cos(e*gr)},e.easeSinInOut=vr,e.easeSinOut=function(e){return Math.sin(e*gr)},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.extent=u,e.forceCenter=function(e,t){var n;function i(){var i,r,o=n.length,a=0,s=0;for(i=0;i<o;++i)a+=(r=n[i]).x,s+=r.y;for(a=a/o-e,s=s/o-t,i=0;i<o;++i)(r=n[i]).x-=a,r.y-=s}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i},e.forceCollide=function(e){var t,n,i=1,r=1;function o(){for(var e,o,s,l,c,u,d,h=t.length,p=0;p<r;++p)for(o=$a(t,za,qa).visitAfter(a),e=0;e<h;++e)s=t[e],u=n[s.index],d=u*u,l=s.x+s.vx,c=s.y+s.vy,o.visit(f);function f(e,t,n,r,o){var a=e.data,h=e.r,p=u+h;if(!a)return t>l+p||r<l-p||n>c+p||o<c-p;if(a.index>s.index){var f=l-a.x-a.vx,m=c-a.y-a.vy,g=f*f+m*m;g<p*p&&(0===f&&(g+=(f=Na())*f),0===m&&(g+=(m=Na())*m),g=(p-(g=Math.sqrt(g)))/g*i,s.vx+=(f*=g)*(p=(h*=h)/(d+h)),s.vy+=(m*=g)*p,a.vx-=f*(p=1-p),a.vy-=m*p)}}}function a(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var i,r,o=t.length;for(n=new Array(o),i=0;i<o;++i)r=t[i],n[r.index]=+e(r,i,t)}}return"function"!=typeof e&&(e=Ra(null==e?1:+e)),o.initialize=function(e){t=e,s()},o.iterations=function(e){return arguments.length?(r=+e,o):r},o.strength=function(e){return arguments.length?(i=+e,o):i},o.radius=function(t){return arguments.length?(e="function"==typeof t?t:Ra(+t),s(),o):e},o},e.forceLink=function(e){var t,n,i,r,o,a=Ya,s=function(e){return 1/Math.min(r[e.source.index],r[e.target.index])},l=Ra(30),c=1;function u(i){for(var r=0,a=e.length;r<c;++r)for(var s,l,u,d,h,p,f,m=0;m<a;++m)l=(s=e[m]).source,d=(u=s.target).x+u.vx-l.x-l.vx||Na(),h=u.y+u.vy-l.y-l.vy||Na(),d*=p=((p=Math.sqrt(d*d+h*h))-n[m])/p*i*t[m],h*=p,u.vx-=d*(f=o[m]),u.vy-=h*f,l.vx+=d*(f=1-f),l.vy+=h*f}function d(){if(i){var s,l,c=i.length,u=e.length,d=Do(i,a);for(s=0,r=new Array(c);s<u;++s)(l=e[s]).index=s,"object"!=typeof l.source&&(l.source=Wa(d,l.source)),"object"!=typeof l.target&&(l.target=Wa(d,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(s=0,o=new Array(u);s<u;++s)l=e[s],o[s]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);t=new Array(u),h(),n=new Array(u),p()}}function h(){if(i)for(var n=0,r=e.length;n<r;++n)t[n]=+s(e[n],n,e)}function p(){if(i)for(var t=0,r=e.length;t<r;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),u.initialize=function(e){i=e,d()},u.links=function(t){return arguments.length?(e=t,d(),u):e},u.id=function(e){return arguments.length?(a=e,u):a},u.iterations=function(e){return arguments.length?(c=+e,u):c},u.strength=function(e){return arguments.length?(s="function"==typeof e?e:Ra(+e),h(),u):s},u.distance=function(e){return arguments.length?(l="function"==typeof e?e:Ra(+e),p(),u):l},u},e.forceManyBody=function(){var e,t,n,i,r=Ra(-30),o=1,a=1/0,s=.81;function l(i){var r,o=e.length,a=$a(e,Ka,Xa).visitAfter(u);for(n=i,r=0;r<o;++r)t=e[r],a.visit(d)}function c(){if(e){var t,n,o=e.length;for(i=new Array(o),t=0;t<o;++t)n=e[t],i[n.index]=+r(n,t,e)}}function u(e){var t,n,r,o,a,s=0,l=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,r+=n*t.x,o+=n*t.y);e.x=r/l,e.y=o/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function d(e,r,l,c){if(!e.value)return!0;var u=e.x-t.x,d=e.y-t.y,h=c-r,p=u*u+d*d;if(h*h/s<p)return p<a&&(0===u&&(p+=(u=Na())*u),0===d&&(p+=(d=Na())*d),p<o&&(p=Math.sqrt(o*p)),t.vx+=u*e.value*n/p,t.vy+=d*e.value*n/p),!0;if(!(e.length||p>=a)){(e.data!==t||e.next)&&(0===u&&(p+=(u=Na())*u),0===d&&(p+=(d=Na())*d),p<o&&(p=Math.sqrt(o*p)));do{e.data!==t&&(h=i[e.data.index]*n/p,t.vx+=u*h,t.vy+=d*h)}while(e=e.next)}}return l.initialize=function(t){e=t,c()},l.strength=function(e){return arguments.length?(r="function"==typeof e?e:Ra(+e),c(),l):r},l.distanceMin=function(e){return arguments.length?(o=e*e,l):Math.sqrt(o)},l.distanceMax=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.theta=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l},e.forceRadial=function(e,t,n){var i,r,o,a=Ra(.1);function s(e){for(var a=0,s=i.length;a<s;++a){var l=i[a],c=l.x-t||1e-6,u=l.y-n||1e-6,d=Math.sqrt(c*c+u*u),h=(o[a]-d)*r[a]*e/d;l.vx+=c*h,l.vy+=u*h}}function l(){if(i){var t,n=i.length;for(r=new Array(n),o=new Array(n),t=0;t<n;++t)o[t]=+e(i[t],t,i),r[t]=isNaN(o[t])?0:+a(i[t],t,i)}}return"function"!=typeof e&&(e=Ra(+e)),null==t&&(t=0),null==n&&(n=0),s.initialize=function(e){i=e,l()},s.strength=function(e){return arguments.length?(a="function"==typeof e?e:Ra(+e),l(),s):a},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:Ra(+t),l(),s):e},s.x=function(e){return arguments.length?(t=+e,s):t},s.y=function(e){return arguments.length?(n=+e,s):n},s},e.forceSimulation=function(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=Do(),l=ki(u),c=B("tick","end");function u(){d(),c.call("tick",t),n<i&&(l.stop(),c.call("end",t))}function d(i){var l,c,u=e.length;void 0===i&&(i=1);for(var d=0;d<i;++d)for(n+=(o-n)*r,s.each(function(e){e(n)}),l=0;l<u;++l)null==(c=e[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return t}function h(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var r=10*Math.sqrt(n),o=n*Za;t.x=r*Math.cos(o),t.y=r*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return l.restart(u),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),s.each(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(i=+e,t):i},alphaDecay:function(e){return arguments.length?(r=+e,t):+r},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},force:function(e,n){return arguments.length>1?(null==n?s.remove(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,i){var r,o,a,s,l,c=0,u=e.length;for(null==i?i=1/0:i*=i,c=0;c<u;++c)(a=(r=t-(s=e[c]).x)*r+(o=n-s.y)*o)<i&&(l=s,i=a);return l},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}},e.forceX=function(e){var t,n,i,r=Ra(.1);function o(e){for(var r,o=0,a=t.length;o<a;++o)(r=t[o]).vx+=(i[o]-r.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+e(t[o],o,t))?0:+r(t[o],o,t)}}return"function"!=typeof e&&(e=Ra(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(r="function"==typeof e?e:Ra(+e),a(),o):r},o.x=function(t){return arguments.length?(e="function"==typeof t?t:Ra(+t),a(),o):e},o},e.forceY=function(e){var t,n,i,r=Ra(.1);function o(e){for(var r,o=0,a=t.length;o<a;++o)(r=t[o]).vy+=(i[o]-r.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+e(t[o],o,t))?0:+r(t[o],o,t)}}return"function"!=typeof e&&(e=Ra(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(r="function"==typeof e?e:Ra(+e),a(),o):r},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Ra(+t),a(),o):e},o},e.formatDefaultLocale=ds,e.formatLocale=us,e.formatSpecifier=ns,e.geoAlbers=yd,e.geoAlbersUsa=function(){var e,t,n,i,r,o,a=yd(),s=bd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=bd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){o=[e,t]}};function u(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(i.point(t,a),o)||(r.point(t,a),o)}function d(){return e=t=null,u}return u.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?s:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:a).invert(e)},u.stream=function(n){return e&&t===n?e:(i=[a.stream(t=n),s.stream(n),l.stream(n)],r=i.length,e={point:function(e,t){for(var n=-1;++n<r;)i[n].point(e,t)},sphere:function(){for(var e=-1;++e<r;)i[e].sphere()},lineStart:function(){for(var e=-1;++e<r;)i[e].lineStart()},lineEnd:function(){for(var e=-1;++e<r;)i[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<r;)i[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<r;)i[e].polygonEnd()}});var i,r},u.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),l.precision(e),d()):a.precision()},u.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),l.scale(e),u.translate(a.translate())):a.scale()},u.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],u=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,u-.238*t],[o+.455*t,u+.238*t]]).stream(c),i=s.translate([o-.307*t,u+.201*t]).clipExtent([[o-.425*t+ys,u+.12*t+ys],[o-.214*t-ys,u+.234*t-ys]]).stream(c),r=l.translate([o-.205*t,u+.212*t]).clipExtent([[o-.214*t+ys,u+.166*t+ys],[o-.115*t-ys,u+.234*t-ys]]).stream(c),d()},u.fitExtent=function(e,t){return od(u,e,t)},u.fitSize=function(e,t){return ad(u,e,t)},u.fitWidth=function(e,t){return sd(u,e,t)},u.fitHeight=function(e,t){return ld(u,e,t)},u.scale(1070)},e.geoArea=function(e){return tl.reset(),Ws(e,nl),2*tl},e.geoAzimuthalEqualArea=function(){return fd(xd).scale(124.75).clipAngle(179.999)},e.geoAzimuthalEqualAreaRaw=xd,e.geoAzimuthalEquidistant=function(){return fd(Sd).scale(79.4188).clipAngle(179.999)},e.geoAzimuthalEquidistantRaw=Sd,e.geoBounds=function(e){var t,n,i,r,o,a,s;if(vl=gl=-(fl=ml=1/0),xl=[],Ws(e,$l),n=xl.length){for(xl.sort(Xl),t=1,o=[i=xl[0]];t<n;++t)Zl(i,(r=xl[t])[0])||Zl(i,r[1])?(Kl(i[0],r[1])>Kl(i[0],i[1])&&(i[1]=r[1]),Kl(r[0],i[1])>Kl(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,t=0,i=o[n=o.length-1];t<=n;i=r,++t)r=o[t],(s=Kl(i[1],r[0]))>a&&(a=s,fl=r[0],gl=i[1])}return xl=Sl=null,fl===1/0||ml===1/0?[[NaN,NaN],[NaN,NaN]]:[[fl,ml],[gl,vl]]},e.geoCentroid=function(e){Tl=Al=Cl=El=kl=Il=Pl=Dl=Ol=Ml=Ll=0,Ws(e,Jl);var t=Ol,n=Ml,i=Ll,r=t*t+n*n+i*i;return r<ws&&(t=Il,n=Pl,i=Dl,Al<ys&&(t=Cl,n=El,i=kl),(r=t*t+n*n+i*i)<ws)?[NaN,NaN]:[Is(n,t)*As,Bs(i/Fs(r))*As]},e.geoCircle=function(){var e,t,n=cc([0,0]),i=cc(90),r=cc(6),o={point:function(n,i){e.push(n=t(n,i)),n[0]*=As,n[1]*=As}};function a(){var a=n.apply(this,arguments),s=i.apply(this,arguments)*Cs,l=r.apply(this,arguments)*Cs;return e=[],t=hc(-a[0]*Cs,-a[1]*Cs,0).invert,vc(o,s,l,1),a={type:"Polygon",coordinates:[e]},e=t=null,a}return a.center=function(e){return arguments.length?(n="function"==typeof e?e:cc([+e[0],+e[1]]),a):n},a.radius=function(e){return arguments.length?(i="function"==typeof e?e:cc(+e),a):i},a.precision=function(e){return arguments.length?(r="function"==typeof e?e:cc(+e),a):r},a},e.geoClipAntimeridian=Pc,e.geoClipCircle=Dc,e.geoClipExtent=function(){var e,t,n,i=0,r=0,o=960,a=500;return n={stream:function(n){return e&&t===n?e:e=Lc(i,r,o,a)(t=n)},extent:function(s){return arguments.length?(i=+s[0][0],r=+s[0][1],o=+s[1][0],a=+s[1][1],e=t=null,n):[[i,r],[o,a]]}}},e.geoClipRectangle=Lc,e.geoConicConformal=function(){return gd(Ed).scale(109.5).parallels([30,30])},e.geoConicConformalRaw=Ed,e.geoConicEqualArea=bd,e.geoConicEqualAreaRaw=vd,e.geoConicEquidistant=function(){return gd(Id).scale(131.154).center([0,13.9389])},e.geoConicEquidistantRaw=Id,e.geoContains=function(e,t){return(e&&Yc.hasOwnProperty(e.type)?Yc[e.type]:Kc)(e,t)},e.geoDistance=qc,e.geoEqualEarth=function(){return fd(Rd).scale(177.158)},e.geoEqualEarthRaw=Rd,e.geoEquirectangular=function(){return fd(kd).scale(152.63)},e.geoEquirectangularRaw=kd,e.geoGnomonic=function(){return fd(Nd).scale(144.049).clipAngle(60)},e.geoGnomonicRaw=Nd,e.geoGraticule=iu,e.geoGraticule10=function(){return iu()()},e.geoIdentity=function(){var e,t,n,i,r,o,a,s=1,l=0,c=0,u=1,d=1,h=0,p=null,f=1,m=1,g=nd({point:function(e,t){var n=y([e,t]);this.stream.point(n[0],n[1])}}),v=ru;function b(){return f=s*u,m=s*d,o=a=null,y}function y(n){var i=n[0]*f,r=n[1]*m;if(h){var o=r*e-i*t;i=i*e+r*t,r=o}return[i+l,r+c]}return y.invert=function(n){var i=n[0]-l,r=n[1]-c;if(h){var o=r*e+i*t;i=i*e-r*t,r=o}return[i/f,r/m]},y.stream=function(e){return o&&a===e?o:o=g(v(a=e))},y.postclip=function(e){return arguments.length?(v=e,p=n=i=r=null,b()):v},y.clipExtent=function(e){return arguments.length?(v=null==e?(p=n=i=r=null,ru):Lc(p=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),b()):null==p?null:[[p,n],[i,r]]},y.scale=function(e){return arguments.length?(s=+e,b()):s},y.translate=function(e){return arguments.length?(l=+e[0],c=+e[1],b()):[l,c]},y.angle=function(n){return arguments.length?(t=Rs(h=n%360*Cs),e=Ps(h),b()):h*As},y.reflectX=function(e){return arguments.length?(u=e?-1:1,b()):u<0},y.reflectY=function(e){return arguments.length?(d=e?-1:1,b()):d<0},y.fitExtent=function(e,t){return od(y,e,t)},y.fitSize=function(e,t){return ad(y,e,t)},y.fitWidth=function(e,t){return sd(y,e,t)},y.fitHeight=function(e,t){return ld(y,e,t)},y},e.geoInterpolate=function(e,t){var n=e[0]*Cs,i=e[1]*Cs,r=t[0]*Cs,o=t[1]*Cs,a=Ps(i),s=Rs(i),l=Ps(o),c=Rs(o),u=a*Ps(n),d=a*Rs(n),h=l*Ps(r),p=l*Rs(r),f=2*Bs(Fs($s(o-i)+a*l*$s(r-n))),m=Rs(f),g=f?function(e){var t=Rs(e*=f)/m,n=Rs(f-e)/m,i=n*u+t*h,r=n*d+t*p,o=n*s+t*c;return[Is(r,i)*As,Is(o,Fs(i*i+r*r))*As]}:function(){return[n*As,i*As]};return g.distance=f,g},e.geoLength=Gc,e.geoMercator=function(){return Ad(Td).scale(961/Ts)},e.geoMercatorRaw=Td,e.geoNaturalEarth1=function(){return fd(Fd).scale(175.295)},e.geoNaturalEarth1Raw=Fd,e.geoOrthographic=function(){return fd(Ud).scale(249.5).clipAngle(90.000001)},e.geoOrthographicRaw=Ud,e.geoPath=function(e,t){var n,i,r=4.5;function o(e){return e&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),Ws(e,n(i))),i.result()}return o.area=function(e){return Ws(e,n(du)),du.result()},o.measure=function(e){return Ws(e,n(Zu)),Zu.result()},o.bounds=function(e){return Ws(e,n(wu)),wu.result()},o.centroid=function(e){return Ws(e,n(Lu)),Lu.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,ru):(e=t).stream,o):e},o.context=function(e){return arguments.length?(i=null==e?(t=null,new ed):new ju(t=e),"function"!=typeof r&&i.pointRadius(r),o):t},o.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:(i.pointRadius(+e),+e),o):r},o.projection(e).context(t)},e.geoProjection=fd,e.geoProjectionMutator=md,e.geoRotation=gc,e.geoStereographic=function(){return fd(Vd).scale(250).clipAngle(142)},e.geoStereographicRaw=Vd,e.geoStream=Ws,e.geoTransform=function(e){return{stream:nd(e)}},e.geoTransverseMercator=function(){var e=Ad(Bd),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)},e.geoTransverseMercatorRaw=Bd,e.gray=function(e,t){return new on(e,0,0,null==t?1:t)},e.hcl=dn,e.hierarchy=zd,e.histogram=function(){var e=m,t=u,n=S;function i(i){var o,a,s=i.length,l=new Array(s);for(o=0;o<s;++o)l[o]=e(i[o],o,i);var c=t(l),u=c[0],d=c[1],h=n(l,u,d);Array.isArray(h)||(h=x(u,d,h),h=g(Math.ceil(u/h)*h,d,h));for(var p=h.length;h[0]<=u;)h.shift(),--p;for(;h[p-1]>d;)h.pop(),--p;var f,m=new Array(p+1);for(o=0;o<=p;++o)(f=m[o]=[]).x0=o>0?h[o-1]:u,f.x1=o<p?h[o]:d;for(o=0;o<s;++o)u<=(a=l[o])&&a<=d&&m[r(h,a,0,p)].push(i[o]);return m}return i.value=function(t){return arguments.length?(e="function"==typeof t?t:f(t),i):e},i.domain=function(e){return arguments.length?(t="function"==typeof e?e:f([e[0],e[1]]),i):t},i.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?f(h.call(e)):f(e),i):n},i},e.hsl=zt,e.html=Ma,e.image=function(e,t){return new Promise(function(n,i){var r=new Image;for(var o in t)r[o]=t[o];r.onerror=i,r.onload=function(){n(r)},r.src=e})},e.interpolate=zn,e.interpolateArray=function(e,t){return(Fn(t)?Nn:Un)(e,t)},e.interpolateBasis=An,e.interpolateBasisClosed=Cn,e.interpolateBlues=vv,e.interpolateBrBG=Ig,e.interpolateBuGn=Yg,e.interpolateBuPu=Kg,e.interpolateCividis=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"},e.interpolateCool=Pv,e.interpolateCubehelix=pi,e.interpolateCubehelixDefault=kv,e.interpolateCubehelixLong=fi,e.interpolateDate=Vn,e.interpolateDiscrete=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},e.interpolateGnBu=Zg,e.interpolateGreens=yv,e.interpolateGreys=_v,e.interpolateHcl=ui,e.interpolateHclLong=di,e.interpolateHsl=si,e.interpolateHslLong=li,e.interpolateHue=function(e,t){var n=In(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},e.interpolateInferno=Uv,e.interpolateLab=function(e,t){var n=Dn((e=rn(e)).l,(t=rn(t)).l),i=Dn(e.a,t.a),r=Dn(e.b,t.b),o=Dn(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=r(t),e.opacity=o(t),e+""}},e.interpolateMagma=Fv,e.interpolateNumber=Bn,e.interpolateNumberArray=Nn,e.interpolateObject=$n,e.interpolateOrRd=Qg,e.interpolateOranges=Ev,e.interpolatePRGn=Dg,e.interpolatePiYG=Mg,e.interpolatePlasma=Vv,e.interpolatePuBu=iv,e.interpolatePuBuGn=tv,e.interpolatePuOr=Rg,e.interpolatePuRd=ov,e.interpolatePurples=Sv,e.interpolateRainbow=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Dv.h=360*e-100,Dv.s=1.5-1.5*t,Dv.l=.8-.9*t,Dv+""},e.interpolateRdBu=Fg,e.interpolateRdGy=Vg,e.interpolateRdPu=sv,e.interpolateRdYlBu=$g,e.interpolateRdYlGn=Gg,e.interpolateReds=Av,e.interpolateRgb=On,e.interpolateRgbBasis=Ln,e.interpolateRgbBasisClosed=Rn,e.interpolateRound=qn,e.interpolateSinebow=function(e){var t;return e=(.5-e)*Math.PI,Ov.r=255*(t=Math.sin(e))*t,Ov.g=255*(t=Math.sin(e+Mv))*t,Ov.b=255*(t=Math.sin(e+Lv))*t,Ov+""},e.interpolateSpectral=zg,e.interpolateString=jn,e.interpolateTransformCss=ti,e.interpolateTransformSvg=ni,e.interpolateTurbo=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"},e.interpolateViridis=Nv,e.interpolateWarm=Iv,e.interpolateYlGn=dv,e.interpolateYlGnBu=cv,e.interpolateYlOrBr=pv,e.interpolateYlOrRd=mv,e.interpolateZoom=oi,e.interrupt=Bi,e.interval=function(e,t,n){var i=new Ei,r=t;return null==t?(i.restart(e,t,n),i):(t=+t,n=null==n?Ai():+n,i.restart(function o(a){a+=r,i.restart(o,r+=t,n),e(a)},t,n),i)},e.isoFormat=eg,e.isoParse=tg,e.json=function(e,t){return fetch(e,t).then(Pa)},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.lab=rn,e.lch=function(e,t,n,i){return 1===arguments.length?un(e):new hn(n,t,e,null==i?1:i)},e.line=cb,e.lineRadial=vb,e.linkHorizontal=function(){return Sb(Tb)},e.linkRadial=function(){var e=Sb(Cb);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e},e.linkVertical=function(){return Sb(Ab)},e.local=et,e.map=Do,e.matcher=ee,e.max=A,e.mean=function(e,t){var n,i=e.length,r=i,o=-1,a=0;if(null==t)for(;++o<i;)isNaN(n=s(e[o]))?--r:a+=n;else for(;++o<i;)isNaN(n=s(t(e[o],o,e)))?--r:a+=n;if(r)return a/r},e.median=function(e,n){var i,r=e.length,o=-1,a=[];if(null==n)for(;++o<r;)isNaN(i=s(e[o]))||a.push(i);else for(;++o<r;)isNaN(i=s(n(e[o],o,e)))||a.push(i);return T(a.sort(t),.5)},e.merge=C,e.min=E,e.mouse=rt,e.namespace=q,e.namespaces=z,e.nest=function(){var e,t,n,i=[],r=[];function o(n,r,a,s){if(r>=i.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var l,c,u,d=-1,h=n.length,p=i[r++],f=Do(),m=a();++d<h;)(u=f.get(l=p(c=n[d])+""))?u.push(c):f.set(l,[c]);return f.each(function(e,t){s(m,t,o(e,r,a,s))}),m}function a(e,n){if(++n>i.length)return e;var o,s=r[n-1];return null!=t&&n>=i.length?o=e.entries():(o=[],e.each(function(e,t){o.push({key:t,values:a(e,n)})})),null!=s?o.sort(function(e,t){return s(e.key,t.key)}):o}return n={object:function(e){return o(e,0,Oo,Mo)},map:function(e){return o(e,0,Lo,Ro)},entries:function(e){return a(o(e,0,Lo,Ro),0)},key:function(e){return i.push(e),n},sortKeys:function(e){return r[i.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}},e.now=Ai,e.pack=function(){var e=null,t=1,n=1,i=dh;function r(r){return r.x=t/2,r.y=n/2,e?r.eachBefore(fh(e)).eachAfter(mh(i,.5)).eachBefore(gh(1)):r.eachBefore(fh(ph)).eachAfter(mh(dh,1)).eachAfter(mh(i,r.r/Math.min(t,n))).eachBefore(gh(Math.min(t,n)/(2*r.r))),r}return r.radius=function(t){return arguments.length?(e=null==(n=t)?null:uh(n),r):e;var n},r.size=function(e){return arguments.length?(t=+e[0],n=+e[1],r):[t,n]},r.padding=function(e){return arguments.length?(i="function"==typeof e?e:hh(+e),r):i},r},e.packEnclose=Zd,e.packSiblings=function(e){return ch(e),e},e.pairs=function(e,t){null==t&&(t=a);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return o},e.partition=function(){var e=1,t=1,n=0,i=!1;function r(r){var o=r.height+1;return r.x0=r.y0=n,r.x1=e,r.y1=t/o,r.eachBefore(function(e,t){return function(i){i.children&&bh(i,i.x0,e*(i.depth+1)/t,i.x1,e*(i.depth+2)/t);var r=i.x0,o=i.y0,a=i.x1-n,s=i.y1-n;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),i.x0=r,i.y0=o,i.x1=a,i.y1=s}}(t,o)),i&&r.eachBefore(vh),r}return r.round=function(e){return arguments.length?(i=!!e,r):i},r.size=function(n){return arguments.length?(e=+n[0],t=+n[1],r):[e,t]},r.padding=function(e){return arguments.length?(n=+e,r):n},r},e.path=So,e.permute=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},e.pie=function(){var e=hb,t=db,n=null,i=Bv(0),r=Bv(Zv),o=Bv(0);function a(a){var s,l,c,u,d,h=a.length,p=0,f=new Array(h),m=new Array(h),g=+i.apply(this,arguments),v=Math.min(Zv,Math.max(-Zv,r.apply(this,arguments)-g)),b=Math.min(Math.abs(v)/h,o.apply(this,arguments)),y=b*(v<0?-1:1);for(s=0;s<h;++s)(d=m[f[s]=s]=+e(a[s],s,a))>0&&(p+=d);for(null!=t?f.sort(function(e,n){return t(m[e],m[n])}):null!=n&&f.sort(function(e,t){return n(a[e],a[t])}),s=0,c=p?(v-h*y)/p:0;s<h;++s,g=u)l=f[s],u=g+((d=m[l])>0?d*c:0)+y,m[l]={data:a[l],index:s,value:d,startAngle:g,endAngle:u,padAngle:b};return m}return a.value=function(t){return arguments.length?(e="function"==typeof t?t:Bv(+t),a):e},a.sortValues=function(e){return arguments.length?(t=e,n=null,a):t},a.sort=function(e){return arguments.length?(n=e,t=null,a):n},a.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Bv(+e),a):i},a.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:Bv(+e),a):r},a.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:Bv(+e),a):o},a},e.piecewise=function(e,t){for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return o[t](e-t)}},e.pointRadial=yb,e.polygonArea=function(e){for(var t,n=-1,i=e.length,r=e[i-1],o=0;++n<i;)t=r,r=e[n],o+=t[1]*r[0]-t[0]*r[1];return o/2},e.polygonCentroid=function(e){for(var t,n,i=-1,r=e.length,o=0,a=0,s=e[r-1],l=0;++i<r;)t=s,s=e[i],l+=n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o/(l*=3),a/l]},e.polygonContains=function(e,t){for(var n,i,r=e.length,o=e[r-1],a=t[0],s=t[1],l=o[0],c=o[1],u=!1,d=0;d<r;++d)n=(o=e[d])[0],(i=o[1])>s!=c>s&&a<(l-n)*(s-i)/(c-i)+n&&(u=!u),l=n,c=i;return u},e.polygonHull=function(e){if((n=e.length)<3)return null;var t,n,i=new Array(n),r=new Array(n);for(t=0;t<n;++t)i[t]=[+e[t][0],+e[t][1],t];for(i.sort(Rh),t=0;t<n;++t)r[t]=[i[t][0],-i[t][1]];var o=Nh(i),a=Nh(r),s=a[0]===o[0],l=a[a.length-1]===o[o.length-1],c=[];for(t=o.length-1;t>=0;--t)c.push(e[i[o[t]][2]]);for(t=+s;t<a.length-l;++t)c.push(e[i[a[t]][2]]);return c},e.polygonLength=function(e){for(var t,n,i=-1,r=e.length,o=e[r-1],a=o[0],s=o[1],l=0;++i<r;)t=a,n=s,t-=a=(o=e[i])[0],n-=s=o[1],l+=Math.sqrt(t*t+n*n);return l},e.precisionFixed=hs,e.precisionPrefix=ps,e.precisionRound=fs,e.quadtree=$a,e.quantile=T,e.quantize=function(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n},e.radialArea=bb,e.radialLine=vb,e.randomBates=Hh,e.randomExponential=Gh,e.randomIrwinHall=$h,e.randomLogNormal=Bh,e.randomNormal=Vh,e.randomUniform=Uh,e.range=g,e.rgb=Ut,e.ribbon=function(){var e=To,t=Ao,n=Co,i=Eo,r=ko,o=null;function a(){var a,s=go.call(arguments),l=e.apply(this,s),c=t.apply(this,s),u=+n.apply(this,(s[0]=l,s)),d=i.apply(this,s)-po,h=r.apply(this,s)-po,p=u*co(d),f=u*uo(d),m=+n.apply(this,(s[0]=c,s)),g=i.apply(this,s)-po,v=r.apply(this,s)-po;if(o||(o=a=So()),o.moveTo(p,f),o.arc(0,0,u,d,h),d===g&&h===v||(o.quadraticCurveTo(0,0,m*co(g),m*uo(g)),o.arc(0,0,m,g,v)),o.quadraticCurveTo(0,0,p,f),o.closePath(),a)return o=null,a+""||null}return a.radius=function(e){return arguments.length?(n="function"==typeof e?e:vo(+e),a):n},a.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:vo(+e),a):i},a.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:vo(+e),a):r},a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(e){return arguments.length?(t=e,a):t},a.context=function(e){return arguments.length?(o=null==e?null:e,a):o},a},e.scaleBand=Zh,e.scaleDiverging=function e(){var t=up(fg()(tp));return t.copy=function(){return hg(t,e())},zh.apply(t,arguments)},e.scaleDivergingLog=function e(){var t=bp(fg()).domain([.1,1,10]);return t.copy=function(){return hg(t,e()).base(t.base())},zh.apply(t,arguments)},e.scaleDivergingPow=mg,e.scaleDivergingSqrt=function(){return mg.apply(null,arguments).exponent(.5)},e.scaleDivergingSymlog=function e(){var t=_p(fg());return t.copy=function(){return hg(t,e()).constant(t.constant())},zh.apply(t,arguments)},e.scaleIdentity=function e(t){var n;function i(e){return isNaN(e=+e)?n:e}return i.invert=i,i.domain=i.range=function(e){return arguments.length?(t=Yh.call(e,Qh),i):t.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return e(t).unknown(n)},t=arguments.length?Yh.call(t,Qh):[0,1],up(i)},e.scaleImplicit=Kh,e.scaleLinear=function e(){var t=lp(tp,tp);return t.copy=function(){return ap(t,e())},jh.apply(t,arguments),up(t)},e.scaleLog=function e(){var t=bp(sp()).domain([1,10]);return t.copy=function(){return ap(t,e()).base(t.base())},jh.apply(t,arguments),t},e.scaleOrdinal=Xh,e.scalePoint=function(){return Jh(Zh.apply(null,arguments).paddingInner(1))},e.scalePow=Cp,e.scaleQuantile=function e(){var n,i=[],o=[],a=[];function s(){var e=0,t=Math.max(1,o.length);for(a=new Array(t-1);++e<t;)a[e-1]=T(i,e/t);return l}function l(e){return isNaN(e=+e)?n:o[r(a,e)]}return l.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:i[0],t<a.length?a[t]:i[i.length-1]]},l.domain=function(e){if(!arguments.length)return i.slice();i=[];for(var n,r=0,o=e.length;r<o;++r)null==(n=e[r])||isNaN(n=+n)||i.push(n);return i.sort(t),s()},l.range=function(e){return arguments.length?(o=Wh.call(e),s()):o.slice()},l.unknown=function(e){return arguments.length?(n=e,l):n},l.quantiles=function(){return a.slice()},l.copy=function(){return e().domain(i).range(o).unknown(n)},jh.apply(l,arguments)},e.scaleQuantize=function e(){var t,n=0,i=1,o=1,a=[.5],s=[0,1];function l(e){return e<=e?s[r(a,e,0,o)]:t}function c(){var e=-1;for(a=new Array(o);++e<o;)a[e]=((e+1)*i-(e-o)*n)/(o+1);return l}return l.domain=function(e){return arguments.length?(n=+e[0],i=+e[1],c()):[n,i]},l.range=function(e){return arguments.length?(o=(s=Wh.call(e)).length-1,c()):s.slice()},l.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=o?[a[o-1],i]:[a[t-1],a[t]]},l.unknown=function(e){return arguments.length?(t=e,l):l},l.thresholds=function(){return a.slice()},l.copy=function(){return e().domain([n,i]).range(s).unknown(t)},jh.apply(up(l),arguments)},e.scaleSequential=function e(){var t=up(dg()(tp));return t.copy=function(){return hg(t,e())},zh.apply(t,arguments)},e.scaleSequentialLog=function e(){var t=bp(dg()).domain([1,10]);return t.copy=function(){return hg(t,e()).base(t.base())},zh.apply(t,arguments)},e.scaleSequentialPow=pg,e.scaleSequentialQuantile=function e(){var n=[],i=tp;function o(e){if(!isNaN(e=+e))return i((r(n,e)-1)/(n.length-1))}return o.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var i,r=0,a=e.length;r<a;++r)null==(i=e[r])||isNaN(i=+i)||n.push(i);return n.sort(t),o},o.interpolator=function(e){return arguments.length?(i=e,o):i},o.copy=function(){return e(i).domain(n)},zh.apply(o,arguments)},e.scaleSequentialSqrt=function(){return pg.apply(null,arguments).exponent(.5)},e.scaleSequentialSymlog=function e(){var t=_p(dg());return t.copy=function(){return hg(t,e()).constant(t.constant())},zh.apply(t,arguments)},e.scaleSqrt=function(){return Cp.apply(null,arguments).exponent(.5)},e.scaleSymlog=function e(){var t=_p(sp());return t.copy=function(){return ap(t,e()).constant(t.constant())},jh.apply(t,arguments)},e.scaleThreshold=function e(){var t,n=[.5],i=[0,1],o=1;function a(e){return e<=e?i[r(n,e,0,o)]:t}return a.domain=function(e){return arguments.length?(n=Wh.call(e),o=Math.min(n.length,i.length-1),a):n.slice()},a.range=function(e){return arguments.length?(i=Wh.call(e),o=Math.min(n.length,i.length-1),a):i.slice()},a.invertExtent=function(e){var t=i.indexOf(e);return[n[t-1],n[t]]},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e().domain(n).range(i).unknown(t)},jh.apply(a,arguments)},e.scaleTime=function(){return jh.apply(ug(cf,sf,qp,Gp,$p,Vp,Fp,Pp,e.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},e.scaleUtc=function(){return jh.apply(ug(Lf,Of,bf,mf,pf,df,Fp,Pp,e.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},e.scan=function(e,n){if(i=e.length){var i,r,o=0,a=0,s=e[a];for(null==n&&(n=t);++o<i;)(n(r=e[o],s)<0||0!==n(s,s))&&(s=r,a=o);return 0===n(s,s)?a:void 0}},e.schemeAccent=bg,e.schemeBlues=gv,e.schemeBrBG=kg,e.schemeBuGn=qg,e.schemeBuPu=Wg,e.schemeCategory10=vg,e.schemeDark2=yg,e.schemeGnBu=Xg,e.schemeGreens=bv,e.schemeGreys=wv,e.schemeOrRd=Jg,e.schemeOranges=Cv,e.schemePRGn=Pg,e.schemePaired=wg,e.schemePastel1=_g,e.schemePastel2=xg,e.schemePiYG=Og,e.schemePuBu=nv,e.schemePuBuGn=ev,e.schemePuOr=Lg,e.schemePuRd=rv,e.schemePurples=xv,e.schemeRdBu=Ng,e.schemeRdGy=Ug,e.schemeRdPu=av,e.schemeRdYlBu=Bg,e.schemeRdYlGn=Hg,e.schemeReds=Tv,e.schemeSet1=Sg,e.schemeSet2=Tg,e.schemeSet3=Ag,e.schemeSpectral=jg,e.schemeTableau10=Cg,e.schemeYlGn=uv,e.schemeYlGnBu=lv,e.schemeYlOrBr=hv,e.schemeYlOrRd=fv,e.select=Je,e.selectAll=function(e){return"string"==typeof e?new Xe([document.querySelectorAll(e)],[document.documentElement]):new Xe([null==e?[]:e],Ke)},e.selection=Ze,e.selector=Z,e.selectorAll=Q,e.set=Uo,e.shuffle=function(e,t,n){for(var i,r,o=(null==n?e.length:n)-(t=null==t?0:+t);o;)r=Math.random()*o--|0,i=e[o+t],e[o+t]=e[r+t],e[r+t]=i;return e},e.stack=function(){var e=Bv([]),t=Ty,n=Sy,i=Ay;function r(r){var o,a,s=e.apply(this,arguments),l=r.length,c=s.length,u=new Array(c);for(o=0;o<c;++o){for(var d,h=s[o],p=u[o]=new Array(l),f=0;f<l;++f)p[f]=d=[0,+i(r[f],h,f,r)],d.data=r[f];p.key=h}for(o=0,a=t(u);o<c;++o)u[a[o]].index=o;return n(u,a),u}return r.keys=function(t){return arguments.length?(e="function"==typeof t?t:Bv(wb.call(t)),r):e},r.value=function(e){return arguments.length?(i="function"==typeof e?e:Bv(+e),r):i},r.order=function(e){return arguments.length?(t=null==e?Ty:"function"==typeof e?e:Bv(wb.call(e)),r):t},r.offset=function(e){return arguments.length?(n=null==e?Sy:e,r):n},r},e.stackOffsetDiverging=function(e,t){if((s=e.length)>0)for(var n,i,r,o,a,s,l=0,c=e[t[0]].length;l<c;++l)for(o=a=0,n=0;n<s;++n)(r=(i=e[t[n]][l])[1]-i[0])>0?(i[0]=o,i[1]=o+=r):r<0?(i[1]=a,i[0]=a+=r):(i[0]=0,i[1]=r)},e.stackOffsetExpand=function(e,t){if((i=e.length)>0){for(var n,i,r,o=0,a=e[0].length;o<a;++o){for(r=n=0;n<i;++n)r+=e[n][o][1]||0;if(r)for(n=0;n<i;++n)e[n][o][1]/=r}Sy(e,t)}},e.stackOffsetNone=Sy,e.stackOffsetSilhouette=function(e,t){if((n=e.length)>0){for(var n,i=0,r=e[t[0]],o=r.length;i<o;++i){for(var a=0,s=0;a<n;++a)s+=e[a][i][1]||0;r[i][1]+=r[i][0]=-s/2}Sy(e,t)}},e.stackOffsetWiggle=function(e,t){if((r=e.length)>0&&(i=(n=e[t[0]]).length)>0){for(var n,i,r,o=0,a=1;a<i;++a){for(var s=0,l=0,c=0;s<r;++s){for(var u=e[t[s]],d=u[a][1]||0,h=(d-(u[a-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];h+=(f[a][1]||0)-(f[a-1][1]||0)}l+=d,c+=h*d}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,Sy(e,t)}},e.stackOrderAppearance=Cy,e.stackOrderAscending=ky,e.stackOrderDescending=function(e){return ky(e).reverse()},e.stackOrderInsideOut=function(e){var t,n,i=e.length,r=e.map(Iy),o=Cy(e),a=0,s=0,l=[],c=[];for(t=0;t<i;++t)n=o[t],a<s?(a+=r[n],l.push(n)):(s+=r[n],c.push(n));return c.reverse().concat(l)},e.stackOrderNone=Ty,e.stackOrderReverse=function(e){return Ty(e).reverse()},e.stratify=function(){var e=_h,t=xh;function n(n){var i,r,o,a,s,l,c,u=n.length,d=new Array(u),h={};for(r=0;r<u;++r)i=n[r],s=d[r]=new Kd(i),null!=(l=e(i,r,n))&&(l+="")&&(h[c="$"+(s.id=l)]=c in h?wh:s);for(r=0;r<u;++r)if(s=d[r],null!=(l=t(n[r],r,n))&&(l+="")){if(!(a=h["$"+l]))throw new Error("missing: "+l);if(a===wh)throw new Error("ambiguous: "+l);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=yh,o.eachBefore(function(e){e.depth=e.parent.depth+1,--u}).eachBefore(Wd),o.parent=null,u>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=uh(t),n):e},n.parentId=function(e){return arguments.length?(t=uh(e),n):t},n},e.style=ge,e.sum=function(e,t){var n,i=e.length,r=-1,o=0;if(null==t)for(;++r<i;)(n=+e[r])&&(o+=n);else for(;++r<i;)(n=+t(e[r],r,e))&&(o+=n);return o},e.svg=La,e.symbol=function(){var e=Bv(Eb),t=Bv(64),n=null;function i(){var i;if(n||(n=i=So()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(t){return arguments.length?(e="function"==typeof t?t:Bv(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:Bv(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i},e.symbolCircle=Eb,e.symbolCross=kb,e.symbolDiamond=Db,e.symbolSquare=Nb,e.symbolStar=Rb,e.symbolTriangle=Ub,e.symbolWye=Gb,e.symbols=jb,e.text=Ca,e.thresholdFreedmanDiaconis=function(e,n,i){return e=p.call(e,s).sort(t),Math.ceil((i-n)/(2*(T(e,.75)-T(e,.25))*Math.pow(e.length,-1/3)))},e.thresholdScott=function(e,t,n){return Math.ceil((n-t)/(3.5*c(e)*Math.pow(e.length,-1/3)))},e.thresholdSturges=S,e.tickFormat=cp,e.tickIncrement=_,e.tickStep=x,e.ticks=w,e.timeDay=Gp,e.timeDays=jp,e.timeFormatDefaultLocale=Jm,e.timeFormatLocale=Vf,e.timeFriday=Zp,e.timeFridays=of,e.timeHour=$p,e.timeHours=Hp,e.timeInterval=Ip,e.timeMillisecond=Pp,e.timeMilliseconds=Dp,e.timeMinute=Vp,e.timeMinutes=Bp,e.timeMonday=Yp,e.timeMondays=ef,e.timeMonth=sf,e.timeMonths=lf,e.timeSaturday=Jp,e.timeSaturdays=af,e.timeSecond=Fp,e.timeSeconds=Up,e.timeSunday=qp,e.timeSundays=Qp,e.timeThursday=Xp,e.timeThursdays=rf,e.timeTuesday=Wp,e.timeTuesdays=tf,e.timeWednesday=Kp,e.timeWednesdays=nf,e.timeWeek=qp,e.timeWeeks=Qp,e.timeYear=cf,e.timeYears=uf,e.timeout=Mi,e.timer=ki,e.timerFlush=Ii,e.touch=ot,e.touches=function(e,t){null==t&&(t=nt().touches);for(var n=0,i=t?t.length:0,r=new Array(i);n<i;++n)r[n]=it(e,t[n]);return r},e.transition=sr,e.transpose=k,e.tree=function(){var e=Sh,t=1,n=1,i=null;function r(r){var l=function(e){for(var t,n,i,r,o,a=new kh(e,0),s=[a];t=s.pop();)if(i=t._.children)for(t.children=new Array(o=i.length),r=o-1;r>=0;--r)s.push(n=t.children[r]=new kh(i[r],r)),n.parent=t;return(a.parent=new kh(null,0)).children=[a],a}(r);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),i)r.eachBefore(s);else{var c=r,u=r,d=r;r.eachBefore(function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)});var h=c===u?1:e(c,u)/2,p=h-c.x,f=t/(u.x+h+p),m=n/(d.depth||1);r.eachBefore(function(e){e.x=(e.x+p)*f,e.y=e.depth*m})}return r}function o(t){var n=t.children,i=t.parent.children,r=t.i?i[t.i-1]:null;if(n){!function(e){for(var t,n=0,i=0,r=e.children,o=r.length;--o>=0;)(t=r[o]).z+=n,t.m+=n,n+=t.s+(i+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+e(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+e(t._,r._));t.parent.A=function(t,n,i){if(n){for(var r,o=t,a=t,s=n,l=o.parent.children[0],c=o.m,u=a.m,d=s.m,h=l.m;s=Ah(s),o=Th(o),s&&o;)l=Th(l),(a=Ah(a)).a=t,(r=s.z+d-o.z-c+e(s._,o._))>0&&(Ch(Eh(s,t,i),t,r),c+=r,u+=r),d+=s.m,c+=o.m,h+=l.m,u+=a.m;s&&!Ah(a)&&(a.t=s,a.m+=d-u),o&&!Th(l)&&(l.t=o,l.m+=c-h,i=t)}return i}(t,r,t.parent.A||i[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return r.separation=function(t){return arguments.length?(e=t,r):e},r.size=function(e){return arguments.length?(i=!1,t=+e[0],n=+e[1],r):i?null:[t,n]},r.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],n=+e[1],r):i?[t,n]:null},r},e.treemap=function(){var e=Oh,t=!1,n=1,i=1,r=[0],o=dh,a=dh,s=dh,l=dh,c=dh;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=i,e.eachBefore(d),r=[0],t&&e.eachBefore(vh),e}function d(t){var n=r[t.depth],i=t.x0+n,u=t.y0+n,d=t.x1-n,h=t.y1-n;d<i&&(i=d=(i+d)/2),h<u&&(u=h=(u+h)/2),t.x0=i,t.y0=u,t.x1=d,t.y1=h,t.children&&(n=r[t.depth+1]=o(t)/2,i+=c(t)-n,u+=a(t)-n,(d-=s(t)-n)<i&&(i=d=(i+d)/2),(h-=l(t)-n)<u&&(u=h=(u+h)/2),e(t,i,u,d,h))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],i=+e[1],u):[n,i]},u.tile=function(t){return arguments.length?(e=uh(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:hh(+e),u):o},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:hh(+e),u):a},u.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:hh(+e),u):s},u.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:hh(+e),u):l},u.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:hh(+e),u):c},u},e.treemapBinary=function(e,t,n,i,r){var o,a,s=e.children,l=s.length,c=new Array(l+1);for(c[0]=a=o=0;o<l;++o)c[o+1]=a+=s[o].value;!function e(t,n,i,r,o,a,l){if(t>=n-1){var u=s[t];return u.x0=r,u.y0=o,u.x1=a,void(u.y1=l)}var d=c[t],h=i/2+d,p=t+1,f=n-1;for(;p<f;){var m=p+f>>>1;c[m]<h?p=m+1:f=m}h-c[p-1]<c[p]-h&&t+1<p&&--p;var g=c[p]-d,v=i-g;if(a-r>l-o){var b=(r*v+a*g)/i;e(t,p,g,r,o,b,l),e(p,n,v,b,o,a,l)}else{var y=(o*v+l*g)/i;e(t,p,g,r,o,a,y),e(p,n,v,r,y,a,l)}}(0,l,e.value,t,n,i,r)},e.treemapDice=bh,e.treemapResquarify=Mh,e.treemapSlice=Ih,e.treemapSliceDice=function(e,t,n,i,r){(1&e.depth?Ih:bh)(e,t,n,i,r)},e.treemapSquarify=Oh,e.tsv=Ia,e.tsvFormat=va,e.tsvFormatBody=ba,e.tsvFormatRow=wa,e.tsvFormatRows=ya,e.tsvFormatValue=_a,e.tsvParse=ma,e.tsvParseRows=ga,e.utcDay=mf,e.utcDays=gf,e.utcFriday=Sf,e.utcFridays=Pf,e.utcHour=pf,e.utcHours=ff,e.utcMillisecond=Pp,e.utcMilliseconds=Dp,e.utcMinute=df,e.utcMinutes=hf,e.utcMonday=yf,e.utcMondays=Cf,e.utcMonth=Of,e.utcMonths=Mf,e.utcSaturday=Tf,e.utcSaturdays=Df,e.utcSecond=Fp,e.utcSeconds=Up,e.utcSunday=bf,e.utcSundays=Af,e.utcThursday=xf,e.utcThursdays=If,e.utcTuesday=wf,e.utcTuesdays=Ef,e.utcWednesday=_f,e.utcWednesdays=kf,e.utcWeek=bf,e.utcWeeks=Af,e.utcYear=Lf,e.utcYears=Rf,e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.variance=l,e.version="5.16.0",e.voronoi=function(){var e=Dy,t=Oy,n=null;function i(i){return new pw(i.map(function(n,r){var o=[Math.round(e(n,r,i)/cw)*cw,Math.round(t(n,r,i)/cw)*cw];return o.index=r,o.data=n,o}),n)}return i.polygons=function(e){return i(e).polygons()},i.links=function(e){return i(e).links()},i.triangles=function(e){return i(e).triangles()},i.x=function(t){return arguments.length?(e="function"==typeof t?t:Py(+t),i):e},i.y=function(e){return arguments.length?(t="function"==typeof e?e:Py(+e),i):t},i.extent=function(e){return arguments.length?(n=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(e){return arguments.length?(n=null==e?null:[[0,0],[+e[0],+e[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i},e.window=he,e.xml=Oa,e.zip=function(){return k(arguments)},e.zoom=function(){var t,n,i=_w,r=xw,o=Cw,a=Tw,s=Aw,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=oi,h=B("start","zoom","end"),p=0;function f(e){e.property("__zoom",Sw).on("wheel.zoom",_).on("mousedown.zoom",x).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new gw(t,e.x,e.y)}function g(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new gw(e.k,i,r)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n){e.on("start.zoom",function(){y(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).end()}).tween("zoom",function(){var e=this,i=arguments,o=y(e,i),a=r.apply(e,i),s=null==n?v(a):"function"==typeof n?n.apply(e,i):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=e.__zoom,u="function"==typeof t?t.apply(e,i):t,h=d(c.invert(s).concat(l/c.k),u.invert(s).concat(l/u.k));return function(e){if(1===e)e=u;else{var t=h(e),n=l/t[2];e=new gw(n,s[0]-t[0]*n,s[1]-t[1]*n)}o.zoom(null,e)}})}function y(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.extent=r.apply(e,t),this.taps=0}function _(){if(i.apply(this,arguments)){var e=y(this,arguments),t=this.__zoom,n=Math.max(l[0],Math.min(l[1],t.k*Math.pow(2,a.apply(this,arguments)))),r=rt(this);if(e.wheel)e.mouse[0][0]===r[0]&&e.mouse[0][1]===r[1]||(e.mouse[1]=t.invert(e.mouse[0]=r)),clearTimeout(e.wheel);else{if(t.k===n)return;e.mouse=[r,t.invert(r)],Bi(this),e.start()}ww(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},150),e.zoom("mouse",o(g(m(t,n),e.mouse[0],e.mouse[1]),e.extent,c))}}function x(){if(!n&&i.apply(this,arguments)){var t=y(this,arguments,!0),r=Je(e.event.view).on("mousemove.zoom",function(){if(ww(),!t.moved){var n=e.event.clientX-s,i=e.event.clientY-l;t.moved=n*n+i*i>p}t.zoom("mouse",o(g(t.that.__zoom,t.mouse[0]=rt(t.that),t.mouse[1]),t.extent,c))},!0).on("mouseup.zoom",function(){r.on("mousemove.zoom mouseup.zoom",null),ct(e.event.view,t.moved),ww(),t.end()},!0),a=rt(this),s=e.event.clientX,l=e.event.clientY;lt(e.event.view),yw(),t.mouse=[a,this.__zoom.invert(a)],Bi(this),t.start()}}function S(){if(i.apply(this,arguments)){var t=this.__zoom,n=rt(this),a=t.invert(n),s=t.k*(e.event.shiftKey?.5:2),l=o(g(m(t,s),n,a),r.apply(this,arguments),c);ww(),u>0?Je(this).transition().duration(u).call(b,l,n):Je(this).call(f.transform,l)}}function T(){if(i.apply(this,arguments)){var n,r,o,a,s=e.event.touches,l=s.length,c=y(this,arguments,e.event.changedTouches.length===l);for(yw(),r=0;r<l;++r)a=[a=ot(this,s,(o=s[r]).identifier),this.__zoom.invert(a),o.identifier],c.touch0?c.touch1||c.touch0[2]===a[2]||(c.touch1=a,c.taps=0):(c.touch0=a,n=!0,c.taps=1+!!t);t&&(t=clearTimeout(t)),n&&(c.taps<2&&(t=setTimeout(function(){t=null},500)),Bi(this),c.start())}}function A(){if(this.__zooming){var n,i,r,a,s=y(this,arguments),l=e.event.changedTouches,u=l.length;for(ww(),t&&(t=clearTimeout(t)),s.taps=0,n=0;n<u;++n)r=ot(this,l,(i=l[n]).identifier),s.touch0&&s.touch0[2]===i.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===i.identifier&&(s.touch1[0]=r);if(i=s.that.__zoom,s.touch1){var d=s.touch0[0],h=s.touch0[1],p=s.touch1[0],f=s.touch1[1],v=(v=p[0]-d[0])*v+(v=p[1]-d[1])*v,b=(b=f[0]-h[0])*b+(b=f[1]-h[1])*b;i=m(i,Math.sqrt(v/b)),r=[(d[0]+p[0])/2,(d[1]+p[1])/2],a=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(g(i,r,a),s.extent,c))}}function C(){if(this.__zooming){var t,i,r=y(this,arguments),o=e.event.changedTouches,a=o.length;for(yw(),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),t=0;t<a;++t)i=o[t],r.touch0&&r.touch0[2]===i.identifier?delete r.touch0:r.touch1&&r.touch1[2]===i.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var s=Je(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return f.transform=function(e,t,n){var i=e.selection?e.selection():e;i.property("__zoom",Sw),e!==i?b(e,t,n):i.interrupt().each(function(){y(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},f.scaleBy=function(e,t,n){f.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n)},f.scaleTo=function(e,t,n){f.transform(e,function(){var e=r.apply(this,arguments),i=this.__zoom,a=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,s=i.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return o(g(m(i,l),a,s),e,c)},n)},f.translateBy=function(e,t,n){f.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)})},f.translateTo=function(e,t,n,i){f.transform(e,function(){var e=r.apply(this,arguments),a=this.__zoom,s=null==i?v(e):"function"==typeof i?i.apply(this,arguments):i;return o(vw.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},i)},w.prototype={start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){ze(new mw(f,e,this.that.__zoom),h.apply,h,[e,this.that,this.args])}},f.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:fw(+e),f):a},f.filter=function(e){return arguments.length?(i="function"==typeof e?e:fw(!!e),f):i},f.touchable=function(e){return arguments.length?(s="function"==typeof e?e:fw(!!e),f):s},f.extent=function(e){return arguments.length?(r="function"==typeof e?e:fw([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),f):r},f.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],f):[l[0],l[1]]},f.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],f):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},f.constrain=function(e){return arguments.length?(o=e,f):o},f.duration=function(e){return arguments.length?(u=+e,f):u},f.interpolate=function(e){return arguments.length?(d=e,f):d},f.on=function(){var e=h.on.apply(h,arguments);return e===h?f:e},f.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,f):Math.sqrt(p)},f},e.zoomIdentity=vw,e.zoomTransform=bw,Object.defineProperty(e,"__esModule",{value:!0})}),define("index",["./Core/Analytics","./Core/Services","./Core/defer","./Core/injectThirdPartyScriptsAndStyles","durandal/app","durandal/system","jquery","plugins/dialog","plugins/router","moment","bootstrap","datetimepicker","pep","typeahead","d3"],function(e,t,n,i,r,o,a,s,l,c){"use strict";const u=Cesium.defined,d=Cesium.JulianDate,h=Cesium.AnimationViewModel,p=Cesium.Timeline;function f(){const e=arguments[0];(e instanceof Error||"string"==typeof e&&e.startsWith("ERROR"))&&console.error.apply(console,arguments)}a.noConflict(),"undefined"==typeof Promise&&AWS.config.setPromisesDependency(function(e){const t=n();return e(t.resolve,t.reject),t.promise}),o.error=f,o.log=f,e.trackRouter(l),s.MessageBox.defaultViewMarkup=s.MessageBox.defaultViewMarkup.replace(/<button/,'<button type="button"'),s.addContext("bootstrap",{addHost:function(e){const t=document.body,n=document.createElement("div");n.classList.add("modal"),n.classList.add("fade"),n.setAttribute("tabindex","-1");const i=document.createElement("div");i.classList.add("modal-dialog"),n.appendChild(i),t.appendChild(n),e.host=i,e.modalHost=a(n)},removeHost:function(e){e.modalHost.remove(),document.body.classList.remove("modal-open");const t=document.getElementsByClassName("modal-backdrop")[0];t.parentNode.removeChild(t)},compositionComplete:function(e,t,n){const i=s.getDialog(n.model);i.modalHost.modal({backdrop:"static",keyboard:!1,show:!0}),i.modalHost.on("shown.bs.modal",function(){const t=e.getElementsByClassName("autofocus")[0];u(t)&&t.focus()})}});const m=s.show;s.show=function(e,t,n){return m.call(s,e,t,n||"bootstrap")},r.title="Cesium ion",r.configurePlugins({router:!0,dialog:!0}),p.prototype.makeLabel=function(e){const t=d.toDate(e);return c(t).format("lll").toString()},h.defaultDateFormatter=function(e){const t=d.toDate(e);return c(t).format("ll").toString()},h.defaultTimeFormatter=function(e,t){const n=d.toDate(e);return Math.abs(t._clockViewModel.multiplier)<1?c(n).format("hh:mm:ss:SS A").toString():c(n).format("LTS").toString()};const g=new URLSearchParams(window.location.search);t.init(g.get("signInAs")).then(i).then(r.start).then(()=>{r.setRoot("Views/shell",void 0,"applicationHost")},e=>{console.error(e)})}),require({paths:{text:"ThirdParty/text",durandal:"ThirdParty/durandal/js",plugins:"ThirdParty/durandal/js/plugins",transitions:"ThirdParty/durandal/js/transitions",knockout:"Core/knockout",bootstrap:"ThirdParty/bootstrap",pep:"ThirdParty/pep",jquery:"ThirdParty/jquery",moment:"ThirdParty/moment",datetimepicker:"ThirdParty/bootstrap-datetimepicker",clipboard:"ThirdParty/clipboard",toastr:"ThirdParty/toastr",bloodhound:"ThirdParty/bloodhound",typeahead:"ThirdParty/typeahead.jquery",pako:"ThirdParty/pako/pako",showdown:"ThirdParty/showdown",c3:"ThirdParty/c3",d3:"ThirdParty/d3",prism:"ThirdParty/prism",DOMPurify:"ThirdParty/purify","@uppy/core":"ThirdParty/@uppy/core","@uppy/tus":"ThirdParty/@uppy/tus","@uppy/xhr-upload":"ThirdParty/@uppy/xhr-upload",exifreader:"ThirdParty/exif-reader",validator:"ThirdParty/validator/validator"},packages:[{name:"Uri",location:"ThirdParty/urijs",main:"src/URI"}],shim:{bootstrap:{deps:["jquery"]},bloodhound:{deps:["jquery"],exports:"Bloodhound"},prism:{exports:"Prism"},typeahead:{deps:["jquery"],init:function(e){"use strict";return require.s.contexts._.registry["typeahead.js"].factory(e)}}}},["index"],function(){}),define("main",function(){}),define("Core/isStoriesFrame",[],function(){"use strict";return function(){return Cesium.defined(window.frameElement)&&"storiesFrame"===window.frameElement.id}}),
/**
 * @license text 2.0.16 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */
define("text",["module"],function(e){"use strict";var t,i,r,o,a,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,d=u&&location.protocol&&location.protocol.replace(/\:/,""),h=u&&location.hostname,p=u&&(location.port||void 0),f={},m=e.config&&e.config()||{};function g(e,t){return void 0===e||""===e?t:e}return t={version:"2.0.16",strip:function(e){if(e){var t=(e=e.replace(l,"")).match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){i=s[t];try{e=new ActiveXObject(i)}catch(n){}if(e){s=[i];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,-1!==(o=(i=n||t).indexOf("!"))&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,a,s,l=t.xdRegExp.exec(e);return!l||(o=l[2],s=(a=(a=l[3]).split(":"))[1],a=a[0],(!o||o===n)&&(!a||a.toLowerCase()===i.toLowerCase())&&(!s&&!a||function(e,t,n,i){if(t===i)return!0;if(e===n){if("http"===e)return g(t,"80")===g(i,"80");if("https"===e)return g(t,"443")===g(i,"443")}return!1}(o,s,n,r)))},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,m.isBuild&&(f[e]=i),r(i)},load:function(e,n,i,r){if(r&&r.isBuild&&!r.inlineText)i();else{m.isBuild=r&&r.isBuild;var o=t.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),l=m.useXhr||t.useXhr;0!==s.indexOf("empty:")?!u||l(s,d,h,p)?t.get(s,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):
//!strip part to avoid file system issues.
n([a],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)},function(e){i.error&&i.error(e)}):i()}},write:function(e,n,i,r){if(f.hasOwnProperty(n)){var o=t.jsEscape(f[n]);i.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,i,r,o){var a=t.parseName(n),s=a.ext?"."+a.ext:"",l=a.moduleName+s,c=i.toUrl(a.moduleName+s)+".js";t.load(l,i,function(n){var i=function(e){return r(c,e)};i.asModule=function(e,t){return r.asModule(e,c,t)},t.write(e,l,i,o)},o)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),t.get=function(e,t,r){try{var o=i.readFileSync(e,"utf8");"\ufeff"===o[0]&&(o=o.substring(1)),t(o)}catch(n){r&&r(n)}}):"xhr"===m.env||!m.env&&t.createXhr()?t.get=function(e,n,i,r){var o,a=t.createXhr();if(a.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),r[o]);m.onXhr&&m.onXhr(a,e),a.onreadystatechange=function(t){var r,o;4===a.readyState&&((r=a.status||0)>399&&r<600?((o=new Error(e+" HTTP status: "+r)).xhr=a,i&&i(o)):n(a.responseText),m.onXhrComplete&&m.onXhrComplete(a,e))},a.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,(i=a.readLine())&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(o),n.append(i);s=String(n.toString())}finally{a.close()}t(s)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,o=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var i,s,l,c={};a&&(e=e.replace(/\//g,"\\")),l=new FileUtils.File(e);try{(i=r["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream)).init(l,1,0,!1),(s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream)).init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(i.available(),c),s.close(),i.close(),t(c.value)}catch(n){throw new Error((l&&l.path||"")+": "+n)}}),t}),define("text!Core/ChangelogEmbed.html",[],function(){return'<h1 id="whats-new">What\'s New?</h1>\n<h5 id="2025-07-22">2025-07-22</h5>\n<ul>\n<li>Improved rendering, scaling, and positioning of Gaussian splats</li>\n</ul>\n<h5 id="2025-06-30">2025-06-30</h5>\n<ul>\n<li>Update to using <a href="https://en.wikipedia.org/wiki/Binary_prefix" rel="noopener noreferrer" target="_blank">binary prefixes</a> for file size abbreviations. Cesium ion has always computed sizes using base 2, this change adjust the labeling to reflect this.</li>\n</ul>\n<h5 id="2025-06-24">2025-06-24</h5>\n<ul>\n<li>Mesh reconstruction from photos is available as a technical preview. Upload geolocated photos and select the <em>Photos (for 3D reconstruction)</em> option.</li>\n<li>Added the ability to perform analysis on point clouds to produce classified point clouds. Try it with the <em>Analyze</em> button on the asset details panel.</li>\n<li>Gaussian splats is available as a technical preview. Upload a PLY file and enable the <em>Gaussian splats</em> toggle.</li>\n</ul>\n<h5 id="2025-03-06">2025-03-06</h5>\n<ul>\n<li>Design tiler now supports IFC metadata.</li>\n</ul>\n<h5 id="2025-02-28">2025-02-28</h5>\n<ul>\n<li>Asset import and export now supports Azure storage in addition to S3.</li>\n</ul>\n<h5 id="2025-02-25">2025-02-25</h5>\n<ul>\n<li>Cesium stories annotations provide an option to show the name of the annotation in the 3D view.</li>\n</ul>\n<h5 id="2025-02-13">2025-02-13</h5>\n<ul>\n<li>Assets now support multi-selection for deleting multiple assets at once.</li>\n</ul>\n<h5 id="2025-01-23">2025-01-23</h5>\n<ul>\n<li>Cesium OSM buildings and Cesium OSM buildings for CWB datasets have been updated based on the OSM Timestamp of Jan 13 00:00GMT, 2025.</li>\n</ul>\n<h5 id="2024-12-17">2024-12-17</h5>\n<ul>\n<li>Cesium Stories now include <a href="https://community.cesium.com/t/new-annotations-for-cesium-stories/37427" rel="noopener noreferrer" target="_blank">annotation features for points, polygons, and polylines</a>.</li>\n</ul>\n<h5 id="2024-12-05">2024-12-05</h5>\n<ul>\n<li>Cesium ion makes the Google geocoder available as an alternative to the default Bing Maps geocoder. Use this geocoder when displaying Google Photorealistic 3D Tiles in your applications. Cesium ion Stories uses the Google geocoder when you choose Photorealistic 3D Tiles as the base layer. The CesiumJS API also includes a method for easily accessing the Google geocoder. See <a href="https://sandcastle.cesium.com/?src=Google%20Photorealistic%203D%20Tiles.html" rel="noopener noreferrer" target="_blank">this Sandcastle example</a>.</li>\n</ul>\n<h5 id="2024-12-02">2024-12-02</h5>\n<ul>\n<li>The new Cesium Design Tiler tiles IFC and glTF models into 3D Tiles. <a href="https://cesium.com/blog/2024/12/03/cesium-design-tiler-and-revit-add-in/" rel="noopener noreferrer" target="_blank">Read more.</a></li>\n<li>The Cesium ion for Autodesk Revit Add-In is available on <a href="https://cesium.com/downloads" rel="noopener noreferrer" target="_blank">Downloads</a>. This Add-In uploads your current 3D View directly to Cesium ion and tiles it with the Design Tiler to produce 3D Tiles.</li>\n</ul>\n<h5 id="2024-11-19">2024-11-19</h5>\n<ul>\n<li>If you have a Bentley account, you can use it to log into Cesium ion by choosing the Bentley button on the Sign In page.</li>\n</ul>\n<h5 id="2024-09-10">2024-09-10</h5>\n<ul>\n<li>The Cesium ion Reality Tiler was updated with performance improvements.</li>\n</ul>\n<h5 id="2024-08-19">2024-08-19</h5>\n<ul>\n<li>Added ability to duplicate a story. Go to the Stories list and click the <em>Duplicate</em> button on the tile. A new copy of the story will open for editing.</li>\n<li>Added ability to duplicate a slide. Right click on the side thumbnail on the left panel and choose the <em>Duplicate slide</em> menu option.</li>\n</ul>\n<h5 id="2024-08-08">2024-08-08</h5>\n<ul>\n<li>Links to individual Story slides are now supported. To find the link URL, preview the Story, go to the targeted slide, and copy the URL.</li>\n</ul>\n<h5 id="2024-07-02">2024-07-02</h5>\n<ul>\n<li>The Cesium ion Reality Tiler was updated with significant performance improvements for large models.</li>\n</ul>\n<h5 id="2024-06-25">2024-06-25</h5>\n<ul>\n<li>Vexcel 3D Cities data is now available for offline use with Cesium ion Self-Hosted, and samples of these high fidelity cities are available in your SaaS account. <a href="https://cesium.com/blog/2024/06/25/vexcel-cesium/" rel="noopener noreferrer" target="_blank">Read more.</a>.</li>\n</ul>\n<h5 id="2024-06-03">2024-06-03</h5>\n<ul>\n<li>A new tileset, Japan 3D Buildings, is available, containing countrywide, open source 3D building data from over 200 locations across Japan. Learn more about this tileset <a href="https://cesium.com/blog/2024/06/03/japan-3d-buildings/" rel="noopener noreferrer" target="_blank">here</a>.</li>\n<li>We\'ve made significant improvements to the CityGML and KML/COLLADA tiling pipelines, including KTX2 texture compression, CityGML tiling performance when tiling multiple files across multiple cores, the buildings tiler now taking hundreds of thousands of files as input all at once, and more. <a href="https://community.cesium.com/t/significant-citygml-and-kml-collada-enhancements-now-available-on-cesium-ion/32207" rel="noopener noreferrer" target="_blank">Read more.</a>.</li>\n</ul>\n<h5 id="2024-05-08">2024-05-08</h5>\n<ul>\n<li>Clipping Cesium ion data as 3D Tiles or glTF unlocks new 3D geospatial workflows. Go offline or work in your favorite digital content creation tools. <a href="http://www.cesium.com/blog/2024/05/08/cesium-ion-clipping/" rel="noopener noreferrer" target="_blank">Read more</a>.</li>\n</ul>\n<h5 id="2024-05-01">2024-05-01</h5>\n<p>Cesium’s 3D Tiling Pipeline v4.7.1 is now available and includes Point Cloud Tiler fixes:</p>\n<ul>\n<li>When reading from LAZ files, it now correctly uses the extended data fields for classification and point_source_id. Previously this resulted in these fields being zero in some cases.</li>\n<li>Fixed bitmask for legacy point data records\' classification field. Could result in incorrect values.</li>\n</ul>\n<h5 id="2024-04-17">2024-04-17</h5>\n<ul>\n<li>You can now import 3D models from Sketchfab into Cesium ion. <a href="https://cesium.com/blog/2024/04/17/sketchfab-cesium-ion/" rel="noopener noreferrer" target="_blank">Read more</a>.</li>\n</ul>\n<h5 id="2024-03-29">2024-03-29</h5>\n<ul>\n<li>Cesium ion SaaS now supports optional two-factor authentication. To add 2FA to your accounts, go to <a href="https://ion.cesium.com/account" rel="noopener noreferrer" target="_blank">https://ion.cesium.com/account</a> and scroll down to "Two-factor authentication".</li>\n<li>Cesium OSM Buildings has been updated to use the latest OSM data as of March 8, 2024.</li>\n<li>We also added a new OSM Buildings layer aligned with the Cesium World Bathymetry (CWB) data, called Cesium OSM Buildings for CWB. It uses the same source data as the Cesium OSM Buildings layer, but with the base heights of the buildings based on the current Cesium World Bathymetry data. Cesium OSM Buildings should be used with Cesium World Terrain. Cesium OSM Buildings for CWB should be used with Cesium World Bathymetry.</li>\n<li>Both OSM updates are also available for customers who license Cesium OSM Buildings for use in their own environments.</li>\n</ul>\n<h5 id="2024-03-20">2024-03-20</h5>\n<ul>\n<li>Cesium ion’s 3D Tiling Pipeline now preserves all LAS Point Data Record Formats (PDRFs) in 3D Tiles, advancing runtime analytics using per-point metadata. <a href="https://cesium.com/blog/2024/03/20/preserving-more-metadata-for-point-clouds-using-3dtiles/" rel="noopener noreferrer" target="_blank">Read more.</a></li>\n</ul>\n<h5 id="2024-02-22">2024-02-22</h5>\n<ul>\n<li>It is now significantly faster to tile imagery, reality models, and terrain with Cesium ion.</li>\n</ul>\n<h5 id="2024-01-23">2024-01-23</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2024/01/23/introducing-cesium-world-bathymetry/" rel="noopener noreferrer" target="_blank">Introducing Cesium World Bathymetry</a></li>\n</ul>\n<h5 id="2023-12-14">2023-12-14</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/12/14/new-cesium-ion-self-hosted/" rel="noopener noreferrer" target="_blank">Cesium ion Self-Hosted is now available to run in your environment</a></li>\n</ul>\n<hr />\n<h5 id="2023-11-01">2023-11-01</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/11/01/new-reality-tiler/" rel="noopener noreferrer" target="_blank">Introducing the new Reality Tiler</a></li>\n</ul>\n<hr />\n<h5 id="2023-10-26">2023-10-26</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/10/26/photorealistic-3d-tiles-in-cesium-ion/" rel="noopener noreferrer" target="_blank">Google Photorealistic 3D Tiles are now available in Cesium ion</a></li>\n</ul>\n<hr />\n<h5 id="2023-09-15">2023-09-15</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/09/20/ion-improvements-apac/" rel="noopener noreferrer" target="_blank">Major Performance Improvements for Cesium ion in Asia-Pacific</a></li>\n</ul>\n<hr />\n<h5 id="2023-06-29">2023-06-29</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/06/29/google-photorealistic-3d-tiles-cesium-stories/" rel="noopener noreferrer" target="_blank">Google Photorealistic 3D Tiles Now Available in Cesium Stories</a></li>\n</ul>\n<hr />\n<h5 id="2022-11-08">2022-11-08</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2022/11/08/cesium-ion-archives-and-exports/" rel="noopener noreferrer" target="_blank">Cesium ion Archives and Exports</a></li>\n</ul>\n<hr />\n<h5 id="2022-06-23">2022-06-23</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2022/06/23/introducing-cesium-ion-teams/" rel="noopener noreferrer" target="_blank">Cesium ion Teams</a></li>\n</ul>\n<hr />\n<h5 id="2021-11-05">2021-11-05</h5>\n<ul>\n<li>Added endpoints for adding, editing, and deleting access tokens via the Cesium ion REST API. See the <a href="https://cesium.com/learn/ion/rest-api/#tag/Tokens" rel="noopener noreferrer" target="_blank">Tokens API Documentation</a>.</li>\n</ul>\n<hr />\n<h5 id="2021-09-13">2021-09-13</h5>\n<ul>\n<li>Added the ability to specify an email address to use for emailing invoices. See our <a href="https://community.cesium.com/t/cesium-ion-updates-email-invoices-for-commercial-users/15403" rel="noopener noreferrer" target="_blank">community forum post</a> for more details.</li>\n</ul>\n<hr />\n<h5 id="2021-09-09">2021-09-09</h5>\n<ul>\n<li>Added pagination to the Assets page, and added server-side sorting and filtering support to improve page responsiveness. These options are also available for listing assets with the <a href="https://cesium.com/learn/ion/rest-api/#operation/getAssets" rel="noopener noreferrer" target="_blank">Cesium ion REST API</a>. See <a href="https://community.cesium.com/t/cesium-ion-updates/15214" rel="noopener noreferrer" target="_blank">this post</a> in the Cesium Community Forum for more information.</li>\n</ul>\n<hr />\n<h5 id="2021-08-17">2021-08-17</h5>\n<ul>\n<li>Added the ability to sign into your Cesium ion account using your GitHub, Google, or Epic Games account. See this <a href="https://cesium.com/blog/2021/08/24/cesium-ion-signin-with-google-github-epic/" rel="noopener noreferrer" target="_blank">blog post</a> for more information.</li>\n</ul>\n<hr />\n<h5 id="2020-09-01">2020-09-01</h5>\n<p>We\'ve made several updates to Cesium OSM Buildings:</p>\n<ul>\n<li>Updated to the latest OSM data as of August 28, 2020.</li>\n<li>Improved handling of building parts inheriting incorrect heights from parent nodes. This previously caused some buildings to have missing pieces.</li>\n<li>Added two new properties, <code>cesium#longitude</code> and <code>cesium#latitude</code>, to expose the location of the building center in degrees.</li>\n</ul>\n<hr />\n<h5 id="2020-08-24">2020-08-24</h5>\n<ul>\n<li>Access tokens are now editable after creation.</li>\n</ul>\n<hr />\n<h5 id="2020-07-21">2020-07-21</h5>\n<p>We\'ve made several updates to Cesium OSM Buildings:</p>\n<ul>\n<li>It now uses the latest OSM data as of July 1st, 2020.</li>\n<li>Fixed buildings with an incorrect height or missing parts by improving compatibility with non-standard or partially incorrect OSM building tags. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/329" rel="noopener noreferrer" target="_blank">#329</a></li>\n<li>Fix many buildings which were not correctly clamped to Cesium World Terrain. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/321" rel="noopener noreferrer" target="_blank">#321</a></li>\n<li>Your applications will automatically use the latest version.</li>\n</ul>\n<hr />\n<h5 id="2020-06-12">2020-06-12</h5>\n<ul>\n<li>Added the ability to regenerate an account\'s default access token.</li>\n</ul>\n<hr />\n<h5 id="2020-06-01">2020-06-01</h5>\n<ul>\n<li>All Cesium ion users now have access to Cesium OSM Buildings - a 3D buildings layer covering the entire world built with OpenStreetMap building data, available as 3D Tiles. Read more about it on <a href="https://cesium.com/blog/2020/06/01/cesium-osm-buildings/" rel="noopener noreferrer" target="_blank">our blog</a>.</li>\n<li>The Cesium Stories editor now remembers which slide you were on if the current page is refreshed.</li>\n<li>Improved compatibility for zip file uploads.</li>\n</ul>\n<hr />\n<h5 id="2020-05-27">2020-05-27</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2020/05/27/stories-fullscreen-slides/" rel="noopener noreferrer" target="_blank">Tell Better Stories with Fullscreen Slides</a>.</li>\n<li>The Cesium Stories editor now includes slide numbers next to each thumbnail</li>\n<li>Fixed an issue in Google Chrome where pressing the page up or down keys would occasionally cause the entire application to scroll.</li>\n</ul>\n<hr />\n<h5 id="2020-05-07">2020-05-07</h5>\n<ul>\n<li>Non-time-dynamic Stories slides now have a duration value, which determines how long the slide is shown when viewing a story in slideshow mode.</li>\n<li>Fixed an issue that would cause occasional unexpected camera behavior when navigating in Stories.</li>\n<li>Pre-tiled 3D Tiles uploads can now be up to 150GB in size.</li>\n</ul>\n<hr />\n<h5 id="2020-04-20">2020-04-20</h5>\n<ul>\n<li>Fixed Stories 3D Tiles Styling support for feature properties with spaces in their name. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/307" rel="noopener noreferrer" target="_blank">#307</a></li>\n<li>Fixed an issue where loading multiple CZML/KML/GeoJSON files with overlapping feature IDs would cause issues with camera following in Stories.</li>\n<li>Fixed Stories embedding sample code to support browsers that require the <code>allowfullscreen</code> attribute.</li>\n<li>The Stories 3D Tiles location editor now allows for scale values smaller than 0.1.</li>\n<li>You can now append <code>&amp;play</code> to shared URLs to put Stories Viewer into slideshow mode automatically on load.</li>\n</ul>\n<hr />\n<h5 id="2020-03-31">2020-03-31</h5>\n<ul>\n<li>3D Tiles produced from KML/COLLADA models now embed each Placemark\'s name and ExtendedData values into the tileset as per-feature data, which can then be accessed by CesiumJS, <a href="https://cesium.com/blog/2020/02/18/3d-tiles-styling-with-stories/" rel="noopener noreferrer" target="_blank">3D Tiles styling</a> and <a href="https://cesium.com/blog/2020/03/25/explore-data-with-picking/" rel="noopener noreferrer" target="_blank">Feature picking</a>.</li>\n<li>Greatly improved visual quality of textures with repeating patterns when tiling 3D Models.</li>\n<li>Fixed tiling for some zip files generated on MacOS by ignoring the <code>__MACOSX</code> system directory. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/207" rel="noopener noreferrer" target="_blank">#207</a></li>\n</ul>\n<hr />\n<h5 id="2020-03-31-1">2020-03-31</h5>\n<ul>\n<li>3D Tiles produced from KML/COLLADA models now embed each Placemark\'s name and ExtendedData values into the tileset as per-feature data, which can then be accessed by CesiumJS, <a href="https://cesium.com/blog/2020/02/18/3d-tiles-styling-with-stories/" rel="noopener noreferrer" target="_blank">3D Tiles styling</a> and <a href="https://cesium.com/blog/2020/03/25/explore-data-with-picking/" rel="noopener noreferrer" target="_blank">Feature picking</a>.</li>\n<li>Greatly improved visual quality of textures with repeating patterns when tiling 3D Models.</li>\n<li>Fixed tiling for some zip files generated on MacOS by ignoring the <code>__MACOSX</code> system directory. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/207" rel="noopener noreferrer" target="_blank">https://github.com/CesiumGS/cesium-ion-community/issues/207</a></li>\n</ul>\n<hr />\n<h5 id="2020-03-25">2020-03-25</h5>\n<ul>\n<li>Cesium Stories now supports feature picking for 3D Tiles, CZML, KML, and GeoJSON. <a href="https://cesium.com/blog/2020/03/25/explore-data-with-picking/" rel="noopener noreferrer" target="_blank">Learn about how it works on our blog</a>.</li>\n<li>The Cesium Stories Editor now shows the infobox overlay as it will appear in shared stories.</li>\n<li>Added a new <code>profile:read</code> token scope and <code>GET /v1/me</code> route for retrieving profile information. See the <a href="https://cesium.com/learn/ion/rest-api/#tag/User" rel="noopener noreferrer" target="_blank">REST API</a> documentation for more details.</li>\n</ul>\n<hr />\n<h5 id="2020-03-14">2020-03-14</h5>\n<ul>\n<li>When viewing a shared story on mobile, you can now collapse or expand the Cesium window and info box.</li>\n<li>Cesium Stories styles now support tilesets that use the <code>3DTILES_batch_table_hierarchy</code> extension.</li>\n</ul>\n<hr />\n<h5 id="2020-03-04">2020-03-04</h5>\n<ul>\n<li>Cesium Stories now has improved support for time-dynamic data. Read all about it in our new <a href="https://cesium.com/blog/2020/03/04/time-dynamic-stories/" rel="noopener noreferrer" target="_blank">blog post and tutorial</a>.</li>\n<li>Fixed imagery tiling to correctly handle nodata values when the source raster does not include an alpha channel.</li>\n</ul>\n<hr />\n<h5 id="2020-02-19">2020-02-19</h5>\n<ul>\n<li>Added Support for <a href="https://cesium.com/blog/2020/02/18/3d-tiles-styling-with-stories/" rel="noopener noreferrer" target="_blank">3D Tiles Styling in Cesium Stories</a>.</li>\n</ul>\n<hr />\n<h5 id="2020-02-17">2020-02-17</h5>\n<ul>\n<li>Add additional image format support, most notably TIFF, to 3D Model tiling and glTF conversion.</li>\n<li>Fixes and improvements to point cloud tiling, including the ability to upload LAS and LAZ files together as a single asset.</li>\n</ul>\n<hr />\n<h5 id="2020-02-11">2020-02-11</h5>\n<ul>\n<li>Improved CityGML and KML tiling so corrupted images are ignored instead of causing an error.</li>\n</ul>\n<hr />\n<h5 id="2020-02-04">2020-02-04</h5>\n<ul>\n<li>Improved transitions between slides with time-dynamic content in Stories.</li>\n</ul>\n<hr />\n<h5 id="2020-01-30">2020-01-30</h5>\n<ul>\n<li>Fixed an issue that caused some assets to become incorrectly hidden in Stories.</li>\n</ul>\n<hr />\n<h5 id="2020-01-28">2020-01-28</h5>\n<ul>\n<li>Introducing <a href="https://cesium.com/blog/2020/01/28/cesium-stories/" rel="noopener noreferrer" target="_blank">Cesium Stories</a>. 🎉</li>\n</ul>\n<hr />\n<h5 id="2020-01-15">2020-01-15</h5>\n<ul>\n<li>Improved lighting in the asset preview window.</li>\n<li>Improved performance on high resolution devices, such as MacBooks, tablets, and phones.</li>\n</ul>\n<hr />\n<h5 id="2019-10-03">2019-10-03</h5>\n<ul>\n<li>Added support for uploading 3D Tilesets created by other tools.</li>\n<li><a href="https://cesium.com/blog/2019/10/25/upload-kml-geojson-czml/" rel="noopener noreferrer" target="_blank">Added support for uploading KML, GeoJSON, and CZML files</a>. These formats are currently hosted as-is without being tiled.</li>\n</ul>\n<hr />\n<h5 id="2019-09-17">2019-09-17</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2019/09/17/ion-gltf/" rel="noopener noreferrer" target="_blank">Convert and Host Your Models as glTF on Cesium ion</a>.</li>\n</ul>\n<hr />\n<h5 id="2019-09-16">2019-09-16</h5>\n<ul>\n<li>Imagery tiling now takes the alpha channel into account when mosaicking source rasters.</li>\n</ul>\n<hr />\n<h5 id="2019-09-11">2019-09-11</h5>\n<ul>\n<li>Improved support for subcentimeter imagery.</li>\n<li>Improved support for imagery rasters with color tables.</li>\n<li>Improved handling of invalid COLLADA models.</li>\n</ul>\n<hr />\n<h5 id="2019-08-29">2019-08-29</h5>\n<ul>\n<li>Fixed an issue when tiling from S3 when input data contained an S3 key that was also a directory.</li>\n</ul>\n<hr />\n<h5 id="2019-08-23">2019-08-23</h5>\n<ul>\n<li>Improved support for tiling rasters with color tables.</li>\n</ul>\n<hr />\n<h5 id="2019-08-21">2019-08-21</h5>\n<ul>\n<li>Fixed a regression which lead to some CityGML/KML features not being clamped to terrain. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/210" rel="noopener noreferrer" target="_blank">#210</a></li>\n<li>Improved imagery tiling support for overlapping rasters without an alpha channel <a href="https://github.com/CesiumGS/cesium-ion-community/issues/66" rel="noopener noreferrer" target="_blank">#66</a></li>\n<li>Fixed an issue in imagery tiling which caused black banding around some tilesets.</li>\n<li>Fixed an issue in imagery tiling that could cause leaf tiles to be lower resolution than the source raster.</li>\n<li>Added support for models with DirectDraw Surface (DDS) images throughout the pipeline.</li>\n</ul>\n<hr />\n<h5 id="2019-08-07">2019-08-07</h5>\n<ul>\n<li>Significantly improved the performance of clamping KML and CityGML files to terrain.</li>\n<li>Added an option to disable Draco compression for 3D Tiles. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/186" rel="noopener noreferrer" target="_blank">#186</a></li>\n<li>Fixed an issue which caused tiling terrain on top of a custom base layer to occasionally fail. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/183" rel="noopener noreferrer" target="_blank">#183</a>.</li>\n</ul>\n<hr />\n<h5 id="2019-08-05">2019-08-05</h5>\n<ul>\n<li>Improved support for FBX models.</li>\n<li>Imagery tiling is now ~30% faster when source rasters need reprojection.</li>\n<li>Fixed an issue with bad source models that could result in a completely transparent tileset.</li>\n</ul>\n<hr />\n<h5 id="2019-07-31">2019-07-31</h5>\n<ul>\n<li>Improved tiling of imagery and terrain with non-standard projections.</li>\n<li>Improved handling of terrain rasters with invalid heights.</li>\n</ul>\n<hr />\n<h5 id="2019-07-26">2019-07-26</h5>\n<ul>\n<li>Added Filmbox (FBX) to supported model formats.</li>\n<li>The tiling pipeline will now ignore missing, invalid, or unsupported textures and perform best-effort tiling.</li>\n<li>Added support for tiling models with Targa, GIF, BMP, PSD, HDR, PPM or PGM images.</li>\n<li>Improved error reporting for incomplete or invalid glTF, CityGML and KML/COLLADA uploads.</li>\n</ul>\n<hr />\n<h5 id="2019-07-16">2019-07-16</h5>\n<ul>\n<li>We now detect corrupt or invalid zip and kmz files and report a useful error message.</li>\n</ul>\n<hr />\n<h5 id="2019-07-12">2019-07-12</h5>\n<ul>\n<li>Fixed a long-standing issue where terrain tiling with base terrain would occasionally fail.</li>\n</ul>\n<hr />\n<h5 id="2019-07-10">2019-07-10</h5>\n<ul>\n<li>We\'ve updated two Bing assets to take advantage of newer imagery and tiles:<ul>\n<li>"Bing Maps Aerial with Labels" now uses the <em>AerialWithLabelsOnDemand</em> style instead of the deprecated <em>AerialWithLabels</em> style.</li>\n<li>"Bing Maps Road" now uses the the <em>RoadOnDemand</em> style instead of the deprecated <em>Road</em> style.</li></ul></li>\n</ul>\n<hr />\n<h5 id="2019-07-09">2019-07-09</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2019/07/09/announcing-cesium-series-a-investment/" rel="noopener noreferrer" target="_blank">Cesium: Series A Investment, Spinning Out, and the Future of 3D Geospatial</a></li>\n<li>We\'ve launched a <a href="https://cesium.com/blog/2019/07/08/blender-addon/" rel="noopener noreferrer" target="_blank">Cesium ion Blender add-on</a></li>\n<li>The assets dashboard now supports uploading of Zip64-based zip files.</li>\n<li>Temporary credentials provided by the REST API and used for uploading files now last 12 hours instead of 1.</li>\n<li>Fixed a bug in point cloud tiling which was causing longitudes and latitudes to be swapped for some point clouds.</li>\n<li>Fixed a bug that caused instanced geometry to be removed from models during the tiling process.</li>\n<li>Fixed tiling models that have upper case or multiple file extensions.</li>\n</ul>\n<hr />\n<h5 id="2019-06-27">2019-06-27</h5>\n<ul>\n<li>Terrain tiling now generates significantly smaller tilesets when lots of void data is present in the source raster.</li>\n<li>Improve compatibility for tiling imagery partially outside of Web Mercator bounds.</li>\n<li>Properly detect and report errors for models without geometry and rasters with local coordinate systems.</li>\n</ul>\n<hr />\n<h5 id="2019-05-28">2019-05-28</h5>\n<ul>\n<li>The batch table properties for 3D Tiles tilesets generated from CityGML and KML were updated for consistency with other tilers:<ul>\n<li><code>longitude</code> was renamed to <code>Longitude</code>.</li>\n<li><code>latitude</code> was renamed to <code>Latitude</code>.</li>\n<li><code>height</code> was renamed to <code>Height</code>.</li>\n<li><code>CityGMLObjectID</code> and <code>numberOfRenderedPrimitives</code> were removed.</li></ul></li>\n</ul>\n<hr />\n<h5 id="2019-04-24">2019-04-24</h5>\n<ul>\n<li>The ion REST API is now generally available. <a href="https://cesium.com/blog/2019/04/24/rest-api/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n</ul>\n<hr />\n<h5 id="2019-03-08">2019-03-08</h5>\n<ul>\n<li>We added support for tiling glTF models. <a href="https://cesium.com/blog/2019/02/21/gltf-uploads/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>We now accept ZIP file uploads. <a href="https://cesium.com/blog/2019/03/07/zip-uploads/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>The massive model tiler now supports WebP for smaller, faster tilesets. <a href="https://cesium.com/blog/2019/02/12/faster-3d-tiles-streaming-webp/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>Our photogrammetry pipeline no creates better tiles at lower levels of detail. <a href="https://cesium.com/blog/2019/02/06/better-low-lods/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>Cesium World Terrain added 1 meter resolution in areas across the US. <a href="https://cesium.com/blog/2019/02/04/cwt-1.2-released/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>Greatly improved support for invalid or messy data. In cases where the data is invalid, we now provide much better error messages so that you can fix the data on your end.</li>\n<li>There have also been numerous bug fixes and performance improvements to our tiling pipeline.</li>\n</ul>\n<hr />\n<h5 id="2018-12-10">2018-12-10</h5>\n<ul>\n<li>Photogrammetry tiling has greatly improved support for large textures.</li>\n<li>The 3D tiling pipeline supports non-ASCII and UTF8 characters in source data and file names.</li>\n<li>Improved tiling performance for photogrammetry, KML and CityGML.</li>\n<li>Point cloud tiling automatically removes extreme outliers.</li>\n<li>Point cloud tiling handles LAS and LAZ files with incorrect or corrupt header information.</li>\n</ul>\n<hr />\n<h5 id="2018-11-12">2018-11-12</h5>\n<ul>\n<li>Our 3D Tiling pipeline now supports BIM and CAD models (.obj, .dae). Check out the <a href="https://cesium.com/ion/?t=bimCad">in-app tutorial</a> to learn more.</li>\n<li>Newly created photogrammtry, BIM, and CAD 3D Tiles tilesets now require CesiumJS 1.50 or newer.</li>\n<li>Greatly improved OBJ and CityGML compatibility.</li>\n<li>Improved support for the tiling of <em>RealityCapture</em> output.</li>\n<li>Missing DAE textures will now be treated as white instead of failing to tile.</li>\n<li>Fixed an issue that resulted in photogrammetry tilesets missing small polygons <a href="https://github.com/CesiumGS/cesium-ion-community/issues/44" rel="noopener noreferrer" target="_blank">#44</a></li>\n<li>Fixed parsing of LAS files that contain less points than the header reports.</li>\n</ul>\n<hr />\n<h5 id="2018-10-25">2018-10-25</h5>\n<ul>\n<li>New in-app tutorials can be accessed from the <code>Help</code> menu on the upper-right.</li>\n<li>Cesium ion now integrates with Safe Software’s FME. See <a href="https://cesium.com/blog/2018/10/18/fme-integration/" rel="noopener noreferrer" target="_blank">our blog post</a> for more details.</li>\n</ul>\n<hr />\n<h5 id="2018-10-02">2018-10-02</h5>\n<ul>\n<li>Point cloud preview now enables point attenuation and eye dome lighting.</li>\n</ul>\n<hr />\n<h5 id="2018-09-25">2018-09-25</h5>\n<ul>\n<li>LAZ point cloud support has been added to the 3D Tiling pipeline.</li>\n<li>Access Tokens can now be configured with separate scopes to allow more fine-grained access to the ion API.</li>\n<li>Fix KML terrain clamping and improve support for KML altitudeMode.</li>\n</ul>\n<hr />\n<h5 id="2018-09-19">2018-09-19</h5>\n<ul>\n<li>We\'ve launched <a href="https://status.cesium.com" rel="noopener noreferrer" target="_blank">status.cesium.com</a> to provide server status and incident tracking for all ion users.</li>\n</ul>\n<hr />\n<h5 id="2018-09-17">2018-09-17</h5>\n<ul>\n<li>Our 3D Tiles pipeline is now available to all users! Currently supported formats include:<ul>\n<li>LASer (.las)</li>\n<li>CityGML (.citygml, .xml, .gml)</li>\n<li>KML/COLLADA (.kml, .kmz)</li>\n<li>Photogrammetry (.obj, .dae)</li></ul></li>\n<li>See <a href="https://cesium.com/learn/3d-tiling/tiler-data-formats/" rel="noopener noreferrer" target="_blank">Tiler Data Types and Formats</a> for additional details</li>\n</ul>\n<hr />\n<h5 id="2018-09-06">2018-09-06</h5>\n<ul>\n<li>We\'ve launched the 3D Tiles Location Editor, which let\'s you adjust the location, rotation, and scale of a 3D Tiles tileset as well as associate it with a specific terrain asset.</li>\n<li>The asset preview window will now load the terrain associated with a 3D tileset.</li>\n<li>3D Tiles assets that are not geolocated now correctly display in the asset preview window.</li>\n<li>Sentinel-2 imagery is now used as the base imagery layer in the asset preview window.</li>\n<li>Location information is no longer configured when tiling photogrammetry models. The location can be adjusted afterwards (if desired) using the new 3D Tiles Location Editor.</li>\n</ul>\n<hr />\n<h5 id="2018-08-30">2018-08-30</h5>\n<ul>\n<li>Cesium World Terrain in the United States now includes areas with up to 0.5m resolution (<a href="https://cesium.com/blog/2018/08/29/updated-world-terrain/" rel="noopener noreferrer" target="_blank">blog post</a>).</li>\n<li>Added WMTS imagery support. Read all about it in our <a href="https://cesium.com/blog/2018/07/23/ion-wmts-support/" rel="noopener noreferrer" target="_blank">blog post</a>.</li>\n<li>You can now view usage statistics for your account and tokens on the <a href="https://cesium.com/ion/usage" rel="noopener noreferrer" target="_blank">Usage page</a>.</li>\n<li>Streamlined the upload interface to be easier for new users, require less clicking, and provide better error reporting.</li>\n<li>The preview window now displays an outline that represents asset boundaries.</li>\n<li>Improved progress reporting to provide better insight into the tiling pipeline and enhanced error reporting.</li>\n<li>We now support uploading of Erdas Imagine (.img) files for terrain and imagery.</li>\n</ul>\n<hr />\n<h5 id="2018-06-06">2018-06-06</h5>\n<ul>\n<li>Dragging and dropping files and directories for upload now maintains relative paths.</li>\n</ul>\n<hr />\n<h5 id="2018-05-10">2018-05-10</h5>\n<ul>\n<li>We added a list of supported file formats to the asset uploaded page.</li>\n<li>Autofilled username and password fields will now work properly in Safari and iOS browsers.</li>\n</ul>\n<hr />\n<h5 id="2018-05-08">2018-05-08</h5>\n<ul>\n<li>Provide better lighting in the asset preview window by making sure the sun is always overhead. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/3" rel="noopener noreferrer" target="_blank">#3</a></li>\n<li>Fixed erroneous error message that was displayed when changing username or email address, even though the change succeeded.</li>\n</ul>\n<hr />\n<h5 id="2018-05-01">2018-05-01</h5>\n<ul>\n<li>Cesium ion has officially launched! Read all about it in our <a href="https://cesium.com/blog/2018/05/01/get-your-cesium-ion-community-account/" rel="noopener noreferrer" target="_blank">blog post</a>.</li>\n<li>Starting June 1, the beta.cesium.com URL will not work; use cesium.com instead.</li>\n</ul>'}),define("Core/createChangelogPopover",["Core/Analytics","text!./ChangelogEmbed.html","jquery"],function(e,t,n){"use strict";return function(i,r){const o=n(`#${i}`);let a;o.popover({placement:"bottom",content:t,viewport:r,container:r,html:!0,sanitize:!1}).on("inserted.bs.popover",function(){const e=n(this).attr("aria-describedby");n(`#${e}`).addClass("changelog-popover")}).on("shown.bs.popover",function(){const t=n(this),i=t.attr("aria-describedby"),r=n(`#${i}`);e.sendEvent(e.category.ION_DASHBOARD,e.action.OPEN_CHANGELOG,e.label.APPLICATION),a=function(e){t.is(e.target)||0!==t.has(e.target).length||0!==r.has(e.target).length||t.popover("hide")},o.parent().addClass("active"),document.body.addEventListener("click",a)}).on("hidden.bs.popover",function(e){o.parent().removeClass("active"),n(e.target).data("bs.popover").inState.click=!1}).on("hide.bs.popover",function(){document.body.removeEventListener("click",a)})}}),define("Core/createSupportPopover",["Core/Analytics","jquery"],function(e,t){"use strict";Cesium.Check;const n=Cesium.createGuid;return function(i,r,o){const a=`ion-${n()}`,s=`ion-${n()}`;let l;const c=`<p>Posting on the <a id="${a}" href="https://community.cesium.com/" target="_blank" rel="noopener">community forum</a> is the fastest way to get an answer from the Cesium team.</p><p>If you need to ask a question in private, email <a id="${s}"href="mailto:support@cesium.com" target="_blank" rel="noopener">support@cesium.com</a>.</p>`;function u(){e.sendEvent(r,e.action.CLICK_COMMUNITY_SUPPORT,o)}function d(){e.sendEvent(e.category.ION_DASHBOARD,e.action.CLICK_PRIVATE_SUPPORT,e.label.Application)}t(`#${i}`).popover({placement:"bottom",content:c,html:!0,sanitize:!1}).on("shown.bs.popover",function(){const n=t(this),i=n.attr("aria-describedby"),c=t(`#${i}`);e.sendEvent(r,e.action.OPEN_SUPPORT,o),document.getElementById(a).addEventListener("click",u),document.getElementById(s).addEventListener("click",d),l=function(e){n.is(e.target)||0!==n.has(e.target).length||0!==c.has(e.target).length||n.popover("hide")},document.body.addEventListener("click",l)}).on("hidden.bs.popover",function(e){t(e.target).data("bs.popover").inState.click=!1}).on("hide.bs.popover",function(){document.getElementById(a).removeEventListener("click",u),document.getElementById(s).removeEventListener("click",d),document.body.removeEventListener("click",l)})}}),define("Core/isRouteEnabled",["Core/Feature","Core/Services"],function(e,t){"use strict";function n(n){if(!Cesium.defined(n.requires))return!0;for(const i of n.requires)if("function"==typeof i){if(!i())return!1}else if(e.isUserFeature(i)){if(!e.isEnabledForUser(i,t.userObject()))return!1}else{if(!e.isServerFeature(i))throw new Cesium.DeveloperError("unknown item in requires. Expected function or Feature.Server or Feature.User");if(!e.isEnabledForServer(i))return!1}return!0}return{forActiveUser:n,forServer:function(t){if(!Cesium.defined(t.requires))return!0;for(const n of t.requires)if(e.isServerFeature(n)&&!e.isEnabledForServer(n))return!1;return!0},guardFunction:function(e,t){return!!n(t.config)||"notfound"}}}),define("Core/getIonExtras",["./Services"],function(e){"use strict";Cesium.Check;const t=Cesium.defined,n=Cesium.IonResource,i=Cesium.Matrix4;return async function(r){const o=await n.fromAssetId(r),a=await o.fetchJson();if(t(a.asset)&&t(a.asset.extras)&&t(a.asset.extras.ion)){const n=a.asset.extras.ion.terrainId;if("object"==typeof n&&null!==n){const i=e.apiHostname;t(n[i])?a.asset.extras.ion.terrainId=n[i]:t(n.default)?a.asset.extras.ion.terrainId=n.default:delete a.asset.extras.ion.terrainId}return a.asset.extras.ion}const s=t(a.root.transform);return{movable:s,georeferenced:!s||!i.equals(a.root.transform,i.IDENTITY)}}}),define("Views/Components/FileUploadItem",[],function(){"use strict";Cesium.Check;const e=Cesium.defined;function t(e,t){this.sourceData=e,this.loaded=0,this.total=e.size,this.uploadFailed=!1,this._updateProgressCallback=t,this.onProgress=this.onProgress.bind(this)}return t.prototype.onProgress=function(t){e(t.total)&&t.total>0?(this.loaded=t.loaded,this.total=t.total):t.loaded>0&&(this.loaded=this.total),this._updateProgressCallback()},t.prototype.upload=async function(t,n){const i=new AWS.S3({apiVersion:"2006-03-01",region:"us-east-1",signatureVersion:"v4",endpoint:t.endpoint,credentials:new AWS.Credentials(t.accessKey,t.secretAccessKey,t.sessionToken),correctClockSkew:!0});let r;const o=this.sourceData,a=i.upload({Body:o.body,Bucket:t.bucket,ContentType:"application/octet-stream",Key:t.prefix+o.path});let s;a.on("httpUploadProgress",this.onProgress),e(n)&&(r=n.addEventListener(function(){a.abort()}));try{s=await a.promise()}catch(l){this.uploadFailed=!0}finally{e(r)&&r()}return s},t}),define("Views/Components/ProgressBar",["Core/defaultValue","knockout"],function(e,t){"use strict";const n=Cesium.defined;function i(r,o){o=e(o,"");const a=n(r)?r:t.observable(0);this._text=o,this._value=a;const s=t.observable(i.State.IN_PROGRESS);this._textValue=t.pureComputed(function(){return s()===i.State.SUCCESS?`${o}complete`:`${o+a().toFixed(2)}%`}),this.state=s}return Object.defineProperties(i.prototype,{value:{get:function(){return this._value}},states:{get:function(){return i.State}}}),i.State={IN_PROGRESS:"progress-bar-default progress-bar-striped",SUCCESS:"progress-bar-success",ERROR:"progress-bar-danger",CANCELED:"progress-bar-canceled"},i}),define("Core/DataStoreType",[],function(){"use strict";return Object.freeze({AWS:"AWS",FILE_SYSTEM:"FILE_SYSTEM"})}),function(e){var t="object"==typeof exports&&exports&&!exports.nodeType&&exports,n="object"==typeof module&&module&&!module.nodeType&&module,i="object"==typeof global&&global;i.global!==i&&i.window!==i&&i.self!==i||(e=i);var r,o,a=2147483647,s=36,l=/^xn--/,c=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function f(e){throw new RangeError(d[e])}function m(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function g(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+m((e=e.replace(u,".")).split("."),t).join(".")}function v(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function b(e){return m(e,function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)}).join("")}function y(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:s}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,n){var i=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;i+=s)e=h(e/35);return h(i+36*e/(e+38))}function x(e){var t,n,i,r,o,l,c,u,d,p,m=[],g=e.length,v=0,w=128,x=72;for((n=e.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&f("not-basic"),m.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<g;){for(o=v,l=1,c=s;r>=g&&f("invalid-input"),((u=y(e.charCodeAt(r++)))>=s||u>h((a-v)/l))&&f("overflow"),v+=u*l,!(u<(d=c<=x?1:c>=x+26?26:c-x));c+=s)l>h(a/(p=s-d))&&f("overflow"),l*=p;x=_(v-o,t=m.length+1,0==o),h(v/t)>a-w&&f("overflow"),w+=h(v/t),v%=t,m.splice(v++,0,w)}return b(m)}function S(e){var t,n,i,r,o,l,c,u,d,m,g,b,y,x,S,T=[];for(b=(e=v(e)).length,t=128,n=0,o=72,l=0;l<b;++l)(g=e[l])<128&&T.push(p(g));for(i=r=T.length,r&&T.push("-");i<b;){for(c=a,l=0;l<b;++l)(g=e[l])>=t&&g<c&&(c=g);for(c-t>h((a-n)/(y=i+1))&&f("overflow"),n+=(c-t)*y,t=c,l=0;l<b;++l)if((g=e[l])<t&&++n>a&&f("overflow"),g==t){for(u=n,d=s;!(u<(m=d<=o?1:d>=o+26?26:d-o));d+=s)S=u-m,x=s-m,T.push(p(w(m+S%x,0))),u=h(S/x);T.push(p(w(u,0))),o=_(n,y,i==r),n=0,++i}++n,++t}return T.join("")}if(r={version:"1.3.2",ucs2:{decode:v,encode:b},decode:x,encode:S,toASCII:function(e){return g(e,function(e){return c.test(e)?"xn--"+S(e):e})},toUnicode:function(e){return g(e,function(e){return l.test(e)?x(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",[],function(){return r});else if(t&&n)if(module.exports==t)n.exports=r;else for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);else e.punycode=r}(this),define("Uri/src/punycode",function(){}),
/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define("Uri/src/IPv6",t):e.IPv6=t(e)}(this,function(e){"use strict";var t=e&&e.IPv6;return{best:function(e){var t,n,i=e.toLowerCase().split(":"),r=i.length,o=8;for(""===i[0]&&""===i[1]&&""===i[2]?(i.shift(),i.shift()):""===i[0]&&""===i[1]?i.shift():""===i[r-1]&&""===i[r-2]&&i.pop(),-1!==i[(r=i.length)-1].indexOf(".")&&(o=7),t=0;t<r&&""!==i[t];t++);if(t<o)for(i.splice(t,1,"0000");i.length<o;)i.splice(t,0,"0000");for(var a=0;a<o;a++){n=i[a].split("");for(var s=0;s<3&&("0"===n[0]&&n.length>1);s++)n.splice(0,1);i[a]=n.join("")}var l=-1,c=0,u=0,d=-1,h=!1;for(a=0;a<o;a++)h?"0"===i[a]?u+=1:(h=!1,u>c&&(l=d,c=u)):"0"===i[a]&&(h=!0,d=a,u=1);u>c&&(l=d,c=u),c>1&&i.splice(l,c,""),r=i.length;var p="";for(""===i[0]&&(p=":"),a=0;a<r&&(p+=i[a],a!==r-1);a++)p+=":";return""===i[r-1]&&(p+=":"),p},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}),
/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define("Uri/src/SecondLevelDomains",t):e.SecondLevelDomains=t(e)}(this,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1)return!1;var r=n.list[e.slice(t+1)];return!!r&&r.indexOf(" "+e.slice(i+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var i=n.list[e.slice(t+1)];return!!i&&i.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1)return null;var r=n.list[e.slice(t+1)];return r?r.indexOf(" "+e.slice(i+1,t)+" ")<0?null:e.slice(i+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n}),
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define("Uri/src/URI",["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(this,function(e,t,i,r){"use strict";var o=r&&r.URI;function a(e,t){var n=arguments.length>=1;if(!(this instanceof a))return n?arguments.length>=2?new a(e,t):new a(e):new a;if(void 0===e){if(n)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&n)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}a.version="1.19.11";var s=a.prototype,l=Object.prototype.hasOwnProperty;function c(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function u(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function d(e){return"Array"===u(e)}function h(e,t){var n,i,r={};if("RegExp"===u(t))r=null;else if(d(t))for(n=0,i=t.length;n<i;n++)r[t[n]]=!0;else r[t]=!0;for(n=0,i=e.length;n<i;n++){(r&&void 0!==r[e[n]]||!r&&t.test(e[n]))&&(e.splice(n,1),i--,n--)}return e}function p(e,t){var n,i;if(d(t)){for(n=0,i=t.length;n<i;n++)if(!p(e,t[n]))return!1;return!0}var r=u(t);for(n=0,i=e.length;n<i;n++)if("RegExp"===r){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function f(e,t){if(!d(e)||!d(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function m(e){return e.replace(/^\/+|\/+$/g,"")}function g(e){return escape(e)}function v(e){return encodeURIComponent(e).replace(/[!'()*]/g,g).replace(/\*/g,"%2A")}a._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:a.preventInvalidHostname,duplicateQueryParameters:a.duplicateQueryParameters,escapeQuerySpace:a.escapeQuerySpace}},a.preventInvalidHostname=!1,a.duplicateQueryParameters=!1,a.escapeQuerySpace=!0,a.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,a.idn_expression=/[^a-z0-9\._-]/i,a.punycode_expression=/(xn--)/i,a.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,a.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,a.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},a.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,a.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},a.hostProtocols=["http","https"],a.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,a.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},a.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return a.domAttributes[t]}},a.encode=v,a.decode=decodeURIComponent,a.iso8859=function(){a.encode=escape,a.decode=unescape},a.unicode=function(){a.encode=v,a.decode=decodeURIComponent},a.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},a.encodeQuery=function(e,t){var n=a.encode(e+"");return void 0===t&&(t=a.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},a.decodeQuery=function(e,t){e+="",void 0===t&&(t=a.escapeQuerySpace);try{return a.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}};var b,y={encode:"encode",decode:"decode"},w=function(e,t){return function(i){try{return a[t](i+"").replace(a.characters[e][t].expression,function(n){return a.characters[e][t].map[n]})}catch(n){return i}}};for(b in y)a[b+"PathSegment"]=w("pathname",y[b]),a[b+"UrnPathSegment"]=w("urnpath",y[b]);var _=function(e,t,n){return function(i){var r;r=n?function(e){return a[t](a[n](e))}:a[t];for(var o=(i+"").split(e),s=0,l=o.length;s<l;s++)o[s]=r(o[s]);return o.join(e)}};function x(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function S(e,t){return function(n,i){return void 0===n?this._parts[e]||"":(null!==n&&(n+="").charAt(0)===t&&(n=n.substring(1)),this._parts[e]=n,this.build(!i),this)}}a.decodePath=_("/","decodePathSegment"),a.decodeUrnPath=_(":","decodeUrnPathSegment"),a.recodePath=_("/","encodePathSegment","decode"),a.recodeUrnPath=_(":","encodeUrnPathSegment","decode"),a.encodeReserved=w("reserved","encode"),a.parse=function(e,t){var n;return t||(t={preventInvalidHostname:a.preventInvalidHostname}),(n=(e=(e=e.replace(a.leading_whitespace_expression,"")).replace(a.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),(n=e.indexOf("?"))>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===(e=(e=e.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(t.protocol=null,e=e.substring(2),e=a.parseAuthority(e,t)):(n=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(a.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3).replace(/\\/g,"/")?(e=e.substring(n+3),e=a.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0)),t.path=e,t},a.parseHost=function(e,t){e||(e="");var n,i,r=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===r&&(r=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,r)||null,"/"===t.port&&(t.port=null);else{var o=e.indexOf(":"),s=e.indexOf("/"),l=e.indexOf(":",o+1);-1!==l&&(-1===s||l<s)?(t.hostname=e.substring(0,r)||null,t.port=null):(i=e.substring(0,r).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)}return t.hostname&&"/"!==e.substring(r).charAt(0)&&(r++,e="/"+e),t.preventInvalidHostname&&a.ensureValidHostname(t.hostname,t.protocol),t.port&&a.ensureValidPort(t.port),e.substring(r)||"/"},a.parseAuthority=function(e,t){return e=a.parseUserinfo(e,t),a.parseHost(e,t)},a.parseUserinfo=function(e,t){var n=e;-1!==e.indexOf("\\")&&(e=e.replace(/\\/g,"/"));var i,r=e.indexOf("/"),o=e.lastIndexOf("@",r>-1?r:e.length-1);return o>-1&&(-1===r||o<r)?(i=e.substring(0,o).split(":"),t.username=i[0]?a.decode(i[0]):null,i.shift(),t.password=i[0]?a.decode(i.join(":")):null,e=n.substring(o+1)):(t.username=null,t.password=null),e},a.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,i,r,o={},s=e.split("&"),c=s.length,u=0;u<c;u++)n=s[u].split("="),i=a.decodeQuery(n.shift(),t),r=n.length?a.decodeQuery(n.join("="),t):null,"__proto__"!==i&&(l.call(o,i)?("string"!=typeof o[i]&&null!==o[i]||(o[i]=[o[i]]),o[i].push(r)):o[i]=r);return o},a.build=function(e){var t="",n=!1;return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//",n=!0),t+=a.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&n&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},a.buildHost=function(e){var t="";return e.hostname?(a.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},a.buildAuthority=function(e){return a.buildUserinfo(e)+a.buildHost(e)},a.buildUserinfo=function(e){var t="";return e.username&&(t+=a.encode(e.username)),e.password&&(t+=":"+a.encode(e.password)),t&&(t+="@"),t},a.buildQuery=function(e,t,n){var i,r,o,s,c="";for(r in e)if("__proto__"!==r&&l.call(e,r))if(d(e[r]))for(i={},o=0,s=e[r].length;o<s;o++)void 0!==e[r][o]&&void 0===i[e[r][o]+""]&&(c+="&"+a.buildQueryParameter(r,e[r][o],n),!0!==t&&(i[e[r][o]+""]=!0));else void 0!==e[r]&&(c+="&"+a.buildQueryParameter(r,e[r],n));return c.substring(1)},a.buildQueryParameter=function(e,t,n){return a.encodeQuery(e,n)+(null!==t?"="+a.encodeQuery(t,n):"")},a.addQuery=function(e,t,n){if("object"==typeof t)for(var i in t)l.call(t,i)&&a.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),d(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}},a.setQuery=function(e,t,n){if("object"==typeof t)for(var i in t)l.call(t,i)&&a.setQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===n?null:n}},a.removeQuery=function(e,t,n){var i,r,o;if(d(t))for(i=0,r=t.length;i<r;i++)e[t[i]]=void 0;else if("RegExp"===u(t))for(o in e)t.test(o)&&(e[o]=void 0);else if("object"==typeof t)for(o in t)l.call(t,o)&&a.removeQuery(e,o,t[o]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===u(n)?!d(e[t])&&n.test(e[t])?e[t]=void 0:e[t]=h(e[t],n):e[t]!==String(n)||d(n)&&1!==n.length?d(e[t])&&(e[t]=h(e[t],n)):e[t]=void 0:e[t]=void 0}},a.hasQuery=function(e,t,n,i){switch(u(t)){case"String":break;case"RegExp":for(var r in e)if(l.call(e,r)&&t.test(r)&&(void 0===n||a.hasQuery(e,r,n)))return!0;return!1;case"Object":for(var o in t)if(l.call(t,o)&&!a.hasQuery(e,o,t[o]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(u(n)){case"Undefined":return t in e;case"Boolean":return n===Boolean(d(e[t])?e[t].length:e[t]);case"Function":return!!n(e[t],t,e);case"Array":return!!d(e[t])&&(i?p:f)(e[t],n);case"RegExp":return d(e[t])?!!i&&p(e[t],n):Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return d(e[t])?!!i&&p(e[t],n):e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},a.joinPaths=function(){for(var e=[],t=[],n=0,i=0;i<arguments.length;i++){var r=new a(arguments[i]);e.push(r);for(var o=r.segment(),s=0;s<o.length;s++)"string"==typeof o[s]&&t.push(o[s]),o[s]&&n++}if(!t.length||!n)return new a("");var l=new a("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||l.path("/"+l.path()),l.normalize()},a.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return n<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(n)&&"/"===t.charAt(n)||(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},a.withinString=function(e,t,n){n||(n={});var i=n.start||a.findUri.start,r=n.end||a.findUri.end,o=n.trim||a.findUri.trim,s=n.parens||a.findUri.parens,l=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var c=i.exec(e);if(!c)break;var u=c.index;if(n.ignoreHtml){var d=e.slice(Math.max(u-3,0),u);if(d&&l.test(d))continue}for(var h=u+e.slice(u).search(r),p=e.slice(u,h),f=-1;;){var m=s.exec(p);if(!m)break;var g=m.index+m[0].length;f=Math.max(f,g)}if(!((p=f>-1?p.slice(0,f)+p.slice(f).replace(o,""):p.replace(o,"")).length<=c[0].length||n.ignore&&n.ignore.test(p))){var v=t(p,u,h=u+p.length,e);void 0!==v?(v=String(v),e=e.slice(0,u)+v+e.slice(h),i.lastIndex=u+v.length):i.lastIndex=h}}return i.lastIndex=0,e},a.ensureValidHostname=function(t,n){var i=!!t,r=!1;if(!!n&&(r=p(a.hostProtocols,n)),r&&!i)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(t&&t.match(a.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(a.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},a.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},a.noConflict=function(e){if(e){var t={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(t.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(t.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=r.SecondLevelDomains.noConflict()),t}return r.URI===this&&(r.URI=o),this},s.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=a.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new a(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=x("protocol"),s.username=x("username"),s.password=x("password"),s.hostname=x("hostname"),s.port=x("port"),s.query=S("query","?"),s.fragment=S("fragment","#"),s.search=function(e,t){var n=this.query(e,t);return"string"==typeof n&&n.length?"?"+n:n},s.hash=function(e,t){var n=this.fragment(e,t);return"string"==typeof n&&n.length?"#"+n:n},s.pathname=function(e,t){if(void 0===e||!0===e){var n=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?a.decodeUrnPath:a.decodePath)(n):n}return this._parts.urn?this._parts.path=e?a.recodeUrnPath(e):"":this._parts.path=e?a.recodePath(e):"/",this.build(!t),this},s.path=s.pathname,s.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=a._parts();var i=e instanceof a,r="object"==typeof e&&(e.hostname||e.path||e.pathname);e.nodeName&&(e=e[a.getDomAttribute(e)]||"",r=!1);if(!i&&r&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=a.parse(String(e),this._parts);else{if(!i&&!r)throw new TypeError("invalid input");var o=i?e._parts:e;for(n in o)"query"!==n&&l.call(this._parts,n)&&(this._parts[n]=o[n]);o.query&&this.query(o.query,!1)}return this.build(!t),this},s.is=function(e){var t=!1,n=!1,r=!1,o=!1,s=!1,l=!1,c=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,n=a.ip4_expression.test(this._parts.hostname),r=a.ip6_expression.test(this._parts.hostname),s=(o=!(t=n||r))&&i&&i.has(this._parts.hostname),l=o&&a.idn_expression.test(this._parts.hostname),c=o&&a.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return o;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return r;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var T=s.protocol,A=s.port,C=s.hostname;s.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(a.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return T.call(this,e,t)},s.scheme=s.protocol,s.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),a.ensureValidPort(e))),A.call(this,e,t))},s.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==a.parseHost(e,n))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=n.hostname,this._parts.preventInvalidHostname&&a.ensureValidHostname(e,this._parts.protocol)}return C.call(this,e,t)},s.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var i=a(e);return this.protocol(i.protocol()).authority(i.authority()).build(!t),this},s.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?a.buildHost(this._parts):"";if("/"!==a.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?a.buildAuthority(this._parts):"";if("/"!==a.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=a.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==e[e.length-1]&&(e+="@"),a.parseUserinfo(e,this._parts),this.build(!t),this},s.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=a.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},s.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,r=this._parts.hostname.substring(0,i),o=new RegExp("^"+c(r));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&a.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(o,e),this.build(!t),this},s.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(a.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var r=new RegExp(c(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(r,e)}return this.build(!t),this},s.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(n+1);return!0!==t&&i&&i.list[r.toLowerCase()]&&i.get(this._parts.hostname)||r}var o;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');o=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},s.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?a.decodePath(i):i}var r=this._parts.path.length-this.filename().length,o=this._parts.path.substring(0,r),s=new RegExp("^"+c(o));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=a.recodePath(e),this._parts.path=this._parts.path.replace(s,e),this.build(!t),this},s.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return e?a.decodePathSegment(i):i}var r=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(r=!0);var o=new RegExp(c(this.filename())+"$");return e=a.recodePath(e),this._parts.path=this._parts.path.replace(o,e),r?this.normalizePath(t):this.build(!t),this},s.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,r=this.filename(),o=r.lastIndexOf(".");return-1===o?"":(n=r.substring(o+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",e?a.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var s,l=this.suffix();if(l)s=e?new RegExp(c(l)+"$"):new RegExp(c("."+l)+"$");else{if(!e)return this;this._parts.path+="."+a.recodePath(e)}return s&&(e=a.recodePath(e),this._parts.path=this._parts.path.replace(s,e)),this.build(!t),this},s.segment=function(e,t,n){var i=this._parts.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),a=r.split(i);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(o&&a.shift(),e<0&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(d(t)){a=[];for(var s=0,l=t.length;s<l;s++)(t[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(m(t[s])))}else(t||"string"==typeof t)&&(t=m(t),""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t?a[e]=m(t):a.splice(e,1);return o&&a.unshift(""),this.path(a.join(i),n)},s.segmentCoded=function(e,t,n){var i,r,o;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(d(i=this.segment(e,t,n)))for(r=0,o=i.length;r<o;r++)i[r]=a.decode(i[r]);else i=void 0!==i?a.decode(i):void 0;return i}if(d(t))for(r=0,o=t.length;r<o;r++)t[r]=a.encode(t[r]);else t="string"==typeof t||t instanceof String?a.encode(t):t;return this.segment(e,t,n)};var E=s.query;return s.query=function(e,t){if(!0===e)return a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=a.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=a.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):E.call(this,e,t)},s.setQuery=function(e,t,n){var i=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var r in e)l.call(e,r)&&(i[r]=e[r])}return this._parts.query=a.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},s.addQuery=function(e,t,n){var i=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return a.addQuery(i,e,void 0===t?null:t),this._parts.query=a.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},s.removeQuery=function(e,t,n){var i=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return a.removeQuery(i,e,t),this._parts.query=a.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},s.hasQuery=function(e,t,n){var i=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return a.hasQuery(i,e,t,n)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},s.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},s.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===a.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},s.normalizePath=function(e){var t,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=a.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var i,r,o="";for("/"!==(n=a.recodePath(n)).charAt(0)&&(t=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(o=n.substring(1).match(/^(\.\.\/)+/)||"")&&(o=o[0]);-1!==(i=n.search(/\/\.\.(\/|$)/));)0!==i?(-1===(r=n.substring(0,i).lastIndexOf("/"))&&(r=i),n=n.substring(0,r)+n.substring(i+3)):n=n.substring(3);return t&&this.is("relative")&&(n=o+n.substring(1)),this._parts.path=n,this.build(!e),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(a.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},s.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var e=a.encode,t=a.decode;a.encode=escape,a.decode=decodeURIComponent;try{this.normalize()}finally{a.encode=e,a.decode=t}return this},s.unicode=function(){var e=a.encode,t=a.decode;a.encode=v,a.decode=unescape;try{this.normalize()}finally{a.encode=e,a.decode=t}return this},s.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var i="",r=0,o=t._parts.query.split("&"),s=o.length;r<s;r++){var l=(o[r]||"").split("=");i+="&"+a.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(i+="="+a.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=a.decodeQuery(t.hash(),!0)},s.absoluteTo=function(e){var t,n,i,r=this.clone(),o=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof a||(e=new a(e)),r._parts.protocol)return r;if(r._parts.protocol=e._parts.protocol,this._parts.hostname)return r;for(n=0;i=o[n];n++)r._parts[i]=e._parts[i];return r._parts.path?(".."===r._parts.path.substring(-2)&&(r._parts.path+="/"),"/"!==r.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),r._parts.path=(t?t+"/":"")+r._parts.path,r.normalizePath())):(r._parts.path=e._parts.path,r._parts.query||(r._parts.query=e._parts.query)),r.build(),r},s.relativeTo=function(e){var t,n,i,r,o,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new a(e).normalize(),t=s._parts,n=e._parts,r=s.path(),o=e.path(),"/"!==r.charAt(0))throw new Error("URI is already relative");if("/"!==o.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==n.hostname||t.port!==n.port)return s.build();if(t.hostname=null,t.port=null,r===o)return t.path="",s.build();if(!(i=a.commonPath(r,o)))return s.build();var l=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=l+t.path.substring(i.length)||"./",s.build()},s.equals=function(e){var t,n,i,r,o,s=this.clone(),c=new a(e),u={};if(s.normalize(),c.normalize(),s.toString()===c.toString())return!0;if(i=s.query(),r=c.query(),s.query(""),c.query(""),s.toString()!==c.toString())return!1;if(i.length!==r.length)return!1;for(o in t=a.parseQuery(i,this._parts.escapeQuerySpace),n=a.parseQuery(r,this._parts.escapeQuerySpace),t)if(l.call(t,o)){if(d(t[o])){if(!f(t[o],n[o]))return!1}else if(t[o]!==n[o])return!1;u[o]=!0}for(o in n)if(l.call(n,o)&&!u[o])return!1;return!0},s.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},s.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},s.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},a}),define("Uri",["Uri/src/URI"],function(e){return e}),define("Views/Components/FileUploadListItem",["./FileUploadItem","./ProgressBar","Core/AppData","Core/defaultValue","Core/defer","Core/Resource","Core/Services","Core/DataStoreType","knockout","Uri"],function(e,t,n,i,r,o,a,s,l,c){"use strict";Cesium.Check;const u=Cesium.defined,d=(Cesium.DeveloperError,Cesium.Event),h={WAITING:"file-upload-waiting",IN_PROGRESS:"file-upload-progress",SUCCESS:"file-upload-success",ERROR:"file-upload-error",CANCELED:"file-upload-canceled"};function p(f){const m=(f=i(f,Cesium.Frozen.EMPTY_OBJECT)).metadata,g=f.sourceData,v=f.removeMessage,b=f.assetAdded,y=f.assetFailed,w=f.servicePromise,_=new d,x=new t,S=l.observable(h.WAITING),T=l.observable(0),A=l.observable(0),C=l.observable(""),E=l.observable(!1),k=l.observable("Initiating..."),I=[];function P(){let e=0,t=0;I.forEach(function(n){e+=n.loaded,t+=n.total}),T(e),A(t),x.value(e/t*100)}for(let t=0;t<g.length;t++){const n=g[t];u(n.body)&&!u(n.parent)&&I.push(new e(n,P))}const D=r();this.loaded=T,this.total=A,this.status=S,this.statusIcon=l.pureComputed(function(){const e=S();return e===h.CANCELED?"fa-ban":e===h.SUCCESS?"fa-check":e===h.ERROR?"fa-warning":"hide"}),this.name=m.name,this.showFileList=I.length>1,this.fileCount=I.length,this.progressBar=x,this.abort=_,this.filesVisible=E,this.filesIcon=l.pureComputed(function(){return E()?"fa-minus-square-o":"fa-plus-square-o"}),this.isWaiting=l.pureComputed(function(){return S()===h.WAITING}),this.isError=l.pureComputed(function(){return S()===h.ERROR}),this.waitingMessage=k,this.isInProgress=l.pureComputed(function(){return S()===h.IN_PROGRESS}),this.errorText=C,this.promise=D.promise.then(function(e){return b.raiseEvent(e),e}),this.fileUploadItems=I,this.assetMetadata=void 0;const O=this;let M;this.completePromise=w.then(function(e){if(S()!==h.WAITING)return void D.reject();M=e.onComplete;const t=e.assetMetadata;if(O.assetMetadata=t,D.resolve(t),S(h.IN_PROGRESS),n.dataStoreType===s.FILE_SYSTEM){const e=a.postFiles(g,t.id,e=>{const t=e.loaded,n=e.total;T(t),A(n),x.value(t/n*100)}),n=e.promise,i=e.request;return u(_)&&_.addEventListener(function(){return i.abort()}),n}const i=e.uploadLocation,r=[];let o=0;const l=I.length;function c(){if(o<l){return I[o++].upload(i,_).then(c)}}const d=Math.min(p.MAX_FILE_UPLOAD_COUNT,I.length);for(let n=0;n<d;n++)r.push(c());return Promise.all(r)}).then(function(){if(S()!==h.IN_PROGRESS)return;if(I.some(function(e){return e.uploadFailed}))return Promise.reject(new Error("Unable to upload all asset files"));k("Finalizing..."),S(h.WAITING);const e=new c(M.url);let t=new o({url:a.apiEndpoint});return t=t.getDerivedResource({url:e.path()}),Promise.resolve(o.postJson({url:t.url,data:M.fields}))}).then(function(){if(S()!==h.WAITING){const e=O.assetMetadata;return u(e)?a.deleteAsset(e.id).then(function(){y.raiseEvent(e)}):void 0}S(h.SUCCESS)}).catch(function(e){D.reject();const t=O.assetMetadata;return u(t)?a.deleteAsset(t.id).then(function(){return y.raiseEvent(t),Promise.reject(e)}):Promise.reject(e)}).catch(function(e){S(h.ERROR);let t=a.getErrorMessage(e);return 0!==t.indexOf("Not enough storage")&&-1===t.indexOf("exceeded 32 bits")||(t="The file you are trying to upload is too large for this browser.  Try using a different browser."),T(0),A(0),C(t),Promise.reject(e)}),this._removeMessage=v}return p.prototype.toggleFileVisibility=function(){this.filesVisible(!this.filesVisible())},p.prototype.close=function(){this._removeMessage(this)},p.prototype.cancel=function(){const e=this.status;if(e()===h.IN_PROGRESS||e()===h.WAITING){e(h.CANCELED),this.abort.raiseEvent(),this.loaded(0),this.total(0);const t=this;window.setTimeout(function(){t.close()},3e3)}},p._state=h,p.MAX_FILE_UPLOAD_COUNT=100,p}),define("Views/Components/FileUploadList",["./FileUploadListItem","./ProgressBar","knockout"],function(e,t,n){"use strict";Cesium.Check;const i=Cesium.defined,r=Cesium.Event,o="error",a="pending",s="success",l=n.observableArray(),c=n.observableArray([]),u=n.observable(0),d=n.observable(!1),h={};function p(e){l.remove(e),0===l().length&&h.close()}const f=new r,m=new r,g=new r;h.assetAdded=f,h.assetFailed=m,h.uploadComplete=g,h.pendingAssets=n.observableArray(),h.show=n.observable(!1),h.expanded=n.observable(!0),h.state=n.pureComputed(function(){return d()?o:0===u()?(h.progressBar.state(t.State.SUCCESS),s):(h.progressBar.state(t.State.IN_PROGRESS),a)}),h.hasUploadsInProgress=n.pureComputed(function(){return 0!==u()});const v=n.pureComputed(function(){const e=c();if(0===e.length)return 100;let t=0,n=0;return e.forEach(function(e){t+=e.loaded(),n+=e.total()}),n>0?t/n*100:0});return h.progressBar=new t(v,"Uploading "),h.showProgressBar=n.pureComputed(function(){return h.state()!==o}),h.tabCss=n.pureComputed(function(){return h.state()===o?"fa-warning":"fa-caret-up"}),h.tabText=n.pureComputed(function(){return h.state()===o?"Error uploading 1 or more files":""}),Object.defineProperties(h,{messages:{get:function(){return l}}}),h.expand=function(){h.expanded(!0)},h.minimize=function(){h.expanded(!1)},h.upload=async function(n,r,o){const a=f.addEventListener(function(e){h.pendingAssets.push(e.id),a()});h.show(!0);const s=new e({metadata:n,sourceData:r,removeMessage:p,assetAdded:f,assetFailed:m,servicePromise:o});return l.push(s),c.push(s),h.progressBar.state(t.State.IN_PROGRESS),u(u()+1),s.completePromise=s.completePromise.then(function(){h.uploadComplete.raiseEvent(s.assetMetadata)}).catch(function(){d(!0)}).finally(function(){if(i(s.assetMetadata)){const e=h.pendingAssets,t=e.indexOf(s.assetMetadata.id);-1!==t&&e.splice(t,1)}u(u()-1),0===u()&&(c.removeAll(),h.progressBar.state(t.State.SUCCESS))}),s.promise},h.close=function(){h.show(!1),h.expanded(!0),d(!1),l.removeAll(),u(0)},h.cancelAll=function(){l().forEach(function(e){e.cancel()})},h}),define("Views/Components/switchProfile",["../../Core/Services","./FileUploadList","plugins/dialog","toastr"],function(e,t,n,i){"use strict";return async function(r,o,a){if(t.hasUploadsInProgress()){if("Cancel"===await n.showMessage(`Switching to ${r} will abort all uploads in progress.`,"Files are currently uploading",[`Yes, abort uploads and switch to ${r}`,"Cancel"]))return!1;t.cancelAll(),t.close()}try{if(await e.getSwitchProfile(o),a)window.location.assign(a);else if(/^\/account\/teams/.test(window.location.pathname)||window.location.pathname.endsWith("/account")){const e=require.toUrl(""),t=window.location.origin+e;window.location.assign(t)}else{const e=new URL(window.location.href);e.searchParams.delete("signInAs"),window.location.assign(e.toString())}return!0}catch(s){return i.error(e.getErrorMessage(s)),!1}}}),define("Core/ReactInterop",["plugins/router","Core/Analytics","Core/AppData","Core/defaultValue","Core/getIonExtras","Core/Feature","Core/Services","Views/Components/switchProfile","knockout"],function(e,t,n,i,r,o,a,s,l){"use strict";const{Check:c,defined:u}=Cesium,d={analytics:t,router:e,appData:n,services:Object.assign({getIonExtras:r},a),switchProfile:s,user:a.userObject,feature:o},h="scrollable-page-container";function p(e){return document.createElement(e)}function f(e,t){const n=p(e),i=document.createElement("div");return i.appendChild(n),u(t)&&u(t.className)&&(i.className=t.className),{element:n,container:i}}class m{constructor(e){c.typeOf.object("options",e),c.typeOf.string("options.tag",e.tag);const{tag:t,properties:n,eventListeners:i}=e;if(this.element=p(t),this.properties=l.isPureComputed(n)?n:l.pureComputed(function(){return n}),this._propertiesSubscription=void 0,u(i))for(const[r,o]of Object.entries(i))this.element.addEventListener(r,o)}binding(){return!1}attached(){this._propertiesSubscription=this.properties.subscribe(this.setProperties,this),this.setProperties(this.properties())}detached(){this._propertiesSubscription&&(this._propertiesSubscription.dispose(),this._propertiesSubscription=void 0)}setProperties(e){if(u(e)){c.typeOf.object("properties",e);for(const t of Object.entries(e)){const e=t[0],n=t[1];this.element[e]=n}}}getView(){return this.element}}return m.prototype.__moduleId__="Core/ReactInterop",{createElement:p,createElementInContainer:f,createPage:function(e,t={}){c.typeOf.string("elementName",e),t.onActivate&&c.typeOf.func("options.onActivate",t.onActivate),t.eventListeners&&c.typeOf.object("options.eventListeners",t.eventListeners),t=i(t,Cesium.Frozen.EMPTY_OBJECT);const n=i(t.showHeader,!0),r=t.eventListeners,o=t.onActivate;return class{constructor(){const t=f(e,{className:h});if(this.element=t.element,this.container=t.container,r)for(const[e,n]of Object.entries(r))this.element.addEventListener(e,n)}get showHeader(){return n}biding(){return!1}activate(e,t){o&&o(this.element,e,t)}getView(){return this.container}}},convertToDurandalContextProvider:function(e){e.setAttribute("data-ion-durandal-context",""),e.getDurandalContext=function(){return d}},Component:m,dependencies:d,PAGE_CSS_CLASSNAME:h}}),define("Views/Components/OnScreenHelp/generateTemplateRegex",[],function(){"use strict";Cesium.Check;return function(e){return new RegExp(`\\{\\{\\s*${e}\\s*:\\s*(.*[^\\s])\\s*\\}\\}`)}}),
/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("DOMPurify",t):(e="undefined"!=typeof globalThis?globalThis:e||self).DOMPurify=t()}(this,function(){"use strict";const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:i,getOwnPropertyDescriptor:r}=Object;let{freeze:o,seal:a,create:s}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;o||(o=function(e){return e}),a||(a=function(e){return e}),l||(l=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e.apply(t,i)}),c||(c=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new e(...n)});const u=A(Array.prototype.forEach),d=A(Array.prototype.lastIndexOf),h=A(Array.prototype.pop),p=A(Array.prototype.push),f=A(Array.prototype.splice),m=A(String.prototype.toLowerCase),g=A(String.prototype.toString),v=A(String.prototype.match),b=A(String.prototype.replace),y=A(String.prototype.indexOf),w=A(String.prototype.trim),_=A(Object.prototype.hasOwnProperty),x=A(RegExp.prototype.test),S=(T=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c(T,t)});var T;function A(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return l(e,t,i)}}function C(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;t&&t(e,null);let o=i.length;for(;o--;){let t=i[o];if("string"==typeof t){const e=r(t);e!==t&&(n(i)||(i[o]=e),t=e)}e[t]=!0}return e}function E(e){for(let t=0;t<e.length;t++){_(e,t)||(e[t]=null)}return e}function k(t){const n=s(null);for(const[i,r]of e(t)){_(t,i)&&(Array.isArray(r)?n[i]=E(r):r&&"object"==typeof r&&r.constructor===Object?n[i]=k(r):n[i]=r)}return n}function I(e,t){for(;null!==e;){const n=r(e,t);if(n){if(n.get)return A(n.get);if("function"==typeof n.value)return A(n.value)}e=i(e)}return function(){return null}}const P=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),O=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),M=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),R=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=o(["#text"]),F=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),U=o(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),V=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),B=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),H=a(/<%[\w\W]*|[\w\W]*%>/gm),G=a(/\$\{[\w\W]*/gm),j=a(/^data-[\-\w.\u00B7-\uFFFF]+$/),z=a(/^aria-[\-\w]+$/),q=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y=a(/^(?:\w+script|data):/i),W=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),K=a(/^html$/i),X=a(/^[a-z][.\w]*(-[.\w]+)+$/i);var Z=Object.freeze({__proto__:null,ARIA_ATTR:z,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:X,DATA_ATTR:j,DOCTYPE_NAME:K,ERB_EXPR:H,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:Y,MUSTACHE_EXPR:$,TMPLIT_EXPR:G});const J=1,Q=3,ee=7,te=8,ne=9,ie=function(){return"undefined"==typeof window?null:window};var re=function t(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();const i=e=>t(e);if(i.version="3.2.7",i.removed=[],!n||!n.document||n.document.nodeType!==ne||!n.Element)return i.isSupported=!1,i;let{document:r}=n;const a=r,l=a.currentScript,{DocumentFragment:c,HTMLTemplateElement:T,Node:A,Element:E,NodeFilter:$,NamedNodeMap:H=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:G,DOMParser:j,trustedTypes:z}=n,Y=E.prototype,W=I(Y,"cloneNode"),X=I(Y,"remove"),re=I(Y,"nextSibling"),oe=I(Y,"childNodes"),ae=I(Y,"parentNode");if("function"==typeof T){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let se,le="";const{implementation:ce,createNodeIterator:ue,createDocumentFragment:de,getElementsByTagName:he}=r,{importNode:pe}=a;let fe={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};i.isSupported="function"==typeof e&&"function"==typeof ae&&ce&&void 0!==ce.createHTMLDocument;const{MUSTACHE_EXPR:me,ERB_EXPR:ge,TMPLIT_EXPR:ve,DATA_ATTR:be,ARIA_ATTR:ye,IS_SCRIPT_OR_DATA:we,ATTR_WHITESPACE:_e,CUSTOM_ELEMENT:xe}=Z;let{IS_ALLOWED_URI:Se}=Z,Te=null;const Ae=C({},[...P,...D,...O,...L,...N]);let Ce=null;const Ee=C({},[...F,...U,...V,...B]);let ke=Object.seal(s(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,Pe=null,De=!0,Oe=!0,Me=!1,Le=!0,Re=!1,Ne=!0,Fe=!1,Ue=!1,Ve=!1,Be=!1,$e=!1,He=!1,Ge=!0,je=!1,ze=!0,qe=!1,Ye={},We=null;const Ke=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Xe=null;const Ze=C({},["audio","video","img","source","image","track"]);let Je=null;const Qe=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",nt="http://www.w3.org/1999/xhtml";let it=nt,rt=!1,ot=null;const at=C({},[et,tt,nt],g);let st=C({},["mi","mo","mn","ms","mtext"]),lt=C({},["annotation-xml"]);const ct=C({},["title","style","font","a","script"]);let ut=null;const dt=["application/xhtml+xml","text/html"];let ht=null,pt=null;const ft=r.createElement("form"),mt=function(e){return e instanceof RegExp||e instanceof Function},gt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!pt||pt!==e){if(e&&"object"==typeof e||(e={}),e=k(e),ut=-1===dt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ht="application/xhtml+xml"===ut?g:m,Te=_(e,"ALLOWED_TAGS")?C({},e.ALLOWED_TAGS,ht):Ae,Ce=_(e,"ALLOWED_ATTR")?C({},e.ALLOWED_ATTR,ht):Ee,ot=_(e,"ALLOWED_NAMESPACES")?C({},e.ALLOWED_NAMESPACES,g):at,Je=_(e,"ADD_URI_SAFE_ATTR")?C(k(Qe),e.ADD_URI_SAFE_ATTR,ht):Qe,Xe=_(e,"ADD_DATA_URI_TAGS")?C(k(Ze),e.ADD_DATA_URI_TAGS,ht):Ze,We=_(e,"FORBID_CONTENTS")?C({},e.FORBID_CONTENTS,ht):Ke,Ie=_(e,"FORBID_TAGS")?C({},e.FORBID_TAGS,ht):k({}),Pe=_(e,"FORBID_ATTR")?C({},e.FORBID_ATTR,ht):k({}),Ye=!!_(e,"USE_PROFILES")&&e.USE_PROFILES,De=!1!==e.ALLOW_ARIA_ATTR,Oe=!1!==e.ALLOW_DATA_ATTR,Me=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Re=e.SAFE_FOR_TEMPLATES||!1,Ne=!1!==e.SAFE_FOR_XML,Fe=e.WHOLE_DOCUMENT||!1,Be=e.RETURN_DOM||!1,$e=e.RETURN_DOM_FRAGMENT||!1,He=e.RETURN_TRUSTED_TYPE||!1,Ve=e.FORCE_BODY||!1,Ge=!1!==e.SANITIZE_DOM,je=e.SANITIZE_NAMED_PROPS||!1,ze=!1!==e.KEEP_CONTENT,qe=e.IN_PLACE||!1,Se=e.ALLOWED_URI_REGEXP||q,it=e.NAMESPACE||nt,st=e.MATHML_TEXT_INTEGRATION_POINTS||st,lt=e.HTML_INTEGRATION_POINTS||lt,ke=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&mt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&mt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Re&&(Oe=!1),$e&&(Be=!0),Ye&&(Te=C({},N),Ce=[],!0===Ye.html&&(C(Te,P),C(Ce,F)),!0===Ye.svg&&(C(Te,D),C(Ce,U),C(Ce,B)),!0===Ye.svgFilters&&(C(Te,O),C(Ce,U),C(Ce,B)),!0===Ye.mathMl&&(C(Te,L),C(Ce,V),C(Ce,B))),e.ADD_TAGS&&(Te===Ae&&(Te=k(Te)),C(Te,e.ADD_TAGS,ht)),e.ADD_ATTR&&(Ce===Ee&&(Ce=k(Ce)),C(Ce,e.ADD_ATTR,ht)),e.ADD_URI_SAFE_ATTR&&C(Je,e.ADD_URI_SAFE_ATTR,ht),e.FORBID_CONTENTS&&(We===Ke&&(We=k(We)),C(We,e.FORBID_CONTENTS,ht)),ze&&(Te["#text"]=!0),Fe&&C(Te,["html","head","body"]),Te.table&&(C(Te,["tbody"]),delete Ie.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');se=e.TRUSTED_TYPES_POLICY,le=se.createHTML("")}else void 0===se&&(se=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(o){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(z,l)),null!==se&&"string"==typeof le&&(le=se.createHTML(""));o&&o(e),pt=e}},vt=C({},[...D,...O,...M]),bt=C({},[...L,...R]),yt=function(e){p(i.removed,{element:e});try{ae(e).removeChild(e)}catch(t){X(e)}},wt=function(e,t){try{p(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(n){p(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Be||$e)try{yt(t)}catch(n){}else try{t.setAttribute(e,"")}catch(n){}},_t=function(e){let t=null,n=null;if(Ve)e="<remove></remove>"+e;else{const t=v(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ut&&it===nt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=se?se.createHTML(e):e;if(it===nt)try{t=(new j).parseFromString(i,ut)}catch(a){}if(!t||!t.documentElement){t=ce.createDocument(it,"template",null);try{t.documentElement.innerHTML=rt?le:i}catch(a){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),it===nt?he.call(t,Fe?"html":"body")[0]:Fe?t.documentElement:o},xt=function(e){return ue.call(e.ownerDocument||e,e,$.SHOW_ELEMENT|$.SHOW_COMMENT|$.SHOW_TEXT|$.SHOW_PROCESSING_INSTRUCTION|$.SHOW_CDATA_SECTION,null)},St=function(e){return e instanceof G&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof H)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Tt=function(e){return"function"==typeof A&&e instanceof A};function At(e,t,n){u(e,e=>{e.call(i,t,n,pt)})}const Ct=function(e){let t=null;if(At(fe.beforeSanitizeElements,e,null),St(e))return yt(e),!0;const n=ht(e.nodeName);if(At(fe.uponSanitizeElement,e,{tagName:n,allowedTags:Te}),Ne&&e.hasChildNodes()&&!Tt(e.firstElementChild)&&x(/<[/\w!]/g,e.innerHTML)&&x(/<[/\w!]/g,e.textContent))return yt(e),!0;if(e.nodeType===ee)return yt(e),!0;if(Ne&&e.nodeType===te&&x(/<[/\w]/g,e.data))return yt(e),!0;if(!Te[n]||Ie[n]){if(!Ie[n]&&kt(n)){if(ke.tagNameCheck instanceof RegExp&&x(ke.tagNameCheck,n))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))return!1}if(ze&&!We[n]){const t=ae(e)||e.parentNode,n=oe(e)||e.childNodes;if(n&&t){for(let i=n.length-1;i>=0;--i){const r=W(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,re(e))}}}return yt(e),!0}return e instanceof E&&!function(e){let t=ae(e);t&&t.tagName||(t={namespaceURI:it,tagName:"template"});const n=m(e.tagName),i=m(t.tagName);return!!ot[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===nt?"svg"===n:t.namespaceURI===et?"svg"===n&&("annotation-xml"===i||st[i]):Boolean(vt[n]):e.namespaceURI===et?t.namespaceURI===nt?"math"===n:t.namespaceURI===tt?"math"===n&&lt[i]:Boolean(bt[n]):e.namespaceURI===nt?!(t.namespaceURI===tt&&!lt[i])&&!(t.namespaceURI===et&&!st[i])&&!bt[n]&&(ct[n]||!vt[n]):!("application/xhtml+xml"!==ut||!ot[e.namespaceURI]))}(e)?(yt(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!x(/<\/no(script|embed|frames)/i,e.innerHTML)?(Re&&e.nodeType===Q&&(t=e.textContent,u([me,ge,ve],e=>{t=b(t,e," ")}),e.textContent!==t&&(p(i.removed,{element:e.cloneNode()}),e.textContent=t)),At(fe.afterSanitizeElements,e,null),!1):(yt(e),!0)},Et=function(e,t,n){if(Ge&&("id"===t||"name"===t)&&(n in r||n in ft))return!1;if(Oe&&!Pe[t]&&x(be,t));else if(De&&x(ye,t));else if(!Ce[t]||Pe[t]){if(!(kt(e)&&(ke.tagNameCheck instanceof RegExp&&x(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&x(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t,e))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&x(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Je[t]);else if(x(Se,b(n,_e,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(n,"data:")||!Xe[e]){if(Me&&!x(we,b(n,_e,"")));else if(n)return!1}else;return!0},kt=function(e){return"annotation-xml"!==e&&v(e,xe)},It=function(e){At(fe.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||St(e))return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ce,forceKeepAttr:void 0};let r=t.length;for(;r--;){const a=t[r],{name:s,namespaceURI:l,value:c}=a,d=ht(s),p=c;let f="value"===s?p:w(p);if(n.attrName=d,n.attrValue=f,n.keepAttr=!0,n.forceKeepAttr=void 0,At(fe.uponSanitizeAttribute,e,n),f=n.attrValue,!je||"id"!==d&&"name"!==d||(wt(s,e),f="user-content-"+f),Ne&&x(/((--!?|])>)|<\/(style|title|textarea)/i,f)){wt(s,e);continue}if("attributename"===d&&v(f,"href")){wt(s,e);continue}if(n.forceKeepAttr)continue;if(!n.keepAttr){wt(s,e);continue}if(!Le&&x(/\/>/i,f)){wt(s,e);continue}Re&&u([me,ge,ve],e=>{f=b(f,e," ")});const m=ht(e.nodeName);if(Et(m,d,f)){if(se&&"object"==typeof z&&"function"==typeof z.getAttributeType)if(l);else switch(z.getAttributeType(m,d)){case"TrustedHTML":f=se.createHTML(f);break;case"TrustedScriptURL":f=se.createScriptURL(f)}if(f!==p)try{l?e.setAttributeNS(l,s,f):e.setAttribute(s,f),St(e)?yt(e):h(i.removed)}catch(o){wt(s,e)}}else wt(s,e)}At(fe.afterSanitizeAttributes,e,null)},Pt=function e(t){let n=null;const i=xt(t);for(At(fe.beforeSanitizeShadowDOM,t,null);n=i.nextNode();)At(fe.uponSanitizeShadowNode,n,null),Ct(n),It(n),n.content instanceof c&&e(n.content);At(fe.afterSanitizeShadowDOM,t,null)};return i.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null,o=null,s=null;if(rt=!e,rt&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Tt(e)){if("function"!=typeof e.toString)throw S("toString is not a function");if("string"!=typeof(e=e.toString()))throw S("dirty is not a string, aborting")}if(!i.isSupported)return e;if(Ue||gt(t),i.removed=[],"string"==typeof e&&(qe=!1),qe){if(e.nodeName){const t=ht(e.nodeName);if(!Te[t]||Ie[t])throw S("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof A)n=_t("\x3c!----\x3e"),r=n.ownerDocument.importNode(e,!0),r.nodeType===J&&"BODY"===r.nodeName||"HTML"===r.nodeName?n=r:n.appendChild(r);else{if(!Be&&!Re&&!Fe&&-1===e.indexOf("<"))return se&&He?se.createHTML(e):e;if(n=_t(e),!n)return Be?null:He?le:""}n&&Ve&&yt(n.firstChild);const l=xt(qe?e:n);for(;o=l.nextNode();)Ct(o),It(o),o.content instanceof c&&Pt(o.content);if(qe)return e;if(Be){if($e)for(s=de.call(n.ownerDocument);n.firstChild;)s.appendChild(n.firstChild);else s=n;return(Ce.shadowroot||Ce.shadowrootmode)&&(s=pe.call(a,s,!0)),s}let d=Fe?n.outerHTML:n.innerHTML;return Fe&&Te["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&x(K,n.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+d),Re&&u([me,ge,ve],e=>{d=b(d,e," ")}),se&&He?se.createHTML(d):d},i.setConfig=function(){gt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ue=!0},i.clearConfig=function(){pt=null,Ue=!1},i.isValidAttribute=function(e,t,n){pt||gt({});const i=ht(e),r=ht(t);return Et(i,r,n)},i.addHook=function(e,t){"function"==typeof t&&p(fe[e],t)},i.removeHook=function(e,t){if(void 0!==t){const n=d(fe[e],t);return-1===n?void 0:f(fe[e],n,1)[0]}return h(fe[e])},i.removeHooks=function(e){fe[e]=[]},i.removeAllHooks=function(){fe={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},i}();return re}),/*! showdown v 2.1.0 - 21-04-2022 */
function(){function e(e){"use strict";var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i].defaultValue);return n}var t={},n={},i={},r=e(!0),o="vanilla",a={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:function(){"use strict";var t=e(!0),n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=!0);return n}()};function s(e,n){"use strict";var i=n?"Error in "+n+" extension->":"Error in unnamed extension",r={valid:!0,error:""};t.helper.isArray(e)||(e=[e]);for(var o=0;o<e.length;++o){var a=i+" sub-extension "+o+": ",s=e[o];if("object"!=typeof s)return r.valid=!1,r.error=a+"must be an object, but "+typeof s+" given",r;if(!t.helper.isString(s.type))return r.valid=!1,r.error=a+'property "type" must be a string, but '+typeof s.type+" given",r;var l=s.type=s.type.toLowerCase();if("language"===l&&(l=s.type="lang"),"html"===l&&(l=s.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return r.valid=!1,r.error=a+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===l){if(t.helper.isUndefined(s.listeners))return r.valid=!1,r.error=a+'. Extensions of type "listener" must have a property called "listeners"',r}else if(t.helper.isUndefined(s.filter)&&t.helper.isUndefined(s.regex))return r.valid=!1,r.error=a+l+' extensions must define either a "regex" property or a "filter" method',r;if(s.listeners){if("object"!=typeof s.listeners)return r.valid=!1,r.error=a+'"listeners" property must be an object but '+typeof s.listeners+" given",r;for(var c in s.listeners)if(s.listeners.hasOwnProperty(c)&&"function"!=typeof s.listeners[c])return r.valid=!1,r.error=a+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof s.listeners[c]+" given",r}if(s.filter){if("function"!=typeof s.filter)return r.valid=!1,r.error=a+'"filter" must be a function, but '+typeof s.filter+" given",r}else if(s.regex){if(t.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!(s.regex instanceof RegExp))return r.valid=!1,r.error=a+'"regex" property must either be a string or a RegExp object, but '+typeof s.regex+" given",r;if(t.helper.isUndefined(s.replace))return r.valid=!1,r.error=a+'"regex" extensions must implement a replace string or function',r}}return r}function l(e,t){"use strict";return"¨E"+t.charCodeAt(0)+"E"}t.helper={},t.extensions={},t.setOption=function(e,t){"use strict";return r[e]=t,this},t.getOption=function(e){"use strict";return r[e]},t.getOptions=function(){"use strict";return r},t.resetOptions=function(){"use strict";r=e(!0)},t.setFlavor=function(e){"use strict";if(!a.hasOwnProperty(e))throw Error(e+" flavor was not found");t.resetOptions();var n=a[e];for(var i in o=e,n)n.hasOwnProperty(i)&&(r[i]=n[i])},t.getFlavor=function(){"use strict";return o},t.getFlavorOptions=function(e){"use strict";if(a.hasOwnProperty(e))return a[e]},t.getDefaultOptions=function(t){"use strict";return e(t)},t.subParser=function(e,i){"use strict";if(t.helper.isString(e)){if(void 0===i){if(n.hasOwnProperty(e))return n[e];throw Error("SubParser named "+e+" not registered!")}n[e]=i}},t.extension=function(e,n){"use strict";if(!t.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=t.helper.stdExtName(e),t.helper.isUndefined(n)){if(!i.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return i[e]}"function"==typeof n&&(n=n()),t.helper.isArray(n)||(n=[n]);var r=s(n,e);if(!r.valid)throw Error(r.error);i[e]=n},t.getAllExtensions=function(){"use strict";return i},t.removeExtension=function(e){"use strict";delete i[e]},t.resetExtensions=function(){"use strict";i={}},t.validateExtension=function(e){"use strict";var t=s(e,null);return!!t.valid||(console.warn(t.error),!1)},t.hasOwnProperty("helper")||(t.helper={}),t.helper.isString=function(e){"use strict";return"string"==typeof e||e instanceof String},t.helper.isFunction=function(e){"use strict";return e&&"[object Function]"==={}.toString.call(e)},t.helper.isArray=function(e){"use strict";return Array.isArray(e)},t.helper.isUndefined=function(e){"use strict";return void 0===e},t.helper.forEach=function(e,n){"use strict";if(t.helper.isUndefined(e))throw new Error("obj param is required");if(t.helper.isUndefined(n))throw new Error("callback param is required");if(!t.helper.isFunction(n))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(n);else if(t.helper.isArray(e))for(var i=0;i<e.length;i++)n(e[i],i,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var r in e)e.hasOwnProperty(r)&&n(e[r],r,e)}},t.helper.stdExtName=function(e){"use strict";return e.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},t.helper.escapeCharactersCallback=l,t.helper.escapeCharacters=function(e,t,n){"use strict";var i="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(i="\\\\"+i);var r=new RegExp(i,"g");return e=e.replace(r,l)},t.helper.unescapeHTMLEntities=function(e){"use strict";return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var c=function(e,t,n,i){"use strict";var r,o,a,s,l,c=i||"",u=c.indexOf("g")>-1,d=new RegExp(t+"|"+n,"g"+c.replace(/g/g,"")),h=new RegExp(t,c.replace(/g/g,"")),p=[];do{for(r=0;a=d.exec(e);)if(h.test(a[0]))r++||(s=(o=d.lastIndex)-a[0].length);else if(r&&! --r){l=a.index+a[0].length;var f={left:{start:s,end:o},match:{start:o,end:a.index},right:{start:a.index,end:l},wholeMatch:{start:s,end:l}};if(p.push(f),!u)return p}}while(r&&(d.lastIndex=o));return p};t.helper.matchRecursiveRegExp=function(e,t,n,i){"use strict";for(var r=c(e,t,n,i),o=[],a=0;a<r.length;++a)o.push([e.slice(r[a].wholeMatch.start,r[a].wholeMatch.end),e.slice(r[a].match.start,r[a].match.end),e.slice(r[a].left.start,r[a].left.end),e.slice(r[a].right.start,r[a].right.end)]);return o},t.helper.replaceRecursiveRegExp=function(e,n,i,r,o){"use strict";if(!t.helper.isFunction(n)){var a=n;n=function(){return a}}var s=c(e,i,r,o),l=e,u=s.length;if(u>0){var d=[];0!==s[0].wholeMatch.start&&d.push(e.slice(0,s[0].wholeMatch.start));for(var h=0;h<u;++h)d.push(n(e.slice(s[h].wholeMatch.start,s[h].wholeMatch.end),e.slice(s[h].match.start,s[h].match.end),e.slice(s[h].left.start,s[h].left.end),e.slice(s[h].right.start,s[h].right.end))),h<u-1&&d.push(e.slice(s[h].wholeMatch.end,s[h+1].wholeMatch.start));s[u-1].wholeMatch.end<e.length&&d.push(e.slice(s[u-1].wholeMatch.end)),l=d.join("")}return l},t.helper.regexIndexOf=function(e,n,i){"use strict";if(!t.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(n instanceof RegExp==!1)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var r=e.substring(i||0).search(n);return r>=0?r+(i||0):r},t.helper.splitAtIndex=function(e,n){"use strict";if(!t.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,n),e.substring(n)]},t.helper.encodeEmailAddress=function(e){"use strict";var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=e.replace(/./g,function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e})},t.helper.padEnd=function(e,t,n){"use strict";return t|=0,n=String(n||" "),e.length>t?String(e):((t-=e.length)>n.length&&(n+=n.repeat(t/n.length)),String(e)+n.slice(0,t))},"undefined"==typeof console&&(console={warn:function(e){"use strict";alert(e)},log:function(e){"use strict";alert(e)},error:function(e){"use strict";throw e}}),t.helper.regexes={asteriskDashAndColon:/([*_:~])/g},t.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},t.Converter=function(e){"use strict";var n={},l=[],c=[],u={},d=o,h={parsed:{},raw:"",format:""};function p(e,n){if(n=n||null,t.helper.isString(e)){if(n=e=t.helper.stdExtName(e),t.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,n){"function"==typeof e&&(e=e(new t.Converter));t.helper.isArray(e)||(e=[e]);var i=s(e,n);if(!i.valid)throw Error(i.error);for(var r=0;r<e.length;++r)switch(e[r].type){case"lang":l.push(e[r]);break;case"output":c.push(e[r]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(t.extensions[e],e);if(t.helper.isUndefined(i[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=i[e]}"function"==typeof e&&(e=e()),t.helper.isArray(e)||(e=[e]);var r=s(e,n);if(!r.valid)throw Error(r.error);for(var o=0;o<e.length;++o){switch(e[o].type){case"lang":l.push(e[o]);break;case"output":c.push(e[o])}if(e[o].hasOwnProperty("listeners"))for(var a in e[o].listeners)e[o].listeners.hasOwnProperty(a)&&f(a,e[o].listeners[a])}}function f(e,n){if(!t.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof n)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof n+" given");u.hasOwnProperty(e)||(u[e]=[]),u[e].push(n)}!function(){for(var i in e=e||{},r)r.hasOwnProperty(i)&&(n[i]=r[i]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.extensions&&t.helper.forEach(n.extensions,p)}(),this._dispatch=function(e,t,n,i){if(u.hasOwnProperty(e))for(var r=0;r<u[e].length;++r){var o=u[e][r](e,t,this,n,i);o&&void 0!==o&&(t=o)}return t},this.listen=function(e,t){return f(e,t),this},this.makeHtml=function(e){if(!e)return e;var i={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:l,outputModifiers:c,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return e=(e=(e=(e=(e=e.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),n.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,n=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(n,"")}(e)),e="\n\n"+e+"\n\n",e=(e=t.subParser("detab")(e,n,i)).replace(/^[ \t]+$/gm,""),t.helper.forEach(l,function(r){e=t.subParser("runExtension")(r,e,n,i)}),e=t.subParser("metadata")(e,n,i),e=t.subParser("hashPreCodeTags")(e,n,i),e=t.subParser("githubCodeBlocks")(e,n,i),e=t.subParser("hashHTMLBlocks")(e,n,i),e=t.subParser("hashCodeTags")(e,n,i),e=t.subParser("stripLinkDefinitions")(e,n,i),e=t.subParser("blockGamut")(e,n,i),e=t.subParser("unhashHTMLSpans")(e,n,i),e=(e=(e=t.subParser("unescapeSpecialChars")(e,n,i)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),e=t.subParser("completeHTMLDocument")(e,n,i),t.helper.forEach(c,function(r){e=t.subParser("runExtension")(r,e,n,i)}),h=i.metadata,e},this.makeMarkdown=this.makeMd=function(e,n){if(e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!n){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");n=window.document}var i=n.createElement("div");i.innerHTML=e;var r={preList:function(e){for(var n=e.querySelectorAll("pre"),i=[],r=0;r<n.length;++r)if(1===n[r].childElementCount&&"code"===n[r].firstChild.tagName.toLowerCase()){var o=n[r].firstChild.innerHTML.trim(),a=n[r].firstChild.getAttribute("data-language")||"";if(""===a)for(var s=n[r].firstChild.className.split(" "),l=0;l<s.length;++l){var c=s[l].match(/^language-(.+)$/);if(null!==c){a=c[1];break}}o=t.helper.unescapeHTMLEntities(o),i.push(o),n[r].outerHTML='<precode language="'+a+'" precodenum="'+r.toString()+'"></precode>'}else i.push(n[r].innerHTML),n[r].innerHTML="",n[r].setAttribute("prenum",r.toString());return i}(i)};!function e(t){for(var n=0;n<t.childNodes.length;++n){var i=t.childNodes[n];3===i.nodeType?/\S/.test(i.nodeValue)||/^[ ]+$/.test(i.nodeValue)?(i.nodeValue=i.nodeValue.split("\n").join(" "),i.nodeValue=i.nodeValue.replace(/(\s)+/g,"$1")):(t.removeChild(i),--n):1===i.nodeType&&e(i)}}(i);for(var o=i.childNodes,a="",s=0;s<o.length;s++)a+=t.subParser("makeMarkdown.node")(o[s],r);return a},this.setOption=function(e,t){n[e]=t},this.getOption=function(e){return n[e]},this.getOptions=function(){return n},this.addExtension=function(e,t){p(e,t=t||null)},this.useExtension=function(e){p(e)},this.setFlavor=function(e){if(!a.hasOwnProperty(e))throw Error(e+" flavor was not found");var t=a[e];for(var i in d=e,t)t.hasOwnProperty(i)&&(n[i]=t[i])},this.getFlavor=function(){return d},this.removeExtension=function(e){t.helper.isArray(e)||(e=[e]);for(var n=0;n<e.length;++n){for(var i=e[n],r=0;r<l.length;++r)l[r]===i&&l.splice(r,1);for(var o=0;o<c.length;++o)c[o]===i&&c.splice(o,1)}},this.getAllExtensions=function(){return{language:l,output:c}},this.getMetadata=function(e){return e?h.raw:h.parsed},this.getMetadataFormat=function(){return h.format},this._setMetadataPair=function(e,t){h.parsed[e]=t},this._setMetadataFormat=function(e){h.format=e},this._setMetadataRaw=function(e){h.raw=e}},t.subParser("anchors",function(e,n,i){"use strict";var r=function(e,r,o,a,s,l,c){if(t.helper.isUndefined(c)&&(c=""),o=o.toLowerCase(),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)a="";else if(!a){if(o||(o=r.toLowerCase().replace(/ ?\n/g," ")),a="#"+o,t.helper.isUndefined(i.gUrls[o]))return e;a=i.gUrls[o],t.helper.isUndefined(i.gTitles[o])||(c=i.gTitles[o])}var u='<a href="'+(a=a.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"';return""!==c&&null!==c&&(u+=' title="'+(c=(c=c.replace(/"/g,"&quot;")).replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"'),n.openLinksInNewWindow&&!/^#/.test(a)&&(u+=' rel="noopener noreferrer" target="¨E95Eblank"'),u+=">"+r+"</a>"};return e=(e=(e=(e=(e=i.converter._dispatch("anchors.before",e,n,i)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r)).replace(/\[([^\[\]]+)]()()()()()/g,r),n.ghMentions&&(e=e.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,function(e,i,r,o,a){if("\\"===r)return i+o;if(!t.helper.isString(n.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var s=n.ghMentionsLink.replace(/\{u}/g,a),l="";return n.openLinksInNewWindow&&(l=' rel="noopener noreferrer" target="¨E95Eblank"'),i+'<a href="'+s+'"'+l+">"+o+"</a>"})),e=i.converter._dispatch("anchors.after",e,n,i)});var u=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,h=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,p=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,f=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,m=function(e){"use strict";return function(n,i,r,o,a,s,l){var c=r=r.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback),u="",d="",h=i||"",p=l||"";return/^www\./i.test(r)&&(r=r.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&s&&(u=s),e.openLinksInNewWindow&&(d=' rel="noopener noreferrer" target="¨E95Eblank"'),h+'<a href="'+r+'"'+d+">"+c+"</a>"+u+p}},g=function(e,n){"use strict";return function(i,r,o){var a="mailto:";return r=r||"",o=t.subParser("unescapeSpecialChars")(o,e,n),e.encodeEmails?(a=t.helper.encodeEmailAddress(a+o),o=t.helper.encodeEmailAddress(o)):a+=o,r+'<a href="'+a+'">'+o+"</a>"}};t.subParser("autoLinks",function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("autoLinks.before",e,t,n)).replace(h,m(t))).replace(f,g(t,n)),e=n.converter._dispatch("autoLinks.after",e,t,n)}),t.subParser("simplifiedAutoLinks",function(e,t,n){"use strict";return t.simplifiedAutoLink?(e=n.converter._dispatch("simplifiedAutoLinks.before",e,t,n),e=(e=t.excludeTrailingPunctuationFromURLs?e.replace(d,m(t)):e.replace(u,m(t))).replace(p,g(t,n)),e=n.converter._dispatch("simplifiedAutoLinks.after",e,t,n)):e}),t.subParser("blockGamut",function(e,n,i){"use strict";return e=i.converter._dispatch("blockGamut.before",e,n,i),e=t.subParser("blockQuotes")(e,n,i),e=t.subParser("headers")(e,n,i),e=t.subParser("horizontalRule")(e,n,i),e=t.subParser("lists")(e,n,i),e=t.subParser("codeBlocks")(e,n,i),e=t.subParser("tables")(e,n,i),e=t.subParser("hashHTMLBlocks")(e,n,i),e=t.subParser("paragraphs")(e,n,i),e=i.converter._dispatch("blockGamut.after",e,n,i)}),t.subParser("blockQuotes",function(e,n,i){"use strict";e=i.converter._dispatch("blockQuotes.before",e,n,i),e+="\n\n";var r=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return n.splitAdjacentBlockquotes&&(r=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),e=e.replace(r,function(e){return e=(e=(e=e.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),e=t.subParser("githubCodeBlocks")(e,n,i),e=(e=(e=t.subParser("blockGamut")(e,n,i)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=(n=n.replace(/^  /gm,"¨0")).replace(/¨0/g,"")}),t.subParser("hashBlock")("<blockquote>\n"+e+"\n</blockquote>",n,i)}),e=i.converter._dispatch("blockQuotes.after",e,n,i)}),t.subParser("codeBlocks",function(e,n,i){"use strict";e=i.converter._dispatch("codeBlocks.before",e,n,i);return e=(e=(e+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,function(e,r,o){var a=r,s=o,l="\n";return a=t.subParser("outdent")(a,n,i),a=t.subParser("encodeCode")(a,n,i),a=(a=(a=t.subParser("detab")(a,n,i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.omitExtraWLInCodeBlocks&&(l=""),a="<pre><code>"+a+l+"</code></pre>",t.subParser("hashBlock")(a,n,i)+s})).replace(/¨0/,""),e=i.converter._dispatch("codeBlocks.after",e,n,i)}),t.subParser("codeSpans",function(e,n,i){"use strict";return void 0===(e=i.converter._dispatch("codeSpans.before",e,n,i))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,r,o,a){var s=a;return s=(s=s.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),s=r+"<code>"+(s=t.subParser("encodeCode")(s,n,i))+"</code>",s=t.subParser("hashHTMLSpans")(s,n,i)}),e=i.converter._dispatch("codeSpans.after",e,n,i)}),t.subParser("completeHTMLDocument",function(e,t,n){"use strict";if(!t.completeHTMLDocument)return e;e=n.converter._dispatch("completeHTMLDocument.before",e,t,n);var i="html",r="<!DOCTYPE HTML>\n",o="",a='<meta charset="utf-8">\n',s="",l="";for(var c in void 0!==n.metadata.parsed.doctype&&(r="<!DOCTYPE "+n.metadata.parsed.doctype+">\n","html"!==(i=n.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==i||(a='<meta charset="utf-8">')),n.metadata.parsed)if(n.metadata.parsed.hasOwnProperty(c))switch(c.toLowerCase()){case"doctype":break;case"title":o="<title>"+n.metadata.parsed.title+"</title>\n";break;case"charset":a="html"===i||"html5"===i?'<meta charset="'+n.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+n.metadata.parsed.charset+'">\n';break;case"language":case"lang":s=' lang="'+n.metadata.parsed[c]+'"',l+='<meta name="'+c+'" content="'+n.metadata.parsed[c]+'">\n';break;default:l+='<meta name="'+c+'" content="'+n.metadata.parsed[c]+'">\n'}return e=r+"<html"+s+">\n<head>\n"+o+a+l+"</head>\n<body>\n"+e.trim()+"\n</body>\n</html>",e=n.converter._dispatch("completeHTMLDocument.after",e,t,n)}),t.subParser("detab",function(e,t,n){"use strict";return e=(e=(e=(e=(e=(e=n.converter._dispatch("detab.before",e,t,n)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,function(e,t){for(var n=t,i=4-n.length%4,r=0;r<i;r++)n+=" ";return n})).replace(/¨A/g,"    ")).replace(/¨B/g,""),e=n.converter._dispatch("detab.after",e,t,n)}),t.subParser("ellipsis",function(e,t,n){"use strict";return t.ellipsis?(e=(e=n.converter._dispatch("ellipsis.before",e,t,n)).replace(/\.\.\./g,"…"),e=n.converter._dispatch("ellipsis.after",e,t,n)):e}),t.subParser("emoji",function(e,n,i){"use strict";if(!n.emoji)return e;return e=(e=i.converter._dispatch("emoji.before",e,n,i)).replace(/:([\S]+?):/g,function(e,n){return t.helper.emojis.hasOwnProperty(n)?t.helper.emojis[n]:e}),e=i.converter._dispatch("emoji.after",e,n,i)}),t.subParser("encodeAmpsAndAngles",function(e,t,n){"use strict";return e=(e=(e=(e=(e=n.converter._dispatch("encodeAmpsAndAngles.before",e,t,n)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=n.converter._dispatch("encodeAmpsAndAngles.after",e,t,n)}),t.subParser("encodeBackslashEscapes",function(e,n,i){"use strict";return e=(e=(e=i.converter._dispatch("encodeBackslashEscapes.before",e,n,i)).replace(/\\(\\)/g,t.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,t.helper.escapeCharactersCallback),e=i.converter._dispatch("encodeBackslashEscapes.after",e,n,i)}),t.subParser("encodeCode",function(e,n,i){"use strict";return e=(e=i.converter._dispatch("encodeCode.before",e,n,i)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,t.helper.escapeCharactersCallback),e=i.converter._dispatch("encodeCode.after",e,n,i)}),t.subParser("escapeSpecialCharsWithinTagAttributes",function(e,n,i){"use strict";return e=(e=(e=i.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",e,n,i)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,t.helper.escapeCharactersCallback)})).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,function(e){return e.replace(/([\\`*_~=|])/g,t.helper.escapeCharactersCallback)}),e=i.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",e,n,i)}),t.subParser("githubCodeBlocks",function(e,n,i){"use strict";return n.ghCodeBlocks?(e=i.converter._dispatch("githubCodeBlocks.before",e,n,i),e=(e=(e+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(e,r,o,a){var s=n.omitExtraWLInCodeBlocks?"":"\n";return a=t.subParser("encodeCode")(a,n,i),a="<pre><code"+(o?' class="'+o+" language-"+o+'"':"")+">"+(a=(a=(a=t.subParser("detab")(a,n,i)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+s+"</code></pre>",a=t.subParser("hashBlock")(a,n,i),"\n\n¨G"+(i.ghCodeBlocks.push({text:e,codeblock:a})-1)+"G\n\n"})).replace(/¨0/,""),i.converter._dispatch("githubCodeBlocks.after",e,n,i)):e}),t.subParser("hashBlock",function(e,t,n){"use strict";return e=(e=n.converter._dispatch("hashBlock.before",e,t,n)).replace(/(^\n+|\n+$)/g,""),e="\n\n¨K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n",e=n.converter._dispatch("hashBlock.after",e,t,n)}),t.subParser("hashCodeTags",function(e,n,i){"use strict";e=i.converter._dispatch("hashCodeTags.before",e,n,i);return e=t.helper.replaceRecursiveRegExp(e,function(e,r,o,a){var s=o+t.subParser("encodeCode")(r,n,i)+a;return"¨C"+(i.gHtmlSpans.push(s)-1)+"C"},"<code\\b[^>]*>","</code>","gim"),e=i.converter._dispatch("hashCodeTags.after",e,n,i)}),t.subParser("hashElement",function(e,t,n){"use strict";return function(e,t){var i=t;return i=(i=(i=i.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),i="\n\n¨K"+(n.gHtmlBlocks.push(i)-1)+"K\n\n"}}),t.subParser("hashHTMLBlocks",function(e,n,i){"use strict";e=i.converter._dispatch("hashHTMLBlocks.before",e,n,i);var r=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],o=function(e,t,n,r){var o=e;return-1!==n.search(/\bmarkdown\b/)&&(o=n+i.converter.makeHtml(t)+r),"\n\n¨K"+(i.gHtmlBlocks.push(o)-1)+"K\n\n"};n.backslashEscapesHTMLTags&&(e=e.replace(/\\<(\/?[^>]+?)>/g,function(e,t){return"&lt;"+t+"&gt;"}));for(var a=0;a<r.length;++a)for(var s,l=new RegExp("^ {0,3}(<"+r[a]+"\\b[^>]*>)","im"),c="<"+r[a]+"\\b[^>]*>",u="</"+r[a]+">";-1!==(s=t.helper.regexIndexOf(e,l));){var d=t.helper.splitAtIndex(e,s),h=t.helper.replaceRecursiveRegExp(d[1],o,c,u,"im");if(h===d[1])break;e=d[0].concat(h)}return e=e.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,t.subParser("hashElement")(e,n,i)),e=(e=t.helper.replaceRecursiveRegExp(e,function(e){return"\n\n¨K"+(i.gHtmlBlocks.push(e)-1)+"K\n\n"},"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,t.subParser("hashElement")(e,n,i)),e=i.converter._dispatch("hashHTMLBlocks.after",e,n,i)}),t.subParser("hashHTMLSpans",function(e,t,n){"use strict";function i(e){return"¨C"+(n.gHtmlSpans.push(e)-1)+"C"}return e=(e=(e=(e=(e=n.converter._dispatch("hashHTMLSpans.before",e,t,n)).replace(/<[^>]+?\/>/gi,function(e){return i(e)})).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(e){return i(e)})).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(e){return i(e)})).replace(/<[^>]+?>/gi,function(e){return i(e)}),e=n.converter._dispatch("hashHTMLSpans.after",e,t,n)}),t.subParser("unhashHTMLSpans",function(e,t,n){"use strict";e=n.converter._dispatch("unhashHTMLSpans.before",e,t,n);for(var i=0;i<n.gHtmlSpans.length;++i){for(var r=n.gHtmlSpans[i],o=0;/¨C(\d+)C/.test(r);){var a=RegExp.$1;if(r=r.replace("¨C"+a+"C",n.gHtmlSpans[a]),10===o){console.error("maximum nesting of 10 spans reached!!!");break}++o}e=e.replace("¨C"+i+"C",r)}return e=n.converter._dispatch("unhashHTMLSpans.after",e,t,n)}),t.subParser("hashPreCodeTags",function(e,n,i){"use strict";e=i.converter._dispatch("hashPreCodeTags.before",e,n,i);return e=t.helper.replaceRecursiveRegExp(e,function(e,r,o,a){var s=o+t.subParser("encodeCode")(r,n,i)+a;return"\n\n¨G"+(i.ghCodeBlocks.push({text:e,codeblock:s})-1)+"G\n\n"},"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),e=i.converter._dispatch("hashPreCodeTags.after",e,n,i)}),t.subParser("headers",function(e,n,i){"use strict";e=i.converter._dispatch("headers.before",e,n,i);var r=isNaN(parseInt(n.headerLevelStart))?1:parseInt(n.headerLevelStart),o=n.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,a=n.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;e=(e=e.replace(o,function(e,o){var a=t.subParser("spanGamut")(o,n,i),s=n.noHeaderId?"":' id="'+l(o)+'"',c="<h"+r+s+">"+a+"</h"+r+">";return t.subParser("hashBlock")(c,n,i)})).replace(a,function(e,o){var a=t.subParser("spanGamut")(o,n,i),s=n.noHeaderId?"":' id="'+l(o)+'"',c=r+1,u="<h"+c+s+">"+a+"</h"+c+">";return t.subParser("hashBlock")(u,n,i)});var s=n.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function l(e){var r,o;if(n.customizedHeaderId){var a=e.match(/\{([^{]+?)}\s*$/);a&&a[1]&&(e=a[1])}return r=e,o=t.helper.isString(n.prefixHeaderId)?n.prefixHeaderId:!0===n.prefixHeaderId?"section-":"",n.rawPrefixHeaderId||(r=o+r),r=n.ghCompatibleHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():n.rawHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():r.replace(/[^\w]/g,"").toLowerCase(),n.rawPrefixHeaderId&&(r=o+r),i.hashLinkCounts[r]?r=r+"-"+i.hashLinkCounts[r]++:i.hashLinkCounts[r]=1,r}return e=e.replace(s,function(e,o,a){var s=a;n.customizedHeaderId&&(s=a.replace(/\s?\{([^{]+?)}\s*$/,""));var c=t.subParser("spanGamut")(s,n,i),u=n.noHeaderId?"":' id="'+l(a)+'"',d=r-1+o.length,h="<h"+d+u+">"+c+"</h"+d+">";return t.subParser("hashBlock")(h,n,i)}),e=i.converter._dispatch("headers.after",e,n,i)}),t.subParser("horizontalRule",function(e,n,i){"use strict";e=i.converter._dispatch("horizontalRule.before",e,n,i);var r=t.subParser("hashBlock")("<hr />",n,i);return e=(e=(e=e.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,r)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,r)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,r),e=i.converter._dispatch("horizontalRule.after",e,n,i)}),t.subParser("images",function(e,n,i){"use strict";function r(e,n,r,o,a,s,l,c){var u=i.gUrls,d=i.gTitles,h=i.gDimensions;if(r=r.toLowerCase(),c||(c=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(""===o||null===o){if(""!==r&&null!==r||(r=n.toLowerCase().replace(/ ?\n/g," ")),o="#"+r,t.helper.isUndefined(u[r]))return e;o=u[r],t.helper.isUndefined(d[r])||(c=d[r]),t.helper.isUndefined(h[r])||(a=h[r].width,s=h[r].height)}n=n.replace(/"/g,"&quot;").replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback);var p='<img src="'+(o=o.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'" alt="'+n+'"';return c&&t.helper.isString(c)&&(p+=' title="'+(c=c.replace(/"/g,"&quot;").replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback))+'"'),a&&s&&(p+=' width="'+(a="*"===a?"auto":a)+'"',p+=' height="'+(s="*"===s?"auto":s)+'"'),p+=" />"}return e=(e=(e=(e=(e=(e=i.converter._dispatch("images.before",e,n,i)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,r)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,function(e,t,n,i,o,a,s,l){return r(e,t,n,i=i.replace(/\s/g,""),o,a,s,l)})).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,r)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,r)).replace(/!\[([^\[\]]+)]()()()()()/g,r),e=i.converter._dispatch("images.after",e,n,i)}),t.subParser("italicsAndBold",function(e,t,n){"use strict";function i(e,t,n){return t+e+n}return e=n.converter._dispatch("italicsAndBold.before",e,t,n),e=t.literalMidWordUnderscores?(e=(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,function(e,t){return i(t,"<strong><em>","</em></strong>")})).replace(/\b__(\S[\s\S]*?)__\b/g,function(e,t){return i(t,"<strong>","</strong>")})).replace(/\b_(\S[\s\S]*?)_\b/g,function(e,t){return i(t,"<em>","</em>")}):(e=(e=e.replace(/___(\S[\s\S]*?)___/g,function(e,t){return/\S$/.test(t)?i(t,"<strong><em>","</em></strong>"):e})).replace(/__(\S[\s\S]*?)__/g,function(e,t){return/\S$/.test(t)?i(t,"<strong>","</strong>"):e})).replace(/_([^\s_][\s\S]*?)_/g,function(e,t){return/\S$/.test(t)?i(t,"<em>","</em>"):e}),e=t.literalMidWordAsterisks?(e=(e=e.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(e,t,n){return i(n,t+"<strong><em>","</em></strong>")})).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(e,t,n){return i(n,t+"<strong>","</strong>")})).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(e,t,n){return i(n,t+"<em>","</em>")}):(e=(e=e.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(e,t){return/\S$/.test(t)?i(t,"<strong><em>","</em></strong>"):e})).replace(/\*\*(\S[\s\S]*?)\*\*/g,function(e,t){return/\S$/.test(t)?i(t,"<strong>","</strong>"):e})).replace(/\*([^\s*][\s\S]*?)\*/g,function(e,t){return/\S$/.test(t)?i(t,"<em>","</em>"):e}),e=n.converter._dispatch("italicsAndBold.after",e,t,n)}),t.subParser("lists",function(e,n,i){"use strict";function r(e,r){i.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,a=/\n[ \t]*\n(?!¨0)/.test(e+="¨0");return n.disableForced4SpacesIndentedSublists&&(o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),e=(e=e.replace(o,function(e,r,o,s,l,c,u){u=u&&""!==u.trim();var d=t.subParser("outdent")(l,n,i),h="";return c&&n.tasklists&&(h=' class="task-list-item" style="list-style-type: none;"',d=d.replace(/^[ \t]*\[(x|X| )?]/m,function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return u&&(e+=" checked"),e+=">"})),d=d.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(e){return"¨A"+e}),r||d.search(/\n{2,}/)>-1?(d=t.subParser("githubCodeBlocks")(d,n,i),d=t.subParser("blockGamut")(d,n,i)):(d=(d=t.subParser("lists")(d,n,i)).replace(/\n$/,""),d=(d=t.subParser("hashHTMLBlocks")(d,n,i)).replace(/\n\n+/g,"\n\n"),d=a?t.subParser("paragraphs")(d,n,i):t.subParser("spanGamut")(d,n,i)),d="<li"+h+">"+(d=d.replace("¨A",""))+"</li>\n"})).replace(/¨0/g,""),i.gListLevel--,r&&(e=e.replace(/\s+$/,"")),e}function o(e,t){if("ol"===t){var n=e.match(/^ *(\d+)\./);if(n&&"1"!==n[1])return' start="'+n[1]+'"'}return""}function a(e,t,i){var a=n.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,s=n.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===t?a:s,c="";if(-1!==e.search(l))!function n(u){var d=u.search(l),h=o(e,t);-1!==d?(c+="\n\n<"+t+h+">\n"+r(u.slice(0,d),!!i)+"</"+t+">\n",l="ul"===(t="ul"===t?"ol":"ul")?a:s,n(u.slice(d))):c+="\n\n<"+t+h+">\n"+r(u,!!i)+"</"+t+">\n"}(e);else{var u=o(e,t);c="\n\n<"+t+u+">\n"+r(e,!!i)+"</"+t+">\n"}return c}return e=i.converter._dispatch("lists.before",e,n,i),e+="¨0",e=(e=i.gListLevel?e.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(e,t,n){return a(t,n.search(/[*+-]/g)>-1?"ul":"ol",!0)}):e.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(e,t,n,i){return a(n,i.search(/[*+-]/g)>-1?"ul":"ol",!1)})).replace(/¨0/,""),e=i.converter._dispatch("lists.after",e,n,i)}),t.subParser("metadata",function(e,t,n){"use strict";if(!t.metadata)return e;function i(e){n.metadata.raw=e,(e=(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,function(e,t,i){return n.metadata.parsed[t]=i,""})}return e=(e=(e=(e=n.converter._dispatch("metadata.before",e,t,n)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(e,t,n){return i(n),"¨M"})).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(e,t,r){return t&&(n.metadata.format=t),i(r),"¨M"})).replace(/¨M/g,""),e=n.converter._dispatch("metadata.after",e,t,n)}),t.subParser("outdent",function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("outdent.before",e,t,n)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),e=n.converter._dispatch("outdent.after",e,t,n)}),t.subParser("paragraphs",function(e,n,i){"use strict";for(var r=(e=(e=(e=i.converter._dispatch("paragraphs.before",e,n,i)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],a=r.length,s=0;s<a;s++){var l=r[s];l.search(/¨(K|G)(\d+)\1/g)>=0?o.push(l):l.search(/\S/)>=0&&(l=(l=t.subParser("spanGamut")(l,n,i)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",o.push(l))}for(a=o.length,s=0;s<a;s++){for(var c="",u=o[s],d=!1;/¨(K|G)(\d+)\1/.test(u);){var h=RegExp.$1,p=RegExp.$2;c=(c="K"===h?i.gHtmlBlocks[p]:d?t.subParser("encodeCode")(i.ghCodeBlocks[p].text,n,i):i.ghCodeBlocks[p].codeblock).replace(/\$/g,"$$$$"),u=u.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(u)&&(d=!0)}o[s]=u}return e=(e=(e=o.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),i.converter._dispatch("paragraphs.after",e,n,i)}),t.subParser("runExtension",function(e,t,n,i){"use strict";if(e.filter)t=e.filter(t,i.converter,n);else if(e.regex){var r=e.regex;r instanceof RegExp||(r=new RegExp(r,"g")),t=t.replace(r,e.replace)}return t}),t.subParser("spanGamut",function(e,n,i){"use strict";return e=i.converter._dispatch("spanGamut.before",e,n,i),e=t.subParser("codeSpans")(e,n,i),e=t.subParser("escapeSpecialCharsWithinTagAttributes")(e,n,i),e=t.subParser("encodeBackslashEscapes")(e,n,i),e=t.subParser("images")(e,n,i),e=t.subParser("anchors")(e,n,i),e=t.subParser("autoLinks")(e,n,i),e=t.subParser("simplifiedAutoLinks")(e,n,i),e=t.subParser("emoji")(e,n,i),e=t.subParser("underline")(e,n,i),e=t.subParser("italicsAndBold")(e,n,i),e=t.subParser("strikethrough")(e,n,i),e=t.subParser("ellipsis")(e,n,i),e=t.subParser("hashHTMLSpans")(e,n,i),e=t.subParser("encodeAmpsAndAngles")(e,n,i),n.simpleLineBreaks?/\n\n¨K/.test(e)||(e=e.replace(/\n+/g,"<br />\n")):e=e.replace(/  +\n/g,"<br />\n"),e=i.converter._dispatch("spanGamut.after",e,n,i)}),t.subParser("strikethrough",function(e,n,i){"use strict";return n.strikethrough&&(e=(e=i.converter._dispatch("strikethrough.before",e,n,i)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(e,r){return function(e){return n.simplifiedAutoLink&&(e=t.subParser("simplifiedAutoLinks")(e,n,i)),"<del>"+e+"</del>"}(r)}),e=i.converter._dispatch("strikethrough.after",e,n,i)),e}),t.subParser("stripLinkDefinitions",function(e,n,i){"use strict";var r=function(r,o,a,s,l,c,u){return o=o.toLowerCase(),e.toLowerCase().split(o).length-1<2?r:(a.match(/^data:.+?\/.+?;base64,/)?i.gUrls[o]=a.replace(/\s/g,""):i.gUrls[o]=t.subParser("encodeAmpsAndAngles")(a,n,i),c?c+u:(u&&(i.gTitles[o]=u.replace(/"|'/g,"&quot;")),n.parseImgDimensions&&s&&l&&(i.gDimensions[o]={width:s,height:l}),""))};return e=(e=(e=(e+="¨0").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,r)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,r)).replace(/¨0/,"")}),t.subParser("tables",function(e,n,i){"use strict";if(!n.tables)return e;function r(e){return/^:[ \t]*--*$/.test(e)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(e)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(e)?' style="text-align:center;"':""}function o(e,r){var o="";return e=e.trim(),(n.tablesHeaderId||n.tableHeaderId)&&(o=' id="'+e.replace(/ /g,"_").toLowerCase()+'"'),"<th"+o+r+">"+(e=t.subParser("spanGamut")(e,n,i))+"</th>\n"}function a(e,r){return"<td"+r+">"+t.subParser("spanGamut")(e,n,i)+"</td>\n"}function s(e){var s,l=e.split("\n");for(s=0;s<l.length;++s)/^ {0,3}\|/.test(l[s])&&(l[s]=l[s].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(l[s])&&(l[s]=l[s].replace(/\|[ \t]*$/,"")),l[s]=t.subParser("codeSpans")(l[s],n,i);var c=l[0].split("|").map(function(e){return e.trim()}),u=l[1].split("|").map(function(e){return e.trim()}),d=[],h=[],p=[],f=[];for(l.shift(),l.shift(),s=0;s<l.length;++s)""!==l[s].trim()&&d.push(l[s].split("|").map(function(e){return e.trim()}));if(c.length<u.length)return e;for(s=0;s<u.length;++s)p.push(r(u[s]));for(s=0;s<c.length;++s)t.helper.isUndefined(p[s])&&(p[s]=""),h.push(o(c[s],p[s]));for(s=0;s<d.length;++s){for(var m=[],g=0;g<h.length;++g)t.helper.isUndefined(d[s][g]),m.push(a(d[s][g],p[g]));f.push(m)}return function(e,t){for(var n="<table>\n<thead>\n<tr>\n",i=e.length,r=0;r<i;++r)n+=e[r];for(n+="</tr>\n</thead>\n<tbody>\n",r=0;r<t.length;++r){n+="<tr>\n";for(var o=0;o<i;++o)n+=t[r][o];n+="</tr>\n"}return n+"</tbody>\n</table>\n"}(h,f)}return e=(e=(e=(e=i.converter._dispatch("tables.before",e,n,i)).replace(/\\(\|)/g,t.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,s)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,s),e=i.converter._dispatch("tables.after",e,n,i)}),t.subParser("underline",function(e,n,i){"use strict";return n.underline?(e=i.converter._dispatch("underline.before",e,n,i),e=(e=n.literalMidWordUnderscores?(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,function(e,t){return"<u>"+t+"</u>"})).replace(/\b__(\S[\s\S]*?)__\b/g,function(e,t){return"<u>"+t+"</u>"}):(e=e.replace(/___(\S[\s\S]*?)___/g,function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e})).replace(/__(\S[\s\S]*?)__/g,function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e})).replace(/(_)/g,t.helper.escapeCharactersCallback),e=i.converter._dispatch("underline.after",e,n,i)):e}),t.subParser("unescapeSpecialChars",function(e,t,n){"use strict";return e=(e=n.converter._dispatch("unescapeSpecialChars.before",e,t,n)).replace(/¨E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)}),e=n.converter._dispatch("unescapeSpecialChars.after",e,t,n)}),t.subParser("makeMarkdown.blockquote",function(e,n){"use strict";var i="";if(e.hasChildNodes())for(var r=e.childNodes,o=r.length,a=0;a<o;++a){var s=t.subParser("makeMarkdown.node")(r[a],n);""!==s&&(i+=s)}return i="> "+(i=i.trim()).split("\n").join("\n> ")}),t.subParser("makeMarkdown.codeBlock",function(e,t){"use strict";var n=e.getAttribute("language"),i=e.getAttribute("precodenum");return"```"+n+"\n"+t.preList[i]+"\n```"}),t.subParser("makeMarkdown.codeSpan",function(e){"use strict";return"`"+e.innerHTML+"`"}),t.subParser("makeMarkdown.emphasis",function(e,n){"use strict";var i="";if(e.hasChildNodes()){i+="*";for(var r=e.childNodes,o=r.length,a=0;a<o;++a)i+=t.subParser("makeMarkdown.node")(r[a],n);i+="*"}return i}),t.subParser("makeMarkdown.header",function(e,n,i){"use strict";var r=new Array(i+1).join("#"),o="";if(e.hasChildNodes()){o=r+" ";for(var a=e.childNodes,s=a.length,l=0;l<s;++l)o+=t.subParser("makeMarkdown.node")(a[l],n)}return o}),t.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),t.subParser("makeMarkdown.image",function(e){"use strict";var t="";return e.hasAttribute("src")&&(t+="!["+e.getAttribute("alt")+"](",t+="<"+e.getAttribute("src")+">",e.hasAttribute("width")&&e.hasAttribute("height")&&(t+=" ="+e.getAttribute("width")+"x"+e.getAttribute("height")),e.hasAttribute("title")&&(t+=' "'+e.getAttribute("title")+'"'),t+=")"),t}),t.subParser("makeMarkdown.links",function(e,n){"use strict";var i="";if(e.hasChildNodes()&&e.hasAttribute("href")){var r=e.childNodes,o=r.length;i="[";for(var a=0;a<o;++a)i+=t.subParser("makeMarkdown.node")(r[a],n);i+="](",i+="<"+e.getAttribute("href")+">",e.hasAttribute("title")&&(i+=' "'+e.getAttribute("title")+'"'),i+=")"}return i}),t.subParser("makeMarkdown.list",function(e,n,i){"use strict";var r="";if(!e.hasChildNodes())return"";for(var o=e.childNodes,a=o.length,s=e.getAttribute("start")||1,l=0;l<a;++l)if(void 0!==o[l].tagName&&"li"===o[l].tagName.toLowerCase()){r+=("ol"===i?s.toString()+". ":"- ")+t.subParser("makeMarkdown.listItem")(o[l],n),++s}return(r+="\n\x3c!-- --\x3e\n").trim()}),t.subParser("makeMarkdown.listItem",function(e,n){"use strict";for(var i="",r=e.childNodes,o=r.length,a=0;a<o;++a)i+=t.subParser("makeMarkdown.node")(r[a],n);return/\n$/.test(i)?i=i.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):i+="\n",i}),t.subParser("makeMarkdown.node",function(e,n,i){"use strict";i=i||!1;var r="";if(3===e.nodeType)return t.subParser("makeMarkdown.txt")(e,n);if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e\n\n";if(1!==e.nodeType)return"";switch(e.tagName.toLowerCase()){case"h1":i||(r=t.subParser("makeMarkdown.header")(e,n,1)+"\n\n");break;case"h2":i||(r=t.subParser("makeMarkdown.header")(e,n,2)+"\n\n");break;case"h3":i||(r=t.subParser("makeMarkdown.header")(e,n,3)+"\n\n");break;case"h4":i||(r=t.subParser("makeMarkdown.header")(e,n,4)+"\n\n");break;case"h5":i||(r=t.subParser("makeMarkdown.header")(e,n,5)+"\n\n");break;case"h6":i||(r=t.subParser("makeMarkdown.header")(e,n,6)+"\n\n");break;case"p":i||(r=t.subParser("makeMarkdown.paragraph")(e,n)+"\n\n");break;case"blockquote":i||(r=t.subParser("makeMarkdown.blockquote")(e,n)+"\n\n");break;case"hr":i||(r=t.subParser("makeMarkdown.hr")(e,n)+"\n\n");break;case"ol":i||(r=t.subParser("makeMarkdown.list")(e,n,"ol")+"\n\n");break;case"ul":i||(r=t.subParser("makeMarkdown.list")(e,n,"ul")+"\n\n");break;case"precode":i||(r=t.subParser("makeMarkdown.codeBlock")(e,n)+"\n\n");break;case"pre":i||(r=t.subParser("makeMarkdown.pre")(e,n)+"\n\n");break;case"table":i||(r=t.subParser("makeMarkdown.table")(e,n)+"\n\n");break;case"code":r=t.subParser("makeMarkdown.codeSpan")(e,n);break;case"em":case"i":r=t.subParser("makeMarkdown.emphasis")(e,n);break;case"strong":case"b":r=t.subParser("makeMarkdown.strong")(e,n);break;case"del":r=t.subParser("makeMarkdown.strikethrough")(e,n);break;case"a":r=t.subParser("makeMarkdown.links")(e,n);break;case"img":r=t.subParser("makeMarkdown.image")(e,n);break;default:r=e.outerHTML+"\n\n"}return r}),t.subParser("makeMarkdown.paragraph",function(e,n){"use strict";var i="";if(e.hasChildNodes())for(var r=e.childNodes,o=r.length,a=0;a<o;++a)i+=t.subParser("makeMarkdown.node")(r[a],n);return i=i.trim()}),t.subParser("makeMarkdown.pre",function(e,t){"use strict";var n=e.getAttribute("prenum");return"<pre>"+t.preList[n]+"</pre>"}),t.subParser("makeMarkdown.strikethrough",function(e,n){"use strict";var i="";if(e.hasChildNodes()){i+="~~";for(var r=e.childNodes,o=r.length,a=0;a<o;++a)i+=t.subParser("makeMarkdown.node")(r[a],n);i+="~~"}return i}),t.subParser("makeMarkdown.strong",function(e,n){"use strict";var i="";if(e.hasChildNodes()){i+="**";for(var r=e.childNodes,o=r.length,a=0;a<o;++a)i+=t.subParser("makeMarkdown.node")(r[a],n);i+="**"}return i}),t.subParser("makeMarkdown.table",function(e,n){"use strict";var i,r,o="",a=[[],[]],s=e.querySelectorAll("thead>tr>th"),l=e.querySelectorAll("tbody>tr");for(i=0;i<s.length;++i){var c=t.subParser("makeMarkdown.tableCell")(s[i],n),u="---";if(s[i].hasAttribute("style"))switch(s[i].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":u=":---";break;case"text-align:right;":u="---:";break;case"text-align:center;":u=":---:"}a[0][i]=c.trim(),a[1][i]=u}for(i=0;i<l.length;++i){var d=a.push([])-1,h=l[i].getElementsByTagName("td");for(r=0;r<s.length;++r){var p=" ";void 0!==h[r]&&(p=t.subParser("makeMarkdown.tableCell")(h[r],n)),a[d].push(p)}}var f=3;for(i=0;i<a.length;++i)for(r=0;r<a[i].length;++r){var m=a[i][r].length;m>f&&(f=m)}for(i=0;i<a.length;++i){for(r=0;r<a[i].length;++r)1===i?":"===a[i][r].slice(-1)?a[i][r]=t.helper.padEnd(a[i][r].slice(-1),f-1,"-")+":":a[i][r]=t.helper.padEnd(a[i][r],f,"-"):a[i][r]=t.helper.padEnd(a[i][r],f);o+="| "+a[i].join(" | ")+" |\n"}return o.trim()}),t.subParser("makeMarkdown.tableCell",function(e,n){"use strict";var i="";if(!e.hasChildNodes())return"";for(var r=e.childNodes,o=r.length,a=0;a<o;++a)i+=t.subParser("makeMarkdown.node")(r[a],n,!0);return i.trim()}),t.subParser("makeMarkdown.txt",function(e){"use strict";var n=e.nodeValue;return n=(n=n.replace(/ +/g," ")).replace(/¨NBSP;/g," "),n=(n=(n=(n=(n=(n=(n=(n=(n=t.helper.unescapeHTMLEntities(n)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")});"function"==typeof define&&define.amd?define("showdown",[],function(){"use strict";return t}):"undefined"!=typeof module&&module.exports?module.exports=t:this.showdown=t}.call(this),define("Core/convertMarkdown",["DOMPurify","showdown"],function(e,t){"use strict";Cesium.Check;t.setFlavor("github"),e.addHook("afterSanitizeAttributes",function(e){"target"in e&&e.setAttribute("target","_blank"),e.hasAttribute("target")||!e.hasAttribute("xlink:href")&&!e.hasAttribute("href")||e.setAttribute("xlink:show","new"),e instanceof HTMLImageElement&&e.src.match(/^https?:\/\/api[\.\-]/)&&e.removeAttribute("src")});const n={FORBID_TAGS:["input","form","textarea","select"]},i=new t.Converter,r=document.createElement("div");return function(t,o){let a=e.sanitize(i.makeHtml(t),n);r.innerHTML=a;const s=r.querySelectorAll("a");for(let e=0;e<s.length;e++)s[e].setAttribute("target","_blank"),s[e].setAttribute("rel","noopener");return a=r.innerHTML,o&&(a=a.replace(/<p>/g,"<span>"),a=a.replace(/<\/p>/g,"</span>")),a}}),define("Views/Components/OnScreenHelp/Slide",["./generateTemplateRegex","Core/convertMarkdown"],function(e,t){"use strict";const n=Cesium.defined,i=e("title"),r=e("image"),o=e("caption");return function(e,a){let s,l,c,u=i.exec(e);n(u)&&(s=u[1],e=e.replace(i,"")),u=r.exec(e),n(u)&&(l=u[1],e=e.replace(r,"")),u=o.exec(e),n(u)&&(c=u[1],e=e.replace(o,"")),e=e.trim(),this.title=s,this.hasTitle=n(s),this.hasContent=!0,this.content=t(e),this.hasCaption=n(c),this.caption=c,this.imageSrc=l,this.hasImage=n(l),this.buttons=a}}),define("Views/Components/OnScreenHelp/SlideButton",["Core/defaultValue"],function(e){"use strict";function t(t){this.html=t.html,this.title=e(t.title,""),this.css=e(t.css,"btn-default"),this.click=t.click}return t.createPreviousButton=function(e){return new t({html:'<span class="fa fa-chevron-left"></span>',title:"Previous",click:e})},t.createNextButton=function(e){return new t({html:'<span class="fa fa-chevron-right"></span>',title:"Next",click:e})},t}),define("Views/Components/OnScreenHelp/Tutorial",[],function(){"use strict";Cesium.Check;function e(e){}return e.prototype.hide=function(){this.OnScreenHelp.hide()},e.prototype.reset=function(){},e}),define("Views/Components/OnScreenHelp/SlideDeck",["Core/defaultValue","./SlideButton","./Tutorial","knockout"],function(e,t,n,i){"use strict";function r(r,o){n.call(this,r);const a=i.observableArray(),s=i.observable(0),l=i.pureComputed(function(){return a()[s()]});this.viewUrl=e(o,"Views/Components/OnScreenHelp/SlideDeck.html"),this.pages=a,this.pageIndex=s,this.currentPage=l,this.hasNext=i.pureComputed(function(){return s()<a.length-1}),this.hasPrevious=i.pureComputed(function(){return s()>0}),this.OnScreenHelp=r;const c=this.next.bind(this),u=this.previous.bind(this),d=this.hide.bind(this);this.pageButtons=[t.createPreviousButton(u),t.createNextButton(c)],this.doneButton=new t({html:"Done",css:"btn-default",click:d}),this.next=c,this.previous=u,this.hide=d}return r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.reset=function(){this.pageIndex(0)},r.prototype.next=function(){const e=this.pageIndex;e(e()+1)},r.prototype.previous=function(){const e=this.pageIndex;e(e()-1)},r}),define("text!Views/Components/OnScreenHelp/Stories/Page1.md",[],function(){return"{{ title : Cesium Stories }}\n{{ image : Images/globe3d.png }}\n\nCheck out Cesium Stories, an application for building and sharing 3D geospatial presentations and stories on the web.\n"}),define("Views/Components/OnScreenHelp/Stories/Stories",["../Slide","../SlideDeck","../SlideButton","text!./Page1.md"],function(e,t,n,i){"use strict";function r(r){t.call(this,r);const o=this.pages,a=this.hide;this.customDone=new n({html:"Open Tutorial",css:"btn-default",click:function(){window.open("https://cesium.com/learn/ion/stories-introduction/","_blank,noopener"),a()}}),o.push(new e(i,[this.customDone]))}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r}),define("Views/Components/OnScreenHelp/Welcome/WelcomeSlide",[],function(){"use strict";const e=Cesium.Event;function t(){this.title="Welcome to Cesium ion",this.hasTitle=!0,this.hasContent=!1,this.content=this,this.hasCaption=!1,this.caption=void 0,this.imageSrc=void 0,this.hasImage=!1,this.buttons=[],this.chooseDeveloperEvent=new e,this.chooseStoriesEvent=new e}return t.prototype.chooseDeveloper=function(){this.chooseDeveloperEvent.raiseEvent()},t.prototype.chooseStories=function(){this.chooseStoriesEvent.raiseEvent()},t}),define("text!Views/Components/OnScreenHelp/Welcome/Page0.md",[],function(){return'{{ title : Welcome to Cesium ion}}\n\nYour free Community account can be used for:\n\n<div class="row on-screen-help-community">\n<div class="col-xs-4">\n<div class="thumbnail">\n<img src="Images/OnScreenHelp/Welcome/p1.jpg">\n<div class="caption">\nNon-commercial personal projects\n</div>\n</div>\n</div>\n<div class="col-xs-4">\n<div class="thumbnail">\n<img src="Images/OnScreenHelp/Welcome/p2.jpg">\n<div class="caption">\nExploratory development\n</div>\n</div>\n</div>\n<div class="col-xs-4">\n<div class="thumbnail">\n<img src="Images/OnScreenHelp/Welcome/p3.jpg">\n<div class="caption">\nUnfunded educational activities\n</div>\n</div>\n</div>\n</div>\n\nUpgrade your plan on your account page for use in commercial, government, or funded research projects. Email sales@cesium.com with any questions.\n'}),define("text!Views/Components/OnScreenHelp/Welcome/Page2.md",[],function(){return"{{ title : Sample Data }}\n{{ image : Images/OnScreenHelp/Welcome/agi_hq.jpg}}\n{{ caption : KML/COLLADA streamed using 3D Tiles }}\n\nCesium ion tiles and hosts terrain, imagery, photogrammetry, point clouds, and 3D buildings.\n\nFor this tutorial, we've provided a sample KML/COLLADA package with a single building.\n\nDownload it by [clicking here](https://cesium.com/public/learn/AGI_HQ.kmz).\n"}),define("text!Views/Components/OnScreenHelp/Welcome/Page3.md",[],function(){return'{{ title : Uploading Data }}\n{{ image : Images/OnScreenHelp/Welcome/point_cloud.jpg }}\n{{ caption : A millimeter precision point cloud in 3D Tiles }}\n\nDrag and drop the file, AGI_HQ.kmz, anywhere on this page and select **KML/COLLADA (tile as 3D Tiles)** in the "What kind of data is this?" drop-down.\n\nClick <span class="btn btn-primary btn-xs btn-no-action">Upload</span>.\n\nOnce the upload finishes, ion will start the 3D tiling and report its progress on the upper right.\n\nIn the meantime, let\'s get more familiar with ion.\n'}),define("text!Views/Components/OnScreenHelp/Welcome/Page4.md",[],function(){return"{{ title : Assets }}\n{{ image : Images/OnScreenHelp/Welcome/bim.jpg }}\n{{ caption : Powerplant BIM model in 3D Tiles }}\n\nYou're currently on the <span class=\"btn btn-primary btn-xs btn-no-action\">My Assets</span> page. An _asset_ is ion's general term for 3D Tiles, imagery, and terrain.\n\nThe data you uploaded is being tiled into a 3D Tiles asset.\n"}),define("text!Views/Components/OnScreenHelp/Welcome/Page5.md",[],function(){return'{{ title : Asset Depot }}\n{{ image : Images/OnScreenHelp/Welcome/cesium_world_terrain.jpg }}\n{{ caption : Cesium World Terrain with Bing imagery }}\n\nYou also have access to a library of curated assets on the <span class="btn btn-primary btn-xs btn-no-action">Asset Depot</span> page.\n\nA few of these assets are already in your account, like:\n\n**Cesium OSM Buildings** - Global 3D buildings with per-building metadata.\n\n**Bing Maps** - High resolution global imagery.\n\n**Cesium World Terrain** - High resolution global terrain.\n'}),define("text!Views/Components/OnScreenHelp/Welcome/Page6.md",[],function(){return'{{ title : Using ion with CesiumJS }}\n{{ image : Images/OnScreenHelp/Welcome/osm_nyc.jpg}}\n{{ caption : OpenStreetMap buildings in 3D Tiles }}\n\nOnce tiling is complete, you can interact with the asset using the preview window in the upper right.\n\nScroll down to the bottom of the right panel and click "Open complete code example" to load this asset into "Sandcastle", a CesiumJS playground app for quick application prototyping.\n'}),define("text!Views/Components/OnScreenHelp/Welcome/Page7.md",[],function(){return'{{ title : What\'s next? }}\n{{ image : Images/OnScreenHelp/Welcome/san_miguel.jpg}}\n{{ caption : Detailed restaurant interior in 3D Tiles }}\n\nCongratulations! You have created your first asset and loaded it into CesiumJS.\n\nClick the <span class="btn btn-primary btn-xs btn-no-action">Learn</span> button in the top right of the screen to learn more about what you can do with the Cesium platform.\n'}),define("Views/Components/OnScreenHelp/Welcome/Welcome",["./WelcomeSlide","../Slide","../SlideButton","../SlideDeck","knockout","text!./Page0.md","text!./Page2.md","text!./Page3.md","text!./Page4.md","text!./Page5.md","text!./Page6.md","text!./Page7.md"],function(e,t,n,i,r,o,a,s,l,c,u,d){"use strict";function h(h){i.call(this,h);const p=this.pages,f=this.next.bind(this),m=this.previous.bind(this),g=this.pageButtons;p.push(new t(o,[new n({html:"Okay",css:"btn-primary",click:function(){f()}})]));const v=new e;this._removeDeveloperEvent=v.chooseDeveloperEvent.addEventListener(function(){h.isModal(!1),f()}),this._removeStoriesEvent=v.chooseStoriesEvent.addEventListener(function(){h.load(h.tutorials.stories)}),p.push(v),p.push(new t(a,[g[1]])),p.push(new t(s,g)),p.push(new t(l,g)),p.push(new t(c,[g[0],new n({html:'<span class="fa fa-chevron-right"></span>',title:"Next",click:function(){h.left(!0),f()}})])),p.push(new t(u,[new n({html:'<span class="fa fa-chevron-left"></span>',title:"Previous",click:function(){h.left(!1),m()}}),g[1]])),p.push(new t(d,[g[0],new n({html:"More tutorials",css:"btn-primary",click:this.openTutorialList.bind(this)}),this.doneButton])),this.allowClose=r.pureComputed(function(){return 0!==this.pageIndex()},this)}return h.prototype=Object.create(i.prototype),h.prototype.constructor=h,h.prototype.openTutorialList=function(){const e=this.OnScreenHelp;e.hide(),e.visible(!0)},h}),define("Views/Components/OnScreenHelp/VriconPromotion/VriconPromotionSlide",["../SlideButton","plugins/router"],function(e,t){"use strict";return function(n){this.title="US Government Work-From-Home",this.hasTitle=!0,this.hasContent=!1,this.content=this,this.hasCaption=!1,this.caption=void 0,this.imageSrc=void 0,this.hasImage=!1,this.buttons=[new e({html:"See my assets",css:"btn-default",click:function(){n.doneButton.click(),t.navigate("/assets")}}),new e({html:"Visit the tutorial",css:"btn-primary",click:function(){n.doneButton.click(),window.open("https://cesium.com/usg-work-from-home","_blank,noopener")}})],this.dismiss=n.doneButton.click.bind(n.doneButton)}}),define("Views/Components/OnScreenHelp/VriconPromotion/VriconPromotion",["./VriconPromotionSlide","../SlideDeck","knockout"],function(e,t,n){"use strict";function i(i){t.call(this,i);const r=this.pages,o=new e(this);r.push(o),this.allowClose=n.observable(!1)}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i}),define("Views/Components/OnScreenHelp/Announcements/StoriesRelease",[],function(){"use strict";function e(e){this.OnScreenHelp=e,this.hide=this.hide.bind(this)}return e.prototype.goToTutorial=function(){window.open("https://cesium.com/learn/ion/stories-introduction/","_blank,noopener"),this.OnScreenHelp.hide()},e.prototype.hide=function(){this.OnScreenHelp.hide()},e}),define("Views/Components/OnScreenHelp/Announcement",["./Announcements/StoriesRelease"],function(e){"use strict";const t=new Date(Date.now()),n={view:e,startDate:new Date("2020-01-28T15:00Z"),expirationDate:new Date("2020-04-01T12:00Z"),shouldShow:function(e){return n.startDate<t&&t<n.expirationDate&&e<n.startDate}};return n}),define("Views/Components/OnScreenHelp/OnScreenHelp",["Core/defaultValue","Core/Feature","./Stories/Stories","./Welcome/Welcome","./VriconPromotion/VriconPromotion","./Announcement","knockout"],function(e,t,n,i,r,o,a){"use strict";const s=Cesium.defined,l=a.observable();let c;l.equalityComparer=function(e,t){return e===t};const u=a.observable(!1),d=a.observable(!1),h=a.observable(!1),p=a.observable(!1),f=a.pureComputed(function(){const e=l();return!s(e)||!s(e.allowClose)||e.allowClose()}),m={currentTutorial:l,visible:u,helpVisible:d,isModal:h,left:p,allowClose:f},g={welcome:void 0,stories:void 0,vricon:void 0},v={welcome:i,stories:n,vricon:void 0};return t.isEnabledForServer(t.Server.VRICON_PROMOTION)&&(v.vricon=r),l(g.tutorialList),m.load=function(t,n){if(s(g[t])||!s(v[t]))return;g[t]=new v[t](m);const i=g[t];i!==l()&&(i.reset(),s(i.pageIndex)&&(n=e(n,0),i.pageIndex(n),h(0===n&&(t===m.tutorials.welcome||t===m.tutorials.vricon))),p(!1),l(i),u(!1),d(!0))},m.loadAnnouncement=function(e,t){(t||o.shouldShow(e))&&(h(!0),p(!1),l(new o.view(m)),u(!1),d(!0))},m.tutorialMenu=[{name:"Learning Center",url:"https://cesium.com/learn/"},{name:"Build Apps",url:"https://cesium.com/learn/cesiumjs-learn/cesiumjs-quickstart/"},{name:"Upload Data",url:"https://cesium.com/learn/3d-tiling/tiler-data-formats/"}],m.tutorials={welcome:"welcome",tutorialList:"tutorialList",stories:"stories",vricon:"vricon"},m.toggle=function(){u()?m.hideMenu():m.showMenu()},m.showMenu=function(){u()||(u(!0),clearTimeout(c),c=setTimeout(function(){document.body.addEventListener("click",m.hideMenu)},300))},m.hideMenu=function(){u(!1),clearTimeout(c),document.body.removeEventListener("click",m.hideMenu)},m.hide=function(){m.hideMenu(),d(!1),l(void 0),setTimeout(function(){h(!1),p(!1)},300)},m}),define("Core/find",[],function(){"use strict";Cesium.Check;return function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return e[n]}}),define("Core/scrollIntoViewIfNeeded",[],function(){"use strict";const e=Cesium.defined;return function(t,n){if(!e(t)||!e(n))return;const i=t.offsetTop-n.offsetTop,r=n.scrollTop;(i<r||i+t.clientHeight>r+n.clientHeight)&&t.scrollIntoView()}}),define("Core/Units",["./defaultValue"],function(e){"use strict";Cesium.defined,Cesium.DeveloperError;const t=1/5280,n=100/30.48,i=1024,r=1048576,o=1073741824,a={METRIC:"Metric",US:"US Customary",FT_IN_MI:5280,M_IN_KM:1e3,BYTES_IN_MB:r,BYTES_IN_GB:o,MB_IN_GB:1024,B:"bytes",KB:"KiB",MB:"MiB",GB:"GiB",distanceToString:function(t,n,i){let r;return i=e(i,3),n===a.METRIC?(r=Math.abs(t),r<1?`${a.metersToCentimeters(t).toFixed(i)}cm`:r>=a.M_IN_KM?`${a.metersToKilometers(t).toFixed(i)}km`:`${t.toFixed(i)}m`):(t=a.metersToFeet(t),r=Math.abs(t),r<1?`${a.feetToInches(t).toFixed(i)}in`:r>=a.FT_IN_MI?`${a.feetToMiles(t).toFixed(i)}mi`:`${t.toFixed(i)}ft`)},areaToString:function(t,n,i){i=e(i,3);const r=Math.abs(t);return n===a.METRIC?r<.1?`${a.metersToCentimeters(t,2).toFixed(i)}sq cm`:r>=a.M_IN_KM*a.M_IN_KM?`${a.metersToKilometers(t,2).toFixed(i)}sq km`:`${t.toFixed(i)}sq m`:r<1?`${a.feetToInches(t,2).toFixed(i)}sq in`:r>=278784?`${a.feetToMiles(t,2).toFixed(i)}sq mi`:`${t.toFixed(i)}sq ft`},feetToMeters:function(e){return e/n},metersToFeet:function(t,i){return i=e(i,1),t*Math.pow(n,i)},metersToKilometers:function(t,n){return n=e(n,1),t*Math.pow(.001,n)},metersToCentimeters:function(t,n){return n=e(n,1),t*Math.pow(100,n)},feetToInches:function(t,n){return n=e(n,1),t*Math.pow(12,n)},feetToMiles:function(n,i){return i=e(i,1),n*Math.pow(t,i)},bytesToString:function(t,n){let s,l;return n=e(n,2),t>=o?(s=Math.max(t/o,0),s=s.toFixed(n),l=a.GB):t>=r?(s=Math.max(t/r,0),s=s.toFixed(n),l=a.MB):t>=i?(s=Math.max(t/i,0),s=s.toFixed(n),l=a.KB):(s=Math.max(t,0),l=a.B),`${s} ${l}`},bytesToMegabytes:function(e){return e/r},megabytesToBytes:function(e){return e*r},bytesToGigabytes:function(e){return e/o},gigabytesToBytes:function(e){return e*o}};return Object.freeze(a)}),define("Core/createDomId",[],function(){"use strict";const e=Cesium.createGuid;return function(){return`ion-${e()}`}}),define("Views/Components/ContextualHelp",["Core/convertMarkdown","Core/createDomId","Core/defaultValue","Core/Feature","jquery","knockout"],function(e,t,n,i,r,o){"use strict";Cesium.defined,Cesium.DeveloperError;function a(i,r){this.content=e(i),this._container=n(r,"body"),this._id=t()}return Object.defineProperties(a.prototype,{id:{get:function(){return this._id}}}),a.prototype.compositionComplete=function(){const e=`${this._id}-help`,t=this._container;let n;const a=this;r(`#${this._id}`).popover({content:function(){return`<div id="${e}">${a.content}</div>`},viewport:t,container:t,html:!0,sanitize:!1}).on("inserted.bs.popover",function(){const t={isCesiumHostedIonEnabled:i.isEnabledForServer(i.Server.CESIUM_HOSTED_ION),isPublicInternetAccessEnabled:i.isEnabledForServer(i.Server.PUBLIC_INTERNET_ACCESS),isAssetImportS3Enabled:i.isEnabledForServer(i.Server.ASSET_IMPORT_S3),isAssetImportAzureEnabled:i.isEnabledForServer(i.Server.ASSET_IMPORT_AZURE)},n=document.getElementById(e);o.applyBindings(t,n)}).on("shown.bs.popover",function(){const e=r(this).attr("aria-describedby"),t=r(`#${e}`);t.height(t.height()),n=function(e){t.is(e.target)||0!==t.has(e.target).length||t.popover("hide")},document.body.addEventListener("click",n)}).on("hide.bs.popover",function(){document.body.removeEventListener("click",n);const e=r(this).attr("aria-describedby");r(`#${e}`).height("")}).on("hidden.bs.popover",function(e){r(e.target).data("bs.popover").inState.click=!1})},a.prototype.detached=function(){r(`#${this._id}`).popover("destroy")},a}),
/*!
 * Copyright (c) 2018 Chris O'Hara <cohara87@gmail.com>
 * 
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("validator",t):e.validator=t()}(this,function(){"use strict";function e(e){if(null==e)throw new TypeError("Expected a string but received a ".concat(e));if("String"!==e.constructor.name)throw new TypeError("Expected a string but received a ".concat(e.constructor.name))}function t(t){return e(t),t=Date.parse(t),isNaN(t)?null:new Date(t)}function i(e){return null==e}for(var r,o={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZÇƏĞİıÖŞÜ]+$/i,"bg-BG":/^[А-Я]+$/i,"cs-CZ":/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[A-ZÆØÅ]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"el-GR":/^[Α-ώ]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fa-IR":/^[ابپتثجچحخدذرزژسشصضطظعغفقکگلمنوهی]+$/i,"fi-FI":/^[A-ZÅÄÖ]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[A-ZÀÉÈÌÎÓÒÙ]+$/i,"ja-JP":/^[ぁ-んァ-ヶｦ-ﾟ一-龠ー・。、]+$/i,"nb-NO":/^[A-ZÆØÅ]+$/i,"nl-NL":/^[A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[A-ZÆØÅ]+$/i,"hu-HU":/^[A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"pl-PL":/^[A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÄÇÉÊËÍÏÕÓÔÖÚÜ]+$/i,"ru-RU":/^[А-ЯЁ]+$/i,"kk-KZ":/^[А-ЯЁ\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[A-ZÅÄÖ]+$/i,"th-TH":/^[ก-๐\s]+$/i,"tr-TR":/^[A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[А-ЩЬЮЯЄIЇҐі]+$/i,"vi-VN":/^[A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴĐÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸ]+$/i,"ko-KR":/^[ㄱ-ㅎㅏ-ㅣ가-힣]*$/,"ku-IQ":/^[ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/,he:/^[א-ת]+$/,fa:/^['آاءأؤئبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهةی']+$/i,bn:/^['ঀঁংঃঅআইঈউঊঋঌএঐওঔকখগঘঙচছজঝঞটঠডঢণতথদধনপফবভমযরলশষসহ়ঽািীুূৃৄেৈোৌ্ৎৗড়ঢ়য়ৠৡৢৣৰৱ৲৳৴৵৶৷৸৹৺৻']+$/,eo:/^[ABCĈD-GĜHĤIJĴK-PRSŜTUŬVZ]+$/i,"hi-IN":/^[\u0900-\u0961]+[\u0972-\u097F]*$/i,"si-LK":/^[\u0D80-\u0DFF]+$/},a={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZÇƏĞİıÖŞÜ]+$/i,"bg-BG":/^[0-9А-Я]+$/i,"cs-CZ":/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[0-9A-ZÆØÅ]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"el-GR":/^[0-9Α-ω]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fi-FI":/^[0-9A-ZÅÄÖ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[0-9A-ZÀÉÈÌÎÓÒÙ]+$/i,"ja-JP":/^[0-9０-９ぁ-んァ-ヶｦ-ﾟ一-龠ー・。、]+$/i,"hu-HU":/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"nb-NO":/^[0-9A-ZÆØÅ]+$/i,"nl-NL":/^[0-9A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[0-9A-ZÆØÅ]+$/i,"pl-PL":/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÄÇÉÊËÍÏÕÓÔÖÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁ]+$/i,"kk-KZ":/^[0-9А-ЯЁ\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[0-9A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[0-9A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[0-9A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[0-9А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[0-9A-ZÅÄÖ]+$/i,"th-TH":/^[ก-๙\s]+$/i,"tr-TR":/^[0-9A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[0-9А-ЩЬЮЯЄIЇҐі]+$/i,"ko-KR":/^[0-9ㄱ-ㅎㅏ-ㅣ가-힣]*$/,"ku-IQ":/^[٠١٢٣٤٥٦٧٨٩0-9ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,"vi-VN":/^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴĐÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸ]+$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/,he:/^[0-9א-ת]+$/,fa:/^['0-9آاءأؤئبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهةی۱۲۳۴۵۶۷۸۹۰']+$/i,bn:/^['ঀঁংঃঅআইঈউঊঋঌএঐওঔকখগঘঙচছজঝঞটঠডঢণতথদধনপফবভমযরলশষসহ়ঽািীুূৃৄেৈোৌ্ৎৗড়ঢ়য়ৠৡৢৣ০১২৩৪৫৬৭৮৯ৰৱ৲৳৴৵৶৷৸৹৺৻']+$/,eo:/^[0-9ABCĈD-GĜHĤIJĴK-PRSŜTUŬVZ]+$/i,"hi-IN":/^[\u0900-\u0963]+[\u0966-\u097F]*$/i,"si-LK":/^[0-9\u0D80-\u0DFF]+$/},s={"en-US":".",ar:"٫"},l=["AU","GB","HK","IN","NZ","ZA","ZM"],c=0;c<l.length;c++)r="en-".concat(l[c]),o[r]=o["en-US"],a[r]=a["en-US"],s[r]=s["en-US"];for(var u,d=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"],h=0;h<d.length;h++)u="ar-".concat(d[h]),o[u]=o.ar,a[u]=a.ar,s[u]=s.ar;for(var p,f=["IR","AF"],m=0;m<f.length;m++)p="fa-".concat(f[m]),a[p]=a.fa,s[p]=s.ar;for(var g,v=["BD","IN"],b=0;b<v.length;b++)g="bn-".concat(v[b]),o[g]=o.bn,a[g]=a.bn,s[g]=s["en-US"];for(var y=["ar-EG","ar-LB","ar-LY"],w=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","eo","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hi-IN","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","kk-KZ","si-LK","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"],_=0;_<y.length;_++)s[y[_]]=s["en-US"];for(var x=0;x<w.length;x++)s[w[x]]=",";function S(t,n){e(t),n=n||{};var r=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(n.locale?s[n.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(""===t||"."===t||","===t||"-"===t||"+"===t)return!1;var o=parseFloat(t.replace(",","."));return r.test(t)&&(!n.hasOwnProperty("min")||i(n.min)||o>=n.min)&&(!n.hasOwnProperty("max")||i(n.max)||o<=n.max)&&(!n.hasOwnProperty("lt")||i(n.lt)||o<n.lt)&&(!n.hasOwnProperty("gt")||i(n.gt)||o>n.gt)}o["fr-CA"]=o["fr-FR"],a["fr-CA"]=a["fr-FR"],o["pt-BR"]=o["pt-PT"],a["pt-BR"]=a["pt-PT"],s["pt-BR"]=s["pt-PT"],o["pl-Pl"]=o["pl-PL"],a["pl-Pl"]=a["pl-PL"],s["pl-Pl"]=s["pl-PL"],o["fa-AF"]=o.fa;var T=Object.keys(s);function A(e){return S(e)?parseFloat(e):NaN}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=D(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function D(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function O(e){return"object"===P(e)&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e=""),String(e)}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}var L={ignoreCase:!1,minOccurrences:1};function R(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e===i||R(i)&&i.test(e))return!0}return!1}function F(t,n){var i,r;e(t),"object"===P(n)?(i=n.min||0,r=n.max):(i=arguments[1],r=arguments[2]);var o=encodeURI(t).split(/%..|./).length-1;return o>=i&&(void 0===r||o<=r)}var U={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function V(t,n){e(t),(n=M(n,U)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1)),!0===n.allow_wildcard&&0===t.indexOf("*.")&&(t=t.substring(2));var i=t.split("."),r=i[i.length-1];if(n.require_tld){if(i.length<2)return!1;if(!n.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(r))return!1;if(/\s/.test(r))return!1}return!(!n.allow_numeric_tld&&/^\d+$/.test(r))&&i.every(function(e){return!(e.length>63&&!n.ignore_max_length)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!n.allow_underscores&&/_/.test(e)))))})}var B="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",$="(".concat(B,"[.]){3}").concat(B),H=new RegExp("^".concat($,"$")),G="(?:[0-9a-fA-F]{1,4})",j=new RegExp("^("+"(?:".concat(G,":){7}(?:").concat(G,"|:)|")+"(?:".concat(G,":){6}(?:").concat($,"|:").concat(G,"|:)|")+"(?:".concat(G,":){5}(?::").concat($,"|(:").concat(G,"){1,2}|:)|")+"(?:".concat(G,":){4}(?:(:").concat(G,"){0,1}:").concat($,"|(:").concat(G,"){1,3}|:)|")+"(?:".concat(G,":){3}(?:(:").concat(G,"){0,2}:").concat($,"|(:").concat(G,"){1,4}|:)|")+"(?:".concat(G,":){2}(?:(:").concat(G,"){0,3}:").concat($,"|(:").concat(G,"){1,5}|:)|")+"(?:".concat(G,":){1}(?:(:").concat(G,"){0,4}:").concat($,"|(:").concat(G,"){1,6}|:)|")+"(?::((?::".concat(G,"){0,5}:").concat($,"|(?::").concat(G,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function z(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(t);var i=("object"===P(n)?n.version:arguments[1])||"";return i?"4"===i.toString()?H.test(t):"6"===i.toString()&&j.test(t):z(t,{version:4})||z(t,{version:6})}var q={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},Y=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,W=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,K=/^[a-z\d]+$/,X=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,Z=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,J=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;function Q(t,n){if(e(t),(n=M(n,q)).require_display_name||n.allow_display_name){var i=t.match(Y);if(i){var r=i[1];if(t=t.replace(r,"").replace(/(^<|>$)/g,""),r.endsWith(" ")&&(r=r.slice(0,-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(t.split('"').length!==t.split('\\"').length)return!1}return!0}(r))return!1}else if(n.require_display_name)return!1}if(!n.ignore_max_length&&t.length>254)return!1;var o=t.split("@"),a=o.pop(),s=a.toLowerCase();if(n.host_blacklist.length>0&&N(s,n.host_blacklist))return!1;if(n.host_whitelist.length>0&&!N(s,n.host_whitelist))return!1;var l=o.join("@");if(n.domain_specific_validation&&("gmail.com"===s||"googlemail.com"===s)){var c=(l=l.toLowerCase()).split("+")[0];if(!F(c.replace(/\./g,""),{min:6,max:30}))return!1;for(var u=c.split("."),d=0;d<u.length;d++)if(!K.test(u[d]))return!1}if(!(!1!==n.ignore_max_length||F(l,{max:64})&&F(a,{max:254})))return!1;if(!V(a,{require_tld:n.require_tld,ignore_max_length:n.ignore_max_length,allow_underscores:n.allow_underscores})){if(!n.allow_ip_domain)return!1;if(!z(a)){if(!a.startsWith("[")||!a.endsWith("]"))return!1;var h=a.slice(1,-1);if(0===h.length||!z(h))return!1}}if(n.blacklisted_chars&&-1!==l.search(new RegExp("[".concat(n.blacklisted_chars,"]+"),"g")))return!1;if('"'===l[0]&&'"'===l[l.length-1])return l=l.slice(1,l.length-1),n.allow_utf8_local_part?J.test(l):X.test(l);for(var p=n.allow_utf8_local_part?Z:W,f=l.split("."),m=0;m<f.length;m++)if(!p.test(f[m]))return!1;return!0}var ee=function(e,t){return-1!==e.indexOf(t)},te={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},ne=/^\[([^\]]+)\](?::([0-9]+))?$/;var ie=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,re=/^([0-9a-fA-F]){12}$/,oe=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/,ae=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/,se=/^([0-9a-fA-F]){16}$/,le=/^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/;var ce=/^\d{1,3}$/;var ue={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function de(e,t){if(t=M("string"==typeof t?{format:t}:t,ue),"string"==typeof e&&(m=t.format,/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(m))){if(t.strictMode&&e.length!==t.format.length)return!1;var n,i=t.delimiters.find(function(e){return-1!==t.format.indexOf(e)}),r=t.strictMode?i:t.delimiters.find(function(t){return-1!==e.indexOf(t)}),o=function(e,t){for(var n=[],i=Math.max(e.length,t.length),r=0;r<i;r++)n.push([e[r],t[r]]);return n}(e.split(r),t.format.toLowerCase().split(i)),a={},s=E(o);try{for(s.s();!(n=s.n()).done;){var l=k(n.value,2),c=l[0],u=l[1];if(!c||!u||c.length!==u.length)return!1;a[u.charAt(0)]=c}}catch(g){s.e(g)}finally{s.f()}var d=a.y;if(d.startsWith("-"))return!1;if(2===a.y.length){var h=parseInt(a.y,10);if(isNaN(h))return!1;d=h<(new Date).getFullYear()%100?"20".concat(a.y):"19".concat(a.y)}var p=a.m;1===a.m.length&&(p="0".concat(a.m));var f=a.d;return 1===a.d.length&&(f="0".concat(a.d)),new Date("".concat(d,"-").concat(p,"-").concat(f,"T00:00:00.000Z")).getUTCDate()===+a.d}var m;return!t.strictMode&&("[object Date]"===Object.prototype.toString.call(e)&&isFinite(e))}var he={hourFormat:"hour24",mode:"default"},pe={hour24:{default:/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,withSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,withOptionalSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$/},hour12:{default:/^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,withSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/,withOptionalSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9])(?::([0-5][0-9]))? (A|P)M$/}};var fe=function(e,t){return e.some(function(e){return t===e})},me={loose:!1},ge=["true","false","1","0"],ve=[].concat(ge,["yes","no"]);var be="(([a-zA-Z]{2,3}(-".concat("([A-Za-z]{3}(-[A-Za-z]{3}){0,2})",")?)|([a-zA-Z]{5,8}))"),ye="(".concat("(\\d|[A-W]|[Y-Z]|[a-w]|[y-z])","(-[A-Za-z0-9]{2,8})+)"),we="(x(-[A-Za-z0-9]{1,8})+)",_e="(".concat("((en-GB-oed)|(i-ami)|(i-bnn)|(i-default)|(i-enochian)|(i-hak)|(i-klingon)|(i-lux)|(i-mingo)|(i-navajo)|(i-pwn)|(i-tao)|(i-tay)|(i-tsu)|(sgn-BE-FR)|(sgn-BE-NL)|(sgn-CH-DE))","|").concat("((art-lojban)|(cel-gaulish)|(no-bok)|(no-nyn)|(zh-guoyu)|(zh-hakka)|(zh-min)|(zh-min-nan)|(zh-xiang))",")"),xe="(-|_)",Se="".concat(be,"(").concat(xe).concat("([A-Za-z]{4})",")?(").concat(xe).concat("([A-Za-z]{2}|\\d{3})",")?(").concat(xe).concat("([A-Za-z0-9]{5,8}|(\\d[A-Z-a-z0-9]{3}))",")*(").concat(xe).concat(ye,")*(").concat(xe).concat(we,")?"),Te=new RegExp("(^".concat(we,"$)|(^").concat(_e,"$)|(^").concat(Se,"$)"));var Ae=/^(?!(1[3-9])|(20)|(3[3-9])|(4[0-9])|(5[0-9])|(60)|(7[3-9])|(8[1-9])|(9[0-2])|(9[3-9]))[0-9]{9}$/;var Ce=Object.keys(o);var Ee=Object.keys(a),ke=/^[0-9]+$/;var Ie={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,AZ:/^[A-Z]{1}\d{8}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$|^[A-Z]\d{6}[A-Z]{2}$/,CH:/^[A-Z]\d{7}$/,CN:/^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,ID:/^[A-C]\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JM:/^[Aa]\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,KZ:/^[a-zA-Z]\d{7}$/,LI:/^[a-zA-Z]\d{5}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,MX:/^\d{10,11}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,NZ:/^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,PH:/^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,PK:/^[A-Z]{2}\d{7}$/,PL:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{9}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TH:/^[A-Z]{1,2}\d{6,7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$|^[A-Z]\d{8}$/,ZA:/^[TAMD]\d{8}$/},Pe=Object.keys(Ie);var De=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,Oe=/^[-+]?[0-9]+$/;function Me(t,n){e(t);var r=!1===(n=n||{}).allow_leading_zeroes?De:Oe,o=!n.hasOwnProperty("min")||i(n.min)||t>=n.min,a=!n.hasOwnProperty("max")||i(n.max)||t<=n.max,s=!n.hasOwnProperty("lt")||i(n.lt)||t<n.lt,l=!n.hasOwnProperty("gt")||i(n.gt)||t>n.gt;return r.test(t)&&o&&a&&s&&l}var Le=/^[0-9]{15}$/,Re=/^\d{2}-\d{6}-\d{6}-\d{1}$/;var Ne=/^[\x00-\x7F]+$/;var Fe=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;var Ue=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;var Ve=/[^\x00-\x7F]/;var Be,$e,He=(Be="i",$e=["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"].join(""),new RegExp($e,Be));var Ge=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;var je={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},ze=["","-","+"];var qe=/^(0x|0h)?[0-9A-F]+$/i;function Ye(t){return e(t),qe.test(t)}var We=/^(0o)?[0-7]+$/i;var Ke=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;var Xe=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,Ze=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d\d?|1(\.0)?|0(\.0)?)\)$/,Je=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/,Qe=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d\d?|1(\.0)?|0(\.0)?)\)$/,et=/^rgba?/;var tt=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,nt=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;var it=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;var rt={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,DZ:/^(DZ\d{24})$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MA:/^(MA[0-9]{26})$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function ot(e,t){var n=e.replace(/[\s\-]+/gi,"").toUpperCase(),i=n.slice(0,2).toUpperCase(),r=i in rt;if(t.whitelist){if(t.whitelist.filter(function(e){return!(e in rt)}).length>0)return!1;if(!fe(t.whitelist,i))return!1}if(t.blacklist&&fe(t.blacklist,i))return!1;return r&&rt[i].test(n)}var at=Object.keys(rt),st=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);var lt=st,ct=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;var ut=/^[a-f0-9]{32}$/;var dt={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};var ht=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$/,pt=/^[A-Za-z0-9+/]+$/,ft=/^(?:[A-Za-z0-9_-]{4})*(?:[A-Za-z0-9_-]{2}==|[A-Za-z0-9_-]{3}=|[A-Za-z0-9_-]{4})$/,mt=/^[A-Za-z0-9_-]+$/;function gt(t,n){var i,r;return e(t),n=M(n,{urlSafe:!1,padding:!(null!==(i=n)&&void 0!==i&&i.urlSafe)}),""===t||(r=n.urlSafe?n.padding?ft:mt:n.padding?ht:pt,(!n.padding||t.length%4==0)&&r.test(t))}var vt={allow_primitives:!1};var bt={ignore_whitespace:!1};var yt={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,6:/^[0-9A-F]{8}-[0-9A-F]{4}-6[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,7:/^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,8:/^[0-9A-F]{8}-[0-9A-F]{4}-8[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,nil:/^00000000-0000-0000-0000-000000000000$/i,max:/^ffffffff-ffff-ffff-ffff-ffffffffffff$/i,loose:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,all:/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i};function wt(t){e(t);for(var n,i,r,o=t.replace(/[- ]+/g,""),a=0,s=o.length-1;s>=0;s--)n=o.substring(s,s+1),i=parseInt(n,10),a+=r&&(i*=2)>=10?i%10+1:i,r=!r;return!(a%10!=0||!o)}var _t={amex:/^3[47][0-9]{13}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,mastercard:/^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,unionpay:/^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,visa:/^(?:4[0-9]{12})(?:[0-9]{3,6})?$/},xt=function(){var e=[];for(var t in _t)_t.hasOwnProperty(t)&&e.push(_t[t]);return e}();var St={PL:function(t){e(t);var n={1:1,2:3,3:7,4:9,5:1,6:3,7:7,8:9,9:1,10:3,11:0};if(null!=t&&11===t.length&&Me(t,{allow_leading_zeroes:!0})){var i=t.split("").slice(0,-1).reduce(function(e,t,i){return e+Number(t)*n[i+1]},0)%10,r=Number(t.charAt(t.length-1));if(0===i&&0===r||r===10-i)return!0}return!1},ES:function(t){e(t);var n={X:0,Y:1,Z:2},i=t.trim().toUpperCase();if(!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(i))return!1;var r=i.slice(0,-1).replace(/[X,Y,Z]/g,function(e){return n[e]});return i.endsWith(["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][r%23])},FI:function(t){if(e(t),11!==t.length)return!1;if(!t.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/))return!1;return"0123456789ABCDEFHJKLMNPRSTUVWXY"[(1e3*parseInt(t.slice(0,6),10)+parseInt(t.slice(7,10),10))%31]===t.slice(10,11)},IN:function(e){var t=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],n=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],i=e.trim();if(!/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/.test(i))return!1;var r=0;return i.replace(/\s/g,"").split("").map(Number).reverse().forEach(function(e,i){r=t[r][n[i%8][e]]}),0===r},IR:function(e){if(!e.match(/^\d{10}$/))return!1;if(e="0000".concat(e).slice(e.length-6),0===parseInt(e.slice(3,9),10))return!1;for(var t=parseInt(e.slice(9,10),10),n=0,i=0;i<9;i++)n+=parseInt(e.slice(i,i+1),10)*(10-i);return(n%=11)<2&&t===n||n>=2&&t===11-n},IT:function(e){return 9===e.length&&("CA00000AA"!==e&&e.search(/C[A-Z]\d{5}[A-Z]{2}/i)>-1)},NO:function(e){var t=e.trim();if(isNaN(Number(t)))return!1;if(11!==t.length)return!1;if("00000000000"===t)return!1;var n=t.split("").map(Number),i=(11-(3*n[0]+7*n[1]+6*n[2]+1*n[3]+8*n[4]+9*n[5]+4*n[6]+5*n[7]+2*n[8])%11)%11,r=(11-(5*n[0]+4*n[1]+3*n[2]+2*n[3]+7*n[4]+6*n[5]+5*n[6]+4*n[7]+3*n[8]+2*i)%11)%11;return i===n[9]&&r===n[10]},TH:function(e){if(!e.match(/^[1-8]\d{12}$/))return!1;for(var t=0,n=0;n<12;n++)t+=parseInt(e[n],10)*(13-n);return e[12]===((11-t%11)%10).toString()},LK:function(e){return!(10!==e.length||!/^[1-9]\d{8}[vx]$/i.test(e))||!(12!==e.length||!/^[1-9]\d{11}$/i.test(e))},"he-IL":function(e){var t=e.trim();if(!/^\d{9}$/.test(t))return!1;for(var n,i=t,r=0,o=0;o<i.length;o++)r+=(n=Number(i[o])*(o%2+1))>9?n-9:n;return r%10==0},"ar-LY":function(e){var t=e.trim();return!!/^(1|2)\d{11}$/.test(t)},"ar-TN":function(e){var t=e.trim();return!!/^\d{8}$/.test(t)},"zh-CN":function(e){var t,n=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],i=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],r=["1","0","X","9","8","7","6","5","4","3","2"],o=function(e){return fe(n,e)},a=function(e){var t=parseInt(e.substring(0,4),10),n=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6),10),r=new Date(t,n-1,i);return!(r>new Date)&&(r.getFullYear()===t&&r.getMonth()===n-1&&r.getDate()===i)},s=function(e){return function(e){for(var t=e.substring(0,17),n=0,o=0;o<17;o++)n+=parseInt(t.charAt(o),10)*parseInt(i[o],10);return r[n%11]}(e)===e.charAt(17).toUpperCase()};return!!/^\d{15}|(\d{17}(\d|x|X))$/.test(t=e)&&(15===t.length?function(e){var t=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(e);if(!t)return!1;var n=e.substring(0,2);if(!(t=o(n)))return!1;var i="19".concat(e.substring(6,12));return!!(t=a(i))}(t):function(e){var t=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(e);if(!t)return!1;var n=e.substring(0,2);if(!(t=o(n)))return!1;var i=e.substring(6,14);return!!(t=a(i))&&s(e)}(t))},"zh-HK":function(e){var t=/^[0-9]$/;if(e=(e=e.trim()).toUpperCase(),!/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/.test(e))return!1;8===(e=e.replace(/\[|\]|\(|\)/g,"")).length&&(e="3".concat(e));for(var n=0,i=0;i<=7;i++){n+=(t.test(e[i])?e[i]:(e[i].charCodeAt(0)-55)%11)*(9-i)}return(0===(n%=11)?"0":1===n?"A":String(11-n))===e[e.length-1]},"zh-TW":function(e){var t={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},n=e.trim().toUpperCase();return!!/^[A-Z][0-9]{9}$/.test(n)&&Array.from(n).reduce(function(e,n,i){if(0===i){var r=t[n];return r%10*9+Math.floor(r/10)}return 9===i?(10-e%10-Number(n))%10==0:e+Number(n)*(9-i)},0)},PK:function(e){var t=e.trim();return/^[1-7][0-9]{4}-[0-9]{7}-[1-9]$/.test(t)}};var Tt=/^(\d{8}|\d{13}|\d{14})$/;var At=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;var Ct=/^(?:[0-9]{9}X|[0-9]{10})$/,Et=/^(?:[0-9]{13})$/,kt=[1,3];function It(e){for(var t=10,n=0;n<e.length-1;n++)t=(parseInt(e[n],10)+t)%10==0?9:(parseInt(e[n],10)+t)%10*2%11;return(t=1===t?0:11-t)===parseInt(e[10],10)}function Pt(e){for(var t=0,n=!1,i=e.length-1;i>=0;i--){if(n){var r=2*parseInt(e[i],10);t+=r>9?r.toString().split("").map(function(e){return parseInt(e,10)}).reduce(function(e,t){return e+t},0):r}else t+=parseInt(e[i],10);n=!n}return t%10==0}function Dt(e,t){for(var n=0,i=0;i<e.length;i++)n+=e[i]*(t-i);return n}var Ot={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function Mt(e){for(var t=!1,n=!1,i=0;i<3;i++)if(!t&&/[AEIOU]/.test(e[i]))t=!0;else if(!n&&t&&"X"===e[i])n=!0;else if(i>0){if(t&&!n&&!/[AEIOU]/.test(e[i]))return!1;if(n&&!/X/.test(e[i]))return!1}return!0}var Lt={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-CA":/^\d{9}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-AR":/(20|23|24|27|30|33|34)[0-9]{8}[0-9]/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/(?:^\d{11}$)|(?:^\d{14}$)/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/,"uk-UA":/^\d{10}$/};Lt["lb-LU"]=Lt["fr-LU"],Lt["lt-LT"]=Lt["et-EE"],Lt["nl-BE"]=Lt["fr-BE"],Lt["fr-CA"]=Lt["en-CA"];var Rt={"bg-BG":function(e){var t=e.slice(0,2),n=parseInt(e.slice(2,4),10);if(n>40?(n-=40,t="20".concat(t)):n>20?(n-=20,t="18".concat(t)):t="19".concat(t),n<10&&(n="0".concat(n)),!de("".concat(t,"/").concat(n,"/").concat(e.slice(4,6)),"YYYY/MM/DD"))return!1;for(var i=e.split("").map(function(e){return parseInt(e,10)}),r=[2,4,8,5,10,9,7,3,6],o=0,a=0;a<r.length;a++)o+=i[a]*r[a];return(o=o%11==10?0:o%11)===i[9]},"cs-CZ":function(e){e=e.replace(/\W/,"");var t=parseInt(e.slice(0,2),10);if(10===e.length)t=t<54?"20".concat(t):"19".concat(t);else{if("000"===e.slice(6))return!1;if(!(t<54))return!1;t="19".concat(t)}3===t.length&&(t=[t.slice(0,2),"0",t.slice(2)].join(""));var n=parseInt(e.slice(2,4),10);if(n>50&&(n-=50),n>20){if(parseInt(t,10)<2004)return!1;n-=20}if(n<10&&(n="0".concat(n)),!de("".concat(t,"/").concat(n,"/").concat(e.slice(4,6)),"YYYY/MM/DD"))return!1;if(10===e.length&&parseInt(e,10)%11!=0){var i=parseInt(e.slice(0,9),10)%11;if(!(parseInt(t,10)<1986&&10===i))return!1;if(0!==parseInt(e.slice(9),10))return!1}return!0},"de-AT":function(e){return Pt(e)},"de-DE":function(e){for(var t=e.split("").map(function(e){return parseInt(e,10)}),n=[],i=0;i<t.length-1;i++){n.push("");for(var r=0;r<t.length-1;r++)t[i]===t[r]&&(n[i]+=r)}if(2!==(n=n.filter(function(e){return e.length>1})).length&&3!==n.length)return!1;if(3===n[0].length){for(var o=n[0].split("").map(function(e){return parseInt(e,10)}),a=0,s=0;s<o.length-1;s++)o[s]+1===o[s+1]&&(a+=1);if(2===a)return!1}return It(e)},"dk-DK":function(e){e=e.replace(/\W/,"");var t=parseInt(e.slice(4,6),10);switch(e.slice(6,7)){case"0":case"1":case"2":case"3":t="19".concat(t);break;case"4":case"9":t=t<37?"20".concat(t):"19".concat(t);break;default:if(t<37)t="20".concat(t);else{if(!(t>58))return!1;t="18".concat(t)}}if(3===t.length&&(t=[t.slice(0,2),"0",t.slice(2)].join("")),!de("".concat(t,"/").concat(e.slice(2,4),"/").concat(e.slice(0,2)),"YYYY/MM/DD"))return!1;for(var n=e.split("").map(function(e){return parseInt(e,10)}),i=0,r=4,o=0;o<9;o++)i+=n[o]*r,1===(r-=1)&&(r=7);return 1!==(i%=11)&&(0===i?0===n[9]:n[9]===11-i)},"el-CY":function(e){for(var t=e.slice(0,8).split("").map(function(e){return parseInt(e,10)}),n=0,i=1;i<t.length;i+=2)n+=t[i];for(var r=0;r<t.length;r+=2)t[r]<2?n+=1-t[r]:(n+=2*(t[r]-2)+5,t[r]>4&&(n+=2));return String.fromCharCode(n%26+65)===e.charAt(8)},"el-GR":function(e){for(var t=e.split("").map(function(e){return parseInt(e,10)}),n=0,i=0;i<8;i++)n+=t[i]*Math.pow(2,8-i);return n%11%10===t[8]},"en-CA":function(e){var t=e.split(""),n=t.filter(function(e,t){return t%2}).map(function(e){return 2*Number(e)}).join("").split(""),i=t.filter(function(e,t){return!(t%2)}).concat(n).map(function(e){return Number(e)}).reduce(function(e,t){return e+t});return i%10==0},"en-IE":function(e){var t=Dt(e.split("").slice(0,7).map(function(e){return parseInt(e,10)}),8);return 9===e.length&&"W"!==e[8]&&(t+=9*(e[8].charCodeAt(0)-64)),0===(t%=23)?"W"===e[7].toUpperCase():e[7].toUpperCase()===String.fromCharCode(64+t)},"en-US":function(e){return-1!==function(){var e=[];for(var t in Ot)Ot.hasOwnProperty(t)&&e.push.apply(e,I(Ot[t]));return e}().indexOf(e.slice(0,2))},"es-AR":function(e){for(var t=0,n=e.split(""),i=parseInt(n.pop(),10),r=0;r<n.length;r++)t+=n[9-r]*(2+r%6);var o=11-t%11;return 11===o?o=0:10===o&&(o=9),i===o},"es-ES":function(e){var t=e.toUpperCase().split("");if(isNaN(parseInt(t[0],10))&&t.length>1){var n=0;switch(t[0]){case"Y":n=1;break;case"Z":n=2}t.splice(0,1,n)}else for(;t.length<9;)t.unshift(0);t=t.join("");var i=parseInt(t.slice(0,8),10)%23;return t[8]===["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][i]},"et-EE":function(e){var t=e.slice(1,3);switch(e.slice(0,1)){case"1":case"2":t="18".concat(t);break;case"3":case"4":t="19".concat(t);break;default:t="20".concat(t)}if(!de("".concat(t,"/").concat(e.slice(3,5),"/").concat(e.slice(5,7)),"YYYY/MM/DD"))return!1;for(var n=e.split("").map(function(e){return parseInt(e,10)}),i=0,r=1,o=0;o<10;o++)i+=n[o]*r,10===(r+=1)&&(r=1);if(i%11==10){i=0,r=3;for(var a=0;a<10;a++)i+=n[a]*r,10===(r+=1)&&(r=1);if(i%11==10)return 0===n[10]}return i%11===n[10]},"fi-FI":function(e){var t=e.slice(4,6);switch(e.slice(6,7)){case"+":t="18".concat(t);break;case"-":t="19".concat(t);break;default:t="20".concat(t)}if(!de("".concat(t,"/").concat(e.slice(2,4),"/").concat(e.slice(0,2)),"YYYY/MM/DD"))return!1;var n=parseInt(e.slice(0,6)+e.slice(7,10),10)%31;return n<10?n===parseInt(e.slice(10),10):["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"][n-=10]===e.slice(10)},"fr-BE":function(e){if(("00"!==e.slice(2,4)||"00"!==e.slice(4,6))&&!de("".concat(e.slice(0,2),"/").concat(e.slice(2,4),"/").concat(e.slice(4,6)),"YY/MM/DD"))return!1;var t=97-parseInt(e.slice(0,9),10)%97,n=parseInt(e.slice(9,11),10);return t===n||(t=97-parseInt("2".concat(e.slice(0,9)),10)%97)===n},"fr-FR":function(e){return e=e.replace(/\s/g,""),parseInt(e.slice(0,10),10)%511===parseInt(e.slice(10,13),10)},"fr-LU":function(e){return!!de("".concat(e.slice(0,4),"/").concat(e.slice(4,6),"/").concat(e.slice(6,8)),"YYYY/MM/DD")&&(!!Pt(e.slice(0,12))&&function(e){for(var t=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],n=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],i=e.split("").reverse().join(""),r=0,o=0;o<i.length;o++)r=t[r][n[o%8][parseInt(i[o],10)]];return 0===r}("".concat(e.slice(0,11)).concat(e[12])))},"hr-HR":function(e){return It(e)},"hu-HU":function(e){for(var t=e.split("").map(function(e){return parseInt(e,10)}),n=8,i=1;i<9;i++)n+=t[i]*(i+1);return n%11===t[9]},"it-IT":function(e){var t=e.toUpperCase().split("");if(!Mt(t.slice(0,3)))return!1;if(!Mt(t.slice(3,6)))return!1;for(var n={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},i=0,r=[6,7,9,10,12,13,14];i<r.length;i++){var o=r[i];t[o]in n&&t.splice(o,1,n[t[o]])}var a={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"}[t[8]],s=parseInt(t[9]+t[10],10);if(s>40&&(s-=40),s<10&&(s="0".concat(s)),!de("".concat(t[6]).concat(t[7],"/").concat(a,"/").concat(s),"YY/MM/DD"))return!1;for(var l=0,c=1;c<t.length-1;c+=2){var u=parseInt(t[c],10);isNaN(u)&&(u=t[c].charCodeAt(0)-65),l+=u}for(var d={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},h=0;h<t.length-1;h+=2){var p=0;if(t[h]in d)p=d[t[h]];else{var f=parseInt(t[h],10);p=2*f+1,f>4&&(p+=2)}l+=p}return String.fromCharCode(65+l%26)===t[15]},"lv-LV":function(e){var t=(e=e.replace(/\W/,"")).slice(0,2);if("32"!==t){if("00"!==e.slice(2,4)){var n=e.slice(4,6);switch(e[6]){case"0":n="18".concat(n);break;case"1":n="19".concat(n);break;default:n="20".concat(n)}if(!de("".concat(n,"/").concat(e.slice(2,4),"/").concat(t),"YYYY/MM/DD"))return!1}for(var i=1101,r=[1,6,3,7,9,10,5,8,4,2],o=0;o<e.length-1;o++)i-=parseInt(e[o],10)*r[o];return parseInt(e[10],10)===i%11}return!0},"mt-MT":function(e){if(9!==e.length){for(var t=e.toUpperCase().split("");t.length<8;)t.unshift(0);switch(e[7]){case"A":case"P":if(0===parseInt(t[6],10))return!1;break;default:var n=parseInt(t.join("").slice(0,5),10);if(n>32e3)return!1;if(n===parseInt(t.join("").slice(5,7),10))return!1}}return!0},"nl-NL":function(e){return Dt(e.split("").slice(0,8).map(function(e){return parseInt(e,10)}),9)%11===parseInt(e[8],10)},"pl-PL":function(e){if(10===e.length){for(var t=[6,5,7,2,3,4,5,6,7],n=0,i=0;i<t.length;i++)n+=parseInt(e[i],10)*t[i];return 10!==(n%=11)&&n===parseInt(e[9],10)}var r=e.slice(0,2),o=parseInt(e.slice(2,4),10);if(o>80?(r="18".concat(r),o-=80):o>60?(r="22".concat(r),o-=60):o>40?(r="21".concat(r),o-=40):o>20?(r="20".concat(r),o-=20):r="19".concat(r),o<10&&(o="0".concat(o)),!de("".concat(r,"/").concat(o,"/").concat(e.slice(4,6)),"YYYY/MM/DD"))return!1;for(var a=0,s=1,l=0;l<e.length-1;l++)a+=parseInt(e[l],10)*s%10,(s+=2)>10?s=1:5===s&&(s+=2);return(a=10-a%10)===parseInt(e[10],10)},"pt-BR":function(e){if(11===e.length){var t,n;if(t=0,"11111111111"===e||"22222222222"===e||"33333333333"===e||"44444444444"===e||"55555555555"===e||"66666666666"===e||"77777777777"===e||"88888888888"===e||"99999999999"===e||"00000000000"===e)return!1;for(var i=1;i<=9;i++)t+=parseInt(e.substring(i-1,i),10)*(11-i);if(10===(n=10*t%11)&&(n=0),n!==parseInt(e.substring(9,10),10))return!1;t=0;for(var r=1;r<=10;r++)t+=parseInt(e.substring(r-1,r),10)*(12-r);return 10===(n=10*t%11)&&(n=0),n===parseInt(e.substring(10,11),10)}if("00000000000000"===e||"11111111111111"===e||"22222222222222"===e||"33333333333333"===e||"44444444444444"===e||"55555555555555"===e||"66666666666666"===e||"77777777777777"===e||"88888888888888"===e||"99999999999999"===e)return!1;for(var o=e.length-2,a=e.substring(0,o),s=e.substring(o),l=0,c=o-7,u=o;u>=1;u--)l+=a.charAt(o-u)*c,(c-=1)<2&&(c=9);var d=l%11<2?0:11-l%11;if(d!==parseInt(s.charAt(0),10))return!1;o+=1,a=e.substring(0,o),l=0,c=o-7;for(var h=o;h>=1;h--)l+=a.charAt(o-h)*c,(c-=1)<2&&(c=9);return(d=l%11<2?0:11-l%11)===parseInt(s.charAt(1),10)},"pt-PT":function(e){var t=11-Dt(e.split("").slice(0,8).map(function(e){return parseInt(e,10)}),9)%11;return t>9?0===parseInt(e[8],10):t===parseInt(e[8],10)},"ro-RO":function(e){if("9000"!==e.slice(0,4)){var t=e.slice(1,3);switch(e[0]){case"1":case"2":t="19".concat(t);break;case"3":case"4":t="18".concat(t);break;case"5":case"6":t="20".concat(t)}var n="".concat(t,"/").concat(e.slice(3,5),"/").concat(e.slice(5,7));if(8===n.length){if(!de(n,"YY/MM/DD"))return!1}else if(!de(n,"YYYY/MM/DD"))return!1;for(var i=e.split("").map(function(e){return parseInt(e,10)}),r=[2,7,9,1,4,6,3,5,8,2,7,9],o=0,a=0;a<r.length;a++)o+=i[a]*r[a];return o%11==10?1===i[12]:i[12]===o%11}return!0},"sk-SK":function(e){if(9===e.length){if("000"===(e=e.replace(/\W/,"")).slice(6))return!1;var t=parseInt(e.slice(0,2),10);if(t>53)return!1;t=t<10?"190".concat(t):"19".concat(t);var n=parseInt(e.slice(2,4),10);if(n>50&&(n-=50),n<10&&(n="0".concat(n)),!de("".concat(t,"/").concat(n,"/").concat(e.slice(4,6)),"YYYY/MM/DD"))return!1}return!0},"sl-SI":function(e){var t=11-Dt(e.split("").slice(0,7).map(function(e){return parseInt(e,10)}),8)%11;return 10===t?0===parseInt(e[7],10):t===parseInt(e[7],10)},"sv-SE":function(e){var t=e.slice(0);e.length>11&&(t=t.slice(2));var n="",i=t.slice(2,4),r=parseInt(t.slice(4,6),10);if(e.length>11)n=e.slice(0,4);else if(n=e.slice(0,2),11===e.length&&r<60){var o=(new Date).getFullYear().toString(),a=parseInt(o.slice(0,2),10);if(o=parseInt(o,10),"-"===e[6])n=parseInt("".concat(a).concat(n),10)>o?"".concat(a-1).concat(n):"".concat(a).concat(n);else if(n="".concat(a-1).concat(n),o-parseInt(n,10)<100)return!1}r>60&&(r-=60),r<10&&(r="0".concat(r));var s="".concat(n,"/").concat(i,"/").concat(r);if(8===s.length){if(!de(s,"YY/MM/DD"))return!1}else if(!de(s,"YYYY/MM/DD"))return!1;return Pt(e.replace(/\W/,""))},"uk-UA":function(e){for(var t=e.split("").map(function(e){return parseInt(e,10)}),n=[-1,5,7,9,4,6,10,5,7],i=0,r=0;r<n.length;r++)i+=t[r]*n[r];return i%11==10?0===t[9]:t[9]===i%11}};Rt["lb-LU"]=Rt["fr-LU"],Rt["lt-LT"]=Rt["et-EE"],Rt["nl-BE"]=Rt["fr-BE"],Rt["fr-CA"]=Rt["en-CA"];var Nt=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,Ft={"de-AT":Nt,"de-DE":/[\/\\]/g,"fr-BE":Nt};Ft["nl-BE"]=Ft["fr-BE"];var Ut={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?([79][1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|7|6|5|4)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|53|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?0[79][567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+996\s?)?(22[0-9]|50[0-9]|55[0-9]|70[0-9]|75[0-9]|77[0-9]|880|990|995|996|997|998)\s?\d{3}\s?\d{3}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+?244)?9\d{8}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[2-9]\d{7}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/,"mk-MK":/^(\+?389|0)?((?:2[2-9]\d{6}|(?:3[1-4]|4[2-8])\d{6}|500\d{5}|5[2-9]\d{6}|7[0-9][2-9]\d{5}|8[1-9]\d{6}|800\d{5}|8009\d{4}))$/};Ut["en-CA"]=Ut["en-US"],Ut["fr-CA"]=Ut["en-CA"],Ut["fr-BE"]=Ut["nl-BE"],Ut["zh-HK"]=Ut["en-HK"],Ut["zh-MO"]=Ut["en-MO"],Ut["ga-IE"]=Ut["en-IE"],Ut["fr-CH"]=Ut["de-CH"],Ut["it-CH"]=Ut["fr-CH"];var Vt=Object.keys(Ut),Bt=/^(0x)[0-9a-f]{40}$/i;var $t={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};var Ht=/^(bc1|tb1|bc1p|tb1p)[ac-hj-np-z02-9]{39,58}$/,Gt=/^(1|2|3|m)[A-HJ-NP-Za-km-z1-9]{25,39}$/;var jt=/^[A-Z]{3}(U[0-9]{7})|([J,Z][0-9]{6,7})$/,zt=/^[0-9]$/;function qt(t){if(e(t),t=t.toUpperCase(),!jt.test(t))return!1;if(11===t.length){for(var n=0,i=0;i<t.length-1;i++)if(zt.test(t[i]))n+=t[i]*Math.pow(2,i);else{var r=t.charCodeAt(i)-55;n+=(r<11?r:r>=11&&r<=20?12+r%11:r>=21&&r<=30?23+r%21:34+r%31)*Math.pow(2,i)}var o=n%11;return 10===o&&(o=0),Number(t[t.length-1])===o}return!0}var Yt=qt,Wt=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]);var Kt=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Xt=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;var Zt=/([01][0-9]|2[0-3])/,Jt=/[0-5][0-9]/,Qt=new RegExp("[-+]".concat(Zt.source,":").concat(Jt.source)),en=new RegExp("([zZ]|".concat(Qt.source,")")),tn=new RegExp("".concat(Zt.source,":").concat(Jt.source,":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)),nn=new RegExp("".concat(/[0-9]{4}/.source,"-").concat(/(0[1-9]|1[0-2])/.source,"-").concat(/([12]\d|0[1-9]|3[01])/.source)),rn=new RegExp("".concat(tn.source).concat(en.source)),on=new RegExp("^".concat(nn.source,"[ tT]").concat(rn.source,"$"));var an=new Set(["Adlm","Afak","Aghb","Ahom","Arab","Aran","Armi","Armn","Avst","Bali","Bamu","Bass","Batk","Beng","Bhks","Blis","Bopo","Brah","Brai","Bugi","Buhd","Cakm","Cans","Cari","Cham","Cher","Chis","Chrs","Cirt","Copt","Cpmn","Cprt","Cyrl","Cyrs","Deva","Diak","Dogr","Dsrt","Dupl","Egyd","Egyh","Egyp","Elba","Elym","Ethi","Gara","Geok","Geor","Glag","Gong","Gonm","Goth","Gran","Grek","Gujr","Gukh","Guru","Hanb","Hang","Hani","Hano","Hans","Hant","Hatr","Hebr","Hira","Hluw","Hmng","Hmnp","Hrkt","Hung","Inds","Ital","Jamo","Java","Jpan","Jurc","Kali","Kana","Kawi","Khar","Khmr","Khoj","Kitl","Kits","Knda","Kore","Kpel","Krai","Kthi","Lana","Laoo","Latf","Latg","Latn","Leke","Lepc","Limb","Lina","Linb","Lisu","Loma","Lyci","Lydi","Mahj","Maka","Mand","Mani","Marc","Maya","Medf","Mend","Merc","Mero","Mlym","Modi","Mong","Moon","Mroo","Mtei","Mult","Mymr","Nagm","Nand","Narb","Nbat","Newa","Nkdb","Nkgb","Nkoo","Nshu","Ogam","Olck","Onao","Orkh","Orya","Osge","Osma","Ougr","Palm","Pauc","Pcun","Pelm","Perm","Phag","Phli","Phlp","Phlv","Phnx","Plrd","Piqd","Prti","Psin","Qaaa","Qaab","Qaac","Qaad","Qaae","Qaaf","Qaag","Qaah","Qaai","Qaaj","Qaak","Qaal","Qaam","Qaan","Qaao","Qaap","Qaaq","Qaar","Qaas","Qaat","Qaau","Qaav","Qaaw","Qaax","Qaay","Qaaz","Qaba","Qabb","Qabc","Qabd","Qabe","Qabf","Qabg","Qabh","Qabi","Qabj","Qabk","Qabl","Qabm","Qabn","Qabo","Qabp","Qabq","Qabr","Qabs","Qabt","Qabu","Qabv","Qabw","Qabx","Ranj","Rjng","Rohg","Roro","Runr","Samr","Sara","Sarb","Saur","Sgnw","Shaw","Shrd","Shui","Sidd","Sidt","Sind","Sinh","Sogd","Sogo","Sora","Soyo","Sund","Sunu","Sylo","Syrc","Syre","Syrj","Syrn","Tagb","Takr","Tale","Talu","Taml","Tang","Tavt","Tayo","Telu","Teng","Tfng","Tglg","Thaa","Thai","Tibt","Tirh","Tnsa","Todr","Tols","Toto","Tutg","Ugar","Vaii","Visp","Vith","Wara","Wcho","Wole","Xpeo","Xsux","Yezi","Yiii","Zanb","Zinh","Zmth","Zsye","Zsym","Zxxx","Zyyy","Zzzz"]);var sn=new Set(["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"]);var ln=new Set(["004","008","010","012","016","020","024","028","031","032","036","040","044","048","050","051","052","056","060","064","068","070","072","074","076","084","086","090","092","096","100","104","108","112","116","120","124","132","136","140","144","148","152","156","158","162","166","170","174","175","178","180","184","188","191","192","196","203","204","208","212","214","218","222","226","231","232","233","234","238","239","242","246","248","250","254","258","260","262","266","268","270","275","276","288","292","296","300","304","308","312","316","320","324","328","332","334","336","340","344","348","352","356","360","364","368","372","376","380","384","388","392","398","400","404","408","410","414","417","418","422","426","428","430","434","438","440","442","446","450","454","458","462","466","470","474","478","480","484","492","496","498","499","500","504","508","512","516","520","524","528","531","533","534","535","540","548","554","558","562","566","570","574","578","580","581","583","584","585","586","591","598","600","604","608","612","616","620","624","626","630","634","638","642","643","646","652","654","659","660","662","663","666","670","674","678","682","686","688","690","694","702","703","704","705","706","710","716","724","728","729","732","740","744","748","752","756","760","762","764","768","772","776","780","784","788","792","795","796","798","800","804","807","818","826","831","832","833","834","840","850","854","858","860","862","876","882","887","894"]);var cn=new Set(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLE","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VED","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]);var un=/^[A-Z2-7]+=*$/,dn=/^[A-HJKMNP-TV-Z0-9]+$/,hn={crockford:!1};var pn=/^[A-HJ-NP-Za-km-z1-9]*$/;var fn=/^[a-z]+\/[a-z0-9\-\+\._]+$/i,mn=/^[a-z\-]+=[a-z0-9\-]+$/i,gn=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;var vn=/(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i;function bn(t,n){if(e(t),n){var i=new RegExp("[".concat(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g");return t.replace(i,"")}for(var r=t.length-1;/\s/.test(t.charAt(r));)r-=1;return t.slice(0,r+1)}function yn(t,n){e(t);var i=n?new RegExp("^[".concat(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return t.replace(i,"")}function wn(e,t){return bn(yn(e,t),t)}var _n=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i,xn=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,Sn=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;var Tn=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,An=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,Cn=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,En=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,kn={checkDMS:!1};var In=/^\d{3}$/,Pn=/^\d{4}$/,Dn=/^\d{5}$/,On=/^\d{6}$/,Mn={AD:/^AD\d{3}$/,AT:Pn,AU:Pn,AZ:/^AZ\d{4}$/,BA:/^([7-8]\d{4}$)/,BD:/^([1-8][0-9]{3}|9[0-4][0-9]{2})$/,BE:Pn,BG:Pn,BR:/^\d{5}-?\d{3}$/,BY:/^2[1-4]\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:Pn,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CO:/^(05|08|11|13|15|17|18|19|20|23|25|27|41|44|47|50|52|54|63|66|68|70|73|76|81|85|86|88|91|94|95|97|99)(\d{4})$/,CZ:/^\d{3}\s?\d{2}$/,DE:Dn,DK:Pn,DO:Dn,DZ:Dn,EE:Dn,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:Dn,FR:/^(?:(?:0[1-9]|[1-8]\d|9[0-5])\d{3}|97[1-46]\d{2})$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:Pn,ID:Dn,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,IS:In,IT:Dn,JP:/^\d{3}\-\d{4}$/,KE:Dn,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:Pn,LV:/^LV\-\d{4}$/,LK:Dn,MG:In,MX:Dn,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:Dn,NL:/^[1-9]\d{3}\s?(?!sa|sd|ss)[a-z]{2}$/i,NO:Pn,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:Pn,PK:Dn,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:On,RU:On,SA:Dn,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:On,SI:Pn,SK:/^\d{3}\s?\d{2}$/,TH:Dn,TN:Pn,TW:/^\d{3}(\d{2,3})?$/,UA:Dn,US:/^\d{5}(-\d{4})?$/,ZA:Pn,ZM:Dn},Ln=Object.keys(Mn);function Rn(t,n){return e(t),t.replace(new RegExp("[".concat(n,"]+"),"g"),"")}var Nn={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,yandex_convert_yandexru:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},Fn=["icloud.com","me.com"],Un=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],Vn=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],Bn=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function $n(e){return e.length>1?e:""}var Hn=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;var Gn={"cs-CZ":function(e){return/^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(e)},"de-DE":function(e){return/^((A|AA|AB|AC|AE|AH|AK|AM|AN|AÖ|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|BÖ|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|FÜ|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|GÖ|GP|GR|GS|GT|GÜ|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|LÖ|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|MÜ|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|NÖ|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|TÜ|ÜB|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|WÜ|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BÜD|BUL|BÜR|BÜS|BÜZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DÜW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FLÖ|FOR|FRG|FRI|FRW|FTL|FÜS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HMÜ|HOG|HOH|HOL|HOM|HOR|HÖS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JÜL|KEH|KEL|KEM|KIB|KLE|KLZ|KÖN|KÖT|KÖZ|KRU|KÜN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LÖB|LOS|LRO|LSZ|LÜN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MÜB|MÜR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|ÖHR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PLÖ|PRÜ|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RÜD|RÜG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SLÜ|SLZ|SMÜ|SOB|SOG|SOK|SÖM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SÜW|SWA|SZB|TBB|TDO|TET|TIR|TÖL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WÜM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(e)},"de-LI":function(e){return/^FL[- ]?\d{1,5}[UZ]?$/.test(e)},"en-IN":function(e){return/^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(e)},"en-SG":function(e){return/^[A-Z]{3}[ -]?[\d]{4}[ -]?[A-Z]{1}$/.test(e)},"es-AR":function(e){return/^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(e)},"fi-FI":function(e){return/^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(e)},"hu-HU":function(e){return/^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(e)},"pt-BR":function(e){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(e)},"pt-PT":function(e){return/^(([A-Z]{2}[ -·]?[0-9]{2}[ -·]?[0-9]{2})|([0-9]{2}[ -·]?[A-Z]{2}[ -·]?[0-9]{2})|([0-9]{2}[ -·]?[0-9]{2}[ -·]?[A-Z]{2})|([A-Z]{2}[ -·]?[0-9]{2}[ -·]?[A-Z]{2}))$/.test(e)},"sq-AL":function(e){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(e)},"sv-SE":function(e){return/^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-ZÅÄÖ ]{2,7}$)/.test(e.trim())},"en-PK":function(e){return/(^[A-Z]{2}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{3}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{4}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]((\s|-){0,1})[0-9]{4}((\s|-)[0-9]{2}){0,1}$)/.test(e.trim())}};var jn=/^[A-Z]$/,zn=/^[a-z]$/,qn=/^[0-9]$/,Yn=/^[-#!$@£%^&*()_+|~=`{}\[\]:";'<>?,.\/\\ ]$/,Wn={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function Kn(e){var t,n,i=(t=e,n={},Array.from(t).forEach(function(e){n[e]?n[e]+=1:n[e]=1}),n),r={length:e.length,uniqueChars:Object.keys(i).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(i).forEach(function(e){jn.test(e)?r.uppercaseCount+=i[e]:zn.test(e)?r.lowercaseCount+=i[e]:qn.test(e)?r.numberCount+=i[e]:Yn.test(e)&&(r.symbolCount+=i[e])}),r}var Xn={AT:function(e){return/^(AT)?U\d{8}$/.test(e)},BE:function(e){return/^(BE)?\d{10}$/.test(e)},BG:function(e){return/^(BG)?\d{9,10}$/.test(e)},HR:function(e){return/^(HR)?\d{11}$/.test(e)},CY:function(e){return/^(CY)?\w{9}$/.test(e)},CZ:function(e){return/^(CZ)?\d{8,10}$/.test(e)},DK:function(e){return/^(DK)?\d{8}$/.test(e)},EE:function(e){return/^(EE)?\d{9}$/.test(e)},FI:function(e){return/^(FI)?\d{8}$/.test(e)},FR:function(e){return/^(FR)?\w{2}\d{9}$/.test(e)},DE:function(e){return/^(DE)?\d{9}$/.test(e)},EL:function(e){return/^(EL)?\d{9}$/.test(e)},HU:function(e){return/^(HU)?\d{8}$/.test(e)},IE:function(e){return/^(IE)?\d{7}\w{1}(W)?$/.test(e)},IT:function(e){return/^(IT)?\d{11}$/.test(e)},LV:function(e){return/^(LV)?\d{11}$/.test(e)},LT:function(e){return/^(LT)?\d{9,12}$/.test(e)},LU:function(e){return/^(LU)?\d{8}$/.test(e)},MT:function(e){return/^(MT)?\d{8}$/.test(e)},NL:function(e){return/^(NL)?\d{9}B\d{2}$/.test(e)},PL:function(e){return/^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(e)},PT:function(e){var t=e.match(/^(PT)?(\d{9})$/);if(!t)return!1;var n=t[2],i=11-Dt(n.split("").slice(0,8).map(function(e){return parseInt(e,10)}),9)%11;return i>9?0===parseInt(n[8],10):i===parseInt(n[8],10)},RO:function(e){return/^(RO)?\d{2,10}$/.test(e)},SK:function(e){return/^(SK)?\d{10}$/.test(e)},SI:function(e){return/^(SI)?\d{8}$/.test(e)},ES:function(e){return/^(ES)?\w\d{7}[A-Z]$/.test(e)},SE:function(e){return/^(SE)?\d{12}$/.test(e)},AL:function(e){return/^(AL)?\w{9}[A-Z]$/.test(e)},MK:function(e){return/^(MK)?\d{13}$/.test(e)},AU:function(e){if(!e.match(/^(AU)?(\d{11})$/))return!1;var t=[10,1,3,5,7,9,11,13,15,17,19];e=e.replace(/^AU/,"");for(var n=(parseInt(e.slice(0,1),10)-1).toString()+e.slice(1),i=0,r=0;r<11;r++)i+=t[r]*n.charAt(r);return 0!==i&&i%89==0},BY:function(e){return/^(УНП )?\d{9}$/.test(e)},CA:function(e){return/^(CA)?\d{9}$/.test(e)},IS:function(e){return/^(IS)?\d{5,6}$/.test(e)},IN:function(e){return/^(IN)?\d{15}$/.test(e)},ID:function(e){return/^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(e)},IL:function(e){return/^(IL)?\d{9}$/.test(e)},KZ:function(e){return/^(KZ)?\d{12}$/.test(e)},NZ:function(e){return/^(NZ)?\d{9}$/.test(e)},NG:function(e){return/^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(e)},NO:function(e){return/^(NO)?\d{9}MVA$/.test(e)},PH:function(e){return/^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(e)},RU:function(e){return/^(RU)?(\d{10}|\d{12})$/.test(e)},SM:function(e){return/^(SM)?\d{5}$/.test(e)},SA:function(e){return/^(SA)?\d{15}$/.test(e)},RS:function(e){return/^(RS)?\d{9}$/.test(e)},CH:function(e){var t,n,i;return/^(CHE[- ]?)?(\d{9}|(\d{3}\.\d{3}\.\d{3})|(\d{3} \d{3} \d{3})) ?(TVA|MWST|IVA)?$/.test(e)&&(t=e.match(/\d/g).map(function(e){return+e}),n=t.pop(),i=[5,4,3,2,7,6,5,4],n===(11-t.reduce(function(e,t,n){return e+t*i[n]},0)%11)%11)},TR:function(e){return/^(TR)?\d{10}$/.test(e)},UA:function(e){return/^(UA)?\d{12}$/.test(e)},GB:function(e){return/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(e)},UZ:function(e){return/^(UZ)?\d{9}$/.test(e)},AR:function(e){return/^(AR)?\d{11}$/.test(e)},BO:function(e){return/^(BO)?\d{7}$/.test(e)},BR:function(e){return/^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(e)},CL:function(e){return/^(CL)?\d{8}-\d{1}$/.test(e)},CO:function(e){return/^(CO)?\d{10}$/.test(e)},CR:function(e){return/^(CR)?\d{9,12}$/.test(e)},EC:function(e){return/^(EC)?\d{13}$/.test(e)},SV:function(e){return/^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(e)},GT:function(e){return/^(GT)?\d{7}-\d{1}$/.test(e)},HN:function(e){return/^(HN)?$/.test(e)},MX:function(e){return/^(MX)?\w{3,4}\d{6}\w{3}$/.test(e)},NI:function(e){return/^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(e)},PA:function(e){return/^(PA)?$/.test(e)},PY:function(e){return/^(PY)?\d{6,8}-\d{1}$/.test(e)},PE:function(e){return/^(PE)?\d{11}$/.test(e)},DO:function(e){return/^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(e)},UY:function(e){return/^(UY)?\d{12}$/.test(e)},VE:function(e){return/^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(e)}};var Zn={version:"13.15.15",toDate:t,toFloat:A,toInt:function(t,n){return e(t),parseInt(t,n||10)},toBoolean:function(t,n){return e(t),n?"1"===t||/^true$/i.test(t):"0"!==t&&!/^false$/i.test(t)&&""!==t},equals:function(t,n){return e(t),t===n},contains:function(t,n,i){return e(t),(i=M(i,L)).ignoreCase?t.toLowerCase().split(O(n).toLowerCase()).length>i.minOccurrences:t.split(O(n)).length>i.minOccurrences},matches:function(t,n,i){return e(t),"[object RegExp]"!==Object.prototype.toString.call(n)&&(n=new RegExp(n,i)),!!t.match(n)},isEmail:Q,isURL:function(t,n){if(e(t),!t||/[\s<>]/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;if((n=M(n,te)).validate_length&&t.length>n.max_allowed_length)return!1;if(!n.allow_fragments&&ee(t,"#"))return!1;if(!n.allow_query_components&&(ee(t,"?")||ee(t,"&")))return!1;var i,r,o,a,s,l,c,u;if(c=t.split("#"),t=c.shift(),c=t.split("?"),t=c.shift(),(c=t.split("://")).length>1){if(i=c.shift().toLowerCase(),n.require_valid_protocol&&-1===n.protocols.indexOf(i))return!1}else{if(n.require_protocol)return!1;if("//"===t.slice(0,2)){if(!n.allow_protocol_relative_urls)return!1;c[0]=t.slice(2)}}if(""===(t=c.join("://")))return!1;if(c=t.split("/"),""===(t=c.shift())&&!n.require_host)return!0;if((c=t.split("@")).length>1){if(n.disallow_auth)return!1;if(""===c[0])return!1;if((r=c.shift()).indexOf(":")>=0&&r.split(":").length>2)return!1;var d=k(r.split(":"),2),h=d[0],p=d[1];if(""===h&&""===p)return!1}l=null,u=null;var f=(a=c.join("@")).match(ne);if(f?(o="",u=f[1],l=f[2]||null):(o=(c=a.split(":")).shift(),c.length&&(l=c.join(":"))),null!==l&&l.length>0){if(s=parseInt(l,10),!/^[0-9]+$/.test(l)||s<=0||s>65535)return!1}else if(n.require_port)return!1;return n.host_whitelist?N(o,n.host_whitelist):""===o&&!n.require_host||!!(z(o)||V(o,n)||u&&z(u,6))&&(o=o||u,!n.host_blacklist||!N(o,n.host_blacklist))},isMACAddress:function t(n,i){return e(n),null!=i&&i.eui&&(i.eui=String(i.eui)),null!=i&&i.no_colons||null!=i&&i.no_separators?"48"===i.eui?re.test(n):"64"===i.eui?se.test(n):re.test(n)||se.test(n):"48"===(null==i?void 0:i.eui)?ie.test(n)||oe.test(n):"64"===(null==i?void 0:i.eui)?ae.test(n)||le.test(n):t(n,{eui:"48"})||t(n,{eui:"64"})},isIP:z,isIPRange:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e(t);var i=t.split("/");if(2!==i.length)return!1;if(!ce.test(i[1]))return!1;if(i[1].length>1&&i[1].startsWith("0"))return!1;if(!z(i[0],n))return!1;var r=null;switch(String(n)){case"4":r=32;break;case"6":r=128;break;default:r=z(i[0],"6")?128:32}return i[1]<=r&&i[1]>=0},isFQDN:V,isBoolean:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me;return e(t),n.loose?fe(ve,t.toLowerCase()):fe(ge,t)},isIBAN:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(t),ot(t,n)&&function(e){var t=e.replace(/[^A-Z0-9]+/gi,"").toUpperCase();return 1===(t.slice(4)+t.slice(0,4)).replace(/[A-Z]/g,function(e){return e.charCodeAt(0)-55}).match(/\d{1,7}/g).reduce(function(e,t){return Number(e+t)%97},"")}(t)},isBIC:function(t){e(t);var n=t.slice(4,6).toUpperCase();return!(!lt.has(n)&&"XK"!==n)&&ct.test(t)},isAbaRouting:function(t){if(e(t),!Ae.test(t))return!1;for(var n=0,i=0;i<t.length;i++)n+=i%3==0?3*t[i]:i%3==1?7*t[i]:1*t[i];return n%10==0},isAlpha:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(t);var r=t,a=i.ignore;if(a)if(a instanceof RegExp)r=r.replace(a,"");else{if("string"!=typeof a)throw new Error("ignore should be instance of a String or RegExp");r=r.replace(new RegExp("[".concat(a.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"")}if(n in o)return o[n].test(r);throw new Error("Invalid locale '".concat(n,"'"))},isAlphaLocales:Ce,isAlphanumeric:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(t);var r=t,o=i.ignore;if(o)if(o instanceof RegExp)r=r.replace(o,"");else{if("string"!=typeof o)throw new Error("ignore should be instance of a String or RegExp");r=r.replace(new RegExp("[".concat(o.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"")}if(n in a)return a[n].test(r);throw new Error("Invalid locale '".concat(n,"'"))},isAlphanumericLocales:Ee,isNumeric:function(t,n){return e(t),n&&n.no_symbols?ke.test(t):new RegExp("^[+-]?([0-9]*[".concat((n||{}).locale?s[n.locale]:".","])?[0-9]+$")).test(t)},isPassportNumber:function(t,n){e(t);var i=t.replace(/\s/g,"").toUpperCase();return n.toUpperCase()in Ie&&Ie[n].test(i)},passportNumberLocales:Pe,isPort:function(e){return Me(e,{allow_leading_zeroes:!1,min:0,max:65535})},isLowercase:function(t){return e(t),t===t.toLowerCase()},isUppercase:function(t){return e(t),t===t.toUpperCase()},isAscii:function(t){return e(t),Ne.test(t)},isFullWidth:function(t){return e(t),Fe.test(t)},isHalfWidth:function(t){return e(t),Ue.test(t)},isVariableWidth:function(t){return e(t),Fe.test(t)&&Ue.test(t)},isMultibyte:function(t){return e(t),Ve.test(t)},isSemVer:function(t){return e(t),He.test(t)},isSurrogatePair:function(t){return e(t),Ge.test(t)},isInt:Me,isIMEI:function(t,n){e(t);var i=Le;if((n=n||{}).allow_hyphens&&(i=Re),!i.test(t))return!1;t=t.replace(/-/g,"");for(var r=0,o=2,a=0;a<14;a++){var s=t.substring(14-a-1,14-a),l=parseInt(s,10)*o;r+=l>=10?l%10+1:l,1===o?o+=1:o-=1}return(10-r%10)%10===parseInt(t.substring(14,15),10)},isFloat:S,isFloatLocales:T,isDecimal:function(t,n){if(e(t),(n=M(n,je)).locale in s)return!fe(ze,t.replace(/ /g,""))&&function(e){return new RegExp("^[-+]?([0-9]+)?(\\".concat(s[e.locale],"[0-9]{").concat(e.decimal_digits,"})").concat(e.force_decimal?"":"?","$"))}(n).test(t);throw new Error("Invalid locale '".concat(n.locale,"'"))},isHexadecimal:Ye,isOctal:function(t){return e(t),We.test(t)},isDivisibleBy:function(t,n){return e(t),A(t)%parseInt(n,10)===0},isHexColor:function(t){return e(t),Ke.test(t)},isRgbColor:function(t,n){e(t);var i=!1,r=!0;if("object"!==P(n)?arguments.length>=2&&(r=arguments[1]):(i=void 0!==n.allowSpaces?n.allowSpaces:i,r=void 0!==n.includePercentValues?n.includePercentValues:r),i){if(!et.test(t))return!1;t=t.replace(/\s/g,"")}return r?Xe.test(t)||Ze.test(t)||Je.test(t)||Qe.test(t):Xe.test(t)||Ze.test(t)},isHSL:function(t){e(t);var n=t.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/gi,"$1");return-1!==n.indexOf(",")?tt.test(n):nt.test(n)},isISRC:function(t){return e(t),it.test(t)},isMD5:function(t){return e(t),ut.test(t)},isHash:function(t,n){return e(t),new RegExp("^[a-fA-F0-9]{".concat(dt[n],"}$")).test(t)},isJWT:function(t){e(t);var n=t.split(".");return 3===n.length&&n.reduce(function(e,t){return e&&gt(t,{urlSafe:!0})},!0)},isJSON:function(t,i){e(t);try{i=M(i,vt);var r=[];i.allow_primitives&&(r=[null,!1,!0]);var o=JSON.parse(t);return fe(r,o)||!!o&&"object"===P(o)}catch(n){}return!1},isEmpty:function(t,n){return e(t),0===((n=M(n,bt)).ignore_whitespace?t.trim().length:t.length)},isLength:function(t,n){var i,r;e(t),"object"===P(n)?(i=n.min||0,r=n.max):(i=arguments[1]||0,r=arguments[2]);var o=t.match(/(\uFE0F|\uFE0E)/g)||[],a=t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],s=t.length-o.length-a.length,l=s>=i&&(void 0===r||s<=r);return l&&Array.isArray(null==n?void 0:n.discreteLengths)?n.discreteLengths.some(function(e){return e===s}):l},isLocale:function(t){return e(t),Te.test(t)},isByteLength:F,isULID:function(t){return e(t),/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i.test(t)},isUUID:function(t,n){return e(t),null==n&&(n="all"),n in yt&&yt[n].test(t)},isMongoId:function(t){return e(t),Ye(t)&&24===t.length},isAfter:function(e,n){var i=t(("object"===P(n)?n.comparisonDate:n)||Date().toString()),r=t(e);return!!(r&&i&&r>i)},isBefore:function(e,n){var i=t(("object"===P(n)?n.comparisonDate:n)||Date().toString()),r=t(e);return!!(r&&i&&r<i)},isIn:function(t,n){var i;if(e(t),"[object Array]"===Object.prototype.toString.call(n)){var r=[];for(i in n)({}).hasOwnProperty.call(n,i)&&(r[i]=O(n[i]));return r.indexOf(t)>=0}return"object"===P(n)?n.hasOwnProperty(t):!(!n||"function"!=typeof n.indexOf)&&n.indexOf(t)>=0},isLuhnNumber:wt,isCreditCard:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(t);var i=n.provider,r=t.replace(/[- ]+/g,"");if(i&&i.toLowerCase()in _t){if(!_t[i.toLowerCase()].test(r))return!1}else{if(i&&!(i.toLowerCase()in _t))throw new Error("".concat(i," is not a valid credit card provider."));if(!xt.some(function(e){return e.test(r)}))return!1}return wt(t)},isIdentityCard:function(t,n){if(e(t),n in St)return St[n](t);if("any"===n){for(var i in St){if(St.hasOwnProperty(i))if((0,St[i])(t))return!0}return!1}throw new Error("Invalid locale '".concat(n,"'"))},isEAN:function(t){e(t);var n,i,r=Number(t.slice(-1));return Tt.test(t)&&r===((i=10-(n=t).slice(0,-1).split("").map(function(e,t){return Number(e)*function(e,t){return 8===e||14===e?t%2==0?3:1:t%2==0?1:3}(n.length,t)}).reduce(function(e,t){return e+t},0)%10)<10?i:0)},isISIN:function(t){if(e(t),!At.test(t))return!1;for(var n=!0,i=0,r=t.length-2;r>=0;r--)if(t[r]>="A"&&t[r]<="Z")for(var o=t[r].charCodeAt(0)-55,a=0,s=[o%10,Math.trunc(o/10)];a<s.length;a++){var l=s[a];i+=n?l>=5?1+2*(l-5):2*l:l,n=!n}else{var c=t[r].charCodeAt(0)-"0".charCodeAt(0);i+=n?c>=5?1+2*(c-5):2*c:c,n=!n}var u=10*Math.trunc((i+9)/10)-i;return+t[t.length-1]===u},isISBN:function t(n,i){e(n);var r=String((null==i?void 0:i.version)||i);if(!(null!=i&&i.version||i))return t(n,{version:10})||t(n,{version:13});var o=n.replace(/[\s-]+/g,""),a=0;if("10"===r){if(!Ct.test(o))return!1;for(var s=0;s<r-1;s++)a+=(s+1)*o.charAt(s);if("X"===o.charAt(9)?a+=100:a+=10*o.charAt(9),a%11==0)return!0}else if("13"===r){if(!Et.test(o))return!1;for(var l=0;l<12;l++)a+=kt[l%2]*o.charAt(l);if(o.charAt(12)-(10-a%10)%10==0)return!0}return!1},isISSN:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(t);var i="^\\d{4}-?\\d{3}[\\dX]$";if(i=n.require_hyphen?i.replace("?",""):i,!(i=n.case_sensitive?new RegExp(i):new RegExp(i,"i")).test(t))return!1;for(var r=t.replace("-","").toUpperCase(),o=0,a=0;a<r.length;a++){var s=r[a];o+=("X"===s?10:+s)*(8-a)}return o%11==0},isMobilePhone:function(t,n,i){if(e(t),i&&i.strictMode&&!t.startsWith("+"))return!1;if(Array.isArray(n))return n.some(function(e){if(Ut.hasOwnProperty(e)&&Ut[e].test(t))return!0;return!1});if(n in Ut)return Ut[n].test(t);if(!n||"any"===n){for(var r in Ut){if(Ut.hasOwnProperty(r))if(Ut[r].test(t))return!0}return!1}throw new Error("Invalid locale '".concat(n,"'"))},isMobilePhoneLocales:Vt,isPostalCode:function(t,n){if(e(t),n in Mn)return Mn[n].test(t);if("any"===n){for(var i in Mn){if(Mn.hasOwnProperty(i))if(Mn[i].test(t))return!0}return!1}throw new Error("Invalid locale '".concat(n,"'"))},isPostalCodeLocales:Ln,isEthereumAddress:function(t){return e(t),Bt.test(t)},isCurrency:function(t,n){return e(t),function(e){var t="\\d{".concat(e.digits_after_decimal[0],"}");e.digits_after_decimal.forEach(function(e,n){0!==n&&(t="".concat(t,"|\\d{").concat(e,"}"))});var n="(".concat(e.symbol.replace(/\W/,function(e){return"\\".concat(e)}),")").concat(e.require_symbol?"":"?"),i="-?",r="[1-9]\\d{0,2}(\\".concat(e.thousands_separator,"\\d{3})*"),o="(".concat(["0","[1-9]\\d*",r].join("|"),")?"),a="(\\".concat(e.decimal_separator,"(").concat(t,"))").concat(e.require_decimal?"":"?"),s=o+(e.allow_decimal||e.require_decimal?a:"");return e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?s+=i:e.negative_sign_before_digits&&(s=i+s)),e.allow_negative_sign_placeholder?s="( (?!\\-))?".concat(s):e.allow_space_after_symbol?s=" ?".concat(s):e.allow_space_after_digits&&(s+="( (?!$))?"),e.symbol_after_digits?s+=n:s=n+s,e.allow_negatives&&(e.parens_for_negatives?s="(\\(".concat(s,"\\)|").concat(s,")"):e.negative_sign_before_digits||e.negative_sign_after_digits||(s=i+s)),new RegExp("^(?!-? )(?=.*\\d)".concat(s,"$"))}(n=M(n,$t)).test(t)},isBtcAddress:function(t){return e(t),Ht.test(t)||Gt.test(t)},isISO6346:qt,isFreightContainerID:Yt,isISO6391:function(t){return e(t),Wt.has(t)},isISO8601:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(t);var i=n.strictSeparator?Xt.test(t):Kt.test(t);return i&&n.strict?function(e){var t=e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(t){var n=Number(t[1]),i=Number(t[2]);return n%4==0&&n%100!=0||n%400==0?i<=366:i<=365}var r=e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),o=r[1],a=r[2],s=r[3],l=a?"0".concat(a).slice(-2):a,c=s?"0".concat(s).slice(-2):s,u=new Date("".concat(o,"-").concat(l||"01","-").concat(c||"01"));return!a||!s||u.getUTCFullYear()===o&&u.getUTCMonth()+1===a&&u.getUTCDate()===s}(t):i},isISO15924:function(t){return e(t),an.has(t)},isRFC3339:function(t){return e(t),on.test(t)},isISO31661Alpha2:function(t){return e(t),st.has(t.toUpperCase())},isISO31661Alpha3:function(t){return e(t),sn.has(t.toUpperCase())},isISO31661Numeric:function(t){return e(t),ln.has(t)},isISO4217:function(t){return e(t),cn.has(t.toUpperCase())},isBase32:function(t,n){return e(t),(n=M(n,hn)).crockford?dn.test(t):!(t.length%8!=0||!un.test(t))},isBase58:function(t){return e(t),!!pn.test(t)},isBase64:gt,isDataURI:function(t){e(t);var n=t.split(",");if(n.length<2)return!1;var i=n.shift().trim().split(";"),r=i.shift();if("data:"!==r.slice(0,5))return!1;var o=r.slice(5);if(""!==o&&!fn.test(o))return!1;for(var a=0;a<i.length;a++)if((a!==i.length-1||"base64"!==i[a].toLowerCase())&&!mn.test(i[a]))return!1;for(var s=0;s<n.length;s++)if(!gn.test(n[s]))return!1;return!0},isMagnetURI:function(t){return e(t),0===t.indexOf("magnet:?")&&vn.test(t)},isMailtoURI:function(t,n){if(e(t),0!==t.indexOf("mailto:"))return!1;var i=k(t.replace("mailto:","").split("?"),2),r=i[0],o=i[1],a=void 0===o?"":o;if(!r&&!a)return!0;var s=function(e){var t=new Set(["subject","body","cc","bcc"]),n={cc:"",bcc:""},i=!1,r=e.split("&");if(r.length>4)return!1;var o,a=E(r);try{for(a.s();!(o=a.n()).done;){var s=k(o.value.split("="),2),l=s[0],c=s[1];if(l&&!t.has(l)){i=!0;break}!c||"cc"!==l&&"bcc"!==l||(n[l]=c),l&&t.delete(l)}}catch(u){a.e(u)}finally{a.f()}return!i&&n}(a);return!!s&&"".concat(r,",").concat(s.cc,",").concat(s.bcc).split(",").every(function(e){return!(e=wn(e," "))||Q(e,n)})},isMimeType:function(t){return e(t),_n.test(t)||xn.test(t)||Sn.test(t)},isLatLong:function(t,n){if(e(t),n=M(n,kn),!ee(t,","))return!1;var i=t.split(",");return!(i[0].startsWith("(")&&!i[1].endsWith(")")||i[1].endsWith(")")&&!i[0].startsWith("("))&&(n.checkDMS?Cn.test(i[0])&&En.test(i[1]):Tn.test(i[0])&&An.test(i[1]))},ltrim:yn,rtrim:bn,trim:wn,escape:function(t){return e(t),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")},unescape:function(t){return e(t),t.replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`").replace(/&amp;/g,"&")},stripLow:function(t,n){return e(t),Rn(t,n?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F")},whitelist:function(t,n){return e(t),t.replace(new RegExp("[^".concat(n,"]+"),"g"),"")},blacklist:Rn,isWhitelisted:function(t,n){e(t);for(var i=t.length-1;i>=0;i--)if(-1===n.indexOf(t[i]))return!1;return!0},normalizeEmail:function(e,t){t=M(t,Nn);var n=e.split("@"),i=n.pop(),r=[n.join("@"),i];if(r[1]=r[1].toLowerCase(),"gmail.com"===r[1]||"googlemail.com"===r[1]){if(t.gmail_remove_subaddress&&(r[0]=r[0].split("+")[0]),t.gmail_remove_dots&&(r[0]=r[0].replace(/\.+/g,$n)),!r[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(r[0]=r[0].toLowerCase()),r[1]=t.gmail_convert_googlemaildotcom?"gmail.com":r[1]}else if(Fn.indexOf(r[1])>=0){if(t.icloud_remove_subaddress&&(r[0]=r[0].split("+")[0]),!r[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(r[0]=r[0].toLowerCase())}else if(Un.indexOf(r[1])>=0){if(t.outlookdotcom_remove_subaddress&&(r[0]=r[0].split("+")[0]),!r[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(r[0]=r[0].toLowerCase())}else if(Vn.indexOf(r[1])>=0){if(t.yahoo_remove_subaddress){var o=r[0].split("-");r[0]=o.length>1?o.slice(0,-1).join("-"):o[0]}if(!r[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(r[0]=r[0].toLowerCase())}else Bn.indexOf(r[1])>=0?((t.all_lowercase||t.yandex_lowercase)&&(r[0]=r[0].toLowerCase()),r[1]=t.yandex_convert_yandexru?"yandex.ru":r[1]):t.all_lowercase&&(r[0]=r[0].toLowerCase());return r.join("@")},toString:toString,isSlug:function(t){return e(t),Hn.test(t)},isStrongPassword:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e(t);var i=Kn(t);return(n=M(n||{},Wn)).returnScore?function(e,t){var n=0;return n+=e.uniqueChars*t.pointsPerUnique,n+=(e.length-e.uniqueChars)*t.pointsPerRepeat,e.lowercaseCount>0&&(n+=t.pointsForContainingLower),e.uppercaseCount>0&&(n+=t.pointsForContainingUpper),e.numberCount>0&&(n+=t.pointsForContainingNumber),e.symbolCount>0&&(n+=t.pointsForContainingSymbol),n}(i,n):i.length>=n.minLength&&i.lowercaseCount>=n.minLowercase&&i.uppercaseCount>=n.minUppercase&&i.numberCount>=n.minNumbers&&i.symbolCount>=n.minSymbols},isTaxID:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";e(t);var i=t.slice(0);if(n in Lt)return n in Ft&&(i=i.replace(Ft[n],"")),!!Lt[n].test(i)&&(!(n in Rt)||Rt[n](i));throw new Error("Invalid locale '".concat(n,"'"))},isDate:de,isTime:function(e,t){return t=M(t,he),"string"==typeof e&&pe[t.hourFormat][t.mode].test(e)},isLicensePlate:function(t,n){if(e(t),n in Gn)return Gn[n](t);if("any"===n){for(var i in Gn){if((0,Gn[i])(t))return!0}return!1}throw new Error("Invalid locale '".concat(n,"'"))},isVAT:function(t,n){if(e(t),e(n),n in Xn)return Xn[n](t);throw new Error("Invalid country code: '".concat(n,"'"))},ibanLocales:at};return Zn}),define("Core/Validation",["./isStringEmptyOrWhitespace","./AppData","validator"],function(e,t,n){"use strict";const i=Cesium.defined,r={};function o(r,o){const a=t.accountRules;return!i(r)||e(r)?`${o} is required`:r.length>a.usernameRules.maximumLength?`${o} must be less than or equal to ${a.usernameRules.maximumLength} characters`:n.isEmail(r)?`${o} cannot be an email address`:""}return r.validateUsername=function(e){return o(e,"Username")},r.validateTeamName=function(e){return o(e,"Team name")},r.validateName=o,r.validatePassword=function(e){const n=t.accountRules.passwordRules;return!i(e)||e.length<n.minimumLength||e.length>n.maximumLength?`Password must be between ${n.minimumLength} and ${n.maximumLength} characters`:""},r.validateEmail=function(r,o="Email"){const a=t.accountRules.emailRules;return!i(r)||e(r)?`${o} is required`:r.length>a.maximumLength||!n.isEmail(r)?`${o} address is invalid`:""},r.validNumber=function(t){return!(!i(t)||e(t))&&!isNaN(Number(t))},r.validLongitude=function(e){const t=Number(e);return r.validNumber(e)&&-180<=t&&t<=180},r.validLatitude=function(e){const t=Number(e);return r.validNumber(e)&&-90<=t&&t<=90},r}),define("Views/Components/Form/FormInput",["Core/createDomId","Core/defaultValue","Core/isStringEmptyOrWhitespace","knockout"],function(e,t,n,i){"use strict";Cesium.Check;const r=Cesium.defined;function o(n){const o=(n=t(n,Cesium.Frozen.EMPTY_OBJECT)).label,a=n.validate,s=n.viewUrl,l=t(n.hasLabel,!0);this.hasLabelAddon=r(n.labelAddon),this.labelAddon=n.labelAddon;let c=n.input;r(c)||(c=i.observable()),!r(c())&&n.hasOwnProperty("value")&&c(n.value);const u=i.observable("");this.viewUrl=s,this.formInputUrl=n.formInputUrl,this.id=t(n.id,e()),this.label=l?o:"",this.hasLabel=l,this.autofocus=t(n.autofocus,!1),this.focus=i.observable(!1),this.required=t(n.required,!1),this.disabled=t(n.disabled,!1),this.readonly=t(n.readonly,!1),this.input=c,this.groupClassName="form-input-group",this.hasError=i.pureComputed(function(){return""!==u()}),this.placeholder=n.placeholder,this.errorText=u,this._validate=a}return o.prototype.compositionComplete=function(){this.focus(this.autofocus)},o.prototype.validate=function(){let e=this.input();if(!r(e)||""===e){const t=document.getElementById(this.id);r(t)&&(e=t.value,this.input(e))}if(i.unwrap(this.required)&&(!r(e)||n(e)))return this.errorText("required"),!1;const t=this._validate(e);return this.errorText(t),!this.hasError()},o.prototype.clearError=function(){this.errorText("")},o}),define("Views/Components/Form/ColorInput",["./FormInput","knockout"],function(e,t){"use strict";const n=Cesium.Color,i=Cesium.defined;function r(r){e.call(this,Object.assign({validate:()=>!0},r)),this.formInputUrl="Views/Components/Form/ColorInput.html";const o=i(r.value)?r.value.withAlpha(1):new n(1,1,1,1);this._hexString=t.observable(o.toCssHexString()),this.input=t.pureComputed({read:()=>n.fromCssColorString(this._hexString()),write:e=>{if(!i(e))return;const t=e.withAlpha(1).toCssHexString();this._hexString(t)}}),this.label=i(r.label)?r.label:"Color"}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.compositionComplete=function(e){e.querySelector("ion-color-input").addEventListener("change",e=>{this._hexString(e.detail.value)})},r.prototype.detached=function(){},r}),define("Views/Components/Form/DateInput",["Core/defaultValue","./FormInput"],function(e,t){"use strict";const n=Cesium.combine,i=Cesium.defined;function r(r){t.call(this,r);let o={showClose:!0,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down",previous:"fa fa-arrow-left",next:"fa fa-arrow-right",today:"fa fa-crosshairs",clear:"fa fa-trash",close:"fa fa-times"}};r.dateOnly&&(o.format="L"),i(r.dateTimePickerOptions)&&(o=n(r.dateTimePickerOptions,o)),this.type=e(r.type,"Date"),this.formInputUrl="Views/Components/Form/DateInput.html",this.dateTimePickerOptions=o}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r}),define("Views/Components/Form/FormColumn",[],function(){"use strict";Cesium.Check;return function(e){e.forEach(function(e){e.viewUrl="Views/Components/Form/FormColumnRow.html"}),this.fields=e}}),define("Views/Components/Form/MarkdownTextArea",["Core/createDomId","../../../Core/convertMarkdown","../../../Core/isStringEmptyOrWhitespace","./FormInput","jquery","knockout"],function(e,t,n,i,r,o){"use strict";function a(t){i.call(this,t),this.formInputUrl="Views/Components/Form/MarkdownTextArea.html";const r=o.observable("");this.htmlPreview=r,this.hasHtml=o.pureComputed(function(){const e=r();return!n(e)}),this.writeTabId=`write${e()}`,this.previewTabId=`preview${e()}`,this.rows=6,this._inline=t.inline}return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.compositionComplete=function(e){const t=this;r(e).find("a[data-toggle=tab].preview-tab").on("show.bs.tab",function(){t.updatePreview()})},a.prototype.updatePreview=function(){const e=this.input(),i=n(e)?"":t(e,this._inline);this.htmlPreview(i)},a}),define("Views/Components/Form/NumberInput",["../../../Core/isStringEmptyOrWhitespace","../../../Core/Validation","./FormInput"],function(e,t,n){"use strict";Cesium.Check;const i=Cesium.defined;Cesium.DeveloperError;function r(e){n.call(this,e);const t=e.slider,r=e.addonBefore,o=e.addonAfter,a=i(r),s=i(o);let l;l=t?"Views/Components/Form/NumberRangeInput.html":a?"Views/Components/Form/NumberInputAddonBefore.html":s?"Views/Components/Form/NumberInputAddonAfter.html":"Views/Components/Form/NumberInput.html",this.formInputUrl=l,this.addonBefore=e.addonBefore,this.addonAfter=e.addonAfter,this.minimum=e.minimum,this.maximum=e.maximum,this.step=e.step,this._hasMinimum=i(e.minimum),this._hasMaximum=i(e.maximum)}return r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.validate=function(){let r=this.input();if(!this.required&&!i(r))return!0;if(this.required&&(!i(r)||e(r)))return this.errorText("Value must be a number"),!1;if(!t.validNumber(r))return this.errorText("Value must be a number"),!1;r=Number(r);const o=this._hasMinimum,a=this._hasMaximum;return o&&a&&(r<this.minimum||r>this.maximum)?(this.errorText(`Value must be between ${this.minimum} and ${this.maximum}`),!1):o&&r<this.minimum?(this.errorText(`Value must be greater than or equal to ${this.minimum}`),!1):a&&r>this.maximum?(this.errorText(`Value must be less than or equal to ${this.maximum}`),!1):n.prototype.validate.call(this)},r}),define("Views/Components/Form/RadioInput",["Core/defaultValue","./FormInput"],function(e,t){"use strict";Cesium.Check;function n(n){t.call(this,n);const i=n.options;this.options=i;const r=e(n.radioButtons,!0),o=e(n.width,80);this.width=`${o}px`,this.imgWidth=o-30+"px",this.formInputUrl=r?"Views/Components/Form/RadioButton.html":"Views/Components/Form/RadioInput.html"}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n}),define("Views/Components/Form/SelectInput",["./FormInput","knockout"],function(e,t){"use strict";Cesium.Check;const n=Cesium.defined;function i(i){e.call(this,i);const r=i.options;if(this.options=r,this.caption=void 0,this.required){if(!n(i.value)&&!n(this.input())){const e=t.unwrap(r);e.length>0&&this.input(e[0].value)}}else this.caption="Choose...";this.formInputUrl="Views/Components/Form/SelectInput.html"}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.setOptionDisable=function(e,i){n(e)&&n(i)&&t.applyBindingsToNode(e,{disable:i.disabled},i)},i.prototype.validate=function(){if(!e.prototype.validate.call(this))return;const i=this.input(),r=t.unwrap(this.options).find(function(e){return e.value===i});return!n(r)||!t.unwrap(r.disabled)||(this.errorText("invalid"),!1)},i}),define("Views/Components/Form/TextArea",["Core/defaultValue","./FormInput"],function(e,t){"use strict";function n(n){t.call(this,n),this.formInputUrl="Views/Components/Form/TextArea.html",this.rows=e(n.rows,3)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n}),define("Views/Components/Form/TextInput",["./FormInput"],function(e){"use strict";const t=Cesium.defined;Cesium.DeveloperError;function n(n){e.call(this,n);const i=n.addonBefore,r=n.addonAfter,o=t(i),a=t(r);let s;s=o?"Views/Components/Form/TextInputAddonBefore.html":a?"Views/Components/Form/TextInputAddonAfter.html":"Views/Components/Form/TextInput.html",this.formInputUrl=s,this.addonBefore=n.addonBefore,this.addonAfter=n.addonAfter}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n}),define("Views/Components/Form/ToggleInput",["./FormInput"],function(e){"use strict";function t(t){e.call(this,t),this.helperText=t.helperText,this.groupClassName="toggle-input-group",this.formInputUrl="Views/Components/Form/ToggleInput.html"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toggle=function(){this.input(!this.input())},t}),define("Views/Components/Form/FormHelper",["Core/defaultValue","../../../Core/Validation","./ColorInput","./DateInput","./FormColumn","./FormInput","./MarkdownTextArea","./NumberInput","./RadioInput","./SelectInput","./TextArea","./TextInput","./ToggleInput"],function(e,t,n,i,r,o,a,s,l,c,u,d,h){"use strict";Cesium.Check;const p=Cesium.clone,f=Cesium.Color,m=Cesium.defined;function g(){return""}function v(t,n){return(n=m(n)?p(n):{}).viewUrl="Views/Components/Form/FormGroup.html",n.validate=e(n.validate,g),n.autofocus=t.autofocus&&0===t._fields.length,n}function b(t){this._fields=[],this.autofocus=e(t,!0)}return b.prototype.createCheckbox=function(t){(t=v(this,t)).value=e(t.value,!1),t.viewUrl="Views/Components/Form/CheckboxInput.html";const n=new o(t);return this._fields.push(n),n},b.prototype.createToggle=function(t){(t=v(this,t)).value=e(t.value,!1);const n=new h(t);return this._fields.push(n),n},b.prototype.createRadioButton=function(e){(e=v(this,e)).options[0].focus(e.focus);const t=new l(e);return this._fields.push(t),t},b.prototype.createRadioInput=function(e){(e=v(this,e)).options[0].focus(e.focus),e.radioButtons=!1;const t=new l(e);return this._fields.push(t),t},b.prototype.createSelectInput=function(e){e=v(this,e);const t=new c(e);return this._fields.push(t),t},b.prototype.createNumberInput=function(e){(e=v(this,e)).slider=!1;const t=new s(e);return this._fields.push(t),t},b.prototype.createLongitudeInput=function(t){return(t=v(this,t)).label=e(t.label,"Longitude"),t.required=!0,t.minimum=-180,t.maximum=180,t.step=1e-5,this.createNumberInput(t)},b.prototype.createLatitudeInput=function(t){return(t=v(this,t)).label=e(t.label,"Latitude"),t.required=!0,t.minimum=-90,t.maximum=90,t.step=1e-5,this.createNumberInput(t)},b.prototype.createPasswordInput=function(t){(t=v(this,t)).value=e(t.value,""),t.formInputUrl="Views/Components/Form/PasswordInput.html";const n=new o(t);return this._fields.push(n),n},b.prototype.createPasswordInputGroup=function(n){const i={};(n=e(n,!1))&&(i.currentPassword=this.createPasswordInput({label:"Current password",required:!0}));const r=this.createPasswordInput({label:"New password",validate:t.validatePassword}),o=this.createPasswordInput({label:"Retype new password",validate:function(e){return e!==r.input()?"Passwords do not match":""}});return i.newPassword=r,i.confirmPassword=o,i},b.prototype.createRangeInput=function(e){(e=v(this,e)).slider=!0;const t=new s(e);return this._fields.push(t),t},b.prototype.createTextArea=function(t){(t=v(this,t)).value=e(t.value,"");const n=new u(t);return this._fields.push(n),n},b.prototype.createMarkdownTextArea=function(t){(t=v(this,t)).value=e(t.value,"");const n=new a(t);return this._fields.push(n),n},b.prototype.createTextInput=function(t){(t=v(this,t)).value=e(t.value,"");const n=new d(t);return this._fields.push(n),n},b.prototype.createDateInput=function(t){(t=v(this,t)).value=e(t.value,"");const n=new i(t);return this._fields.push(n),n},b.prototype.createColorInput=function(t){(t=v(this,t)).value=e(t.value,f.WHITE.clone());const i=new n(t);return this._fields.push(i),i},b.prototype.removeField=function(e){const t=this._fields.indexOf(e);if(-1!==t)return this._fields.splice(t,1)[0]},b.prototype.removeAll=function(){this._fields=[]},b.prototype.createHorizontalForm=function(e){return new r(e)},b.prototype.isValid=function(e){let t,n=!0;return this._fields.forEach(function(e){const i=e.validate();n=i&&n,i||(t=e)}),e&&t&&t.focus(!0),n},b}),define("Views/Components/Form/SelectInputOption",["Core/defaultValue"],function(e){"use strict";Cesium.Check;return function(t,n,i){this.displayText=t,this.value=n,this.disabled=e(i,!1)}}),define("Core/AssetType",[],function(){"use strict";Cesium.DeveloperError;const e={IMAGERY:"IMAGERY",TERRAIN:"TERRAIN","3DTILES":"3DTILES",GLTF:"GLTF",CZML:"CZML",KML:"KML",GEOJSON:"GEOJSON",toString:function(t){return t===e.IMAGERY?"Imagery":t===e.TERRAIN?"Terrain":t===e.GLTF?"glTF Model":t===e["3DTILES"]?"3D Tiles":t===e.CZML?"CZML":t===e.KML?"KML":t===e.GEOJSON?"GeoJSON":void 0}};return Object.freeze(e)}),define("Core/SourceType",[],function(){"use strict";return Object.freeze({RASTER_IMAGERY:"RASTER_IMAGERY",RASTER_TERRAIN:"RASTER_TERRAIN",TERRAIN_DATABASE:"TERRAIN_DATABASE",CITYGML:"CITYGML",KML:"KML",CAPTURE:"3D_CAPTURE",MODEL:"3D_MODEL",POINT_CLOUD:"POINT_CLOUD",TILES3D_DATABASE:"3DTILES_DATABASE",TILES3D:"3DTILES",CZML:"CZML",GEOJSON:"GEOJSON",SMARTCONSTRUCTION_DXF:"SMARTCONSTRUCTION_DXF",BIM_CAD:"BIM_CAD"})}),define("Core/TilersGeometryCompression",[],function(){"use strict";return Object.freeze({NONE:"NONE",DRACO:"DRACO",MESHOPT:"MESHOPT",QUANTIZATION:"QUANTIZATION"})}),define("Views/Dashboard/AddData/AssetForms/AssetForm",["Core/isStringEmptyOrWhitespace","knockout","Views/Components/ContextualHelp","Views/Components/Form/FormHelper"],function(e,t,n,i){"use strict";Cesium.Check;const r=Cesium.DeveloperError;function o(e,r,o,a,s){this.files=e,this.type=r,this.name=o,this.description=a,this.hasConfiguration=t.observable(!1),this.contextualHelp=new n(s,".add-data"),this._formHelper=new i}return o.displayName=void 0,o.getPrimaryFile=r.throwInstantiationError,o.validate=r.throwInstantiationError,o.isEligible=r.throwInstantiationError,o.prototype.isArchivable=function(){return this._getIsArchivable()},o.prototype.getAssetMetadata=function(){let t=this.name();return e(t)&&(t="Untitled"),{name:t,description:this.description(),type:this.type,options:this._getPostOptions(this.files())}},o.prototype.isValid=function(){return this._formHelper.isValid()},o}),define("Views/Dashboard/AddData/AssetForms/containsModel",[],function(){"use strict";Cesium.Check;const e=/\.(obj|dae|fbx|gltf|glb)$/i;function t(t){for(let n=0;n<t.length;n++)if(e.test(t[n].path))return!0;return!1}return t.regex=e,t.extensions=["obj","glb","gltf","dae","fbx"],t}),define("text!Views/Help/RealityTilerFormHelp.md",[],function(){return"### Texture Compression\n\n**KTX2 Texture Compression** - [KTX v2.0](https://www.khronos.org/ktx/) is an image container format that supports [Basis Universal supercompression](https://github.com/BinomialLLC/basis_universal#basis_universal). Use KTX2 compression to create a smaller tileset with better streaming performance.\n\nDisabling KTX2 extension results in a less optimized tileset but one that is compatible with clients that do not support KTX2. We recommend enabling KTX2 for your assets.\n\n---\n\n### Geometric compression\n\nUse one of the following geometric compression options to create a smaller tileset with better streaming performance.\n\n**Draco Compression** - [Draco](https://google.github.io/draco/) is a type of geometric compression optimized for smaller file sizes. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [KHR_draco_mesh_compression](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression) glTF extension.\n\n**Meshopt Compression** - [Meshopt](https://github.com/zeux/meshoptimizer#vertexindex-buffer-compression) geometric compression is optimized for runtime performance. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [EXT_meshopt_compression](https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Vendor/EXT_meshopt_compression) glTF extension.\n\n**Quantization Compression** - [Quantization](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md) conducts vertex quantization by storing positions as integers rather than floats. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [KHR_mesh_quantization](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md) glTF extension.\n"}),define("Views/Dashboard/AddData/AssetForms/CaptureAssetForm",["Core/AssetType","Core/find","Core/SourceType","Core/TilersGeometryCompression","./AssetForm","./containsModel","knockout","text!Views/Help/RealityTilerFormHelp.md","Views/Components/Form/SelectInputOption","Views/Components/ContextualHelp"],function(e,t,n,i,r,o,a,s,l,c){"use strict";function u(t,n,o){r.call(this,t,e["3DTILES"],n,o,s);const d=this._formHelper,h=d.createToggle({value:!0,label:"KTX2 compression"}),p=new c(s,".add-data");this.toggles=a.pureComputed(function(){return d.createHorizontalForm([h])}),this.contextualHelp=a.pureComputed(function(){return p}),this.geometryCompression=d.createSelectInput({label:"Geometric Compression",required:!0,options:[new l("None",i.NONE),new l("Draco",i.DRACO),new l("Meshopt",i.MESHOPT),new l("Quantization",i.QUANTIZATION)]}),u.tooltip=a.pureComputed(function(){return"ion will tile your photogrammetry, scan, or other mesh into a 3D Tiles 1.1 tileset. A 3D Tiles 1.1 client is required."}),this.geometryCompression.input(i.DRACO),this.textureFormat=h,this.hasConfiguration=a.observable(!0)}return u.prototype=Object.create(r.prototype),u.prototype.constructor=u,u.displayName="3D Capture / Reality Model / Photogrammetry",u.getPrimaryFile=function(e){return t(e,function(e){return o.regex.test(e.path)})},u.validate=function(){return[]},u.isEligible=o,u.prototype._getPostOptions=function(){const e={sourceType:n.CAPTURE};return e.geometryCompression=this.geometryCompression.input(),e.textureFormat=this.textureFormat.input()?"KTX2":void 0,e},u.prototype._getIsArchivable=function(){return!0},u}),define("Views/Dashboard/AddData/AssetForms/containsCityGml",[],function(){"use strict";Cesium.Check;const e=["citygml","xml","gml"],t=new RegExp(`\\.(${e.join("|")})$`,"i");function n(e){for(let n=0;n<e.length;n++)if(t.test(e[n].path))return!0;return!1}return n.regex=t,n.extensions=e,n}),define("Core/AssetStatus",[],function(){"use strict";Cesium.DeveloperError;const e={AWAITING_FILES:"AWAITING_FILES",NOT_STARTED:"NOT_STARTED",QUEUED:"QUEUED",IN_PROGRESS:"IN_PROGRESS",COMPLETE:"COMPLETE",ERROR:"ERROR",DATA_ERROR:"DATA_ERROR",toString:function(t){return t===e.AWAITING_FILES?"Awaiting files":t===e.NOT_STARTED?"Not Started":t===e.QUEUED?"Queued":t===e.IN_PROGRESS?"In Progress":t===e.COMPLETE?"Complete":t===e.ERROR?"Error":t===e.DATA_ERROR?"Data Error":void 0},isError:function(t){return t===e.ERROR||t===e.DATA_ERROR},isPending:function(t){return t===e.AWAITING_FILES||t===e.NOT_STARTED||t===e.QUEUED||t===e.IN_PROGRESS}};return Object.freeze(e)}),define("Core/formatDateTime",[],function(){"use strict";const e=new Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"});return function(t){return e.format(t).replace(/, /g," ")}}),define("Core/PageLoadingState",[],function(){"use strict";return Object.freeze({IN_PROGRESS:0,READY:1,ERROR:2,NOT_FOUND:3})}),define("Core/SortOrder",[],function(){"use strict";const e={ASCENDING:"ASC",DESCENDING:"DESC",isValid:function(t){return t===e.ASCENDING||t===e.DESCENDING}};return Object.freeze(e)}),define("Views/Components/AsyncAssetSelector",["Core/defaultValue","Core/find","Core/formatDateTime","Core/isStringEmptyOrWhitespace","Core/AssetType","Core/PageLoadingState","Core/Services","Core/SortOrder","knockout"],function(e,t,n,i,r,o,a,s,l){"use strict";Cesium.Check;const c=Cesium.defined;function u(e){if(this.id=e.id,this.name=e.name,this.description=e.description,c(e.dateAdded)){const t=new Date(e.dateAdded);this.dateAdded=t,this.dateString=n(t)}else this.dateAdded=void 0,this.dateString="-";this.isSelected=l.observable(!1),this.metadata=e,this.type=r.toString(e.type)}function d(t){t=e(t,Cesium.Frozen.EMPTY_OBJECT);const n=this,i=l.observableArray([]),r=l.observableArray([]),a=l.observable(o.IN_PROGRESS),u=l.observable();this._status=t.status,this._type=t.type,this._multiselect=e(t.multiselect,!1),this._allowExternal=e(t.allowExternal,!0),this._assets=i,this._selectedAssets=r,this._hasSelected=l.pureComputed(function(){return n.selectedAssets().length>0}),this._sortedBy=l.observable("DATE_ADDED"),this._sortOrder=l.observable(s.DESCENDING),this._searchText=l.observable(""),this._throttledSearchText=l.pureComputed(this.searchText).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:400}}),this._searchSubscription=void 0,this.showSelectedAsset=!this._multiselect&&l.pureComputed(function(){const e=r()[0];return e!==u()&&-1===i.indexOf(e)}),this.loadState=a,this.isError=l.pureComputed(function(){return a()===o.ERROR}),this.isReady=l.pureComputed(function(){return a()===o.READY}),this.isInProgress=l.pureComputed(function(){return a()===o.IN_PROGRESS});const d=l.pureComputed(function(){return c(u())});this._noAssetsAvailable=l.pureComputed(function(){return!d()&&0===n._assets().length}),this.title=e(t.title,"Available Assets"),this.hasDefaultAsset=d,this._defaultAsset=u,this.select=this.select.bind(this),this.deselect=this.deselect.bind(this)}return Object.defineProperties(d.prototype,{searchText:{get:function(){return this._searchText}},selectedAssets:{get:function(){return this._selectedAssets}},hasSelected:{get:function(){return this._hasSelected}},multiselect:{get:function(){return this._multiselect}},assets:{get:function(){return this._assets}},defaultAsset:{get:function(){return this._defaultAsset},set:function(e){c(e)?this._defaultAsset(new u(e)):this._defaultAsset(void 0)}},noAssetsAvailable:{get:function(){return this._noAssetsAvailable}}}),d.prototype.activate=async function(){await this.refreshTable();const e=this;this._searchSubscription=this._throttledSearchText.subscribe(function(){e.refreshTable()})},d.prototype.refreshTable=async function(){const e=this.searchText(),t=i(e)?void 0:e,n=this._sortedBy(),r=this._sortOrder();this.loadState(o.IN_PROGRESS);const s=a.getAssets({limit:1e3,type:this._type,status:this._status,search:t,sortBy:n,sortOrder:r});this._resultPromise=s;const l=this._allowExternal,c=this;try{const e=await s;if(s!==c._resultPromise)return;c._assets.removeAll();const t=c._selectedAssets(),n=t.map(function(e){return e.id});for(let i=0;i<e.items.length;i++){const r=e.items[i];if(!l&&r.isExternal)continue;const o=n.indexOf(r.id);-1!==o?c._assets.push(t[o]):c._assets.push(new u(r))}c.loadState(o.READY)}catch(d){c.loadState(o.ERROR)}},d.prototype.select=function(e){if(this._multiselect)e.isSelected()?(e.isSelected(!1),this.selectedAssets.remove(e)):(e.isSelected(!0),this.selectedAssets.push(e));else if(!e.isSelected()){const t=this.selectedAssets()[0];c(t)&&(t.isSelected(!1),this.selectedAssets.removeAll()),e.isSelected(!0),this.selectedAssets.push(e)}},d.prototype.deselect=function(e){e.isSelected()&&(e.isSelected(!1),this.selectedAssets.remove(e))},d.prototype.selectById=async function(e){if(!c(e))return this.select(this._defaultAsset()),!1;const t=this._assets();for(let i=0;i<t.length;i++)if(t[i].id===e)return this.select(t[i]),!0;try{const t=await a.getAssetMetadata(e);return this.select(new u(t)),!0}catch(n){return!1}},d.prototype.selectByIds=async function(e){function n(e){return e.id===this}c(e)||this.select(this._defaultAsset());const i=this;await this._resultPromise;const r=[],o=i._assets();for(let s=0;s<e.length;s++){const l=t(o,n.bind(e[s]));c(l)?i.select(l):r.push(a.getAssetMetadata(e[s]).then(function(e){i.select(new u(e))}).catch(function(e){if(404!==e.statusCode)throw e}))}return Promise.all(r)},d.prototype.reset=function(){this._searchText("");const e=this.selectedAssets().slice();for(let t=0;t<e.length;t++)this.deselect(e[t])},d.prototype.sortStatus=function(e){const t=this;return l.pureComputed(function(){return t._sortedBy()===e?t._sortOrder()===s.ASCENDING?"fa-sort-desc":"fa-sort-asc":"fa-sort"})},d.prototype.sortBy=function(e){const t=this;return function(){return t._sortedBy()!==e?(t._sortOrder(s.ASCENDING),t._sortedBy(e)):t._sortOrder(t._sortOrder()===s.ASCENDING?s.DESCENDING:s.ASCENDING),t.refreshTable()}},d.prototype.getSelectedIds=function(){return this.selectedAssets().map(function(e){return e.id})},d}),define("Views/Components/createTerrainAssetSelector",["Core/AssetStatus","Core/AssetType","Core/defaultValue","./AsyncAssetSelector"],function(e,t,n,i){"use strict";return function(r){r=n(r,Cesium.Frozen.EMPTY_OBJECT);const o=new i({title:n(r.title,""),allowExternal:n(r.allowExternal,!1),type:[t.TERRAIN],status:[e.COMPLETE]});return o.defaultAsset={bytes:0,id:void 0,isExternal:!1,isPremium:!1,name:"Mean Sea Level",percentComplete:100,status:e.COMPLETE,type:t.TERRAIN},o.select(o.defaultAsset()),o}}),define("text!Views/Help/CityGmlAssetFormHelp.md",[],function(){return"**Texture output**\n\n- Auto - Automatically select between PNG or JPG on an image-by-image basis to produce the smallest tileset compatible with all 3D Tiles clients.\n- KTX2 - [KTX v2.0](https://www.khronos.org/ktx/) is an image container format that supports [Basis Universal supercompression](https://github.com/BinomialLLC/basis_universal#basis_universal). Use KTX2 compression to create a smaller tileset with better streaming performance. Disabling KTX2 extension results in a less optimized tileset but one that is compatible with clients that do not support KTX2. We recommend enabling KTX2 for your assets.\n- Ignore textures - Creates a tileset without textures.\n\n**Draco compression** Use [Draco compression](https://google.github.io/draco/) to create a smaller tileset with better streaming performance. Requires a client, such as CesiumJS, that supports the [KHR_draco_mesh_compression](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression) glTF extension.\n\n**Ignore colors** Creates a tileset with white geometry.\n\n**Clamp to terrain** When enabled, the tiling pipeline will adjust the height of the following objects so they rest on top of the selected terrain:\n\n- CityFurniture\n- GroundSurface\n- Track\n- Road\n- Railway\n- Square\n- ReliefFeature\n- LandUse\n- TransportationObject\n\n**Longitude, Latitude coordinates** When enabled, the tiler will use traditional GIS ordering (longitude, latitude). Otherwise, it will use the coordinate ordering from the embedded coordinate reference system.\n"}),define("Views/Dashboard/AddData/AssetForms/CityGmlAssetForm",["Core/AssetType","Core/find","Core/SourceType","./AssetForm","./containsCityGml","Views/Components/createTerrainAssetSelector","Views/Components/Form/SelectInputOption","knockout","text!Views/Help/CityGmlAssetFormHelp.md"],function(e,t,n,i,r,o,a,s,l){"use strict";function c(t,n,r){i.call(this,t,e["3DTILES"],n,r,l);const c=this._formHelper;this.useDraco=c.createToggle({value:!0,label:"Draco compression"});const u=c.createSelectInput({label:"Texture output",required:!0,options:[new a("KTX2","KTX2"),new a("Auto","AUTO"),new a("Ignore textures","NONE")]}),d=c.createToggle({label:"Clamp to terrain",value:!1}),h=c.createToggle({label:"Ignore colors",value:!1}),p=c.createToggle({label:"Longitude, Latitude coordinates",value:!0});this.showTerrainSelector=d.input,this.toggles=c.createHorizontalForm([u,this.useDraco,h,d,p]),this._clampToTerrain=d,this._ignoreColors=h,this._textureFormat=u,this._useLongLat=p,this.terrainAssetSelector=o(),this.hasConfiguration=s.observable(!0)}return c.prototype=Object.create(i.prototype),c.prototype.constructor=c,c.displayName="CityGML",c.tooltip="ion will tile your CityGML into a 3D Tiles 1.0 tileset.",c.getPrimaryFile=function(e){return t(e,function(e){return r.regex.test(e.path)})},c.validate=function(){return[]},c.isEligible=r,c.prototype._getPostOptions=function(){const e=this._clampToTerrain.input(),t=this._textureFormat.input();return{sourceType:n.CITYGML,geometryCompression:this.useDraco.input()?void 0:"NONE",disableColors:this._ignoreColors.input(),disableTextures:"NONE"===t,textureFormat:"NONE"!==t?t:void 0,clampToTerrain:e,baseTerrainId:e?this.terrainAssetSelector.getSelectedIds()[0]:void 0,useCrsOrdering:!this._useLongLat.input()}},c.prototype._getIsArchivable=function(){return!0},c}),define("Views/Dashboard/AddData/AssetForms/containsRaster",[],function(){"use strict";Cesium.Check;function e(t){for(let n=0;n<t.length;n++)if(e.regex.test(t[n].path))return!0;return!1}return e.regex=/\.(tif|tiff|dem|img|flt|asc|src|png|jpg|jpeg|dt0|dt1|dt2)$/i,e.extensions=["tif","tiff","dem","img","flt","asc","src","png","jpg","jpeg","dt0","dt1","dt2"],e}),define("Views/Dashboard/AddData/AssetForms/validateRasterFiles",[],function(){"use strict";Cesium.Check;const e=Cesium.defined;return function(t){const n=[];let i=!1;return t.forEach(function(n){const r=n.path;if(/\.(png|jpg|jpeg)$/i.test(r)){let o=!1;const a=new RegExp(`^${r.substr(0,r.lastIndexOf("."))}\\.`);for(let e=0;e<t.length;e++)if(a.test(t[e].path)&&t[e].path!==r){o=!0;break}o||(i=!0,e(n.parent)?(n.parent.warning(!0),n.parent.warningMessage("Contains files that are not georeferenced.")):(n.warning(!0),n.warningMessage("This file is not georeferenced")))}}),i&&n.push("One or more files are not georeferenced"),n}}),define("Views/Dashboard/AddData/AssetForms/ImageryAssetForm",["Core/AssetType","Core/find","Core/SourceType","./AssetForm","./containsRaster","./validateRasterFiles"],function(e,t,n,i,r,o){"use strict";function a(t,n,r){i.call(this,t,e.IMAGERY,n,r,"")}return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.displayName="Raster Imagery (orthoimagery)",a.tooltip="ion will tile your rasters into TMS and WMTS imagery layers.",a.getPrimaryFile=function(e){return t(e,function(e){return r.regex.test(e.path)})},a.validate=o,a.isEligible=r,a.prototype._getPostOptions=function(){return{sourceType:n.RASTER_IMAGERY}},a.prototype._getIsArchivable=function(){return!0},a}),define("Views/Dashboard/AddData/AssetForms/containsRoadHouseKml",[],function(){"use strict";Cesium.Check;const e=["kml","kmz"],t=new RegExp(`\\.(${e.join("|")})$`,"i");function n(e){for(let n=0;n<e.length;n++)if(t.test(e[n].path))return!0;return!1}return n.regex=t,n.validate=function(e){let t=!1,n=!1;for(let i=0;i<e.length;i++){const r=e[i].path;if(t=t||/\.kml$/i.test(r),n=n||/\.dae$/i.test(r),t&&n)return[]}return t&&!n?["Only KML/KMZ files with models are supported."]:[]},n.extensions=e,n}),define("text!Views/Help/KmlTilesAssetFormHelp.md",[],function(){return"**KTX2 compression** - [KTX v2.0](https://www.khronos.org/ktx/) is an image container format that supports [Basis Universal supercompression](https://github.com/BinomialLLC/basis_universal#basis_universal). Use KTX2 compression to create a smaller tileset with better streaming performance. Disabling KTX2 extension results in a less optimized tileset but one that is compatible with clients that do not support KTX2. We recommend enabling KTX2 for your assets.\n\n**Draco compression** Use [Draco compression](https://google.github.io/draco/) to create a smaller tileset with better streaming performance. Requires a client, such as CesiumJS, that supports the [KHR_draco_mesh_compression](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression) glTF extension.\n\n**Reference Terrain** The terrain asset to use when resolving KML altitude mode values.\n"}),define("Views/Dashboard/AddData/AssetForms/KmlTilesAssetForm",["Core/AssetType","Core/find","Core/SourceType","./AssetForm","./containsRoadHouseKml","../../../Components/createTerrainAssetSelector","knockout","text!Views/Help/KmlTilesAssetFormHelp.md"],function(e,t,n,i,r,o,a,s){"use strict";function l(t,n,r){i.call(this,t,e["3DTILES"],n,r,s);const l=this._formHelper;this.useDraco=l.createToggle({value:!0,label:"Draco compression"}),this.useKtx2Textures=l.createToggle({value:!0,label:"KTX2 compression"}),this.toggles=l.createHorizontalForm([this.useKtx2Textures,this.useDraco]),this.terrainAssetSelector=o(),this.hasConfiguration=a.observable(!0)}return l.prototype=Object.create(i.prototype),l.prototype.constructor=l,l.displayName="KML/COLLADA (tile as 3D Tiles)",l.tooltip="ion will tile your KML/COLLADA into 3D Tiles.",l.getPrimaryFile=function(e){return t(e,function(e){return r.regex.test(e.path)})},l.validate=r.validate,l.isEligible=r,l.prototype._getPostOptions=function(){return{sourceType:n.KML,geometryCompression:this.useDraco.input()?void 0:"NONE",baseTerrainId:this.terrainAssetSelector.getSelectedIds()[0],textureFormat:this.useKtx2Textures.input()?"KTX2":"AUTO"}},l.prototype._getIsArchivable=function(){return!0},l}),define("text!Views/Help/ModelAssetFormHelp.md",[],function(){return"**Optimize for rendering** Optimizes the model for rendering by combining primitives and textures. This will collapse the model's node heirarchy in order to render mode efficiently. If you want to preserve the node heirarchy you should disable this option.\n\n**Draco compression** Use [Draco compression](https://google.github.io/draco/) to create a smaller models with better streaming performance. Requires a client, such as CesiumJS, that supports the [KHR_draco_mesh_compression](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression) glTF extension.\n"}),define("Views/Dashboard/AddData/AssetForms/ModelAssetForm",["../../../../Core/AssetType","../../../../Core/find","Core/SourceType","./AssetForm","./containsModel","knockout","text!Views/Help/ModelAssetFormHelp.md"],function(e,t,n,i,r,o,a){"use strict";function s(t,n,r){i.call(this,t,e.GLTF,n,r,a);const s=this._formHelper,l=s.createToggle({label:"Optimize for rendering",value:!0});this.useDraco=s.createToggle({value:!0,label:"Draco compression"}),this.toggles=s.createHorizontalForm([l,this.useDraco]),this._optimize=l,this.hasConfiguration=o.observable(!0)}return s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.displayName="3D Model (convert to glTF)",s.tooltip="ion will convert your model to glTF.",s.getPrimaryFile=function(e){return t(e,function(e){return/\.(obj|glb|gltf|dae|fbx)$/i.test(e.path)})},s.validate=function(e){return 1!==e.filter(function(e){return r.regex.test(e.path)}).length?["Only one model may be converted at a time."]:[]},s.isEligible=function(e){return r(e)},s.prototype._getPostOptions=function(){return{sourceType:n.MODEL,geometryCompression:this.useDraco.input()?void 0:"NONE",optimize:this._optimize.input()}},s.prototype._getIsArchivable=function(){return!0},s}),define("Views/Dashboard/AddData/AssetForms/containsBimCad",[],function(){"use strict";Cesium.Check;const e=["ifc","gltf","glb","obj"],t=new RegExp(`\\.(${e.join("|")})$`,"i");function n(e){for(let n=0;n<e.length;n++)if(t.test(e[n].path))return!0;return!1}return n.regex=t,n.validate=function(e){return[]},n.extensions=e,n}),define("text!Views/Help/BimCadFormHelp.md",[],function(){return"### Texture Compression\n\n**KTX2 Texture Compression** - [KTX v2.0](https://www.khronos.org/ktx/) is an image container format that supports [Basis Universal supercompression](https://github.com/BinomialLLC/basis_universal#basis_universal). Use KTX2 compression to create a smaller tileset with better streaming performance.\n\nDisabling KTX2 extension results in a less optimized tileset but one that is compatible with clients that do not support KTX2. We recommend enabling KTX2 for your assets.\n\n---\n\n### Geometric compression\n\nUse one of the following geometric compression options to create a smaller tileset with better streaming performance.\n\n**Draco Compression** - [Draco](https://google.github.io/draco/) is a type of geometric compression optimized for smaller file sizes. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [KHR_draco_mesh_compression](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression) glTF extension.\n\n**Meshopt Compression** - [Meshopt](https://github.com/zeux/meshoptimizer#vertexindex-buffer-compression) geometric compression is optimized for runtime performance. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [EXT_meshopt_compression](https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Vendor/EXT_meshopt_compression) glTF extension.\n\n**Quantization Compression** - [Quantization](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md) conducts vertex quantization by storing positions as integers rather than floats. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [KHR_mesh_quantization](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md) glTF extension.\n\n---\n\n### EPSG Code\n\nThe EPSG Code representing the coordinate reference system to apply to the data. Overrides any CRS embedded in the data itself. Can be specified as a single CRS (eg. 32633) or a compound CRS (eg. 32633+5703).\n"}),define("Views/Dashboard/AddData/AssetForms/BimCadAssetForm",["Core/AssetType","Core/find","Core/SourceType","Core/TilersGeometryCompression","Core/isStringEmptyOrWhitespace","./AssetForm","./containsBimCad","knockout","text!Views/Help/BimCadFormHelp.md","Views/Components/Form/SelectInputOption","Views/Components/ContextualHelp"],function(e,t,n,i,r,o,a,s,l,c,u){"use strict";function d(t,n,a){o.call(this,t,e["3DTILES"],n,a,l);const h=this._formHelper,p=h.createToggle({value:!0,label:"KTX2 compression"}),f=new u(l,".add-data");this.toggles=s.pureComputed(function(){return h.createHorizontalForm([p])}),this.contextualHelp=s.pureComputed(function(){return f}),this.geometryCompression=h.createSelectInput({label:"Geometric Compression",required:!0,options:[new c("None",i.NONE),new c("Draco",i.DRACO),new c("Meshopt",i.MESHOPT),new c("Quantization",i.QUANTIZATION)]}),this.epsgCode=h.createTextInput({label:"EPSG Code",validate:function(e){if(r(e))return"";let t=e;e.startsWith("EPSG:")&&(t=e.slice(5));const n=t.match(/^(\d{4,5})(\+(\d{4,5}))?$/);if(!n)return"EPSG Code is invalid";const i=parseInt(n[1],10),o=n[3]?parseInt(n[3],10):null;return i>=1024&&i<=32767&&(null===o||o>=1024&&o<=32767)?"":"EPSG Code is invalid"}}),d.tooltip=s.pureComputed(function(){return"ion will tile your BIM/CAD model into a 3D Tiles 1.1 tileset. For Cesium clients, we recommend using Cesium for Unreal v2.11.0 or later, Cesium for Unity v1.14.0 or later, and CesiumJS v1.124.0 or later."}),this.geometryCompression.input(i.MESHOPT),this.textureFormat=p,this.hasConfiguration=s.observable(!0)}return d.prototype=Object.create(o.prototype),d.prototype.constructor=d,d.displayName="Architecture, Engineering or Construction model (BIM/CAD)",d.getPrimaryFile=function(e){return t(e,function(e){return a.regex.test(e.path)})},d.validate=function(){return[]},d.isEligible=a,d.prototype._getPostOptions=function(){const e={sourceType:n.BIM_CAD};e.geometryCompression=this.geometryCompression.input(),e.textureFormat=this.textureFormat.input()?"KTX2":void 0;let t=this.epsgCode.input();return r(t)||(t.startsWith("EPSG:")||(t=`EPSG:${t}`),e.inputCrs=t),e},d.prototype._getIsArchivable=function(){return!0},d}),define("text!Views/Help/CommonModelAssetFormHelp.md",[],function(){return"\x3c!-- To Do: Add information about next gen tiler --\x3e\n\n**Draco compression** Use [Draco compression](https://google.github.io/draco/) to create a smaller tileset with better streaming performance. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [KHR_draco_mesh_compression](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression) glTF extension.\n\n**WebP Images** Use WebP images to create a smaller tileset with better streaming performance. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [EXT_texture_webp](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp) glTF extension and a browser that supports WebP, such as Chrome or Firefox 65 and newer.\n"}),define("Views/Dashboard/AddData/AssetForms/ModelTilesAssetForm",["Core/AssetType","Core/find","Core/SourceType","./AssetForm","./containsModel","knockout","text!Views/Help/CommonModelAssetFormHelp.md"],function(e,t,n,i,r,o,a){"use strict";function s(t,n,r){i.call(this,t,e["3DTILES"],n,r,a);const s=this._formHelper;this.useWebP=s.createToggle({value:!1,label:"WebP images"}),this.useDraco=s.createToggle({value:!0,label:"Draco compression"}),this.toggles=s.createHorizontalForm([this.useDraco,this.useWebP]),this.hasConfiguration=o.observable(!0)}return s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.displayName="3D Model (tile as 3D Tiles)",s.tooltip="ion will tile your BIM, CAD, or generic 3D models into a 3D Tiles 1.0 tileset.",s.getPrimaryFile=function(e){return t(e,function(e){return r.regex.test(e.path)})},s.validate=function(){return[]},s.isEligible=r,s.prototype._getPostOptions=function(){return{sourceType:n.MODEL,textureFormat:this.useWebP.input()?"WEBP":void 0,geometryCompression:this.useDraco.input()?void 0:"NONE"}},s.prototype._getIsArchivable=function(){return!0},s}),define("Views/Dashboard/AddData/AssetForms/containsPointClouds",["Core/Feature"],function(e){"use strict";Cesium.Check;const t=["las","laz"];let n=new RegExp(`\\.(${t.join("|")})$`,"i");function i(t){const r=["las","laz"];e.isEnabledForUser(e.User.GAUSSIAN_SPLATS)&&r.push("ply"),n=new RegExp(`\\.(${r.join("|")})$`,"i"),i.regex=n,i.extensions=r;for(let e=0;e<t.length;e++)if(n.test(t[e].path))return!0;return!1}return i.regex=n,i.validate=function(e){return[]},i.extensions=t,i}),define("text!Views/Help/PointCloudAssetFormHelp.md",[],function(){return"**Draco compression** Use [Draco compression](https://google.github.io/draco/) to create a smaller tileset with better streaming performance. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [KHR_draco_mesh_compression](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression) glTF extension.\n"}),define("text!Views/Help/PointCloudAssetFormSplatsHelp.md",[],function(){return"**Draco compression** Use [Draco compression](https://google.github.io/draco/) to create a smaller tileset with better streaming performance. 3D Tiles produced with this option require a client, such as CesiumJS, that supports the [KHR_draco_mesh_compression](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression) glTF extension.\n\n**Gaussian splats** Runs the Gaussian splats pipeline on the provided data. Input requires a ply file.\n"}),define("Views/Dashboard/AddData/AssetForms/PointCloudAssetForm",["Core/AssetType","Core/Feature","Core/find","Core/SourceType","./AssetForm","./containsPointClouds","knockout","text!Views/Help/PointCloudAssetFormHelp.md","text!Views/Help/PointCloudAssetFormSplatsHelp.md"],function(e,t,n,i,r,o,a,s,l){"use strict";function c(n,i,o){let c=s;t.isEnabledForUser(t.User.GAUSSIAN_SPLATS)&&(c=l),r.call(this,n,e["3DTILES"],i,o,c);const u=this._formHelper;this.useDraco=u.createToggle({value:!0,label:"Draco compression"});const d=new RegExp("\\.(ply)$","i"),h=n().some(e=>d.test(e.path));this.gaussianSplats=u.createToggle({value:h,label:"Gaussian splats"});const p=[this.useDraco];t.isEnabledForUser(t.User.GAUSSIAN_SPLATS)&&p.push(this.gaussianSplats),this.toggles=u.createHorizontalForm(p),this.hasConfiguration=a.observable(!0)}return c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.displayName="Point Cloud",Object.defineProperty(c,"tooltip",{get:function(){return t.isEnabledForUser(t.User.GAUSSIAN_SPLATS)?"ion will tile your LAS or LAZ point clouds into a 3D Tiles 1.0 tileset and your PLY file into a 3D Tiles 1.1 tileset.":"ion will tile your LAS or LAZ point clouds into a 3D Tiles 1.0 tileset."}}),c.getPrimaryFile=function(e){return n(e,function(e){return o.regex.test(e.path)})},c.validate=o.validate,c.isEligible=o,c.prototype._getPostOptions=function(){const e={sourceType:i.POINT_CLOUD,geometryCompression:this.useDraco.input()?void 0:"NONE"};return t.isEnabledForUser(t.User.GAUSSIAN_SPLATS)&&(e.gaussianSplats=this.gaussianSplats.input()),e},c.prototype._getIsArchivable=function(){return!0},c}),define("Views/Dashboard/AddData/HeightReference",[],function(){"use strict";Cesium.DeveloperError;const e={AUTO:"AUTO",MEAN_SEA_LEVEL:"MEAN_SEA_LEVEL",WGS84:"WGS84",toString:function(t){return t===e.AUTO?"Auto detect":t===e.MEAN_SEA_LEVEL?"Mean Sea Level (EGM96)":t===e.WGS84?"Ellipsoid (WGS84)":void 0}};return Object.freeze(e)}),define("Views/Dashboard/AddData/HeightUnit",[],function(){"use strict";const e=Cesium.DeveloperError,t={AUTO:"AUTO",CENTIMETERS:"CENTIMETERS",FEET:"FEET",METERS:"METERS",MILES:"MILES",KILOMETERS:"KILOMETERS",toMeters:function(n){if(n===t.CENTIMETERS)return.01;if(n===t.METERS)return 1;if(n===t.KILOMETERS)return 1e3;if(n===t.FEET)return.3048;if(n===t.MILES)return 1609.344;if(n===t.AUTO)throw new e("Cannot convert HeightUnit.AUTO to meters")},toString:function(e){return e===t.FEET?"Feet":e===t.METERS?"Meters":e===t.MILES?"Miles":e===t.KILOMETERS?"Kilometers":e===t.CENTIMETERS?"Centimeters":e===t.AUTO?"Auto detect":void 0}};return Object.freeze(t)}),define("text!Views/Help/TerrainAssetFormHelp.md",[],function(){return"**Base Terrain** is the terrain with which your terrain data will be combined to create a new global terrain layer.\n\n**Height Unit** is the unit of measurement in the source data.\n\n**Height Reference** is the surface from which heights in the source data are measured.\n"}),define("Views/Dashboard/AddData/AssetForms/TerrainAssetForm",["./AssetForm","./containsRaster","./validateRasterFiles","../HeightReference","../HeightUnit","Core/SourceType","../../../Components/createTerrainAssetSelector","../../../Components/Form/SelectInputOption","../../../../Core/AssetType","../../../../Core/find","knockout","text!Views/Help/TerrainAssetFormHelp.md"],function(e,t,n,i,r,o,a,s,l,c,u,d){"use strict";const h=Cesium.Check,p=Cesium.defined;function f(e){const t=Object.keys(e),n=[];return t.forEach(function(t){const i=e[t];"function"!=typeof i&&n.push(new s(e.toString(i),i))}),n}function m(t,n,o){e.call(this,t,l.TERRAIN,n,o,d);const s=this._formHelper,c=s.createSelectInput({label:"Height reference",required:!0,value:i.AUTO,options:f(i)});this.unitField=s.createSelectInput({label:"Height unit",required:!0,value:r.AUTO,options:f(r)}),this.referenceField=c,this.terrainAssetSelector=a(),this.hasConfiguration=u.observable(!0)}return m.prototype=Object.create(e.prototype),m.prototype.constructor=m,m.displayName="Raster Terrain",m.tooltip="ion will tile your rasters into a quantized-mesh terrain layer",m.getPrimaryFile=function(e){return c(e,function(e){return t.regex.test(e.path)})},m.validate=function(e){return n(e)},m.isEligible=function(e){h.defined("files",e);const t=/\.(tif|tiff|dem|img|flt|asc|src|dt0|dt1|dt2)$/i;for(let n=0;n<e.length;n++)if(t.test(e[n].path))return!0;return!1},m.prototype._getPostOptions=function(){const e={sourceType:o.RASTER_TERRAIN,baseTerrainId:this.terrainAssetSelector.getSelectedIds()[0]},t=this.unitField.input();t!==r.AUTO&&(e.toMeters=r.toMeters(t));const n=this.referenceField.input();return n!==i.AUTO&&(e.heightReference=n),e},m.prototype._getIsArchivable=function(){return!p(this.terrainAssetSelector.getSelectedIds()[0])},m}),define("Views/Dashboard/AddData/AssetForms/containsTerrainDb",[],function(){"use strict";Cesium.Check;return function(e){for(let t=0;t<e.length;t++)if(/\.terraindb$/.test(e[t].path))return!0}}),define("Views/Dashboard/AddData/AssetForms/TerrainDatabaseAssetForm",["./AssetForm","./containsTerrainDb","Core/SourceType","../../../../Core/AssetType","../../../../Core/find"],function(e,t,n,i,r){"use strict";function o(t,n,r){e.call(this,t,i.TERRAIN,n,r,"")}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.displayName="Cesium Terrain Database",o.tooltip="ion will host your Cesium terrain database for streaming.",o.getPrimaryFile=function(e){return r(e,function(e){return/\.terraindb$/i.test(e.path)})},o.validate=function(e){return 1!==e.length?[".terraindb files must be uploaded individually."]:[]},o.isEligible=function(e){return t(e)},o.prototype._getPostOptions=function(){return{sourceType:n.TERRAIN_DATABASE}},o.prototype._getIsArchivable=function(){return!0},o}),define("text!Views/Help/TilesAssetFormHelp.md",[],function(){return"**Main JSON File** The initial JSON file that will be loaded first for the tileset.\n"}),define("Views/Dashboard/AddData/AssetForms/TilesAssetForm",["./AssetForm","Core/AssetType","Core/find","Core/SourceType","knockout","text!Views/Help/TilesAssetFormHelp.md","Views/Components/Form/SelectInputOption"],function(e,t,n,i,r,o,a){"use strict";const s=Cesium.defined,l=/\.3dtiles$/i,c=/\.json$/i;function u(i,u,d){e.call(this,i,t["3DTILES"],u,d,o);const h=s(n(i(),function(e){return l.test(e.path)}));if(this.mainJsonSelector=void 0,this.hasConfiguration=r.observable(!h),this._isDatabase=h,h)return;const p=r.pureComputed(function(){const e=[];return i().forEach(function(t){const n=t.path;c.test(n)&&e.push(new a(n,n))}),e.sort(function(e,t){return e.value.localeCompare(t.value)})}),f=this._formHelper;if(0!==p().length){const e=n(p(),function(e){return/tileset\.json$/i.test(e.value)});this.mainJsonSelector=f.createSelectInput({label:"Main JSON File",options:p,required:!0,disabled:r.pureComputed(function(){return 1===p().length}),value:s(e)?e.value:void 0})}else this.mainJsonSelector=f.createTextInput({label:"Main JSON File",required:!0,value:"tileset.json"})}return u.prototype=Object.create(e.prototype),u.prototype.constructor=u,u.displayName="3D Tiles",u.tooltip="ion will host your 3D Tiles for streaming.",u.getPrimaryFile=function(e){let t=n(e,function(e){return l.test(e.path)});return s(t)||(t=n(e,function(e){return c.test(e.path)})),t},u.validate=function(e){const t=n(e,function(e){return l.test(e.path)});return s(t)&&1!==e.length?[".3dtiles files must be uploaded individually."]:[]},u.isEligible=function(e){for(let t=0;t<e.length;t++)if(l.test(e[t].path)||c.test(e[t].path))return!0;return!1},u.prototype._getPostOptions=function(){return this._isDatabase?{sourceType:i.TILES3D_DATABASE}:{sourceType:i.TILES3D,tilesetJson:this.mainJsonSelector.input()}},u.prototype._getIsArchivable=function(){return!0},u}),define("Views/Dashboard/AddData/AssetForms/VectorAssetForm",["./AssetForm","Core/AssetType","Core/find","Core/SourceType"],function(e,t,n,i){"use strict";const r=Cesium.Check,o=Cesium.DeveloperError,a=Object.freeze({[t.CZML]:i.CZML,[t.GEOJSON]:i.GEOJSON,[t.KML]:i.KML}),s=Object.freeze({CZML:["czml"],GeoJSON:["geojson","json","topojson"],KML:["kml","kmz"]});function l(e){return new RegExp(`\\.(${e.join("|")})$`,"i")}const c=l(s.CZML.concat(s.GeoJSON,s.KML));function u(t){if(r.typeOf.string("options.label",t.label),r.typeOf.string("options.type",t.type),!Array.isArray(t.extensions))throw new o("options.extensions must be an array");const i=l(t.extensions),s=t.type,u=a[s],d=t.label;function h(t,n,i){e.call(this,t,s,n,i,"")}return Object.defineProperty(h,"name",{get:function(){return`VectorAssetForm_${s}`}}),h.prototype=Object.create(e.prototype),h.prototype.constructor=h,h.displayName=`${d} (host without tiling)`,h.tooltip=`ion will host your ${d} files for streaming.`,h.getPrimaryFile=function(e){return n(e,function(e){return i.test(e.path)})},h.validate=function(e){if(0===e.filter(function(e){return i.test(e.path)}).length)return[`No ${d} files.`];return e.filter(function(e){return c.test(e.path)}).length>1?[`${d} files must be uploaded individually.`]:[]},h.isEligible=function(e){return e.some(function(e){return i.test(e.path)})},h.prototype._getPostOptions=function(){return{sourceType:u}},h.prototype._getIsArchivable=function(){return!0},h}return{CZML:u({label:"CZML",type:t.CZML,extensions:s.CZML}),GeoJSON:u({label:"GeoJSON",type:t.GEOJSON,extensions:s.GeoJSON}),KML:u({label:"KML",type:t.KML,extensions:s.KML})}}),define("Views/Dashboard/AddData/AssetForms/isReconstructionImagery",[],function(){"use strict";Cesium.Check;function e(t){for(let n=0;n<t.length;n++)if(e.regex.test(t[n].path))return!0;return!1}return e.extensions=["3fr","arw","crw","cr2","dng","ecw","j2k","jp2","jpg","jpeg","nef","png","rw2","tif","tiff","iiq"],e.regex=new RegExp(`\\.(${e.extensions.join("|")})$`,"i"),e}),define("Views/Dashboard/AddData/MeshQuality",[],function(){"use strict";return Object.freeze({Draft:"Draft",Medium:"Medium",Extra:"Extra"})}),define("text!Views/Help/ReconstructAssetFormHelp.md",[],function(){return"**Use embedded GPS coordinates to georeference the asset** specifies if the reconstructed asset should be georeferenced using GPS coordinates in EXIF data of the photos. Some photos, such as those taken indoors or focused on objects rather than locations, may contain GPS coordinates that are unsuitable for determining the global position of the entire model. In this case, the toggle should be off.\n\n**Output quality** controls the level of detail of the reconstructed asset. Higher quality takes more time to reconstruct and results in tiles that are more resource demanding at runtime.\n\nOutput for all options will be 3D Tiles. The available content types for reconstruction are:\n\n- **3D mesh**: The collection of photos will be reconstructed into a 3D mesh and tiles.\n- **3D Gaussian splats**: A 3D Gaussian splat tiles asset will be created.\n- **Point cloud**: A point cloud tiles asset will be created.\n"}),n="undefined"!=typeof self?self:this,i=function(){return function(){"use strict";var e={d:function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:1,get:n[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:1})}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"==n(t)?t:t+""}e.r(t),e.d(t,{default:function(){return nr},errors:function(){return ir},load:function(){return rr},loadView:function(){return ar}});var r=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e){return"object"!==n(e)||void 0===e.length||void 0===e.readUInt8||void 0===e.readUInt16LE||void 0===e.readUInt16BE||void 0===e.readUInt32LE||void 0===e.readUInt32BE||void 0===e.readInt32LE||void 0===e.readInt32BE}(t))throw Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length},(t=[{key:"getUint8",value:function(e){return this.buffer.readUInt8(e)}},{key:"getUint16",value:function(e,t){return t?this.buffer.readUInt16LE(e):this.buffer.readUInt16BE(e)}},{key:"getUint32",value:function(e,t){return t?this.buffer.readUInt32LE(e):this.buffer.readUInt32BE(e)}},{key:"getInt32",value:function(e,t){return t?this.buffer.readInt32LE(e):this.buffer.readInt32BE(e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||0,r.configurable=1,"value"in r&&(r.writable=1),Object.defineProperty(e,i(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:0}),e;var e,t}();function o(e,t,n){try{return new DataView(e,t,n)}catch(i){return new r(e,t,n)}}function a(e,t,n){for(var i=[],r=0;r<n&&t+r<e.byteLength;r++)i.push(e.getUint8(t+r));return u(i)}function s(e,t){for(var n=[],i=0;t+i<e.byteLength;){var r=e.getUint8(t+i);if(0===r)break;n.push(r),i++}return u(n)}function l(e,t,n){for(var i=[],r=0;r<n&&t+r<e.byteLength;r+=2)i.push(e.getUint16(t+r));return 0===i[i.length-1]&&i.pop(),u(i)}function c(e,t){var n=e.getUint8(t);return[n,a(e,t+1,n)]}function u(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}function d(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function h(e,t,n){var i=0;Object.defineProperty(e,t,{get:function(){return i||(i=1,Object.defineProperty(e,t,{configurable:1,enumerable:1,value:n.apply(e),writable:1})),e[t]},configurable:1,enumerable:1})}function p(e){return"undefined"!=typeof btoa?"string"==typeof e?btoa(e):btoa(Array.prototype.reduce.call(new Uint8Array(e),function(e,t){return e+String.fromCharCode(t)},"")):"undefined"!=typeof Buffer?void 0!==Buffer.from?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64"):void 0}function f(e,t){return Array(t+1).join(e)}var m=void 0;function g(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"string";if(0===t&&"function"==typeof DecompressionStream){var r=new DecompressionStream("deflate"),o=new Blob([e]).stream().pipeThrough(r);return"dataview"===i?new Response(o).arrayBuffer().then(function(e){return new DataView(e)}):new Response(o).arrayBuffer().then(function(e){return new TextDecoder(n).decode(e)})}return void 0!==t?Promise.reject("Unknown compression method ".concat(t,".")):e}var v={USE_FILE:1,USE_JFIF:1,USE_PNG_FILE:1,USE_EXIF:1,USE_IPTC:1,USE_XMP:1,USE_ICC:1,USE_MPF:1,USE_PHOTOSHOP:1,USE_THUMBNAIL:1,USE_TIFF:1,USE_JPEG:1,USE_PNG:1,USE_HEIC:1,USE_AVIF:1,USE_WEBP:1,USE_GIF:1,USE_MAKER_NOTES:1};function b(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}function y(e){if(e.length>=8){var t=b(e.slice(0,8));if("ASCII\0\0\0"===t)return b(e.slice(8));if("JIS\0\0\0\0\0"===t)return"[JIS encoded text]";if("UNICODE\0"===t)return"[Unicode encoded text]";if("\0\0\0\0\0\0\0\0"===t)return"[Undefined encoding]"}return"Undefined"}function w(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}var _=18761,x=_,S=function(e,t){if(e.getUint16(t)===_)return _;if(19789===e.getUint16(t))return 19789;throw Error("Illegal byte order value. Faulty image.")},T="ICC_PROFILE\0",A="MPF\0",C=65505,E="JFIF",k="Exif",I="http://ns.adobe.com/xap/1.0/\0",P="http://ns.adobe.com/xmp/extension/\0",D="Photoshop 3.0";function O(e,t){return 65472===e.getUint16(t)}function M(e,t){return 65474===e.getUint16(t)}function L(e,t){return 65506===e.getUint16(t)&&a(e,t+4,12)===T}function R(e,t){return 65506===e.getUint16(t)&&a(e,t+4,4)===A}function N(e,t){return 65504===e.getUint16(t)&&a(e,t+4,4)===E&&0===e.getUint8(t+4+4)}function F(e,t){return e.getUint16(t)===C&&a(e,t+4,4)===k&&0===e.getUint8(t+4+4)}function U(e,t){return e.getUint16(t)===C&&function(e,t){return a(e,t+4,29)===I}(e,t)}function V(e,t){return e.getUint16(t)===C&&function(e,t){return a(e,t+4,35)===P}(e,t)}function B(e,t){return{dataOffset:e+33,length:t-31}}function $(e,t){return{dataOffset:e+79,length:t-77}}function H(e,t){return 65517===e.getUint16(t)&&a(e,t+4,13)===D&&0===e.getUint8(t+4+13)}function G(e,t){var n=e.getUint16(t);return n>=65504&&n<=65519||65534===n||65472===n||65474===n||65476===n||65499===n||65501===n||65498===n}function j(e,t){return 65535===e.getUint16(t)}var z="PNG\r\n\n",q="XML:com.adobe.xmp\0",Y="tEXt",W="iTXt",K="zTXt",X="pHYs",Z="tIME";function J(e,t){return"IHDR"===a(e,t+4,4)}function Q(e,t){return a(e,t+4,4)===W&&a(e,t+8,18)===q}function ee(e,t,n){var i=a(e,t+4,4);return i===Y||i===W||i===K&&n}function te(e,t){return"eXIf"===a(e,t+4,4)}function ne(e,t){return"iCCP"===a(e,t+4,4)}function ie(e,t){var n=[X,Z],i=a(e,t+4,4);return n.includes(i)}function re(e,t){t+=28;for(var n=0;n<2&&t<e.byteLength;)0===e.getUint8(t)&&n++,t++;if(!(n<2))return t}function oe(e,t){var n=s(e,t);return t+=n.length+1,{profileName:n,compressionMethod:e.getUint8(t),compressedProfileOffset:t+=1}}function ae(e,t,n,i,r,o,a,s){if(void 0===s)return[];for(var l=[],c=n.items,u=0;u<s;u++){var d={extents:[]};d.itemId=se(e,c,t),c+=i.item.itemId,d.constructionMethod=1===t||2===t?15&e.getUint16(c):void 0,c+=i.item.constructionMethod,d.dataReferenceIndex=e.getUint16(c),c+=i.item.dataReferenceIndex,d.baseOffset=ce(e,c,i.item.baseOffset),c+=i.item.baseOffset,d.extentCount=e.getUint16(c),c+=i.item.extentCount;for(var h=0;h<d.extentCount;h++){var p={};p.extentIndex=le(e,t,c,a),c+=i.item.extent.extentIndex,p.extentOffset=ce(e,c,r),c+=i.item.extent.extentOffset,p.extentLength=ce(e,c,o),c+=i.item.extent.extentLength,d.extents.push(p)}l.push(d)}return l}function se(e,t,n){return n<2?e.getUint16(t):2===n?e.getUint32(t):void 0}function le(e,t,n,i){if((1===t||2===t)&&i>0)return ce(e,n,i)}function ce(e,t,n){return 4===n?e.getUint32(t):8===n?(console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),function(e,t){return e.getUint32(t+4)}(e,t)):0}var ue=1165519206,de=1835625829;function he(e,t){var n=function(e,t){var n=e.getUint32(t);return function(e){return 0===e}(n)?{length:e.byteLength-t,contentOffset:t+4+4}:function(e){return 1===e}(n)&&function(e,t){return 0===e.getUint32(t+8)}(e,t)?{length:e.getUint32(t+12),contentOffset:t+4+4+8}:{length:n,contentOffset:t+4+4}}(e,t),i=n.length,r=n.contentOffset;if(!(i<8)){var o=e.getUint32(t+4);if(1718909296===o)return function(e,t,n){return{type:"ftyp",majorBrand:a(e,t,4),length:n}}(e,r,i);if(1768977008===o)return function(e,t,n,i){return{type:"iprp",subBoxes:ge(e,n,i-(n-t)),length:i}}(e,t,r,i);if(1768973167===o)return function(e,t,n,i){return{type:"ipco",properties:ge(e,n,i-(n-t)),length:i}}(e,t,r,i);if(1668246642===o)return function(e,t,n){return{type:"colr",icc:me(e,t),length:n}}(e,r,i);var l=e.getUint8(r);return 1835365473===o?function(e,t,n,i){return{type:"meta",subBoxes:ge(e,n+3,i-(n+3-t)),length:i}}(e,t,r+1,i):1768714083===o?function(e,t,n,i){var r=function(e,t){var n={item:{dataReferenceIndex:2,extentCount:2,extent:{}}};e<2?(n.itemCount=2,n.item.itemId=2):2===e&&(n.itemCount=4,n.item.itemId=4),n.item.constructionMethod=1===e||2===e?2:0;var i={offsetSize:t,lengthSize:t,baseOffsetSize:t+1,indexSize:t+1};return i.itemCount=t+2,i.items=i.itemCount+n.itemCount,i.item={itemId:0},i.item.constructionMethod=i.item.itemId+n.item.itemId,i.item.dataReferenceIndex=i.item.constructionMethod+n.item.constructionMethod,{offsets:i,sizes:n}}(t,n+3),o=r.offsets,a=r.sizes,s=e.getUint8(o.offsetSize)>>4;a.item.extent.extentOffset=s;var l=15&e.getUint8(o.lengthSize);a.item.extent.extentLength=l;var c=e.getUint8(o.baseOffsetSize)>>4;a.item.baseOffset=c;var u=function(e,t,n){if(1===n||2===n)return 15&e.getUint8(t)}(e,o.indexSize,t);a.item.extent.extentIndex=void 0!==u?u:0;var d=function(e,t,n){return n<2?e.getUint16(t):2===n?e.getUint32(t):void 0}(e,o.itemCount,t);return{type:"iloc",items:ae(e,t,o,a,s,l,u,d),length:i}}(e,l,r+1,i):1768517222===o?function(e,t,n,i,r){var o=function(e,t){var n={entryCount:t+3},i={};return i.entryCount=0===e?2:4,n.itemInfos=n.entryCount+i.entryCount,{offsets:n}}(n,i),a=o.offsets;return{type:"iinf",itemInfos:ge(e,a.itemInfos,r-(a.itemInfos-t)),length:r}}(e,t,l,r+1,i):1768842853===o?function(e,t,n,i,r){i+=3;var o={type:"infe",length:r};return 0!==n&&1!==n||(o.itemId=e.getUint16(i),i+=2,o.itemProtectionIndex=e.getUint16(i),i+=2,o.itemName=s(e,i),i+=o.itemName.length+1),n>=2&&(2===n?(o.itemId=e.getUint16(i),i+=2):3===n&&(o.itemId=e.getUint32(i),i+=4),o.itemProtectionIndex=e.getUint16(i),i+=2,o.itemType=e.getUint32(i),i+=4,o.itemName=s(e,i),i+=o.itemName.length+1,o.itemType===de?(o.contentType=s(e,i),t+r>(i+=o.contentType.length+1)&&(o.contentEncoding=s(e,i),i+=o.contentEncoding.length+1)):1970432288===o.itemType&&(o.itemUri=s(e,i),i+=o.itemUri.length+1)),o}(e,t,l,r+1,i):{type:void 0,length:i}}}function pe(e){if(v.USE_EXIF||v.USE_XMP||v.USE_ICC){var t={},n=function(e){for(var t=0;t+4+4<=e.byteLength;){var n=he(e,t);if(void 0===n)break;if("meta"===n.type)return n;t+=n.length}}(e);return n?(v.USE_EXIF&&(t.tiffHeaderOffset=function(e,t){try{var n=function(e){return e.subBoxes.find(function(e){return"iinf"===e.type}).itemInfos.find(function(e){return e.itemType===ue})}(t).itemId,i=fe(t,n);return function(e,t){return t+4+e.getUint32(t)}(e,i.baseOffset+i.extents[0].extentOffset)}catch(e){return}}(e,n)),v.USE_XMP&&(t.xmpChunks=function(e){try{var t=function(e){return e.subBoxes.find(function(e){return"iinf"===e.type}).itemInfos.find(function(e){return e.itemType===de&&"application/rdf+xml"===e.contentType})}(e).itemId,n=fe(e,t),i=fe(e,t).extents[0];return[{dataOffset:n.baseOffset+i.extentOffset,length:i.extentLength}]}catch(e){return}}(n)),v.USE_ICC&&(t.iccChunks=function(e){try{var t=e.subBoxes.find(function(e){return"iprp"===e.type}).subBoxes.find(function(e){return"ipco"===e.type}).properties.find(function(e){return"colr"===e.type}).icc;if(t)return[t]}catch(e){}}(n)),t.hasAppMarkers=void 0!==t.tiffHeaderOffset||void 0!==t.xmpChunks||void 0!==t.iccChunks,t):{hasAppMarkers:0}}return{}}function fe(e,t){return e.subBoxes.find(function(e){return"iloc"===e.type}).items.find(function(e){return e.itemId===t})}function me(e,t){var n=a(e,t,4);if("prof"===n||"rICC"===n)return{offset:t+4,length:e.getUint32(t+4),chunkNumber:1,chunksTotal:1}}function ge(e,t,n){for(var i=[ue,de],r=[],o=t;o<t+n;){var a=he(e,o);if(void 0===a)break;void 0===a.type||void 0!==a.itemType&&-1===i.indexOf(a.itemType)||r.push(a),o+=a.length}return r}var ve=["GIF87a","GIF89a"],be="<?xpacket begin",ye={parseAppMarkers:function(e,t){if(v.USE_TIFF&&function(e){return!!e&&e.byteLength>=4&&function(e){var t=e.getUint16(0)===x;return 42===e.getUint16(2,t)}(e)}(e))return we(v.USE_EXIF?{hasAppMarkers:1,tiffHeaderOffset:0}:{},"tiff","TIFF");if(v.USE_JPEG&&function(e){return!!e&&e.byteLength>=2&&65496===e.getUint16(0)}(e))return we(function(e){for(var t,n,i,r,o,a,s,l,c,u=2;u+4+5<=e.byteLength;){if(v.USE_FILE&&O(e,u))t=e.getUint16(u+2),n=u+2;else if(v.USE_FILE&&M(e,u))t=e.getUint16(u+2),i=u+2;else if(v.USE_JFIF&&N(e,u))t=e.getUint16(u+2),r=u+2;else if(v.USE_EXIF&&F(e,u))t=e.getUint16(u+2),o=u+10;else if(v.USE_XMP&&U(e,u))s||(s=[]),t=e.getUint16(u+2),s.push(B(u,t));else if(v.USE_XMP&&V(e,u))s||(s=[]),t=e.getUint16(u+2),s.push($(u,t));else if(v.USE_IPTC&&H(e,u))t=e.getUint16(u+2),a=u+18;else if(v.USE_ICC&&L(e,u)){var d=u+18,h=(t=e.getUint16(u+2))-16,p=e.getUint8(u+16),f=e.getUint8(u+17);l||(l=[]),l.push({offset:d,length:h,chunkNumber:p,chunksTotal:f})}else if(v.USE_MPF&&R(e,u))t=e.getUint16(u+2),c=u+8;else{if(!G(e,u)){if(j(e,u)){u++;continue}break}t=e.getUint16(u+2)}u+=2+t}return{hasAppMarkers:u>2,fileDataOffset:n||i,jfifDataOffset:r,tiffHeaderOffset:o,iptcDataOffset:a,xmpChunks:s,iccChunks:l,mpfDataOffset:c}}(e),"jpeg","JPEG");if(v.USE_PNG&&function(e){return!!e&&a(e,0,8)===z}(e))return we(function(e,t){for(var n={hasAppMarkers:0},i=8;i+4+4<=e.byteLength;){if(v.USE_PNG_FILE&&J(e,i))n.hasAppMarkers=1,n.pngHeaderOffset=i+8;else if(v.USE_XMP&&Q(e,i)){var r=re(e,i);void 0!==r&&(n.hasAppMarkers=1,n.xmpChunks=[{dataOffset:r,length:e.getUint32(i+0)-(r-(i+8))}])}else if(ee(e,i,t)){n.hasAppMarkers=1;var o=a(e,i+4,4);n.pngTextChunks||(n.pngTextChunks=[]),n.pngTextChunks.push({length:e.getUint32(i+0),type:o,offset:i+8})}else if(te(e,i))n.hasAppMarkers=1,n.tiffHeaderOffset=i+8;else if(v.USE_ICC&&t&&ne(e,i)){n.hasAppMarkers=1;var s=e.getUint32(i+0),l=i+8,c=oe(e,l),u=c.profileName,d=c.compressionMethod,h=c.compressedProfileOffset;n.iccChunks||(n.iccChunks=[]),n.iccChunks.push({offset:h,length:s-(h-l),chunkNumber:1,chunksTotal:1,profileName:u,compressionMethod:d})}else ie(e,i)&&(n.hasAppMarkers=1,n.pngChunkOffsets||(n.pngChunkOffsets=[]),n.pngChunkOffsets.push(i+0));i+=e.getUint32(i+0)+4+4+4}return n}(e,t),"png","PNG");if(v.USE_HEIC&&function(e){if(!e)return 0;try{var t=he(e,0);return t&&-1!==["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"].indexOf(t.majorBrand)}catch(e){return 0}}(e))return we(function(e){return pe(e)}(e),"heic","HEIC");if(v.USE_AVIF&&function(e){if(!e)return 0;try{var t=he(e,0);return t&&"avif"===t.majorBrand}catch(e){return 0}}(e))return we(function(e){return pe(e)}(e),"avif","AVIF");if(v.USE_WEBP&&function(e){return!!e&&"RIFF"===a(e,0,4)&&"WEBP"===a(e,8,4)}(e))return we(function(e){for(var t,n,i,r,o=12,s=0;o+8<e.byteLength;){var l=a(e,o,4),c=e.getUint32(o+4,1);v.USE_EXIF&&"EXIF"===l?(s=1,t="Exif\0\0"===a(e,o+8,6)?o+8+6:o+8):v.USE_XMP&&"XMP "===l?(s=1,n=[{dataOffset:o+8,length:c}]):v.USE_ICC&&"ICCP"===l?(s=1,i=[{offset:o+8,length:c,chunkNumber:1,chunksTotal:1}]):"VP8X"===l&&(s=1,r=o+8),o+=8+(c%2==0?c:c+1)}return{hasAppMarkers:s,tiffHeaderOffset:t,xmpChunks:n,iccChunks:i,vp8xChunkOffset:r}}(e),"webp","WebP");if(v.USE_GIF&&function(e){return!!e&&ve.includes(a(e,0,6))}(e))return we({gifHeaderOffset:0},"gif","GIF");if(v.USE_XMP&&function(e){return!!e&&a(e,0,15)===be}(e))return we(function(e){var t=[];return t.push({dataOffset:0,length:e.byteLength}),{xmpChunks:t}}(e),"xml","XML");throw Error("Invalid image format")}};function we(e,t,n){return d({},e,{fileType:{value:t,description:n}})}var _e={ApertureValue:function(e){return Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},ColorSpace:function(e){return 1===e?"sRGB":65535===e?"Uncalibrated":"Unknown"},ComponentsConfiguration:function(e){return e.map(function(e){return 49===e?"Y":50===e?"Cb":51===e?"Cr":52===e?"R":53===e?"G":54===e?"B":void 0}).join("")},Contrast:function(e){return 0===e?"Normal":1===e?"Soft":2===e?"Hard":"Unknown"},CustomRendered:function(e){return 0===e?"Normal process":1===e?"Custom process":"Unknown"},ExposureMode:function(e){return 0===e?"Auto exposure":1===e?"Manual exposure":2===e?"Auto bracket":"Unknown"},ExposureProgram:function(e){return 0===e?"Undefined":1===e?"Manual":2===e?"Normal program":3===e?"Aperture priority":4===e?"Shutter priority":5===e?"Creative program":6===e?"Action program":7===e?"Portrait mode":8===e?"Landscape mode":9===e?"Bulb":"Unknown"},ExposureTime:function(e){if(e[0]/e[1]>.25){var t=e[0]/e[1];return Number.isInteger(t)?""+t:t.toFixed(1)}return 0!==e[0]?"1/".concat(Math.round(e[1]/e[0])):"0/".concat(e[1])},FNumber:function(e){return"f/".concat(Number(e[0]/e[1]).toFixed(1))},FocalLength:function(e){return e[0]/e[1]+" mm"},FocalPlaneResolutionUnit:function(e){return 2===e?"inches":3===e?"centimeters":4===e?"millimeters":"Unknown"},LightSource:function(e){return 1===e?"Daylight":2===e?"Fluorescent":3===e?"Tungsten (incandescent light)":4===e?"Flash":9===e?"Fine weather":10===e?"Cloudy weather":11===e?"Shade":12===e?"Daylight fluorescent (D 5700 – 7100K)":13===e?"Day white fluorescent (N 4600 – 5400K)":14===e?"Cool white fluorescent (W 3900 – 4500K)":15===e?"White fluorescent (WW 3200 – 3700K)":17===e?"Standard light A":18===e?"Standard light B":19===e?"Standard light C":20===e?"D55":21===e?"D65":22===e?"D75":23===e?"D50":24===e?"ISO studio tungsten":255===e?"Other light source":"Unknown"},MeteringMode:function(e){return 1===e?"Average":2===e?"CenterWeightedAverage":3===e?"Spot":4===e?"MultiSpot":5===e?"Pattern":6===e?"Partial":255===e?"Other":"Unknown"},ResolutionUnit:function(e){return 2===e?"inches":3===e?"centimeters":"Unknown"},Saturation:function(e){return 0===e?"Normal":1===e?"Low saturation":2===e?"High saturation":"Unknown"},FocalLengthIn35mmFilm:function(e){return 0===e?"Unknown":e+" mm"},SceneCaptureType:function(e){return 0===e?"Standard":1===e?"Landscape":2===e?"Portrait":3===e?"Night scene":"Unknown"},Sharpness:function(e){return 0===e?"Normal":1===e?"Soft":2===e?"Hard":"Unknown"},ShutterSpeedValue:function(e){var t=Math.pow(2,e[0]/e[1]);return t<=1?"".concat(Math.round(1/t)):"1/".concat(Math.round(t))},WhiteBalance:function(e){return 0===e?"Auto white balance":1===e?"Manual white balance":"Unknown"},XResolution:function(e){return""+Math.round(e[0]/e[1])},YResolution:function(e){return""+Math.round(e[0]/e[1])}},xe={11:"ProcessingSoftware",254:{name:"SubfileType",description:function(e){return{0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"}[e]||"Unknown"}},255:{name:"OldSubfileType",description:function(e){return{0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"}[e]||"Unknown"}},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:function(e){return{1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"}[e]||"Unknown"}},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:function(e){return{1:"Normal",2:"Reversed"}[e]||"Unknown"}},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:function(e){return 1===e?"top-left":2===e?"top-right":3===e?"bottom-right":4===e?"bottom-left":5===e?"left-top":6===e?"right-top":7===e?"right-bottom":8===e?"left-bottom":"Undefined"}},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:_e.XResolution},283:{name:"YResolution",description:_e.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:function(e){return""+Math.round(e[0]/e[1])}},287:{name:"YPosition",description:function(e){return""+Math.round(e[0]/e[1])}},290:{name:"GrayResponseUnit",description:function(e){return{1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"}[e]||"Unknown"}},296:{name:"ResolutionUnit",description:_e.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:function(e){return e.map(function(e){return"".concat(e[0],"/").concat(e[1])}).join(", ")}},319:{name:"PrimaryChromaticities",description:function(e){return e.map(function(e){return"".concat(e[0],"/").concat(e[1])}).join(", ")}},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:function(e){return{1:"CMYK",2:"Not CMYK"}[e]||"Unknown"}},337:"TargetPrinter",338:{name:"ExtraSamples",description:function(e){return{0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"}[e]||"Unknown"}},339:{name:"SampleFormat",description:function(e){var t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(function(e){return t[e]||"Unknown"}).join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:function(e){return e.map(function(e){return""+e[0]/e[1]}).join("/")}},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:function(e){return 1===e?"centered":2===e?"co-sited":"undefined "+e}},532:{name:"ReferenceBlackWhite",description:function(e){return e.map(function(e){return""+e[0]/e[1]}).join(", ")}},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:function(e){return e.join("; ")}},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:Se},40092:{name:"XPComment",description:Se},40093:{name:"XPAuthor",description:Se},40094:{name:"XPKeywords",description:Se},40095:{name:"XPSubject",description:Se},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:function(e){return{0:"Unsafe",1:"Safe"}[e]||"Unknown"}},50778:{name:"CalibrationIlluminant1",description:_e.LightSource},50779:{name:"CalibrationIlluminant2",description:_e.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:function(e){return{0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"}[e]||"Unknown"}},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:function(e){return{1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"}[e]||"Unknown"}},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:function(e){return{0:"Linear",1:"sRGB"}[e]||"Unknown"}},51108:{name:"ProfileLookTableEncoding",description:function(e){return{0:"Linear",1:"sRGB"}[e]||"Unknown"}},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:function(e){return{0:"Auto",1:"None"}[e]||"Unknown"}},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};function Se(e){return new TextDecoder("utf-16").decode(new Uint8Array(e)).replace(/\u0000+$/,"")}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Ce={0:{name:"GPSVersionID",description:function(e){return 2===e[0]&&2===e[1]&&0===e[2]&&0===e[3]?"Version 2.2":"Unknown"}},1:{name:"GPSLatitudeRef",description:function(e){var t=e.join("");return"N"===t?"North latitude":"S"===t?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:w},3:{name:"GPSLongitudeRef",description:function(e){var t=e.join("");return"E"===t?"East longitude":"W"===t?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:w},5:{name:"GPSAltitudeRef",description:function(e){return 0===e?"Sea level":1===e?"Sea level reference (negative value)":"Unknown"}},6:{name:"GPSAltitude",description:function(e){return e[0]/e[1]+" m"}},7:{name:"GPSTimeStamp",description:function(e){return e.map(function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=e)||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,o,a=[],s=1,l=0;try{for(r=(t=t.call(e)).next;!(s=(n=r.call(t)).done)&&(a.push(n.value),2!==a.length);s=1);}catch(e){l=1,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(t)||function(e){if(e){if("string"==typeof e)return Ae(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ae(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0]/n[1];return/^\d(\.|$)/.test("".concat(i))?"0".concat(i):i}).join(":")}},8:"GPSSatellites",9:{name:"GPSStatus",description:function(e){var t=e.join("");return"A"===t?"Measurement in progress":"V"===t?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:function(e){var t=e.join("");return"2"===t?"2-dimensional measurement":"3"===t?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:function(e){var t=e.join("");return"K"===t?"Kilometers per hour":"M"===t?"Miles per hour":"N"===t?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:function(e){var t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:function(e){var t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:function(e){var t=e.join("");return"N"===t?"North latitude":"S"===t?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:function(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}},21:{name:"GPSDestLongitudeRef",description:function(e){var t=e.join("");return"E"===t?"East longitude":"W"===t?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:function(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}},23:{name:"GPSDestBearingRef",description:function(e){var t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:function(e){var t=e.join("");return"K"===t?"Kilometers":"M"===t?"Miles":"N"===t?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:y},28:{name:"GPSAreaInformation",description:y},29:"GPSDateStamp",30:{name:"GPSDifferential",description:function(e){return 0===e?"Measurement without differential correction":1===e?"Differential correction applied":"Unknown"}},31:"GPSHPositioningError"},Ee={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:function(e){return b(e)}},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},ke={45056:{name:"MPFVersion",description:function(e){return b(e)}},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Pe(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:1,configurable:1,writable:1}):e[t]=n,e}var De=d({},xe,{33434:{name:"ExposureTime",description:_e.ExposureTime},33437:{name:"FNumber",description:_e.FNumber},34850:{name:"ExposureProgram",description:_e.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:function(){return"[Raw OECF table data]"}},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:function(e){return{1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"}[e]||"Unknown"}},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:function(e){return b(e)}},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:_e.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:_e.ShutterSpeedValue},37378:{name:"ApertureValue",description:_e.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:function(e){return Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)}},37382:{name:"SubjectDistance",description:function(e){return e[0]/e[1]+" m"}},37383:{name:"MeteringMode",description:_e.MeteringMode},37384:{name:"LightSource",description:_e.LightSource},37385:{name:"Flash",description:function(e){return 0===e?"Flash did not fire":1===e?"Flash fired":5===e?"Strobe return light not detected":7===e?"Strobe return light detected":9===e?"Flash fired, compulsory flash mode":13===e?"Flash fired, compulsory flash mode, return light not detected":15===e?"Flash fired, compulsory flash mode, return light detected":16===e?"Flash did not fire, compulsory flash mode":24===e?"Flash did not fire, auto mode":25===e?"Flash fired, auto mode":29===e?"Flash fired, auto mode, return light not detected":31===e?"Flash fired, auto mode, return light detected":32===e?"No flash function":65===e?"Flash fired, red-eye reduction mode":69===e?"Flash fired, red-eye reduction mode, return light not detected":71===e?"Flash fired, red-eye reduction mode, return light detected":73===e?"Flash fired, compulsory flash mode, red-eye reduction mode":77===e?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":79===e?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":89===e?"Flash fired, auto mode, red-eye reduction mode":93===e?"Flash fired, auto mode, return light not detected, red-eye reduction mode":95===e?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"}},37386:{name:"FocalLength",description:_e.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:function(e){return{C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"}[e]||"Unknown"}},37395:"ImageHistory",37396:{name:"SubjectArea",description:function(e){return 2===e.length?"Location; X: ".concat(e[0],", Y: ").concat(e[1]):3===e.length?"Circle; X: ".concat(e[0],", Y: ").concat(e[1],", diameter: ").concat(e[2]):4===e.length?"Rectangle; X: ".concat(e[0],", Y: ").concat(e[1],", width: ").concat(e[2],", height: ").concat(e[3]):"Unknown"}},37500:{name:"MakerNote",description:function(){return"[Raw maker note data]"}},37510:{name:"UserComment",description:y},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:function(e){return e[0]/e[1]+" °C"}},37889:{name:"Humidity",description:function(e){return e[0]/e[1]+" %"}},37890:{name:"Pressure",description:function(e){return e[0]/e[1]+" hPa"}},37891:{name:"WaterDepth",description:function(e){return e[0]/e[1]+" m"}},37892:{name:"Acceleration",description:function(e){return e[0]/e[1]+" mGal"}},37893:{name:"CameraElevationAngle",description:function(e){return e[0]/e[1]+" °"}},40960:{name:"FlashpixVersion",description:function(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}},40961:{name:"ColorSpace",description:_e.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:function(){return"[Raw SFR table data]"}},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:_e.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=e)||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,o,a=[],s=1,l=0;try{for(r=(t=t.call(e)).next;!(s=(n=r.call(t)).done)&&(a.push(n.value),2!==a.length);s=1);}catch(e){l=1,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(t)||function(e){if(e){if("string"==typeof e)return Te(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Te(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],r=n[1];return"X: ".concat(i,", Y: ").concat(r)}},41493:"ExposureIndex",41495:{name:"SensingMethod",description:function(e){return 1===e?"Undefined":2===e?"One-chip color area sensor":3===e?"Two-chip color area sensor":4===e?"Three-chip color area sensor":5===e?"Color sequential area sensor":7===e?"Trilinear sensor":8===e?"Color sequential linear sensor":"Unknown"}},41728:{name:"FileSource",description:function(e){return 3===e?"DSC":"Unknown"}},41729:{name:"SceneType",description:function(e){return 1===e?"A directly photographed image":"Unknown"}},41730:{name:"CFAPattern",description:function(){return"[Raw CFA pattern table data]"}},41985:{name:"CustomRendered",description:_e.CustomRendered},41986:{name:"ExposureMode",description:_e.ExposureMode},41987:{name:"WhiteBalance",description:_e.WhiteBalance},41988:{name:"DigitalZoomRatio",description:function(e){return 0===e[0]?"Digital zoom was not used":""+e[0]/e[1]}},41989:{name:"FocalLengthIn35mmFilm",description:_e.FocalLengthIn35mmFilm},41990:{name:"SceneCaptureType",description:_e.SceneCaptureType},41991:{name:"GainControl",description:function(e){return 0===e?"None":1===e?"Low gain up":2===e?"High gain up":3===e?"Low gain down":4===e?"High gain down":"Unknown"}},41992:{name:"Contrast",description:_e.Contrast},41993:{name:"Saturation",description:_e.Saturation},41994:{name:"Sharpness",description:_e.Sharpness},41995:{name:"DeviceSettingDescription",description:function(){return"[Raw device settings table data]"}},41996:{name:"SubjectDistanceRange",description:function(e){return 1===e?"Macro":2===e?"Close view":3===e?"Distant view":"Unknown"}},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:function(e){var t=parseFloat((e[0][0]/e[0][1]).toFixed(5)),n=parseFloat((e[1][0]/e[1][1]).toFixed(5)),i="".concat(t,"-").concat(n," mm");if(0===e[3][1])return"".concat(i," f/?");var r=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return"".concat(i," f/").concat(parseFloat(r.toFixed(5)))}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:function(e){return{1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}[e]||"Unknown"}},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"}),Oe="0th",Me="exif",Le="interoperability",Re="canon",Ne="pentax",Fe=Pe(Pe(Pe(Pe(Pe(Pe(Pe(Pe({},Oe,De),"1st",xe),Me,De),"gps",Ce),Le,Ee),"mpf",v.USE_MPF?ke:{}),Re,v.USE_MAKER_NOTES?{4:{name:"ShotInfo",description:function(e){return e}}}:{}),Ne,v.USE_MAKER_NOTES?{0:{name:"PentaxVersion",description:function(e){return e.join(".")}},5:"PentaxModelID",555:"LevelInfo"}:{}),Ue={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},Ve={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},Be={getAsciiValue:function(e){return e.map(function(e){return String.fromCharCode(e)})},getByteAt:$e,getAsciiAt:function(e,t){return e.getUint8(t)},getShortAt:function(e,t,n){return e.getUint16(t,n===x)},getLongAt:He,getRationalAt:function(e,t,n){return[He(e,t,n),He(e,t+4,n)]},getUndefinedAt:function(e,t){return $e(e,t)},getSlongAt:Ge,getSrationalAt:function(e,t,n){return[Ge(e,t,n),Ge(e,t+4,n)]},getIfdPointerAt:function(e,t,n){return He(e,t,n)},typeSizes:Ue,tagTypes:Ve,getTypeSize:function(e){if(void 0===Ve[e])throw Error("No such type found.");return Ue[Ve[e]]}};function $e(e,t){return e.getUint8(t)}function He(e,t,n){return e.getUint32(t,n===x)}function Ge(e,t,n){return e.getInt32(t,n===x)}var je={1:Be.getByteAt,2:Be.getAsciiAt,3:Be.getShortAt,4:Be.getLongAt,5:Be.getRationalAt,7:Be.getUndefinedAt,9:Be.getSlongAt,10:Be.getSrationalAt,13:Be.getIfdPointerAt};function ze(e,t,n){return t+Be.getLongAt(e,t+4,n)}function qe(e,t,n,i,r,o){var a=Be.getTypeSize("SHORT"),s={},l=function(e,t,n){return t+Be.getTypeSize("SHORT")<=e.byteLength?Be.getShortAt(e,t,n):0}(e,i,r);i+=a;for(var c=0;c<l&&!(i+12>e.byteLength);c++){var u=Ye(e,t,n,i,r,o);void 0!==u&&(s[u.name]={id:u.id,value:u.value,description:u.description},("MakerNote"===u.name||t===Ne&&"LevelInfo"===u.name)&&(s[u.name].__offset=u.__offset)),i+=12}if(v.USE_THUMBNAIL&&i<e.byteLength-Be.getTypeSize("LONG")){var d=Be.getLongAt(e,i,r);0!==d&&t===Oe&&(s.Thumbnail=qe(e,"1st",n,n+d,r,o))}return s}function Ye(e,t,n,i,r,o){var a,s,l=Be.getTypeSize("SHORT"),c=l+Be.getTypeSize("SHORT"),u=c+Be.getTypeSize("LONG"),d=Be.getShortAt(e,i,r),h=Be.getShortAt(e,i+l,r),p=Be.getLongAt(e,i+c,r);if(void 0!==Be.typeSizes[h]&&(o||void 0!==Fe[t][d])){a=function(e,t){return Be.typeSizes[e]*t<=Be.getTypeSize("LONG")}(h,p)?We(e,s=i+u,h,p,r):function(e,t,n,i,r){return t+n+Be.typeSizes[i]*r<=e.byteLength}(e,n,s=Be.getLongAt(e,i+u,r),h,p)?We(e,n+s,h,p,r,33723===d):"<faulty value>",h===Be.tagTypes.ASCII&&(a=function(e){try{return e.map(function(e){return decodeURIComponent(escape(e))})}catch(t){return e}}(a=function(e){for(var t=[],n=0,i=0;i<e.length;i++)"\0"!==e[i]?(void 0===t[n]&&(t[n]=""),t[n]+=e[i]):n++;return t}(a)));var f="undefined-".concat(d),m=a;if(void 0!==Fe[t][d])if(void 0!==Fe[t][d].name&&void 0!==Fe[t][d].description){f=Fe[t][d].name;try{m=Fe[t][d].description(a)}catch(e){m=Ke(a)}}else h===Be.tagTypes.RATIONAL||h===Be.tagTypes.SRATIONAL?(f=Fe[t][d],m=""+a[0]/a[1]):(f=Fe[t][d],m=Ke(a));return{id:d,name:f,value:a,description:m,__offset:s}}}function We(e,t,n,i,r){var o=[];arguments.length>5&&void 0!==arguments[5]&&arguments[5]&&(i*=Be.typeSizes[n],n=Be.tagTypes.BYTE);for(var a=0;a<i;a++)o.push(je[n](e,t,r)),t+=Be.typeSizes[n];return n===Be.tagTypes.ASCII?o=Be.getAsciiValue(o):1===o.length&&(o=o[0]),o}function Ke(e){return e instanceof Array?e.join(", "):e}var Xe="Exif IFD Pointer",Ze="GPS Info IFD Pointer",Je="Interoperability IFD Pointer",Qe={read:function(e,t,n){var i=S(e,t),r=function(e,t,n,i){return qe(e,Oe,t,ze(e,t,n),n,i)}(e,t,i,n);return{tags:r=nt(r=tt(r=et(r,e,t,i,n),e,t,i,n),e,t,i,n),byteOrder:i}}};function et(e,t,n,i,r){return void 0!==e[Xe]?d(e,qe(t,Me,n,n+e[Xe].value,i,r)):e}function tt(e,t,n,i,r){return void 0!==e[Ze]?d(e,qe(t,"gps",n,n+e[Ze].value,i,r)):e}function nt(e,t,n,i,r){return void 0!==e[Je]?d(e,qe(t,Le,n,n+e[Je].value,i,r)):e}var it={read:function(e,t,n){var i=S(e,t);return function(e,t,n,i){if(!n.MPEntry)return n;for(var r=[],o=0;o<Math.ceil(n.MPEntry.value.length/rt);o++){r[o]={};var a=ot(n.MPEntry.value,o*rt,Be.getTypeSize("LONG"),i);r[o].ImageFlags=at(a),r[o].ImageFormat=st(a),r[o].ImageType=lt(a);var s=ot(n.MPEntry.value,o*rt+4,Be.getTypeSize("LONG"),i);r[o].ImageSize={value:s,description:""+s};var l=ct(o,n.MPEntry,i,t);r[o].ImageOffset={value:l,description:""+l};var c=ot(n.MPEntry.value,o*rt+12,Be.getTypeSize("SHORT"),i);r[o].DependentImage1EntryNumber={value:c,description:""+c};var u=ot(n.MPEntry.value,o*rt+14,Be.getTypeSize("SHORT"),i);r[o].DependentImage2EntryNumber={value:u,description:""+u},r[o].image=e.buffer.slice(l,l+s),h(r[o],"base64",function(){return p(this.image)})}return n.Images=r,n}(e,t,qe(e,"mpf",t,ze(e,t,i),i,n),i)}},rt=16;function ot(e,t,n,i){if(i===x){for(var r=0,o=0;o<n;o++)r+=e[t+o]<<8*o;return r}for(var a=0,s=0;s<n;s++)a+=e[t+s]<<8*(n-1-s);return a}function at(e){var t=[e>>31&1,e>>30&1,e>>29&1],n=[];return t[0]&&n.push("Dependent Parent Image"),t[1]&&n.push("Dependent Child Image"),t[2]&&n.push("Representative Image"),{value:t,description:n.join(", ")||"None"}}function st(e){var t=e>>24&7;return{value:t,description:0===t?"JPEG":"Unknown"}}function lt(e){var t=16777215&e;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function ct(e,t,n,i){return function(e){return 0===e}(e)?0:ot(t.value,e*rt+8,Be.getTypeSize("LONG"),n)+i}var ut={read:function(e,t){var n=function(e,t){return Be.getShortAt(e,t)}(e,t),i=function(e,t,n){if(!(8>n)){var i=Be.getByteAt(e,t+7);return{value:i,description:""+i}}}(e,t,n);return{"Bits Per Sample":dt(e,t,n),"Image Height":ht(e,t,n),"Image Width":pt(e,t,n),"Color Components":i,Subsampling:i&&ft(e,t,i.value,n)}}};function dt(e,t,n){if(!(3>n)){var i=Be.getByteAt(e,t+2);return{value:i,description:""+i}}}function ht(e,t,n){if(!(5>n)){var i=Be.getShortAt(e,t+3);return{value:i,description:"".concat(i,"px")}}}function pt(e,t,n){if(!(7>n)){var i=Be.getShortAt(e,t+5);return{value:i,description:"".concat(i,"px")}}}function ft(e,t,n,i){if(!(8+3*n>i)){for(var r=[],o=0;o<n;o++){var a=t+8+3*o;r.push([Be.getByteAt(e,a),Be.getByteAt(e,a+1),Be.getByteAt(e,a+2)])}return{value:r,description:r.length>1?mt(r)+gt(r):""}}}function mt(e){var t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(function(e){return t[e[0]]}).join("")}function gt(e){var t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return 0===e.length||void 0===e[0][1]||void 0===t[e[0][1]]?"":t[e[0][1]]}var vt={read:function(e,t){var n=function(e,t){return Be.getShortAt(e,t)}(e,t),i=function(e,t,n){if(!(15>n)){var i=Be.getByteAt(e,t+14);return{value:i,description:"".concat(i,"px")}}}(e,t,n),r=function(e,t,n){if(!(16>n)){var i=Be.getByteAt(e,t+15);return{value:i,description:"".concat(i,"px")}}}(e,t,n),o={"JFIF Version":bt(e,t,n),"Resolution Unit":yt(e,t,n),XResolution:_t(e,t,n),YResolution:xt(e,t,n),"JFIF Thumbnail Width":i,"JFIF Thumbnail Height":r};if(void 0!==i&&void 0!==r){var a=function(e,t,n,i){if(!(0===n||16+n>i))return{value:e.buffer.slice(t+16,t+16+n),description:"<24-bit RGB pixel data>"}}(e,t,3*i.value*r.value,n);a&&(o["JFIF Thumbnail"]=a)}for(var s in o)void 0===o[s]&&delete o[s];return o}};function bt(e,t,n){if(!(9>n)){var i=Be.getByteAt(e,t+7),r=Be.getByteAt(e,t+7+1);return{value:256*i+r,description:i+"."+r}}}function yt(e,t,n){if(!(10>n)){var i=Be.getByteAt(e,t+9);return{value:i,description:wt(i)}}}function wt(e){return 0===e?"None":1===e?"inches":2===e?"cm":"Unknown"}function _t(e,t,n){if(!(12>n)){var i=Be.getShortAt(e,t+10);return{value:i,description:""+i}}}function xt(e,t,n){if(!(14>n)){var i=Be.getShortAt(e,t+12);return{value:i,description:""+i}}}var St={iptc:{256:{name:"Model Version",description:function(e){return""+((e[0]<<8)+e[1])}},261:{name:"Destination",repeatable:1},276:{name:"File Format",description:function(e){return""+((e[0]<<8)+e[1])}},278:{name:"File Format Version",description:function(e){return""+((e[0]<<8)+e[1])}},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:Tt},336:{name:"Time Sent",description:At},346:{name:"Coded Character Set",description:Ct,encoding_name:Ct},356:"UNO",376:{name:"ARM Identifier",description:function(e){return""+((e[0]<<8)+e[1])}},378:{name:"ARM Version",description:function(e){return""+((e[0]<<8)+e[1])}},512:{name:"Record Version",description:function(e){return""+((e[0]<<8)+e[1])}},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:function(e){return"01"===b(e)?"Additional Language":"Unknown"}},522:"Urgency",524:{name:"Subject Reference",repeatable:1,description:function(e){var t=b(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:1},534:"Fixture Identifier",537:{name:"Keywords",repeatable:1},538:{name:"Content Location Code",repeatable:1},539:{name:"Content Location Name",repeatable:1},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:function(e){var t=b(e);return"01"===t?"Object Kill":"02"===t?"Object Replace":"03"===t?"Object Append":"04"===t?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:1},559:{name:"Reference Date",repeatable:1},562:{name:"Reference Number",repeatable:1},567:{name:"Date Created",description:Tt},572:{name:"Time Created",description:At},574:{name:"Digital Creation Date",description:Tt},575:{name:"Digital Creation Time",description:At},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:function(e){var t=b(e);return"a"===t?"morning":"p"===t?"evening":"b"===t?"both":"Unknown"}},592:{name:"By-line",repeatable:1},597:{name:"By-line Title",repeatable:1},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:1},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:1},637:{name:"Rasterized Caption",description:function(e){return e}},642:"Image Type",643:{name:"Image Orientation",description:function(e){var t=b(e);return"P"===t?"Portrait":"L"===t?"Landscape":"S"===t?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:function(e){var t=b(e),n=t.charAt(0),i=t.charAt(1),r="";return"1"===n?r+="Mono":"2"===n&&(r+="Stereo"),"A"===i?r+=", actuality":"C"===i?r+=", question and answer session":"M"===i?r+=", music, transmitted by itself":"Q"===i?r+=", response to a question":"R"===i?r+=", raw sound":"S"===i?r+=", scener":"V"===i?r+=", voicer":"W"===i&&(r+=", wrap"),""!==r?r:t}},663:{name:"Audio Sampling Rate",description:function(e){return parseInt(b(e),10)+" Hz"}},664:{name:"Audio Sampling Resolution",description:function(e){var t=parseInt(b(e),10);return t+(1===t?" bit":" bits")}},665:{name:"Audio Duration",description:function(e){var t=b(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:function(e){return 2===e.length?"ObjectData Preview File Format":"Record 2 destination"},description:function(e){if(2===e.length){var t=(e[0]<<8)+e[1];return 0===t?"No ObjectData":1===t?"IPTC-NAA Digital Newsphoto Parameter Record":2===t?"IPTC7901 Recommended Message Format":3===t?"Tagged Image File Format (Adobe/Aldus Image data)":4===t?"Illustrator (Adobe Graphics data)":5===t?"AppleSingle (Apple Computer Inc)":6===t?"NAA 89-3 (ANPA 1312)":7===t?"MacBinary II":8===t?"IPTC Unstructured Character Oriented File Format (UCOFF)":9===t?"United Press International ANPA 1312 variant":10===t?"United Press International Down-Load Message":11===t?"JPEG File Interchange (JFIF)":12===t?"Photo-CD Image-Pac (Eastman Kodak)":13===t?"Microsoft Bit Mapped Graphics File [*.BMP]":14===t?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":15===t?"Audio plus Moving Video [*.AVI] (Microsoft)":16===t?"PC DOS/Windows Executable Files [*.COM][*.EXE]":17===t?"Compressed Binary File [*.ZIP] (PKWare Inc)":18===t?"Audio Interchange File Format AIFF (Apple Computer Inc)":19===t?"RIFF Wave (Microsoft Corporation)":20===t?"Freehand (Macromedia/Aldus)":21===t?'Hypertext Markup Language "HTML" (The Internet Society)':22===t?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":23===t?"MPEG 2 Audio Layer 3, ISO/IEC":24===t?"Portable Document File (*.PDF) Adobe":25===t?"News Industry Text Format (NITF)":26===t?"Tape Archive (*.TAR)":27===t?"Tidningarnas Telegrambyrå NITF version (TTNITF DTD)":28===t?"Ritzaus Bureau NITF version (RBNITF DTD)":29===t?"Corel Draw [*.CDR]":"Unknown format ".concat(t)}return b(e)}},713:{name:"ObjectData Preview File Format Version",description:function(e,t){var n={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},i=b(e);if(t["ObjectData Preview File Format"]){var r=b(t["ObjectData Preview File Format"].value);if(n[r]&&n[r][i])return n[r][i]}return i}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:function(e){return e[0].toString()}},1812:{name:"Max Subfile Size",description:function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1882:{name:"ObjectData Size Announced",description:function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}}}};function Tt(e){var t=b(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function At(e){var t=b(e),n=t;return t.length>=6&&(n=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),11===t.length&&(n+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),n}function Ct(e){var t=b(e);return"%G"===t?"UTF-8":"%5"===t?"Windows-1252":"%/G"===t?"UTF-8 Level 1":"%/H"===t?"UTF-8 Level 2":"%/I"===t?"UTF-8 Level 3":"/A"===t?"ISO-8859-1":"/B"===t?"ISO-8859-2":"/C"===t?"ISO-8859-3":"/D"===t?"ISO-8859-4":"/@"===t?"ISO-8859-5":"/G"===t?"ISO-8859-6":"/F"===t?"ISO-8859-7":"/H"===t?"ISO-8859-8":"Unknown"}var Et=function(e,t){var n=function(){if("undefined"!=typeof TextDecoder)return TextDecoder}();if(void 0!==n&&void 0!==e)try{return new n(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch(e){}return function(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}(t.map(function(e){return String.fromCharCode(e)}).join(""))},kt={read:function(e,t,n){try{if(Array.isArray(e))return Ot(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,n);var i=function(e,t){for(;t+12<=e.byteLength;){var n=It(e,t);if(Pt(n))return{naaBlock:n,dataOffset:t+n.headerSize};t+=n.headerSize+n.size+Dt(n)}throw Error("No IPTC NAA resource block.")}(e,t);return Ot(e,i.naaBlock,i.dataOffset,n)}catch(e){return{}}}};function It(e,t){if(943868237!==e.getUint32(t,0))throw Error("Not an IPTC resource block.");var n=e.getUint8(t+4+2),i=(n%2==0?n+1:n)+1;return{headerSize:6+i+4,type:e.getUint16(t+4),size:e.getUint32(t+4+2+i)}}function Pt(e){return 1028===e.type}function Dt(e){return e.size%2!=0?1:0}function Ot(e,t,n,i){for(var r={},o=void 0,a=n+t.size;n<a&&n<e.byteLength;){var s=Mt(e,n,r,o,i),l=s.tag,c=s.tagSize;if(null===l)break;l&&("encoding"in l&&(o=l.encoding),void 0===r[l.name]||void 0===l.repeatable?r[l.name]={id:l.id,value:l.value,description:l.description}:(r[l.name]instanceof Array||(r[l.name]=[{id:r[l.name].id,value:r[l.name].value,description:r[l.name].description}]),r[l.name].push({id:l.id,value:l.value,description:l.description}))),n+=5+c}return r}function Mt(e,t,n,i,r){if(function(e,t){return 28!==e.getUint8(t)}(e,t))return{tag:null,tagSize:0};var o=e.getUint16(t+1),a=e.getUint16(t+3);if(!r&&!St.iptc[o])return{tag:void 0,tagSize:a};var s=function(e,t,n){for(var i=[],r=0;r<n;r++)i.push(e.getUint8(t+r));return i}(e,t+5,a),l={id:o,name:Lt(St.iptc[o],o,s),value:s,description:Rt(St.iptc[o],s,n,i)};return function(e){return St.iptc[e]&&St.iptc[e].repeatable}(o)&&(l.repeatable=1),function(e){return St.iptc[e]&&void 0!==St.iptc[e].encoding_name}(o)&&(l.encoding=St.iptc[o].encoding_name(s)),{tag:l,tagSize:a}}function Lt(e,t,n){return e?function(e){return"string"==typeof e}(e)?e:function(e){return"function"==typeof e.name}(e)?e.name(n):e.name:"undefined-".concat(t)}function Rt(e,t,n,i){if(function(e){return e&&void 0!==e.description}(e))try{return e.description(t,n)}catch(e){}return function(e,t){return e&&t instanceof Array}(e,t)?Et(i,t):t}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Ft={"tiff:Orientation":function(e){return"1"===e?"Horizontal (normal)":"2"===e?"Mirror horizontal":"3"===e?"Rotate 180":"4"===e?"Mirror vertical":"5"===e?"Mirror horizontal and rotate 270 CW":"6"===e?"Rotate 90 CW":"7"===e?"Mirror horizontal and rotate 90 CW":"8"===e?"Rotate 270 CW":e},"tiff:ResolutionUnit":function(e){return _e.ResolutionUnit(parseInt(e,10))},"tiff:XResolution":function(e){return Ut(_e.XResolution,e)},"tiff:YResolution":function(e){return Ut(_e.YResolution,e)},"exif:ApertureValue":function(e){return Ut(_e.ApertureValue,e)},"exif:GPSLatitude":Bt,"exif:GPSLongitude":Bt,"exif:FNumber":function(e){return Ut(_e.FNumber,e)},"exif:FocalLength":function(e){return Ut(_e.FocalLength,e)},"exif:FocalPlaneResolutionUnit":function(e){return _e.FocalPlaneResolutionUnit(parseInt(e,10))},"exif:ColorSpace":function(e){return _e.ColorSpace(function(e){return"0x"===e.substring(0,2)?parseInt(e.substring(2),16):parseInt(e,10)}(e))},"exif:ComponentsConfiguration":function(e,t){if(/^\d, \d, \d, \d$/.test(t)){var n=t.split(", ").map(function(e){return e.charCodeAt(0)});return _e.ComponentsConfiguration(n)}return t},"exif:Contrast":function(e){return _e.Contrast(parseInt(e,10))},"exif:CustomRendered":function(e){return _e.CustomRendered(parseInt(e,10))},"exif:ExposureMode":function(e){return _e.ExposureMode(parseInt(e,10))},"exif:ExposureProgram":function(e){return _e.ExposureProgram(parseInt(e,10))},"exif:ExposureTime":function(e){return Vt(e)?_e.ExposureTime(e.split("/").map(function(e){return parseInt(e,10)})):e},"exif:MeteringMode":function(e){return _e.MeteringMode(parseInt(e,10))},"exif:Saturation":function(e){return _e.Saturation(parseInt(e,10))},"exif:SceneCaptureType":function(e){return _e.SceneCaptureType(parseInt(e,10))},"exif:Sharpness":function(e){return _e.Sharpness(parseInt(e,10))},"exif:ShutterSpeedValue":function(e){return Ut(_e.ShutterSpeedValue,e)},"exif:WhiteBalance":function(e){return _e.WhiteBalance(parseInt(e,10))}};function Ut(e,t){return Vt(t)?e(t.split("/")):t}function Vt(e){return/^-?\d+\/-?\d+$/.test(e)}function Bt(e){var t,n=function(e){if(Array.isArray(e))return e}(t=e.split(","))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,o,a=[],s=1,l=0;try{for(r=(t=t.call(e)).next;!(s=(n=r.call(t)).done)&&(a.push(n.value),2!==a.length);s=1);}catch(e){l=1,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(t)||function(e){if(e){if("string"==typeof e)return Nt(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Nt(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],r=n[1];if(void 0!==i&&void 0!==r){var o=parseFloat(i),a=parseFloat(r),s=r.charAt(r.length-1);if(!Number.isNaN(o)&&!Number.isNaN(a))return""+(o+a/60)+s}return e}var $t={xmp:"http://ns.adobe.com/xap/1.0/",tiff:"http://ns.adobe.com/tiff/1.0/",exif:"http://ns.adobe.com/exif/1.0/",dc:"http://purl.org/dc/elements/1.1/",xmpMM:"http://ns.adobe.com/xap/1.0/mm/",stEvt:"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#",stRef:"http://ns.adobe.com/xap/1.0/sType/ResourceRef#",photoshop:"http://ns.adobe.com/photoshop/1.0/"};function Ht(e){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(e)}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function jt(e){var t="function"==typeof Map?new Map:void 0;return jt=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(zt())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&qt(r,n.prototype),r}(e,arguments,Yt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:0,writable:1,configurable:1}}),qt(n,e)},jt(e)}function zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(zt=function(){return!!e})()}function qt(e,t){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qt(e,t)}function Yt(e){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yt(e)}var Wt={read:function(e,t,n){var i={};if("string"==typeof e)return Zt(i,e,n),i;var r,o=(r=function(e,t){if(0===t.length)return[];var n=[Xt(e,t.slice(0,1))];return t.length>1&&n.push(Xt(e,t.slice(1))),n}(e,t),function(e){if(Array.isArray(e))return e}(r)||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,o,a=[],s=1,l=0;try{for(r=(t=t.call(e)).next;!(s=(n=r.call(t)).done)&&(a.push(n.value),2!==a.length);s=1);}catch(e){l=1,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(r)||function(e){if(e){if("string"==typeof e)return Gt(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Gt(e,2):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],l=Zt(i,a,n);if(s){var c=Zt(i,s,n);l||c||(delete i._raw,Zt(i,Xt(e,t),n))}return i}},Kt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=Yt(t),function(e,t){if(t&&("object"==Ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zt()?Reflect.construct(t,n||[],Yt(e).constructor):t.apply(e,n))}(this,t,[e])).name="ParseError",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:1,configurable:1}}),Object.defineProperty(e,"prototype",{writable:0}),t&&qt(e,t)}(t,e),Object.defineProperty(n=t,"prototype",{writable:0}),n;var n}(jt(Error));function Xt(e,t){for(var n=t.reduce(function(e,t){return e+t.length},0),i=new Uint8Array(n),r=0,o=0;o<t.length;o++){var a=t[o],s=e.buffer.slice(a.dataOffset,a.dataOffset+a.length);i.set(new Uint8Array(s),r),r+=a.length}return new DataView(i.buffer)}function Zt(e,t,n){try{var i=function(e,t){var n=function(e){if(e)return e;if("undefined"!=typeof DOMParser)return new DOMParser;try{var t=require("@xmldom/xmldom");return new(0,t.DOMParser)({onError:t.onErrorStopParsing})}catch(e){return}}(t);if(!n)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),Error();var i="string"==typeof e?e:a(e,0,e.byteLength);return{doc:Jt(n,i.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")),raw:i}}(t,n),r=i.doc,o=i.raw;return e._raw=(e._raw||"")+o,d(e,nn(en(Qt(r),1))),1}catch(e){return 0}}function Jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{var i=e.parseFromString(t,"application/xml"),r=i.getElementsByTagName("parsererror");if(r.length>0)throw new Kt(r[0].textContent);return i}catch(i){if("ParseError"===i.name&&function(e){for(var t=["prefix is non-null and namespace is null","prefix not bound to a namespace","prefix inte bundet till en namnrymd",/Namespace prefix .+ is not defined/],n=0;n<t.length;n++)if(RegExp(t[n]).test(e.message))return 1;return 0}(i)&&!n)return Jt(e,function(e){var t=e.match(/<([A-Za-z_][A-Za-z0-9._-]*)([^>]*)>/);if(!t)return e;var n=t[1],i=function(e){for(var t,n=[],i=/xmlns:([\w-]+)=["'][^"']+["']/g;null!==(t=i.exec(e));)-1===n.indexOf(t[1])&&n.push(t[1]);return n}(e),r=function(e){for(var t,n=[],i=/\b([A-Za-z_][A-Za-z0-9._-]*):[A-Za-z_][A-Za-z0-9._-]*\b/g;null!==(t=i.exec(e));){var r=t[1];"xmlns"!==r&&"xml"!==r&&-1===n.indexOf(r)&&n.push(r)}return n}(e).filter(function(e){return-1===i.indexOf(e)});return 0===r.length?e:function(e,t,n){var i=RegExp("<"+t+"([^>]*)>");return e.replace(i,"<"+t+"$1"+n+">")}(e,n,function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=$t[i]||"http://fallback.namespace/"+i;t.push(" xmlns:"+i+'="'+r+'"')}return t.join("")}(r))}(t),1);throw i}}function Qt(e){for(var t=0;t<e.childNodes.length;t++){if("x:xmpmeta"===e.childNodes[t].tagName)return Qt(e.childNodes[t]);if("rdf:RDF"===e.childNodes[t].tagName)return e.childNodes[t]}throw Error()}function en(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=function(e){for(var t=[],n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);return t}(e);return 1===(t=i).length&&"#text"===t[0].nodeName?n?{}:function(e){return e.nodeValue}(i[0]):function(e){var t={};return e.forEach(function(e){if(function(e){return e.nodeName&&"#text"!==e.nodeName}(e)){var n=function(e){return{attributes:tn(e),value:en(e)}}(e);void 0!==t[e.nodeName]?(Array.isArray(t[e.nodeName])||(t[e.nodeName]=[t[e.nodeName]]),t[e.nodeName].push(n)):t[e.nodeName]=n}}),t}(i)}function tn(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].nodeName]=decodeURIComponent(escape(e.attributes[n].value));return t}function nn(e){var t={};if("string"==typeof e)return e;for(var n in e){var i=e[n];Array.isArray(i)||(i=[i]),i.forEach(function(e){d(t,rn(e.attributes)),"object"===Ht(e.value)&&d(t,un(e.value))})}return t}function rn(e){var t={};for(var n in e)try{on(n)&&(t[sn(n)]={value:e[n],attributes:{},description:ln(e[n],n)})}catch(e){}return t}function on(e){return"rdf:parseType"!==e&&!an(e)}function an(e){return"xmlns"===e.split(":")[0]}function sn(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(Array.isArray(e)){var n=function(e){return e.map(function(e){return void 0!==e.value?ln(e.value):ln(e)}).join(", ")}(e);return t&&"function"==typeof Ft[t]?Ft[t](e,n):n}if("object"===Ht(e))return function(e){var t=[];for(var n in e)t.push("".concat(cn(n),": ").concat(ln(e[n].value)));return t.join("; ")}(e);try{return t&&"function"==typeof Ft[t]?Ft[t](e):decodeURIComponent(escape(e))}catch(t){return e}}function cn(e){return"CiAdrCity"===e?"CreatorCity":"CiAdrCtry"===e?"CreatorCountry":"CiAdrExtadr"===e?"CreatorAddress":"CiAdrPcode"===e?"CreatorPostalCode":"CiAdrRegion"===e?"CreatorRegion":"CiEmailWork"===e?"CreatorWorkEmail":"CiTelWork"===e?"CreatorWorkPhone":"CiUrlWork"===e?"CreatorWorkUrl":e}function un(e){var t={};for(var n in e)try{an(n)||(t[sn(n)]=dn(e[n],n))}catch(e){}return t}function dn(e,t){return function(e){return Array.isArray(e)}(e)?function(e,t){return wn(e[e.length-1],t)}(e,t):function(e){return"Resource"===e.attributes["rdf:parseType"]&&"string"==typeof e.value&&""===e.value.trim()}(e)?{value:"",attributes:{},description:""}:hn(e)?pn(e,t):mn(e)?gn(e,t):vn(e)?bn(e,t):function(e){return void 0!==yn(e.value)}(e)?function(e,t){var n=yn(e.value).value["rdf:li"],i=fn(e),r=[];return void 0===n?n=[]:Array.isArray(n)||(n=[n]),n.forEach(function(e){r.push(function(e){return hn(e)?pn(e):mn(e)?gn(e).value:vn(e)?bn(e).value:wn(e)}(e))}),{value:r,attributes:i,description:ln(r,t)}}(e,t):wn(e,t)}function hn(e){return"Resource"===e.attributes["rdf:parseType"]&&void 0!==e.value["rdf:value"]||void 0!==e.value["rdf:Description"]&&void 0!==e.value["rdf:Description"].value["rdf:value"]}function pn(e,t){var n=fn(e);void 0!==e.value["rdf:Description"]&&(e=e.value["rdf:Description"]),d(n,fn(e),function(e){var t={};for(var n in e.value)"rdf:value"===n||an(n)||(t[sn(n)]=e.value[n].value);return t}(e));var i=function(e){return _n(e.value["rdf:value"])||e.value["rdf:value"].value}(e);return{value:i,attributes:n,description:ln(i,t)}}function fn(e){var t={};for(var n in e.attributes)"rdf:parseType"===n||"rdf:resource"===n||an(n)||(t[sn(n)]=e.attributes[n]);return t}function mn(e){return"Resource"===e.attributes["rdf:parseType"]||void 0!==e.value["rdf:Description"]&&void 0===e.value["rdf:Description"].value["rdf:value"]}function gn(e,t){var n={value:{},attributes:{}};return void 0!==e.value["rdf:Description"]&&(d(n.value,rn(e.value["rdf:Description"].attributes)),d(n.attributes,fn(e)),e=e.value["rdf:Description"]),d(n.value,un(e.value)),n.description=ln(n.value,t),n}function vn(e){return 0===Object.keys(e.value).length&&void 0===e.attributes["xml:lang"]&&void 0===e.attributes["rdf:resource"]}function bn(e,t){var n=rn(e.attributes);return{value:n,attributes:{},description:ln(n,t)}}function yn(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function wn(e,t){var n=_n(e)||nn(e.value);return{value:n,attributes:fn(e),description:ln(n,t)}}function _n(e){return e.attributes&&e.attributes["rdf:resource"]}function xn(e){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(e)}function Sn(e,t,n){return(t=function(e){var t=function(e){if("object"!=xn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"==xn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:1,configurable:1,writable:1}):e[t]=n,e}function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var An={2e3:{name:"PathInformation",description:function(e){for(var t={},n=[],i=0;i<e.byteLength;i+=26){var r=Be.getShortAt(e,i);Cn[r]&&(t[r]||(t[r]=Cn[r].description),n.push({type:r,path:Cn[r].path(e,i+2)}))}return JSON.stringify({types:t,paths:n})}},2999:{name:"ClippingPathName",description:function(e){return(t=c(e,0),function(e){if(Array.isArray(e))return e}(t)||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,o,a=[],s=1,l=0;try{for(r=(t=t.call(e)).next;!(s=(n=r.call(t)).done)&&(a.push(n.value),2!==a.length);s=1);}catch(e){l=1,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(t)||function(e){if(e){if("string"==typeof e)return Tn(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Tn(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];var t}}},Cn=Sn(Sn(Sn(Sn(Sn(Sn(Sn(Sn(Sn({},0,{description:"Closed subpath length",path:function(e,t){return[Be.getShortAt(e,t)]}}),1,{description:"Closed subpath Bezier knot, linked",path:En}),2,{description:"Closed subpath Bezier knot, unlinked",path:En}),3,{description:"Open subpath length",path:function(e,t){return[Be.getShortAt(e,t)]}}),4,{description:"Open subpath Bezier knot, linked",path:En}),5,{description:"Open subpath Bezier knot, unlinked",path:En}),6,{description:"Path fill rule",path:function(){return[]}}),8,{description:"Initial fill rule",path:function(e,t){return[Be.getShortAt(e,t)]}}),7,{description:"Clipboard",path:function(e,t){return[[In(e,t,8),In(e,t+4,8),In(e,t+8,8),In(e,t+12,8)],In(e,t+16,8)]}});function En(e,t){for(var n=[],i=0;i<24;i+=8)n.push(kn(e,t+i));return n}function kn(e,t){var n=In(e,t,8);return[In(e,t+4,8),n]}function In(e,t,n){var i,r=Be.getLongAt(e,t),o=r>>>31==0?1:-1,a=(2130706432&r)>>>32-n,s=r&parseInt(f("1",32-n),2);return o*function(e){return parseInt(e.replace(".",""),2)/Math.pow(2,(e.split(".")[1]||"").length)}(a.toString(2)+"."+(f("0",32-n-(i=s.toString(2)).length)+i))}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Dn={read:function(e,t){for(var n=o(new Uint8Array(e).buffer),i={},r=0;r<e.length;){var s=a(n,r,Rn);r+=Rn;var l=Be.getShortAt(n,r),c=Nn(n,r+=Mn),u=c.tagName;r+=c.tagNameSize;var d=Be.getLongAt(n,r);if(r+=Ln,s===On){var h=o(n.buffer,r,d),p={id:l,value:a(h,0,d)};if(An[l]){try{p.description=An[l].description(h)}catch(e){p.description="<no description formatter>"}i[u||An[l].name]=p}else t&&(i["undefined-".concat(l)]=p)}r+=d+d%2}return i}},On="8BIM",Mn=2,Ln=4,Rn=On.length;function Nn(e,t){var n,i=function(e){if(Array.isArray(e))return e}(n=c(e,t))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,o,a=[],s=1,l=0;try{for(r=(t=t.call(e)).next;!(s=(n=r.call(t)).done)&&(a.push(n.value),2!==a.length);s=1);}catch(e){l=1,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(n)||function(e){if(e){if("string"==typeof e)return Pn(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pn(e,2):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=i[0];return{tagName:i[1],tagNameSize:1+r+(r%2==0?1:0)}}var Fn={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},Un={4:{name:"Preferred CMM type",value:function(e,t){return a(e,t,4)},description:function(e){return null!==e?Vn(e):""}},8:{name:"Profile Version",value:function(e,t){return e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)}},12:{name:"Profile/Device class",value:function(e,t){return a(e,t,4)},description:function(e){switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:function(e,t){return a(e,t,4)}},20:{name:"Connection Space",value:function(e,t){return a(e,t,4)}},24:{name:"ICC Profile Date",value:function(e,t){return function(e,t){var n=e.getUint16(t),i=e.getUint16(t+2)-1,r=e.getUint16(t+4),o=e.getUint16(t+6),a=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(n,i,r,o,a,s))}(e,t).toISOString()}},36:{name:"ICC Signature",value:function(e,t){return n=e.buffer.slice(t,t+4),String.fromCharCode.apply(null,new Uint8Array(n));var n}},40:{name:"Primary Platform",value:function(e,t){return a(e,t,4)},description:function(e){return Vn(e)}},48:{name:"Device Manufacturer",value:function(e,t){return a(e,t,4)},description:function(e){return Vn(e)}},52:{name:"Device Model Number",value:function(e,t){return a(e,t,4)}},64:{name:"Rendering Intent",value:function(e,t){return e.getUint32(t)},description:function(e){switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:function(e,t){return a(e,t,4)}}};function Vn(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}var Bn={read:function(e,t,n){return n&&t[0].compressionMethod!==m?function(e,t){return 0!==t[0].compressionMethod?{}:g(new DataView(e.buffer.slice(t[0].offset,t[0].offset+t[0].length)),t[0].compressionMethod,"utf-8","dataview").then(Xn).catch(function(){return{}})}(e,t):function(e,t){try{for(var n=t.reduce(function(e,t){return e+t.length},0),i=new Uint8Array(n),r=0,o=function(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}(e),a=function(e){var n=t.find(function(t){return t.chunkNumber===e});if(!n)throw Error("ICC chunk ".concat(e," not found"));var a=o.slice(n.offset,n.offset+n.length),s=new Uint8Array(a);i.set(s,r),r+=s.length},s=1;s<=t.length;s++)a(s);return Xn(new DataView(i.buffer))}catch(e){return{}}}(e,t)}},$n=84,Hn=128,Gn="acsp",jn="desc",zn="mluc",qn="text",Yn="sig ",Wn=12;function Kn(e,t){return e.length<t+Wn}function Xn(e){var t=e.buffer,n=e.getUint32();if(e.byteLength!==n)throw Error("ICC profile length not matching");if(e.byteLength<$n)throw Error("ICC profile too short");for(var i={},r=Object.keys(Un),o=0;o<r.length;o++){var s=r[o],c=Un[s],u=c.value(e,parseInt(s,10)),d=u;c.description&&(d=c.description(u)),i[c.name]={value:u,description:d}}if(Zn(t.slice(36,40))!==Gn)throw Error("ICC profile: missing signature");if(function(e){return e.length<Hn+4}(t))return i;for(var h=e.getUint32(128),p=132,f=0;f<h;f++){if(Kn(t,p))return i;var m=a(e,p,4),g=e.getUint32(p+4),v=e.getUint32(p+8);if(g>t.length)return i;var b=a(e,g,4);if(b===jn){var y=e.getUint32(g+8);if(y>v)return i;Jn(i,m,Zn(t.slice(g+12,g+y+11)))}else if(b===zn){for(var w=e.getUint32(g+8),_=e.getUint32(g+12),x=g+16,S=[],T=0;T<w;T++){var A=a(e,x+0,2),C=a(e,x+2,2),E=e.getUint32(x+4),k=e.getUint32(x+8),I=l(e,g+k,E);S.push({languageCode:A,countryCode:C,text:I}),x+=_}if(1===w)Jn(i,m,S[0].text);else{for(var P={},D=0;D<S.length;D++)P["".concat(S[D].languageCode,"-").concat(S[D].countryCode)]=S[D].text;Jn(i,m,P)}}else b===qn?Jn(i,m,Zn(t.slice(g+8,g+v-7))):b===Yn&&Jn(i,m,Zn(t.slice(g+8,g+12)));p+=12}return i}function Zn(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Jn(e,t,n){Fn[t]?e[Fn[t].name]={value:n,description:n}:e[t]={value:n,description:n}}var Qn={read:function(e,t,n,i,r){var o=qe(e,Re,t,t+n,i,r);return o.ShotInfo&&delete(o=d({},o,function(e){var t,n={};return void 0!==e[27]&&(n.AutoRotate={value:e[27],description:(t=e[27],0===t?"None":1===t?"Rotate 90 CW":2===t?"Rotate 180":3===t?"Rotate 270 CW":"Unknown")}),n}(o.ShotInfo.value))).ShotInfo,o},SHOT_INFO_AUTO_ROTATE:27},ei={K3_III:78420},ti={CAMERA_ORIENTATION:1,ROLL_ANGLE:3,PITCH_ANGLE:5},ni={read:function(e,t,n,i){var r=S(e,t+n+8),o=t+n,a=qe(e,Ne,o,o+10,r,i);return function(e){return e.PentaxModelID&&e.PentaxModelID.value===ei.K3_III&&e.LevelInfo}(a)&&(a=d({},a,function(e,t,n){var i={};if(t+7>e.byteLength)return i;var r,o=e.getInt8(t+ti.CAMERA_ORIENTATION);i.CameraOrientation={value:o,description:(r=o,0===r?"Horizontal (normal)":1===r?"Rotate 270 CW":2===r?"Rotate 180":3===r?"Rotate 90 CW":4===r?"Upwards":5===r?"Downwards":"Unknown")};var a=e.getInt16(t+ti.ROLL_ANGLE,n===x);i.RollAngle={value:a,description:ii(a)};var s=e.getInt16(t+ti.PITCH_ANGLE,n===x);return i.PitchAngle={value:s,description:ri(s)},i}(e,o+a.LevelInfo.__offset,r)),delete a.LevelInfo),a},PENTAX_IFD_OFFSET:10,MODEL_ID:ei,LIK3III:ti};function ii(e){return""+-.5*e}function ri(e){return""+-.5*e}var oi={read:function(e,t){return{"Image Width":ai(e,t),"Image Height":si(e,t),"Bit Depth":li(e,t),"Color Type":ci(e,t),Compression:ui(e,t),Filter:di(e,t),Interlace:hi(e,t)}}};function ai(e,t){if(!(t+0+4>e.byteLength)){var n=Be.getLongAt(e,t);return{value:n,description:"".concat(n,"px")}}}function si(e,t){if(!(t+4+4>e.byteLength)){var n=Be.getLongAt(e,t+4);return{value:n,description:"".concat(n,"px")}}}function li(e,t){if(!(t+8+1>e.byteLength)){var n=Be.getByteAt(e,t+8);return{value:n,description:"".concat(n)}}}function ci(e,t){if(!(t+9+1>e.byteLength)){var n=Be.getByteAt(e,t+9);return{value:n,description:{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"}[n]||"Unknown"}}}function ui(e,t){if(!(t+10+1>e.byteLength)){var n=Be.getByteAt(e,t+10);return{value:n,description:0===n?"Deflate/Inflate":"Unknown"}}}function di(e,t){if(!(t+11+1>e.byteLength)){var n=Be.getByteAt(e,t+11);return{value:n,description:0===n?"Adaptive":"Unknown"}}}function hi(e,t){if(!(t+12+1>e.byteLength)){var n=Be.getByteAt(e,t+12);return{value:n,description:{0:"Noninterlaced",1:"Adam7 Interlace"}[n]||"Unknown"}}}function pi(e){return pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pi(e)}var fi={read:function(e,t,n,i){for(var r={},o=[],a=0;a<t.length;a++){var s=t[a],l=Si(e,s.offset,s.length,s.type,n);if(l instanceof Promise)o.push(l.then(function(e){var t,n,r,o=e.name,a=e.value,s=e.description;try{if(v.USE_EXIF&&Ii(o,a))return{__exif:Qe.read(Di(a),xi,i).tags};if(v.USE_IPTC&&Pi(o,a))return{__iptc:kt.read(Di(a),0,i)};if(o&&!Ii(o,a)&&!Pi(o,a))return t={},r={value:a,description:s},(n=function(e){var t=function(e){if("object"!=pi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return e+""}(e);return"symbol"==pi(t)?t:t+""}(n=o))in t?Object.defineProperty(t,n,{value:r,enumerable:1,configurable:1,writable:1}):t[n]=r,t}catch(e){}return{}}));else{var c=l.name,u=l.value,d=l.description;c&&(r[c]={value:u,description:d})}}return{readTags:r,readTagsPromise:o.length>0?Promise.all(o):void 0}}},mi="STATE_KEYWORD",gi="STATE_COMPRESSION",vi="STATE_LANG",bi="STATE_TRANSLATED_KEYWORD",yi="STATE_TEXT",wi=1,_i=1,xi=6;function Si(e,t,n,i,r){for(var o,a=[],s=[],l=[],c=mi,u=m,d=0;d<n&&t+d<e.byteLength;d++)if(c!==gi){if(c===yi){o=new DataView(e.buffer.slice(t+d,t+n));break}var h=e.getUint8(t+d);0===h?c=Ai(i,c):c===mi?a.push(h):c===vi?s.push(h):c===bi&&l.push(h)}else u=Ti({type:i,dataView:e,offset:t+d}),i===W&&(d+=wi),c=Ai(i,c);if(u!==m&&!r)return{};var p=g(o,u,function(e){return e===Y||e===K?"latin1":"utf-8"}(i));return p instanceof Promise?p.then(function(e){return Ci(e,i,s,a)}).catch(function(){return Ci("<text using unknown compression>".split(""),i,s,a)}):Ci(p,i,s,a)}function Ti(e){var t=e.type,n=e.dataView,i=e.offset;if(t===W){if(n.getUint8(i)===_i)return n.getUint8(i+1)}else if(t===K)return n.getUint8(i);return m}function Ai(e,t){return t===mi&&[W,K].includes(e)?gi:t===gi?e===W?vi:yi:t===vi?bi:yi}function Ci(e,t,n,i){var r=function(e){return e instanceof DataView?a(e,0,e.byteLength):e}(e);return{name:Ei(t,n,i),value:r,description:t===W?ki(e):r}}function Ei(e,t,n){var i=u(n);if(e===Y||0===t.length)return i;var r=u(t);return"".concat(i," (").concat(r,")")}function ki(e){return Et("UTF-8",e)}function Ii(e,t){return"raw profile type exif"===e.toLowerCase()&&"exif"===t.substring(1,5)}function Pi(e,t){return"raw profile type iptc"===e.toLowerCase()&&"iptc"===t.substring(1,5)}function Di(e){return function(e){for(var t=new DataView(new ArrayBuffer(e.length/2)),n=0;n<e.length;n+=2)t.setUint8(n/2,parseInt(e.substring(n,n+2),16));return t}(e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/)[2].replace(/\n/g,""))}var Oi={read:function(e,t){for(var n={},i=0;i<t.length;i++){var r=Be.getLongAt(e,t[i]+0),o=a(e,t[i]+4,4);o===X?(n["Pixels Per Unit X"]=Mi(e,t[i],r),n["Pixels Per Unit Y"]=Li(e,t[i],r),n["Pixel Units"]=Ri(e,t[i],r)):o===Z&&(n["Modify Date"]=Ni(e,t[i],r))}return n}};function Mi(e,t,n){if(Fi(e,t,n,0,4)){var i=Be.getLongAt(e,t+8+0);return{value:i,description:""+i}}}function Li(e,t,n){if(Fi(e,t,n,4,4)){var i=Be.getLongAt(e,t+8+4);return{value:i,description:""+i}}}function Ri(e,t,n){if(Fi(e,t,n,8,1)){var i=Be.getByteAt(e,t+8+8);return{value:i,description:1===i?"meters":"Unknown"}}}function Ni(e,t,n){if(Fi(e,t,n,0,7)){var i=Be.getShortAt(e,t+8),r=Be.getByteAt(e,t+8+2),o=Be.getByteAt(e,t+8+3),a=Be.getByteAt(e,t+8+4),s=Be.getByteAt(e,t+8+5),l=Be.getByteAt(e,t+8+6);return{value:[i,r,o,a,s,l],description:"".concat(Ui(i,4),"-").concat(Ui(r,2),"-").concat(Ui(o,2)," ").concat(Ui(a,2),":").concat(Ui(s,2),":").concat(Ui(l,2))}}}function Fi(e,t,n,i,r){return i+r<=n&&t+8+i+r<=e.byteLength}function Ui(e,t){return"".concat("0".repeat(t-(""+e).length)).concat(e)}var Vi={read:function(e,t){var n={},i=Be.getByteAt(e,t);return n.Alpha=function(e){var t=16&e;return{value:t?1:0,description:t?"Yes":"No"}}(i),n.Animation=function(e){var t=2&e;return{value:t?1:0,description:t?"Yes":"No"}}(i),n.ImageWidth=Hi(e,t+Bi),n.ImageHeight=Hi(e,t+$i),n}},Bi=4,$i=7;function Hi(e,t){var n=Be.getByteAt(e,t)+256*Be.getByteAt(e,t+1)+65536*Be.getByteAt(e,t+2)+1;return{value:n,description:n+"px"}}var Gi={read:function(e){return{"GIF Version":ji(e),"Image Width":zi(e),"Image Height":qi(e),"Global Color Map":Yi(e),"Bits Per Pixel":Ki(e),"Color Resolution Depth":Wi(e)}}};function ji(e){if(!(6>e.byteLength)){var t=a(e,3,3);return{value:t,description:t}}}function zi(e){if(!(8>e.byteLength)){var t=e.getUint16(6,1);return{value:t,description:"".concat(t,"px")}}}function qi(e){if(!(10>e.byteLength)){var t=e.getUint16(8,1);return{value:t,description:"".concat(t,"px")}}}function Yi(e){if(!(11>e.byteLength)){var t=(128&e.getUint8(10))>>>7;return{value:t,description:1===t?"Yes":"No"}}}function Wi(e){if(!(11>e.byteLength)){var t=1+((112&e.getUint8(10))>>>4);return{value:t,description:"".concat(t," ").concat(1===t?"bit":"bits")}}}function Ki(e){if(!(11>e.byteLength)){var t=1+(7&e.getUint8(10));return{value:t,description:"".concat(t," ").concat(1===t?"bit":"bits")}}}var Xi=[6,7,99],Zi={get:function(e,t,n){if((r=t)&&(void 0===r.Compression||Xi.includes(r.Compression.value))&&r.JPEGInterchangeFormat&&r.JPEGInterchangeFormat.value&&r.JPEGInterchangeFormatLength&&r.JPEGInterchangeFormatLength.value){t.type="image/jpeg";var i=n+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(i,i+t.JPEGInterchangeFormatLength.value),h(t,"base64",function(){return p(this.image)})}var r;return t}},Ji={get:function(e,t){var n={},i=0,r=Qi(e,"exif","FocalLength",t),o=Qi(e,"exif","FocalPlaneXResolution",t),a=Qi(e,"exif","FocalPlaneYResolution",t),s=Qi(e,"exif","FocalPlaneResolutionUnit",t),l=Qi(e,"file","Image Width",t),c=Qi(e,"file","Image Height",t),u=Qi(e,"exif","FocalLengthIn35mmFilm",t)||function(e,t,n,i,r,o){if(e&&t&&n&&i&&r&&o)try{var a;switch(n){case 2:a=25.4;break;case 3:a=10;break;case 4:a=1;break;default:return}var s=e[0]/e[1]*a,l=r/(t[0]/t[1]*a),c=Math.sqrt(Math.pow(i/s,2)+Math.pow(l,2));return o[0]/o[1]*(43.27/c)}catch(e){}}(o,a,s,l,c,r);u&&(n.FocalLength35efl={value:u,description:_e.FocalLengthIn35mmFilm(u)},i=1);var d=function(e,t){if(e&&t)try{var n=t/(e[0]/e[1]);return{value:n,description:n.toFixed(1)}}catch(e){}}(r,u);d&&(n.ScaleFactorTo35mmEquivalent=d,i=1);var h=function(e){if(e)try{var t=2*Math.atan(36/(2*e))*(180/Math.PI);return{value:t,description:t.toFixed(1)+" deg"}}catch(e){}}(u);if(h&&(n.FieldOfView=h,i=1),i)return n}};function Qi(e,t,n,i){return i&&e[t]&&e[t][n]?e[t][n].value:!i&&e[n]?e[n].value:void 0}function er(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=Error().stack}er.prototype=Error();var tr={MetadataMissingError:er},nr={load:rr,loadView:ar,errors:tr},ir=tr;function rr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){return"string"==typeof e}(e)?(n.async=1,function(e,t){return/^\w+:\/\//.test(e)?"undefined"!=typeof fetch?function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).length,n={method:"GET"};return Number.isInteger(t)&&t>=0&&(n.headers={range:"bytes=0-".concat(t-1)}),fetch(e,n).then(function(e){return e.arrayBuffer()})}(e,t):function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).length;return new Promise(function(n,i){var r={};Number.isInteger(t)&&t>=0&&(r.headers={range:"bytes=0-".concat(t-1)});var o=function(e){return/^https:\/\//.test(e)?require("https").get:require("http").get}(e);o(e,r,function(e){if(e.statusCode>=200&&e.statusCode<=299){var t=[];e.on("data",function(e){return t.push(Buffer.from(e))}),e.on("error",function(e){return i(e)}),e.on("end",function(){return n(Buffer.concat(t))})}else i("Could not fetch file: ".concat(e.statusCode," ").concat(e.statusMessage)),e.resume()}).on("error",function(e){return i(e)})})}(e,t):function(e){return/^data:[^;,]*(;base64)?,/.test(e)}(e)?Promise.resolve(function(e){var t=e.substring(e.indexOf(",")+1);if(-1!==e.indexOf(";base64")){if("undefined"!=typeof atob)return Uint8Array.from(atob(t),function(e){return e.charCodeAt(0)}).buffer;if("undefined"==typeof Buffer)return;return void 0!==Buffer.from?Buffer.from(t,"base64"):new Buffer(t,"base64")}var n=decodeURIComponent(t);return"undefined"!=typeof Buffer?void 0!==Buffer.from?Buffer.from(n):new Buffer(n):Uint8Array.from(n,function(e){return e.charCodeAt(0)}).buffer}(e)):function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).length;return new Promise(function(n,i){var r=function(){try{return require("fs")}catch(e){return}}();r.open(e,function(o,a){o?i(o):r.stat(e,function(o,s){if(o)i(o);else{var l=Math.min(s.size,void 0!==t?t:s.size),c=Buffer.alloc(l),u={buffer:c,length:l};r.read(a,u,function(t){t?i(t):r.close(a,function(t){t&&console.warn("Could not close file ".concat(e,":"),t),n(c)})})}})})})}(e,t)}(e,n).then(function(e){return or(e,n)})):function(e){return"undefined"!=typeof File&&e instanceof File}(e)?(n.async=1,(t=e,new Promise(function(e,n){var i=new FileReader;i.onload=function(t){return e(t.target.result)},i.onerror=function(){return n(i.error)},i.readAsArrayBuffer(t)})).then(function(e){return or(e,n)})):or(e,n)}function or(e,t){return function(e){try{return Buffer.isBuffer(e)}catch(e){return 0}}(e)&&(e=new Uint8Array(e).buffer),ar(function(e){try{return new DataView(e)}catch(t){return new r(e)}}(e),t)}function ar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{expanded:0,async:0,includeUnknown:0,domParser:void 0},n=t.expanded,i=void 0===n?0:n,r=t.async,o=void 0===r?0:r,a=t.includeUnknown,s=void 0===a?0:a,l=t.domParser,c=void 0===l?void 0:l,h=0,p={},f=[],m=ye.parseAppMarkers(e,o),g=m.fileType,b=m.fileDataOffset,y=m.jfifDataOffset,_=m.tiffHeaderOffset,x=m.iptcDataOffset,S=m.xmpChunks,T=m.iccChunks,A=m.mpfDataOffset,C=m.pngHeaderOffset,E=m.pngTextChunks,k=m.pngChunkOffsets,I=m.vp8xChunkOffset,P=m.gifHeaderOffset;if(v.USE_JPEG&&v.USE_FILE&&function(e){return void 0!==e}(b)){h=1;var D=ut.read(e,b);i?p.file=D:p=d({},p,D)}if(v.USE_JPEG&&v.USE_JFIF&&function(e){return void 0!==e}(y)){h=1;var O=vt.read(e,y);i?p.jfif=O:p=d({},p,O)}if(v.USE_EXIF&&function(e){return void 0!==e}(_)){h=1;var M=Qe.read(e,_,s),L=M.tags,R=M.byteOrder;if(L.Thumbnail&&(p.Thumbnail=L.Thumbnail,delete L.Thumbnail),i?(p.exif=L,function(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=w(e.exif.GPSLatitude.value),"S"===e.exif.GPSLatitudeRef.value.join("")&&(e.gps.Latitude=-e.gps.Latitude)}catch(e){}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=w(e.exif.GPSLongitude.value),"W"===e.exif.GPSLongitudeRef.value.join("")&&(e.gps.Longitude=-e.gps.Longitude)}catch(e){}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],1===e.exif.GPSAltitudeRef.value&&(e.gps.Altitude=-e.gps.Altitude)}catch(e){}}}(p)):p=d({},p,L),v.USE_TIFF&&v.USE_IPTC&&L["IPTC-NAA"]&&!sr(x)){var N=kt.read(L["IPTC-NAA"].value,0,s);i?p.iptc=N:p=d({},p,N)}if(v.USE_TIFF&&v.USE_XMP&&L.ApplicationNotes&&!lr(S)){var F=Wt.read(u(L.ApplicationNotes.value),void 0,c);i?p.xmp=F:(delete F._raw,p=d({},p,F))}if(v.USE_PHOTOSHOP&&L.ImageSourceData&&L.PhotoshopSettings){var U=Dn.read(L.PhotoshopSettings.value,s);i?p.photoshop=U:p=d({},p,U)}if(v.USE_TIFF&&v.USE_ICC&&L.ICC_Profile&&!cr(T)){var V=Bn.read(L.ICC_Profile.value,[{offset:0,length:L.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);i?p.icc=V:p=d({},p,V)}if(v.USE_MAKER_NOTES&&L.MakerNote)if(function(e){return e.Make&&e.Make.value&&Array.isArray(e.Make.value)&&"Canon"===e.Make.value[0]&&e.MakerNote&&e.MakerNote.__offset}(L)){var B=Qn.read(e,_,L.MakerNote.__offset,R,s);i?p.makerNotes=B:p=d({},p,B)}else if(function(e){return e.MakerNote.value.length>7&&"PENTAX "===u(e.MakerNote.value.slice(0,7))&&e.MakerNote.__offset}(L)){var $=ni.read(e,_,L.MakerNote.__offset,s);i?p.makerNotes=$:p=d({},p,$)}L.MakerNote&&delete L.MakerNote.__offset}if(v.USE_JPEG&&v.USE_IPTC&&sr(x)){h=1;var H=kt.read(e,x,s);i?p.iptc=H:p=d({},p,H)}if(v.USE_XMP&&lr(S)){h=1;var G=Wt.read(e,S,c);i?p.xmp=G:(delete G._raw,p=d({},p,G))}if((v.USE_JPEG||v.USE_WEBP)&&v.USE_ICC&&cr(T)){h=1;var j=Bn.read(e,T,o);j instanceof Promise?f.push(j.then(te)):te(j)}if(v.USE_MPF&&function(e){return void 0!==e}(A)){h=1;var z=it.read(e,A,s);i?p.mpf=z:p=d({},p,z)}if(v.USE_PNG&&v.USE_PNG_FILE&&void 0!==C){h=1;var q=oi.read(e,C);i?(p.png=p.png?d({},p.png,q):q,p.pngFile=q):p=d({},p,q)}if(v.USE_PNG&&function(e){return void 0!==e}(E)){h=1;var Y=fi.read(e,E,o,s),W=Y.readTags,K=Y.readTagsPromise;ne(W),K&&f.push(K.then(function(e){return e.forEach(ne)}))}if(v.USE_PNG&&function(e){return void 0!==e}(k)){h=1;var X=Oi.read(e,k);i?p.png=p.png?d({},p.png,X):X:p=d({},p,X)}if(v.USE_WEBP&&function(e){return void 0!==e}(I)){h=1;var Z=Vi.read(e,I);i?p.riff=p.riff?d({},p.riff,Z):Z:p=d({},p,Z)}if(v.USE_GIF&&function(e){return void 0!==e}(P)){h=1;var J=Gi.read(e,P);i?p.gif=p.gif?d({},p.gif,J):J:p=d({},p,J)}var Q=Ji.get(p,i);Q&&(i?p.composite=Q:p=d({},p,Q));var ee=(v.USE_JPEG||v.USE_WEBP)&&v.USE_EXIF&&v.USE_THUMBNAIL&&Zi.get(e,p.Thumbnail,_);if(ee?(h=1,p.Thumbnail=ee):delete p.Thumbnail,g&&(i?(p.file||(p.file={}),p.file.FileType=g):p.FileType=g,h=1),!h)throw new tr.MetadataMissingError;return o?Promise.all(f).then(function(){return p}):p;function te(e){i?p.icc=e:p=d({},p,e)}function ne(e){if(i){for(var t=0,n=["exif","iptc"];t<n.length;t++){var r=n[t],o="__".concat(r);e[o]&&(p[r]=p[r]?d({},p.exif,e[o]):e[o],delete e[o])}p.png=p.png?d({},p.png,e):e,p.pngText=p.pngText?d({},p.png,e):e}else delete(p=d({},p,e.__exif?e.__exif:{},e.__iptc?e.__iptc:{},e)).__exif,delete p.__iptc}}function sr(e){return void 0!==e}function lr(e){return Array.isArray(e)&&e.length>0}function cr(e){return Array.isArray(e)&&e.length>0}return t}()},"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("exifreader",[],i):"object"==typeof exports?exports.ExifReader=i():n.ExifReader=i(),define("Views/Dashboard/AddData/AssetForms/ReconstructAssetForm",["Core/AssetType","Core/find","Core/SourceType","./AssetForm","./isReconstructionImagery","../MeshQuality","../../../Components/Form/SelectInputOption","knockout","text!Views/Help/ReconstructAssetFormHelp.md","exifreader"],function(e,t,n,i,r,o,a,s,l,c){"use strict";function u(e){const t=Object.entries(e),n=[];for(const i of t){const[e,t]=i;n.push(new a(e,t))}return n}function d(t,n,r){i.call(this,t,e["3DTILES"],n,r,l);const a=this._formHelper;this.outputQualityField=a.createSelectInput({label:"Output quality",required:!0,value:o.Medium,options:u(o)}),this.createCesium3DTiles=a.createToggle({label:"3D mesh",value:!0,help:"Reconstruct a mesh and create 3D tiles.",disabled:!0}),this.createGaussianSplats=a.createToggle({label:"3D Gaussian splats",value:!1,help:"Create Gaussian Splat tiles from the reconstructed model."}),this.createLas=a.createToggle({label:"Point cloud",value:!1,help:"Create point cloud tiles from the reconstructed model."}),this.useGpsInfo=a.createToggle({label:"Use embedded GPS coordinates to georeference the asset",value:!1,help:"Use GPS information from the images to georeference the reconstruction.",disabled:s.observable(!1)}),this.files.subscribe(this._updateGpsInfo,this),this._updateGpsInfo(this.files());const c=[this.createCesium3DTiles,this.createGaussianSplats,this.createLas];this.toggles=a.createHorizontalForm(c),this.hasConfiguration=s.observable(!0)}return d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.displayName="Photos (for 3D reconstruction)",d.tooltip="Technology Preview: 3D reconstruction from photos is not yet intended for production use. Data may require retiling in the future.",d.getPrimaryFile=function(e){return t(e,function(e){return r.regex.test(e.path)})},d.validate=function(e){const t=new Map(e.map(e=>[e.path,e]));e.forEach(e=>{e.parent&&t.delete(e.parent.path)});for(const i of t.values())if(!r.regex.test(i.path)){const e=t.get(i.path);e.warning(!0),e.warningMessage(`File ${i.path} is not a supported raster file for reconstruction.`)}const n=[];return[...t.values()].filter(e=>e.warning()).length>0&&n.push("One or more files are not supported for reconstruction."),t.size<3&&n.push("A minimum of 3 images are required for reconstruction"),n},d.isEligible=r,d.prototype._getPostOptions=function(){return{sourceType:n.RASTER_IMAGERY,meshQuality:this.outputQualityField.input(),outputs:{cesium3DTiles:this.createCesium3DTiles.input(),las:this.createLas.input(),gaussianSplats:this.createGaussianSplats.input()},useGpsInfo:this.useGpsInfo.input()}},d.prototype._getIsArchivable=function(){return!0},d._exifContainsGps=async function(e){if(!e)return!1;const t=await c.load(e);return t.GPSLatitude&&t.GPSLongitude},d._hasGpsInfo=async function(e){let t=!1,n=!0;for(const r of e)try{if(await d._exifContainsGps(r.body)){if(t=!0,!n)return}else{if(t)return;n=!1}}catch(i){console.log("ERROR reading EXIF data for file:",r.path,i)}return n},d.prototype._updateGpsInfo=async function(e){const t=await d._hasGpsInfo(e);!1===t?(this.useGpsInfo.input(!1),this.useGpsInfo.disabled(!0)):!0===t?(this.useGpsInfo.input(!0),this.useGpsInfo.disabled(!1)):this.useGpsInfo.disabled(!1)},d}),define("Views/Dashboard/AddData/S3Form",["../../Components/Form/FormHelper","Core/isStringEmptyOrWhitespace","Core/Services","Core/Units","knockout"],function(e,t,n,i,r){"use strict";function o(){const t=new e,n=t.createTextInput({label:"Access Key ID"});n.input.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:500}});const i=t.createTextInput({label:"Secret Access Key"});i.input.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:500}});const o=t.createTextInput({label:"Bucket"});o.input.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:500}});const a=t.createTextInput({label:"Prefix"});a.input.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:500}}),this.preview=t.createTextArea({label:"Preview",readonly:!0,rows:5});const s=t.createTextInput({label:"Session token"});s.input.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:500}}),this.accessKey=n,this.secretAccessKey=i,this.bucket=o,this.prefix=a,this.sessionToken=s,this.ready=r.observable(!1),this.hasError=r.observable(!1),this.errorMessage=r.observable(""),this.totalBytes=r.observable(0),this.pending=r.observable(!1),this.shouldValidate=!1,this._lastState=void 0;const l=function(){this.getPreview()}.bind(this);this._subscriptions=[n.input.subscribe(l),i.input.subscribe(l),o.input.subscribe(l),a.input.subscribe(l),s.input.subscribe(l)]}return o.prototype.destroy=function(){this._subscriptions.forEach(function(e){e.dispose()})},o.prototype.validate=async function(){return this.shouldValidate=!0,await this.getPreview(),!this.hasError()},o.prototype.getPreview=async function(){const e=JSON.stringify(this.getConfiguration());if(this._lastState===e)return;this._lastState=e;const r=this.accessKey.input(),o=this.secretAccessKey.input(),a=this.bucket.input(),s=this.prefix.input(),l=this.sessionToken.input();if(t(r))return this.hasError(this.shouldValidate),void this.errorMessage("Access Key ID is required.");if(t(o))return this.hasError(this.shouldValidate),void this.errorMessage("Secret Access Key is required.");if(t(a))return this.hasError(this.shouldValidate),void this.errorMessage("Bucket is required.");if(t(s))return this.hasError(this.shouldValidate),void this.errorMessage("Prefix is required.");this.shouldValidate=!0,this.preview.input("Generate Preview..."),this.errorMessage(""),this.totalBytes(0),this.pending(!0);const c=this;let u=!1;try{const t=await n.getS3Preview(r,o,a,s,l);if(e!==c._lastState)return void(u=!0);if(t.hasError)return c.hasError(!0),c.errorMessage(t.errorMessage),void c.preview.input("Failed to generate preview...");if(0===t.keys.length)return c.hasError(!0),void c.errorMessage("No files found!");const d=t.totalBytes,h=t.keys;c.hasError(!1),c.totalBytes(d);const p=i.bytesToString(d);let f;t.truncated?(f=`Only showing first ${h.length} files\n`,f+=`Over ${p}\n`):(f=`Number of files: ${h.length}\n`,f+=`Size: ${p}\n`),f+=`\n${h.join("\n")}`,c.preview.input(f)}finally{u||c.pending(!1)}},o.prototype.getConfiguration=function(){return{type:"S3",bucket:this.bucket.input(),credentials:{accessKey:this.accessKey.input(),secretAccessKey:this.secretAccessKey.input(),sessionToken:this.sessionToken.input()},keys:[],prefixes:[this.prefix.input()]}},o}),define("Views/Dashboard/AddData/AzureForm",["Core/ReactInterop"],function(e){"use strict";class t extends e.Component{constructor(){super({tag:"ion-azure-upload-form"})}validate(){return this.element.validate()}totalBytes(){return 0}getConfiguration(){return this.element.configuration}}return t}),define("Views/Dashboard/AddData/SourceData",["../../../Core/createDomId","Core/defaultValue","knockout"],function(e,t,n){"use strict";Cesium.Check;const i=Cesium.defined;Cesium.DeveloperError;return function(r){const o=(r=t(r,Cesium.Frozen.EMPTY_OBJECT)).name,a=r.body,s=r.parent,l=i(a);this.domId=e(),this.path=o,this.warning=n.observable(!1),this.warningMessage=n.observable(""),this.visible=l,this.size=l?a.size:0,this.body=a,this.parent=s}}),define("text!Views/Help/AssetUploadHelp.md",[],function(){return'Drag and drop multiple files and directories onto this page or click the <label class="btn btn-primary btn-xs btn-no-action">Add files...</label> button.\n\n<div data-bind="if: isAssetImportS3Enabled">\n<p>You can tile data from an Amazon S3 bucket by clicking the <label class="btn btn-primary btn-xs btn-no-action">Add from S3...</label> button.</p>\n</div>\n\n<div data-bind="if: isAssetImportAzureEnabled">\n<p>You can tile data from from Azure by clicking the <label class="btn btn-primary btn-xs btn-no-action">Add from Azure...</label> button.</p>\n</div>\n\n<div data-bind="if: isPublicInternetAccessEnabled">\n<p>For a full list of supported file types, see <a href="https://cesium.com/learn/3d-tiling/tiler-data-formats/">Tiler Data Types and Formats</a></p>\n</div>\n'}),define("Views/Dashboard/AddData/SketchfabForm",["Core/isStringEmptyOrWhitespace","Core/ReactInterop","knockout"],function(e,t,n){"use strict";const i=Cesium.defined;function r(e){this.model=e,this.ready=n.observable(!1),this.hasError=n.observable(!1),this.errorMessage=n.observable(""),this.card=new t.Component({tag:"ion-model-card",properties:n.pureComputed(function(){return{model:e()}})})}return r.prototype.validate=function(){const t=this.model().uid;if(i(t)&&e(t))return this.hasError(!0),void this.errorMessage("Model ID is required.");this.hasError(!1)},r.prototype.getConfiguration=function(){return{type:"SKETCHFAB",modelId:this.model().uid}},r}),define("Core/isViewportMobile",[],function(){"use strict";function e(){return e._implementation()}return e._implementation=function(){return window.matchMedia("(max-width: 768px)").matches},e}),define("Core/LocalStorage",[],function(){"use strict";const e=Cesium.defined,t="cesium-ion-",i={getValue:function(i){try{if(e(window.localStorage))return window.localStorage.getItem(t+i)}catch(n){}},setValue:function(i,r){try{e(window.localStorage)&&window.localStorage.setItem(t+i,r)}catch(n){}},remove:function(i){try{e(window.localStorage)&&window.localStorage.removeItem(t+i)}catch(n){}}};return i}),define("Core/OAuthStorage",["./LocalStorage"],function(e){"use strict";const t=Cesium.defined,n=Cesium.Check;return{save(i,r,o=Cesium.Frozen.EMPTY_OBJECT){t(r)&&n.typeOf.string("redirect",r),n.typeOf.object("query",o);const a=Cesium.createGuid(),s={state:a,query:o,redirect:r};return e.setValue(i,JSON.stringify(s)),a},consume(t){const n=e.getValue(t);if(n){e.remove(t);try{return JSON.parse(n)}catch(i){return void console.error("Failed to parse saved state",i)}}}}}),define("Views/Components/LinkSketchfabAccountButton",["Core/isViewportMobile","Core/createDomId","Core/defaultValue","Core/OAuthStorage","Core/AppData","jquery","knockout"],function(e,t,n,i,r,o){"use strict";const a=Cesium.defined,s=Cesium.Resource;function l(e){e=n(e,Cesium.Frozen.EMPTY_OBJECT),this.id=t(),this.width=300,this.placement=n(e.placement,"bottom"),this.xsPlacement=n(e.xsPlacement,this.placement),this.confirmText='<div style="margin-bottom: 16px"><div class="bold" style="margin-bottom: 5px">Link with Sketchfab?</div> Link your Cesium ion account with your Sketchfab account to start importing Sketchfab models into Cesium ion.</div>',this.buttonText="Link"}return l.prototype.compositionComplete=function(){const t=this.buttonText,n=this.width,a=this;let l;o(`#${this.id}`).popover({html:!0,sanitize:!1,content:function(){return`<div style="width: ${n}px">${a.confirmText}</div><div class="regenerate-default-token-button-buttons"><button type="button" class="btn btn-primary okay">${t}</button> <button class="btn btn-default cancel" type="button">Don't ${t.toLowerCase()}</button></div>`},placement:function(){return e()?a.xsPlacement:a.placement},trigger:"manual"}).on("shown.bs.popover",function(){const e=o(this),t=e.attr("aria-describedby"),n=o(`#${t}`);n.find("button.okay").click(function(){const e=new s({url:"https://sketchfab.com/oauth2/authorize",queryParameters:{response_type:"code",client_id:r.sketchfabClientId,redirect_uri:`${window.location.origin}/sketchfabsignin`}}),t=i.save("sketchfab-login","/addAsset/sketchfab?sortBy=-likeCount");e.setQueryParameters({state:t}),window.location=e.url}),n.find("button.cancel").click(function(){e.popover("hide")}),l=function(t){e.is(t.target)||0!==e.has(t.target).length||0!==n.has(t.target).length||e.popover("hide")},document.body.addEventListener("click",l)}).on("hidden.bs.popover",function(e){o(e.target).data("bs.popover").inState.click=!1}).on("hide.bs.popover",function(){document.body.removeEventListener("click",l)})},l.prototype.onLinkSketchfabAccountClick=function(){o(`#${this.id}`).popover("show")},l.prototype.detached=function(){const e=o(`#${this.id}`);a(e.popover)&&e.popover("destroy")},l}),define("Views/Dashboard/AddData/AssetUpload",["Core/defaultValue","Core/isStoriesFrame","../../../Core/find","../../../Core/scrollIntoViewIfNeeded","../../../Core/Services","../../../Core/Units","../../../Core/defer","../../../Core/Feature","../../../Core/Analytics","../../Components/ContextualHelp","../../Components/FileUploadList","../../Components/Form/FormHelper","../../Components/Form/SelectInputOption","./AssetForms/CaptureAssetForm","./AssetForms/CityGmlAssetForm","./AssetForms/ImageryAssetForm","./AssetForms/KmlTilesAssetForm","./AssetForms/ModelAssetForm","./AssetForms/BimCadAssetForm","./AssetForms/ModelTilesAssetForm","./AssetForms/PointCloudAssetForm","./AssetForms/TerrainAssetForm","./AssetForms/TerrainDatabaseAssetForm","./AssetForms/TilesAssetForm","./AssetForms/VectorAssetForm","./AssetForms/ReconstructAssetForm","./S3Form","./AzureForm","./SourceData","toastr","knockout","text!Views/Help/AssetUploadHelp.md","./SketchfabForm","plugins/router","../../Components/LinkSketchfabAccountButton"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,w,_,x,S,T,A,C,E,k,I,P,D,O,M,L){"use strict";const R=Cesium.Check,N=Cesium.defined,F=(Cesium.DeveloperError,Object.freeze({NONE:"NONE",S3:"S3",AZURE:"AZURE"}));function U(e,n,i){const a=P.observableArray(),l=P.observable(),u=P.observable(),k=P.observable(),I=P.observable(),M=P.pureComputed(function(){let e=0;return a().forEach(function(t){e+=t.size}),e}),R=new d(!1);this.formHelper=R;const U=[m,_,x,f,g,p,y,w,S,T.KML,T.CZML,T.GeoJSON,b];s.isEnabledForUser(s.User.RECONSTRUCT_MESH,r.userObject())&&U.push(A);const V=[p,y];t()||U.push(v);const B=P.pureComputed(function(){const e=[],t=this.allowAllTypes();return U.forEach(n=>{(t||n.isEligible(a())||this.sketchfabMode()&&V.includes(n))&&e.push(new h(n.displayName,n))}),e},this),$=R.createSelectInput({label:"What kind of data is this?",required:!1,input:P.pureComputed({read:function(){return u()},write:function(e){""===e&&(e=void 0),this.selectType(e)}},this),disabled:P.pureComputed(function(){return B().length<2}),options:B});this.sourceSelect=$;const H=P.pureComputed(function(){let e=[];const t=this._quota();if(this.cloudImportPanel()){return this.cloudImportPanel().totalBytes()>t&&s.isEnabledForServer(s.Server.BILLING)&&e.push(`The total size of the selected files is larger than your available storage size of ${o.bytesToString(t)}`),e}const l=a();if(0===l.length)return[];l.forEach(function(e){e.warningMessage(""),e.warning(!1)});const c=u(),d=M();if(!(r.isAdmin()&&(N(n())||i()))&&d>t&&s.isEnabledForServer(s.Server.BILLING)&&e.push(`The total size of the selected files is larger than your available storage size of ${o.bytesToString(t)}`),N(c))e=e.concat(c.validate(l));else{let t,n=this.allowAllTypes();if(!n&&!this.sketchfabMode())for(t=0;t<U.length;t++)if(U[t].isEligible(l)){n=!0;break}n||e.push('Selected files are not supported. For a full list of supported file types, see <a href="https://cesium.com/learn/3d-tiling/tiler-data-formats/" target="_blank" rel="noopener">Tiler Data Types and Formats</a>')}return e},this),G=P.pureComputed(function(){return 0!==H().length});this._quota=P.observable(Number.MAX_VALUE),this.close=e,this.userId=n,this.isAdmin=P.observable(r.isAdmin()),this.files=a,this.model=P.observable(),this.isProcessingSketchfab=P.observable(!1),this.errorText=void 0,this.showError=P.observable(!1),this._sketchfabModelId=P.observable(),this.showPrefixPanel=P.observable(!1),this.tooltip=P.pureComputed(function(){if(!N($.input()))return"";const e=$.input().tooltip;return"string"==typeof e?e:e()}),this.hasValidSource=P.pureComputed(function(){return N($.input())&&!G()}),this.uploadButtonTooltip=P.pureComputed(function(){return G()?"Please address form errors":N(u())?"":"Use the above panel to select the asset type"}),this.archiveToggleField=R.createToggle({label:"Make available for download",value:!1,disabled:P.pureComputed(function(){const e=I();return!N(e)||!e.isArchivable()})});const j=P.pureComputed({read:function(){const e=l();if(N(e))return e;const t=a();if(0===t.length)return"";let n;const i=u();N(i)&&(n=i.getPrimaryFile(a())),N(n)||(n=t[0]);let r=n.path;return N(n.parent)&&(r=n.parent.path),r.substring(0,r.lastIndexOf("."))},write:function(e){l(e)}});this.nameField=R.createTextInput({label:"Asset name",input:j,required:i}),this.prefixField=R.createTextInput({label:"Asset Depot Prefix",input:k,required:this.showPrefixPanel}),this.showFilePanel=P.pureComputed(function(){return a().length>0}),this.linkSketchfabAccountButton=new L({placement:"right",xsplacement:"bottom"}),this.isArchivable=P.pureComputed(function(){const e=I();return!N(e)||e.isArchivable()}),this.bytes=M,this.hasErrors=G,this.errorMessages=H,this.showAssetForm=P.pureComputed(function(){const e=I();return N(e)&&e.hasConfiguration()}),this.assetForm=I,this.contextualHelp=new c(D,".add-data"),this.selectedType=u,this.assetTypes=U,this.sketchfabTypes=V,this.isPremium=i,this.defaultToggle=R.createToggle({label:"Default"}),this.descriptionField=R.createMarkdownTextArea({label:"Description",placeholder:"Enter a description...",required:i}),this.showSelectedTypeMessage=P.observable(!1),this.allowAllTypes=P.pureComputed(function(){return this._failedZip()||this.cloudImportMode()!==F.NONE||this.showPrefixPanel()},this),this._failedZip=P.observable(!1),this.selectType=this.selectType.bind(this),this.removeFile=this.removeFile.bind(this),this._formHelper=R,this._initializedTypes={},this._fileListScrollContainer=void 0,this.s3Panel=new C,this.azurePanel=new E,this.cloudImportMode=P.observable(F.NONE);const z=this;this.cloudImportPanel=P.pureComputed(function(){switch(z.cloudImportMode()){case F.S3:return z.s3Panel;case F.AZURE:return z.azurePanel}}),this.sketchfabMode=P.pureComputed(()=>N(this._sketchfabModelId())&&""!==this._sketchfabModelId()&&r.sketchfabUsername()),this.sketchfabForm=new O(this.model),this.isAssetImportS3Enabled=s.isEnabledForServer(s.Server.ASSET_IMPORT_S3),this.isAssetImportAzureEnabled=s.isEnabledForServer(s.Server.ASSET_IMPORT_AZURE),this.isAssetArchivesEnabled=s.isEnabledForServer(s.Server.ASSET_ARCHIVES_FULL),this.isAssetDepotFromPrefixEnabled=s.isEnabledForServer(s.Server.ASSET_DEPOT_FROM_PREFIX),this.isPublicInternetAccessEnabled=s.isEnabledForServer(s.Server.PUBLIC_INTERNET_ACCESS),this.isSketchfabImportEnabled=P.observable(s.isEnabledForUser(s.User.SKETCHFAB,r.userObject())),this.isSketchfabAccountLinked=P.observable(this.isSketchfabImportEnabled()&&N(r.sketchfabUsername()))}async function V(e){if(/\.kmz$/i.test(e.name)||!N(e.slice))return!1;const t=e.slice(0,Math.min(4,e.size)),n=a(),i=new FileReader;return i.addEventListener("load",function(){n.resolve(i.result.byteLength>=4&&1347093252===new DataView(i.result).getUint32(0,!1))}),i.addEventListener("error",function(){n.reject(i.error)}),i.readAsArrayBuffer(t),n.promise}async function B(e,t,n){let i,r=!1;const o=new Promise((e,t)=>{i=setTimeout(function(){console.log("Timed out while enumerating zip"),r=!0,t()},1e3)});const a=async function(e,t,n){const o=await U._readZipEntries(e);if(o.length>5e3)throw new Error("Zip file contains too many entries.");let a;for(const i of o){if(r)break;if(i.directory)continue;const e=new k({name:i.filename,parent:n});t.push(e),a||(a={sourceData:e,entry:i})}a.sourceData.body=new File([await a.entry.getData(new zip.BlobWriter)],a.sourceData.name),clearTimeout(i)}(e,t,n);await Promise.race([a,o])}return U.prototype.addFromSketchfab=async function(){M.navigate("/addAsset/sketchfab?sortBy=-likeCount")},U.prototype.activate=function(){this.loadData()},U.prototype.deactivate=function(){this.showError(!1)},U.prototype.loadData=async function(){try{const e=new URLSearchParams(window.location.search).get("modelId");if(N(e)){this.isProcessingSketchfab(!0),this._sketchfabModelId(e);const t=await r.getSketchfabModel(e);if(!N(t)||"Not found."===t.detail)return this.errorText="Sketchfab model id provided was invalid.",void this.showError(!0);this.model(t),this.nameField.input(`${this.model().name} (Sketchfab)`),this.isProcessingSketchfab(!1)}const t=await r.getStorage();this._quota(t.available)}catch(e){this.errorText="Something went wrong",this.showError(!0)}},U.prototype.addFromAzure=function(){this.cloudImportMode(F.AZURE)},U.prototype.addFromS3=function(){this.cloudImportMode(F.S3)},U.prototype.addFromPrefix=function(){this.showPrefixPanel(!0)},U.prototype.detached=function(){this.s3Panel.destroy()},U.prototype.compositionComplete=function(){this._fileListScrollContainer=document.getElementById("assetUploadFiles")},U.prototype.updateEligibleTypes=function(){const e=this.files(),t=this.assetTypes.filter(function(t){return t.isEligible(e)});if(1===t.length)this.selectType(t[0]);else{const n=this.selectedType();!N(n)||0!==t.length&&n.isEligible(e)||this.selectType(void 0)}},U.prototype.bytesToString=o.bytesToString,U.prototype.onFileSelect=async function(e,t){R.defined("event",t);const n=t.target;await this.addFiles(n.files),n.value=""},U.prototype.addFiles=async function(t){const n=this,i=[],r=[];try{for(let o=0;o<t.length;o++){const a=t[o];r.push(V(a).then(function(t){const r=new k({name:e(a.__ionKey,a.name),body:a});if(i.push(r),t)return B(a,i,r).catch(function(){n._failedZip(!0)})}))}await Promise.all(r)}catch(o){}P.utils.arrayPushAll(n.files,i),n.updateEligibleTypes()},U.prototype.removeFile=function(e){R.defined("file",e);const t=[e];this.files().forEach(function(n){n.parent===e&&t.push(n)}),this.files.removeAll(t),this.updateEligibleTypes()},U.prototype.selectType=function(e){if(e!==this.selectedType()){if(N(e)){let t=this._initializedTypes[e.displayName];N(t)||(t=new e(this.files,this.nameField.input,this.descriptionField.input),this._initializedTypes[e.displayName]=t),this.assetForm(t)}else this.assetForm(void 0);this.selectedType(e),this.showSelectedTypeMessage(!1)}},U.prototype.upload=async function(){const e=this.isPremium(),o=this.assetForm();let a=this.files();const s=this.cloudImportPanel()?this.cloudImportPanel().validate():void 0,c=this.sketchfabMode()?this.sketchfabForm.validate():void 0,d=this.selectedType();if(!this._formHelper.isValid()||!N(d)||this.hasErrors()||!N(o)||!o.isValid()){N(d)||this.showSelectedTypeMessage(!0);const e=n(a,function(e){return e.warning()});return void(N(e)&&i(document.getElementById(e.domId),this._fileListScrollContainer))}const h=this.userId(),p=N(h),f=p||e;a=a.slice();const m=o.getAssetMetadata();p?m.userId=h:e&&(m.isDefault=this.defaultToggle.input());let g=!1;if(this.isArchivable()&&(g=this.archiveToggleField.input()),this.showPrefixPanel()){m.prefix=this.prefixField.input();const e=r.postAdminPremiumAssets(m);this.close.raiseEvent(e)}else if(s){if(!(await s))return;if(m.from=this.cloudImportPanel().getConfiguration(),t())return void parent.postMessage({source:"ion",metadata:m,archiveToggled:g},window.location.origin,[]);this.close.raiseEvent(r.postAssets(m).then(e=>this._addArchiving(e,g)).catch(e=>{console.error(e),I.error(r.getErrorMessage(e),"There was a problem with creating the asset")}))}else if(this.sketchfabMode()){if(await c,this.sketchfabForm.hasError())return;if(m.from=this.sketchfabForm.getConfiguration(),m.attribution=`<img src="https://static.sketchfab.com/img/press/logos/sketchfab-logo.svg" height="20" valign="bottom"> [${this.model().user.displayName}](${this.model().license.url})`,m.description=`[Source on Sketchfab](${this.model().viewerUrl})`,t())return void parent.postMessage({metadata:m,archiveToggled:g,source:"ion"},window.location.origin,[]);const e=await r.postAssets(m);l.sendEvent4(l.action.CREATE_ITEM,{item:"Asset",item_id:this.model().uid,item_name:this.model().name}),this._addArchiving(e,g),this.close.raiseEvent()}else{if(t()){const e=[],t=[];for(let n=0;n<a.length;n++){const i=a[n].body;N(i)&&(e.push(i),t.push(a[n].path))}return void parent.postMessage({metadata:m,bodies:e,keys:t,archiveToggled:g,source:"ion"},window.location.origin,[])}let n;n=f?e?r.postAdminPremiumAssets(m):r.postAdminAssets(m):r.postAssets(m).then(e=>this._addArchiving(e,g));const i=u.upload(m,a,n);this.close.raiseEvent(i)}},U.prototype.reset=function(){this.assetForm(void 0),this.selectedType(void 0),this.nameField.input(void 0),this.descriptionField.input(""),this.prefixField.input(void 0),this.defaultToggle.input(!1),this.files.removeAll()},U.prototype.cancel=function(){t()?parent.postMessage({source:"ion",cancel:!0},window.location.origin,[]):(this.reset(),this.close.raiseEvent())},U.prototype._addArchiving=async function(e,t){if(t){try{await r.postAssetArchiveDeprecated(e.assetMetadata.id)}catch(n){console.error(n),I.error(r.getErrorMessage(n),"The asset was created but there was an error enabling archiving.")}await r.getStorage()}return e},U._readZipEntries=async function(e){const t=new zip.ZipReader(new zip.BlobReader(e));return await t.getEntries()},U}),define("Views/Dashboard/AddData/AddDataShell",["Core/defaultValue","Core/isStoriesFrame","./AssetUpload","knockout","plugins/router"],function(e,t,n,i,r){"use strict";const o=Cesium.defined,a=Cesium.Event;function s(s){const l=new a;this.showHeader=!t(),this.showFooter=!t();const c=i.observable(),u=i.observable(!1),d=new n(l,c,u);this.assetUpload=d,this._close=l,this._userId=c,this._isPremium=u;const h=this;s=e(s,function(e){const t=c();o(t)?r.navigate(`/admin/userassets/${t}`):u()?r.navigate("/admin/assetdepot"):"NONE"!==h.assetUpload.cloudImportMode()&&o(e)?e.then(function(e){o(e)&&o(e.assetMetadata)&&(e=e.assetMetadata),o(e)&&o(e.id)?r.navigate(`/assets/${e.id}`):r.navigate("/assets")}):r.navigate("/assets")}),this._closeCallback=function(e){s(e)},this._removeEventListener=void 0,this.reset()}return s.prototype.canActivate=function(e){if(/\/admin\/addasset/i.test(window.location.pathname)){if(!o(e))return{redirect:"admin/userdata/"};this._userId(e)}else/\/admin\/addpremiumasset/i.test(window.location.pathname)&&this._isPremium(!0);return!0},s.prototype.activate=function(){this._removeEventListener=this._close.addEventListener(this._closeCallback),this.reset()},s.prototype.onFileDragDrop=function(e){this.assetUpload.addFiles(e)},s.prototype.cancel=function(){this._close.raiseEvent()},s.prototype.reset=function(){this.assetUpload.reset()},s.prototype.detached=function(){this._removeEventListener()},s}),define("Views/shell",["Core/isStoriesFrame","../Core/AppData","../Core/Analytics","../Core/CookieBanner","../Core/createChangelogPopover","../Core/createSupportPopover","../Core/getDocumentBaseUri","../Core/Services","../Core/defaultValue","../Core/defer","../Core/Feature","../Core/isRouteEnabled","../Core/ReactInterop","./Components/FileUploadList","./Components/OnScreenHelp/OnScreenHelp","./Components/switchProfile","./Dashboard/AddData/AddDataShell","knockout","plugins/router","toastr","Uri"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,w){"use strict";const _=Cesium.defined;function x(e){if(!s.isSignedIn())return!1;let t=!1;const n=e.dataTransfer.types;if(_(n))for(let r=0;r<n.length;r++)if(/^Files$/i.test(n[r])){t=!0;break}if(!t)return!1;const i=b.activeItem();return(!_(i)||"function"!=typeof i.disableDrop||!i.disableDrop())&&(e.stopPropagation(),e.preventDefault(),!0)}function S(e,t){const n=c();if(!e.isDirectory){const i=e.fullPath.replace(/^(\/|\\)/,"");return e.file(function(e){e.__ionKey=i,t.push(e),n.resolve()},function(e){n.reject(e)}),n.promise}const i=[],r=e.createReader(),o=function(e){n.reject(e)},a=function(e){if(0!==e.length)return e.forEach(function(e){i.push(S(e,t))}),void r.readEntries(a,o);Promise.all(i).then(function(){n.resolve()}).finally(o)};return r.readEntries(a,o),n.promise}window.addEventListener("beforeunload",function(e){const t=b.activeItem();if(_(t)&&_(t.onBeforeUnload)){const n=t.onBeforeUnload();return void(_(n)&&(e.returnValue=n))}p.hasUploadsInProgress()&&(e.returnValue="File uploads in progress, leaving will cancel the upload.")}),b.guardRoute=function(e,n){const i=n.fragment;if(s.initError)return"unavailable"===i||"unavailable";if("unavailable"===i)return"/";if(!d.forActiveUser(n.config))return"notfound";if(!s.isSignedIn()&&u.isEnabledForServer(u.Server.MULTI_USER)&&!/^(signin|epicsignin|signup|signout|viewer|reset|requestreset|completeSignUp|bentleysignin|githubsignin|googlesignin|sketchfabsignin|opensource|changelog|notfound|webgl|error)(\/|$)/.test(i)){let e=`signin/${i}`;const t=n.queryString;return _(t)&&(e+=`?${t}`),e}if("PAYMENT_EXPIRED"===s.accountDisabledReason()&&"account/billing/update-payment"!==i&&"signout"!==i)return"account/billing/update-payment";if(s.isSignedIn()&&!s.verified()&&!s.isTeam()&&!i.match(/^signin(\/.+)?/)&&"account/email-verification-required"!==i&&"signout"!==i){const e=_(n.queryString)?`${n.fragment}?${n.queryString}`:n.fragment;return e?`account/email-verification-required?redirect=${encodeURIComponent(e)}`:"account/email-verification-required"}if(s.isSignedIn()&&s.verified()&"account/email-verification-required"===i)return"account/email-verification";if(!s.isAdmin()&&/^admin/.test(i))return"notfound";if(!s.isTeam()&&/^account\/teamsettings/.test(i))return"notfound";if(s.isTeam()&&!s.isOwner()&&(/^account\/teamsettings/.test(i)||/^account\/billing/.test(i)||/^account\/license/.test(i)))return"notfound";if(s.isTeam()&&/^account\/delete$/.test(i))return"notfound";if(s.isTeam()&&/^account$/.test(i))return"notfound";if(s.isTeam()&&/^account\/teams(\/|$)/.test(i))return"notfound";if(u.isEnabledForServer(u.Server.LICENSE_TRACKING)){const e=!s.isTeam()||s.isOwner(),r=t.licenseInfo.standardLicenseVersion;if(s.isSignedIn()&&!s.isEmployee()&&e&&!s.hasSignedLicense()){if(s.isCommunityUser()){if("terms-of-service"===i||"signout"===i||"account/email-verification-required"===i)return!0;const e=_(n.queryString)?`${n.fragment}?${n.queryString}`:n.fragment;return`terms-of-service?redirect=${encodeURIComponent(e)}`}const e=`licenseeVisitedAccount-${r}`;if(!sessionStorage.getItem(e)&&(sessionStorage.setItem(e,"1"),"account"!==i&&"signout"!==i))return!!_(n.queryString)||"account/license"}}return!0};let T=!0;return{router:b,leftNav:v.pureComputed(function(){return v.utils.arrayFilter(b.navigationModel(),function(e){return e.settings.leftSide&&d.forActiveUser(e)})}),gravatar:v.pureComputed(function(){if(!u.isEnabledForServer(u.Server.PUBLIC_INTERNET_ACCESS))return"/Images/blank-profile-24.png";return`https://www.gravatar.com/avatar/${s.md5Email()}.jpg?s=24&d=mp`}),verified:s.verified,username:s.username,teams:s.teams,isTeam:s.isTeam,isPOUser:s.isPOUser,areTeamsEnabled:u.isEnabledForServer(u.Server.TEAMS),areLabelsEnabled:u.isEnabledForServer(u.Server.LABELS),isOwner:s.isOwner,currentTeamUsersUsername:s.currentTeamUsersUsername,hasTeams:v.pureComputed(function(){return s.teams().length>0}),multiUserEnabled:u.isEnabledForServer(u.Server.MULTI_USER),aggreedToCookies:i.aggreedToCookies,hideCookieBanner:i.hide,dataToUpload:void 0,showHeader:v.observable(!0),showFooter:v.observable(!0),switchProfile:async function(e){await m(e.username,e.id)},returnToProfile:async function(){await m(s.username())},fileUploadList:p,onScreenHelp:f,toggleOnScreenHelp:function(){f.toggle()},isBillingEnabled:u.isEnabledForServer(u.Server.BILLING),isCesiumHostedIon:u.isEnabledForServer(u.Server.CESIUM_HOSTED_ION),isOauthProviderEnabled:u.isEnabledForServer(u.Server.OAUTH_PROVIDER),isPublicInternetAccessEnabled:u.isEnabledForServer(u.Server.PUBLIC_INTERNET_ACCESS),isAdmin:s.isAdmin,planCode:s.planCode,isEmployee:s.isEmployee,goToBilling:function(){b.navigate("account/billing")},binding:function(e){h.convertToDurandalContextProvider(e)},activate:function(){let e=[{route:["","stories(/:storyid)"],title:"Stories",moduleId:"Views/Dashboard/Stories/StoriesShell",hash:"stories",nav:!0,settings:{leftSide:!0}},{route:["assets(/:assetid)"],title:"My Assets",moduleId:"Views/Dashboard/Assets/AssetsShell",hash:"assets",nav:!0,settings:{leftSide:!0}},{route:["addAsset/sketchfab"],title:"Search Sketchfab",moduleId:"Views/Dashboard/Assets/ListSketchfabAssets",nav:!1,requires:[u.User.SKETCHFAB,()=>_(s.sketchfabUsername())]},{route:["assetdepot(/:assetid)"],title:"Asset Depot",moduleId:"Views/Dashboard/PremiumAssets/PremiumAssetsShell",hash:"assetdepot",nav:!0,settings:{leftSide:!0},requires:[u.Server.ASSET_DEPOT]},{route:["clips"],title:"Clips",moduleId:"Views/Dashboard/Archives/List",nav:!0,settings:{leftSide:!0},requires:[u.User.ASSET_ARCHIVES_CLIPS]},{route:["clips/create"],title:"Create Clip",moduleId:"Views/Dashboard/Archives/Create",nav:!1,requires:[u.User.ASSET_ARCHIVES_CLIPS]},{route:["tokens"],title:"Access Tokens",moduleId:"Views/Dashboard/Tokens/TokensShell",nav:!0,hash:"tokens",settings:{leftSide:!0},requires:[u.Server.TOKENS]},{route:["usage"],title:"Usage",moduleId:"Views/Dashboard/Usage/Usage",hash:"usage",settings:{leftSide:!0},nav:!0,requires:[u.Server.USAGE]},{route:["account/billing/change-subscription"],title:"Change Subscription",moduleId:"Views/Account/ChangeSubscription",nav:!1,requires:[u.Server.BILLING]},{route:["account/billing/cancel-subscription"],title:"Cancel Subscription",moduleId:"Views/Account/CancelSubscription",nav:!1,requires:[u.Server.BILLING]},{route:["account/billing/update-payment"],title:"Update Payment",moduleId:"Views/Account/UpdatePayment",nav:!1,requires:[u.Server.BILLING]},{route:["account/mfa/setup"],moduleId:"Views/Account/SetupTwoFactorAuthentication",nav:!1,title:"Setup two factor authentication",requires:[u.User.MULTI_FACTOR_AUTHENTICATION]},{route:["account/mfa/authenticator-app"],moduleId:"Views/Account/AuthenticatorApp",nav:!1,title:"Authenticator app",requires:[u.User.MULTI_FACTOR_AUTHENTICATION]},{route:["account/mfa/recovery-codes"],moduleId:"Views/Account/RecoveryCodes",nav:!1,title:"Recovery codes",requires:[u.User.MULTI_FACTOR_AUTHENTICATION]},{route:["account/email-verification-required"],title:"Verify your email",moduleId:"Views/Account/EmailVerificationRequired",nav:!1},{route:["account/email-verification"],title:"Verify your email",moduleId:"Views/Account/EmailVerification",nav:!1},{route:["terms-of-service"],title:"Terms of Service Update",moduleId:"Views/Account/LicenseAgreementRequired",nav:!1,requires:[u.Server.LICENSE_TRACKING]},{route:["account*details"],title:"Your Profile",moduleId:"Views/Account/AccountShell",nav:!s.isTeam(),hash:"account",settings:{leftSide:!1},requires:[u.Server.MULTI_USER]},{route:["teamsettings*details"],title:"Your Profile",moduleId:"Views/Account/AccountShell",nav:s.isTeam(),hash:"account/teamsettings",settings:{leftSide:!1},requires:[u.Server.TEAMS]},{route:["admin*details"],title:"Administration",moduleId:"Views/Admin/AdminShell",nav:!0,hash:"admin",settings:{leftSide:!1},requires:[u.Server.MULTI_USER]},{route:["admin/settings"],title:"Settings",moduleId:"Views/Admin/Settings/Settings",nav:!0,settings:{leftSide:!0},requires:[()=>!u.isEnabledForServer(u.Server.MULTI_USER)]},{route:["signout"],title:"Sign out",moduleId:"Views/Auth/SignOut",nav:!0,hash:"signout",settings:{leftSide:!1},requires:[u.Server.MULTI_USER]},{route:["addasset"],title:"Add Asset",moduleId:"Views/Dashboard/AddData/AddDataShell",hash:"addasset",nav:!1},{route:["analyze-asset"],title:"Analyze Asset",moduleId:"Views/Dashboard/Assets/AnalyzeAsset",hash:"analyze-asset",requires:[u.User.REALITY_ANALYSIS],nav:!1},{route:["signin*details"],title:"Sign In",moduleId:"Views/Auth/SignIn",nav:!1,requires:[u.Server.MULTI_USER]},{route:["signup*details"],title:"Sign Up",moduleId:"Views/Auth/SignUp",nav:!1,requires:[u.Server.PASSWORD_AUTHENTICATION]},{route:["requestreset"],title:"Reset Password",moduleId:"Views/Auth/RequestPasswordReset",nav:!1,requires:[u.Server.PASSWORD_AUTHENTICATION]},{route:["reset(/:token)"],title:"Password Reset",moduleId:"Views/Auth/ResetPassword",nav:!1,requires:[u.Server.PASSWORD_AUTHENTICATION]},{route:["completeSignUp(/:token)*details"],title:"Complete Sign Up",moduleId:"Views/Auth/CompleteSignUp",nav:!1,requires:[u.Server.PASSWORD_AUTHENTICATION]},{route:["epicsignin*details"],title:"Complete Sign Up",moduleId:"Views/Auth/SignInEpic",nav:!1,requires:[u.Server.OAUTH_CLIENT]},{route:["githubsignin*details"],title:"Complete Sign Up",moduleId:"Views/Auth/SignInGitHub",nav:!1,requires:[u.Server.OAUTH_CLIENT]},{route:["googlesignin*details"],title:"Complete Sign Up",moduleId:"Views/Auth/SignInGoogle",nav:!1,requires:[u.Server.OAUTH_CLIENT]},{route:["sketchfabsignin*details*"],title:"Complete Sign Up",moduleId:"Views/Auth/SignInSketchfab",nav:!1,requires:[u.Server.OAUTH_CLIENT]},{route:["bentleysignin*details"],title:"Complete Sign Up",moduleId:"Views/Auth/SignInBentley",nav:!1,requires:[u.Server.OAUTH_CLIENT]},{route:["oauth"],title:"Allow Access",moduleId:"Views/Auth/Oauth",nav:!1,requires:[u.Server.OAUTH_PROVIDER]},{route:["tilesetLocationEditor(/:options)"],title:"3D Tiles Location Editor",moduleId:"Views/TilesetTransformEditor/TilesetTransformEditor",hash:"tilesetLocationEditor",nav:!1},{route:["webgl"],title:"WebGL Troubleshooting",moduleId:"Views/Static/WebGLTroubleshoot",hash:"webgl",nav:!1},{route:["notfound"],title:"Page Not Found",moduleId:"Views/Static/NotFound",nav:!1},{route:["changelog"],title:"Changelog",moduleId:"Views/Static/Changelog",nav:!1},{route:["opensource"],title:"Open Source Software",moduleId:"Views/Static/OpenSource",nav:!1},{route:["unavailable"],title:"Unavailable",moduleId:"Views/Static/Unavailable",nav:!1},{route:["error"],title:"Error",moduleId:"Views/Static/Error",nav:!1}];e=e.filter(d.forServer),b.map(e),b.buildNavigationModel(100),b.mapUnknownRoutes("Views/Static/NotFound");const t=this;b.on("router:route:activating",function(e,t){if(!u.isEnabledForServer(u.Server.CESIUM_HOSTED_ION))return;if(!s.isSignedIn())return void(T=!0);const n=_(t.queryParams);n&&_(t.queryParams.t)?(f.load(t.queryParams.t),T=!1):T&&(f.loadAnnouncement(s.getLastLogin(),n&&"announce"===t.queryParams.a),T=!1)}),b.on("router:navigation:complete",function(e){t.showHeader(l(e.showHeader,!0)),t.showFooter(l(e.showFooter,!0)&&u.isEnabledForServer(u.Server.CESIUM_HOSTED_ION)),e instanceof g&&_(t.dataToUpload)&&(e.onFileDragDrop(t.dataToUpload),t.dataToUpload=void 0)});const n=b.updateDocumentTitle;return b.updateDocumentTitle=function(e,t){return v.isObservable(e.documentTitle)&&(t.config.title=e.documentTitle),n(e,t)},b.activate({root:new w(a()).path(),pushState:!0})},compositionComplete:function(){r("whatsNew","#pageHost"),o("sendSupport",n.category.ION_DASHBOARD,n.label.APPLICATION),function(t){const n=document.getElementById("applicationHost");let i=0;async function r(e){if(!x(e))return!1;const r=e.dataTransfer;let o=r.files;const a=r.items;if(_(a)){const t=[],n=[];for(let e=0;e<a.length;e++){const i=a[e];let r;try{r=_(i.getAsEntry)?i.getAsEntry():i.webkitGetAsEntry()}catch(s){}_(r)&&n.push(S(r,t))}try{await Promise.all(n),o=t}catch(l){o=[],y.error(e)}}0!==o.length&&(i=0,n.classList.remove("dragging"),_(b.activeItem())&&"function"==typeof b.activeItem().onFileDragDrop?b.activeItem().onFileDragDrop(o):(t.dataToUpload=o,b.navigate("addasset")))}n.addEventListener("dragenter",function(e){if(!x(e))return!1;i++,n.classList.add("dragging")},!0),n.addEventListener("dragover",function(e){if(!x(e))return!1;0===i&&(i++,n.classList.add("dragging"))},!0),n.addEventListener("dragleave",function(e){if(!x(e))return!1;i--,0===i&&n.classList.remove("dragging")},!0),n.addEventListener("drop",r,!0),t._onDrop=r,e()&&(window.addEventListener("message",function(e){const n=e.data.files,i=e.data.paths;for(let t=0;t<n.length;t++)n[t].__ionKey=i[t];_(b.activeItem())&&"function"==typeof b.activeItem().onFileDragDrop?b.activeItem().onFileDragDrop(n):(t.dataToUpload=n,b.navigate("addasset"))}),parent.postMessage({ready:!0,source:"ion"},window.location.origin,[]))}(this);const t=document.getElementsByClassName("dashboard-navbar-logo")[0],i=document.getElementsByClassName("dashboard-navbar-links")[0];_(t)&&_(i)&&(t.style["max-width"]=`calc(100% - ${i.clientWidth}px)`)}}}),define("Views/Account/AccountShell",["../../Core/Analytics","Core/Feature","Core/isRouteEnabled","Core/Services","plugins/router","knockout"],function(e,t,n,i,r,o){"use strict";let a=[{route:["","account"],title:"Account",moduleId:"MyAccount",nav:!i.isTeam()},{route:["teamsettings"],title:"Team Settings",moduleId:"TeamSettings/TeamSettingsShell",hash:"account/teamsettings",nav:i.isTeam()&&i.isOwner(),requires:[t.Server.TEAMS]},{route:["billing"],title:"Billing",moduleId:"Billing",nav:!0,requires:[t.Server.BILLING,()=>!i.isTeam()||i.isTeam()&&i.isOwner()]},{route:["license"],title:"License",moduleId:"License",nav:!0,requires:[t.Server.LICENSE_TRACKING,()=>!i.isTeam()&&!i.isPOUser()||i.isOwner()]},{route:["labels(/:labelid)"],title:"Labels",moduleId:"Labels/LabelsShell",hash:"account/labels",nav:!0,requires:[t.Server.LABELS]},{route:["applications"],title:"Authorized Applications",moduleId:"AuthorizedApplications/AuthorizedApplicationsShell",hash:"account/applications",nav:!0,requires:[t.Server.OAUTH_PROVIDER]},{route:["developer(/:applicationid)"],title:"Developer Settings",moduleId:"DeveloperSettings/OAuthAppsShell",hash:"account/developer",nav:!0,requires:[t.Server.OAUTH_PROVIDER]},{route:["delete"],title:"Delete Account",moduleId:"DeleteAccount",hash:"delete",nav:!1,requires:[()=>!t.isEnabledForServer(t.Server.SAML_AUTHENTICATION)]},{route:["teams"],title:"Teams",moduleId:"Teams/TeamsPage",nav:!i.isTeam(),requires:[t.Server.TEAMS]},{route:["teams/create"],title:"Create a team",moduleId:"Teams/CreateTeam",nav:!1,requires:[t.Server.TEAMS]},{route:["*notfound"],title:"Page Not Found",moduleId:"../Static/NotFound",nav:!1}];a=a.filter(n.forServer);const s=r.createChildRouter().makeRelative({moduleId:"Views/Account",fromParent:!0}).map(a).buildNavigationModel();return s.guardRoute=n.guardFunction,e.trackRouter(s),{router:s,navigation:o.pureComputed(function(){return o.utils.arrayFilter(s.navigationModel(),n.forActiveUser)})}}),define("Views/Account/AuthenticatorApp",["../../Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-authenticator-app-page")}),define("text!Views/Help/BillingHelp.md",[],function(){return"Select your plan, make changes to your payment information, and view your billing history.\n"}),define("Views/Account/Billing",["../Components/ContextualHelp","Core/Feature","Core/PageLoadingState","Core/PlanCode","Core/Services","knockout","text!Views/Help/BillingHelp.md"],function(e,t,n,i,r,o,a){"use strict";const s=Cesium.JulianDate;function l(){this.serviceCallResponses=o.observable({billing:void 0,subscription:void 0}),this.contextualHelp=new e(a,".billing"),this.invoices=o.observableArray([]),this.hasInvoices=o.pureComputed(()=>this.invoices().length>0),this.hasExpiration=i.hasExpiration(r.planCode()),this.billingDisabled=!t.isEnabledForServer(t.Server.BILLING),this.isEmployee=r.isEmployee(),this.loadState=o.observable(n.IN_PROGRESS),this.isError=o.pureComputed(()=>this.loadState()===n.ERROR),this.isReady=o.pureComputed(()=>this.loadState()===n.READY),this.isInProgress=o.pureComputed(()=>this.loadState()===n.IN_PROGRESS),this._descending=o.observable(!0)}return l.prototype.activate=async function(){if(this.billingDisabled)this.loadState(n.READY);else try{const e=await r.getBilling(),t=await r.getSubscription(),i=await r.getLicenseSignature();this.serviceCallResponses({billing:e,subscription:t,signature:i});const o=e.invoices.map(function(e){const t=s.toGregorianDate(s.fromIso8601(e.createdAt));return{number:e.number,total:e.total.toFixed(2),state:e.state,createdAt:`${t.month}/${t.day}/${t.year}`,downloadUrl:`${r.apiEndpoint}invoice/${e.number}`}});this.invoices(this._descending()?o:o.reverse()),this.loadState(n.READY)}catch(e){console.error(e),this.loadState(n.ERROR)}},l.prototype.bindingComplete=function(e){const t=e.querySelector("ion-subscription-display"),{billing:n,subscription:i,signature:r}=this.serviceCallResponses();t.initialize({subscription:i,billing:n,signature:r}),t.addEventListener("subscription-reactivated",()=>{this.activate()}),t.addEventListener("licenseSignatureChanged",({detail:e})=>{t.update({signature:e})}),this.serviceCallResponses.subscribe(({billing:e,subscription:n})=>{t.updateBillingAndSubscription(e,n)})},l}),define("Views/Account/CancelSubscription",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-cancel-subscription-page")}),define("Views/Account/ChangeSubscription",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-change-subscription-page")}),define("Views/Account/DeleteAccount",["Core/Services","../Components/Form/FormHelper","knockout","plugins/router"],function(e,t,n,i){"use strict";function r(){const e=n.observable(!1),i=new t(!1);this.errorText=n.observable(""),this.usernameField=i.createTextInput({label:"Enter username to confirm account deletion",autofocus:!1,required:!0}),this.pending=e,this._formHelper=i}return r.prototype.deleteAccount=async function(){if(this.pending())return;if(!this._formHelper.isValid())return;this.pending(!0);const t=this;try{await e.deleteUsers(e.getCurrentUser().id,this.usernameField.input()),await e.signOut(),i.navigate("signin",{trigger:!0})}catch(n){t.errorText(e.getErrorMessage(n))}finally{t.pending(!1)}},r}),define("Views/Account/EmailVerification",["../../Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-email-verification-page")}),define("Views/Account/EmailVerificationRequired",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-email-verification-required-page",{showHeader:!1})}),define("Views/Account/License",["Core/ReactInterop","Core/Services"],function(e,t){"use strict";return{licenseDisplay:new e.Component({tag:"ion-user-license-signature-display",eventListeners:{licenseSignatureChanged:function(){t.refreshUser()}}})}}),define("Views/Account/LicenseAgreementRequired",["Core/ReactInterop","Core/Services"],function(e,t){"use strict";return e.createPage("ion-license-agreement-required-page",{showHeader:!1,eventListeners:{async licensesignaturechanged(){await t.refreshUser()}}})}),define("Views/Components/DeleteButton",["Core/defaultValue","../../Core/isViewportMobile","Core/createDomId","jquery","knockout"],function(e,t,n,i,r){"use strict";const o=Cesium.defined,a=Cesium.Event;function s(t){t=e(t,Cesium.Frozen.EMPTY_OBJECT);const i=e(t.buttonText,"Delete"),o=e(t.placement,"bottom");this.id=n(),this.width=e(t.width,180),this.placement=o,this.xsPlacement=e(t.xsPlacement,o),this.confirmText=e(t.confirmText,"Delete?"),this._confirmText="",this.disabled=e(t.disabled,!1),this.disabledText=e(t.disabledText,"Cannot be deleted"),this._disabledText="",this.lowerText=r.observable(t.hideLowerText?"":i),this.buttonText=r.observable(""===i?"Delete":i),this.delete=new a,this.data=t.data,this.verify=t.verify,this.viewUrl=t.viewUrl,this.pending=e(t.pending,r.observable(!1))}return s.prototype.compositionComplete=function(){const e=this.verify,n=this.buttonText(),a=this.width,s=this.delete,l=this.pending,c=this.data,u=this;let d;i(`#${this.id}`).popover({html:!0,sanitize:!1,content:function(){return r.unwrap(u.disabled)?`<div style="width: ${a}px">${u._disabledText}</div>`:`<div style="width: ${a}px">${u._confirmText}</div><div class="delete-button-buttons"><button type="button" class="btn btn-danger okay">${n}</button> <button class="btn btn-default cancel" type="button">Don't ${n.toLowerCase()}</button></div>`},placement:function(){return t()?u.xsPlacement:u.placement},trigger:"manual"}).on("show.bs.popover",function(){return!l()}).on("shown.bs.popover",function(){const t=i(this),n=t.attr("aria-describedby"),r=i(`#${n}`);r.find("button.okay").click(function(){if(o(e)){const n=r.find("input.verify");e(n.val())?(s.raiseEvent(c),t.popover("hide")):(r.addClass("has-error"),r.find("input.verify").addClass("bg-danger"))}else s.raiseEvent(c),t.popover("hide")}),r.find("button.cancel").click(function(){t.popover("hide")}),d=function(e){t.is(e.target)||0!==t.has(e.target).length||0!==r.has(e.target).length||t.popover("hide")},document.body.addEventListener("click",d)}).on("hidden.bs.popover",function(e){i(e.target).data("bs.popover").inState.click=!1}).on("hide.bs.popover",function(){document.body.removeEventListener("click",d)})},s.prototype.onDeleteClick=async function(){let e=this.confirmText;"function"==typeof e&&(e=e());let t=this.disabledText;"function"==typeof t&&(t=t());const n=this.id,r=await Promise.all([e,t]);this._confirmText=r[0],this._disabledText=r[1],i(`#${n}`).popover("show")},s.prototype.detached=function(){const e=i(`#${this.id}`);o(e.popover)&&e.popover("destroy")},s}),define("text!Views/Help/MyAccountHelp.md",[],function(){return'**Update your username or email** by entering the new values and clicking the <label class="btn btn-primary btn-xs btn-no-action">Update</label> button at the bottom of that panel.\n\n**Update your password** by entering your current password and new password and clicking the <label class="btn btn-primary btn-xs btn-no-action">Update</label> button below the password fields.\n\n**Unlink associated accounts** by clicking <span class="fa fa-trash fa-lg"></span>Delete</label> button you can unlink the associated third party accounts from ion.\n'}),define("Views/Account/MyAccount",["Core/Feature","Core/Services","../Components/ContextualHelp","../Components/Form/FormHelper","knockout","toastr","../Components/DeleteButton","text!Views/Help/MyAccountHelp.md","generated/ClientErrorCodes","Core/AppData","Core/OAuthStorage"],function(e,t,n,i,r,o,a,s,l,c,u){"use strict";const d=Cesium.Resource;function h(){const o=r.observable(!1),l=new i;this.isOauthClientEnabled=e.isEnabledForServer(e.Server.OAUTH_CLIENT),this.isSamlAuthentication=e.isEnabledForServer(e.Server.SAML_AUTHENTICATION),this.isMultiFactorAuthenticationEnabled=e.isEnabledForUser(e.User.MULTI_FACTOR_AUTHENTICATION),this.contextualHelp=new n(s,".my-account"),this.showLockedError=r.observable(!1);const u=new i(!1),p=u.createPasswordInputGroup(!0);this.currentPassword=p.currentPassword,this.newPassword=p.newPassword,this.confirmPassword=p.confirmPassword,this.passwordFormError=r.observable(""),this.verified=t.verified,this.googleUsername=t.googleUsername,this.gitHubUsername=t.gitHubUsername,this.epicUsername=t.epicUsername,this.sketchfabUsername=t.sketchfabUsername,this.isSketchfabEnabled=e.isEnabledForUser(e.User.SKETCHFAB,t.userObject()),this.bentleyUsername=t.bentleyUsername,this.pending=o,this._userFormHelper=l,this._passwordFormHelper=u;const f=new a({buttonText:"Unlink",confirmText:"Unlink Epic Account?",placement:"right",data:this}),m=new a({buttonText:"Unlink",confirmText:"Unlink Google Account?",placement:"right",data:this}),g=new a({buttonText:"Unlink",confirmText:"Unlink Github Account?",placement:"right",data:this}),v=new a({buttonText:"Unlink",confirmText:"Unlink Sketchfab Account?",placement:"right",data:this});this.bentleyDeleteButton=new a({buttonText:"Unlink",confirmText:"Unlink Bentley Account?",placement:"right",data:this}),this.epicDeleteButton=f,this.googleDeleteButton=m,this.gitHubDeleteButton=g,this.sketchfabDeleteButton=v,this._removeDeleteEpicEventListener=f.delete.addEventListener(h.prototype.unLinkEpicAccount,this),this._removeDeleteGitHubEventListener=g.delete.addEventListener(h.prototype.unLinkGitHubAccount,this),this._removeDeleteGoogleEventListener=m.delete.addEventListener(h.prototype.unLinkGoogleAccount,this),this._removeDeleteSketchfabEventListener=v.delete.addEventListener(h.prototype.unlinkSketchfabAccount,this),this._removeDeleteBentleyEventListener=this.bentleyDeleteButton.delete.addEventListener(h.prototype.unlinkBentleyAccount,this);const b=new d({url:"https://sketchfab.com/oauth2/authorize",queryParameters:{response_type:"code",client_id:c.sketchfabClientId,redirect_uri:`${window.location.origin}/sketchfabsignin`}});this._sketchfabResource=b}return h.prototype.submitPassword=async function(){if(this.pending())return;if(this.passwordFormError(""),!this._passwordFormHelper.isValid())return;this.pending(!0);const e=this;try{await t.changePassword({currentPassword:this.currentPassword.input(),newPassword:this.newPassword.input()}),o.success("Password has been updated."),e.currentPassword.input(""),e.newPassword.input(""),e.confirmPassword.input("")}catch(n){if(t.getError(n).code===l.ClientErrorCodes.TOO_MANY_FAILED_LOGIN_ATTEMPTS)return e.showLockedError(!0);e.passwordFormError(t.getErrorMessage(n))}finally{e.pending(!1)}},h.prototype.unLinkEpicAccount=async function(){try{await t.patchUser({epicId:null}),o.success("Epic account successfully unlinked")}catch(e){o.error(t.getErrorMessage(e),"Failed to unlink epic account")}},h.prototype.unLinkGitHubAccount=async function(){try{await t.patchUser({gitHubId:null}),o.success("Github account successfully unlinked")}catch(e){o.error(t.getErrorMessage(e),"Failed to unlink Github account")}},h.prototype.unlinkSketchfabAccount=async function(){try{await t.unlinkSketchfab(),o.success("Sketchfab account successfully unlinked")}catch(e){o.error(t.getErrorMessage(e),"Failed to unlink Sketchfab account")}},h.prototype.unlinkBentleyAccount=async function(){try{await t.patchUser({bentleyId:null}),o.success("Bentley account successfully unlinked")}catch(e){o.error(t.getErrorMessage(e),"Failed to unlink Bentley account")}},h.prototype.unLinkGoogleAccount=async function(){try{await t.patchUser({googleId:null}),o.success("Google account successfully unlinked")}catch(e){o.error(t.getErrorMessage(e),"Failed to unlink Google account")}},h.prototype.linkSketchfabAccount=async function(){const e=u.save("sketchfab-login","/account");this._sketchfabResource.setQueryParameters({state:e}),window.location=this._sketchfabResource.url},h.prototype.detached=function(){this._removeDeleteEpicEventListener(),this._removeDeleteGitHubEventListener(),this._removeDeleteGoogleEventListener(),this._removeDeleteSketchfabEventListener(),this._removeDeleteBentleyEventListener()},h.prototype.attached=function(e){e.querySelector("ion-edit-account-form").addEventListener("submitting-changed",e=>{this.pending(e.detail.isSubmitting)})},h}),define("Views/Account/RecoveryCodes",["../../Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-recovery-codes-page")}),define("Views/Account/SetupTwoFactorAuthentication",["../../Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-setup-two-factor-page")}),define("Views/Account/UpdatePayment",["Core/ReactInterop","Core/Services"],function(e,t){"use strict";const n=Cesium.defined;return class{constructor(){this.showHeader=!n(t.accountDisabledReason())}getView(){const{element:n,container:i}=e.createElementInContainer("ion-update-payment-page",{className:e.PAGE_CSS_CLASSNAME});return n.addEventListener("payment-updated",()=>{t.refreshUser()}),i}}}),define("Views/Admin/AdminShell",["../../Core/Analytics","../../Core/Feature","../../Core/isRouteEnabled","../../Core/Services","../Dashboard/AddData/AddDataShell","knockout","plugins/router"],function(e,t,n,i,r,o,a){"use strict";const s=Cesium.defined;Cesium.DeveloperError;let l=[{route:["","users(/:userid)","users(/:userid)"],title:"Users",moduleId:"Users/UsersShell",nav:!0,hash:"admin/users"},{route:["userassets(/:userid)"],title:"User Assets",moduleId:"UserData/UserDataShell",nav:!0,hash:"admin/userassets",requires:[t.Server.MULTI_USER]},{route:["","assetdepot(/:assetid)"],title:"Asset Depot",moduleId:"AssetDepot/AssetDepotShell",nav:!0,hash:"admin/assetdepot",requires:[t.Server.ASSET_DEPOT]},{route:["jobs"],title:"Jobs",moduleId:"Jobs",nav:!0,hash:"admin/jobs",requires:[t.Server.MULTI_USER]},{route:["settings*details"],title:"App Settings",moduleId:"Settings/SettingsShell",hash:"admin/settings",nav:!0},{route:["addasset(/:userid)"],title:"Add Asset",moduleId:"../Dashboard/AddData/AddDataShell",hash:"admin/addasset",nav:!1,requires:[t.Server.MULTI_USER]},{route:["addpremiumasset"],title:"Add Asset",moduleId:"../Dashboard/AddData/AddDataShell",hash:"admin/addpremiumasset",nav:!1},{route:["*notfound"],title:"Page Not Found",moduleId:"../Static/NotFound",nav:!1}];l=l.filter(n.forServer);const c=a.createChildRouter().makeRelative({moduleId:"Views/Admin",fromParent:!0}).map(l).buildNavigationModel();return c.guardRoute=n.guardFunction,e.trackRouter(c),{router:c,gravatar:o.pureComputed(function(){if(!t.isEnabledForServer(t.Server.PUBLIC_INTERNET_ACCESS))return"/Images/blank-profile-24.png";return`https://www.gravatar.com/avatar/${i.md5Email()}.jpg?s=24&d=mp`}),navigation:o.pureComputed(function(){return o.utils.arrayFilter(c.navigationModel(),n.forActiveUser)}),isAdmin:i.isAdmin,showHeader:!1,disableDrop:o.pureComputed(function(){return!(c.activeItem()instanceof r)}),onFileDragDrop:function(e){s(c.activeItem())&&c.activeItem().onFileDragDrop(e)},rightNav:[{url:"account",showGravatar:!0,title:i.username},{url:"",showGravatar:!1,title:"Exit Administration"},{url:"signout",showGravatar:!1,title:"Sign Out"}],compositionComplete:function(){const e=document.getElementsByClassName("admin-shell")[0],t=e.querySelector(".dashboard-navbar-logo"),n=e.querySelector(".dashboard-navbar-links");s(t)&&s(n)&&(t.style["max-width"]=`calc(100% - ${n.clientWidth}px)`)},addNewAsset:function(e){const t=c.activeItem();s(t)&&"function"==typeof t.addNewAsset&&t.addNewAsset(e)}}}),define("Views/Admin/Jobs",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-admin-jobs-page",{onActivate(e,t){e.query=t}})}),define("Views/Auth/CompleteSignUp",["Core/defaultValue","../../Core/Services","../Components/Form/FormHelper","knockout","plugins/router"],function(e,t,n,i,r){"use strict";const o=Cesium.defined;function a(){const e=new n,t=e.createPasswordInputGroup(!1);this.newPassword=t.newPassword,this.confirmPassword=t.confirmPassword,this.termsCheckbox=e.createCheckbox({label:'I agree to the Cesium ion <a href="https://cesium.com/legal/cookie-policy/" target="_blank">Cookie Policy</a>, <a href="https://cesium.com/legal/terms-of-service/" target="_blank">Terms of Service</a>, and <a href="https://cesium.com/legal/privacy-policy/" target="_blank">Privacy Policy</a>',validate:function(e){return e?"":"You must agree to the terms of service in order to create an account"}}),this.pending=i.observable(!1),this.formError=i.observable(""),this.viewUrl="Views/Auth/SignInShell.html",this.content="Views/Auth/CompleteSignUp.html",this.showHeader=!1,this._token=void 0,this._formHelper=e}return a.prototype.canActivate=async function(e,n){return this.navigateTo=n,await t.signOut(),o(e)?(this._token=e,!0):{redirect:"/"}},a.prototype.submit=async function(){if(this.pending())return;if(this.formError(""),!this._formHelper.isValid())return;this.pending(!0);const n=this;try{await t.completeSignUp({password:this.newPassword.input(),agreeToTerms:this.termsCheckbox.input()},this._token);let i=e(n.navigateTo,"/?t=welcome");/^\/http/.test(n.navigateTo)&&(i=n.navigateTo.substr(1)),r.navigate(i)}catch(i){n.formError(t.getErrorMessage(i))}finally{n.pending(!1)}},a}),define("Views/Auth/OAuthProviders",["Core/AppData","Core/Services"],function(e,t){"use strict";const n=Cesium.Resource;function i(e){return window.location.origin+require.toUrl("")+e}return{Bentley:{name:"Bentley",imageSource:"Images/bentley-icon.svg",storageKey:"bentley-login",signIn:e=>t.signInBentley(e.code,e.signInAs),authorizeUrl:t=>new n({url:`${e.bentleyImsEndpoint}/connect/authorize`,queryParameters:{response_type:"code",client_id:e.bentleyClientId,redirect_uri:`${window.location.origin}/bentleysignin`,scope:"itwin-platform",state:t}}).toString()},Epic:{name:"Epic Games",imageSource:"Images/epic-games-logo.svg",storageKey:"epic-login",signIn:e=>t.signInEpic(e.code,e.signInAs),authorizeUrl:t=>new n({url:"https://www.epicgames.com/id/authorize",queryParameters:{redirect_uri:i("epicsignin/"),client_id:e.epicClientId,scope:"basic_profile",response_type:"code",state:t}}).toString()},GitHub:{name:"GitHub",fontAwesomeIcon:"fa-github",storageKey:"github-login",signIn:e=>t.signInGitHub(e.code,e.signInAs),authorizeUrl:t=>new n({url:"https://github.com/login/oauth/authorize",queryParameters:{redirect_uri:i("githubsignin"),client_id:e.githubClientId,scope:"user:email",state:t}}).toString()},Google:{name:"Google",fontAwesomeIcon:"fa-google",storageKey:"google-login",signIn:e=>t.signInGoogle(e.code,e.signInAs),authorizeUrl:t=>new n({url:"https://accounts.google.com/o/oauth2/v2/auth",queryParameters:{client_id:e.googleClientId,response_type:"code",include_granted_scopes:!0,access_type:"offline",redirect_uri:i("googlesignin/"),scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",state:t}}).toString()},Sketchfab:{name:"Sketchfab",imageSource:"Images/sketchfab-logo.svg",storageKey:"sketchfab-login",signIn:e=>t.signInSketchfab(e.code,e.signInAs,e.email),authorizeUrl:t=>new n({url:"https://sketchfab.com/oauth2/authorize",queryParameters:{response_type:"code",client_id:e.sketchfabClientId,redirect_uri:i("sketchfabsignin"),approval_prompt:"auto",state:t}}).toString()}}}),define("Views/Auth/OAuthProviderButtons",["./OAuthProviders","Core/Feature","Core/OAuthStorage","plugins/router"],function(e,t,n,i){"use strict";const r=Cesium.Check;return class{constructor(o,a){r.typeOf.string("prefix",o),r.typeOf.func("getQueryAndRedirect",a),this.isOauthClientEnabled=t.isEnabledForServer(t.Server.OAUTH_CLIENT),this.actionPrefix=o,this.getQueryAndRedirect=a,this.providers=Object.entries(e).filter(e=>"__moduleId__"!==e[0]).map(e=>{const t=e[1];return{name:t.name,title:`${this.actionPrefix} with ${t.name}`,fontAwesomeClass:t.fontAwesomeIcon?`fa third-party-logo ${t.fontAwesomeIcon}`:void 0,imageSource:t.imageSource,click:()=>{const e=this.getQueryAndRedirect();r.typeOf.object("queryAndRedirect",e);const o=n.save(t.storageKey,e.redirect,e.query),a=t.authorizeUrl(o);i.navigate(a)}}})}}}),define("Core/Scopes",[],function(){"use strict";const e=Cesium.defined,t={ASSETS_LIST:"assets:list",ASSETS_LIMITED_LIST:"assets:limited-list",ASSETS_READ:"assets:read",ASSETS_SOURCE:"assets:source",ASSETS_WRITE:"assets:write",PROFILE_READ:"profile:read",TOKENS_READ:"tokens:read",TOKENS_WRITE:"tokens:write",ARCHIVES_READ:"archives:read",ARCHIVES_WRITE:"archives:write",EXPORTS_READ:"exports:read",EXPORTS_WRITE:"exports:write",GEOCODE:"geocode"},n={"assets:list":{name:"List Assets",description:"List the metadata for all of your assets"},"assets:limited-list":{name:"List Limited Assets",description:"List the metadata for selected assets"},"assets:read":{name:"Read Asset",description:"Read metadata and access the tiled data for your assets"},"assets:source":{name:"Download Asset Sources",description:"Download the uploaded source data for your assets"},"assets:write":{name:"Write Asset",description:"Create, modify, and delete your assets"},"profile:read":{name:"Read Profile",description:"Read your username, email address, avatar, and storage quota"},"tokens:read":{name:"Read Tokens",description:"List tokens and see their scopes and assets"},"tokens:write":{name:"Write Tokens",description:"Create and delete tokens, modify what a token can access"},"archives:read":{name:"Read Asset Archives",description:"List and download asset archives"},"archives:write":{name:"Write Asset Archives",description:"Create and delete asset archives"},"exports:read":{name:"Read Asset Exports",description:"List asset exports"},"exports:write":{name:"Write Asset Exports",description:"Export assets"},geocode:{name:"Geocode",description:"Make geocode requests"}},i={asl:t.ASSETS_LIST,asr:t.ASSETS_READ,ass:t.ASSETS_SOURCE,asw:t.ASSETS_WRITE,pr:t.PROFILE_READ,tr:t.TOKENS_READ,tw:t.TOKENS_WRITE,gc:t.GEOCODE,arr:t.ARCHIVES_READ,arw:t.ARCHIVES_WRITE,exr:t.EXPORTS_READ,exw:t.EXPORTS_WRITE},r=[t.ASSETS_LIST,t.ASSETS_READ,t.ASSETS_WRITE,t.ASSETS_SOURCE,t.PROFILE_READ,t.TOKENS_READ,t.TOKENS_WRITE,t.GEOCODE,t.ARCHIVES_READ,t.ARCHIVES_WRITE,t.EXPORTS_READ,t.EXPORTS_WRITE];return t.shortToLong=function(e){return i[e]},t.filterAndSortScopes=function(t){if(!e(t))return;const n=[];return t.forEach(function(e){-1!==r.indexOf(e)&&n.push(e)}),n.sort()},t.getNameAndDescription=function(e){return n[e]},Object.freeze(t)}),define("generated/RedirectUri",["require","exports","module"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyRedirectUri=function(e,t){if(e===t)return!0;try{e=new URL(e),t=new URL(t)}catch(n){return!1}if(e.toString()===t.toString())return!0;if(!i.includes(e.hostname)||!i.includes(t.hostname))return!1;return e.hostname=t.hostname,e.port=t.port,e.toString()===t.toString()};const i=["localhost","127.0.0.1","[::1]"]}),define("Views/Auth/Oauth",["Core/defaultValue","../../Core/Scopes","../../Core/Services","../Components/Form/FormHelper","../Components/Form/SelectInputOption","generated/RedirectUri","knockout","plugins/router"],function(e,t,n,i,r,o,a,s){"use strict";const l=Cesium.defined;function c(){const e=a.observable([]),o=new i,s=a.observable(!1),l=a.pureComputed(function(){return n.teams().length>0});let c=n.teams();c=c.map(function(e){return new r(e.username,e.id)}),c.unshift(new r("Choose a team ....",0));const u=o.createSelectInput({label:"Select a Team",required:!0,options:c,disabled:a.pureComputed(function(){return!s()})});this.scopes=e,this.hasTeams=l,this.showSelectTeamField=o.createCheckbox({label:"Login as Team",input:s}),this.selectTeamField=u,this.scopeStrings=a.pureComputed(function(){return e().map(t.getNameAndDescription)}),this.clientName=a.observable(""),this.pending=a.observable(!1),this.formError=a.observable(""),this.oauthValid=a.observable(!0),this.queryParams=void 0,this.viewUrl="Views/Auth/SignInShell.html",this.content="Views/Auth/Oauth.html",this.showHeader=!1,this.showHeader=!1,this.username=n.username}return c.prototype.activate=async function(i){if(this.queryParams=i,!l(i))return this.formError("Missing required OAuth 2.0 parameters"),void this.oauthValid(!1);if("code"!==i.response_type)return this.formError('The only supported response_type is "code"'),void this.oauthValid(!1);if(!l(i.client_id))return this.formError('Missing required OAuth 2.0 parameter "client_id"'),void this.oauthValid(!1);if(!l(i.redirect_uri))return this.formError('Missing required OAuth 2.0 parameter "redirect_uri"'),void this.oauthValid(!1);const r=l(i.code_challenge),a=i.code_challenge_method;if(r!==l(a))return this.formError("code_challenge and code_challenge_method must both be specified."),void this.oauthValid(!1);if(r&&"S256"!==a)return this.formError('The only supported code_challenge_method is "S256"'),void this.oauthValid(!1);const s=e(i.scope,""),c=t.filterAndSortScopes(s.split(" "));if(!l(c)||0===c.length)return this.formError('Missing required OAuth 2.0 parameter "scope"'),void this.oauthValid(!1);let u,d;this.scopes(c);try{u=await n.getOauthClient(i.client_id)}catch(p){return this.oauthValid(!1),void this.formError(`Client with client_id ${i.client_id} is invalid.`)}const h=new URL(u.redirectUri);try{d=new URL(i.redirect_uri)}catch(p){d={},console.error(p)}if(!o.verifyRedirectUri(d,h))return this.oauthValid(!1),void this.formError(`Invalid redirect.  Please contact the developer of the "${u.name}" application to check the configuration.`);this.clientName(u.name)},c.prototype.submit=async function(){if(this.pending())return;this.formError(""),this.pending(!0);const e=this,t=this.queryParams,i=t.redirect_uri;let r;0!==e.selectTeamField.input()&&(r=e.selectTeamField.input());try{let o=`${i}?code=${(await n.postOauthAuthorize({oauthClientId:Number(t.client_id),redirectUri:i,codeChallenge:t.code_challenge,codeChallengeMethod:t.code_challenge_method,teamId:r,scope:this.scopes()})).code}`;const a=t.state;l(a)&&(o+=`&state=${encodeURIComponent(a)}`),e._redirect(o)}catch(o){e.formError(n.getErrorMessage(o))}finally{e.pending(!1)}},c.prototype.deny=function(){this._redirect(`${this.queryParams.redirect_uri}?error=access_denied&error_description=The+user+denied+the+request`)},c.prototype._redirect=function(e){window.location=e},c.prototype.switchToAnotherAccount=async function(){await n.signOut(),s.navigate(window.location.href)},c}),define("Views/Auth/RequestPasswordReset",["../../Core/Services","../../Core/Validation","../Components/Form/FormHelper","plugins/router","knockout","toastr","DOMPurify"],function(e,t,n,i,r,o,a){"use strict";function s(){const e=new n;this.emailField=e.createTextInput({label:"Email",required:!0,validate:t.validateEmail}),this.formError=r.observable(""),this.pending=r.observable(!1),this.viewUrl="Views/Auth/SignInShell.html",this.content="Views/Auth/RequestPasswordReset.html",this.showHeader=!1,this._formHelper=e}return s.prototype.submit=async function(){if(this.pending())return;if(this.formError(""),!this._formHelper.isValid())return;this.pending(!0);const t=this.emailField.input(),n=this;try{await e.resetPasswordRequest(t),o.success(a.sanitize(`An email has been sent to  ${t} with further instructions if it is associated with a Cesium ion account`)),i.navigate("signin"),n.emailField.input("")}catch(r){n.formError(e.getErrorMessage(r))}finally{n.pending(!1)}},s}),define("Views/Auth/ResetPassword",["../../Core/decodeJwtPayload","../../Core/Services","plugins/router","toastr"],function(e,t,n,i){"use strict";const r=Cesium.defined,o="Password reset link has expired.  Send a new password reset e-mail using the form below.";function a(){this.viewUrl="Views/Auth/SignInShell.html",this.content="Views/Auth/ResetPassword.html",this.showHeader=!1,this._token=void 0}return a.prototype.canActivate=async function(n){const a=this;try{return await t.signOut(),!r(n)||e(n).exp<Date.now()/1e3?(i.error(o),{redirect:"requestreset"}):(a._token=n,!0)}catch(s){return i.error(o),{redirect:"requestreset"}}},a.prototype.compositionComplete=function(e){this._reactElement=e.querySelector("ion-password-reset"),this._reactElement.token=this._token,this._reactElement.addEventListener("reset-complete",function(){n.navigate("/")})},a}),define("Core/InviteAndVerificationTokens",["./decodeJwtPayload","./Feature","./Services","generated/ClientErrorCodes","toastr"],function(e,t,n,i,r){"use strict";const o=i.ClientErrorCodes,a=Cesium.defined,s="tmIvt",l="vrfy",c=Object.freeze({EXPIRED:"EXPIRED",TEAM_INVITE_USER_MISMATCH:"TEAM_INVITE_USER_MISMATCH",TEAM_INVITE_ACCEPTED:"TEAM_INVITE_ACCEPTED",INVITATION_NOT_FOUND:"INVITATION_NOT_FOUND",INVALID_TOKEN:"INVALID_TOKEN",ERROR:"ERROR"});function u(e){switch(e){case c.TEAM_INVITE_ACCEPTED:r.success("Invitation is accepted.");break;case c.TEAM_INVITE_USER_MISMATCH:r.error("The invitation is for another account.");break;case c.INVITATION_NOT_FOUND:r.error("Invitation not found or already accepted.");break;case c.EXPIRED:r.error("The verification token has expired.");break;case c.INVALID_TOKEN:case c.ERROR:r.error("Something went wrong.")}}async function d(i){if(!a(i)||"string"!=typeof i.token)return{navigateTo:"/",status:c.INVALID_TOKEN};const r=n.userObject(),l=await async function(t){let i,r,l;try{l=e(t)}catch(u){return c.INVALID_TOKEN}if(!h(l,s))return{status:c.EXPIRED,navigateTo:"account/email-verification"};try{i=await n.postAcceptUserInviteToken(t),r=c.TEAM_INVITE_ACCEPTED}catch(u){console.error(u);const e=n.getError(u);switch(a(e)?e.code:void 0){case o.INVITATION_FOR_DIFFERENT_ACCOUNT:r=c.TEAM_INVITE_USER_MISMATCH;break;case o.INVITATION_NOT_FOUND:r=c.INVITATION_NOT_FOUND;break;case o.INVALID_TOKEN:r=c.INVALID_TOKEN;break;default:r=c.ERROR}}return{navigateTo:"account/teams",user:i,status:r}}(i.token);let u=l.navigateTo;const d=l.user;return a(d)&&d.verified!==r.verified&&t.isEnabledForServer(t.Server.VRICON_PROMOTION)&&(/\.(mil|gov)$/i.test(l.user.email)||/@cesium\.com$/i.test(l.user.email))&&(u+="?t=vricon"),{navigateTo:u,status:l.status}}function h(e,t){return Array.isArray(e.scopes)&&e.scopes.some(e=>e===t)}function p(t){if(a(t)&&"string"==typeof t.token)try{return e(t.token)}catch(n){return}}return{TokenStatus:c,processQuery:d,showTokenStatusMessage:u,processQueryAndShowMessage:async function(e){const t=await d(e);return u(t.status),t.navigateTo},isTokenExpired:function(t){let n;try{n=e(t)}catch(i){throw new Cesium.DeveloperError("token is not a valid token")}return!!h(n,l)||function(e){return a(e.exp)&&1e3*e.exp<Date.now()}(n)},hasToken:function(e){return a(e)&&"string"==typeof e.token},hasVerificationToken:function(e){const t=p(e);return!!a(t)&&h(t,l)},hasInviteToken:function(e){const t=p(e);return!!a(t)&&h(t,s)}}}),define("Core/Redirect",[],()=>{"use strict";const e=Object.freeze([/\.cesium\.com(:\d+)$/,/^cesium\.com$/,/^localhost:4000$/]),t=Object.freeze(["http:","https:"]);return Object.freeze({VALID_HOSTS:e,VALID_PROTOCOLS:t,validRedirect(i,r){const o=i&&i.redirect;if(!o)return r;if(!/^(?:[A-Za-z0-9+.-]*:)?\/\//.test(o))return o;let a;try{a=new URL(o)}catch(n){return r}const{protocol:s,host:l}=a;return t.includes(s)&&e.some(e=>e.test(l))?i.redirect:r}})}),define("Views/Auth/SignIn",["Core/defaultValue","../../Core/Feature","../../Core/InviteAndVerificationTokens","../../Core/Redirect","../../Core/Services","./OAuthProviderButtons","knockout","plugins/router","toastr"],function(e,t,n,i,r,o,a,s,l){"use strict";const c=Cesium.defined,u=Cesium.Resource,d=n.TokenStatus,h={A6RZ:"Something went wrong.",A7UH:"Sketchfab account already linked to a different Cesium ion account.",A8RI:"Invitation could not be be accepted.",A9RK:"Invitation not found or already accepted.",TEAM_SIGN_IN_ATTEMPT:"Cannot sign into a team account directly. Sign in to your indiviual account first and switch to the team"};function p(){this.showFormInstruction=a.observable(!1),this.navigateTo="/",this.viewUrl="Views/Auth/SignInShell.html",this.content="Views/Auth/SignIn.html",this.showHeader=!1,this.oAuthProviderButtons=new o("Sign in",()=>({redirect:this.navigateTo,query:this._queryParams})),this.hasExpiredVerificationToken=a.observable(!1),this._queryParams=void 0,this.isSamlAuthenticationEnabled=t.isEnabledForServer(t.Server.SAML_AUTHENTICATION)}return p.prototype.canActivate=async function(t,o){if(t=i.validRedirect(o,t),t=e(t,this.navigateTo),c(o)){if(delete o.redirect,this._queryParams=o,n.hasToken(o)){if(this.hasExpiredVerificationToken(n.hasVerificationToken(o)),!r.isSignedIn()&&!n.hasInviteToken(o))return this.showFormInstruction(!0),this.navigateTo=t,!0;if(r.isSignedIn()){const e=await n.processQuery(o);return e.status===d.TEAM_INVITE_USER_MISMATCH?(await r.signOut(),this.showFormInstruction(!1),!0):(n.showTokenStatusMessage(e.status),{redirect:e.navigateTo})}}const e=o.errorcode;c(e)&&c(h[e])&&(l.error(h[e]),delete o.errorcode);const i=Object.assign({},o);delete i.signInAs;t=new u({url:t,queryParameters:i}).url}if(t+=window.location.hash,!r.isSignedIn()){const e=require.toUrl(""),n=window.location.origin+e;if(this.isSamlAuthenticationEnabled){let e=t;return c(o)&&c(o.teamId)&&(e=new u({url:`${n}signIn`,queryParameters:o}).url),await r.redirectToSamlLogin(e),!0}return this.navigateTo=t,!0}return{redirect:t}},p.prototype.compositionComplete=function(e){const t=e.querySelector("ion-sign-in");t.query=this._queryParams,t.addEventListener("sign-in-complete",()=>{this.onSignInComplete()})},p.prototype.goToSignUp=function(){s.navigate(`/signup${this.navigateTo}`)},p.prototype._setBrowserLocation=function(e){window.location.replace(e)},p.prototype.onSignInComplete=async function(){let e=this.navigateTo;const t=this._queryParams;if(n.hasToken(t)&&(e=await n.processQueryAndShowMessage(t)),0===e.indexOf("/stories/editor")){const e=this.navigateTo.replace("/stories/editor","stories/editor/");return void this._setBrowserLocation(e)}if(0===e.indexOf("/stories/viewer#")){const e=this.navigateTo.replace("/stories/viewer#","stories/viewer/?");return void this._setBrowserLocation(e)}s.navigate(e)},p}),define("Views/Components/DataCenterLocationSelect",["Core/defaultValue","Core/ReactInterop"],function(e,t){"use strict";class n extends t.Component{constructor(t){super({tag:"ion-data-center-location"}),t=e(t,{}),this.value=e(t.value,this.value),this.disabled=e(t.disabled,this.disabled)}get value(){return this.element.value}set value(e){this.element.value=e}get disabled(){return this.element.disabled}set disabled(e){this.element.disabled=e}}return n}),define("Views/Auth/SignInOAuth",["Core/defaultValue","../../Core/InviteAndVerificationTokens","../../Core/OAuthStorage","../../Core/Resource","../../Core/Services","../../Core/Validation","../Components/DataCenterLocationSelect","../Components/Form/FormHelper","knockout","generated/ClientErrorCodes","generated/SignInStatus","plugins/router"],function(e,t,n,i,r,o,a,s,l,c,u,d){"use strict";const h=Cesium.Check,p=Cesium.defined,f=u.SignInStatus,m="signin?errorcode=A6RZ";function g(e){h.typeOf.object("provider",e),h.typeOf.string("provider.storageKey",e.storageKey),h.typeOf.func("provider.signIn",e.signIn);const t=new s;this.provider=e,this.usernameField=t.createTextInput({label:"Username",validate:o.validateUsername}),this.dataCenterLocationField=new a,this.termsCheckbox=t.createCheckbox({label:'I agree to the Cesium ion <a href="https://cesium.com/legal/cookie-policy/" target="_blank">Cookie Policy</a>, <a href="https://cesium.com/legal/terms-of-service/" target="_blank">Terms of Service</a>, and <a href="https://cesium.com/legal/privacy-policy/" target="_blank">Privacy Policy</a>',validate:function(e){return e?"":"You must agree to the terms of service in order to create an account"}}),this.canEmailCheckbox=t.createCheckbox({label:"Get the latest Cesium news and updates"}),this.formError=l.observable(""),this.pending=l.observable(!1),this.viewUrl="Views/Auth/SignInShell.html",this.content="Views/Auth/SignInOAuth.html",this.showHeader=!1,this._formHelper=t,this._ssoId=void 0,this._navigateTo=void 0,this._query=void 0,this.showTwoFactor=l.observable(!1),this.provider=e}return g.prototype.canActivate=async function(o,a){const s=n.consume(this.provider.storageKey);if(!p(s)||s.state!==a.state||!p(a.code))return{redirect:m};if(o=e(s.redirect,"/"),this._query=s.query,"/oauth"===o){if(!p(s.query))return{redirect:m};o=new i({url:o,queryParameters:s.query}).url}this._navigateTo=o;try{const e=await this.provider.signIn({code:a.code,signInAs:s.query.signInAs,email:r.isSignedIn()?r.email():void 0});if(e.status===f.SIGN_UP){const t=e.user,n=p(t.username)?t.username.replace(/@.+\..+$/,""):"";return this.usernameField.input(n),this._ssoId=t.ssoId,!0}return e.status===f.SECOND_FACTOR?(this.showTwoFactor(!0),!0):(t.hasToken(this._query)&&(o=await t.processQueryAndShowMessage(this._query)),{redirect:o})}catch(l){console.error(l);switch(r.getError(l).code){case c.ClientErrorCodes.ACCOUNT_ALREADY_LINKED:return{redirect:"signin/account?errorcode=A7UH"};case c.ClientErrorCodes.TEAM_SIGN_IN_ATTEMPT:return{redirect:"signin?errorcode=TEAM_SIGN_IN_ATTEMPT"}}return{redirect:m}}},g.prototype.submit=async function(){if(this.pending())return;if(this.formError(""),!this._formHelper.isValid())return;let e;this.pending(!0),p(this._query)&&(e=this._query.referrer);try{await r.signUp({username:this.usernameField.input().trim(),ssoId:this._ssoId,agreeToTerms:this.termsCheckbox.input(),canEmail:this.canEmailCheckbox.input(),referrer:e,dataCenterLocation:this.dataCenterLocationField.value});let n=this._navigateTo;t.hasToken(this._query)&&(n=await t.processQueryAndShowMessage(this._query)),"/"===n&&(n+="?t=welcome"),d.navigate(n)}catch(n){this.formError(r.getErrorMessage(n))}finally{this.pending(!1)}},g.prototype.compositionComplete=function(e){const t=e.querySelector("ion-two-factor-sign-in");if(!t)throw new Cesium.DeveloperError("cannot find ion-two-factor-sign-in element");t.addEventListener("sign-in-complete",()=>{this.onSignInComplete()})},g.prototype.onSignInComplete=async function(){let e=this._navigateTo;t.hasToken(this._query)&&(e=await t.processQueryAndShowMessage(this._query)),d.navigate(e)},g}),define("Views/Auth/SignInBentley",["./OAuthProviders","./SignInOAuth"],function(e,t){"use strict";return new t(e.Bentley)}),define("Views/Auth/SignInEpic",["Core/defaultValue","../../Core/InviteAndVerificationTokens","../../Core/OAuthStorage","../../Core/Resource","../../Core/Services","../../Core/Validation","../Components/DataCenterLocationSelect","../Components/Form/FormHelper","generated/SignInStatus","knockout","plugins/router","toastr"],function(e,t,n,i,r,o,a,s,l,c,u,d){"use strict";const h=Cesium.defined,p=l.SignInStatus,f="signin?errorcode=A6RZ",m={PROMPT_EMAIL:"promptEmail",VERIFY_CODE:"verifyCode",SIGN_UP:"signUp",SECOND_FACTOR:"secondFactor"};function g(){const e=new s,t=new s,n=new s;this.state=c.observable(m.PROMPT_EMAIL),this.usernameField=n.createTextInput({label:"Username",validate:o.validateUsername}),this.dataCenterLocationField=new a,this.emailField=e.createTextInput({label:"Email",validate:o.validateEmail}),this.verificationCodeField=t.createTextInput({label:"Code",validate:function(e){return o.validNumber(e)&&8===e.length?"":"Invalid verification code"}}),this.termsCheckbox=n.createCheckbox({label:'I agree to the Cesium ion <a href="https://cesium.com/legal/cookie-policy/" target="_blank">Cookie Policy</a>, <a href="https://cesium.com/legal/terms-of-service/" target="_blank">Terms of Service</a>, and <a href="https://cesium.com/legal/privacy-policy/" target="_blank">Privacy Policy</a>',validate:function(e){return e?"":"You must agree to the terms of service in order to create an account"}}),this.canEmailCheckbox=n.createCheckbox({label:"Get the latest Cesium news and updates"}),this.formError=c.observable(""),this.pending=c.observable(!1),this.viewUrl="Views/Auth/SignInShell.html",this.content="Views/Auth/SignInEpic.html",this.showHeader=!1,this._emailFormHelper=e,this._codeFormHelper=t,this._signUpFormHelper=n,this._epicId=void 0,this._epicUsername=void 0,this._ssoId=void 0,this._navigateTo=void 0,this._query=void 0}return g.prototype.canActivate=async function(o,a){if(o=e(o,"/"),r.isSignedIn())return{redirect:o};if(!h(a)||!h(a.code)||!h(a.state))return{redirect:f};const s=n.consume("epic-login");if(!h(s)||s.state!==a.state)return{redirect:f};if(this._query=s.query,"/oauth"===(o=e(s.redirect,o))){if(!h(s.query))return{redirect:f};o=new i({url:o,queryParameters:s.query}).url}this._navigateTo=o;try{const n=await r.signInEpic(a.code,s.query.signInAs);if(n.status===p.SECOND_FACTOR)return this.state(m.SECOND_FACTOR),!0;if(n.status===p.SIGN_UP){const t=n.user;return this.usernameField.input(e(t.username,"")),this._epicId=t.epicId,this._epicUsername=t.epicUsername,this._email="",this._ssoId=t.ssoId,!0}return t.hasToken(s.query)&&(o=await t.processQueryAndShowMessage(s.query)),{redirect:o}}catch(l){return console.error(l),{redirect:f}}},g.prototype.submitEmail=async function(){if(this.pending())return;if(this.formError(""),!this._emailFormHelper.isValid())return;this.pending(!0);const e=this;try{await r.postSendEpicCode(this.emailField.input()),e.state(m.VERIFY_CODE)}catch(t){400===t.statusCode?e.state(m.SIGN_UP):(console.log("form error"),e.formError(r.getErrorMessage(t)))}finally{e.pending(!1)}},g.prototype.resendCode=async function(){if(this.pending())return;this.formError(""),this.pending(!0);const e=this;try{await r.postSendEpicCode(this.emailField.input()),d.success("New verification code sent")}catch(t){e.formError(r.getErrorMessage(t))}finally{e.pending(!1)}},g.prototype.submitCode=async function(){if(this.pending())return;if(this.formError(""),!this._codeFormHelper.isValid())return;this.pending(!0);const e=this;try{await r.postVerifyEpicCode(this._ssoId,this._epicId,this._epicUsername,this.verificationCodeField.input(),this.emailField.input());let n=e._navigateTo;t.hasToken(this._query)&&(n=await t.processQueryAndShowMessage(this._query)),u.navigate(n)}catch(n){e.formError(r.getErrorMessage(n))}finally{e.pending(!1)}},g.prototype.submitSignUp=async function(){if(this.pending())return;if(this.formError(""),!this._signUpFormHelper.isValid())return;let e;this.pending(!0),h(this._query)&&(e=this._query.referrer);try{await r.signUp({username:this.usernameField.input().trim(),epicId:this._epicId,epicUsername:this._epicUsername,ssoId:this._ssoId,email:this.emailField.input(),agreeToTerms:this.termsCheckbox.input(),canEmail:this.canEmailCheckbox.input(),referrer:e,dataCenterLocation:this.dataCenterLocationField.value});let n=this._navigateTo;t.hasToken(this._query)&&(n=await t.processQueryAndShowMessage(this._query)),"/"===n&&(n+="?t=welcome"),u.navigate(n)}catch(n){this.formError(r.getErrorMessage(n))}finally{this.pending(!1)}},g.prototype.compositionComplete=function(e){const t=e.querySelector("ion-two-factor-sign-in");if(!t)throw new Cesium.DeveloperError("cannot find ion-two-factor-sign-in element");t.addEventListener("sign-in-complete",()=>{this.onSignInComplete()})},g.prototype.onSignInComplete=async function(){let e=this._navigateTo;t.hasToken(this._query)&&(e=await t.processQueryAndShowMessage(this._query)),u.navigate(e)},g._State=m,g}),define("Views/Auth/SignInGitHub",["./OAuthProviders","./SignInOAuth"],function(e,t){"use strict";return new t(e.GitHub)}),define("Views/Auth/SignInGoogle",["./OAuthProviders","./SignInOAuth"],function(e,t){"use strict";return new t(e.Google)}),define("Views/Auth/SignInSketchfab",["./OAuthProviders","./SignInOAuth"],function(e,t){"use strict";return new t(e.Sketchfab)}),define("Views/Auth/SignOut",["../../Core/Services","../../Core/Feature","../Components/FileUploadList","../Components/OnScreenHelp/OnScreenHelp"],function(e,t,n,i){"use strict";return{showHeader:!1,hardReload:()=>{window.location.assign("signin")},canActivate:async function(){if(n.hasUploadsInProgress()){if(!window.confirm("Are you sure you want to sign out?  Signing out will cancel asset uploads in progress."))return!1;n.cancelAll()}return n.close(),i.hide(),await e.signOut(),t.isEnabledForServer(t.Server.SAML_AUTHENTICATION)||this.hardReload(),!0}}}),define("generated/Referrer",["require","exports","module"],function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Referrer=void 0,t.isValidReferrer=function(e){return e===i.BENTLEY_SALES||e===i.BENTLEY_CHANNEL},function(e){e.BENTLEY_SALES="bentley_sales",e.BENTLEY_CHANNEL="bentley_channel"}(i||(t.Referrer=i={}))}),define("Views/Auth/SignUp",["Core/defaultValue","../../Core/Resource","../../Core/Services","../../Core/Validation","./OAuthProviderButtons","../Components/DataCenterLocationSelect","../Components/Form/FormHelper","knockout","plugins/router","generated/Referrer"],function(e,t,n,i,r,o,a,s,l,c){"use strict";const u=Cesium.defined;function d(){const e=new a,t=new a;this.initialEmailField=e.createTextInput({label:"Sign up with Email",validate:i.validateEmail}),this.usernameField=t.createTextInput({label:"Username",validate:i.validateUsername}),this.emailField=t.createTextInput({label:"Email",validate:i.validateEmail}),this.passwordField=t.createPasswordInput({label:"Password",validate:i.validatePassword}),this.dataCenterLocationField=new o,this.captchaField=t.createTextInput({label:"Type in the characters shown above",required:!0}),this.termsCheckbox=t.createCheckbox({label:'I agree to the Cesium ion <a href="https://cesium.com/legal/cookie-policy/" target="_blank">Cookie Policy</a>, <a href="https://cesium.com/legal/terms-of-service/" target="_blank">Terms of Service</a>, and <a href="https://cesium.com/legal/privacy-policy/" target="_blank">Privacy Policy</a>',validate:function(e){return e?"":"You must agree to the terms of service in order to create an account"}}),this.canEmailCheckbox=t.createCheckbox({label:"Get the latest Cesium news and updates"}),this.formError=s.observable(""),this.pending=s.observable(!1),this.viewUrl="Views/Auth/SignInShell.html",this.content="Views/Auth/SignUp.html",this.showHeader=!1,this.captchaId=void 0,this.captcha=s.observable(""),this.navigateTo=void 0,this.showFullForm=s.observable(!1),this._formHelper=t,this._emailFormHelper=e,this._teamInvitationToken=void 0,this._queryParams=void 0,this.oAuthProviderButtons=new r("Sign up with",()=>({redirect:this.navigateTo,query:this._queryParams}))}return d.prototype.canActivate=function(i,r){if(n.isSignedIn()){return u(r)&&u(r.referrer)&&c.isValidReferrer(r.referrer)?n.patchUser({referrer:r.referrer}).then(()=>({redirect:"/"})):{redirect:"/"}}if("/email"===(i=e(i,"/")))return this.showFullForm(!0),!0;let o;if(u(r)&&(this._queryParams=r,o=r.token,u(o)&&(this._teamInvitationToken=o)),"/oauth"===i){if(u(this._queryParams)){i=new t({url:i,queryParameters:r}).url}this.navigateTo=i}return!0},d.prototype.activate=function(){return this.reloadCaptcha()},d.prototype.reloadCaptcha=async function(){const e=await n.getCaptcha();this.captchaId=e.id,this.captcha(`data:image/svg+xml,${encodeURIComponent(e.svg)}`)},d.prototype.submitInitialEmail=async function(){if(this.pending())return;if(this.formError(""),!this._emailFormHelper.isValid())return;this.pending(!0);const e=this,t=this.initialEmailField.input();let i="/signup/email";u(this._queryParams)&&u(this._queryParams.referrer)&&(i+=`?referrer=${this._queryParams.referrer}`);try{await n.accountLookup(t),e.formError("EMAIL_CONFLICT")}catch(r){400===r.statusCode?(e.emailField.input(t),e.showFullForm(!0),e.usernameField.focus(!0),u(this._teamInvitationToken)&&(i=`${i}?token=${this._teamInvitationToken}`),l.navigate(i,{trigger:!1})):e.formError(n.getErrorMessage(r))}finally{e.pending(!1)}},d.prototype.submit=async function(){if(this.pending())return;if(this.formError(""),!this._formHelper.isValid())return;let e;u(this._queryParams)&&u(this._queryParams.referrer)&&(e=this._queryParams.referrer),this.pending(!0);const t=this;try{await n.signUp({username:this.usernameField.input().trim(),email:this.emailField.input(),password:this.passwordField.input(),agreeToTerms:this.termsCheckbox.input(),canEmail:this.canEmailCheckbox.input(),captchaId:this.captchaId,captchaText:this.captchaField.input(),teamInvitationToken:this._teamInvitationToken,referrer:e,dataCenterLocation:this.dataCenterLocationField.value}),u(t.navigateTo)?l.navigate(t.navigateTo):u(this._teamInvitationToken)?l.navigate("/account/teams"):l.navigate("stories?t=welcome")}catch(i){return t.captchaField.input(""),t.formError(n.getErrorMessage(i)),t.reloadCaptcha()}finally{t.pending(!1)}},d}),define("Views/Components/ActionPane",["../../Core/isViewportMobile","Core/createDomId","jquery","knockout"],function(e,t,n,i){"use strict";Cesium.Check;const r=Cesium.defined,o=Cesium.EventHelper;function a(e){if(!r(e))return;const t=e.parentNode,n=t.parentNode;t.offsetLeft+t.clientWidth>n.clientWidth?n.scrollLeft=t.offsetLeft:n.scrollLeft=0}function s(n){const s=new o,l=i.observable(!e());function c(){l(l()&&!e())}const u=this;n=n.map(function(e){let i=e.visible;const o=r(i),d=e.compose,h=e.name;o||(i=!0),r(d.closeLeftPaneMobile)&&s.add(d.closeLeftPaneMobile,c);const p=t();return r(d.changeFocus)&&s.add(d.changeFocus,function(e){e&&u._activeTabId()!==p?(l(!0),u.setActiveTab(p),a(document.getElementById(`${p}-tab`))):e||u._activeTabId()!==p||n[0].compose===d||u.setActiveTab(n[0].containerId)}),{name:h,compose:d,containerId:p,visible:i,closable:o,onClose:d.close}});const d=i.pureComputed(function(){return n.some(function(e){return i.unwrap(e.visible)})});this.visible=d,this.expanded=i.pureComputed({read:function(){return l()&&d()},write:function(e){l(e)}}),this.components=n,this.disableTabs=i.pureComputed(function(){let e=!1;return n.forEach(function(t){r(t.compose.disableTabs)&&t.compose.disableTabs()&&(e=!0)}),e}),this._activeTabId=i.observable(n[0].containerId),this._activeTab=void 0,this._tabs=void 0,this._eventHelper=s,this._resizeTimeout=void 0;const h=function(){clearTimeout(u._resizeTimeout),u._resizeTimeout=setTimeout(function(){r(u._activeTab)&&a(u._activeTab)},200)};window.addEventListener("resize",h),this._resizeFunction=h}return s.prototype.setActiveTab=function(e){const t=this._tabs;r(t)?e&&t.find(`#${e}-tab`).tab("show"):this._activeTabId(e)},s.prototype.compositionComplete=function(){const e=this,t=n(".action-pane-tabs"),i=t.find("li.active > a").attr("id");r(i)?this._activeTabId(i):t.find(`#${this._activeTabId()}-tab`).tab("show"),t.find('a[data-toggle="tab"]').on("shown.bs.tab",function(t){const n=t.target.getAttribute("id");e._activeTabId(n.substr(0,n.length-4)),e._activeTab=t.target,a(t.target)}),this._tabs=t},s.prototype.toggleActionPane=function(){this.expanded(!this.expanded())},s.prototype.detached=function(){this._eventHelper.removeAll(),clearTimeout(this._resizeTimeout),window.removeEventListener("resize",this._resizeFunction)},s._setScroll=a,s}),define("Views/Components/AddUserToTeam",["knockout","plugins/dialog","./Form/FormHelper","./Form/SelectInputOption","Core/Services","Core/isStringEmptyOrWhitespace","Core/TeamRole"],function(e,t,n,i,r,o,a){"use strict";const s=Cesium.defined;function l(t){const r=[new i(a.toString(a.MEMBER),a.MEMBER),new i(a.toString(a.OWNER),a.OWNER)];this.teamId=t;const o=new n;this.usernameOrEmailField=o.createTextInput({label:"Username or email",required:!0}),this.roleField=o.createSelectInput({label:"Role",required:!0,options:r}),this.errorText=e.observable(""),this.pending=e.observable(!1),this.formHelper=o}return l.prototype.apply=async function(){if(this.pending())return;this.formHelper.isValid();const e=this,n=this.usernameOrEmailField.input(),i=this.roleField.input();let a;this.pending(!0);try{!o(n)&&s(i)&&(a=s(this.teamId)?await r.postAddUserToTeamByAdmin(this.teamId,{usernameOrEmail:n.trim(),role:i}):await r.postUserInvitation(r.userId(),{usernameOrEmail:n.trim(),role:i}),t.close(this,a))}catch(l){e.errorText(r.getErrorMessage(l))}finally{e.pending(!1)}},l.prototype.close=function(){t.close(this,void 0)},l}),define("Views/Components/ArchiveProgressBar",["knockout","Core/Units"],function(e,t){"use strict";const n=Cesium.defined;return function(i,r){const o=n(i)?i:e.observable(0),a=n(r)?r:e.observable("");this._textValue=e.pureComputed(function(){return`${a()} (${(o()/t.BYTES_IN_MB).toFixed(2)} MiB)`})}}),define("Core/objectToTableEntry",[],function(){"use strict";Cesium.Check;const e=Cesium.defined;function t(e){return null===e?"null":"object"==typeof e?(e=(e=JSON.stringify(e,null,"    ")).replace(/[{\[,]|\s[}\]]|"/g,"")).replace(/^\n|\s$/g,""):String(e)}return function(n){if(null===n)return"null";let i;if(Array.isArray(n)){if(i=n.map(function(e){return t(e)}),1===i.length)return i[0]}else{i=Object.keys(n).map(function(i){const r=n[i];return e(r)&&"object"==typeof r?`${i}:\n${t(r)}`:`${i}: ${r}`})}return 0===i.length?"":`<span style="white-space: pre-wrap">${i.join("\n")}</span>`}}),define("Views/Components/AssetConfigurationTable",["Core/defaultValue","../../Core/objectToTableEntry","../../Core/Services","knockout"],function(e,t,n,i){"use strict";const r=Cesium.defined,o=Cesium.IonResource,a=0,s=1,l=2;function c(){this.configurationRows=i.observableArray([]),this.pending=i.observable(!1);const e=i.observable();this.error=e,this.hasError=i.pureComputed(function(){return r(e())}),this._activeAssetId=void 0,this._loadingState={}}return c.prototype._loadAssetConfig=async function(i){this.pending(!0),this._loadingState[i.id]=a;const r=this;let c;try{const e=(await o._createEndpointResource(i.id).fetchJson()).options,n=Object.keys(e).map(function(n){let i=e[n];return"object"==typeof i&&(i=t(i)),{name:n,value:i}});r._loadingState[i.id]=s,r.error(void 0),c=n}catch(u){r._loadingState[i.id]=l,r._activeAssetId===i.id&&r.error(n.getError(u).message)}finally{i._configuration=c,r._activeAssetId===i.id&&(r.configurationRows(e(c,[])),r.pending(!1))}},c.prototype.setAsset=async function(e){if(!r(e))return;this._activeAssetId=e.id;const t=e._configuration;if(r(t))return void this.configurationRows(t);const n=this._loadingState[e.id];n!==a&&n!==s&&await this._loadAssetConfig(e)},c}),define("Core/getFilterObservable",["./find","./isStringEmptyOrWhitespace","knockout"],function(e,t,n){"use strict";const i=Cesium.defined;Cesium.DeveloperError;return function(r,o,a){return n.pureComputed(function(){const s=r();let l=o();if(t(l))return s;l.startsWith("id:")&&(l=l.split("id:")[1]);const c=l.split(/\s+/).map(function(e){return new RegExp(e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i")});return n.utils.arrayFilter(s,function(t){const r=[];return a.forEach(function(e){let o=t[e];i(o)&&("id"===e&&typeof o===Number&&(o=o.toString()),o=n.unwrap(o),r.push(o))}),c.every(function(t){return i(e(r,t.test.bind(t)))})})}).extend({rateLimit:200})}}),define("Views/Components/AssetSelector",["Core/AssetType","Core/defaultValue","Core/formatDateTime","Core/getFilterObservable","knockout"],function(e,t,n,i,r){"use strict";Cesium.Check;const o=Cesium.defined;function a(e,t){o(t)&&(t.forEach(function(t){e._availableAssets.push(new s(t))}),e._sortedBy(void 0),e.sortBy("name")())}function s(t){if(this.id=t.id,this.name=t.name,this.description=t.description,o(t.dateAdded)){const e=new Date(t.dateAdded);this.dateAdded=e,this.dateString=n(e)}else this.dateAdded=void 0,this.dateString="-";this.isSelected=r.observable(!1),this.metadata=t,this.selectable=r.observable(!0),this.type=e.toString(t.type)}function l(e){let n=(e=t(e,Cesium.Frozen.EMPTY_OBJECT)).getSelectableAssets;o(n)||(n=function(e){return e});const s=t(e.assets,[]),l=this;this._multiselect=t(e.multiselect,!1);const c=r.observableArray([]);this._availableAssets=c,this._selectedAssets=r.observableArray([]),this._hasSelected=r.pureComputed(function(){return l.selectedAssets().length>0}),this._disabledAssetTooltip=t(e.disabledAssetTooltip,"Item cannot be selected"),this._sortedBy=r.observable(),this._descending=r.observable(!0);const u=r.observable("");this._query=u;const d=i(c,u,["name","description"]);this._filteredAssets=r.pureComputed(function(){const e=n(l._availableAssets(),l._selectedAssets()),t=d();return r.utils.arrayForEach(t,function(t){const n=e.indexOf(t)>-1;t.selectable(n)}),t});const h=r.observable(),p=r.pureComputed(function(){return o(h())});this._noAssetsAvailable=r.pureComputed(function(){return!p()&&0===l._filteredAssets().length}),this.title=t(e.title,"Available Assets"),this.hasDefaultAsset=p,this._defaultAsset=h,this.select=this.select.bind(this),a(this,s),this._assets=s}return Object.defineProperties(l.prototype,{query:{get:function(){return this._query}},availableAssets:{get:function(){return this._availableAssets}},disabledAssetTooltip:{get:function(){return this._disabledAssetTooltip}},selectedAssets:{get:function(){return this._selectedAssets}},filteredAssets:{get:function(){return this._filteredAssets}},hasSelected:{get:function(){return this._hasSelected}},multiselect:{get:function(){return this._multiselect}},assets:{get:function(){return this._assets},set:function(e){this._availableAssets.removeAll(),this.selectedAssets.removeAll(),a(this,e),this._assets=e}},defaultAsset:{get:function(){return this._defaultAsset},set:function(e){o(e)?this._defaultAsset(new s(e)):this._defaultAsset(void 0)}},noAssetsAvailable:{get:function(){return this._noAssetsAvailable}}}),l.prototype.select=function(e){if(e.selectable())if(this._multiselect)e.isSelected()?(e.isSelected(!1),this.selectedAssets.remove(e)):(e.isSelected(!0),this.selectedAssets.push(e));else if(!e.isSelected()){const t=this.selectedAssets()[0];o(t)&&(t.isSelected(!1),this.selectedAssets.removeAll()),e.isSelected(!0),this.selectedAssets.push(e)}},l.prototype.selectById=function(e){o(e)||this.select(this._defaultAsset());const t=this._availableAssets();for(let n=0;n<t.length;n++)if(t[n].id===e)return this.select(t[n]),!0;return!1},l.prototype.selectByIds=function(e){let t=!1;o(e)||this.select(this._defaultAsset());const n=this._availableAssets();for(let i=0;i<n.length;i++)-1!==e.indexOf(n[i].id)&&(this.select(n[i]),t=!0);return t},l.prototype.getDisabledAssetTooltip=function(e){return e.selectable()?"":this._disabledAssetTooltip},l.prototype.reset=function(){this._query("")},l.prototype.sortStatus=function(e){const t=this;return r.pureComputed(function(){return t._sortedBy()===e?t._descending()?"fa-sort-desc":"fa-sort-asc":"fa-sort"})},l.prototype.sortBy=function(e){const t=this;return function(){t._sortedBy()!==e?(t._availableAssets.sort(function(t,n){const i=r.unwrap(t[e]),o=r.unwrap(n[e]);return"boolean"==typeof i?i<o?1:-1:"string"==typeof i?i.toLowerCase()<o.toLowerCase()?-1:1:i<o?-1:1}),t._descending(!0),t._sortedBy(e)):(t._availableAssets.reverse(),t._descending(!t._descending()))}},l.prototype.getSelectedIds=function(){const e=[];return this.selectedAssets().forEach(function(t){e.push(t.id)}),e},l.prototype.getSelectedMetadata=function(){const e=[];return this.selectedAssets().forEach(function(t){e.push(t.metadata)}),e},l}),define("Views/Components/AssetSourcesTable",["Core/defaultValue","../../Core/Services","../../Core/Units","knockout"],function(e,t,n,i){"use strict";const r=Cesium.defined,o=0,a=1,s=2;function l(e){return{url:e.url,id:e.id,name:e.name,size:n.bytesToString(e.bytes)}}function c(){const e=i.observableArray([]);this.sources=e,this.pending=i.observable(!1),this.hasSources=i.pureComputed(function(){return e().length>0}),this.error=i.observable();const t=this;this.hasError=i.pureComputed(function(){return r(t.error())}),this._sourcesForAssetId=void 0,this._sourcesLoadingState={}}return c._makeSource=l,c.prototype._loadAssetSources=async function(n){this.pending(!0),this._sourcesLoadingState[n.id]=o;const i=this;let r;try{let e=await t.getAssetSources(n.id);e=await e.map(l),i._sourcesLoadingState[n.id]=a,i.error(void 0),r=e}catch(c){i._sourcesLoadingState[n.id]=s,i._sourcesForAssetId===n.id&&i.error(t.getError(c).message)}finally{n._sources=r,i._sourcesForAssetId===n.id&&(i.sources(e(r,[])),i.pending(!1))}},c.prototype.setAsset=async function(e){if(!r(e))return;this._sourcesForAssetId=e.id;const t=e._sources;if(r(t))return void this.sources(t);const n=this._sourcesLoadingState[e.id];n!==o&&n!==a&&await this._loadAssetSources(e)},c}),define("generated/CentralBody",["require","exports","module"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CentralBody=void 0,t.centralBodyForAsset=function(e,t){if(i.Check.typeOf.object("asset",e),i.Check.typeOf.number("asset.id",e.id),i.Check.defined("settings",t),e.id===t.moonTilesAssetId)return r.MOON;if(e.id===t.marsTilesAssetId)return r.MARS;return r.EARTH},t.ellipsoidForCentralBody=function(e){switch(e){case r.MOON:return i.Ellipsoid.MOON;case r.MARS:return i.Ellipsoid.MARS;case r.EARTH:return i.Ellipsoid.WGS84}};const i=Cesium;var r;!function(e){e.EARTH="EARTH",e.MOON="MOON",e.MARS="MARS"}(r||(t.CentralBody=r={}))}),define("generated/ExternalAssetType",["require","exports","module","./getEnumValues"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalAssetType=void 0,t.isValidExternalAssetType=function(e){return o.has(e)};const i=e("./getEnumValues");var r;!function(e){e["3DTILES"]="3DTILES",e.ARCGIS_MAPSERVER="ARCGIS_MAPSERVER",e.AZURE_MAPS="AZURE_MAPS",e.BING="BING",e.GOOGLE_2D_MAPS="GOOGLE_2D_MAPS",e.GOOGLE_EARTH="GOOGLE_EARTH",e.ION_SAAS="ION_SAAS",e.MAPBOX="MAPBOX",e.SINGLE_TILE="SINGLE_TILE",e.STK_TERRAIN_SERVER="STK_TERRAIN_SERVER",e.TMS="TMS",e.TEMPLATE="TEMPLATE",e.WMS="WMS",e.WMTS="WMTS"}(r||(t.ExternalAssetType=r={}));const o=new Set((0,i.getEnumValues)(r))}),define("Core/flyToAsset",["./Services"],function(e){"use strict";const t=Cesium.CesiumTerrainProvider,n=Cesium.defined,i=Cesium.DeveloperError,r=Cesium.JulianDate,o=Cesium.Math,a=Cesium.Matrix4,s=Cesium.CzmlDataSource,l=Cesium.Ellipsoid,c=Cesium.GeoJsonDataSource,u=Cesium.KmlDataSource,d=Cesium.Cesium3DTileset,h=Cesium.computeFlyToLocationForRectangle,p=Cesium.Rectangle,f=Cesium.ImageryLayer,m=Cesium.Model;return function(g,v,b){const y=g.scene.camera;if(g.trackedEntity=void 0,v instanceof s||v instanceof u||v instanceof c){const e=g.clockViewModel.clock,t=v.clock;if(n(t)){const n=t.startTime,i=t.stopTime;(r.lessThan(e.currentTime,n)||r.greaterThan(e.currentTime,i))&&(e.currentTime=n.clone())}return void g.flyTo(v,{duration:b})}if(!(v instanceof f)){if(v instanceof d)return v.boundingSphere.radius>l.default.minimumRadius?void y.flyTo({destination:p.MAX_VALUE,endTransform:a.IDENTITY,duration:b}):void y.flyToBoundingSphere(v.boundingSphere,{endTransform:a.IDENTITY,duration:b});if(v instanceof m){y.cancelFlight();const e=()=>{const e=v.boundingSphere,t=o.toRadians(-130),n=o.toRadians(-25),i=3.5*e.radius;y.lookAt(e.center,new Cesium.HeadingPitchRange(t,n,i))};if(v.ready)e();else{const t=v.readyEvent.addEventListener(()=>{t(),e()})}return}if(v instanceof t){const t=v.__asset,n=y._scene,i=n.globe;return void e.getTerrainExtent(t.id,t.userId).then(function(e){return h(e,n)}).then(function(e){v===i.terrainProvider&&y.flyTo({destination:i.ellipsoid.cartographicToCartesian(e),endTransform:a.IDENTITY,duration:b})})}throw new i("Failed to zoom to unrecognized data type.")}g.flyTo(v,{duration:b})}}),define("Core/hasWebGLSupport",[],function(){"use strict";const e=Cesium.defined;function t(){return t._implementation()}return t._hasSupport=void 0,t._implementation=function(){if(e(t._hasSupport))return t._hasSupport;if(!e(window.WebGLRenderingContext))return t._hasSupport=!1,t._hasSupport;try{const n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl");t._hasSupport=e(i)}catch(n){t._hasSupport=!1}return t._hasSupport},t}),define("Core/addImageryProviderToViewer",["Core/Feature"],function(){"use strict";const e=Cesium.defined,t=Cesium.IonImageryProvider,n={_addImageryProviderToViewer:async function(n,i){const r=e(i)?await t.fromAssetId(i):await Cesium.TileMapServiceImageryProvider.fromUrl(Cesium.buildModuleUrl("Assets/Textures/NaturalEarthII"));n.isDestroyed()||n.imageryLayers.addImageryProvider(r)}};return n}),define("Views/Components/AssetViewer",["../../Core/Analytics","../../Core/AssetStatus","../../Core/AssetType","generated/CentralBody","../../Core/convertMarkdown","Core/defaultValue","generated/ExternalAssetType","../../Core/Feature","../../Core/flyToAsset","../../Core/getDocumentBaseUri","../../Core/hasWebGLSupport","../../Core/PageLoadingState","../../Core/Services","../../Core/addImageryProviderToViewer","../../Core/AppData","../../Core/ReactInterop","./ProgressBar","knockout"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v){"use strict";const b=Cesium.Cartesian3,y=Cesium.CesiumTerrainProvider,w=Cesium.Color,_=Cesium.defined,x=Cesium.DirectionalLight,S=Cesium.Ellipsoid,T=Cesium.EllipsoidTerrainProvider,A=Cesium.IonResource,C=Cesium.Math,E=Cesium.Rectangle,k=Cesium.Transforms,I=Cesium.CzmlDataSource,P=Cesium.GeoJsonDataSource,D=Cesium.KmlDataSource,O=Cesium.BingMapsImageryProvider,M=Cesium.ModelAnimationLoop,L=Cesium.Cesium3DTileset,R=Cesium.CreditDisplay,N=Cesium.IonImageryProvider,F=Cesium.Model,U=Cesium.Viewer,V=Cesium.Cesium3DTileStyle,B=a.ExternalAssetType,$=i.CentralBody,H=i.centralBodyForAsset,G=i.ellipsoidForCentralBody,j=3145728,z=k.eastNorthUpToFixedFrame(b.fromDegrees(0,0));function q(e){const t=360,n=e-Math.floor(e/t)*t;return n<-180?n+t:n>=180?n-t:n}const Y=2/3;function W(e){return(e.east>e.west?e.east:C.TWO_PI+e.east)-e.west>C.TWO_PI*Y||e.north-e.south>C.PI*Y}function K(e){e.sun.show=!1,e.moon&&(e.moon.show=!1),e.skyBox&&(e.skyBox.show=!1),e.globe.show=!1,e.skyAtmosphere&&(e.skyAtmosphere.show=!1)}function X(e){e.sun.show=!0,e.moon&&(e.moon.show=!0),e.skyBox&&(e.skyBox.show=!0),e.globe.show=!0,e.skyAtmosphere&&(e.skyAtmosphere.show=!0)}let Z=0;async function J(e,i){e._loadingState(d.IN_PROGRESS);const r=e._asset();let o=e._viewer;const a=Z+1;if(Z=a,!_(r))return void e._loadingState(d.NOT_FOUND);if(t.isError(r.status())&&e._loadingState(d.ERROR),!_(o)||!r.ready())return;const s=r._id,l=r.type,c=H({id:s},f),u=G(c);u!==S.default&&(S.default=u,o=e.createViewer());const p=o.scene;let m,g,v,x,O,R;try{if(l===n.IMAGERY)x=await N.fromAssetId(s);else if(l===n["3DTILES"]){if(O=r.georeferencedTerrainId(),_(O))try{R=await A.fromAssetId(O)}catch(U){}x=await A.fromAssetId(s)}else x=await A.fromAssetId(s);if(Z!==a)return;const t=l===n.TERRAIN||l===B.STK_TERRAIN_SERVER;if(l===n.GLTF){let e;const t=await F.fromGltfAsync({url:x,scene:p,modelMatrix:k.eastNorthUpToFixedFrame(b.fromDegrees(1,2,1e4)),gltfCallback:t=>{e=t.animations}});t.readyEvent.addEventListener(()=>{_(e)&&e.length>0&&(o.clock.shouldAnimate=!0,t.activeAnimations.add({index:0,loop:M.REPEAT}))}),m=p.primitives.add(t),K(p),g=function(){p.camera.flyHome(0),X(p),p.primitives.remove(t),o.clock.shouldAnimate=!1}}else if(l===n["3DTILES"]){const t=await L.fromUrl(x);m=p.primitives.add(t),m.pointCloudShading.attenuation=!0,m.pointCloudShading.eyeDomeLighting=!0;const n=r.defaultStyle();let i;_(n)&&(m.style=new V(n)),r.id===f.googleTilesAssetId||c!==$.EARTH?p.globe.show=!1:r.georeferenced()||(m.modelMatrix=z,K(p),e.creditsVisible(!1)),_(R)&&(o.terrainProvider=await y.fromUrl(R,{requestVertexNormals:!0}),o.scene.globe.depthTestAgainstTerrain=!0);if(m.boundingSphere.radius<=.99*S.default.minimumRadius){const e=m._root._boundingVolume;i=p.primitives.add(e.createDebugVolume(w.WHITE))}g=function(){e.creditsVisible(!0),X(p),o.terrainProvider=new T,o.scene.globe.depthTestAgainstTerrain=!1,p.primitives.remove(m),_(i)&&p.primitives.remove(i)}}else if(l===n.CZML||l===n.KML||l===n.GEOJSON){const t=o.cesiumWidget.creditContainer,r=t.style.left,a=t.style.bottom,s=t.style.position;let c=!0;if(!i){const t=await x.head();parseInt(t["content-length"])>j&&(e._infoMessage(`Loading large ${n.toString(l)} assets may cause the browser to become unresponsive.`),c=!1)}if(c&&(m=l===n.KML?new D({camera:p.camera,canvas:o.canvas}):l===n.GEOJSON?new P:new I,o.dataSources.add(m),await m.load(x),_(m.clock))){o.timeline.container.style.display="inline-block",o.animation.container.style.display="inline-block",o.animation.resize(),o.timeline.resize();const e=o.animation.container.clientWidth+5,n=o.timeline.container.clientHeight+5;t.style.left=`${e}px`,t.style.bottom=`${n}px`,t.style.position="absolute"}g=function(){e._infoMessage(""),o.timeline.container.style.display="none",o.animation.container.style.display="none",o.animation.resize(),o.timeline.resize(),t.style.left=r,t.style.bottom=a,t.style.position=s,o.clock.shouldAnimate=!1,o.dataSources.removeAll()}}else if(t){const e=await y.fromUrl(x,{requestVertexNormals:!0});e.__asset={id:s,userId:r._userId},o.terrainProvider=e,m=e;const t=await h.getTerrainExtent(s,r._userId),n=E.clone(t);if(!W(n)){const e=[];let t,i;const r=C.toDegrees(n.north-n.south),a=C.toDegrees(n.north),s=C.toDegrees(n.east),l=C.toDegrees(n.south),c=C.toDegrees(n.west);for(i=n.west<n.east?C.toDegrees(n.east-n.west):C.toDegrees(C.TWO_PI+n.east-n.west),t=0;t<i;t++)e.push(b.fromDegrees(q(c+t),a));for(t=0;t<r;t++)e.push(b.fromDegrees(s,a-t));for(t=0;t<i;t++)e.push(b.fromDegrees(q(s-t),l));for(t=0;t<r;t++)e.push(b.fromDegrees(c,l+t));for(t=0;t<i;t++)e.push(b.fromDegrees(q(c+t),a));o.entities.add({polyline:{positions:e,width:2,color:w.WHITE,clampToGround:!0}})}g=function(){o.terrainProvider=new T,o.entities.removeAll()}}else{v=x,m=p.imageryLayers.addImageryProvider(v);const e=m.getImageryRectangle();W(e)||o.entities.add({rectangle:{coordinates:e,outlineWidth:2,fill:!1,outline:!0,outlineColor:w.WHITE}}),g=function(){p.imageryLayers.remove(m),o.entities.removeAll()}}if(p.globe.enableLighting=t,p.globe.dynamicAtmosphereLighting=!1,e._assetInstance=m,Z!==a)return void g();e._resetView(),e._loadingState(d.READY)}catch(Y){console.error(Y),e._loadingState(d.ERROR)}return g}function Q(e){O.logoUrl=`${c()}Images/bing_maps.png`,this._viewer=void 0,this._removeAsset=void 0,this._assetInstance=void 0,this._asset=o(e,v.observable()),this.assetId=v.pureComputed(function(){const e=this._asset();if(_(e))return e.id},this);const n=this;this._statusSubscription=void 0;const i=this._infoMessage=v.observable("");this._percentComplete=v.pureComputed(function(){const e=n._asset();return _(e)?e.percentComplete():0}),this.assetWarningButton=v.pureComputed(()=>{const e=this._asset();if(_(e)&&_(e.warnings)&&"COMPLETE"===e.status())return new m.Component({tag:"ion-asset-warning-button",properties:v.pureComputed(()=>({warnings:e.warnings()}))})}),this._progressMessage=v.pureComputed(function(){const e=n._asset(),t=_(e)&&_(e.progressMessage)?e.progressMessage():void 0;return _(t)?t:""}),this.showDataFormatsMessage=v.pureComputed(function(){const e=n._asset();if(!_(e))return!1;if(!t.isError(e.status()))return!1;const i=e.error();return!_(i)||1019!==i.code}),this._errorMessage=v.pureComputed(function(){const e=n._asset();if(!_(e))return"";const i=e.status();if(!t.isError(i))return"";let o;const a=e.error();if(_(a)&&i===t.DATA_ERROR){o=`__Error:__ \`${a.details?a.details.description:a.description}\``,8===a.code&&(o+=' You can see a list of supported formats in the <a href="https://cesium.com/learn/3d-tiling/tiler-data-formats/">Tiler Data Types and Formats guide</a>.');const e=a.details?a.details.filepath:a.filepath;_(e)&&(o+=`\n__File:__ \`${e}\``);const t=a.details?a.details:a.debug;_(t)&&(_(t.extension)&&(o+=`\n__Extension:__ \`${t.extension}\``),_(t.spatialReferenceSystem)&&(o+=`\n__Spatial Reference System:__ \`${t.spatialReferenceSystem}\``),_(t.message)&&(o+=`\n__Additional Information:__ \`${t.message}\``));const n=a.details?a.details.feature:a.feature;_(n)&&(o+=`\n__Feature:__ \`${n}\``),o=r(o)}else _(a)&&1019===a.code&&(o='There were not enough <a href="usage">analysis hours remaining</a> to process this asset when it was submitted. Please resubmit after your quota resets.');return _(o)?o:""}),this._progressBar=new g(this._percentComplete);const a=v.observable();this._loadingState=a;const l=v.pureComputed(function(){const e=n._asset();return!!_(e)&&t.isError(e.status())}),h=v.pureComputed(function(){const e=n._asset();if(!_(e))return!1;const i=e.status();return i===t.NOT_STARTED||i===t.IN_PROGRESS}),p=v.pureComputed(function(){const e=n._asset();return!!_(e)&&e.status()===t.AWAITING_FILES}),f=v.pureComputed(function(){return!l()&&!h()&&a()===d.IN_PROGRESS});this._loadingInProgress=f;const b=v.observable(!1);this.panelVisible=v.pureComputed(function(){return l()||h()||f()||p()||b()||i().length>0}),this.showGeoreferenceWarning=v.pureComputed(function(){const e=n._asset();return!!_(e)&&(e.movable()&&!e.georeferenced()&&!e.isPremium&&!e.isExternal&&e.status()===t.COMPLETE)}),this.georeferenceUrl=v.pureComputed(function(){const e=n._asset();return _(e)?`/tilesetLocationEditor/${e.id}`:""}),this.awaitingFiles=p,this.creditsVisible=v.observable(!0),this._processingIsError=l,this._processingInProgress=h,this._webglError=!u(),this._showWebglError=v.pureComputed(function(){const e=n._webglError,t=n.panelVisible();return e&&!t}),this.viewerError=b,this._removeRenderErrorEvent=void 0,this.isCesiumHostedIon=s.isEnabledForServer(s.Server.CESIUM_HOSTED_ION),this.isPublicInternetAccessEnabled=s.isEnabledForServer(s.Server.PUBLIC_INTERNET_ACCESS)}return Object.defineProperties(Q.prototype,{asset:{get:function(){return this._asset}},loadingInProgress:{get:function(){return this._loadingInProgress}},processingIsError:{get:function(){return this._processingIsError}},processingInProgress:{get:function(){return this._processingInProgress}},progressBar:{get:function(){return this._progressBar}},progressMessage:{get:function(){return this._progressMessage}},errorMessage:{get:function(){return this._errorMessage}},percentComplete:{get:function(){return this._percentComplete}},infoMessage:{get:function(){return this._infoMessage}},showWebglError:{get:function(){return this._showWebglError}},webglError:{get:function(){return this._webglError}}}),Q.prototype.destroyViewer=function(){if(!this._viewer)return;const e=this._viewer.container.parentElement;e&&e.removeChild(this._viewer.container),this._viewer.destroy(),this._viewer=void 0},Q.prototype.createViewer=function(){this.destroyViewer();const e=document.createElement("div");e.classList.add("fullscreen"),R.cesiumCredit=void 0;const t=new U(e,{showRenderLoopErrors:!1,requestRenderMode:!0,baseLayerPicker:!1,navigationHelpButton:!1,creditContainer:document.getElementById("creditDisplay"),geocoder:!1,infoBox:!1,selectionIndicator:!1,scene3DOnly:!0,baseLayer:!1,contextOptions:{getWebGLStub:window.getWebGLStub}});p._addImageryProviderToViewer(t,f.assetViewerImageryId),t.scene.light=new x({direction:new b(1,0,0)}),t.scene.preRender.addEventListener(function(e){const n=t.scene.light;n.direction=b.clone(e.camera.directionWC,n.direction)}),t.scene.logarithmicDepthBuffer=!0,t.scene.camera.frustum.near=.1,t.scene.camera.frustum.far=1e10,setTimeout(function e(){t.isDestroyed()||(t.scene.requestRender(),setTimeout(e,1e3))},1e3),t.canvas.setAttribute("touch-action","none"),t.timeline.container.style.display="none",t.animation.container.style.display="none",t.clock.shouldAnimate=!1;const n=t.scene;n.backgroundColor=S.default.equals(S.WGS84)?w.SLATEGRAY:w.BLACK,this._viewer=t;const i=this;return this._removeRenderErrorEvent=n.renderError.addEventListener(function(e,t){"Loaded model requires WebP but browser does not support it."===t.message&&i._asset().progressMessage("This 3D Tileset uses WebP images, but this browser does not support WebP."),i.viewerError(!0)}),document.getElementById("cesiumContainer").appendChild(t.container),t.fullscreenButton.viewModel.fullscreenElement=document.getElementById("assetViewerContainer"),t.homeButton.viewModel.command.beforeExecute.addEventListener(function(e){e.cancel=!0,i._resetView()}),t},Q.prototype.compositionComplete=async function(){this._webglError||(this.createViewer(),this._subscription=this._asset.subscribe(Q.prototype.onAssetUpdate,this),await this.onAssetUpdate(this._asset()))},Q.prototype.forceLoadAsset=async function(){return this.onAssetUpdate(this._asset(),!0)},Q.prototype.onAssetUpdate=async function(e,t){t=o(t,!1);const n=this._viewer;try{const e=this._removeAsset;"function"==typeof e&&(e(),n.scene.forceRender())}catch(r){console.error(r)}this.viewerError()&&(this.viewerError(!1),this._removeRenderErrorEvent(),this.createViewer()),this._removeAsset=await J(this,t);const i=this._statusSubscription;if(_(i)&&(i.dispose(),this._statusSubscription=void 0),_(e)&&!e.ready()){const n=this;this._statusSubscription=e.ready.subscribe(async function(i){i&&e===n._asset()&&(n._removeAsset=await J(n,t),n._statusSubscription.dispose(),n._statusSubscription=void 0)})}},Q.prototype._resetView=function(){_(this._assetInstance)&&l(this._viewer,this._assetInstance,0)},Q.prototype.detached=function(){_(this._subscription)&&this._subscription.dispose(),this._removeAsset=void 0,this.destroyViewer()},Q.prototype.onPrivateSupportClick=function(){e.sendEvent(e.category.ION_DASHBOARD,e.action.CLICK_PRIVATE_SUPPORT,e.label.APPLICATION)},Q._gzippedVectorDataSizeLimitBytes=j,Q}),define("Views/Components/ClickEditField",["Core/createDomId","Core/defaultValue","knockout"],function(e,t,n){"use strict";const i=Cesium.defined;Cesium.DeveloperError;function r(r){r=t(r,Cesium.Frozen.EMPTY_OBJECT),this._id=e(),this._input=r.input,this._label=t(r.label,""),this._hasLabel=this._label.length>0,this._editing=n.observable(!1),this._type=t(r.type,"text"),this._pending=t(r.pending,n.observable(!1));const o=this;this._useDefault=n.pureComputed(function(){return!i(o._input())||""===o._input()});const a=t(r.defaultDisplay,"");this._text=n.pureComputed(function(){const e=o._input();return o._useDefault()?a:e})}return Object.defineProperties(r.prototype,{id:{get:function(){return this._id}},label:{get:function(){return this._label}},hasLabel:{get:function(){return this._hasLabel}},pending:{get:function(){return this._pending}},editing:{get:function(){return this._editing}},text:{get:function(){return this._text}},type:{get:function(){return this._type}},input:{get:function(){return this._input}},useDefault:{get:function(){return this._useDefault}}}),r.prototype.edit=function(){this._pending()||this._editing(!0)},r.prototype.submit=function(){this._editing(!1)},r}),define("Views/Components/CollapsePanel",["Core/createDomId","Core/defaultValue","jquery","knockout"],function(e,t,n,i){"use strict";const r=Cesium.defined;Cesium.DeveloperError;function o(n,o,a,s){const l=e();this._bodyContainerId=`collapse-body-${l}`,this._name=n,this._nameContainerId=`collapse-name-${l}`;const c=this;this._bootstrapCollapse=void 0,this._isShown=i.observable(t(s,!0)),this._disabled=i.observable(!1),this._show=i.pureComputed({read:function(){return c._isShown()},write:function(e){const t=c._bootstrapCollapse;r(t)?e?t.collapse("show"):t.collapse("hide"):c._isShown(e)}}),this._panelContent=o,this._buttons=t(a,[])}return Object.defineProperties(o.prototype,{bodyContainerId:{get:function(){return this._bodyContainerId}},name:{get:function(){return this._name}},nameContainerId:{get:function(){return this._nameContainerId}},disabled:{get:function(){return this._disabled}},show:{get:function(){return this._show}},panelContent:{get:function(){return this._panelContent}},buttons:{get:function(){return this._buttons}}}),o.prototype.compositionComplete=function(){const e=this,t=n(`#${this._bodyContainerId}`);t.on("show.bs.collapse",function(t){e._disabled()?t.preventDefault():(t.stopPropagation(),e._isShown(!0))}),t.on("hide.bs.collapse",function(t){e._disabled()?t.preventDefault():(t.stopPropagation(),e._isShown(!1))}),this._isShown()&&t.addClass("in"),this._bootstrapCollapse=t},o}),define("Views/Components/EditTokenButton",["Core/createDomId"],function(e){"use strict";const t=Cesium.Event,n=Cesium.defined;function i(i){this.id=e(),this.editToken=new t,this.data=n(i)&&n(i.data)?i.data:void 0,this.hideLowerText=!(!n(i)||!n(i.hideLowerText))&&i.hideLowerText}return i.prototype.onEditTokenClick=function(){this.editToken.raiseEvent(this.data)},i}),define("Views/Components/FormField",["Core/createDomId","Core/defaultValue","knockout"],function(e,t,n){"use strict";const i=Cesium.defined;function r(r){r=t(r,Cesium.Frozen.EMPTY_OBJECT),this.id=t(r.id,e()),this.label=t(r.label,""),this.tabindex=t(r.tabindex,0),this.required=t(r.required,!1),this.autofocus=1===this.tabindex,this.disabled=t(r.disabled,n.observable(!1)),this.focus=n.observable(!1),this.input=i(r.input)?r.input:n.observable(""),this.feedback=void 0,"function"==typeof r.feedback?this.feedback=n.pureComputed(function(){return r.feedback(this.input())},this):this.feedback=n.pureComputed(function(){return""},this),this.hasError=n.pureComputed(function(){return this.feedback().length>0},this)}return r.prototype.compositionComplete=function(){this.autofocus&&this.focus(!0)},r}),define("Views/Components/FormInput",["Core/defaultValue","./FormField"],function(e,t){"use strict";function n(n){t.call(this,n),n=e(n,Cesium.Frozen.EMPTY_OBJECT),this.type=e(n.type,"text"),this.addonBefore=e(n.addonBefore,!1),this.addonAfter=e(n.addonAfter,!1),this.hasAddons=!1!==this.addonBefore||!1!==this.addonAfter,this.minimum=e(n.minimum,!1),this.maximum=e(n.maximum,!1),this.step="number"===n.type&&e(n.step,1)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n}),define("Views/Components/FormTextArea",["./FormField"],function(e){"use strict";function t(t){e.call(this,t)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}),define("Views/Components/JobMessage",["plugins/dialog","./Form/FormHelper"],function(e,t){"use strict";function n(e,n,i,r,o){this.message=e,this.title=n,this.options=i,this.autoclose=r||!1,this.settings=o;const a=new t;this._formHelper=a,this.timeOutField=a.createNumberInput({label:"Timeout (in Days)",required:!0,step:1,minimum:1,value:1})}return n.prototype.restartJob=function(){if(!this._formHelper.isValid())return;const t=this.timeOutField.input();e.close(this,t)},n.prototype.close=function(){e.close(this,void 0)},n}),define("Core/useLightText",[],function(){"use strict";Cesium.Check;return function(e){return.2126*e.red+.7152*e.green+.0722*e.blue<.7}}),define("Core/Label",["./defaultValue","./useLightText","knockout"],function(e,t,n){"use strict";Cesium.Check;const i=Cesium.Color;function r(r,o){this.id=r.id,this.name=n.observable(r.name);const a=n.observable(i.fromRgba(r.color));this.color=a,this.colorString=n.pureComputed(function(){return a().toCssColorString()}),this.selected=n.observable(e(o,!1)),this.className=n.pureComputed(function(){return t(a())?"light-text":"dark-text"})}return r.prototype.toReact=function(){return{id:this.id,color:this.color().toRgba(),name:this.name()}},r}),define("text!Views/Components/LabelPickerContent.html",[],function(){return'<div class="label-picker">\n  <div class="label-picker-list" data-bind="foreach: labels">\n    <div class="checkbox">\n      <label class="label-picker-checkbox" data-bind="css: className">\n        <input type="checkbox" data-bind="checked: selected" />\n        <span\n          class="label-picker-label"\n          data-bind="style: {\'background-color\': colorString}, text: name"\n        ></span>\n      </label>\n    </div>\n  </div>\n  <p class="text-danger" data-bind="text: labelError"></p>\n  <div>\n    <a class="label-manager-redirect" data-bind="attr: {href: manageLabelsLink}"\n      >Manage Labels</a\n    >\n  </div>\n</div>\n'}),define("Views/Components/LabelPicker",["Core/createDomId","Core/defaultValue","Core/isViewportMobile","Core/Label","Core/Services","jquery","knockout","text!Views/Components/LabelPickerContent.html"],function(e,t,n,i,r,o,a,s){"use strict";Cesium.Check;const l=Cesium.defined;function c(e,t){return e.id<t.id?-1:1}function u(n,i,r,o){i=t(i,"left");const s=a.observableArray([]);this.labels=s,this._selectedLabels=n,this.selectedLabels=a.pureComputed(function(){return a.utils.arrayFilter(s(),function(e){return e.selected()})}),this.labelError=a.observable(""),this.id=e(),this.placement=i,this.xsPlacement=t(r,i),this._isAdmin=o,this.manageLabelsLink=o?"admin/settings/assetdepotlabels":"account/labels"}return u.prototype.activate=async function(){const e=this.labels,t=this._selectedLabels,n=this.labelError,o=this._isAdmin?r.getAssetDepotLabels:r.getLabels;try{const n=await o(),r=t();l(r)?e(n.map(function(e){return new i(e,a.utils.arrayFirst(r,function(t){return t.id===e.id}))})):e(n.map(function(e){return new i(e)}))}catch(s){n("Unable to load labels")}},u.prototype.compositionComplete=function(){const e=`${this.id}-help`;let t;const i=this;let r;o(`#${this.id}`).popover({content:function(){return`<div id="${e}">${s}</div>`},viewport:"body",container:"body",placement:function(){return n()?i.xsPlacement:i.placement},html:!0,sanitize:!1}).on("inserted.bs.popover",function(){const e=o(this).attr("aria-describedby");r=o(`#${e}`),i.resetSelected(),a.applyBindings(i,r.get(0))}).on("shown.bs.popover",function(){t=function(e){const t=e.target,n="label-manager-redirect"===t.className;(n||!r.is(t)&&0===r.has(t).length)&&(n||e.stopPropagation(),r.popover("hide"))},document.body.addEventListener("click",t,!0)}).on("hide.bs.popover",function(){if(!l(r))return;document.body.removeEventListener("click",t,!0),a.cleanNode(r.get(0));(function(e,t){if(e.length!==t.length)return!1;e.sort(c),t.sort(c);for(let n=0;n<e.length;n++)if(e[n].id!==t[n].id)return!1;return!0})(i._selectedLabels(),i.selectedLabels())||i._selectedLabels(i.selectedLabels()),i.resetSelected(),r=void 0}).on("hidden.bs.popover",function(e){o(e.target).data("bs.popover").inState.click=!1})},u.prototype.resetSelected=function(){const e=this._selectedLabels();this.labels().forEach(function(t){t.selected(a.utils.arrayFirst(e,function(e){return e.id===t.id}))})},u.prototype.detached=function(){o(`#${this.id}`).popover("destroy"),this.labels([])},u}),define("Views/Components/LeaveTeamButton",["../../Core/isViewportMobile","Core/createDomId","Core/defaultValue","jquery","knockout"],function(e,t,n,i,r){"use strict";const o=Cesium.defined,a=Cesium.Event;function s(e){e=n(e,Cesium.Frozen.EMPTY_OBJECT);const i=n(e.buttonText,"Leave"),o=n(e.placement,"bottom");this.id=t(),this.width=n(e.width,180),this.placement=o,this.xsPlacement=n(e.xsPlacement,o),this.confirmText=n(e.confirmText,"Leave?"),this._confirmText="",this.disabled=n(e.disabled,!1),this.disabledText=n(e.disabledText,"Action cannot be completed"),this._disabledText="",this.lowerText=r.observable(e.hideLowerText?"":i),this.buttonText=r.observable(""===i?"Leave":i),this.delete=new a,this.data=e.data,this.verify=e.verify,this.viewUrl=e.viewUrl,this.pending=n(e.pending,r.observable(!1))}return s.prototype.compositionComplete=function(){const t=this.verify,n=this.buttonText(),a=this.width,s=this.delete,l=this.pending,c=this.data,u=this;let d;i(`#${this.id}`).popover({html:!0,sanitize:!1,content:function(){return r.unwrap(u.disabled)?`<div style="width: ${a}px">${u._disabledText}</div>`:`<div style="width: ${a}px">${u._confirmText}</div><div class="leave team-button-buttons"><button type="button" class="btn btn-danger okay">${n}</button> <button class="btn btn-default cancel" type="button">Don't ${n.toLowerCase()}</button></div>`},placement:function(){return e()?u.xsPlacement:u.placement},trigger:"manual"}).on("show.bs.popover",function(){return!l()}).on("shown.bs.popover",function(){const e=i(this),n=e.attr("aria-describedby"),r=i(`#${n}`);r.find("button.okay").click(function(){if(o(t)){const n=r.find("input.verify");t(n.val())?(s.raiseEvent(c),e.popover("hide")):(r.addClass("has-error"),r.find("input.verify").addClass("bg-danger"))}else s.raiseEvent(c),e.popover("hide")}),r.find("button.cancel").click(function(){e.popover("hide")}),d=function(t){e.is(t.target)||0!==e.has(t.target).length||0!==r.has(t.target).length||e.popover("hide")},document.body.addEventListener("click",d)}).on("hidden.bs.popover",function(e){i(e.target).data("bs.popover").inState.click=!1}).on("hide.bs.popover",function(){document.body.removeEventListener("click",d)})},s.prototype.onDeleteClick=async function(){let e=this.confirmText;"function"==typeof e&&(e=e());let t=this.disabledText;"function"==typeof t&&(t=t());const n=this.id,r=await Promise.all([e,t]);this._confirmText=r[0],this._disabledText=r[1],i(`#${n}`).popover("show")},s.prototype.detached=function(){const e=i(`#${this.id}`);o(e.popover)&&e.popover("destroy")},s}),define("Views/Components/RegenerateDefaultTokenButton",["../../Core/isViewportMobile","Core/createDomId","Core/defaultValue","jquery","knockout"],function(e,t,n,i,r){"use strict";const o=Cesium.defined,a=Cesium.Event;function s(e){e=n(e,Cesium.Frozen.EMPTY_OBJECT),this.id=t(),this.width=300,this.placement=n(e.placement,"bottom"),this.xsPlacement=n(e.xsPlacement,this.placement),this.confirmText='<div class="bold">Regenerate default access token?</div> Regenerating your default access token will replace the current default token with a new one. The old token will not be recoverable and applications using it will no longer be able to access your content.<br><br>',this.buttonText="Regenerate",this.showLowerText=n(e.showLowerText,!1),this.regenerateDefaultToken=new a,this.pending=r.observable(!1)}return s.prototype.compositionComplete=function(){const t=this.buttonText,n=this.width,r=this.regenerateDefaultToken,o=this.pending,a=this;let s;i(`#${this.id}`).popover({html:!0,sanitize:!1,content:function(){return`<div style="width: ${n}px">${a.confirmText}</div><div class="regenerate-default-token-button-buttons"><button type="button" class="btn btn-danger okay">${t}</button> <button class="btn btn-default cancel" type="button">Don't ${t.toLowerCase()}</button></div>`},placement:function(){return e()?a.xsPlacement:a.placement},trigger:"manual"}).on("show.bs.popover",function(){return!o()}).on("shown.bs.popover",function(){const e=i(this),t=e.attr("aria-describedby"),n=i(`#${t}`);n.find("button.okay").click(function(){r.raiseEvent(),e.popover("hide")}),n.find("button.cancel").click(function(){e.popover("hide")}),s=function(t){e.is(t.target)||0!==e.has(t.target).length||0!==n.has(t.target).length||e.popover("hide")},document.body.addEventListener("click",s)}).on("hidden.bs.popover",function(e){i(e.target).data("bs.popover").inState.click=!1}).on("hide.bs.popover",function(){document.body.removeEventListener("click",s)})},s.prototype.onRegenerateDefaultTokenClick=function(){i(`#${this.id}`).popover("show")},s.prototype.detached=function(){const e=i(`#${this.id}`);o(e.popover)&&e.popover("destroy")},s}),define("Core/getLabelsFilterObservable",["./find","./isStringEmptyOrWhitespace","knockout"],function(e,t,n){"use strict";Cesium.Check;const i=Cesium.defined;Cesium.DeveloperError;return function(r,o,a){return a.splice(a.indexOf("labels"),1),n.pureComputed(function(){let s=r(),l=o();if(t(l))return s;l=l.replace(/"/g,"'");const c=/\blabel:(([^'\s]+)|('[^']+'))/g;let u=[];const d=l.match(c);null!==d&&(u=d.map(function(e){return new RegExp(`^${e.substr(6).replace(/'/g,"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}$`,"i")}),l=l.replace(c,""));const h=l.split(/\s+/).map(function(e){return new RegExp(e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i")});return u.length>0&&(s=n.utils.arrayFilter(s,function(t){let r=t.labels;return r=n.unwrap(r),r=r.map(function(e){return e.name()}),u.every(function(t){return i(e(r,t.test.bind(t)))})})),h.length>0&&(s=n.utils.arrayFilter(s,function(t){const r=[];return a.forEach(function(e){let o=t[e];i(o)&&(o=n.unwrap(o),r.push(o))}),h.every(function(t){return i(e(r,t.test.bind(t)))})})),s}).extend({rateLimit:200})}}),define("Views/Dashboard/ListPane",["Core/defaultValue","Core/Feature","Core/getDocumentBaseUri","Core/getFilterObservable","Core/getLabelsFilterObservable","Core/isStringEmptyOrWhitespace","Core/PageLoadingState","knockout","plugins/router","Views/Components/ContextualHelp"],function(e,t,n,i,r,o,a,s,l,c){"use strict";const u=Cesium.defined,d=(Cesium.DeveloperError,Cesium.Event),h=Cesium.queryToObject,p=["name","description","id"];function f(e){return function(t,n){let i=s.unwrap(t[e]),r=s.unwrap(n[e]);return i===r&&(i=t.id,r=n.id),"boolean"==typeof i?i>r?1:-1:"string"==typeof i?i.toLowerCase()>r.toLowerCase()?-1:1:i>r?-1:1}}function m(m){const g=(m=e(m,Cesium.Frozen.EMPTY_OBJECT)).items,v=s.observable(a.IN_PROGRESS);this._loadState=v,this._itemsLoadedPromise=m.itemsLoadedPromise,this._afterTitleContent=e(m.afterTitleContent,!1),this._items=g,this._selectedItem=m.selectedItem,this._title=m.title,this._newButtonText=m.newButtonText,this._newButtonVisible=u(m.newButtonText),this._enableGrid=u(m.gridTilePath),this._gridTilePath=m.gridTilePath,this._tablePath=m.tablePath,this._newItem=new d,this._editItem=new d;let b=m.editRoute;"string"==typeof b&&(b={name:b,external:!1,fragment:!1}),this._editRoute=b,this._planDetails=m.planDetails;const y=e(m.disableNew,!1),w=e(m.hideNew,s.observable(!1));this._disableNew=y,this._hideSearch=e(m.hideSearch,!1),this._hideToolbar=e(m.hideToolbar,!1),this._hideNew=w,this._disableNew=e(m.disableNew,!1),this._data=m.data,this.edit=this.edit.bind(this),this.setLabel=this.setLabel.bind(this),this._hasItems=s.pureComputed(function(){return g().length>0}),this._hasPlanDetails=u(m.planDetails);const _=u(m.helpContent);this._hasHelp=_,this._contextualHelp=void 0,_&&(this._contextualHelp=new c(m.helpContent,".pane-left.dashboard-pane")),this._isError=s.pureComputed(function(){return v()===a.ERROR}),this._isReady=s.pureComputed(function(){return v()===a.READY}),this._isInProgress=s.pureComputed(function(){return v()===a.IN_PROGRESS});const x=s.observable(e(h(window.location.search.substr(1)).query,"")),S=n().length;this.searchText=s.pureComputed({read:function(){return x()},write:function(e){x(e);let t=window.location.origin+window.location.pathname;t=t.substring(S),o(e)?l.navigate(t,{replace:!0,trigger:!1}):l.navigate(`${t}?query=${e}`,{replace:!0,trigger:!1})}});const T=e(m.searchFields,p);let A;A=-1!==T.indexOf("labels")?r(g,x,T):i(g,x,T);const C=e(m.defaultSortField,T[0]);this._sortedBy=s.observable(C),this._descending=s.observable(m.defaultSortDescending),this._sorter=s.observable(f(C));const E=this,k=s.pureComputed(function(){const e=E._sorter();return A().sort(e)});this.tableItems=s.pureComputed(function(){return E._descending()?k():k().slice().reverse()}),this.hasNoResults=s.pureComputed(function(){return g().length>0&&0===A().length}),this.billingDisabled=!t.isEnabledForServer(t.Server.BILLING),this.isPublicInternetAccessEnabled=t.isEnabledForServer(t.Server.PUBLIC_INTERNET_ACCESS)}return Object.defineProperties(m.prototype,{afterTitleContent:{get:function(){return this._afterTitleContent}},items:{get:function(){return this._items}},selectedItem:{get:function(){return this._selectedItem}},title:{get:function(){return this._title}},newItem:{get:function(){return this._newItem}},editItem:{get:function(){return this._editItem}},newButtonText:{get:function(){return this._newButtonText}},newButtonVisible:{get:function(){return this._newButtonVisible}},enableGrid:{get:function(){return this._enableGrid}},gridTilePath:{get:function(){return this._gridTilePath}},tablePath:{get:function(){return this._tablePath}},hasPlanDetails:{get:function(){return this._hasPlanDetails}},planDetails:{get:function(){return this._planDetails}},hasHelp:{get:function(){return this._hasHelp}},contextualHelp:{get:function(){return this._contextualHelp}},disableNew:{get:function(){return this._disableNew}},hideSearch:{get:function(){return this._hideSearch}},hideToolbar:{get:function(){return this._hideToolbar}},hideNew:{get:function(){return this._hideNew}},loadState:{get:function(){return this._loadState}},isError:{get:function(){return this._isError}},isReady:{get:function(){return this._isReady}},isInProgress:{get:function(){return this._isInProgress}},data:{get:function(){return this._data}}}),m.prototype.activate=async function(){const e=this;this.loadState(a.IN_PROGRESS);try{await this._itemsLoadedPromise,e._loadState(a.READY)}catch(t){e._loadState(a.ERROR)}},m.prototype.compositionComplete=function(){const e=document.getElementsByClassName("dashboard-list-content")[0];let t;if(t=this.enableGrid?e.querySelector(".dashboard-grid-tile.selected"):e.querySelector("tr.active"),u(t)){t.getBoundingClientRect().bottom>window.innerHeight&&t.scrollIntoView(!1)}},m.prototype.createNew=function(){this.newItem.raiseEvent()},m.prototype._editItem=function(){this.editItem.raiseEvent(this.selectedItem())},m.prototype.edit=function(){if(!this._disableNew){const e=this.selectedItem(),t=this._editRoute;if(u(e)&&u(t)){const i=t.fragment?"#":"/",r=t.name+i+e.id;t.external?window.location=n()+r:l.navigate(r)}}},m.prototype.setLabel=function(e){const t=`label:'${e.name()}'`,n=this.searchText();-1===n.indexOf(t)&&(o(n)?this.searchText(t):this.searchText(`${n} ${t}`))},m.prototype.sortStatus=function(e){const t=this;return s.pureComputed(function(){return t._sortedBy()===e?t._descending()?"fa-sort-desc":"fa-sort-asc":"fa-sort"})},m.prototype.sortBy=function(e){const t=this;return function(){t._sortedBy()!==e?(t._sorter(f(e)),t._descending(!1),t._sortedBy(e)):t._descending(!t._descending())}},m.prototype.beforeSelectedItemRemoved=function(){const e=this._selectedItem(),t=this.tableItems(),n=t.length;if(1===n)this._selectedItem(void 0);else{let i=t.indexOf(e);i=i===n-1?n-2:i+1,this._selectedItem(t[i])}},m}),define("Views/Dashboard/DashboardShell",["Core/defaultValue","../../Core/defer","../../Core/isViewportMobile","../../Core/Services","./ListPane","knockout","plugins/router"],function(e,t,n,i,r,o,a){"use strict";Cesium.Check;const s=Cesium.defined;Cesium.DeveloperError;function l(){return!0}function c(n){n=e(n,Cesium.Frozen.EMPTY_OBJECT);const i=e(n.enableGrid,!1);this.itemViewModel=n.itemViewModel;const u=o.observableArray([]);this._showDetails=o.pureComputed(function(){return this.rightPane()!==this.detailsPane||s(this._selectedItem())},this);const d=o.pureComputed(function(){const t=o.utils.unwrapObservable(n.getItemsFilter);return e(t,l)}),h=o.pureComputed(function(){return o.utils.arrayFilter(u(),d())}),p=o.observable();this._filterChangeSubscription=h.subscribe(function(e){const t=p();s(t)&&-1===e.indexOf(t)&&p(h()[0])}),this._selectedItem=o.pureComputed({read:function(){return p()},write:function(e){e!==p()&&(p(e),s(e)&&"function"==typeof e.onSelected&&e.onSelected())}});const f=t(),m=`${n.path}Table.html`,g=i?`${n.path}Tile.html`:void 0,v=new r({afterTitleContent:n.afterTitleContent,items:h,selectedItem:this._selectedItem,title:n.title,newButtonText:n.newButtonText,tablePath:m,gridTilePath:g,hideSearch:n.hideSearch,editRoute:n.editRoute,planDetails:n.planDetails,helpContent:n.helpContent,disableNew:n.disableNew,itemsLoadedPromise:f.promise,searchFields:n.searchFields,defaultSortField:n.defaultSortField,defaultSortDescending:n.defaultSortDescending,data:n.data}),b=new n.detailsPane(this._selectedItem,v.setLabel),y=o.observable(!1);this.disabled=y,this._listPane=v,this._detailsPane=b,this._title=n.title,this._hash=n.hash,this._items=u;const w=this;this._itemsSubscription=u.subscribe(function(e){e.forEach(function(e){s(e.value.deleteEvent)&&("added"===e.status?(e.value.deleteEvent.addEventListener(c.prototype.deleteItem,w),s(e.value.editEvent)&&e.value.editEvent.addEventListener(c.prototype.editItem,w)):(e.value.deleteEvent.removeEventListener(c.prototype.deleteItem,w),s(e.value.editEvent)&&e.value.editEvent.removeEventListener(c.prototype.editItem,w)))})},void 0,"arrayChange");const _=o.observable(b);let x;this.rightPane=_,s(n.editPane)&&(x=b.edit.addEventListener(function(e){const t=new n.editPane(e),i=t.close.addEventListener(function(e){s(e)&&u.push(new n.itemViewModel(e)),_(b),y(!1),i()});_(t),y(!0)})),this._removeEditListener=x,s(b.delete)&&(this._removeDeleteEventListener=b.delete.addEventListener(this.deleteSelected,this));const S=e(n.autoSelect,!0);this._routeSubscription=void 0,S&&(this._routeSubscription=p.subscribe(function(e){s(e)?a.navigate(`${n.hash}/${e.id}${window.location.search}`,{replace:!0,trigger:!1}):a.navigate(`${n.hash}/${window.location.search}`,{replace:!0,trigger:!1})})),this._filteredItems=h,this._itemsLoaded=f,this._signOutSubscription=void 0}return Object.defineProperties(c.prototype,{selectedItem:{get:function(){return this._selectedItem}},items:{get:function(){return this._items}},showDetails:{get:function(){return this._showDetails}},listPane:{get:function(){return this._listPane}},detailsPane:{get:function(){return this._detailsPane}}}),c.prototype.compositionComplete=function(){const e=this;this._signOutSubscription=i.isSignedIn.subscribe(function(t){t||e._items().forEach(function(e){e.destroy()})})},c.prototype.loadItems=async function(e){const t=this.itemViewModel,i=this._items,r=this._filteredItems,a=this._selectedItem,l=this._itemsLoaded;try{const c=await t.getAll();let u;const d=c.length,h=i.removeAll(),p=[];let f;for(u=0;u<d;u++)f=new t(c[u]),i.push(f),p.push(f.id);h.forEach(function(e){const t=p.indexOf(e.id);-1===t?(i.push(e),a(e)):(e.destroy(),a(i()[t]))}),n()||s(a())||(s(e)?(f=o.utils.arrayFirst(i(),function(t){return t.id===e}),s(f)?a(f):a(r()[0])):a(r()[0])),l.resolve()}catch(c){l.reject()}return l.promise},c.prototype.deleteSelected=async function(){const e=this._selectedItem();if(!s(e))return void(s(this._removeEditListener)&&this._removeEditListener());await e.delete(),this._listPane.beforeSelectedItemRemoved(),this._items.remove(e),e.destroy()},c.prototype.deleteItem=async function(e){await e.delete(),this._listPane.beforeSelectedItemRemoved(),this._items.remove(e),e.destroy()},c.prototype.editItem=function(e){s(this.listPane)&&this.listPane.editItem.raiseEvent(e)},c.prototype.detached=function(){s(this._removeDeleteEventListener)&&this._removeDeleteEventListener(),s(this._routeSubscription)&&this._routeSubscription.dispose(),this._filterChangeSubscription.dispose(),s(this._signOutSubscription)&&(this._signOutSubscription.dispose(),this._signOutSubscription=void 0),this._itemsSubscription.dispose();const e=this;this._items().forEach(function(t){s(t.deleteEvent)&&t.deleteEvent.removeEventListener(c.prototype.deleteItem,e),s(t.editEvent)&&t.editEvent.removeEventListener(c.prototype.editItem,e),t.destroy()})},c}),define("Views/Dashboard/ItemViewModel",[],function(){"use strict";const e=Cesium.DeveloperError;function t(){this._id=void 0,this._name=void 0,this._description=void 0,e.throwInstantiationError()}return Object.defineProperties(t.prototype,{id:{get:e.throwInstantiationError},name:{get:e.throwInstantiationError},description:{get:e.throwInstantiationError}}),t.getAll=e.throwInstantiationError,t.prototype.delete=e.throwInstantiationError,t}),define("Views/Dashboard/getRemoveAssetWarning",["../../Core/Services","../../Core/Feature","knockout"],function(e,t,n){"use strict";Cesium.Check;const i=Cesium.defined;function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(e){return function(e,t){return`<${t}>${r(e)}</${t}>`}(e,"li")}function a(e){return e.name}function s(e,t,n){if(0===e.length&&0===t.length)return"Delete asset?";let s='<span class="bold">Delete asset?</span>';return e.length>0&&(s+="<p>This asset is part of the following stories:\n",s+=function(e){return`<ul>${e.map(a).map(o).join("")}</ul>`}(e),s+="Deleting the asset will remove it from each of these stories.</p>"),t.length>0&&(s+="<p>This asset is contained in the following clips:\n"+function(e,t){let n;e.length>13?n="10+":e.length>3&&(n=e.length-3);const o=e.slice(0,3).map(function(e){return`<li>${r(e.name)}</li>`});if(i(n)){const e=`/clips?search=${encodeURI(`asset:${t}`)}`;o.push(`<li><a href="${e}">and ${n} more clips...</a></li>`)}return`<ul>${o.join("")}</ul>`}(t,n)+"Deleting the asset will delete these clips.</p>"),s}return async function(i){i=n.unwrap(i);const r=await e.getAssetStories(i.id),o=t.isEnabledForUser(t.User.ASSET_ARCHIVES_CLIPS)?await e.getAssetArchives({assetId:i.id,clipped:!0,limit:14}):{items:[]};return i._stories=r,s(r,o.items,i.id)}}),define("Views/Layout/DashboardHeader",["Core/defaultValue","Core/getDocumentBaseUri","Core/isStringEmptyOrWhitespace","knockout","plugins/router","Views/Components/ContextualHelp"],function(e,t,n,i,r,o){"use strict";Cesium.Check;const a=Cesium.defined,s=Cesium.Event,l=Cesium.queryToObject;function c(c){c=e(c,Cesium.Frozen.EMPTY_OBJECT),this.title=c.title,this.contextualHelp=new o(c.helpContent,c.helpContainer),this.newButtonText=c.newButtonText,this.showNewButton=a(this.newButtonText),this.searchBoxVisible=e(c.searchBoxVisible,!0);const u=i.observable(e(l(window.location.search.substr(1)).query,"")),d=t().length;this.searchText=i.pureComputed({read:function(){return u()},write:function(e){u(e);let t=window.location.origin+window.location.pathname;t=t.substring(d),n(e)?r.navigate(t,{replace:!0,trigger:!1}):r.navigate(`${t}?query=${e}`,{replace:!0,trigger:!1})}}),this.newItem=new s}return c.prototype.createNew=function(){this.newItem.raiseEvent()},c}),define("Views/Static/Changelog",["../../Core/Services"],function(e){"use strict";const t=Cesium.defined;return{showHeader:e.isSignedIn(),isSignedIn:e.isSignedIn,compositionComplete:function(){const e=document.getElementById(location.hash.slice(1));t(e)&&e.scrollIntoView()}}}),define("Views/Static/Error",["Core/defaultValue","Core/Services","generated/ClientErrorCodes"],function(e,t,n){"use strict";n=n.ClientErrorCodes;const i={[n.USER_NAME_CONFLICT]:"An account with that username or email already exists.",[n.INVALID_SAML_RESPONSE]:"The login response was not able to be verified.",[n.INVALID_SAML_NAME_ID_FORMAT]:"NameIDFormat did not match the expected value."};function r(){this.showHeader=t.isSignedIn(),this.details=void 0,this.json=void 0}return r.prototype.activate=function(t){if(t&&t.code&&(this.details=e(i[t.code],t.code)),t&&t.json){const e=t.json;try{const t=JSON.parse(e);this.json=JSON.stringify(t,void 0,2)}catch(n){console.error("Failed to parse JSON from json query parameter",n)}}},r}),define("Views/Static/NotFound",["Core/Services"],function(e){"use strict";return{showHeader:e.isSignedIn()}}),define("Views/Static/OpenSource",["../../Core/Services"],function(e){"use strict";return{showHeader:e.isSignedIn(),isSignedIn:e.isSignedIn}}),define("Views/Static/Unavailable",[],function(){"use strict";return{showHeader:!1,isSignedIn:!1}}),define("Views/Static/WebGLTroubleshoot",["../../Core/hasWebGLSupport","../../Core/Services"],function(e,t){"use strict";return{showHeader:t.isSignedIn(),isSignedIn:t.isSignedIn,hasWebGLSupport:e()}}),define("Views/TilesetTransformEditor/TilesetTransformEditorGeocodePanel",["knockout","Views/Components/createTerrainAssetSelector","Core/defaultValue","Core/defer","Core/Feature"],function(e,t,n,i,r){"use strict";const o=Cesium.Cartographic,a=(Cesium.Check,Cesium.defined),s=Cesium.Ellipsoid,l=Cesium.Event,c=Cesium.Rectangle,u=Cesium.sampleTerrainMostDetailed,d=Cesium.Geocoder,h=Cesium.GeocoderViewModel;function p(n){r.isEnabledForServer(r.Server.GEOCODER)?(this.isGeocoderEnabled=!0,this._geocoder=new d({scene:n.scene,container:document.createElement("div"),destinationFound:this.setPosition.bind(this)}),this._geocoder.viewModel.keepExpanded=!0):(this.isGeocoderEnabled=!1,this._geocoder=void 0);const i=t({title:"Terrain",allowExternal:!0});this.terrainAssetSelector=i,this.terrainAssetId=e.pureComputed({read:function(){return i.getSelectedIds()[0]},write:function(e){i.selectById(e)}}),this.pending=e.observable(!1),this.close=new l,this._destination=new o,this._lastSearchText=void 0,this._viewer=n}return p.prototype.attached=function(){this.isGeocoderEnabled&&document.getElementById("settingsGeocoderContainer").appendChild(this._geocoder.container)},p.prototype.setPosition=function(e,t){h.flyToDestination(e,t),this._lastSearchText=e.searchText,this._destination=t instanceof c?c.center(t):s.WGS84.cartesianToCartographic(t)},p.prototype.closePanel=async function(){const e=this.pending;if(e())return;e(!0);let t=this._destination;const r=this._viewer;let o;try{if(this.isGeocoderEnabled){const e=this._geocoder.viewModel;if(this._geocoder.viewModel.searchText!==this._lastSearchText){const t=i(),n=e.search.afterExecute.addEventListener(function(){a(e._geocodePromise)?Promise.resolve(e._geocodePromise).finally(t.resolve):t.resolve(),n()});e.search(),await t.promise}}else t=new Cesium.Cartographic(0,0);if(a(this.terrainAssetId())){o=(await p._sampleTerrainMostDetailed(r.terrainProvider,[t],!0))[0]}else o=t}catch(l){t.height=r.scene.globe.getHeight(t),o=t}finally{const t=n(o,this._destination),i=s.WGS84.cartographicToCartesian(t);e(!1),this.close.raiseEvent(i,this.terrainAssetId())}},p._sampleTerrainMostDetailed=u,p}),define("Views/TilesetTransformEditor/TilesetTransformEditorPanel",["Core/Feature","Core/flyToAsset","Core/Validation","knockout","Views/Components/Form/FormHelper"],function(e,t,n,i,r){"use strict";const o=Cesium.Cartesian3,a=(Cesium.Check,Cesium.defined),s=(Cesium.DeveloperError,Cesium.Ellipsoid),l=Cesium.Event,c=Cesium.HeadingPitchRoll,u=Cesium.Math,d=Cesium.Rectangle,h=Cesium.sampleTerrainMostDetailed,p=Cesium.Geocoder;function f(e){return Number(e.toFixed(10)).toString()}function m(e){return n.validNumber(e)&&Number(e)>0}function g(e){return m(e)?"":"Scale must be greater than 0"}function v(t){const a=t.scene,d={longitude:i.observable(0),latitude:i.observable(0),height:i.observable(0)},h={heading:i.observable(0),pitch:i.observable(0),roll:i.observable(0)},v={x:i.observable(1),y:i.observable(1),z:i.observable(1),uniform:i.observable(1)};e.isEnabledForServer(e.Server.GEOCODER)?(this.isGeocoderEnabled=!0,this._geocoder=new p({scene:a,container:document.createElement("div"),destinationFound:this.setPosition.bind(this)}),this._geocoder.viewModel.keepExpanded=!0):(this.isGeocoderEnabled=!1,this._geocoder=void 0);const b=i.observable(new c),y=i.observable(new o),w=i.pureComputed({read:function(){return d.longitude()},write:function(e){"number"==typeof e&&(e=f(e)),d.longitude(e)}}),_=i.pureComputed({read:function(){return d.latitude()},write:function(e){"number"==typeof e&&(e=f(e)),d.latitude(e)}}),x=i.pureComputed({read:function(){return d.height()},write:function(e){"number"==typeof e&&(e=f(e)),d.height(e)}}),S=i.pureComputed({read:function(){return h.heading()},write:function(e){if("number"==typeof e&&(e=f(e)),h.heading(e),n.validNumber(e)){const t=u.toRadians(Number(e)),n=b();n.heading=t,b(n)}}}),T=i.pureComputed({read:function(){return h.pitch()},write:function(e){if("number"==typeof e&&(e=f(e)),h.pitch(e),n.validNumber(e)){const t=u.toRadians(Number(e)),n=b();n.pitch=t,b(n)}}}),A=i.pureComputed({read:function(){return h.roll()},write:function(e){if("number"==typeof e&&(e=f(e)),h.roll(e),n.validNumber(e)){const t=u.toRadians(Number(e)),n=b();n.roll=t,b(n)}}}),C=i.pureComputed({read:function(){return v.uniform()},write:function(e){if("number"==typeof e&&(e=f(e)),v.uniform(e),m(e)){const t=y(),n=Number(e);t.x=n,t.y=n,t.z=n,y(t)}}}),E=i.pureComputed({read:function(){return v.x()},write:function(e){if("number"==typeof e&&(e=f(e)),v.x(e),m(e)){const t=y();t.x=Number(e),y(t)}}}),k=i.pureComputed({read:function(){return v.y()},write:function(e){if("number"==typeof e&&(e=f(e)),v.y(e),m(e)){const t=y();t.y=Number(e),y(t)}}}),I=i.pureComputed({read:function(){return v.z()},write:function(e){if("number"==typeof e&&(e=f(e)),v.z(e),m(e)){const t=y();t.z=Number(e),y(t)}}}),P=new r,D=i.observable(!0),O=P.createLongitudeInput({required:!0,disabled:D,input:w}),M=P.createLatitudeInput({required:!0,disabled:D,input:_}),L=P.createNumberInput({label:"Height",required:!0,disabled:D,input:x}),R=P.createRangeInput({label:"Heading",minimum:-180,maximum:180,step:.1,required:!0,disabled:D,input:S}),N=P.createRangeInput({label:"Pitch",minimum:-180,maximum:180,step:.1,required:!0,disabled:D,input:T}),F=P.createRangeInput({label:"Roll",minimum:-180,maximum:180,step:.1,required:!0,disabled:D,input:A}),U=i.observable(!1),V=i.pureComputed({read:function(){return U()},write:function(e){U()!==e&&(U(e),e||C(E()))}}),B=P.createNumberInput({label:"Scale",validate:g,minimum:0,step:.1,required:!0,disabled:D,input:C}),$=P.createNumberInput({label:"Scale X",minimum:0,step:.1,required:!0,disabled:D,validate:g,input:E}),H=P.createNumberInput({label:"Scale Y",minimum:0,step:.1,required:!0,disabled:D,validate:g,input:k}),G=P.createNumberInput({label:"Scale Z",minimum:0,required:!0,disabled:D,step:.1,validate:g,input:I});let j=new o;this.position=i.pureComputed({read:function(){const e=d.longitude(),t=d.latitude(),i=d.height();return n.validLongitude(e)&&n.validLatitude(t)&&n.validNumber(i)&&(j=o.fromDegrees(Number(e),Number(t),Number(i),s.WGS84,j)),j},write:function(e){j=o.clone(e,j);const t=s.WGS84.cartesianToCartographic(e),n=u.toDegrees(t.longitude),i=u.toDegrees(t.latitude),r=t.height;u.equalsEpsilon(n,d.longitude(),u.EPSILON8)&&u.equalsEpsilon(i,d.latitude(),u.EPSILON8)&&u.equalsEpsilon(r,d.height(),u.EPSILON8)||(d.longitude(f(n)),d.latitude(f(i)),d.height(f(r)))}}),this.headingPitchRoll=i.pureComputed({read:function(){return b()},write:function(e){if(c.equals(e,b()))return;const t=c.clone(e,b());b(t),h.heading(f(u.toDegrees(e.heading))),h.pitch(f(u.toDegrees(e.pitch))),h.roll(f(u.toDegrees(e.roll)))}}),this.scale=i.pureComputed({read:function(){return y()},write:function(e){if(o.equals(e,y()))return;const t=o.clone(e,y());y(t),v.uniform(f(t.x)),v.x(f(e.x)),v.y(f(e.y)),v.z(f(e.z))}}),this.enableNonUniformScaling=V,this.longitudeField=O,this.latitudeField=M,this.heightField=L,this.headingField=R,this.pitchField=N,this.rollField=F,this.scaleXField=$,this.scaleYField=H,this.scaleZField=G,this.uniformScaleField=B,this.positionFields=P.createHorizontalForm([O,M,L]),this.rotationFields=P.createHorizontalForm([R,N,F]),this.scaleFields=P.createHorizontalForm([$,H,G]),this.uniformScaleFields=P.createHorizontalForm([B]),this.uniformScaleToggle=P.createHorizontalForm([P.createToggle({label:"Non-uniform scaling",input:V,disabled:D})]),this.errorText=i.observable(""),this.pending=i.observable(!1),this.picking=i.observable(!1),this.disabled=D,this.saveEvent=new l,this._longitudeDegrees=w,this._latitudeDegrees=_,this._height=x,this._tileset=void 0,this._initialValues=void 0,this._scene=a,this._viewer=t}return v.prototype.attached=function(){this.isGeocoderEnabled&&document.getElementById("geocoderContainer").appendChild(this._geocoder.container)},v.prototype.initialize=function(e,t,n,i,r){this._tileset=e,this.position(t),this.headingPitchRoll(n),this.scale(i),this.enableNonUniformScaling(r),this._initialValues={cartographicDegrees:{longitude:this._longitudeDegrees(),latitude:this._latitudeDegrees(),height:this._height()},headingPitchRoll:c.clone(n),scale:o.clone(i),enableNonUniformScaling:r},this.disabled(!1),this.flyTo()},v.prototype.save=function(){this.saveEvent.raiseEvent()},v.prototype.activatePicking=function(){this.picking(!0)},v.prototype.deactivatePicking=function(){this.picking(!1)},v.prototype.flyTo=function(){v._flyToAsset(this._viewer,this._tileset)},v.prototype.setPosition=async function(e,t){if(this.pending())return;let n;n=t instanceof d?d.center(t):s.WGS84.cartesianToCartographic(t);const i=this;i.pending(!0);try{const e=await v._sampleTerrainMostDetailed(this._viewer.terrainProvider,[n],!0);i.position(s.WGS84.cartographicToCartesian(e[0]))}catch(r){n.height=i._scene.globe.getHeight(n),i.position(s.WGS84.cartographicToCartesian(n))}finally{i.pending(!1),i.flyTo()}},v.prototype.reset=function(){if(a(this._initialValues)){const e=this._initialValues;this.enableNonUniformScaling(e.enableNonUniformScaling),this.longitudeField.input(e.cartographicDegrees.longitude),this.latitudeField.input(e.cartographicDegrees.latitude),this.heightField.input(e.cartographicDegrees.height),this.headingPitchRoll(e.headingPitchRoll),this.scale(e.scale)}},v._flyToAsset=t,v._sampleTerrainMostDetailed=h,v}),define("Views/TilesetTransformEditor/TilesetTransformEditorSettingsPanel",["Views/Components/Form/FormHelper","Views/Components/createTerrainAssetSelector","knockout"],function(e,t,n){"use strict";return function(){const i=new e,r=t({title:"Terrain",allowExternal:!0}),o=n.observable(!0),a=n.pureComputed({read:function(){return o()},write:function(e){o(e)}});this.imageryEnabled=a,this.enableImageryToggle=i.createToggle({label:"Enable imagery",input:a}),this.terrainAssetSelector=r,this.terrainAssetId=n.pureComputed({read:function(){return r.getSelectedIds()[0]},write:function(e){r.selectById(e)}})}}),define("Core/getMousePosition",[],function(){"use strict";Cesium.Check;return function(e,t,n){const i=e.getBoundingClientRect();return n.x=t.clientX-i.left,n.y=t.clientY-i.top,n}}),define("Core/isClick",[],function(){"use strict";const e=Cesium.Cartesian2;Cesium.Check;let t=new e;function n(i,r){return t=e.subtract(i,r,t),e.magnitude(t)<=n._threshold}return n._threshold=10,n}),define("Views/TilesetTransformEditor/TilesetTransformEditor",["../../Core/getDocumentBaseUri","../Components/OnScreenHelp/OnScreenHelp","../Components/ActionPane","./TilesetTransformEditorGeocodePanel","./TilesetTransformEditorPanel","./TilesetTransformEditorSettingsPanel","Core/Analytics","Core/AssetStatus","Core/AssetType","Core/createSupportPopover","Core/getIonExtras","Core/getMousePosition","Core/hasWebGLSupport","Core/isClick","Core/Services","Core/addImageryProviderToViewer","knockout","plugins/dialog","plugins/router","toastr","DOMPurify"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,w){"use strict";const _=Cesium.Cartesian2,x=Cesium.Cartesian3,S=Cesium.CesiumTerrainProvider,T=Cesium.defined,A=Cesium.DirectionalLight,C=Cesium.EllipsoidTerrainProvider,E=Cesium.HeadingPitchRoll,k=Cesium.Math,I=Cesium.Matrix4,P=Cesium.Ray,D=Cesium.Cesium3DTileset,O=Cesium.ShadowMode,M=Cesium.Viewer,L=IonSdkMeasurements.TransformEditor,R=new P,N=new x,F=new _,U=new _;async function V(e,t){let n;e._currentTerrainId=t,n=T(t)?await S.fromIonAssetId(t,{requestVertexNormals:!0}):e._ellipsoidTerrainProvider,e._viewer.terrainProvider=n}function B(){if(!h())return;const e=document.createElement("div");e.classList.add("fullscreen");const t=new M(e,{animation:!1,timeline:!1,baseLayerPicker:!1,baseLayer:!1,navigationHelpButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,selectionIndicator:!1,scene3DOnly:!0,requestRenderMode:!0,terrainShadows:O.DISABLED,contextOptions:{getWebGLStub:window.getWebGLStub}});t.canvas.setAttribute("touch-action","none"),t.scene.globe.depthTestAgainstTerrain=!0,t.scene.light=new A({direction:new x(1,0,0)}),t.scene.preRender.addEventListener(function(e){const n=t.scene.light;n.direction=x.clone(e.camera.directionWC,n.direction)}),t.scene.logarithmicDepthBuffer=!0,t.scene.camera.frustum.near=.1,t.scene.camera.frustum.far=1e10;const a=new C,s=[],l=new r(t),c=new i(t),u=new o,d=g.observable(),p=g.observable("");this.showHeader=!1,this.disableDrop=g.observable(!0),this.actionPane=new n([{name:"Location Editor",compose:l},{name:"Globe Settings",compose:u}]),this.supportButtonId="tilesetTransformEditorSupportButton",this.tilesetName=g.pureComputed(function(){const e=d();return T(e)?`3D Tileset: ${e}`:""}),this.errorText=p,this.showErrorMessage=g.pureComputed(function(){return""!==p()}),this.tilesetLoaded=g.observable(!1),this.geocodePanel=c,this.showGeocodePanel=g.observable(!1),this._position=new x,this._headingPitchRoll=new E,this._scale=new x,this._removeSaveListener=l.saveEvent.addEventListener(B.prototype.save,this),this._pending=g.observable(!1),this._tileset=void 0,this._tilesetName=d,this._panel=l,this._settingsPanel=u,this._transformEditor=void 0,this._subscriptions=s,this._viewer=t,this._initialTerrainId=void 0,this._currentTerrainId=void 0,this._setDefaultTerrain=!0,this._unsavedChanges=!1,this._ellipsoidTerrainProvider=a,this.onPointerDown=this.onPointerDown.bind(this),this.onClick=this.onClick.bind(this);const f=this;s.push(l.picking.subscribe(function(e){if(!T(f._transformEditor))return;const t=f._viewer.scene.canvas;e?(f._transformEditor.viewModel.deactivate(),t.addEventListener("click",f.onClick,!0),t.addEventListener("pointerdown",f.onPointerDown,!0)):(f._transformEditor.viewModel.activate(),t.removeEventListener("click",f.onClick,!0),t.removeEventListener("pointerdown",f.onPointerDown,!0))}))}return B.prototype.canActivate=function(e){return h()?T(e)?(this._assetId=e,!0):{redirect:"/assets"}:{redirect:"/webgl"}},B.prototype.activate=async function(){const t=T(window.opener)&&window.opener.location.origin===window.location.origin;this._openedByStories=t&&0===window.opener.location.href.indexOf(`${e()}stories/`);const n=this._assetId;if(!T(n))return;const i=this._tilesetName,r=this,o=this._assetId,a=this._viewer,c=a.scene,u=this._settingsPanel,d=r.geocodePanel,h=await f.getDefaults();if(!T(h)||!T(h.defaultAssets))return;const p=h.defaultAssets;if(T(p.imagery)&&await m._addImageryProviderToViewer(a,p.imagery),r._setDefaultTerrain&&T(p.terrain)){const e=p.terrain;r._initialTerrainId=e,u.terrainAssetId(e),d.terrainAssetId(e),await V(r,e),d.terrainAssetId(e)}let g;try{const e=await f.getAssetMetadata(n);if(e.isPremium||e.isExternal)throw new Error("Cannot edit the location of this tileset");if(e.type!==l["3DTILES"])throw new Error("Selected asset is not a 3D Tileset");if(e.status!==s.COMPLETE)throw new Error("3D Tileset is not finished processing");i(e.name);const t=await B._getIonExtras(o);if(!t.movable)throw new Error("Cannot edit the location of this tileset");const h=t.terrainId;T(h)&&(u.terrainAssetId(h),r._setDefaultTerrain=!1,r._initialTerrainId=h),g=!t.georeferenced;const p=await D.fromIonAssetId(o);c.primitives.add(p),p.pointCloudShading.attenuation=!0,p.pointCloudShading.eyeDomeLighting=!0,r._tileset=p,r.tilesetLoaded(!0);const m=I.clone(p._root.transform);p._root.transform=I.IDENTITY,p.modelMatrix=m;const v=new L({container:a.container,scene:a.scene,transform:p.modelMatrix,boundingSphere:p.boundingSphere}),b=v.viewModel;t.georeferenced||(b.headingPitchRoll=new E),r._transformEditor=v;let y=r._position;if(y=x.clone(b.position,y),r._headingPitchRoll=E.clone(b.headingPitchRoll,r._headingPitchRoll),r._scale=x.clone(b.scale,r._scale),g){r.showGeocodePanel(!0);const e=d.close.addEventListener(async function(t,n){T(t)&&(y=x.clone(t,y),b.position=y,r._unsavedChanges=!0),u.terrainAssetId(n),await V(r,n),r.showGeocodePanel(!1),e(),r.initialize()});r._subscriptions.push(d.terrainAssetId.subscribe(async function(e){r._setDefaultTerrain=!1,await V(r,e)}))}else r.initialize()}catch(v){r.errorText(f.getErrorMessage(v)),r.actionPane.expanded(!1)}},B.prototype.onPointerDown=function(e){this._pointerDown=d(this._viewer.scene.canvas,e,F)},B.prototype.onClick=function(e){const t=this._viewer.scene,n=d(t.canvas,e,U);if(!p(this._pointerDown,n))return;const i=t.camera.getPickRay(n,R),r=t.globe.pick(i,t,N);this._transformEditor.viewModel.position=r,this._panel.deactivatePicking()},B.prototype.initialize=async function(){const e=this._subscriptions,t=this._tileset,n=this._transformEditor.viewModel,i=this._panel;let r=this._position,o=this._headingPitchRoll,a=this._scale;n.activate(),i.initialize(t,r,o,a,n.enableNonUniformScaling);const s=this;e.push(g.getObservable(n,"position").subscribe(function(e){x.equalsEpsilon(e,r,k.EPSILON8)||(r=x.clone(e,r),s._unsavedChanges=!0,i.position(e))})),e.push(g.getObservable(n,"headingPitchRoll").subscribe(function(e){E.equals(e,o)||(o=E.clone(e,o),s._unsavedChanges=!0,i.headingPitchRoll(e))})),e.push(g.getObservable(n,"scale").subscribe(function(e){x.equals(e,a)||(a=x.clone(e,a),s._unsavedChanges=!0,i.scale(e))})),e.push(g.getObservable(n,"enableNonUniformScaling").subscribe(function(e){s._panel.enableNonUniformScaling(e)})),e.push(this._panel.position.subscribe(function(e){x.equalsEpsilon(e,r,k.EPSILON8)||(r=x.clone(e,r),s._unsavedChanges=!0,n.position=e)})),e.push(this._panel.headingPitchRoll.subscribe(function(e){E.equals(e,o)||(o=E.clone(e,o),s._unsavedChanges=!0,n.headingPitchRoll=e)})),e.push(this._panel.scale.subscribe(function(e){x.equals(e,a)||(a=x.clone(e,a),s._unsavedChanges=!0,n.scale=e)})),e.push(this._panel.enableNonUniformScaling.subscribe(function(e){n.enableNonUniformScaling=e})),e.push(this._settingsPanel.imageryEnabled.subscribe(function(e){s._viewer.imageryLayers.get(0).show=e})),e.push(this._settingsPanel.terrainAssetId.subscribe(function(e){V(s,e),s._setDefaultTerrain=!1}))},B.prototype.compositionComplete=function(){c(this.supportButtonId,a.category.TILES_LOCATION_EDITOR,a.label.APPLICATION),document.getElementById("tilesetViewer").appendChild(this._viewer.container)},B.prototype.save=async function(){const e=this._pending;if(e()||!T(this._assetId))return;this.errorText(""),e(!0);const t=this._tilesetName(),n=this;let i;try{await f.putTilesetTransform(this._assetId,this._tileset.modelMatrix,this._settingsPanel.terrainAssetId()),n._initialTerrainId=n._currentTerrainId,y.success(w.sanitize(`${t} location saved`)),n._unsavedChanges=!1,i=!0}catch(r){n.errorText(f.getErrorMessage(r)),i=!1}finally{e(!1)}return i},B.prototype.backToAssets=function(){this._openedByStories?window.close():b.navigate(`assets/${this._assetId}`)},B.prototype.toggleOnScreenHelp=function(){t.tilesetTransform(),t.toggle()},B.prototype.canDeactivate=async function(){const e="Close without saving",t=this;try{if(this._unsavedChanges||this._initialTerrainId!==this._currentTerrainId){return await v.showMessage("It looks like you have some unsaved changes. Would you like to save the location of the tileset?","Save tileset location?",["Save location",e])===e||await t.save()}}catch(n){return t.errorText(f.getErrorMessage(n)),!1}return!0},B.prototype.onBeforeUnload=function(){if(this._unsavedChanges)return B._onBeforeUnloadMessage},B.prototype.detached=function(){this._subscriptions.forEach(function(e){e.dispose()}),T(this._transformEditor)&&this._transformEditor.destroy(),this._removeSaveListener(),this._viewer.destroy()},B._onBeforeUnloadMessage="Tileset location has not been saved, are you sure you want to leave?",B._getIonExtras=u,B}),define("Views/Account/AuthorizedApplications/AuthorizedApplicationViewModel",["../../Components/DeleteButton","moment"],function(e,t){"use strict";Cesium.defined,Cesium.DeveloperError;function n(n){this.deleteButton=new e({buttonText:"Delete",confirmText:"Delete authorized application?",data:this,hideLowerText:!0,placement:"bottom"}),this.deleteEvent=this.deleteButton.delete,this._oauthClientId=n.oauthClientId,this._oauthClientName=n.oauthClientName,this._lastUsed=t(n.lastUsed).format("LLL"),this._inactive=!1}return Object.defineProperties(n.prototype,{oauthClientId:{get:function(){return this._oauthClientId}},oauthClientName:{get:function(){return this._oauthClientName}},lastUsed:{get:function(){return this._lastUsed}}}),n.prototype.destroy=function(){this._inactive=!0},n}),define("Views/Account/AuthorizedApplications/AuthorizedApplicationsTable",["../../../Core/getFilterObservable","../../../Core/PageLoadingState","../../../Core/Services","./AuthorizedApplicationViewModel","knockout","toastr"],function(e,t,n,i,r,o){"use strict";Cesium.Check;function a(n){const i=r.observableArray([]),o=r.observable(t.IN_PROGRESS),s=e(i,n,["oauthClientName"]);this.loadState=o,this.applications=i,this.filteredApplications=s,this.hasApplications=r.pureComputed(function(){return i().length>0}),this.hasNoResults=r.pureComputed(function(){return i().length>0&&0===s().length}),this.isError=r.pureComputed(function(){return o()===t.ERROR}),this.isReady=r.pureComputed(function(){return o()===t.READY}),this.isInProgress=r.pureComputed(function(){return o()===t.IN_PROGRESS});const l=this;this._applicationsSubscription=i.subscribe(function(e){e.forEach(function(e){"added"===e.status?e.value.deleteEvent.addEventListener(a.prototype.deleteApplication,l):"deleted"===e.status&&e.value.deleteEvent.removeEventListener(a.prototype.deleteApplication)})},void 0,"arrayChange"),this._pending=!1,this.deleteApplication=this.deleteApplication.bind(this)}return a.prototype.activate=async function(){const e=this.applications,r=this.loadState;if(this._pending)return;this._pending=!0;const o=this;try{const o=await n.getAuthorizedApplications();e(o.map(function(e){return new i({oauthClientId:e.oauthClientId,oauthClientName:e.oauthClientName,lastUsed:e.lastUsed})})),r(t.READY)}catch(a){r(t.ERROR)}finally{o._pending=!1}},a.prototype.deleteApplication=async function(e){const t=this.applications;try{await n.deleteAuthorizedApplication(e.oauthClientId),t.remove(e)}catch(i){o.error(n.getErrorMessage(i),"Failed to delete application")}},a.prototype.detached=function(){this.applications.removeAll(),this._applicationsSubscription.dispose()},a}),define("text!Views/Help/AuthorizedApplicationsShellHelp.md",[],function(){return'**Authorized Applications**\n\nThis page lists third-party applications that you have granted access to your ion account.\n\nTo revoke an applications access permissions, delete it from the list by clicking <span class="fa fa-trash fa-lg"></span> on the right side. If you attempt to use the application in the future, it will prompt you for re-authorization.\n'}),define("Views/Account/AuthorizedApplications/AuthorizedApplicationsShell",["../../Layout/DashboardHeader","./AuthorizedApplicationsTable","text!Views/Help/AuthorizedApplicationsShellHelp.md"],function(e,t,n){"use strict";return function(){const i=new e({title:"Authorized Applications",helpContent:n,helpContainer:".labels"}),r=new t(i.searchText);this.header=i,this.table=r}}),define("Views/Account/DeveloperSettings/CreateOAuthApp",["../../../Core/isStringEmptyOrWhitespace","../../../Core/Services","../../Components/Form/FormHelper","knockout"],function(e,t,n,i){"use strict";const r=Cesium.DeveloperError,o=Cesium.Event;function a(){const e=new n;this.nameField=e.createTextInput({label:"Name"}),this.redirectUriField=e.createTextInput({label:"Redirect URI"}),this._formHelper=e,this._close=new o,this._pending=i.observable(!1),this._errorText=i.observable("")}return Object.defineProperties(a.prototype,{close:{get:function(){return this._close}},errorText:{get:function(){return this._errorText}}}),a.prototype.reset=function(){this.nameField.input(""),this.redirectUriField.input(""),this.errorText("")},a.prototype.apply=async function(){const n=this._pending;if(n())throw new r("previous submit is still pending");const i=this;n(!0);const o=this.nameField.input();if(e(o))return this.errorText("Name is required"),void n(!1);const a=this.redirectUriField.input();if(e(a))return this.errorText("Redirect URI is required"),void n(!1);try{const e=await t.postApplication({name:o,redirectUri:a});i.reset(),i._close.raiseEvent(e)}catch(s){i.errorText(t.getErrorMessage(s))}finally{n(!1)}},a.prototype.cancel=function(){this._close.raiseEvent(),this.reset()},a}),define("Views/Account/DeveloperSettings/OAuthAppDetails",["../../../Core/isStringEmptyOrWhitespace","../../Components/ClickEditField","../../Components/DeleteButton","knockout"],function(e,t,n,i){"use strict";const r=Cesium.defined;Cesium.DeveloperError;function o(o){const a=this;this._selectedApplication=o;const s=i.pureComputed(function(){const e=a._selectedApplication();return!!r(e)&&e._pending()});this._nameField=new t({label:"Name",type:"text",pending:s,input:i.pureComputed({read:function(){const e=a.selectedApplication();return r(e)?e.name():""},write:function(t){const n=a.selectedApplication();r(n)&&n.name()!==t&&!e(t)&&n.saveApplication(t,n.redirectUri())}})}),this._redirectUriField=new t({label:"Redirect URI",type:"text",pending:s,input:i.pureComputed({read:function(){const e=a.selectedApplication();return r(e)?e.redirectUri():""},write:function(t){const n=a.selectedApplication();r(n)&&n.redirectUri()!==t&&!e(t)&&n.saveApplication(n.name(),t)}})}),this._selectedApplicationName=i.pureComputed(function(){return r(o())?o().name():""},this),this._deleteButton=new n({width:250,pending:s,confirmText:'<span class="bold">Delete application?</span><br>Users will no longer be able to access their content through this application.<br><br>'}),this._delete=this._deleteButton.delete,this.unselect=this.unselect.bind(this),this._pending=s}return Object.defineProperties(o.prototype,{selectedApplication:{get:function(){return this._selectedApplication}},delete:{get:function(){return this._delete}}}),o.prototype.unselect=function(){this.selectedApplication(void 0)},o}),define("Views/Account/DeveloperSettings/OAuthAppDetailsViewModel",["../../../Core/Services","../../Components/DeleteButton","knockout","toastr"],function(e,t,n,i){"use strict";Cesium.defined;const r=Cesium.DeveloperError;function o(e){const i=n.observable(!1);this.deleteButton=new t({confirmText:'<span class="bold">Delete application?</span><br>Users will no longer be able to access their content through this application.<br><br>',hideLowerText:!0,width:200,pending:i,data:this,placement:"right",xsPlacement:"left"}),this.deleteEvent=this.deleteButton.delete,this._id=e.id,this._name=n.observable(e.name),this._redirectUri=n.observable(e.redirectUri),this._pending=i,this._inactive=!1}return Object.defineProperties(o.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},redirectUri:{get:function(){return this._redirectUri}}}),o.prototype.onSelected=function(){},o.prototype.saveApplication=async function(t,n){const o=this._pending;if(o())throw new r("Other database calls are still pending");o(!0);const a=this;try{await e.putApplication(this.id,{name:t,redirectUri:n}),a.name(t),a.redirectUri(n)}catch(s){i.error(e.getErrorMessage(s),"Failed to save application")}finally{o(!1)}},o.prototype.delete=async function(){const t=this._pending;if(t())throw new r("Other database calls are still pending");t(!0);try{await e.deleteApplication(this.id)}catch(n){i.error("Failed to delete application",e.getErrorMessage(n))}finally{t(!1)}},o.getAll=e.getApplications,o.prototype.destroy=function(){this._inactive=!0},o}),define("text!Views/Help/OAuthAppsShellHelp.md",[],function(){return'**Applications** allows you to request permission to access a user\'s Cesium ion account via OAuth 2.0.\n\n**Create an application** by clicking <label class="btn btn-primary btn-xs btn-no-action">Add application</label>. Then specify the name and redirect URI for the application. The name is what will be showed to the user when permission is requested. The redirect URI is where the user will be redirected once permission is granted.\n\n**View an application** by clicking one in the list to see details<span class="hidden-xs"> on the right side of the screen</span>. You can then modify the name or redirect URI for the application.\n\nSee the [OAuth Tutorial](https://cesium.com/learn/ion/ion-oauth2/) for more details.\n'}),define("Views/Account/DeveloperSettings/OAuthAppsShell",["../../Dashboard/DashboardShell","./CreateOAuthApp","./OAuthAppDetails","./OAuthAppDetailsViewModel","text!Views/Help/OAuthAppsShellHelp.md"],function(e,t,n,i,r){"use strict";const o=Cesium.defined;function a(){const a=new t,s=new e({detailsPane:n,itemViewModel:i,title:"OAuth Applications",hash:"account/developer",path:"Views/Account/DeveloperSettings/OAuthApps",newButtonText:"Add Application",enableGrid:!1,autoSelect:!1,helpContent:r,searchFields:["name","redirectUri"]});this._removeNewEventListener=s.listPane.newItem.addEventListener(function(){s.rightPane(a),s.disabled(!0)}),this._removeApplicationCreateEventListener=a.close.addEventListener(function(e){if(s.rightPane(s.detailsPane),s.disabled(!1),o(e)){const t=new i(e);s.items.push(t),s.selectedItem(t)}}),this._createApplication=a,this.layout=s}return a.prototype.activate=function(){return this.layout.loadItems()},a.prototype.detached=function(){this._removeNewEventListener(),this._removeApplicationCreateEventListener()},a}),define("Views/Account/Labels/LabelRow",["../../Components/DeleteButton","../../Components/Form/FormHelper","Core/isStringEmptyOrWhitespace","Core/Label","Core/Services","knockout"],function(e,t,n,i,r,o){"use strict";Cesium.Check;const a=Cesium.Color,s=Cesium.defined;function l(l,c){const u=new i(l),d=new t,h=o.observable("");this.label=u,this.name=u.name,this.assetCount=l.assets,this.linksVisible=!c,this.storyCount=l.stories,this.assetLink=o.pureComputed(function(){return`assets/?search=label:'${u.name()}'`}),this.storyLink=o.pureComputed(function(){return`stories/?search=label:'${u.name()}'`});const p=new e({buttonText:"Delete",confirmText:"Delete label?",placement:"bottom",data:this}),f=a.fromRandom({alpha:1});this.deleteButton=p,this.deleteEvent=p.delete,this.editing=o.observable(!1),this.colorField=d.createColorInput({hasLabel:!1,allowAlpha:!1,value:f,validate:function(e){return!s(e)||n(e)?"Color is required":""}}),this.nameField=d.createTextInput({hasLabel:!1,placeholder:"New label name",validate:function(e){return!s(e)||n(e)?"Name is required":""}}),this.errorText=h,this.errorTextVisible=o.pureComputed(function(){return""!==h()}),this._newColor=f,this._formHelper=d,this._service=c?r.patchAssetDepotLabel:r.patchLabel}return l.prototype.edit=function(){this.nameField.input(this.label.name()),this.colorField.input(this.label.color().clone(this._newColor)),this.editing(!0),this.nameField.focus(!0)},l.prototype.cancel=function(){this.editing(!1)},l.prototype.apply=async function(){if(this.errorText(""),!this._formHelper.isValid())return;const e=this.nameField.input(),t=this.colorField.input();this.editing(!1);const n=this;try{await this._service(this.label.id,{name:e,color:t.toRgba()}),n.label.name(e),n.label.color(t)}catch(i){n.errorText(r.getErrorMessage(i))}},l}),define("Views/Account/Labels/LabelsTable",["../../../Core/getFilterObservable","../../../Core/PageLoadingState","../../../Core/Services","./LabelRow","knockout","toastr"],function(e,t,n,i,r,o){"use strict";Cesium.Check;function a(n){const i=r.observableArray([]),o=r.observable(t.IN_PROGRESS),s=e(i,n,["name"]);this.loadState=o,this.labels=i,this.filteredLabels=s,this.hasLabels=r.pureComputed(function(){return i().length>0}),this.hasNoResults=r.pureComputed(function(){return i().length>0&&0===s().length}),this.isError=r.pureComputed(function(){return o()===t.ERROR}),this.isReady=r.pureComputed(function(){return o()===t.READY}),this.isInProgress=r.pureComputed(function(){return o()===t.IN_PROGRESS});const l=this;this._labelsSubscription=i.subscribe(function(e){e.forEach(function(e){"added"===e.status?e.value.deleteEvent.addEventListener(a.prototype.deleteLabel,l):"deleted"===e.status&&e.value.deleteEvent.removeEventListener(a.prototype.deleteLabel)})},void 0,"arrayChange"),this.deleteLabel=this.deleteLabel.bind(this),this._isAdmin=void 0}return a.prototype.activate=async function(){const e=this.labels,r=this.loadState,o=-1!==document.location.href.indexOf("assetdepotlabels");let a;this._isAdmin=o;try{let s;a=o?await n.getAssetDepotLabels():await n.getLabels();const l=a.length;for(s=0;s<l;s++){const t=new i(a[s],o);e.push(t)}r(t.READY)}catch(s){r(t.ERROR)}},a.prototype.deleteLabel=async function(e){const t=this.labels;try{this._isAdmin?await n.deleteAssetDepotLabel(e.label.id):await n.deleteLabel(e.label.id),t.remove(e)}catch(i){o.error(n.getErrorMessage(i),"Failed to delete label")}},a.prototype.detached=function(){this.labels.removeAll(),this._labelsSubscription.dispose()},a}),define("text!Views/Help/LabelsShellHelp.md",[],function(){return'Manage labels used to tag your assets.\n\n**Add a label** by clicking the <label class="btn btn-primary btn-xs btn-no-action">New label</label> button.\n\n**Edit a label** by clicking the edit button (<span class="fa fa-pencil"></span>) on the row for that label.\n\n**Delete a label**by clicking the delete button (<span class="fa fa-trash"></span>) on the row for that label.\n'}),define("Views/Account/Labels/LabelsShell",["../../../Core/isStringEmptyOrWhitespace","../../../Core/Services","../../Components/Form/FormHelper","../../Layout/DashboardHeader","./LabelRow","./LabelsTable","knockout","text!Views/Help/LabelsShellHelp.md"],function(e,t,n,i,r,o,a,s){"use strict";const l=Cesium.Color,c=Cesium.defined;function u(){const t=new i({title:"Labels",helpContent:s,helpContainer:".labels",newButtonText:"New label"}),r=new o(t.searchText),d=new n;this.colorField=d.createColorInput({hasLabel:!1,value:l.fromRandom({alpha:1}),allowAlpha:!1,validate:function(t){return!c(t)||e(t)?"Color is required":""}}),this.nameField=d.createTextInput({hasLabel:!1,placeholder:"New label name",validate:function(t){return!c(t)||e(t)?"Name is required":""}}),this.newLabelVisible=a.observable(!1),this.errorText=a.observable(""),this.header=t,this.table=r,this._removeEventListener=t.newItem.addEventListener(u.prototype.showNewLabel,this),this._formHelper=d,this._isAdmin=void 0}return u.prototype.activate=function(){this._isAdmin=-1!==document.location.href.indexOf("assetdepotlabels")},u.prototype.showNewLabel=function(){this.newLabelVisible(!0),this.nameField.focus(!0)},u.prototype.hideNewLabel=function(){this.newLabelVisible(!1),this.resetNewLabel()},u.prototype.newLabel=async function(){if(this.errorText(""),!this._formHelper.isValid())return;const e=this.nameField.input(),n=this,i=this.table,o=this._isAdmin;let a;try{a=o?await t.postAssetDepotLabels({name:e.trim(),color:this.colorField.input().toRgba()}):await t.postLabels({name:e.trim(),color:this.colorField.input().toRgba()}),n.resetNewLabel(),a.assets=0,a.stories=0;const s=new r(a,o);i.labels.push(s)}catch(s){n.errorText(t.getErrorMessage(s))}},u.prototype.resetNewLabel=function(){this.newLabelVisible(!1),this.nameField.input(""),this.colorField.input(l.fromRandom({alpha:1}))},u.prototype.detached=function(){this._removeEventListener()},u}),define("Views/Account/TeamSettings/EditTeamMessage",["knockout","plugins/dialog","Core/Services","Core/Validation","../../Components/Form/FormHelper"],function(e,t,n,i,r){"use strict";function o(){const t=new r;this.teamNameField=t.createTextInput({label:"Team name",required:!0,validate:i.validateUsername}),this.errorText=e.observable(""),this.pending=e.observable(!1)}return o.prototype.canActivate=function(){return this.teamNameField.input(n.username()),!0},o.prototype.apply=async function(){if(this.pending())return;const e=this,i=this.teamNameField.input();this.pending(!0);try{await n.patchTeam(n.userId(),{username:i.trim()}),t.close(this,{teamName:i})}catch(r){e.errorText(n.getErrorMessage(r))}finally{e.pending(!1)}},o.prototype.close=function(){t.close(this,void 0)},o}),define("Core/TeamsSettings",["Core/defaultValue","../Core/Feature","knockout"],function(e,t,n){"use strict";Cesium.Check;return function(i,r){const o=n.observable(i.role);this.id=i.id,this.email=i.email,this.gravatar=n.pureComputed(()=>t.isEnabledForServer(t.Server.PUBLIC_INTERNET_ACCESS)?`https://www.gravatar.com/avatar/${i.md5Email}.jpg?s=36&d=mp`:"/Images/blank-profile-24.png"),this.username=i.username,this.role=o,this.isPending=i.isPending,this.selected=n.observable(e(r,!1))}}),define("Views/Account/TeamSettings/TeamSettingsRow",["../../Components/DeleteButton","../../Components/Form/FormHelper","../../Components/Form/SelectInputOption","Core/TeamsSettings","Core/Services","Core/TeamRole","knockout","toastr"],function(e,t,n,i,r,o,a,s){"use strict";const l=Cesium.defined;return function c(u){const d=new i(u),h=new t,p=a.observable(""),f=[new n(o.toString(o.OWNER),o.OWNER),new n(o.toString(o.MEMBER),o.MEMBER)],m=h.createSelectInput({label:"Role",required:!0,options:f});this.invitee=d;const g=new e({buttonText:"Remove",confirmText:"Remove user?",placement:"left",data:this});this.deleteButton=g,this.deleteEvent=g.delete,this.editing=a.observable(!1),this.roleField=m,this.usernameField=h.createTextInput({label:"Username",disabled:!0}),this.showUsernameField=l(this.invitee.username),this.showChangeRole=!this.invitee.isPending,this.emailField=h.createTextInput({label:"Email",disabled:!0}),this.errorText=p,this.errorTextVisible=a.pureComputed(function(){return""!==p()}),this.showRowButtons=r.currentTeamUsersUsername()!==this.invitee.username,this._formHelper=h,c.prototype.edit=function(){this.usernameField.input(this.invitee.username),this.emailField.input(this.invitee.email),this.roleField.input(this.invitee.role()),this.editing(!0)},c.prototype.cancel=function(){this.editing(!1)},c.prototype.apply=async function(){if(this.errorText(""),!this._formHelper.isValid())return;const e=this,t=e.roleField.input();this.editing(!1);try{t!==this.invitee.role()&&(this.invitee.isPending||await r.patchChangeRole(r.userId(),this.invitee.id,t)),e.invitee.role(t)}catch(n){s.error(r.getErrorMessage(n))}}}}),define("Views/Account/TeamSettings/TeamSettingsTable",["../../../Core/PageLoadingState","../../../Core/Services","./TeamSettingsRow","knockout","toastr"],function(e,t,n,i,r){"use strict";Cesium.Check;function o(){const t=i.observableArray([]),n=i.observable(e.IN_PROGRESS);this.loadState=n,this.invitees=t,this.hasInvitees=i.pureComputed(function(){return t().length>0}),this.isError=i.pureComputed(function(){return n()===e.ERROR}),this.isReady=i.pureComputed(function(){return n()===e.READY}),this.isInProgress=i.pureComputed(function(){return n()===e.IN_PROGRESS});const r=this;this._inviteeSubscription=t.subscribe(function(e){e.forEach(function(e){"added"===e.status?e.value.deleteEvent.addEventListener(o.prototype.deleteInvitee,r):"deleted"===e.status&&e.value.deleteEvent.removeEventListener(o.prototype.deleteInvitee)})},void 0,"arrayChange"),this.deleteInvitee=this.deleteInvitee.bind(this)}return o.prototype.activate=async function(){const i=this.invitees,r=this.loadState;let o;try{const a=await t.getUsersInTeam(t.userId()),s=await t.getInvitesInTeam(t.userId());let l;a.forEach(function(e){e.isPending=!1}),s.forEach(function(e){e.isPending=!0}),o=a.concat(s),o=o.map(function(e){return{id:e.id,username:e.username,email:e.email,md5Email:e.md5Email,role:e.role,isPending:e.isPending}});const c=o.length;for(l=0;l<c;l++){const e=new n(o[l]);i.push(e)}r(e.READY)}catch(a){r(e.ERROR)}},o.prototype.deleteInvitee=async function(e){const n=this.invitees,i=e.invitee,o=i.isPending;try{o?await t.deleteTeamInvite(t.userId(),i.id):await t.deleteTeamUser(t.userId(),i.id),n.remove(e)}catch(a){400===a.statusCode&&o?r.error("The invitation may have already been declined.","There was a problem removing the invite"):r.error("An unknown error occurred. Please try refreshing the page.","There was a problem removing the team member")}},o.prototype.detached=function(){this.invitees.removeAll(),this._inviteeSubscription.dispose()},o}),define("text!Views/Help/TeamSettingsShellHelp.md",[],function(){return'Team settings allow you to add, remove, and manage users. You can also change the name of your team at any time.\n\n**Invite someone to join the team** by clicking the <label class="btn btn-primary btn-xs btn-no-action">Invite user</label> button. You\'ll need to know their email address or Cesium ion username.\n\nTeam members can be invited to one of two roles:\n\n- Member - can access the team but can not add or remove members, access billing information, or otherwise cancel the subscription.\n- Owner - has complete control of the Team. A team may have multiple owners.\n\n**Remove a team member or rescind an existing invitation** by clicking the remove button (<span class="fa fa-trash"></span>). You can always invite them again in the future.\n\n**Change the role of a user** by clicking the change role button (<span class="fa fa-pencil"></span>). You can change the role of a user who have accepted the invite. You cannot change your own role.\n\n**To remove yourself from a team** switch back to the Teams page of your individual account.\n\n**Change the name of your team** by clicking the <label class="btn btn-primary btn-xs btn-no-action">Edit team name</label> button.\n'}),define("Views/Account/TeamSettings/TeamSettingsShell",["plugins/dialog","Core/OAuthStorage","Core/AppData","Core/Feature","../../Components/Form/FormHelper","../../Components/AddUserToTeam","../../Layout/DashboardHeader","./TeamSettingsRow","./TeamSettingsTable","./EditTeamMessage","Core/Services","toastr","knockout","text!Views/Help/TeamSettingsShellHelp.md"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p){"use strict";const f=Cesium.defined,m=Cesium.Resource;function g(){const e=new a({title:"Team Settings",helpContent:p,helpContainer:".labels",searchBoxVisible:!1}),t=new l(e.searchText),n=new r;this.errorText=h.observable(""),this.header=e,this.table=t,this.pending=h.observable(!1),this._formHelper=n,this.sketchfabUsername=u.sketchfabUsername,this.unlinkButtonText=`Unlink ${this.sketchfabUsername()} Sketchfab account`,this.isSketchfabEnabled=i.isEnabledForUser(i.User.SKETCHFAB,u.userObject())}return g.prototype.newInvitee=async function(){if(this.errorText(""),this.pending())return;const t=this,n=this.table;this.pending("true");try{const t=await e.show(new o);if(f(t)&&Object.keys(t).length>0){t.isPending=!0;const e=new s(t);n.invitees.push(e)}}catch(i){t.errorText(i.message)}finally{this.pending(!1)}},g.prototype.editTeam=async function(){if(this.pending())return;this.errorText("");const t=this;this.pending("true");try{await e.show(new c)}catch(n){t.errorText(n.message)}finally{this.pending(!1)}},g.prototype.linkSketchfabAccount=async function(){const e=new m({url:"https://sketchfab.com/oauth2/authorize",queryParameters:{response_type:"code",client_id:n.sketchfabClientId,redirect_uri:`${window.location.origin}/sketchfabsignin`,approval_prompt:"auto"}}),i=t.save("sketchfab-login","/account/teamsettings");e.setQueryParameters({state:i}),window.location=e.url},g.prototype.unlinkSketchfabAccount=async function(){try{await u.unlinkSketchfab(),d.success("Sketchfab account successfully unlinked")}catch(e){d.error(u.getErrorMessage(e),"Failed to unlink Sketchfab account")}},g}),define("Views/Account/Teams/CreateTeam",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-create-team-page")}),define("Views/Account/Teams/TeamsPage",["Core/ReactInterop","Core/Services"],function(e,t){"use strict";return e.createPage("ion-teams-page",{eventListeners:{"teams-updated":function(){t.getTeamsForUser().then(t.teams)}}})}),define("Core/createComputedProperty",["./defaultValue","knockout"],function(e,t){"use strict";const n=Cesium.defined;Cesium.DeveloperError;return function(i,r,o){return t.pureComputed(function(){const a=t.unwrap(i);return n(a)?e(t.unwrap(a[r]),o):o})}}),define("Views/Admin/AssetDepot/AssetDepotDetails",["../../../Core/AssetStatus","../../../Core/createComputedProperty","Core/Feature","../../../Core/Services","../../Components/DeleteButton","knockout"],function(e,t,n,i,r,o){"use strict";Cesium.Check;const a=Cesium.defined,s=Cesium.Event;async function l(e){const t=e();return`<span class="bold">Delete asset?</span><br>If you delete the asset, it will be removed from all stories that currently use it and users will no longer be able to access it.<br><br>There are currently ${await i.getCountOfStoriesWithAsset(t.id)} stories using this asset.<br><br><label class="control-label" for="delete-user-verify">Enter asset name to confirm</label><input id="delete-user-verify" class="form-control verify" type="text"><br>`}function c(i,c){const u=o.observable(!1);this._edit=new s,this._selectedData=i,this.deleteButton=new r({confirmText:l.bind(null,i),pending:u,width:250,verify:function(e){return e===i().name()}}),this.pending=u,this.nameText=t(this._selectedData,"name"),this.prefixText=t(this._selectedData,"prefix"),this.labels=t(this._selectedData,"labels"),this.clippable=t(this._selectedData,"clippable"),this.dataDetailsRows=[{label:"Name",value:this.nameText},{label:"Description",value:t(this._selectedData,"descriptionHtml")},{label:"Attribution",value:t(this._selectedData,"attributionHtml")},{label:"Status",value:t(this._selectedData,"statusString")},{label:"Type",value:t(this._selectedData,"typeText")},{label:"Default",value:t(this._selectedData,"isDefault")},{label:"External",value:t(this._selectedData,"isExternal")},{label:"Georeferenced",value:t(this._selectedData,"georeferenced")}],n.isEnabledForServer(n.Server.ASSET_DEPOT_HIDDEN_ASSETS)&&this.dataDetailsRows.push({label:"Hidden",value:t(this._selectedData,"hidden")}),n.isEnabledForServer(n.Server.ASSET_DEPOT_FROM_PREFIX)&&this.dataDetailsRows.push({label:"Prefix",value:this.prefixText}),n.isEnabledForServer(n.User.ASSET_ARCHIVES_CLIPS)&&this.dataDetailsRows.push({label:"Clippable",value:this.clippable}),this.areAssetDepotLabelsEnabled=n.isEnabledForServer(n.Server.ASSET_DEPOT_LABELS),this.setLabel=c,this.isAwaitingFiles=o.pureComputed(function(){const t=i();return!!a(t)&&t.status===e.AWAITING_FILES}),this.isError=o.pureComputed(function(){const t=i();return!!a(t)&&e.isError(t.status)})}return Object.defineProperties(c.prototype,{selectedData:{get:function(){return this._selectedData}},delete:{get:function(){return this.deleteButton.delete}},edit:{get:function(){return this._edit}}}),c.prototype.unselect=function(){const e=this._selectedData();a(e)&&e.onUnselect(),this.selectedData(void 0)},c.prototype.compositionComplete=function(e){let t;function n(n){if(a(t)&&t.onUnselect(),t=n,!a(n))return;n.onSelect();e.querySelector("ion-subscribe-user-to-premium-asset-button").assetId=n.id}this._selectedData.subscribe(n),n(this._selectedData())},c.prototype.editData=function(){const e=this.selectedData();this.edit.raiseEvent(e)},c}),define("Views/Admin/AssetDepot/AssetDepotDetailsViewModel",["../../../Core/AssetStatus","../../../Core/AssetType","../../../Core/convertMarkdown","../../../Core/defaultValue","../../../Core/Label","../../../Core/Services","knockout","toastr"],function(e,t,n,i,r,o,a,s){"use strict";Cesium.Check,Cesium.DeveloperError;function l(o){o=i(o,Cesium.Frozen.EMPTY_OBJECT),this._id=o.id,this._type=o.type;const s=a.observable(o.description);this._name=a.observable(o.name),this._description=s,this._typeText=t.toString(o.type),this._pending=a.observable(!1),this._inactive=!1,this._prefix=a.observable(o.prefix),this.status=a.observable(o.status),this.statusString=a.observable(e.toString(this.status())),this.status.subscribe(()=>{this.statusString(e.toString(this.status()))}),this.isDefault=a.observable(o.isDefault),this.hidden=a.observable(o.hidden),this._pollForStatus=!1,this.clippable=a.observable(i(o.clippable,!1)),this.isExternal=a.observable(i(o.isExternal,!1)),this.georeferenced=a.observable(o.georeferenced),this.descriptionHtml=a.pureComputed(function(){const e=s();return n(e)});const l=i(o.labels,[]);this.labels=a.observableArray(l.map(function(e){return new r(e)}));const c=a.observable(i(o.attribution,""));this.attribution=c,this.attributionHtml=a.pureComputed(function(){const e=c();return n(e,!0)})}return Object.defineProperties(l.prototype,{id:{get:function(){return this._id}},type:{get:function(){return this._type}},name:{get:function(){return this._name}},prefix:{get:function(){return this._prefix}},description:{get:function(){return this._description}},typeText:{get:function(){return this._typeText}},pending:{get:function(){return this._pending}}}),l.prototype.saveAttribute=function(e,t){this[e](t)},l.prototype.delete=async function(){const e=this._pending;e(!0);const t=this.id;try{await o.deleteAdminPremiumAsset(t)}catch(n){s.error(o.getErrorMessage(n),"Failed to delete asset")}finally{e(!1)}},l.getAll=o.getAdminPremiumAssets,l.compareByName=function(e,t){const n=e.name().toLowerCase(),i=t.name().toLowerCase();return n<i?-1:n>i?1:0},l.prototype.onUnselect=function(){this._pollForStatus=!1},l.prototype.onSelect=function(){!function(t){if(e.isPending(t.status())){t._pollForStatus=!0;const n=async function(){if(t._pollForStatus)try{const n=await o.getPremiumAssetMetadata(t._id);if(t.status(n.status),n.status===e.COMPLETE)return}finally{e.isPending(t.status())&&setTimeout(n,3e3)}};n()}}(this)},l.prototype.destroy=function(){this._inactive=!0,this._pollForStatus=!1},l}),define("Views/Admin/AssetDepot/EditPremiumAsset",["Core/AssetType","Core/Feature","Core/Services","knockout","Views/Components/Form/FormHelper","Views/Components/LabelPicker"],function(e,t,n,i,r,o){"use strict";Cesium.Check;const a=Cesium.defined,s=Cesium.Event;function l(n){const a=new r,l=n.name(),c=n.description(),u=n.isDefault(),d=n.labels(),h=n.prefix(),p=n.attribution(),f=n.hidden(),m=n.georeferenced(),g=n.clippable(),v=i.observable(m),b=i.observable(g);this._asset=n,this.close=new s,this.paneTitle=`Editing ${l}`,this.nameField=a.createTextInput({label:"Name",value:l,required:!0}),this.descriptionField=a.createMarkdownTextArea({label:"Description",value:c,required:!0}),this.prefixField=a.createTextInput({label:"Prefix",value:h,required:!1}),this.isDefaultToggle=a.createToggle({label:"Default",value:u,required:!0}),this.clippableToggle=a.createToggle({label:"Clippable",input:i.computed({read:function(){return b()&&v()},write:function(e){b(e)}}),required:!0,disabled:i.pureComputed(function(){return n.isExternal()||!v()})}),this.georeferencedToggle=a.createToggle({label:"Georeferenced",input:v,required:!0,disabled:n.type!==e["3DTILES"]}),this.hiddenToggle=a.createToggle({label:"Hidden",value:f,require:!0});const y=i.observableArray(d);this.labelPicker=new o(y,"left","right",!0),this.attributionField=a.createMarkdownTextArea({label:"Attribution",value:p,inline:!0}),this.errorText=i.observable(""),this._originalValues={name:l,prefix:h,description:c,labels:d,isDefault:u,attribution:p,hidden:f,clippable:g,georeferenced:m},this._pending=i.observable(!1),this._formHelper=a,this.labels=y,this.isAssetDepotHiddenAssetsEnabled=t.isEnabledForServer(t.Server.ASSET_DEPOT_HIDDEN_ASSETS),this.isAssetDepotFromPrefixEnabled=t.isEnabledForServer(t.Server.ASSET_DEPOT_FROM_PREFIX),this.areAssetDepotLabelsEnabled=t.isEnabledForServer(t.Server.ASSET_DEPOT_LABELS),this.areAssetArchivesEnabled=t.isEnabledForServer(t.Server.ASSET_ARCHIVES_FULL),this.areClipsEnabled=t.isEnabledForServer(t.User.ASSET_ARCHIVES_CLIPS)}return l.prototype.getEditedAsset=function(){const e={},t=this.nameField.input(),n=this.prefixField.input(),i=this.descriptionField.input(),r=this.attributionField.input(),o=this.isDefaultToggle.input(),a=this.clippableToggle.input(),s=this.hiddenToggle.input(),l=this.georeferencedToggle.input(),c=this.labels(),u=c.map(function(e){return e.id}),d=this._originalValues;if(t!==d.name&&(e.name=t),n!==d.prefix&&(e.prefix=n),i!==d.description&&(e.description=i),r!==d.attribution&&(e.attribution=r),o!==d.isDefault&&(e.isDefault=o),s!==d.hidden&&(e.hidden=s),a!==d.clippable&&(e.clippable=a),l!==d.clippable&&(e.georeferenced=l),c.length!==d.labels.length)e.labels=c;else{const t=d.labels.map(function(e){return e.id});for(let n=0;n<u.length;n++)if(-1===t.indexOf(u[n])){e.labels=c;break}}return e},l.prototype.updateModel=function(e){const t=this._asset;Object.keys(e).forEach(function(n){t.saveAttribute(n,e[n])})},l.prototype.apply=async function(){if(this._pending())return;if(this.errorText(""),!this._formHelper.isValid())return;const e=this.getEditedAsset();if(0===Object.keys(e).length)return void this.cancel();const t=this;this._pending(!0);const i=this._asset.id,r=e.labels;a(r)&&(e.labels=r.map(function(e){return e.id}));try{await n.patchPremiumAssetMetadataAdmin(i,e),a(r)&&(e.labels=r),t.updateModel(e),t.cancel()}catch(o){t.errorText(n.getErrorMessage(o))}finally{t._pending(!1)}},l.prototype.cancel=function(){this.close.raiseEvent()},l}),define("Views/Admin/AssetDepot/ShowHiddenAssetsToggle",["knockout"],function(e){"use strict";return function(){this.displayHidden=e.observable(!1)}}),define("text!Views/Help/AdminAssetDepotShellHelp.md",[],function(){return'**Create a new asset** by clicking <label class="btn btn-primary btn-xs btn-no-action">Add Asset</label>.\n\n**Edit an asset** by clicking one in the list and clicking the **Edit** button at the top of the right panel.\n\n**Delete an asset** by clicking the **Delete** button in the upper right. Deleting an asset depot asset will remove access to it for all users and cannot be undone.\n'}),define("Views/Admin/AssetDepot/AssetDepotShell",["../../Components/FileUploadList","../../Dashboard/DashboardShell","./AssetDepotDetails","./AssetDepotDetailsViewModel","./EditPremiumAsset","./ShowHiddenAssetsToggle","Core/Feature","Core/Validation","knockout","plugins/router","text!Views/Help/AdminAssetDepotShellHelp.md"],function(e,t,n,i,r,o,a,s,l,c,u){"use strict";const d=Cesium.defined;function h(e){return!e.hidden()}function p(e){return e.hidden()}function f(){const s=new o,d=l.pureComputed(function(){return s.displayHidden()?p:h}),m=new t({getItemsFilter:d,afterTitleContent:a.isEnabledForServer(a.Server.ASSET_DEPOT_HIDDEN_ASSETS)?s:void 0,detailsPane:n,editPane:r,itemViewModel:i,title:"Asset Depot",hash:"admin/assetdepot",path:"Views/Admin/AssetDepot/AssetDepot",newButtonText:"Add Asset",searchFields:["name","description","labels"],enableGrid:!1,helpContent:u});this.layout=m,this._hiddenToggle=s,this._removeAssetAddedEventListener=e.assetAdded.addEventListener(f.prototype.addNewAsset,this),this._removeAssetFailedEventListener=e.assetFailed.addEventListener(f.prototype.removeNewAsset,this),this._removeNewEventListener=m.listPane.newItem.addEventListener(function(){c.navigate("/admin/addpremiumasset/")})}return f.prototype.activate=async function(e){const t=this.layout,n=this._hiddenToggle;if(s.validNumber(e)){await t.loadItems(Number(e));const i=t.selectedItem();return void(d(i)&&i.hidden()&&n.displayHidden(!0))}t.loadItems()},f.prototype.addNewAsset=function(e){if(!d(e)||d(e.userId))return;const t=this.layout.items();for(let n=0;n<t.length;n++)if(t[n].id===e.id)return;this.layout.items.push(new i(e))},f.prototype.removeNewAsset=function(e){if(!d(e)||d(e.userId))return;const t=this.layout.items();for(let n=0;n<t.length;n++)if(t[n].id===e.id){const e=t[n];return this.layout.items.remove(e),void e.destroy()}},f.prototype.detached=function(){this._removeAssetAddedEventListener(),this._removeAssetFailedEventListener(),this._removeNewEventListener()},f}),define("Views/Admin/Settings/DefaultStoryAssetsSelectPane",["../../Components/AssetSelector","knockout","toastr"],function(e,t,n){"use strict";Cesium.Check;const i=Cesium.Event;function r(n,r){this.assets=n,this.saveCall=r,this.assetSelector=new e({assets:n,multiselect:!1}),this.close=new i,this.pending=t.observable(!1)}return r.prototype.cancel=function(){this.close.raiseEvent()},r.prototype.save=async function(){const e=this.assetSelector.getSelectedMetadata()[0];this.pending(!0);const t=this;try{await this.saveCall(e),t.close.raiseEvent(e)}catch(i){n.error(`Could not save new default settings: ${i}`)}finally{t.pending(!1)}},r}),define("text!Views/Help/AdminSettings.md",[],function(){return'The default imagery and terrain assets are automatically made available to users and are included by default in new stories.\n\n**Change the default assets** by clicking the corresponding <label class="btn btn-primary btn-xs btn-no-action">Select</label> button.\n\nThe **Free Bing Key** is provided to Community users, and the **Paid Bing Key** is made available to paid users.\n'}),define("Views/Admin/Settings/Settings",["../../../Core/AssetType","../../../Core/Feature","../../../Core/find","../../../Core/Services","../../Components/ContextualHelp","./DefaultStoryAssetsSelectPane","knockout","text!Views/Help/AdminSettings.md"],function(e,t,n,i,r,o,a,s){"use strict";Cesium.Check;const l=Cesium.defined;function c(t){return t.type===e.IMAGERY}function u(t){return t.type===e.TERRAIN}function d(t){return t.type===e["3DTILES"]}async function h(e,n,r,o){const s=await(t.isEnabledForServer(t.Server.ASSET_DEPOT)?i.getAdminPremiumAssets():async function(){let e=await i.getAssets({limit:1e3}),t=e.items;for(;e.links.next;)e=i.getNextOrPreviousPage(e.links.next),t=t.concat(e.items);return t}());a.utils.arrayPushAll(n,s.filter(u)),a.utils.arrayPushAll(r,s.filter(c)),a.utils.arrayPushAll(o,s.filter(d));const h=await i.getAppSettings();for(const t in h)h.hasOwnProperty(t)&&(l(e[t])||(e[t]=a.observable()),e[t](h[t]))}function p(e,t){if(l(t()))return n(e(),function(e){return e.id===t()})}function f(e,t,n){const i=t.close.addEventListener(function(t){l(t)&&n(t.id),i(),e.disabled(!1),e.rightPane(void 0)});e.disabled(!0),e.rightPane(t)}function m(t){const n={};return t.type===e.TERRAIN?n.defaultTerrainId=t.id:t.type===e.IMAGERY?n.defaultImageryId=t.id:t.type===e["3DTILES"]&&(n.defaultBuildingsId=t.id),i.setAppSettings(n)}function g(e){return i.setAppSettings({assetViewerImageryId:e.id})}function v(){const e=a.observableArray(),n=a.observableArray(),i=a.observableArray();this.pending=a.observable(!0),this.contextualHelp=new r(s,".pane-left.dashboard-pane"),this.isCesiumHostedIon=t.isEnabledForServer(t.Server.CESIUM_HOSTED_ION);const o=this,d={defaultTerrainId:a.observable(),defaultImageryId:a.observable(),defaultBuildingsId:a.observable(),assetViewerImageryId:a.observable()},g=a.pureComputed(p.bind(null,e,d.defaultTerrainId)),v=a.pureComputed(p.bind(null,n,d.defaultImageryId)),b=a.pureComputed(p.bind(null,i,d.defaultBuildingsId)),y=a.pureComputed(p.bind(null,n,d.assetViewerImageryId));this.terrainName=a.pureComputed(function(){return l(g())?g().name:"None"}),this.imageryName=a.pureComputed(function(){return l(v())?v().name:"None"}),this.buildingsName=a.pureComputed(function(){return l(b())?b().name:"None"}),this.assetViewerImageryName=a.pureComputed(function(){return l(y())?y().name:"None"}),this._imageryAssets=n,this._tilesAssets=i,this._defaultImagery=v,this._defaultBuildings=b,this._terrainAssets=e,this._defaultTerrain=g,this._assetViewerImagery=y,this.rightPane=a.observable(),this.disabled=a.observable(!1),this.showRightPanel=a.pureComputed(function(){return l(o.rightPane())}),this._settings=d,this._imageryFilter=c,this._terrainFilter=u,this._loadData=h,this._findById=p,this._saveAssetAsDefault=m,this._setSelectionPane=f}return v.prototype.activate=async function(){const e=this;this.pending(!0);try{await h(this._settings,this._terrainAssets,this._imageryAssets,this._tilesAssets)}finally{e.pending(!1)}},v.prototype.selectDefaultImagery=function(){f(this,new o(this._imageryAssets(),m),this._settings.defaultImageryId)},v.prototype.selectAssetViewerImagery=function(){f(this,new o(this._imageryAssets(),g),this._settings.assetViewerImageryId)},v.prototype.selectDefaultBuildings=function(){f(this,new o(this._tilesAssets(),m),this._settings.defaultBuildingsId)},v.prototype.selectDefaultTerrain=function(){f(this,new o(this._terrainAssets(),m),this._settings.defaultTerrainId)},v}),define("Views/Admin/Settings/SettingsShell",["../../../Core/Analytics","Core/Feature","Core/isRouteEnabled","../AdminShell","knockout"],function(e,t,n,i,r){"use strict";let o=[{route:[""],title:"Settings",moduleId:"Settings",hash:"admin/settings",nav:!0},{route:["assetdepotlabels"],title:"Asset Depot Labels",moduleId:"../../Account/Labels/LabelsShell",hash:"admin/settings/assetdepotlabels",nav:!0,requires:[t.Server.ASSET_DEPOT_LABELS]},{route:["standard-license"],title:"Standard License",moduleId:"../../Components/LicenseTracking/AppSettings",hash:"admin/settings/standard-license",nav:!0,requires:[t.Server.LICENSE_TRACKING]},{route:["*notfound"],title:"Page Not Found",moduleId:"../../Static/NotFound",nav:!1}];o=o.filter(n.forServer);const a=i.router.createChildRouter().makeRelative({fromParent:!0,moduleId:"Views/Admin/Settings"}).map(o).buildNavigationModel();return a.guardRoute=n.guardFunction,e.trackRouter(a),{router:a,navigation:r.pureComputed(function(){return r.utils.arrayFilter(a.navigationModel(),n.forActiveUser)})}}),define("Views/Admin/UserData/UserDataListPane",["Core/PageLoadingState","knockout","Views/Dashboard/ListPane","Core/Feature","Core/defaultValue"],function(e,t,n,i,r){"use strict";const o=Cesium.defined;function a(a){(a=r(a,Cesium.Frozen.EMPTY_OBJECT)).itemsLoadedPromise=Promise.resolve(),n.call(this,a),this.tableItems=t.pureComputed(()=>a.items());const s=t.observable(e.IN_PROGRESS);this.hasSelectedUser=t.pureComputed(function(){return o(a.selectedUser())}),this.assetLoadingState=s,this.assetIsError=t.pureComputed(function(){return s()===e.ERROR}),this.assetIsReady=t.pureComputed(function(){return s()===e.READY}),this.assetIsInProgress=t.pureComputed(function(){return s()===e.IN_PROGRESS}),this.hasPrevious=a.hasPrevious,this.hasNext=a.hasNext,this.loadNext=a.loadNext,this.loadPrevious=a.loadPrevious,this.isCesiumHostedMode=i.isEnabledForServer(i.Server.CESIUM_HOSTED_ION),this.sortBy=a.sortBy,this.sortStatus=a.sortStatus,this.searchText=a.searchText}return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a}),
/*!
 * typeahead.js 1.3.3
 * https://github.com/corejavascript/typeahead.js
 * Copyright 2013-2024 Twitter, Inc. and other contributors; Licensed MIT
 */
function(e,t){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return e.Bloodhound=t(n)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):e.Bloodhound=t(e.jQuery)}(this,function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){e.each(t,function(e,t){return n(t,e)})},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,r){if(!(i=n.call(null,r,e,t)))return!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,r){if(i=n.call(null,r,e,t))return!1}),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){return e.isFunction(t)?t:function(){return String(t)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,r;return function(){var o,a,s=this,l=arguments;return o=function(){i=null,n||(r=e.apply(s,l))},a=n&&!i,clearTimeout(i),i=setTimeout(o,t),a&&(r=e.apply(s,l)),r}},throttle:function(e,t){var n,i,r,o,a,s;return a=0,s=function(){a=new Date,r=null,o=e.apply(n,i)},function(){var l=new Date,c=t-(l-a);return n=this,i=arguments,c<=0?(clearTimeout(r),r=null,a=l,o=e.apply(n,i)):r||(r=setTimeout(s,c)),o}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},guid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+e()+e(!0)+e(!0)+e()},noop:function(){}}}(),n="1.3.3",i=function(){"use strict";return{nonword:n,whitespace:e,ngram:i,obj:{nonword:r(n),whitespace:r(e),ngram:r(i)}};function e(e){return(e=t.toStr(e))?e.split(/\s+/):[]}function n(e){return(e=t.toStr(e))?e.split(/\W+/):[]}function i(e){e=t.toStr(e);var n=[],i="";return t.each(e.split(""),function(e){e.match(/\s+/)?i="":(n.push(i+e),i+=e)}),n}function r(e){return function(n){return n=t.isArray(n)?n:[].slice.call(arguments,0),function(i){var r=[];return t.each(n,function(n){r=r.concat(e(t.toStr(i[n])))}),r}}}}(),r=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function r(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new r(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),o=function(){"use strict";var n;try{(n=window.localStorage).setItem("~~~","!"),n.removeItem("~~~")}catch(s){n=null}function i(e,i){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix)),this.ls=i||n,!this.ls&&this._noop()}return t.mixin(i.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(s){"QuotaExceededError"===s.name&&(this.clear(),this._noop())}},get:function(e){return this.isExpired(e)&&this.remove(e),a(this.ls.getItem(this._prefix(e)))},set:function(e,n,i){return t.isNumber(i)?this._safeSet(this._ttlKey(e),o(r()+i)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),o(n))},remove:function(e){return this.ls.removeItem(this._ttlKey(e)),this.ls.removeItem(this._prefix(e)),this},clear:function(){var e,t=function(e){var t,i,r=[],o=n.length;for(t=0;t<o;t++)(i=n.key(t)).match(e)&&r.push(i.replace(e,""));return r}(this.keyMatcher);for(e=t.length;e--;)this.remove(t[e]);return this},isExpired:function(e){var n=a(this.ls.getItem(this._ttlKey(e)));return!!(t.isNumber(n)&&r()>n)}}),i;function r(){return(new Date).getTime()}function o(e){return JSON.stringify(t.isUndefined(e)?null:e)}function a(t){return e.parseJSON(t)}}(),a=function(){"use strict";var n=0,i={},o=new r(10);function a(e){e=e||{},this.maxPendingRequests=e.maxPendingRequests||6,this.cancelled=!1,this.lastReq=null,this._send=e.transport,this._get=e.limiter?e.limiter(this._get):this._get,this._cache=!1===e.cache?new r(0):o}return a.setMaxPendingRequests=function(e){this.maxPendingRequests=e},a.resetCache=function(){o.reset()},t.mixin(a.prototype,{_fingerprint:function(t){return(t=t||{}).url+t.type+e.param(t.data||{})},_get:function(e,t){var r,o,a=this;function s(e){t(null,e),a._cache.set(r,e)}function l(){t(!0)}r=this._fingerprint(e),this.cancelled||r!==this.lastReq||((o=i[r])?o.done(s).fail(l):n<this.maxPendingRequests?(n++,i[r]=this._send(e).done(s).fail(l).always(function(){n--,delete i[r],a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)})):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var r,o;i=i||e.noop,n=t.isString(n)?{url:n}:n||{},o=this._fingerprint(n),this.cancelled=!1,this.lastReq=o,(r=this._cache.get(o))?i(null,r):this._get(n,i)},cancel:function(){this.cancelled=!0}}),a}(),s=window.SearchIndex=function(){"use strict";var n="c";function i(n){(n=n||{}).datumTokenizer&&n.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||t.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.matchAnyQueryToken=n.matchAnyQueryToken,this.reset()}return t.mixin(i.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var i=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var a,s;i.datums[a=i.identify(e)]=e,s=r(i.datumTokenizer(e)),t.each(s,function(e){var t,r,s;for(t=i.trie,r=e.split("");s=r.shift();)(t=t[n][s]||(t[n][s]=o())).i.push(a)})})},get:function(e){var n=this;return t.map(e,function(e){return n.datums[e]})},search:function(e){var i,o,a=this;return i=r(this.queryTokenizer(e)),t.each(i,function(e){var t,i,r,s;if(o&&0===o.length&&!a.matchAnyQueryToken)return!1;for(t=a.trie,i=e.split("");t&&(r=i.shift());)t=t[n][r];if(t&&0===i.length)s=t.i.slice(0),o=o?function(e,t){var n=0,i=0,r=[];e=e.sort(),t=t.sort();var o=e.length,a=t.length;for(;n<o&&i<a;)e[n]<t[i]?n++:(e[n]>t[i]||(r.push(e[n]),n++),i++);return r}(o,s):s;else if(!a.matchAnyQueryToken)return o=[],!1}),o?t.map(function(e){for(var t={},n=[],i=0,r=e.length;i<r;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}(o),function(e){return a.datums[e]}):[]},all:function(){var e=[];for(var t in this.datums)e.push(this.datums[t]);return e},reset:function(){this.datums={},this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i;function r(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function o(){var e={i:[]};return e[n]={},e}}(),l=function(){"use strict";var e;function n(e){this.url=e.url,this.ttl=e.ttl,this.cache=e.cache,this.prepare=e.prepare,this.transform=e.transform,this.transport=e.transport,this.thumbprint=e.thumbprint,this.storage=new o(e.cacheKey)}return e={data:"data",protocol:"protocol",thumbprint:"thumbprint"},t.mixin(n.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(e.data,t,this.ttl),this.storage.set(e.protocol,location.protocol,this.ttl),this.storage.set(e.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,n={};return this.cache?(n.data=this.storage.get(e.data),n.protocol=this.storage.get(e.protocol),n.thumbprint=this.storage.get(e.thumbprint),t=n.thumbprint!==this.thumbprint||n.protocol!==location.protocol,n.data&&!t?n.data:null):null},fromNetwork:function(e){var t,n=this;e&&(t=this.prepare(this._settings()),this.transport(t).fail(function(){e(!0)}).done(function(t){e(null,n.transform(t))}))},clear:function(){return this.storage.clear(),this}}),n}(),c=function(){"use strict";function e(e){this.url=e.url,this.prepare=e.prepare,this.transform=e.transform,this.indexResponse=e.indexResponse,this.transport=new a({cache:e.cache,limiter:e.limiter,transport:e.transport,maxPendingRequests:e.maxPendingRequests})}return t.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(e,t){var n,i=this;if(t)return e=e||"",n=this.prepare(e,this._settings()),this.transport.get(n,function(e,n){t(e?[]:i.transform(n))})},cancelLastRequest:function(){this.transport.cancel()}}),e}(),u=function(){"use strict";return function(r){var o,a;return o={initialize:!0,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},!(r=t.mixin(o,r||{})).datumTokenizer&&e.error("datumTokenizer is required"),!r.queryTokenizer&&e.error("queryTokenizer is required"),a=r.sorter,r.sorter=a?function(e){return e.sort(a)}:t.identity,r.local=t.isFunction(r.local)?r.local():r.local,r.prefetch=function(r){var o;if(!r)return null;return o={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null},r=t.isString(r)?{url:r}:r,r=t.mixin(o,r),!r.url&&e.error("prefetch requires url to be set"),r.transform=r.filter||r.transform,r.cacheKey=r.cacheKey||r.url,r.thumbprint=n+r.thumbprint,r.transport=r.transport?i(r.transport):e.ajax,r}(r.prefetch),r.remote=function(n){var r;if(!n)return;return r={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null},n=t.isString(n)?{url:n}:n,n=t.mixin(r,n),!n.url&&e.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=function(e){var t,n,i;if(t=e.prepare,n=e.replace,i=e.wildcard,t)return t;t=n?r:e.wildcard?o:a;return t;function r(e,t){return t.url=n(t.url,e),t}function o(e,t){return t.url=t.url.replace(i,encodeURIComponent(e)),t}function a(e,t){return t}}(n),n.limiter=function(e){var n,i,r;n=e.limiter,i=e.rateLimitBy,r=e.rateLimitWait,n||(n=/^throttle$/i.test(i)?a(r):o(r));return n;function o(e){return function(n){return t.debounce(n,e)}}function a(e){return function(n){return t.throttle(n,e)}}}(n),n.transport=n.transport?i(n.transport):e.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}(r.remote),r};function i(n){return function(i){var r=e.Deferred();return n(i,function(e){t.defer(function(){r.resolve(e)})},function(e){t.defer(function(){r.reject(e)})}),r}}}(),d=function(){"use strict";var n;function r(e){e=u(e),this.sorter=e.sorter,this.identify=e.identify,this.sufficient=e.sufficient,this.indexRemote=e.indexRemote,this.local=e.local,this.remote=e.remote?new c(e.remote):null,this.prefetch=e.prefetch?new l(e.prefetch):null,this.index=new s({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),!1!==e.initialize&&this.initialize()}return n=window&&window.Bloodhound,r.noConflict=function(){return window&&(window.Bloodhound=n),r},r.tokenizers=i,t.mixin(r.prototype,{__ttAdapter:function(){var e=this;return this.remote?function(t,n,i){return e.search(t,n,i)}:function(t,n){return e.search(t,n)}},_loadPrefetch:function(){var t,n,i=this;return t=e.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),t.resolve()):this.prefetch.fromNetwork(function(e,n){if(e)return t.reject();i.add(n),i.prefetch.store(i.index.serialize()),t.resolve()}):t.resolve(),t.promise()},_initialize:function(){var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function(){e.add(e.local)}),this.initPromise},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){return this.index.add(e),this},get:function(e){return e=t.isArray(e)?e:[].slice.call(arguments),this.index.get(e)},search:function(e,n,i){var r,o=this;return n=n||t.noop,i=i||t.noop,r=this.sorter(this.index.search(e)),n(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(e,function(e){var n=[];t.each(e,function(e){!t.some(r,function(t){return o.identify(e)===o.identify(t)})&&n.push(e)}),o.indexRemote&&o.add(n),i(n)}):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return a.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),r}();return d}),define("text!Views/Help/UserDataShellHelp.md",[],function(){return'View, add, and delete assets related to a specific user.\n\n**Select a user** by typing their username in the **Select user** field and clicking one in the drop-down list.\n\n**Delete a user\'s asset** by clicking an asset in the list, then clicking the delete button at the top of the panel on the right.\n\n**Add an asset** by clicking <label class="btn btn-primary btn-xs btn-no-action">Add data</label> and fill out the details in the **Add Asset** pane.\n'}),define("Views/Admin/UserData/UserData",["../../../Core/Services","./UserDataListPane","bloodhound","jquery","knockout","plugins/router","text!Views/Help/UserDataShellHelp.md"],function(e,t,n,i,r,o,a){"use strict";Cesium.Check;const s=Cesium.defined;function l(e){const n=r.pureComputed(function(){return!s(e.selectedUser())});this.assets=e.items,this.user=e.selectedUser,this.listPane=new t({afterTitleContent:"Views/Admin/UserData/UserSelection.html",items:this.assets,selectedItem:e.selectedAsset,tablePath:e.tablePath,title:e.title,disableNew:n,hideNew:n,newButtonText:e.newButtonText,helpContent:a,selectedUser:e.selectedUser,hasPrevious:e.hasPrevious,hasNext:e.hasNext,loadPrevious:e.loadPrevious,loadNext:e.loadNext,sortBy:e.sortBy,sortStatus:e.sortStatus,searchText:e.searchText}),this._removeNewItemListener=this.listPane.newItem.addEventListener(function(){const t=e.selectedUser();o.navigate(`/admin/addasset/${t.id}`)})}return l.prototype.loadUser=async function(t){const n=await e.getUser(t);this.user(n);const r=i("#adminAssetsSearch");0!==r.length&&r.eq(0).val(this.user().username)},l.prototype.compositionComplete=function(){const t=this,r=new n({datumTokenizer:n.tokenizers.obj.whitespace("username"),queryTokenizer:n.tokenizers.whitespace,identify:function(e){return e.id},remote:{url:`${e.apiEndpoint}admin/users`,prepare:function(e,t){return t.beforeSend=function(e,t){t.xhrFields={withCredentials:!0}},t.url=`${t.url}?search=${e}`,t},transform:function(e){return e.items}}}),o=i("#adminAssetsSearch");o.typeahead({minLength:0,highlight:!0},{name:"assets",display:"username",async:!0,source:r,templates:{empty:['<div class="empty-message">No usernames match this search</div>'].join("\n")}}).bind("typeahead:select",function(e,n){t.user(n)}),s(t.user())?o.eq(0).val(t.user().username):o.eq(0).val("").trigger("input")},l.prototype.detached=function(){this._removeNewItemListener()},l}),define("Views/Admin/UserData/UserDataDetails",["Core/Feature","../../../Core/createComputedProperty","../../../Core/isStringEmptyOrWhitespace","../../../Core/ReactInterop","../../../Core/Services","../../Components/AssetSourcesTable","../../Components/AssetViewer","jquery","knockout","toastr","Views/Components/ClickEditField","Views/Components/DeleteButton"],function(e,t,n,i,r,o,a,s,l,c,u,d){"use strict";Cesium.Check;const h=Cesium.defined;function p(r,a,s){this._asset=r,this._user=a,this._updateAsset=s;const p=this,f=l.observable(!1);this.pending=f;const m=t(r,"name");this.jobUrl=l.pureComputed(function(){const e=l.unwrap(r);if(!h(e))return;const t=l.unwrap(e.id);return`admin/jobs/?showComplete=true&type=ASSET_CONVERSION&search=${encodeURIComponent(`asset:${t}`)}`}),this.assetViewer=void 0,this.id=t(r,"id"),this.name=l.pureComputed({read:function(){return m()},write:async function(e){if(!f()&&!n(e)){f(!0);try{await p.apply(r(),{name:e})}catch(t){c.error(`Failed to save changes: ${t}`)}finally{f(!1)}}}}),this.logs=l.observableArray();const g=t(r,"description","");this.description=l.pureComputed({read:function(){return g()},write:async function(e){if(!f()){f(!0);try{await p.apply(r(),{description:e})}catch(t){c.error(`Failed to save changes: ${t}`)}finally{f(!1)}}}}),this.isCesiumHostedMode=e.isEnabledForServer(e.Server.CESIUM_HOSTED_ION),this.type=t(r,"typeName"),this.dateAdded=t(r,"dateAddedLocal"),this.size=t(r,"size"),this.isPremium=t(r,"isPremium"),this.isExternal=t(r,"isExternal"),this.nameField=new u({label:"Name",input:this.name,pending:f}),this.deleteButton=new d({width:250,confirmText:'<span class="bold">Delete Asset?</span><br>Once the asset is deleted, the user and stories that the user has created will no longer be able to access this asset<br><br><label class="control-label" for="delete-user-asset-verify">Enter asset name to confirm</label><input id="delete-user-asset-verify" class="form-control verify" type="text"><br><br>',pending:f,verify:function(e){return e===m()}}),this.showSourcesTab=l.pureComputed(function(){const t=p._asset();return e.isEnabledForServer(e.Server.ASSET_SOURCES)&&h(t)&&!t.isExternal}),this.sourcesTable=new o,this._delete=this.deleteButton.delete,this.realityData=new i.Component({tag:"ion-admin-asset-reality-data",properties:l.pureComputed(function(){const e=p._asset();return{assetId:h(e)?e.id:void 0}})}),this.georeferenced=t(r,"georeferenced"),this.georeferencedDisplay=new i.Component({tag:"ion-georeferenced",properties:l.pureComputed(function(){const e=a(),t=r();return{userId:e?e.id:void 0,asset:t?{id:t.id,name:t.name(),isPremium:t.isPremium,type:t.type,georeferenced:t.georeferenced()}:void 0}}),eventListeners:{"georeferenced-changed":function(e){const t=e.detail;r()&&t&&r().georeferenced(t.georeferenced)}}})}return Object.defineProperties(p.prototype,{delete:{get:function(){return this._delete}}}),p.prototype.compositionComplete=function(){const e=this,t=s("a[data-toggle=tab].sources-tab");s("a[data-toggle=tab]").on("shown.bs.tab",function(n){const i=n.target===t.get(0);e._sourcesTabActive=i,i&&e.sourcesTable.setAsset(e._asset())}),this._assetSubscription=this._asset.subscribe(function(t){e._sourcesTabActive&&!e.showSourcesTab()&&s("a[data-toggle=tab].info-tab").trigger("click"),e._sourcesTabActive&&e.sourcesTable.setAsset(t)})},p.prototype.activate=function(){const t=this,n=l.pureComputed(function(){const i=t._asset();return i&&(i.fetchExtraData().then(function(e){e&&n.notifySubscribers()}),e.isEnabledForServer(e.Server.SAML_AUTHENTICATION)&&r.getAssetRelatedLogs(i.id).then(e=>{t.logs(e)})),h(i)&&!i.isExternal?i:void 0});this.assetViewer=new a(n)},p.prototype.detached=function(){this.assetViewer=void 0,h(this._assetSubscription)&&this._assetSubscription.dispose()},p.prototype.unselect=function(){this._asset(void 0)},p.prototype.apply=function(e,t){const n=this._user();return this._updateAsset(n.id,e,t)},p}),define("Views/Admin/UserData/UserDataViewModel",["../../Components/DeleteButton","../../../Core/AssetStatus","../../../Core/AssetType","../../../Core/convertMarkdown","../../../Core/defaultValue","../../../Core/formatDateTime","../../../Core/getIonExtras","../../../Core/Services","../../../Core/Units","knockout","toastr"],function(e,t,n,i,r,o,a,s,l,c,u){"use strict";Cesium.Check;const d=Cesium.defined;async function h(e){if(!e._inactive)try{const n=await s.getAdminAssetMetadata(e._id);e._status(n.status),e._percentComplete(n.percentComplete),100===n.percentComplete||t.isError(n.status)||p.updateStatusDelayed(n)}catch(n){u.error(s.getErrorMessage(n))}}function p(a){const s=(a=r(a,Cesium.Frozen.EMPTY_OBJECT)).bytes,u=c.observable(r(a.description,""));this.descriptionHtml=c.pureComputed(function(){const e=u();return i(e)}),this._id=a.id,this._userId=a.userId,this._name=c.observable(a.name),this._description=u,this._type=a.type,this._dateAdded=new Date(a.dateAdded),this._bytes=s,this._isExternal=a.isExternal,this._isPremium=a.isPremium,this._percentComplete=c.observable(a.percentComplete),this._status=c.observable(a.status),this.logs=c.observableArray(),this._error=c.observable(a.error),this._progressMessage=c.observable(a.progressMessage),this.warnings=c.observable(a.warnings),this._dateAddedLocal=o(this._dateAdded),a.isExternal||a.isPremium?this._size="-":this._size=l.bytesToString(s),this._typeName=n.toString(this._type),this._ready=c.pureComputed(function(){return this._status()===t.COMPLETE},this),this._updateStatus=h.bind(null,this),100===a.percentComplete||t.isError(a.status)||p.updateStatusDelayed(this),this._pending=c.observable(!1),this._inactive=!1,this.georeferenced=c.observable(a.georeferenced),this.movable=c.observable(),this.defaultStyle=c.observable(),this.georeferencedTerrainId=c.observable(),this._ionExtrasInitialized=!1,this.deleteButton=new e({width:250,pending:this._pending,confirmText:'<span class="bold">Delete Asset?</span><br>Once the asset is deleted, the user and stories that the user has created will no longer be able to access this asset<br><br><label class="control-label" for="delete-user-asset-verify">Enter asset name to confirm</label><input id="delete-user-asset-verify" class="form-control verify" type="text"><br><br>',verify:e=>e===this._name(),hideLowerText:!0}),this.deleteButton.delete.addEventListener(()=>{const e=new CustomEvent("deleteUserData");document.dispatchEvent(e)})}return p.prototype.fetchExtraData=async function(){const e=this;if(this._status()===t.COMPLETE&&this._type===n["3DTILES"]&&!this._ionExtrasInitialized){this._ionExtrasInitialized=!0;const t=await a(this._id);return e.georeferencedTerrainId(t.terrainId),e.movable(t.movable),e.defaultStyle(t.defaultStyle),!0}return!1},Object.defineProperties(p.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},type:{get:function(){return this._type}},typeName:{get:function(){return this._typeName}},dateAdded:{get:function(){return this._dateAdded}},dateAddedLocal:{get:function(){return this._dateAddedLocal}},bytes:{get:function(){return this._bytes}},size:{get:function(){return this._size}},isExternal:{get:function(){return this._isExternal}},isPremium:{get:function(){return this._isPremium}},percentComplete:{get:function(){return this._percentComplete}},status:{get:function(){return this._status}},statusString:{get:function(){return c.pureComputed(()=>t.toString(this._status()))}},ready:{get:function(){return this._ready}},pending:{get:function(){return this._pending}},error:{get:function(){return this._error}},progressMessage:{get:function(){return this._progressMessage}}}),p.updateStatusDelayed=function(e){setTimeout(e._updateStatus,3e3)},p.update=async function(e,t,n){const i={userId:e};d(n.name)&&(i.name=n.name),d(n.description)&&(i.description=n.description),await s.patchAssetMetadataAdmin(t.id,i),d(i.name)&&t.name(i.name),d(i.description)&&t.description(i.description)},p.prototype.destroy=function(){this._inactive=!0},p}),define("Views/Admin/UserData/UserDataShell",["../../Components/FileUploadList","./UserData","./UserDataDetails","./UserDataViewModel","Core/find","Core/isViewportMobile","Core/PageLoadingState","Core/Services","Core/Validation","Core/SortOrder","Core/Resource","knockout","plugins/router","toastr","Core/isStringEmptyOrWhitespace"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f){"use strict";Cesium.Check;const m=Cesium.defined;async function g(e){const t=e._selectedUser(),n=e._selectedAsset(),i=e._items,r=i().indexOf(n);try{await b(t.id,n);const o=e._selectedUser(),a=e._selectedAsset(),s=i().indexOf(a);if(!m(o)||o.id!==t.id)return;if(i.remove(function(e){return e.id===n.id}),r!==s)return;const l=i().length;if(l>0){const t=r===l?l-1:r;e._selectedAsset(i()[t])}else e._selectedAsset(void 0)}catch(o){p.error(`Could not remove asset: ${o}`)}}function v(){const r=d.observableArray(),o=d.observable(),a=d.observable(!1),l=d.observable();this.nextLink=d.observable(),this.previousLink=d.observable(),this._page=1,this.hasPrevious=d.pureComputed(()=>m(this.previousLink())),this.hasNext=d.pureComputed(()=>m(this.nextLink())),this._deleteUserAssetHandler=()=>{g(this)},document.addEventListener("deleteUserData",this._deleteUserAssetHandler);const u=d.pureComputed(function(){return m(o())});this._sortedBy=d.observable("NAME"),this._sortOrder=d.observable(c.ASCENDING);const p=d.observable(),f=this,y=d.pureComputed({read:function(){return p()},write:async function(e){r.removeAll(),p(e),o(void 0),m(e)&&(h.navigate(`/admin/userassets/${e.id}`,{trigger:!1,replace:!0}),await f.loadUserAssets(e.id))}}),w=d.observable("");this.searchText=this.searchText=d.pureComputed({read:function(){return w()},write:async e=>{w(e),m(this._selectedUser())&&await this.loadUserAssets(this._selectedUser().id)}});const _=new t({items:r,newButtonText:"Add data",selectedAsset:o,selectedUser:y,title:"User Assets",tablePath:"Views/Admin/UserData/UserDataTable.html",hasPrevious:this.hasPrevious,hasNext:this.hasNext,loadNext:()=>{if(this.hasNext())return this.loadUserAssets(this._selectedUser().id,s.getNextOrPreviousPage(this.nextLink()))},loadPrevious:()=>{if(this.hasPrevious())return this.loadUserAssets(this._selectedUser().id,s.getNextOrPreviousPage(this.previousLink()))},sortBy:this.sortBy(),sortStatus:this.sortStatus(),searchText:this.searchText});this.disabled=a,this.userData=_,this.rightPane=l,this.showRightPanel=u,this._items=r,this._selectedUser=y,this._userObservableForTesting=p,this._removeAssetAddedEventListener=e.assetAdded.addEventListener(v.prototype.addNewAsset,this),this._removeAssetFailedEventListener=e.assetFailed.addEventListener(v.prototype.removeNewAsset,this),this._removeDeleteListener=void 0,this._removeUserAsset=b,this._selectedAsset=o,this._defaultAssetId=void 0,this._signOutSubscription=void 0,function(e){const t=e._selectedAsset,r=e._selectedUser,o=new n(t,r,i.update);e._removeDeleteListener=o.delete.addEventListener(()=>g(e)),e._dataDetails=o,e.rightPane(o)}(this)}function b(e,t){if(t.isPremium){const n={assetId:t.id};return s.adminRemoveUserPremiumAsset(e,n)}return function(e,t){const n={assetId:t};return s.adminDeleteUserAsset(e,n)}(e,t.id)}return v.prototype.activate=function(e,t){if(!l.validNumber(e))return;const n=m(t)&&l.validNumber(t.assetId)?Number(t.assetId):void 0;this._defaultAssetId=n,this.userData.loadUser(Number(e)),m(t)&&(m(t.page)&&l.validNumber(t.page)&&(this._page=Math.max(Number(t.page),1)),m(t.sortBy)&&this._sortedBy(t.sortBy),m(t.sortOrder)&&this._sortOrder(t.sortOrder),m(t.search)&&this.searchText(t.search))},v.prototype._updateUri=function(){let e="/admin/userassets";m(this._selectedUser())&&(e+=`/${this._selectedUser().id}`);const t=new u({url:e+window.location.search}),n=t.queryParameters;n.page=this._page,n.sortBy=this._sortedBy(),n.sortOrder=this._sortOrder(),f(this.searchText())?delete n.search:n.search=this.searchText(),h.navigate(t.url,{replace:!0,trigger:!1})},v.prototype.compositionComplete=function(){const e=this;this._signOutSubscription=s.isSignedIn.subscribe(function(t){t||e._items().forEach(function(e){e.destroy()})})},v.prototype.sortStatus=function(){return e=>d.pureComputed(()=>this._sortedBy()===e?this._sortOrder()===c.ASCENDING?"fa-sort-desc":"fa-sort-asc":"fa-sort")},v.prototype.sortBy=function(){return e=>()=>{if(this._sortedBy()!==e?(this._sortedBy(e),this._sortOrder(c.ASCENDING)):this._sortOrder(this._sortOrder()===c.ASCENDING?c.DESCENDING:c.ASCENDING),m(this._selectedUser()))return this.loadUserAssets(this._selectedUser().id)}},v.prototype.addNewAsset=function(e){const t=this._selectedUser();if(!m(t)||!m(e)||!m(e.userId)||e.userId!==t.id)return;const n=this.userData.assets();for(let i=0;i<n.length;i++)if(n[i].id===e.id)return;this.userData.assets.push(new i(e))},v.prototype.removeNewAsset=function(e){const t=this._selectedUser();if(!m(t)||!m(e)||!m(e.userId)||e.userId!==t.id)return;const n=this.userData.assets();for(let i=0;i<n.length;i++)if(n[i].id===e.id){const e=n[i];return this.userData.assets.remove(e),void e.destroy()}},v.prototype.loadUserAssets=async function(e,t){const n=this.userData.listPane.assetLoadingState,l=this;n(a.IN_PROGRESS);try{m(t)||(t=s.getAssetsForUser(e,{page:l._page,sortBy:l._sortedBy(),sortOrder:l._sortOrder(),search:l.searchText()}));const c=await t,u=c.items;if(e!==this._selectedUser().id)return;const d=this._items;if(l._items().forEach(function(e){e.destroy()}),l._items.removeAll(),u.forEach(function(e){d.push(new i(e))}),!o()){const e=d();let t=e[0];m(l._defaultAssetId)&&(t=r(e,function(e){return e.id===l._defaultAssetId})),this._selectedAsset(t)}m(c.links)&&(l.nextLink(c.links.next),l.previousLink(c.links.prev)),l._defaultAssetId=void 0,l._updateUri(),n(a.READY)}catch(c){console.log(c),n(a.ERROR)}},v.prototype.detached=function(){this._removeAssetAddedEventListener(),this._removeAssetFailedEventListener(),this._removeDeleteListener(),document.removeEventListener("deleteUserData",this._deleteUserAssetHandler),m(this._signOutSubscription)&&(this._signOutSubscription.dispose(),this._signOutSubscription=void 0),this._items().forEach(function(e){e.destroy()})},v}),define("Views/Admin/Users/AccountType",[],function(){"use strict";Cesium.DeveloperError;const e={TEAM:"TEAM",USER:"USER",toString:function(t){return t===e.TEAM?"Team":t===e.USER?"User":void 0}};return Object.freeze(e)}),define("Views/Admin/Users/UserType",[],function(){"use strict";Cesium.DeveloperError;const e={USER:"USER",BETA:"BETA",ADMIN:"ADMIN",EMPLOYEE:"EMPLOYEE",toString:function(t){return t===e.USER?"User":t===e.BETA?"Beta tester":t===e.ADMIN?"Admin":t===e.EMPLOYEE?"Employee":void 0}};return Object.freeze(e)}),define("Views/Admin/Users/CustomPlanToggles",["Core/AppData","Core/Feature","Core/Units","knockout","Views/Components/Form/FormHelper"],function(e,t,n,i,r){"use strict";Cesium.Check,Cesium.DeveloperError;function o(o){const a=new r,s=i.observable(!1),l=i.observable(),c=a.createNumberInput({addonAfter:n.GB,disabled:i.pureComputed(function(){return!s()}),input:i.pureComputed({read:function(){if(s())return l();const t=o();return String(n.bytesToGigabytes(e.plans[t].quotaInBytes))},write:function(e){l(e)}}),label:"Storage Quota",minimum:.001,step:1,required:!0}),u=a.createToggle({hasLabel:!1,helperText:i.pureComputed(function(){return s()?"Custom":"Default"}),input:s}),d=i.observable(!1),h=i.observable(),p=a.createNumberInput({addonAfter:n.GB,disabled:i.pureComputed(function(){return!d()}),input:i.pureComputed({read:function(){if(d())return h();const t=o();return String(n.bytesToGigabytes(e.plans[t].streamingInBytes))},write:function(e){h(e)}}),label:"Streaming Quota",minimum:.001,step:1,required:!0}),f=a.createToggle({hasLabel:!1,helperText:i.pureComputed(function(){return d()?"Custom":"Default"}),input:d}),m=i.observable(!1),g=i.observable(),v=a.createNumberInput({disabled:i.pureComputed(function(){return!m()}),input:i.pureComputed({read:function(){if(m())return g();const t=o();return String(e.plans[t].bingMapsSessions)},write:function(e){g(e)}}),label:"Bing Maps Sessions",minimum:1,step:1,required:!0}),b=a.createToggle({hasLabel:!1,helperText:i.pureComputed(function(){return m()?"Custom":"Default"}),input:m}),y=i.observable(!1),w=i.observable(),_=a.createNumberInput({disabled:i.pureComputed(function(){return!y()}),input:i.pureComputed({read:function(){if(y())return w();const t=o();return String(e.plans[t].googleSessions)},write:function(e){w(e)}}),label:"Google Photorealistic 3D Tiles Sessions",minimum:1,step:1,required:!0}),x=a.createToggle({hasLabel:!1,helperText:i.pureComputed(function(){return y()?"Custom":"Default"}),input:y}),S=i.observable(!1),T=i.observable(),A=a.createNumberInput({disabled:i.pureComputed(function(){return!S()}),input:i.pureComputed({read:function(){if(S())return T();const t=o();return String(e.plans[t].geocodes)},write:function(e){T(e)}}),label:"Geocodes",minimum:1,step:1,required:!0}),C=a.createToggle({hasLabel:!1,helperText:i.pureComputed(function(){return S()?"Custom":"Default"}),input:S}),E=i.observable(!1),k=i.observable(),I=i.observable(!1),P=i.observable();this.quotaField=c,this.quotaToggle=u,this.streamingField=p,this.streamingToggle=f,this.bingSessionsField=v,this.bingSessionsToggle=b,this.googleSessionsField=_,this.googleSessionsToggle=x,this.geocodesField=A,this.geocodesToggle=C,this.clipsToggle=a.createToggle({hasLabel:!1,helperText:i.pureComputed(function(){return E()?"Custom":"Default"}),input:E}),this.clipsField=a.createNumberInput({disabled:i.pureComputed(function(){return!E()}),input:i.pureComputed({read:function(){if(E())return k();const t=o();return String(e.plans[t].clips)},write:function(e){k(e)}}),label:"Clips",minimum:1,step:1,required:!0}),this.isRealityAnalysisEnabled=t.isEnabledForServer(t.User.REALITY_ANALYSIS),this.analysisHoursToggle=a.createToggle({hasLabel:!1,helperText:i.pureComputed(function(){return I()?"Custom":"Default"}),input:I}),this.analysisHoursField=a.createNumberInput({disabled:i.pureComputed(function(){return!I()}),input:i.pureComputed({read:function(){if(I())return Math.round(P()/60);const t=o();return String(Math.round(e.plans[t].analysisMinutes/60))},write:function(e){P(60*e)}}),label:"Analysis Hours",minimum:0,step:1,required:!0}),this._formHelper=a,this._selectedPlan=o}return o.prototype.isValid=function(){return this._formHelper.isValid()},o.prototype.setUser=function(e){const t=e.hasCustomQuota();this.quotaToggle.input(t),this.quotaField.input(t?n.bytesToGigabytes(e.quotaInBytes()):void 0);const i=e.hasCustomStreaming();this.streamingToggle.input(i),this.streamingField.input(i?n.bytesToGigabytes(e.streamingInBytes()):void 0);const r=e.hasCustomBingMapsSessions();this.bingSessionsToggle.input(r),this.bingSessionsField.input(r?e.bingMapsSessions():void 0);const o=e.hasCustomGoogleSessions();this.googleSessionsToggle.input(o),this.googleSessionsField.input(o?e.googleSessions():void 0);const a=e.hasCustomGeocodes();this.geocodesToggle.input(a),this.geocodesField.input(a?e.geocodes():void 0);const s=e.hasCustomClips();this.clipsToggle.input(s),this.clipsField.input(s?e.clips():void 0);const l=e.hasCustomAnalysisMinutes();this.analysisHoursToggle.input(l),this.analysisHoursField.input(l?Math.round(e.analysisMinutes()/60):void 0)},o.prototype.getPlanLimits=function(){const e={};if(this.quotaToggle.input()){const t=Math.round(n.gigabytesToBytes(Number(this.quotaField.input())));e.quotaInBytes=t}if(this.streamingToggle.input()){const t=Math.round(n.gigabytesToBytes(Number(this.streamingField.input())));e.streamingInBytes=t}if(this.bingSessionsToggle.input()){const t=Math.round(Number(this.bingSessionsField.input()));e.bingMapsSessions=t}if(this.googleSessionsToggle.input()){const t=Math.round(Number(this.googleSessionsField.input()));e.googleSessions=t}if(this.geocodesToggle.input()){const t=Math.round(Number(this.geocodesField.input()));e.geocodes=t}return this.clipsToggle.input()&&(e.clips=Math.round(Number(this.clipsField.input()))),this.analysisHoursToggle.input()&&(e.analysisMinutes=Math.round(Number(60*this.analysisHoursField.input()))),e},o}),define("generated/Subscriptions",["require","exports","module"],function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DataSubscriptions=t.SubscriptionToLabelShort=t.SubscriptionToLabel=t.Subscriptions=void 0,t.isValidSubscription=function(e){return e===i.SELF_HOSTED||e===i.CLI||e===i.ANALYTICS_SDK||e===i.CWB||e===i.CWT||e===i.OSM||e===i.S2},function(e){e.SELF_HOSTED="SELF_HOSTED",e.CLI="CLI",e.ANALYTICS_SDK="ANALYTICS_SDK",e.CWT="CWT",e.S2="S2",e.OSM="OSM",e.CWB="CWB"}(i||(t.Subscriptions=i={})),t.SubscriptionToLabel={SELF_HOSTED:"Self Hosted",CLI:"3D Tiling Pipeline",ANALYTICS_SDK:"Cesium ion SDK",CWT:"Cesium World Terrain",S2:"Sentinel-2 Imagery",OSM:"Open Street Maps",CWB:"Cesium World Bathymetry"},t.SubscriptionToLabelShort={SELF_HOSTED:"Self Hosted",CLI:"Tiling Pipeline",ANALYTICS_SDK:"ion SDK",CWT:"CWT",S2:"S2",OSM:"OSM",CWB:"CWB"},t.DataSubscriptions=[i.CWB,i.CWT,i.OSM,i.S2]}),define("Views/Admin/Users/EditUserConfirmationMessage",["plugins/dialog","Core/AppData","Core/defaultValue","Core/Units","moment","generated/Subscriptions"],function(e,t,n,i,r,o){"use strict";const a=Cesium.defined,s=(Cesium.Check,Cesium.DeveloperError),l=o.Subscriptions,c=o.SubscriptionToLabelShort,u={username:"Username",email:"Email",exportStatus:"Export status",planCode:"Plan",subscriptionUuid:"Subscription",quotaInBytes:"Storage quota",streamingInBytes:"Streaming quota",bingMapsSessions:"Bing Maps sessions",googleSessions:"Google Photorealistic 3D Tiles sessions",geocodes:"Geocodes",clips:"Clips",analysisMinutes:"Analysis Hours",disabled:"Disabled",planPrice:"Plan price",planExpiration:"Plan expiration date",ignoreUserOverage:"Ignore user quota for billing period",licenseType:"License type",licenseVersion:"Standard license version",licenseeName:"Licensee name",licenseeEmail:"Licensee email",acceptanceDate:"Acceptance date",customExpires:"Contract expires",gracePeriodExpires:"Grace period expires"};function d(e,o){this.username=e;const d=Object.keys(o),h=[];let p,f=!1;for(let n=0;n<d.length;n++){const e=d[n],m=u[e];if("subscriptionData"===e){const t=o[e];for(const e of Object.keys(l)){const n=t[e];if(a(n)&&(a(n.license)&&h.push({text:`${c[e]} license`,value:n.license}),void 0!==n.expiration)){let t=n.expiration;null===t&&(t="Does not expire"),h.push({text:`${c[e]} expiration date`,value:t})}}}else if(a(m)){let n=o[e];if("analysisMinutes"===e)n=a(n)?n/60:"Set to plan default";else if("quotaInBytes"===e||"streamingInBytes"===e)n=a(n)?`${i.bytesToGigabytes(n).toFixed(2)} ${i.GB}`:"Set to plan default";else if("geocodes"!==e&&"bingMapsSessions"!==e&&"googleSessions"!==e&&"clips"!==e||a(n))if("planPrice"===e)n=a(n)?`$${n}`:"Set to plan default";else if("ignoreUserOverage"===e)n=n?"Ignored":"Not ignored";else if(n instanceof Date)n=r.utc(n).format("YYYY-MM-DD");else if("planCode"===e){const e=t.plans[n];n=a(e)?e.name:n}else"string"==typeof n&&"email"!==e&&"username"!==e&&"licenseeEmail"!==e&&"licenseeName"!==e&&n.length&&(n=n[0].toUpperCase()+n.substring(1).toLowerCase());else n="Set to plan default";h.push({text:m,value:n})}else{if("admin"!==e&&"betaTester"!==e&&"employee"!==e)throw new s(`unrecognized user property ${e}`);f=!0,"admin"===e&&o.admin?p="Admin":"betaTester"===e&&o.betaTester?p="Beta tester":"employee"===e&&o.employee&&(p="Employee")}}f&&h.push({text:"User type",value:n(p,"User")}),this.changes=h}return d.prototype.save=function(){e.close(this,!0)},d.prototype.cancel=function(){e.close(this,!1)},d}),define("Core/LicenseType",[],function(){"use strict";return Object.freeze({YES:"YES",EVALUATION:"EVALUATION",NO:"NO"})}),define("Views/Components/LicenseTracking/SignatureSubform",["knockout","Core/Services","Core/PlanCode","../Form/SelectInputOption","moment","Core/Validation","generated/LicenseSignature"],(e,t,n,i,r,o,a)=>{"use strict";const s=Cesium.defined,{LicenseAgreementType:l}=a,c=e=>{if(e instanceof Date)return"";e=e?.trim?.();const t=!e,n=Number.isNaN(Date.parse(e));return t||n?"Invalid date":""};return class{constructor(t,i,r){this.parent=t,this.user=i,this.formHelper=r,this.data=e.observable(),this.editable=e.observable(!1),this.none=e.pureComputed(()=>!this.editable()),this.isStandard=e.pureComputed(()=>this.fields.licenseType?.input?.()===l.STANDARD),this.isCustom=e.pureComputed(()=>this.fields.licenseType?.input?.()===l.CUSTOM),this.acceptRequired=e.pureComputed(()=>this.isCustom()||this.fields.accept?.input?.()),this.isCommunity=e.pureComputed(()=>this.parent.planField.input()===n.COMMUNITY),this.contactRequired=e.pureComputed(()=>(this.isCustom()||!this.isCommunity())&&this.acceptRequired()),this.isStandardPaid=e.pureComputed(()=>this.isStandard()&&!this.isCommunity()),this.pending=e.observable(!1),this.fields={},this.appSettings=e.observable(),this.fetchData()}createFields(){const{formHelper:e}=this;this.fields={licenseType:e.createSelectInput({label:"License type",value:this.data()?.licenseType??l.STANDARD,required:!0,options:[new i("Standard",l.STANDARD),new i("Custom",l.CUSTOM)]}),licenseVersion:e.createTextInput({label:"Standard license version",value:this.data()?.licenseVersion,disabled:!this.isStandard,validate:e=>this.isStandard()?c(e):""}),licenseeName:e.createTextInput({label:"Licensee name",value:this.data()?.licenseeName,validate:e=>this.contactRequired()||e?o.validateName(e,"Licensee name"):""}),licenseeEmail:e.createTextInput({label:"Licensee email",value:this.data()?.licenseeEmail,validate:e=>this.contactRequired()||e?o.validateEmail(e,"Licensee email"):""}),accept:e.createToggle({label:"Accepted",value:!!this.data()?.acceptanceDate}),acceptanceDate:e.createDateInput({label:"Acceptance date",value:this.data()?.acceptanceDate?new Date(this.data()?.acceptanceDate):new Date,dateOnly:!0,validate:e=>this.acceptRequired()?c(e):""}),gracePeriodExpires:e.createDateInput({label:"Grace period expires",dateOnly:!0,value:this.data()?.gracePeriodExpires&&new Date(this.data()?.gracePeriodExpires),validate:e=>""!==e?c(e):""}),customExpires:e.createDateInput({label:"Contract expires",dateOnly:!0,value:this.data()?.customExpires&&new Date(this.data()?.customExpires),required:this.isCustom,validate:e=>this.isCustom()?c(e):""})}}async fetchData(){const e=await t.getAppSettings();let n;this.appSettings(e),s(this.user)&&(n=await t.getUserLicenseSignature(this.user.id)),this.data(n),void 0!==n?(this.createFields(),this.editable(!0),this.setDisabled(!1),this.applyDefaults()):this.setDisabled(!0)}applyDefaults(){this.fields.licenseVersion.input()||this.fields.licenseVersion.input(this.appSettings().standardLicenseVersion),this.fields.gracePeriodExpires.input()||this.fields.gracePeriodExpires.input(new Date(this.appSettings().standardLicenseGraceExpires))}setDisabled(e){Object.values(this.fields).forEach(t=>{e?(t.isRequired=t.required,t.required=!1):(t.required=t.isRequired,delete t.isRequired),t.disabled=e})}create(){this.createFields(),this.editable(!0),this.setDisabled(!1),this.applyDefaults()}async apply(e){if(!this.editable())return;s(e)||(e=this.user.id);const n=this.fields.licenseType.input(),i={licenseType:n,licenseeName:this.fields.licenseeName.input()||void 0,licenseeEmail:this.fields.licenseeEmail.input()||void 0,acceptanceDate:this.fields.accept.input()||n===l.CUSTOM?r(this.fields.acceptanceDate.input()).toISOString():void 0};n===l.STANDARD?(i.licenseVersion=this.fields.licenseVersion.input(),i.forced=!1,i.gracePeriodExpires=r(this.fields.gracePeriodExpires.input()).toISOString()):i.customExpires=r(this.fields.customExpires.input()).toISOString(),this.pending(!0);try{await t.setUserLicenseSignature(e,i)}finally{this.pending(!1)}}changes(){const e={};for(const[t,n]of Object.entries(this.fields)){if("accept"===t)continue;if("acceptanceDate"===t&&!this.fields.accept.input())continue;const i=this.data()?.[t]??void 0;let o=n.input()||void 0;o instanceof Date&&(o=r.utc(o).toISOString()),i!==o&&(e[t]=n.input())}return e}}}),define("Views/Admin/Users/AddEditUser",["plugins/dialog","./UserType","./CustomPlanToggles","./EditUserConfirmationMessage","Core/AppData","Core/LicenseType","Core/PlanCode","Core/Services","Core/Validation","knockout","Views/Components/CollapsePanel","Views/Components/Form/FormHelper","Views/Components/Form/SelectInputOption","moment","generated/Subscriptions","generated/getEnumKeys","../../../Core/Feature","../../Components/LicenseTracking/SignatureSubform"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v){"use strict";const b=Cesium.defined,y=Cesium.DeveloperError,w=Cesium.Event,_=f.Subscriptions,x=m.getEnumKeys,S=f.SubscriptionToLabelShort;function T(e,t){const n=b(e),i=b(t);return n===i&&(!n&&!i||p(e).isSame(t,"day"))}function A(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}function C(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}function E(e){return`${e.getUTCFullYear()}-${e.getUTCMonth()+1}-${e.getUTCDate()}`}function k(e){return[new h(t.toString(t.USER),t.USER),new h(t.toString(t.BETA),t.BETA),new h(t.toString(t.ADMIN),t.ADMIN),new h(t.toString(t.EMPLOYEE),t.EMPLOYEE,e)]}const I=[new h("Passed","PASSED"),new h("Failed","FAILED"),new h("Unknown","UNKNOWN")],P=[new h("Commercial",a.COMMERCIAL)],D=[new h("Premium",a.PREMIUM)],O=[new h("Annual Commercial",a.ANNUAL_COMMERCIAL)],M=[new h("Annual Premium",a.ANNUAL_PREMIUM)],L=[new h("Community",a.COMMUNITY),new h("Promo Commercial",a.PROMO_COMMERCIAL),new h("Promo Premium",a.PROMO_PREMIUM),new h("PO Commercial",a.PO_COMMERCIAL),new h("PO Premium",a.PO_PREMIUM),new h("PO E365 Premium",a.PO_E365_PREMIUM)],R=[new h("No",o.NO),new h("Evaluation",o.EVALUATION),new h("Yes",o.YES)];function N(e,t){return b(t)?C(new Date(t)):function(e){switch(e){case o.NO:return new Date;case o.EVALUATION:return p().add(p.duration({months:1})).toDate();case o.YES:return p().add(p.duration({years:1})).toDate();default:throw new y(`Unknown LicenseType: ${e}`)}}(e)}function F(e){this._knockoutSubscriptions=[];const i=b(e),h=c.observable(),f=c.observable(),m=c.observable(),y=new d,T=y.createTextInput({label:"Username",required:!0,feedback:l.validateUsername}),A=y.createTextInput({label:"Email",required:!b(e)||!e.isTeam(),feedback:l.validateEmail}),E=i&&e.username()===s.username(),F=y.createSelectInput({label:"Export Status",required:!0,options:I});let U,V,B,$;b(e)?($=e.planPendingChanges(),U=b($)?$.nextPlanCode:e.planCode()):U=a.COMMUNITY;const H=c.observable(U);let G=!1,j=L;U===a.COMMERCIAL?(G=!0,j=P):U===a.PREMIUM?(G=!0,j=D):U===a.ANNUAL_COMMERCIAL?(G=!0,j=O):U===a.ANNUAL_PREMIUM&&(G=!0,j=M);const z=c.pureComputed(function(){return H()!==a.COMMUNITY}),q=y.createSelectInput({label:"User type",required:!0,disabled:E,options:k(z)});b(e)&&e.isTeam()&&(j=j.filter(e=>e.value!==a.COMMUNITY)),this.planField=y.createSelectInput({label:"Plan",required:!0,options:j,input:H,disabled:G}),this.planExpirationField=y.createDateInput({label:"Plan Expiration Date",required:!0,dateOnly:!0,disabled:c.pureComputed(function(){return!a.hasExpiration(H())}),value:b(e)&&b(e.planExpiration())?C(e.planExpiration()):new Date}),this._knockoutSubscriptions.push(this.planField.input.subscribe(t=>{if(!a.hasExpiration(t))return;if(b(e)&&t===U)return void this.planExpirationField.input(C(e.planExpiration()));const n=a.isPurchaseOrderPlan(t)?p().add(1,"years").toDate():p().add(1,"months").toDate();this.planExpirationField.input(n)}));const Y=c.observable(!1),W=c.observable(),K=y.createNumberInput({disabled:c.pureComputed(function(){return!Y()}),input:c.pureComputed({read:function(){if(Y())return W();const e=H();return String(r.plans[e].price)},write:function(e){W(e)}}),label:"Price",addonBefore:"$",minimum:0,step:1,required:!0}),X=y.createToggle({label:"Custom price",helperText:c.pureComputed(function(){return Y()?"Custom":"Default"}),input:Y});this.userSubscriptions=b(e)?e.subscriptions():[];for(const t of x(_)){const e=this.userSubscriptions.find(e=>e.subscriptionName===_[t]);let n=o.NO,i=!0;b(e)&&(n=e.isEvaluation?o.EVALUATION:o.YES),this[`${t} field`]=y.createSelectInput({label:`${S[t]} access`,required:!0,options:R,value:n}),b(e)&&(i=b(e.expiration)||this[`${t} field`].input()===o.NO),this[`${t} toggle`]=y.createToggle({label:`${S[t]} expires`,required:!0,helperText:c.pureComputed(function(){}),value:i,disabled:c.pureComputed(()=>this[`${t} field`].input()===o.NO)}),this[`${t} expirationField`]=y.createDateInput({label:`${S[t]} expiration date`,dateOnly:!0,required:!0,disabled:c.pureComputed(()=>!this[`${t} toggle`].input()),value:N(this[`${t} field`].input(),b(e)?e.expiration:void 0)}),this._knockoutSubscriptions.push(this[`${t} field`].input.subscribe(n=>{const i=N(n,b(e)?e.expiration:void 0);this[`${t} expirationField`].input(i)}))}this.subscriptionFields=c.pureComputed(function(){const e=[];for(const t of x(_))e.push({field:this[`${t} field`],toggle:this[`${t} toggle`],expirationField:this[`${t} expirationField`]});return e},this),this.signature=void 0,g.isEnabledForServer(g.Server.LICENSE_TRACKING)&&(this.signature=new v(this,e,y));const Z=new n(H);let J="Add";i?(h(!e.disabled()),T.input(e.username()),f(e.disabledReason()),m(b(e.ignoreOverageUntil())&&p().isBefore(e.ignoreOverageUntil())),A.input(e.email()),q.input(e.userType()),F.input(e.exportStatus()),Z.setUser(e),b($)?(V=$.hasCustomPrice?$.nextPlanPrice:void 0,B=$.hasCustomPrice):(V=e.hasCustomPrice()?e.planPrice():void 0,B=e.hasCustomPrice()),K.input(V),X.input(B),J="Apply"):(h(!0),T.input(""),A.input(""),q.input(t.USER),F.input("UNKNOWN")),this.paneTitle=i?"Edit User":"Add User",this.userTypeField=q,this.exportStatusField=F,this.usernameField=T,this.emailField=A,this.isRecurringPlan=G,this.customPlanToggles=Z,this.planLimitPanel=new u("Customize plan limits",Z,void 0,!1),this.priceField=K,this.priceToggle=X,this.enabledToggle=y.createToggle({label:"Account status",helperText:c.pureComputed(function(){return h()?"Enabled":"Disabled"}),input:h,disabled:E}),this.ignoreOveragesToggle=y.createToggle({label:"Ignore quota for current period",helperText:c.pureComputed(function(){return m()?"Ignored":"Not Ignored"}),input:m,disabled:E}),this.formError=c.observable(""),this.submitText=J,this.notEmployee=c.pureComputed(function(){return"employee"!==this.userTypeField.input()&&!(b(e)&&e.userType()===t.EMPLOYEE)},this),this.isTeam=c.pureComputed(function(){return!!b(e)&&!!e.isTeam()}),this.planHasExpiration=c.pureComputed(function(){return a.hasExpiration(this.planField.input())},this),this._formHelper=y,this._editUser=i,this._user=e,this._close=new w,this.pending=c.observable(!1),this._enabled=h,this._initialPlanCode=U,this._initialPlanPrice=V,this._initialPlanCustomPrice=B,this._ignoreUserOverage=m}return Object.defineProperties(F.prototype,{close:{get:function(){return this._close}},_disabled:{get:function(){return!this._enabled()}}}),F.prototype.apply=async function(){if(this.pending())return;if(this.formError(""),!this._formHelper.isValid())return;if(!this.customPlanToggles.isValid())return;const n=this;this.pending(!0);try{this._editUser?await async function(n){const r=n.customPlanToggles.getPlanLimits(),l={disabled:n._disabled,email:n.emailField.input(),username:n.usernameField.input().trim(),exportStatus:n.exportStatusField.input()},u={};for(const e of Object.keys(_)){const t=n.userSubscriptions.find(t=>t.subscriptionName===_[e]),i=n[`${e} field`].input(),r=n[`${e} toggle`].input();let a;i!==o.NO&&r&&b(n[`${e} expirationField`].input())&&(a=A(n[`${e} expirationField`].input()));const s={license:i,expiration:a};r?b(t)&&T(a,t.expiration)&&delete s.expiration:b(t)&&b(t.expiration)?s.expiration=null:delete s.expiration,i===o.NO&&delete s.expiration,b(t)?(t.isEvaluation?o.EVALUATION:o.YES)===i&&delete s.license:b(t)||i!==o.NO||delete s.license,b(s.expiration)&&(s.expiration=E(s.expiration)),Object.keys(s).length>0&&(u[e]=s)}Object.keys(u).length>0&&(l.subscriptionData=u);const d=n.userTypeField.input(),h=n._user,p=n.planField.input(),f=n._initialPlanCode;d!==h.userType()&&(l.admin=d===t.ADMIN,l.betaTester=d===t.BETA,l.employee=d===t.EMPLOYEE),l.disabled===h.disabled()&&delete l.disabled,l.email===h.email()&&delete l.email,l.username===h.username()&&delete l.username,l.exportStatus===h.exportStatus()&&delete l.exportStatus,n.isRecurringPlan&&(n.priceToggle.input()?n._initialPlanCustomPrice&&n._initialPlanPrice===n.priceField.input()||(l.planPrice=Number(n.priceField.input())):n._initialPlanCustomPrice&&(l.planPrice=null)),b(r.quotaInBytes)?h.hasCustomQuota()&&r.quotaInBytes===h.quotaInBytes()||(l.quotaInBytes=r.quotaInBytes):h.hasCustomQuota()&&(l.quotaInBytes=null),b(r.streamingInBytes)?h.hasCustomStreaming()&&r.streamingInBytes===h.streamingInBytes()||(l.streamingInBytes=r.streamingInBytes):h.hasCustomStreaming()&&(l.streamingInBytes=null),b(r.bingMapsSessions)?h.hasCustomBingMapsSessions()&&r.bingMapsSessions===h.bingMapsSessions()||(l.bingMapsSessions=r.bingMapsSessions):h.hasCustomBingMapsSessions()&&(l.bingMapsSessions=null);const m=n._ignoreUserOverage();if((m||b(h.ignoreOverageUntil())&&!m)&&(l.ignoreUserOverage=m),b(r.googleSessions)?h.hasCustomGoogleSessions()&&r.googleSessions===h.googleSessions()||(l.googleSessions=r.googleSessions):h.hasCustomGoogleSessions()&&(l.googleSessions=null),b(r.geocodes)?h.hasCustomGeocodes()&&r.geocodes===h.geocodes()||(l.geocodes=r.geocodes):h.hasCustomGeocodes()&&(l.geocodes=null),b(r.clips)?h.hasCustomClips()&&r.clips===h.clips()||(l.clips=r.clips):h.hasCustomClips()&&(l.clips=null),b(r.analysisMinutes)?h.hasCustomAnalysisMinutes()&&r.analysisMinutes===h.analysisMinutes()||(l.analysisMinutes=r.analysisMinutes):h.hasCustomAnalysisMinutes()&&(l.analysisMinutes=null),p!==f&&(l.planCode=p),a.hasExpiration(p)){const e=A(n.planExpirationField.input());p===f&&T(e,h.planExpiration())||(l.planExpiration=e)}const v={...l};if(g.isEnabledForServer(g.Server.LICENSE_TRACKING)&&Object.assign(v,n.signature.changes()),0===Object.keys(v).length)return void n._close.raiseEvent();if(b(l.planExpiration)&&(l.planExpiration=v.planExpiration=E(l.planExpiration)),!(await e.show(new i(h.username(),v))))return;const y=await s.patchUserAdmin(h.id,l);n.signature&&await n.signature.apply();const w=Object.keys(y);h.userType(d),w.forEach(function(e){if("admin"!==e&&"betaTester"!==e&&"employee"!==e&&c.isObservable(h[e])&&!c.isPureComputed(h[e])){let t=y[e];"lastLogin"!==e&&"dateActivated"!==e||(t=new Date(t)),h[e](t)}}),n._close.raiseEvent(),await h.loadPlanDetails(),await h.loadSubscriptionDetails(),await h.loadOverageDetails()}(this):await async function(e){const n=e.userTypeField.input(),i={admin:n===t.ADMIN,betaTester:n===t.BETA,employee:n===t.EMPLOYEE,disabled:e._disabled,email:e.emailField.input(),exportStatus:e.exportStatusField.input(),username:e.usernameField.input().trim()},r={};for(const t of Object.keys(_)){const n=e[`${t} field`].input();let i;n!==o.NO&&e[`${t} toggle`].input()&&b(e[`${t} expirationField`].input())&&(i=E(A(e[`${t} expirationField`].input()))),r[t]={license:n,expiration:i}}i.subscriptionData=r;const a=await s.postUser(i);return e.signature&&await e.signature.apply(a.id),e._close.raiseEvent(a),console.log("Returning new user"),console.log(a),a}(this)}catch(r){console.log(r),n.formError(s.getErrorMessage(r))}finally{n.pending(!1)}},F.prototype.cancel=function(){this._close.raiseEvent()},F.prototype.detached=function(){for(const e of this._knockoutSubscriptions)e.dispose()},F}),define("Core/formatUtcDate",[],function(){"use strict";const e=new Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric"});return function(t){const n=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return e.format(n).replace(/, /g," ")}}),define("Views/Components/LicenseTracking/UserLicenseComponent",["Core/ReactInterop","knockout"],(e,t)=>{"use strict";class n extends e.Component{constructor({tag:e,selectedUser:n,appSettings:i}){super({tag:e,properties:t.pureComputed(()=>({userId:n()?.id,planCode:n()?.planCode?.(),graceExpires:i?.()?.standardLicenseGraceExpires}))})}}return n}),define("Views/Admin/Users/UserDetails",["../../../Core/createComputedProperty","../../../Core/defaultValue","../../../Core/Feature","../../../Core/formatDateTime","../../../Core/formatUtcDate","../../../Core/LicenseType","../../../Core/PlanCode","../../../Core/ReactInterop","../../../Core/Services","../../../Core/Units","../../Components/DeleteButton","../../Components/AddUserToTeam","../../Components/LicenseTracking/UserLicenseComponent","knockout","plugins/dialog","plugins/router","toastr","generated/Subscriptions","generated/getEnumKeys"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,b){"use strict";const y=Cesium.defined,w=(Cesium.DeveloperError,Cesium.Event),_=v.Subscriptions,x=b.getEnumKeys,S=v.SubscriptionToLabelShort;function T(d){const f=this;this._selectedUser=d;const m=p.pureComputed(function(){const e=f._selectedUser();return!!y(e)&&e.pending()});if(this.pending=m,this.canDelete=p.pureComputed(function(){if(!y(d()))return!1;const e=f._selectedUser();return!e.deleted()&&e.username()!==l.username()&&e.email()!==l.email()}),this.deleteButton=new u({confirmText:'<span class="bold">Delete user?</span><br>The user will no longer have access to the account, and all stories and assets owned by the user will also be deleted.<br><br><label class="control-label" for="delete-user-verify">Enter username to confirm</label><input id="delete-user-verify" class="form-control verify" type="text"><br>',pending:m,width:250,verify:function(e){return e===d().username()}}),this._delete=this.deleteButton.delete,this._edit=new w,this.deleted=e(d,"deleted",""),this.disabled=e(d,"disabled",""),this.disabledReason=e(d,"disabledReason",""),this.ignoreOverageUntil=e(d,"ignoreOverageUntil",""),this.ignoreUserOverage=e(d,"ignoreUserOverage",""),this.ignoreOverageText=p.pureComputed(()=>`Quota ignored until ${new Date(this.ignoreOverageUntil()).toLocaleDateString()}`),this.exportStatus=e(d,"exportStatus",""),this.id=e(d,"id",""),this.isTeam=e(d,"isTeam",!1),this.nameText=e(d,"username",""),this.emailText=e(d,"email",""),this.billingEmail=e(d,"billingEmail",""),this.userTypeText=e(d,"userTypeText",""),this.accountTypeText=e(d,"accountTypeText",""),this.lastLogIn=e(d,"lastLogIn",""),this.verified=e(d,"verified",!1),this.subscriptions=p.pureComputed(function(){const e=f._selectedUser(),t=y(e)?e.subscriptions():[],n=[];for(const i of x(_)){const e=t.find(e=>e.subscriptionName===_[i]);let a="",s=o.NO;y(e)&&y(e.expiration)&&(a=new Date(e.expiration),a=r(a)),y(e)&&(s=e.isEvaluation?o.EVALUATION:o.YES),n.push({label:`${S[i]} access`,expirationText:a,accessText:s})}return n}),this.subscriptionHtml=p.pureComputed(function(){const e=f._selectedUser();if(!y(e)||""===e.subscriptionText())return"";const t=e.subscriptionText();let n=`<span>${t}`;e.hasCustomPrice()&&(n+=` (custom: $${e.planPrice().toFixed(2)}`,/annual/i.test(t)?n+="/yr":n+="/mo",n+=")"),n+="</span>",""!==e.planStartText()&&(n+="<br/>",n+=`<span>Started ${e.planStartText()}</span>`),""!==e.planExpirationText()&&(n+="<br/>",n+=`<span>Expires ${e.planExpirationText()}</span>`);const i=e.planPendingChanges();if(y(i)){n+="<br/>",n+="<span>Pending changes:</span>",n+="<br/>";let t=`<span>${new Date(i.nextPlanStart).toLocaleDateString()} ${i.nextPlanName}`;e.isTeam()&&i.nextPlanCode===a.COMMUNITY&&(t=`<span>To be cancelled on ${new Date(i.nextPlanStart).toLocaleDateString()}`),n+=t,i.hasCustomPrice&&(n+=` (custom: $${i.nextPlanPrice.toFixed(2)}`,/annual/i.test(i.nextPlanName)?n+="/yr":n+="/mo",n+=")"),n+="</span>"}return n}),n.isEnabledForServer(n.Server.LICENSE_TRACKING)){const e=p.observable();l.getAppSettings().then(e),this.licenseSignature=new h({tag:"ion-admin-view-user-license-signature",selectedUser:d,appSettings:e})}n.isEnabledForServer(n.Server.USER_NOTES)&&(this.notes=new s.Component({tag:"ion-admin-user-notes",properties:p.pureComputed(()=>({userId:d()?.id}))})),this.previousEmails=e(d,"previousEmails",[]),this.disabledText=p.pureComputed(function(){return this.disabled()?"Disabled":"Enabled"},this),this.exportClass=p.pureComputed(function(){const e=this.exportStatus();return"PASSED"===e?"label-success":"FAILED"===e?"label-danger":"label-warning"},this),this.exportStatusText=p.pureComputed(function(){const e=this.exportStatus();return"PASSED"===e?"Passed export check":"FAILED"===e?"Failed export check":"Export status unchecked"},this),this.verifiedText=p.pureComputed(function(){return this.verified()?"Verified":"Not verified"},this);const g=e(d,"dateActivated",!1);this.dateActivated=p.pureComputed(function(){const e=g();return e?i(e):"-"}),this.lastLogIn=e(d,"lastLogInText","");const v=e(d,"quotaInBytes");this.storageQuotaText=p.pureComputed(function(){const e=v();return y(e)?c.bytesToString(e):"(unavailable)"}),this.hasCustomQuota=e(d,"hasCustomQuota",!1);const b=e(d,"streamingInBytes");this.streamingQuotaText=p.pureComputed(function(){const e=b();return y(e)?c.bytesToString(e):"(unavailable)"}),this.hasCustomStreaming=e(d,"hasCustomStreaming",!1);const T=e(d,"bingMapsSessions");this.bingQuotaText=p.pureComputed(function(){return t(T(),"(unavailable)")}),this.hasCustomBingMapsSessions=e(d,"hasCustomBingMapsSessions",!1);const A=e(d,"googleSessions");this.googleQuotaText=p.pureComputed(function(){return t(A(),"(unavailable)")}),this.hasCustomGoogleSessions=e(d,"hasCustomGoogleSessions",!1);const C=e(d,"geocodes");this.geocodeQuotaText=p.pureComputed(function(){return t(C(),"(unavailable)")}),this.hasCustomGeocodes=e(d,"hasCustomGeocodes",!1);const E=e(d,"clips");this.clipsQuotaText=p.pureComputed(function(){return t(E(),"(unavailable)")}),this.hasCustomClips=e(d,"hasCustomClips",!1),this.isRealityAnalysisEnabled=n.isEnabledForServer(n.User.REALITY_ANALYSIS);const k=e(d,"analysisMinutes");this.analysisHoursText=p.pureComputed(function(){const e=k();return y(e)?e/60:"(unavailable)"}),this.hasCustomAnalysis=e(d,"hasCustomAnalysisMinutes",!1);const I=e(d,"storageUsedInBytes");this.storageUsedText=p.pureComputed(function(){const e=I();return y(e)?c.bytesToString(e):"(unavailable)"}),this._userSubscription=d.subscribe(function(e){y(e)&&n.isEnabledForServer(n.Server.CESIUM_HOSTED_ION)&&(e.loadPlanDetails(),e.loadSubscriptionDetails(),e.loadOverageDetails())}),this.dataCenterLocation=e(d,"dataCenterLocation"),this.userDetailsRows=[{label:"ID",value:this.id},{label:"Username",value:this.nameText},{label:"Email",value:this.emailText},{label:"Previous emails",value:this.previousEmails},{label:"Billing email",value:this.billingEmail},{label:"User type",value:this.userTypeText},{label:"Account type",value:this.accountTypeText},{label:"Data center location",value:this.dataCenterLocation},{label:"Date Activated",value:this.dateActivated},{label:"Last Login",value:this.lastLogIn}],this.unselect=this.unselect.bind(this),this.sendVerificationEmail=this.sendVerificationEmail.bind(this),this.goToUserData=this.goToUserData.bind(this),this.dialogPending=p.observable(!1),this.isMultiFactorAuthenticationEnabled=n.isEnabledForServer(n.User.MULTI_FACTOR_AUTHENTICATION),this.multiFactorStatus=new s.Component({tag:"ion-authentication-factor-status",properties:p.pureComputed(function(){const e=d();return y(e)?{userId:p.unwrap(e.id),username:p.unwrap(e.username)}:void 0})}),this.debugAccess=new s.Component({tag:"ion-admin-debug-access",properties:p.pureComputed(function(){const e=d();return e?{userId:e.id}:{userId:void 0}})})}return Object.defineProperties(T.prototype,{selectedUser:{get:function(){return this._selectedUser}},delete:{get:function(){return this._delete}},edit:{get:function(){return this._edit}}}),T.prototype.unselect=function(){this.selectedUser(void 0)},T.prototype.editUser=function(){const e=this.selectedUser();this.edit.raiseEvent(e)},T.prototype.undeleteUser=function(){const e=new CustomEvent("undeleteUserEvent");document.dispatchEvent(e)},T.prototype.goToUserData=function(){const e=this._selectedUser();m.navigate(`/admin/userassets/${e.id}`,{trigger:!0})},T.prototype.addNewUserToTeam=async function(){const e=this.selectedUser();if(!this.dialogPending()){this.dialogPending("true");try{await f.show(new d(e.id))}catch(t){g.error(l.getErrorMessage(t))}finally{this.dialogPending(!1)}}},T.prototype.sendVerificationEmail=async function(){const e=this.selectedUser();try{await l.adminSendVerificationEmail(e.id),g.success("Verification email has been sent")}catch(t){g.error(l.getErrorMessage(t))}},T.prototype.destroy=function(){this._userSubscription.dispose()},T}),define("Views/Admin/Users/UserDetailsViewModel",["../../../Core/AppData","../../../Core/defaultValue","../../../Core/formatDateTime","../../../Core/formatUtcDate","../../../Core/Services","./UserType","./AccountType","knockout","toastr","moment","../../Components/DeleteButton","../../../Core/Feature"],function(e,t,n,i,r,o,a,s,l,c,u,d){"use strict";Cesium.Check;const h=Cesium.defined;Cesium.DeveloperError;function p(r){r=t(r,Cesium.Frozen.EMPTY_OBJECT);const l=new Date(t(r.lastLogIn,"0")),p=t(r.billingEmail,""),f=s.observable();r.admin?f(o.ADMIN):r.betaTester?f(o.BETA):r.employee?f(o.EMPLOYEE):f(o.USER);const m=s.observable();let g,v;r.isTeam?m(a.TEAM):m(a.USER),h(r.planExpiration)&&(g=new Date(r.planExpiration)),h(r.planStart)&&(v=new Date(r.planStart)),this.deleted=s.observable(r.deleted),this.dateActivated=new Date(r.dateActivated),this.dateActivatedText=n(this.dateActivated),this.id=r.id,this.lastLogIn=l,this.billingEmail=p,this.lastLogInText=n(l),this.userType=f,this.accountType=m,this.deleteButton=new u({confirmText:'<span class="bold">Delete user?</span><br>The user will no longer have access to the account, and all stories and assets owned by the user will also be deleted.<br><br><label class="control-label" for="delete-user-verify">Enter username to confirm</label><input id="delete-user-verify" class="form-control verify" type="text"><br>',hideLowerText:!0,disabled:this.deleted(),disabledText:"User is already deleted"}),this.cesiumHostedMode=d.isEnabledForServer(d.Server.CESIUM_HOSTED_ION),this.deleteButton.delete.addEventListener(()=>{const e=new CustomEvent("deleteUserEvent");document.dispatchEvent(e)}),this.fireUndeleteEvent=()=>{const e=new CustomEvent("undeleteUserEvent");document.dispatchEvent(e)},this.userTypeText=s.pureComputed(function(){return o.toString(f())});const b=c().subtract(1,"month").toDate();this.isActive=this.lastLogIn.getTime()>=b.getTime(),this.accountTypeText=s.pureComputed(function(){return a.toString(m())}),this.disabled=s.observable(r.disabled),this.exportStatus=s.observable(r.exportStatus),this.email=s.observable(r.isTeam?"":r.email),this.disabledReason=s.observable(r.disabledReason),this.ignoreOverageUntil=s.observable(r.ignoreOverageUntil),this.ignoreUserOverage=s.pureComputed(()=>h(this.ignoreOverageUntil())&&c().isBefore(this.ignoreOverageUntil())),this.quotaInBytes=s.observable(),this.storageUsedInBytes=s.observable(),this.streamingInBytes=s.observable(),this.bingMapsSessions=s.observable(),this.googleSessions=s.observable(),this.geocodes=s.observable(),this.clips=s.observable(),this.analysisMinutes=s.observable(),this.hasCustomAnalysisMinutes=s.observable(!1),this.planPrice=s.observable(),this.planPendingChanges=s.observable(),this.hasCustomQuota=s.observable(!1),this.hasCustomStreaming=s.observable(!1),this.hasCustomGeocodes=s.observable(!1),this.hasCustomClips=s.observable(!1),this.hasCustomBingMapsSessions=s.observable(!1),this.hasCustomGoogleSessions=s.observable(!1),this.hasCustomPrice=s.observable(!1),this.username=s.observable(r.username),this.isTeam=s.observable(r.isTeam),this.verified=s.observable(r.verified),this.subscriptionUuid=s.observable(r.subscriptionUuid),this.planCode=s.observable(r.planCode),this.subscriptionText=s.pureComputed(function(){const t=e.plans[this.planCode()];return h(t)?t.name:""},this),this.pending=s.observable(!1),this.subscriptions=s.observable([]),this.dataCenterLocation=s.observable(r.dataCenterLocation),g=s.observable(g),this.planExpiration=g,this.planExpirationText=s.pureComputed(function(){return h(g())?i(g()):""}),v=s.observable(v),this.planStart=v,this.planStartText=s.pureComputed(function(){return h(v())?n(new Date(v())):""}),this.previousEmails=t(r.previousEmails,[]),this._inactive=!1}return p.prototype.delete=async function(){const e=this.pending;try{e(!0),await r.deleteUser(this.id)}catch(t){l.error(r.getErrorMessage(t),"Failed to delete user")}finally{e(!1)}},p.prototype.undelete=async function(){const e=this.pending;try{e(!0),await r.undeleteUser(this.id),l.success(`Undeleted user with id: ${this.id}`)}catch(t){l.error(r.getErrorMessage(t),"Failed to undelete user")}finally{e(!1)}},p.prototype.loadPlanDetails=async function(){const e=this;try{const t=await r.getUserPlanDetails(this.id);return e.storageUsedInBytes(t.storage.used),e.quotaInBytes(t.storage.total),e.hasCustomQuota(t.hasCustomQuota),e.streamingInBytes(t.streamingInBytes),e.hasCustomStreaming(t.hasCustomStreaming),e.geocodes(t.geocodes),e.hasCustomGeocodes(t.hasCustomGeocodes),e.bingMapsSessions(t.bingMapsSessions),e.hasCustomBingMapsSessions(t.hasCustomBingMapsSessions),e.googleSessions(t.googleSessions),e.hasCustomGoogleSessions(t.hasCustomGoogleSessions),e.clips(t.clips),e.hasCustomClips(t.hasCustomClips),e.analysisMinutes(t.analysisMinutes),e.hasCustomAnalysisMinutes(t.hasCustomAnalysisMinutes),e.planExpiration(h(t.planExpiration)?new Date(t.planExpiration):void 0),e.planStart(t.planStart),e.planPrice(t.plan.price),e.hasCustomPrice(t.plan.hasCustomPrice),e.planPendingChanges(t.plan.pendingChanges),t}catch(t){e.storageUsedInBytes(void 0),e.quotaInBytes(void 0),e.hasCustomQuota(!1),e.streamingInBytes(void 0),e.hasCustomStreaming(!1),e.geocodes(void 0),e.hasCustomGeocodes(!1),e.clips(void 0),e.hasCustomClips(!1),e.bingMapsSessions(void 0),e.hasCustomBingMapsSessions(!1),e.googleSessions(void 0),e.hasCustomGoogleSessions(!1),e.planExpiration(void 0),e.planStart(void 0),e.planPrice(void 0),e.hasCustomPrice(!1),e.planPendingChanges(void 0)}},p.prototype.loadSubscriptionDetails=async function(){const e=await r.getUserSubscriptions(this.id);h(e)&&this.subscriptions(e)},p.prototype.loadOverageDetails=async function(){const e=await r.getUserOverage(this.id);h(e)&&this.ignoreOverageUntil(e.ignoreOverageUntil)},p}),define("Views/Admin/Users/UserFilterMessage",["plugins/dialog","../../../Core/AppData","Core/defaultValue","../../../Core/Feature","../../Components/Form/FormHelper","../../Components/Form/SelectInputOption","generated/Subscriptions","./UserType","./AccountType","knockout"],function(e,t,n,i,r,o,a,s,l,c){"use strict";Cesium.Check;const u=a.Subscriptions,d=a.SubscriptionToLabelShort;function h(e,a,h,p,f,m){const g=t.plans,v=[];for(const t in g)if(g.hasOwnProperty(t)){const n=g[t];v.push({name:n.name,code:t,selected:c.observable(e.includes(t))})}const b=[new o("All","ALL")];for(const t in s)s.hasOwnProperty(t)&&"string"==typeof s[t]&&b.push(new o(s.toString(s[t]),t));const y=[new o("All","ALL"),new o(s.toString(s.USER),"USER"),new o(s.toString(s.ADMIN),"ADMIN")],w=[new o("All","ALL"),new o(l.toString(l.USER),l.USER),new o(l.toString(l.TEAM),l.TEAM)],_=new r;this.plans=v,this.cesiumHostedMode=i.isEnabledForServer(i.Server.CESIUM_HOSTED_ION),this.userTypeField=_.createSelectInput({hasLabel:!1,options:this.cesiumHostedMode?b:y,value:n(a,"ALL"),required:!0}),this.accountTypeField=_.createSelectInput({hasLabel:!1,options:w,value:n(p,l.USERS),required:!0}),this.selectedProducts=c.observableArray(h),this.allProducts=Object.values(u).map(e=>({label:d[e],value:e})),this.deleted=c.observable(m),this.active=c.observable(f)}return h.prototype.apply=function(){let t=this.userTypeField.input(),n=this.accountTypeField.input();"ALL"===t&&(t=void 0),"ALL"===n&&(n=void 0),e.close(this,{selectedPlans:this.plans.filter(function(e){return e.selected()}).map(function(e){return e.code}),selectedUserType:t,selectedAccountType:n,productFilter:this.selectedProducts(),isDeleted:this.deleted(),isActive:this.active()})},h.prototype.close=function(){e.close(this,void 0)},h}),define("text!Views/Help/UsersShellHelp.md",[],function(){return'View, add, edit, and delete user accounts. Click a user in the list to **see account details** on the right side of the screen.\n\nAn account is **verified** if the email address has been confirmed.\n\nIf an account is **disabled**, it cannot be used to access Cesium ion.\n\n**Search for a user by id** using the syntax `id:123`\n\n**Add a user** by clicking <label class="btn btn-primary btn-xs btn-no-action">New User</label>.\n\n**Edit a user** by clicking a user in the list, then clicking the **Edit** button at the top of the right panel.\n\n**Delete a user** by clicking a user in the list, then clicking the **Delete** button at the top of the right panel.\n'}),define("Views/Admin/Users/UsersShell",["plugins/dialog","./AddEditUser","./UserDetails","./UserDetailsViewModel","./UserFilterMessage","./UserType","./AccountType","Core/isStringEmptyOrWhitespace","Core/isViewportMobile","Core/defaultValue","Core/find","Core/PageLoadingState","Core/Resource","Core/Services","Core/SortOrder","Core/Validation","Core/ReactInterop","text!Views/Help/UsersShellHelp.md","Views/Components/ContextualHelp","plugins/router","knockout","toastr","Core/Feature","moment","DOMPurify"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,w,_,x,S,T){"use strict";const A=Cesium.defined;function C(){const e=w.observable(),r=w.observableArray([]),o=new n(e),a=w.observable(o),s=w.observable(!1),l=w.observable(),c=w.observable(),u=w.observable(d.IN_PROGRESS);this.selectedPlans=[],this.selectedUserType=void 0,this.selectedAccountType=void 0,this.productFilter=[],this.hasFilters=w.observable(!1),this.isDeleted=!1,this.isActive=!1,this.totalCount=w.observable(),this.selectedItem=e,this.items=r,this.disabled=s,this._page=1,this.nextLink=l,this.previousLink=c,this.hasNext=w.pureComputed(function(){return A(l())}),this.hasPrevious=w.pureComputed(function(){return A(c())}),this.loadState=u,this.isError=w.pureComputed(function(){return u()===d.ERROR}),this.isReady=w.pureComputed(function(){return u()===d.READY}),this.isInProgress=w.pureComputed(function(){return u()===d.IN_PROGRESS}),this.cesiumHostedMode=x.isEnabledForServer(x.Server.CESIUM_HOSTED_ION),this.detailsPane=o,this.rightPane=a,this.contextualHelp=new b(v,".pane-left.dashboard-pane"),this.showDetails=w.pureComputed(function(){return this.rightPane()!==this.detailsPane||A(this.selectedItem())},this),this._sortedBy=w.observable("username"),this._sortOrder=w.observable(f.ASCENDING),this._hashId=void 0,this._resultPromise=void 0,this.searchText=w.observable(""),this._throttledSearchText=w.pureComputed(this.searchText).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:400}}),this.hasNoResults=w.pureComputed(function(){return 0===r().length}),this._removeEditListener=o.edit.addEventListener(function(e){const n=new t(e),l=n.close.addEventListener(function(e){A(e)&&r.push(new i(e)),a(o),s(!1),l()});a(n),s(!0)}),this.userCountVersion=w.observable(0),this.adminUserCount=new g.Component({tag:"ion-admin-user-count",properties:w.pureComputed(()=>({version:this.userCountVersion()}))}),this._removeDeleteEventListener=o.delete.addEventListener(this.deleteSelected,this),this._selfHostedDeleteEventHandler=()=>{this.deleteSelected()},document.addEventListener("deleteUserEvent",this._selfHostedDeleteEventHandler),this._userUndeleteHandler=()=>{this.undeleteSelected()},document.addEventListener("undeleteUserEvent",this._userUndeleteHandler),this.createTeamButton=new g.Component({tag:"ion-admin-create-team-button",eventListeners:{"team-created":e=>{this.onNewUser(e.detail)}}})}return C.prototype.activate=async function(e,t){if(A(e)&&"string"==typeof e&&(e=m.validNumber(e)?Number(e):void 0),this._hashId=e,A(t)){if(A(t.page)&&m.validNumber(t.page)&&(this._page=Math.max(Number(t.page),1)),A(t.sortOrder)&&this._sortOrder(t.sortOrder),A(t.sortBy)&&this._sortedBy(t.sortBy),A(t.search)&&this.searchText(t.search),A(t.plan)){let e=t.plan;Array.isArray(e)||(e=[e]),this.selectedPlans=e}A(t.type)&&A(o[t.type])&&(this.selectedUserType=t.type),A(t.deleted)&&(this.isDeleted="true"===t.deleted),A(t.active)&&(this.isActive="true"===t.active),A(t.accountType)&&A(a[t.accountType])&&(this.selectedAccountType=t.accountType),A(t.productFilter)&&(this.productFilter=t.productFilter)}const n=this;await this.refreshTable(),n._searchSubscription=n._throttledSearchText.subscribe(function(){n._page=1,n.refreshTable()}),n._routeSubscription=n.selectedItem.subscribe(function(){n._updateUri()})},C.prototype.onNewUser=function(e){_.success(T.sanitize(`User ${e.username} was added`)),this.searchText(`id:${e.id}`)},C.prototype.createNew=function(){const e=new t,n=this,i=e.close.addEventListener(function(e){A(e)&&n.onNewUser(e),this.rightPane(this.detailsPane),this.disabled(!1),i()},this);this.rightPane(e),this.disabled(!0)},C.prototype._loadItems=async function(e){const t=this;this.loadState(d.IN_PROGRESS);try{const n=e();this._resultPromise=n;const r=await n;if(n!==t._resultPromise)return;t.items.removeAll();for(let e=0;e<r.items.length;e++)t.items.push(new i(r.items[e]));if(t.nextLink(r.links.next),t.previousLink(r.links.prev),!l())if(A(t._hashId)){const e=t.items(),n=u(e,function(e){return e.id===t._hashId});t.selectedItem(c(n,e[0])),t._hashId=void 0}else t.selectedItem(t.items()[0]);t._updateUri(),t.totalCount(r.total),t.loadState(d.READY)}catch(n){t.loadState(d.ERROR)}},C.prototype._updateUri=function(){let e="/admin/users";A(this.selectedItem())&&(e+=`/${this.selectedItem().id}`);const t=new h({url:e+window.location.search}),n=t.queryParameters;n.page=this._page,n.sortBy=this._sortedBy(),n.sortOrder=this._sortOrder(),this.selectedPlans.length>0?n.plan=this.selectedPlans:delete n.plan,A(this.selectedUserType)?n.type=this.selectedUserType:delete n.type,A(this.selectedAccountType)?n.accountType=this.selectedAccountType:delete n.accountType,A(this.productFilter)&&this.productFilter.length>0?n.productFilter=this.productFilter:delete n.productFilter,A(this.isDeleted)?n.deleted=this.isDeleted:delete n.isDeleted,A(this.isActive)?n.active=this.isActive:delete n.isActive;const i=this.searchText();s(i)?delete n.search:n.search=i,y.navigate(t.url,{replace:!0,trigger:!1})},C.prototype.refreshTable=function(){const e=this;return this._loadItems(async function(){const t=e.searchText(),n=s(t)?void 0:t,i=e._sortedBy(),r=e._sortOrder(),o=e.selectedPlans,a=e.selectedUserType,l=e.selectedAccountType,c=e.productFilter,u=e.isDeleted;let d;e.isActive&&(d=S().subtract(1,"month").toISOString()),e.hasFilters(o.length>0||A(a)||c&&c.length>0||A(l));const h=await p.getUsers({page:e._page,search:n,sortBy:i,sortOrder:r,plan:o,type:a,accountType:l,productFilter:c,isDeleted:u,loggedInSince:d});return 1!==e._page&&0===h.items.length?(e._page=1,await p.getUsers({page:e._page,search:n,sortBy:i,sortOrder:r,plan:o,type:a,productFilter:c,accountType:l,isDeleted:u,loggedInSince:d})):(e.userCountVersion(e.userCountVersion()+1),h)})},C.prototype.loadPrevious=function(){if(!this.hasPrevious())return;const e=this;return this._loadItems(async function(){const t=await p.getNextOrPreviousPage(e.previousLink());return e._page--,t})},C.prototype.loadNext=function(){if(!this.hasNext())return;const e=this;return this._loadItems(async function(){const t=await p.getNextOrPreviousPage(e.nextLink());return e._page++,t})},C.prototype.deleteSelected=async function(){const e=this.selectedItem();if(!A(e))return Promise.resolve();return await e.delete(),this.refreshTable()},C.prototype.undeleteSelected=async function(){const e=this.selectedItem();if(!A(e))return Promise.resolve();return await e.undelete(),this.refreshTable()},C.prototype.sortStatus=function(e){const t=this;return w.pureComputed(function(){return t._sortedBy()===e?t._sortOrder()===f.ASCENDING?"fa-sort-desc":"fa-sort-asc":"fa-sort"})},C.prototype.sortBy=function(e){const t=this;return function(){return t._sortedBy()!==e?(t._sortedBy(e),t._sortOrder(f.ASCENDING)):t._sortOrder(t._sortOrder()===f.ASCENDING?f.DESCENDING:f.ASCENDING),t.refreshTable()}},C.prototype.showFilterMessage=async function(){const t=this,n=await e.show(new r(this.selectedPlans,this.selectedUserType,this.productFilter,this.selectedAccountType,this.isActive,this.isDeleted));if(A(n))return t.selectedPlans=n.selectedPlans,t.selectedUserType=n.selectedUserType,t.selectedAccountType=n.selectedAccountType,t.productFilter=n.productFilter,t.isDeleted=n.isDeleted,t.isActive=n.isActive,t.refreshTable()},C.prototype.clearFilters=function(){return this.selectedPlans=[],this.selectedUserType=void 0,this.selectedAccountType=void 0,this.productFilter=[],this.refreshTable()},C.prototype.detached=function(){this._removeEditListener(),this._removeDeleteEventListener(),document.removeEventListener("deleteUserEvent",this._selfHostedDeleteEventHandler),document.removeEventListener("undeleteUserEvent",this._userUndeleteHandler),A(this._searchSubscription)&&this._searchSubscription.dispose(),A(this._routeSubscription)&&this._routeSubscription.dispose()},C}),define("Core/JobStatus",[],function(){"use strict";const e={NOT_STARTED:"NOT_STARTED",QUEUED:"QUEUED",IN_PROGRESS:"IN_PROGRESS",COMPLETE:"COMPLETE",ERROR:"ERROR"},t={[e.NOT_STARTED]:"Not Started",[e.QUEUED]:"Queued",[e.IN_PROGRESS]:"In progress",[e.COMPLETE]:"Completed",[e.ERROR]:"Failed"};return e.toString=function(e){return t[e]},Object.freeze(e)}),define("Views/Components/AssetExports/AssetExportsDetailsDialog",["Core/JobStatus","knockout","plugins/dialog"],function(e,t,n){"use strict";function i(n){this.id=n.id,this.assetId=n.assetId,this.status=t.pureComputed(()=>e.toString(n.status())),this.exportSize=n.exportSize,this.dateAdded=n.dateAdded,this.location=n.location}return i.prototype.close=function(){n.close(this,void 0)},i}),define("Views/Components/AssetExports/AssetExportsViewModel",["Core/defaultValue","Core/formatDateTime","Core/Units","Core/JobStatus","knockout"],function(e,t,n,i,r){"use strict";const o=Cesium.defined,a=Cesium.DeveloperError;function s(s){if(!o(s))throw new a("assetExportsModel is required");const l=r.observable(s.status),c=r.observable(n.bytesToString(s.bytesExported)),u=r.pureComputed(function(){return l()===i.COMPLETE?"fa fa-check":l()===i.ERROR?"fa fa-warning":"fa fa-spinner fa-pulse fa-spin"}),d=new Date(s.dateAdded),h=s.to.type,p=s.id,f=s.assetsId;if(this._id=p,this._assetId=f,this._status=l,this._exportSize=c,this._dateAdded=t(d),this._statusClass=u,"S3"===h){const{bucket:e,prefix:t}=s.to;this.location=`s3://${e}/${t}`}else if("AZURE"===h){const{account:t,container:n,prefix:i,endpoint:r,forcePathStyle:a}=s.to;let l=e(r,`https://${t}.blob.core.windows.net`);a&&(l.endsWith("/")||(l+="/"),l+=t),l+=`/${n}`,o(i)&&(l+=`/${i}`),this.location=l}}return Object.defineProperties(s.prototype,{id:{get:function(){return this._id}},assetId:{get:function(){return this._assetId}},status:{get:function(){return this._status}},exportSize:{get:function(){return this._exportSize}},dateAdded:{get:function(){return this._dateAdded}},statusClass:{get:function(){return this._statusClass}}}),s}),define("Views/Components/AssetExports/AssetExportsShell",["Core/PageLoadingState","Core/Services","Core/JobStatus","Core/AssetStatus","Core/ReactInterop","./AssetExportsViewModel","./AssetExportsDetailsDialog","moment","knockout","plugins/dialog"],function(e,t,n,i,r,o,a,s,l,c){"use strict";const u=Cesium.defined;function d(){const t=l.observableArray([]),n=l.observable(),i=l.observable(!1),a=l.observable(!1),c=l.observableArray([]),d=l.observable(e.IN_PROGRESS);this.items=c,this.exports=t,this.loadState=d,this.isError=l.pureComputed(function(){return d()===e.ERROR}),this.isReady=l.pureComputed(function(){return d()===e.READY}),this.isInProgress=l.pureComputed(function(){return d()===e.IN_PROGRESS}),this.assetId=n,this.statuses=[],this.isExportable=i,this.pending=l.observable(!1),this.error=l.observable();const p=this;this.hasError=l.pureComputed(function(){return u(p.error())}),this.hasExports=l.pureComputed(function(){return t().length>0}),this.hasTilingError=a;const f=l.observable();this._overStreamingQuotaUntil=f,this.exportDisabled=l.pureComputed(function(){const e=f();return u(e)&&e.isAfter(s())}),this.exportButton=new r.Component({tag:"ion-asset-export-button",properties:l.pureComputed(function(){return{disabled:p.exportDisabled(),assetId:p.assetId()}}),eventListeners:{assetExported:function(e){const t=new o(e.detail);p.exports.push(t),p.statuses.push(t.status()),h(p)}}})}function h(e){if(e.statuses.includes(n.IN_PROGRESS)||e.statuses.includes(n.NOT_STARTED)||e.statuses.includes(n.QUEUED)){const i=async function(){try{const n=[],i=(await t.getAssetExports(e.assetId())).items,r=i.length;let a;for(a=0;a<r;a++){const e=new o(i[a]);n.push(e)}e.exports(n),e.statuses=n.map(e=>e.status())}finally{[n.IN_PROGRESS,n.NOT_STARTED,n.QUEUED].some(t=>e.statuses.includes(t))&&setTimeout(i,3e3)}};i()}}return d.prototype.setAsset=async function(e){const r=this;if(r.hasTilingError(!1),!u(e))return;const a=await t.getStorage();if(this._overStreamingQuotaUntil(a.overStreamingQuotaUntil?s(a.overStreamingQuotaUntil):void 0),r.isExportable(e.isExportable()),!r.isExportable())return;if(e.status()===i.ERROR||e.status()===i.DATA_ERROR)return void r.hasTilingError(!0);const l=[];r.pending(!0);try{r.assetId(e.id);const i=(await t.getAssetExports(e.id)).items,a=i.length;let s;for(s=0;s<a;s++){const e=new o(i[s]);l.push(e)}r.exports(l),r.statuses=l.map(e=>e.status()),[n.IN_PROGRESS,n.QUEUED,n.NOT_STARTED].some(e=>r.statuses.includes(e))&&h(r)}catch(c){console.log(c),r.error(t.getError(c).message)}finally{r.pending(!1)}},d.prototype.showDetails=function(){try{const e=this;c.show(new a(e))}catch(e){console.log(e)}},d}),define("Views/Components/Form/RadioInputOption",["knockout"],function(e){"use strict";Cesium.Check;const t=Cesium.defined;return function(n,i,r){this.displayText=n,this.value=i,this.image=r,this.hasImage=t(r),this.imageIsIcon=/^fa-/g.test(r),this.focus=e.observable(!1)}}),define("Views/Components/LicenseTracking/AppSettings",["Core/ReactInterop","Core/Services"],(e,t)=>{"use strict";return e.createPage("ion-license-tracking-app-settings",{eventListeners:{settingsChanged:()=>t.refreshAppData()},onActivate(e,t){e.query=t}})}),define("Views/Dashboard/Archives/Create",["Core/ReactInterop"],function(e){"use strict";const t=Cesium.defined;return class{constructor(){this.element=void 0}getView(){return this.element=e.createElement("ion-create-clip-page"),this.element}activate(e){if(!t(e)||!t(e.downloadType))return;const n=e.downloadType;"FULL_ARCHIVE"!==n&&"CLIP_3D_TILES"!==n&&"CLIP_IMAGERY_TERRAIN"!==n||this.element.setWizardData({downloadType:e.downloadType,step:"SELECT_ASSETS"})}}}),define("Views/Dashboard/Archives/List",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-clips-page",{onActivate(e,t){e.query=t}})}),define("Views/Dashboard/Assets/AnalyzeAsset",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-analyze-asset-page")}),define("text!Snippets/Sandcastle.html",[],function(){return'<style>\n  @import url(../templates/bucket.css);\n</style>\n<div id="cesiumContainer" class="fullSize"></div>\n<div id="loadingOverlay">\n  <h1>Loading...</h1>\n</div>\n<div id="toolbar"></div>\n'}),define("Views/Dashboard/Assets/AssetDetails",["../../../Core/AssetStatus","../../../Core/AssetType","Core/defaultValue","../../../Core/Feature","../../../Core/isStringEmptyOrWhitespace","../../../Core/ReactInterop","../../../Core/Services","../../../Core/JobStatus","../../Components/AssetConfigurationTable","../../Components/AssetSourcesTable","../../Components/AssetViewer","../../Components/ClickEditField","../../Components/DeleteButton","../../Components/LabelPicker","../../Components/Form/FormHelper","../../Components/ArchiveProgressBar","../../Components/AssetExports/AssetExportsShell","../getRemoveAssetWarning","jquery","knockout","plugins/router","text!Snippets/Sandcastle.html"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,w,_){"use strict";Cesium.Check;const x=Cesium.defined,S=(Cesium.DeveloperError,Cesium.Event),T={setAsset(){}};function A(b,w,A){this.unselect=n(A,function(){}),this._selectedAsset=b,this._assetViewer=new u(b),this._subscription=void 0;const C=new f;this.areAssetArchivesEnabled=i.isEnabledForServer(i.Server.ASSET_ARCHIVES_FULL),this.areLabelsEnabled=i.isEnabledForServer(i.Server.LABELS),this.isPublicInternetAccessEnabled=i.isEnabledForServer(i.Server.PUBLIC_INTERNET_ACCESS),this.sourcesTable=new c,this.configurationTable=new l,this.showSourcesTab=y.pureComputed(function(){if(!i.isEnabledForServer(i.Server.ASSET_SOURCES))return!1;const t=b();if(!x(t))return!1;const n=t.status();return!t.isPremium&&n!==e.AWAITING_FILES&&i.isEnabledForServer(i.Server.ASSET_SOURCES)}),this.showExportsTab=y.pureComputed(function(){if(!i.isEnabledForServer(i.Server.ASSET_EXPORT_S3)&&!i.isEnabledForServer(i.Server.ASSET_EXPORT_AZURE))return!1;const t=b();if(!x(t))return!1;const n=t.status();return!t.isPremium&&n!==e.AWAITING_FILES}),this.assetExportsShell=i.isEnabledForServer(i.Server.ASSET_EXPORT_S3)||i.isEnabledForServer(i.Server.ASSET_EXPORT_AZURE)?new g:T;const E=this;this.tabsCss=y.pureComputed(function(){switch([E.showSourcesTab(),E.showExportsTab()].reduce((e,t)=>t?e+1:e,0)){case 0:return"col-xs-12";case 1:return"col-xs-6";case 2:return"col-xs-4"}}),this.sourcesText=y.pureComputed(function(){return E.isExternal()?"Configuration":"Source Files"}),this._enableEdit=y.pureComputed(function(){const e=b();return x(e)&&!e.isPremium});const k=y.pureComputed(function(){const e=b();return!!x(e)&&e._pending()});this._pending=k,this._nameField=new d({label:"Name",type:"text",pending:k,input:y.pureComputed({read:function(){const e=b();return x(e)?e.name():""},write:function(e){const t=b();x(t)&&t.name()!==e&&!r(e)&&t.saveAttribute("name",e)}})}),this._archiveToggled=y.pureComputed(function(){const e=b();return!!x(e)&&e.archiveToggled()});const I=y.pureComputed(function(){const e=b();return(!x(e)||!e.archiveToggled())&&(i.isEnabledForServer(i.Server.BILLING)&&a.storageUsed()>a.quotaInBytes())});this._archiveToggleField=C.createToggle({label:"Make available for download",helperText:y.pureComputed(function(){if(I())return"Upgrade your account or reduce storage to enable this download";const e=b();return x(e)&&e.archiveToggled()&&e.archiveStatus()===s.COMPLETE?`<a href="${a.apiEndpoint}v1/archives/${e.archiveId()}/download"\n                   target="_blank"\n                   rel="noopener"\n                   ><span class="fa fa-file-archive-o"></span> Download ${t=E.nameText(),Object.assign(document.createElement("div"),{textContent:t}).innerHTML}.zip</a>`:"";var t}),disabled:I,input:y.pureComputed({read:function(){const e=b();return!!x(e)&&e.archiveToggled()},write:function(e){const t=b();x(t)&&t.isArchivable()&&t.archiveToggled()!==e&&t.saveAttribute("archiveToggled",e)}})}),this.descriptionText=y.pureComputed({read:function(){const e=b();return x(e)?e.description():""},write:function(e){const t=b();x(t)&&t.description()!==e&&t.saveAttribute("description",e)}});const P=y.pureComputed({read:function(){const e=b();if(x(e))return e.labels()},write:function(e){b().saveAttribute("labels",e)}});this.labels=P,this.attributionText=y.pureComputed({read:function(){const e=b();return x(e)?e.attribution():""},write:function(e){const t=b();x(t)&&t.attribution()!==e&&t.saveAttribute("attribution",e)}}),this.attributionHtml=y.pureComputed(function(){const e=b();let t="";return x(e)&&(t=e.attributionHtml()),r(t)?"This asset has no attribution":t}),this.edit=new S,this.labelPicker=new p(P,"left","right"),this.transformEditorDisabled=y.pureComputed(function(){const t=b();return!x(t)||(t.isPremium||t.isExternal||t.status()!==e.COMPLETE||!t.movable())}),this.transformEditorTitle=y.pureComputed(function(){const t=b();if(x(t)){if(t.status()!==e.COMPLETE)return"The location of this asset cannot be adjusted until tiling is complete";if(t.isPremium||t.isExternal||!t.movable())return"This asset can not be relocated"}return""});const D=y.pureComputed(function(){const e=b();return!x(e)||e.deleteDisabled()});this._deleteButton=new h({confirmText:v.bind(null,b),width:200,pending:k,disabled:D,disabledText:function(){const e=b();return x(e)?e.deleteDisabledText():""}}),this._isPremium=y.pureComputed(function(){const e=b();return!!x(e)&&e.isPremium}),this._isExternal=y.pureComputed(function(){const e=b();return!!x(e)&&e.isExternal}),this._isArchivable=y.pureComputed(function(){const e=b();return!!x(e)&&e.isArchivable()}),this._nameText=y.pureComputed(function(){const e=b();return x(e)?e.name():""}),this.assetId=y.pureComputed(function(){const e=b();return x(e)?e.id:""}),this._archiveStatus=y.pureComputed(function(){const e=b();return x(e)?e.archiveStatus():""}),this._archiveError=y.pureComputed(function(){const e=b();return!!x(e)&&e.archiveStatus()===s.ERROR}),this._bytesArchived=y.pureComputed(function(){const e=b();return x(e)?e.bytesArchived():""}),this._progressMessage=y.pureComputed(function(){const t=b();return x(t)?t.status()===e.AWAITING_FILES||t.status()===e.IN_PROGRESS||t.status()===e.NOT_STARTED?"Waiting for asset to finish tiling":x(t.archiveProgressMessage())?t.archiveProgressMessage():"Archiving":""}),this.progressBar=new m(this.bytesArchived,this.progressMessage),this._fileSize=y.pureComputed(function(){const e=b();return!x(e)||e.isPremium||e.isExternal?"-":e.fileSize()}),this._descriptionHtml=y.pureComputed(function(){const e=b();return x(e)?e.descriptionHtml():""});const O=y.pureComputed(function(){const e=b();return x(e)?e.code:""});this._code=O,this.codeHtml=y.pureComputed(function(){const e=b();return x(e)?e.codeHtml:""}),this.sandcastleUrl=y.pureComputed(function(){const e=b();if(x(e)){return`${"https://sandcastle.cesium.com"}?src=Hello%20World.html&label=Showcases&code=${window.btoa(JSON.stringify({code:e.sandcastleExample(),html:_}))}`}return""}),this.setLabel=w,this.isModel=y.pureComputed(function(){const e=b();return!!x(e)&&e.type===t.GLTF}),this.canInspect=y.pureComputed(function(){const e=b();return x(e)&&(e.type===t.GLTF||e.type===t["3DTILES"])});let M=[];"https://api.ion.test:8084/"===a.apiEndpoint?M=[4]:"https://api-staging.cesium.com/"===a.apiEndpoint||"https://api.ion-staging.cesium.com/"===a.apiEndpoint?M=[66,67]:"https://api.cesium.com/"!==a.apiEndpoint&&"https://api.ion.cesium.com/"!==a.apiEndpoint||(M=[96918,96917,96916,96914,96913,96912,96892,96911,96888,97219,96910,97187,97078,97224,97216,97173,97084,97085,97225,97087,97088,97091,96921,96863,97228,97166,97095,97096,142312,154717]),this.isVriconPromotionAsset=y.pureComputed(function(){const e=b();return x(e)&&i.isEnabledForServer(i.Server.VRICON_PROMOTION)&&-1!==M.indexOf(e.id)}),this.showAnalyzeButton=y.pureComputed(function(){const e=b();return!!e&&(i.isEnabledForUser(i.User.REALITY_ANALYSIS)&&!e.isPremium)}),this.analyzeButton=new o.Component({tag:"ion-analyze-asset-button",properties:y.pureComputed(function(){const e=b();return e?{assetId:e.id,analyzable:e.analyzable()}:{assetId:void 0,analyzable:!1}})})}return Object.defineProperties(A.prototype,{selectedAsset:{get:function(){return this._selectedAsset}},delete:{get:function(){return this._deleteButton.delete}},enableEdit:{get:function(){return this._enableEdit}},deleteButton:{get:function(){return this._deleteButton}},assetViewer:{get:function(){return this._assetViewer}},nameField:{get:function(){return this._nameField}},archiveToggleField:{get:function(){return this._archiveToggleField}},pending:{get:function(){return this._pending}},isPremium:{get:function(){return this._isPremium}},isExternal:{get:function(){return this._isExternal}},isArchivable:{get:function(){return this._isArchivable}},nameText:{get:function(){return this._nameText}},descriptionHtml:{get:function(){return this._descriptionHtml}},fileSize:{get:function(){return this._fileSize}},code:{get:function(){return this._code}},archiveStatus:{get:function(){return this._archiveStatus}},bytesArchived:{get:function(){return this._bytesArchived}},progressMessage:{get:function(){return this._progressMessage}},archiveToggled:{get:function(){return this._archiveToggled}},archiveError:{get:function(){return this._archiveError}}}),A.prototype.compositionComplete=function(){const e=this,t=b("a[data-toggle=tab].sources-tab");b("a[data-toggle=tab]").on("shown.bs.tab",function(n){const i=n.target===t.get(0);if(e._sourcesTabActive=i,i){e._selectedAsset().isExternal?e.configurationTable.setAsset(e._selectedAsset()):e.sourcesTable.setAsset(e._selectedAsset())}});const n=b("a[data-toggle=tab].exports-tab");let i;function r(t){x(i)&&i.onUnselect(),i=t,e.showSourcesTab()||e.showExportsTab()||b("a[data-toggle=tab].info-tab").trigger("click"),x(t)&&(t.onSelect(),e._sourcesTabActive?t.isExternal?e.configurationTable.setAsset(t):e.sourcesTable.setAsset(t):e._exportsTabActive&&e.assetExportsShell.setAsset(t))}b("a[data-toggle=tab]").on("shown.bs.tab",function(t){const i=t.target===n.get(0);e._exportsTabActive=i,i&&e.assetExportsShell.setAsset(e._selectedAsset())}),this._subscription=this._selectedAsset.subscribe(r),r(e._selectedAsset())},A.prototype.openTransformEditor=function(){const e=this.selectedAsset();w.navigate(`tilesetlocationeditor/${e.id}`)},A.prototype.detached=function(){x(this._subscription)&&(this._subscription.dispose(),this._subscription=void 0)},A});var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,i={},r={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var i,o;switch(n=n||{},r.util.type(t)){case"Object":if(o=r.util.objId(t),n[o])return n[o];for(var a in i={},n[o]=i,t)t.hasOwnProperty(a)&&(i[a]=e(t[a],n));return i;case"Array":return o=r.util.objId(t),n[o]?n[o]:(i=[],n[o]=i,t.forEach(function(t,r){i[r]=e(t,n)}),i);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if(document.currentScript&&"SCRIPT"===document.currentScript.tagName)return document.currentScript;try{throw new Error}catch(i){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(i.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var i="no-"+t;e;){var r=e.classList;if(r.contains(t))return!0;if(r.contains(i))return!1;e=e.parentElement}return!!n}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var i in t)n[i]=t[i];return n},insertBefore:function(e,t,n,i){var o=(i=i||r.languages)[e],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=o[s])}var c=i[e];return i[e]=a,r.languages.DFS(r.languages,function(t,n){n===c&&t!=e&&(this[t]=a)}),a},DFS:function e(t,n,i,o){o=o||{};var a=r.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],i||s);var l=t[s],c=r.util.type(l);"Object"!==c||o[a(l)]?"Array"!==c||o[a(l)]||(o[a(l)]=!0,e(l,n,s,o)):(o[a(l)]=!0,e(l,n,null,o))}}},plugins:{},highlightAll:function(e,t){r.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var i={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",i),i.elements=Array.prototype.slice.apply(i.container.querySelectorAll(i.selector)),r.hooks.run("before-all-elements-highlight",i);for(var o,a=0;o=i.elements[a++];)r.highlightElement(o,!0===t,i.callback)},highlightElement:function(t,n,i){var o=r.util.getLanguage(t),a=r.languages[o];r.util.setLanguage(t,o);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&r.util.setLanguage(s,o);var l={element:t,language:o,grammar:a,code:t.textContent};function c(e){l.highlightedCode=e,r.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,r.hooks.run("after-highlight",l),r.hooks.run("complete",l),i&&i.call(l.element)}if(r.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return r.hooks.run("complete",l),void(i&&i.call(l.element));if(r.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var u=new Worker(r.filename);u.onmessage=function(e){c(e.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(r.highlight(l.code,l.grammar,l.language));else c(r.util.encode(l.code))},highlight:function(e,t,n){var i={code:e,grammar:t,language:n};if(r.hooks.run("before-tokenize",i),!i.grammar)throw new Error('The language "'+i.language+'" has no grammar.');return i.tokens=r.tokenize(i.code,i.grammar),r.hooks.run("after-tokenize",i),o.stringify(r.util.encode(i.tokens),i.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var i in n)t[i]=n[i];delete t.rest}var r=new l;return c(r,r.head,e),s(e,r,t,r.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(r)},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var i,o=0;i=n[o++];)i(t)}},Token:o};function o(e,t,n,i){this.type=e,this.content=t,this.alias=n,this.length=0|(i||"").length}function a(e,t,n,i){e.lastIndex=t;var r=e.exec(n);if(r&&i&&r[1]){var o=r[1].length;r.index+=o,r[0]=r[0].slice(o)}return r}function s(e,t,n,i,l,d){for(var h in n)if(n.hasOwnProperty(h)&&n[h]){var p=n[h];p=Array.isArray(p)?p:[p];for(var f=0;f<p.length;++f){if(d&&d.cause==h+","+f)return;var m=p[f],g=m.inside,v=!!m.lookbehind,b=!!m.greedy,y=m.alias;if(b&&!m.pattern.global){var w=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,w+"g")}for(var _=m.pattern||m,x=i.next,S=l;x!==t.tail&&!(d&&S>=d.reach);S+=x.value.length,x=x.next){var T=x.value;if(t.length>e.length)return;if(!(T instanceof o)){var A,C=1;if(b){if(!(A=a(_,S,e,v))||A.index>=e.length)break;var E=A.index,k=A.index+A[0].length,I=S;for(I+=x.value.length;E>=I;)I+=(x=x.next).value.length;if(S=I-=x.value.length,x.value instanceof o)continue;for(var P=x;P!==t.tail&&(I<k||"string"==typeof P.value);P=P.next)C++,I+=P.value.length;C--,T=e.slice(S,I),A.index-=S}else if(!(A=a(_,0,T,v)))continue;E=A.index;var D=A[0],O=T.slice(0,E),M=T.slice(E+D.length),L=S+T.length;d&&L>d.reach&&(d.reach=L);var R=x.prev;if(O&&(R=c(t,R,O),S+=O.length),u(t,R,C),x=c(t,R,new o(h,g?r.tokenize(D,g):D,y,D)),M&&c(t,x,M),C>1){var N={cause:h+","+f,reach:L};s(e,t,n,x.prev,S,N),d&&N.reach>d.reach&&(d.reach=N.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var i=t.next,r={value:n,prev:t,next:i};return t.next=r,i.prev=r,e.length++,r}function u(e,t,n){for(var i=t.next,r=0;r<n&&i!==e.tail;r++)i=i.next;t.next=i,i.prev=t,e.length-=r}if(e.Prism=r,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var i="";return t.forEach(function(t){i+=e(t,n)}),i}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),r.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener?(r.disableWorkerMessageHandler||e.addEventListener("message",function(t){var n=JSON.parse(t.data),i=n.language,o=n.code,a=n.immediateClose;e.postMessage(r.highlight(o,r.languages[i],i)),a&&e.close()},!1),r):r;var d=r.util.currentScript();function h(){r.manual||r.highlightAll()}if(d&&(r.filename=d.src,d.hasAttribute("data-manual")&&(r.manual=!0)),!r.manual){var p=document.readyState;"loading"===p||"interactive"===p&&d&&d.defer?document.addEventListener("DOMContentLoaded",h):window.requestAnimationFrame?window.requestAnimationFrame(h):window.setTimeout(h,16)}return r}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */"undefined"!=typeof module&&module.exports&&(module.exports=r),"undefined"!=typeof global&&(global.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};i["language-"+t]={pattern:/[\s\S]+/,inside:r.languages[t]};var o={};o[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:i},r.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(e,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,function(){if(void 0!==r&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",n="loading",i="loaded",o="pre[data-src]:not(["+t+'="'+i+'"]):not(['+t+'="'+n+'"])';r.hooks.add("before-highlightall",function(e){e.selector+=", "+o}),r.hooks.add("before-sanity-check",function(a){var s=a.element;if(s.matches(o)){a.code="",s.setAttribute(t,n);var l=s.appendChild(document.createElement("CODE"));l.textContent="Loading…";var c=s.getAttribute("data-src"),u=a.language;if("none"===u){var d=(/\.(\w+)$/.exec(c)||[,"none"])[1];u=e[d]||d}r.util.setLanguage(l,u),r.util.setLanguage(s,u);var h=r.plugins.autoloader;h&&h.loadLanguages(u),function(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){4==i.readyState&&(i.status<400&&i.responseText?t(i.responseText):i.status>=400?n("✖ Error "+i.status+" while fetching file: "+i.statusText):n("✖ Error: File does not exist or is empty"))},i.send(null)}(c,function(e){s.setAttribute(t,i);var n=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var n=Number(t[1]),i=t[2],r=t[3];return i?r?[n,Number(r)]:[n,void 0]:[n,n]}}(s.getAttribute("data-range"));if(n){var o=e.split(/\r\n?|\n/g),a=n[0],c=null==n[1]?o.length:n[1];a<0&&(a+=o.length),a=Math.max(0,Math.min(a-1,o.length)),c<0&&(c+=o.length),c=Math.max(0,Math.min(c,o.length)),e=o.slice(a,c).join("\n"),s.hasAttribute("data-start")||s.setAttribute("data-start",String(a+1))}l.textContent=e,r.highlightElement(l)},function(e){s.setAttribute(t,"failed"),l.textContent=e})}}),r.plugins.fileHighlight={highlight:function(e){for(var t,n=(e||document).querySelectorAll(o),i=0;t=n[i++];)r.highlightElement(t)}};var a=!1;r.fileHighlight=function(){a||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),a=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}}}(),define("prism",function(e){return function(){return e.Prism}}(this)),define("text!Snippets/Sandcastle3DTiles.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\nconst viewer = new Cesium.Viewer("cesiumContainer");\n\ntry {\n  const tileset = await Cesium.Cesium3DTileset.fromIonAssetId("${ASSET_ID}");\n  viewer.scene.primitives.add(tileset);\n  await viewer.zoomTo(tileset);\n\n  // Apply the default style if it exists\n  const extras = tileset.asset.extras;\n  if (\n    Cesium.defined(extras) &&\n    Cesium.defined(extras.ion) &&\n    Cesium.defined(extras.ion.defaultStyle)\n  ) {\n    tileset.style = new Cesium.Cesium3DTileStyle(extras.ion.defaultStyle);\n  }\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/Sandcastle3DTilesNotGeoreferenced.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\nconst viewer = new Cesium.Viewer("cesiumContainer");\n\ntry {\n  const tileset = await Cesium.Cesium3DTileset.fromIonAssetId("${ASSET_ID}", {\n    //This tileset doesn\'t have a location, so we\'re using a modelMatrix to place it at 0, 0 instead of drawing at the center of the earth\n    modelMatrix: Cesium.Transforms.eastNorthUpToFixedFrame(\n      Cesium.Cartesian3.fromDegrees(0, 0),\n    ),\n  });\n  viewer.scene.primitives.add(tileset);\n  await viewer.zoomTo(tileset);\n\n  // Apply the default style if it exists\n  const extras = tileset.asset.extras;\n  if (\n    Cesium.defined(extras) &&\n    Cesium.defined(extras.ion) &&\n    Cesium.defined(extras.ion.defaultStyle)\n  ) {\n    tileset.style = new Cesium.Cesium3DTileStyle(extras.ion.defaultStyle);\n  }\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/Sandcastle3DTilesWithTerrain.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\nconst viewer = new Cesium.Viewer("cesiumContainer", {\n  terrainProvider: await Cesium.CesiumTerrainProvider.fromIonAssetId(\n    "${TERRAIN_ASSET_ID}",\n  ),\n});\nviewer.scene.globe.depthTestAgainstTerrain = true;\n\ntry {\n  const tileset = await Cesium.Cesium3DTileset.fromIonAssetId("${ASSET_ID}");\n  viewer.scene.primitives.add(tileset);\n  await viewer.zoomTo(tileset);\n\n  // Apply the default style if it exists\n  const extras = tileset.asset.extras;\n  if (\n    Cesium.defined(extras) &&\n    Cesium.defined(extras.ion) &&\n    Cesium.defined(extras.ion.defaultStyle)\n  ) {\n    tileset.style = new Cesium.Cesium3DTileStyle(extras.ion.defaultStyle);\n  }\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleCzml.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\nconst viewer = new Cesium.Viewer("cesiumContainer");\n\ntry {\n  const resource = await Cesium.IonResource.fromAssetId("${ASSET_ID}");\n  const dataSource = await Cesium.CzmlDataSource.load(resource);\n  await viewer.dataSources.add(dataSource);\n  await viewer.zoomTo(dataSource);\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleGeoJson.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\nconst viewer = new Cesium.Viewer("cesiumContainer");\n\ntry {\n  const resource = await Cesium.IonResource.fromAssetId("${ASSET_ID}");\n  const dataSource = await Cesium.GeoJsonDataSource.load(resource);\n  await viewer.dataSources.add(dataSource);\n  await viewer.zoomTo(dataSource);\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleGoogle3DTiles.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\nconst viewer = new Cesium.Viewer("cesiumContainer", {\n  // This is a global 3D Tiles tileset so disable the\n  // globe to prevent it from interfering with the data\n  globe: false,\n  // Disabling the globe means we need to manually\n  // re-enable the atmosphere\n  skyAtmosphere: new Cesium.SkyAtmosphere(),\n  // 2D and Columbus View are not currently supported\n  // for global 3D Tiles tilesets\n  sceneModePicker: false,\n  // Imagery layers are not currently supported for\n  // global 3D Tiles tilesets\n  baseLayerPicker: false,\n  // Use the Google geocoder instead of Bing\n  geocoder: Cesium.IonGeocodeProviderType.GOOGLE,\n});\n\ntry {\n  const tileset = await Cesium.Cesium3DTileset.fromIonAssetId("${ASSET_ID}");\n  viewer.scene.primitives.add(tileset);\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleImagery.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\nconst viewer = new Cesium.Viewer("cesiumContainer");\n\ntry {\n  const imageryLayer = viewer.imageryLayers.addImageryProvider(\n    await Cesium.IonImageryProvider.fromAssetId("${ASSET_ID}"),\n  );\n  await viewer.zoomTo(imageryLayer);\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleKml.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\nconst viewer = new Cesium.Viewer("cesiumContainer");\n\ntry {\n  const resource = await Cesium.IonResource.fromAssetId("${ASSET_ID}");\n  const dataSource = await Cesium.KmlDataSource.load(resource, {\n    camera: viewer.scene.camera,\n    canvas: viewer.scene.canvas,\n  });\n  await viewer.dataSources.add(dataSource);\n  await viewer.zoomTo(dataSource);\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleModel.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\nconst viewer = new Cesium.Viewer("cesiumContainer");\n\ntry {\n  const resource = await Cesium.IonResource.fromAssetId("${ASSET_ID}");\n  const entity = viewer.entities.add({\n    position: Cesium.Cartesian3.fromDegrees(0, 0, 100),\n    model: {\n      uri: resource,\n    },\n  });\n  viewer.trackedEntity = entity;\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleMoon3DTilesTerrain.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\n// Set the default ellipsoid to the Moon instead of WGS84\nCesium.Ellipsoid.default = Cesium.Ellipsoid.MOON;\n\nconst viewer = new Cesium.Viewer("cesiumContainer", {\n  // This is a global 3D Tiles tileset so disable the\n  // globe to prevent it from interfering with the data\n  globe: false,\n  // 2D and Columbus View are not currently supported\n  // for global 3D Tiles tilesets\n  sceneModePicker: false,\n  // Imagery layers are not currently supported for\n  // global 3D Tiles tilesets\n  baseLayerPicker: false,\n  // Geocoder is not currently supported for lunar locations\n  geocoder: false,\n});\n\ntry {\n  const tileset = await Cesium.Cesium3DTileset.fromIonAssetId("${ASSET_ID}");\n  viewer.scene.primitives.add(tileset);\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleMars3DTilesTerrain.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\n// Set the default ellipsoid to the Mars instead of WGS84\nCesium.Ellipsoid.default = Cesium.Ellipsoid.MARS;\n\nconst viewer = new Cesium.Viewer("cesiumContainer", {\n  // This is a global 3D Tiles tileset so disable the\n  // globe to prevent it from interfering with the data\n  globe: false,\n  // 2D and Columbus View are not currently supported\n  // for global 3D Tiles tilesets\n  sceneModePicker: false,\n  // Imagery layers are not currently supported for\n  // global 3D Tiles tilesets\n  baseLayerPicker: false,\n  // Geocoder is not currently supported for martian locations\n  geocoder: false,\n});\n\ntry {\n  const tileset = await Cesium.Cesium3DTileset.fromIonAssetId("${ASSET_ID}");\n  viewer.scene.primitives.add(tileset);\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/SandcastleTerrain.js",[],function(){return'// Grant CesiumJS access to your ion assets\nCesium.Ion.defaultAccessToken = "${ACCESS_TOKEN}";\n\ntry {\n  const viewer = new Cesium.Viewer("cesiumContainer", {\n    terrainProvider:\n      await Cesium.CesiumTerrainProvider.fromIonAssetId("${ASSET_ID}"),\n  });\n} catch (error) {\n  console.log(error);\n}\n'}),define("text!Snippets/Snippet3DTiles.js",[],function(){return'const tileset = viewer.scene.primitives.add(\n  await Cesium.Cesium3DTileset.fromIonAssetId("${ASSET_ID}"),\n);\n'}),define("text!Snippets/SnippetCzml.js",[],function(){return'const resource = await Cesium.IonResource.fromAssetId("${ASSET_ID}");\nconst dataSource = await Cesium.CzmlDataSource.load(resource);\n'}),define("text!Snippets/SnippetGeoJson.js",[],function(){return'const resource = await Cesium.IonResource.fromAssetId("${ASSET_ID}");\nconst dataSource = await Cesium.GeoJsonDataSource.load(resource);\n'}),define("text!Snippets/SnippetImagery.js",[],function(){return'const layer = viewer.imageryLayers.addImageryProvider(\n  await Cesium.IonImageryProvider.fromAssetId("${ASSET_ID}"),\n);\n'}),define("text!Snippets/SnippetKml.js",[],function(){return'const resource = await Cesium.IonResource.fromAssetId("${ASSET_ID}");\nconst dataSource = await Cesium.KmlDataSource.load(resource, {\n  camera: viewer.scene.camera,\n  canvas: viewer.scene.canvas,\n});\n'}),define("text!Snippets/SnippetModel.js",[],function(){return'const resource = await Cesium.IonResource.fromAssetId("${ASSET_ID}");\nconst entity = viewer.entities.add({\n  model: { uri: resource },\n});\n'}),define("text!Snippets/SnippetTerrain.js",[],function(){return'viewer.scene.setTerrain(\n  new Cesium.Terrain(\n    Cesium.CesiumTerrainProvider.fromIonAssetId("${ASSET_ID}"),\n  ),\n);\n'}),define("Views/Dashboard/Assets/AssetDetailsViewModel",["../../../Core/AppData","../../../generated/ApplicationMode","../../../Core/AssetStatus","../../../Core/AssetType","../../../Core/convertMarkdown","Core/defaultValue","../../../Core/Feature","../../../Core/formatDateTime","../../../Core/getIonExtras","generated/CentralBody","../../../Core/isStringEmptyOrWhitespace","../../../Core/Label","../../../Core/Services","../../../Core/Units","../../../Core/JobStatus","../../Components/DeleteButton","../getRemoveAssetWarning","knockout","prism","text!Snippets/Sandcastle3DTiles.js","text!Snippets/Sandcastle3DTilesNotGeoreferenced.js","text!Snippets/Sandcastle3DTilesWithTerrain.js","text!Snippets/SandcastleCzml.js","text!Snippets/SandcastleGeoJson.js","text!Snippets/SandcastleGoogle3DTiles.js","text!Snippets/SandcastleImagery.js","text!Snippets/SandcastleKml.js","text!Snippets/SandcastleModel.js","text!Snippets/SandcastleMoon3DTilesTerrain.js","text!Snippets/SandcastleMars3DTilesTerrain.js","text!Snippets/SandcastleTerrain.js","text!Snippets/Snippet3DTiles.js","text!Snippets/SnippetCzml.js","text!Snippets/SnippetGeoJson.js","text!Snippets/SnippetImagery.js","text!Snippets/SnippetKml.js","text!Snippets/SnippetModel.js","text!Snippets/SnippetTerrain.js","toastr"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,w,_,x,S,T,A,C,E,k,I,P,D,O,M,L,R,N,F,U){"use strict";const V=t.ApplicationMode,B=Cesium.defined,$=(Cesium.DeveloperError,Cesium.Ion),H=c.CentralBody,G=c.centralBodyForAsset,j={};j[i["3DTILES"]]=y,j["3DTILES-TERRAIN"]=_,j["3DTILES-NOT-GEOREFERENCED"]=w,j[i.IMAGERY]=A,j[i.TERRAIN]=P,j[i.GLTF]=E,j[i.CZML]=x,j[i.KML]=C,j[i.GEOJSON]=S,j["3DTILES-GOOGLE"]=T,j["3DTILES-MOON-TERRAIN"]=k,j["3DTILES-MARS-TERRAIN"]=I;const z={};function q(t){const l=this,c=t.isPremium,f=t.isExternal,b=t.type,y=new Date(t.dateAdded),w=v.observable(),_=v.observable(!1),x=v.observable(t.georeferenced),S=v.observable(!1),T=v.observable(!1),A=v.observableArray(),C=v.pureComputed(function(){let e='<span class="bold">Cannot delete asset</span>';return e+="<br>This asset cannot be deleted because the following assets depend on it:\n",e+="<ul>",A().forEach(function(t){e+=`<li><a href="assets/${t.id}">${t.name}</a></li>`}),e+="</ul>",e+="Delete the assets listed above before deleting this asset.",e});this.deleteButton=new m({confirmText:g.bind(null,this),hideLowerText:!0,width:200,pending:S,disabled:T,disabledText:C,data:this,placement:"right",xsPlacement:"left"}),this.deleteEvent=this.deleteButton.delete,this._isProductionServer="ion.cesium.com"===window.location.hostname,this._id=t.id,this._type=b,this._typeText=i.toString(b),this._date=y,this._dateAdded=s(y);const E=v.observable(t.bytes);this._bytes=E,this.isExportable=v.observable(t.exportable),this._isPremium=c,this._isExternal=f,this._isArchivable=v.observable(t.archivable&&!n.isError(t.status)),this._archiveToggled=v.observable(!1),this._archiveId=v.observable(),this._archiveStatus=v.observable(""),this._bytesArchived=v.observable(0),this._archiveProgressMessage=v.observable(""),this.warnings=v.observable(t.warnings),this._fileSize=c||f?v.observable("-"):v.pureComputed(function(){return p.bytesToString(E())}),this._name=v.observable(t.name);const k=v.observable(t.description);this._description=k;const I=v.pureComputed(function(){return u(k())});this._defaultDescription=I,this._descriptionHtml=v.pureComputed(function(){const e=I()?"No description provided":k();return r(e)}),this._status=v.observable(t.status),this._percentComplete=v.observable(t.percentComplete),this._progressMessage=v.observable(t.progressMessage),this._error=v.observable(t.error),this._needsExtras=v.observable(b===i["3DTILES"]&&!f),this._ready=v.pureComputed(function(){return!l._needsExtras()&&l._status()===n.COMPLETE}),this._pollForStatus=!1,this.saveAttribute=this.saveAttribute.bind(this);let P=[];a.isEnabledForServer(a.Server.LABELS)&&B(t.labels)&&(P=t.labels),this.labels=v.observableArray(P.map(function(e){return new d(e)}));const D=v.observable(o(t.attribution,""));this.deleteDisabled=T,this.children=A,this.deleteDisabledText=C,this.attribution=D,this.attributionHtml=v.pureComputed(function(){const e=D();return r(e,!0)}),this.sandcastleExample=v.pureComputed(()=>{let n;const r=w(),o=_()&&!x(),a=G(t,e);return b===i["3DTILES"]?t.id===e.googleTilesAssetId?n=j["3DTILES-GOOGLE"]:a===H.MOON?n=j["3DTILES-MOON-TERRAIN"]:a===H.MARS?n=j["3DTILES-MARS-TERRAIN"]:B(r)?(n=j["3DTILES-TERRAIN"],n=n.replace('"${TERRAIN_ASSET_ID}"',r)):n=o?j["3DTILES-NOT-GEOREFERENCED"]:j["3DTILES"]:n=j[b],B(n)?(n=n.replace("${ACCESS_TOKEN}",h.getDefaultToken()),n=n.replace('"${ASSET_ID}"',t.id),this._isProductionServer||(n=`Cesium.Ion.defaultServer = '${$.defaultServer}';\n${n}`)):n="Unknown asset type",n}),this.movable=_,this.analyzable=v.observable(t.analyzable),this.georeferenced=x,this.georeferencedTerrainId=w,this.defaultStyle=v.observable(),this._stories=void 0,this._terrainChildrenPending=!1,this._ionExtrasPending=!1,this._pending=S}async function Y(e){if(e._status()!==n.COMPLETE)return;let t;if(e._type!==i.TERRAIN||e._terrainChildrenPending){if(e._type===i["3DTILES"]&&e._needsExtras()&&!e._ionExtrasPending){e._ionExtrasPending=!0;try{t=await l(e._id),e.georeferencedTerrainId(t.terrainId),e.movable(t.movable&&!e.isPremium),e.defaultStyle(t.defaultStyle)}catch(r){e.movable(!1),e.defaultStyle(void 0)}finally{e._needsExtras(!1),e._ionExtrasPending=!1}}}else{e._terrainChildrenPending=!0;try{t=await h.getTerrainChildren(e._id),e.deleteDisabled(0!==t.length),e.children(t)}catch(r){U.error(r)}finally{e._terrainChildrenPending=!1}}}function W(e){if(e.archiveToggled()&&e._archiveStatus()!==f.COMPLETE&&e._archiveStatus()!==f.ERROR){e._pollForStatus=!0;const t=async function(){if(e._pollForStatus)try{const t=await h.getAssetArchive(e.archiveId());e.archiveStatus(t.status),e.bytesArchived(t.bytesArchived),e.archiveProgressMessage(t.progressMessage),t.status===f.COMPLETE&&await h.getStorage()}finally{e._archiveStatus()!==f.COMPLETE&&e._archiveStatus()!==f.ERROR&&setTimeout(t,3e3)}};t()}}return z[i["3DTILES"]]=D,z[i.IMAGERY]=L,z[i.TERRAIN]=F,z[i.GLTF]=N,z[i.CZML]=O,z[i.KML]=R,z[i.GEOJSON]=M,Object.defineProperties(q.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},code:{get:function(){const e=this._type;let t=z[e];return B(t)?(t=t.replace('"${ASSET_ID}"',this.id),this._isProductionServer||(t=`Cesium.Ion.defaultServer = '${$.defaultServer}';\n${t}`)):t="Unknown asset type",t}},codeHtml:{get:function(){const e=document.createElement("div"),t=document.createElement("pre");t.className="language-javascript code-snippet";const n=document.createElement("code");return n.textContent=this.code,t.appendChild(n),e.appendChild(t),b.highlightElement(t),e.innerHTML}},description:{get:function(){return this._description}},descriptionHtml:{get:function(){return this._descriptionHtml}},defaultDescription:{get:function(){return this._defaultDescription}},type:{get:function(){return this._type}},typeText:{get:function(){return this._typeText}},date:{get:function(){return this._date}},dateAdded:{get:function(){return this._dateAdded}},bytes:{get:function(){return this._bytes}},fileSize:{get:function(){return this._fileSize}},status:{get:function(){return this._status}},ready:{get:function(){return this._ready}},percentComplete:{get:function(){return this._percentComplete}},progressMessage:{get:function(){return this._progressMessage}},error:{get:function(){return this._error}},isPremium:{get:function(){return this._isPremium}},isExternal:{get:function(){return this._isExternal}},isArchivable:{get:function(){return this._isArchivable}},archiveToggled:{get:function(){return this._archiveToggled}},archiveId:{get:function(){return this._archiveId}},archiveStatus:{get:function(){return this._archiveStatus}},bytesArchived:{get:function(){return this._bytesArchived}},archiveProgressMessage:{get:function(){return this._archiveProgressMessage}},stories:{get:function(){return this._stories}}}),q.prototype.saveAttribute=async function(e,t){const n=this._pending;n(!0);const i=this;let r;try{if("labels"===e)await h.putAssetLabels(this.id,t.map(function(e){return e.id})),i.labels(t);else if("archiveToggled"===e){if(t){const e=await h.postAssetArchiveDeprecated(this.id);i.archiveId(e.id),i.archiveStatus(e.status),i.bytesArchived(e.bytesArchived)}else await h.deleteAssetArchive(this.archiveId());await h.getStorage(),i.archiveToggled(t),100===i._percentComplete()&&t&&W(this)}else{r=this[e](),this[e](t);const n={[e]:t};await h.patchAssetsMetadata(this.id,n),i[e](t)}}catch(o){B(r)&&this[e](r),console.log(o),U.error(h.getErrorMessage(o))}finally{n(!1)}},q.prototype.onSelect=function(){!function(e){if(100!==e._percentComplete()&&!n.isError(e._status())){e._pollForStatus=!0;const t=async function(){if(e._pollForStatus)try{const t=await h.getAssetMetadata(e._id);e.updateFromMetadata(t),t.status===n.COMPLETE&&Y(e)}finally{100===e._percentComplete()||n.isError(e._status())?a.isEnabledForServer(a.Server.ASSET_ARCHIVES_FULL)&&e.archiveToggled()&&e._status()===n.COMPLETE&&W(e):setTimeout(t,3e3)}};t()}e.archiveToggled()&&e._status()===n.COMPLETE&&W(e)}(this),this.fetchExtraPromise=Y(this),a.isEnabledForServer(a.Server.ASSET_ARCHIVES_FULL)&&async function(e){try{const t=await h.getAssetArchives({assetId:e._id});t.items.length>0&&(e.archiveToggled(!0),e.archiveId(t.items[0].id),e.archiveStatus(t.items[0].status),e.bytesArchived(t.items[0].bytesArchived))}catch(t){console.log(t)}}(this)},q.prototype.onUnselect=function(){this._pollForStatus=!1},q.prototype.delete=async function(){const t=this._pending;t(!0);try{this._isPremium&&e.applicationMode!==V.SINGLE_USER?await h.removePremiumAsset(this.id):await h.deleteAsset(this.id)}catch(n){U.error(h.getErrorMessage(n),"Failed to delete data")}finally{t(!1)}},q.getAll=h.getAssets,q.prototype.destroy=function(){this._pollForStatus=!1},q.prototype.toReact=function(){return{id:this._id,name:this.name(),type:this.type,labels:this.labels().map(e=>e.toReact()),dateAdded:this.date,bytes:this.bytes(),isPremium:this.isPremium,isExternal:this.isExternal,georeferenced:this.georeferenced(),analyzable:this.analyzable()}},q.prototype.updateFromMetadata=function(e){this._status(e.status),this._percentComplete(e.percentComplete),this._progressMessage(e.progressMessage),this._error(e.error),this._bytes(e.bytes),this._isArchivable(e.archivable&&!n.isError(e.status)),this.warnings(e.warnings),this.georeferenced(e.georeferenced)},q}),define("text!Views/Help/AssetsShellHelp.md",[],function(){return'**My Assets** contains a list of assets associated with your account, including assets created from data you uploaded and assets you added from the **Asset Depot**.\n\n**Add Data** by clicking the <label class="btn btn-primary btn-xs btn-no-action">Add data</label> button, or by drag and dropping files or folders onto this page.\n\nClick an asset in the list to **view and edit asset metadata** in the panel<span class="hidden-xs"> on the right side of the screen</span>.\n\n**Search for an asset by id** using the syntax `id:123`\n\n**Edit** the name, description, attribution and labels for the asset in this panel. Use the **code snippet** for loading the asset in a custom CesiumJS application.\n\n**Delete** the asset by clicking the delete button (<span class="fa fa-trash"></span>) in the upper-right of that panel.\n'}),define("Views/Dashboard/Assets/AssetsShell",["../../../Core/isStringEmptyOrWhitespace","../../../Core/isViewportMobile","../../../Core/AssetStatus","../../../Core/Feature","../../../Core/PageLoadingState","../../../Core/ReactInterop","../../../Core/Resource","../../../Core/Services","../../../Core/SortOrder","../../../Core/Units","../../../Core/Validation","../../Components/ContextualHelp","../../Components/FileUploadList","./AssetDetails","./AssetDetailsViewModel","knockout","plugins/router","text!Views/Help/AssetsShellHelp.md","toastr"],function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,b){"use strict";const y=Cesium.defined,w=Cesium.EventHelper;function _(e,t){return e-t}function x(e,t){return e()!==t&&(e(t),!0)}function S(){const e=this;this.setLabel=this.setLabel.bind(this),this.clearSelection=this.clearSelection.bind(this),this.items=m.observableArray([]),this.selectedIndices=m.observableArray([]),this.selectedItem=m.pureComputed(function(){const t=e.selectedIndices();return 1===t.length?e.items()[t[0]]:void 0}),this.detailsPane=new p(this.selectedItem,this.setLabel,this.clearSelection);const t=m.observable(!1),n=m.observable(),a=m.observable(),u=m.observable(r.IN_PROGRESS),f={usage:m.pureComputed(function(){return`${`${Math.max(s.storageUsed()/c.BYTES_IN_GB,0).toFixed(2)} ${c.GB}`} of ${(s.quotaInBytes()/c.BYTES_IN_GB).toFixed(2)} ${c.GB} used`}),css:m.pureComputed(function(){const e=s.storageUsed(),t=parseFloat((e/c.BYTES_IN_GB).toFixed(2)),n=parseFloat((s.quotaInBytes()/c.BYTES_IN_GB).toFixed(2));if(t>=n)return"danger";return t>=.9*n?"warning":void 0})};this._events=new w,this._events.add(h.uploadComplete,S.prototype.uploadComplete,this),this._events.add(h.assetAdded,S.prototype.addNewAsset,this),this._events.add(h.assetFailed,S.prototype.removeNewAsset,this),this._itemsChangeSubscription=e.items.subscribe(function(t){const n=[],i=[];t.forEach(function(t){const r=t.status,o=t.value;"added"===r?(o.deleteEvent.addEventListener(S.prototype.deleteItem,e),i.push(t.index)):"deleted"===r&&(o.deleteEvent.removeEventListener(S.prototype.deleteItem,e),n.push(t.index))}),n.sort(_),i.sort(_);const r=Array.from(e.selectedIndices()).sort(_),o=[];let a=0,s=0,l=0,c=0;for(let e of r){for(;c<n.length&&n[c]<e;)l++,c++;if(n[c]===e)return;for(e-=l;s<=i.length&&i[s]<e;)a++,s++;e+=a,o.push(e)}e.selectedIndices(o)},null,"arrayChange"),this._page=1,this.totalCount=m.observable(),this._hashId=void 0,this._sortedBy=m.observable("DATE_ADDED"),this._sortOrder=m.observable(l.DESCENDING),this._resultPromise=void 0,this._removeDeleteEventListener=this.detailsPane.delete.addEventListener(this.deleteSelected,this),this.planDetails=f,this.disabled=t,this.billingEnabled=i.isEnabledForServer(i.Server.BILLING),this.nextLink=n,this.previousLink=a,this.hasNext=m.pureComputed(function(){return y(n())}),this.hasPrevious=m.pureComputed(function(){return y(a())}),this.loadState=u,this.isError=m.pureComputed(function(){return u()===r.ERROR}),this.isReady=m.pureComputed(function(){return u()===r.READY}),this.isInProgress=m.pureComputed(function(){return u()===r.IN_PROGRESS}),this.contextualHelp=new d(v,".pane-left.dashboard-pane"),this.hasNoResults=m.pureComputed(function(){return 0===e.items().length}),this.showDetails=m.pureComputed(function(){return this.selectedIndices().length>0},this),this.searchText=m.observable(""),this.addedAfter=m.observable(),this.addedBefore=m.observable(),this.assetType=m.observable(),this.assetsGrid=new o.Component({tag:"ion-assets-grid",properties:m.pureComputed(function(){return{sortBy:e._sortedBy(),sortOrder:e._sortOrder(),selectedIndices:e.selectedIndices(),assets:e.items().map(e=>e.toReact())}}),eventListeners:{refresh:function(){e.refreshTable()},labelClick:function(t){e.setLabel(t.detail)},selectedIndicesChange:function(t){e.selectedIndices(t.detail)},sortChange:function(t){(x(e._sortedBy,t.detail.sortBy)||x(e._sortOrder,t.detail.sortOrder))&&(e._page=1,e.refreshTable())}}}),this.assetFilterToolbar=new o.Component({tag:"ion-assets-filter-toolbar",properties:m.pureComputed(function(){return{addedAfter:e.addedAfter(),addedBefore:e.addedBefore(),search:e.searchText(),assetType:e.assetType()}}),eventListeners:{change:function(t){(x(e.addedBefore,t.detail.addedBefore)||x(e.addedAfter,t.detail.addedAfter)||x(e.searchText,t.detail.search)||x(e.assetType,t.detail.assetType))&&(e._page=1,e.refreshTable())}}}),this.multiSelectPane=new o.Component({tag:"ion-asset-multi-selection",properties:m.pureComputed(function(){const t=e.items();return{assets:e.selectedIndices().filter(y).map(e=>t[e].toReact())}}),eventListeners:{back:()=>{e.selectedIndices([])},"multi-delete-finished":t=>{b.success(`${t.detail.count} assets deleted`),e.selectedIndices.removeAll(),e.refreshTable()}}})}function T(e){if(e)return new Date(`${e}T00:00:00`)}return S.prototype.activate=async function(e,t){y(e)&&"string"==typeof e&&(e=u.validNumber(e)?Number(e):void 0),this._hashId=e,y(t)&&(y(t.page)&&u.validNumber(t.page)&&(this._page=Math.max(Number(t.page),1)),y(t.sortOrder)&&l.isValid(t.sortOrder)&&this._sortOrder(t.sortOrder),y(t.sortBy)&&function(e){switch(e){case"ID":case"NAME":case"BYTES":case"TYPE":case"STATUS":case"DATE_ADDED":case"DESCRIPTION":return!0}return!1}(t.sortBy)&&this._sortedBy(t.sortBy),y(t.search)&&this.searchText(t.search));const n=this;return await this.refreshTable(),n._routeSubscription=n.selectedItem.subscribe(function(){n._updateUri()}),n.refreshQuota()},S.prototype.onAddData=function(){g.navigate("addasset")},S.prototype.clearSelection=function(){this.selectedIndices([])},S.prototype.uploadComplete=function(e){this.refreshQuota();const t=this.items();for(let i=0;i<t.length;i++)t[i].id===e.id&&t[i].status(n.NOT_STARTED)},S.prototype.addNewAsset=function(e){if(!y(e)||!y(e.userId)||e.userId!==s.getCurrentUser().id)return;const t=this.items();for(let i=0;i<t.length;i++)if(t[i].id===e.id)return void this.selectedIndices([i]);const n=new f(e);this.items.push(n),this.selectedIndices([this.items().length-1])},S.prototype.removeNewAsset=function(e){if(!y(e)||!y(e.userId)||e.userId!==s.getCurrentUser().id)return;const t=this.items(),n=t.findIndex(t=>t.id===e.id);if(-1===n)return;const i=this.selectedIndices().filter(e=>e!==n).map(e=>e<n?e:e-1);this.selectedIndices(i);const r=t[n];this.items.remove(r),r.destroy()},S.prototype.deleteSelected=async function(){const e=this.selectedItem();if(y(e))return this.deleteItem(e)},S.prototype.deleteItem=async function(e){const t=this;return await e.delete(),t.items.remove(e),e.destroy(),await t.refreshTable(),t.refreshQuota()},S.prototype.setLabel=function(t){const n=`label:'${m.unwrap(t.name)}'`,i=this.searchText();-1===i.indexOf(n)&&(e(i)?this.searchText(n):this.searchText(`${i} ${n}`)),this.refreshTable()},S.prototype._loadItems=async function(e){const i=this;this.loadState(r.IN_PROGRESS);const o=e();this._resultPromise=o;try{const e=await o;if(o!==i._resultPromise)return;i.items().forEach(function(e){e.destroy()}),i.selectedIndices([]),i.items.removeAll();for(let t=0;t<e.items.length;t++){const r=e.items[t];r.status===n.AWAITING_FILES&&-1===h.pendingAssets().indexOf(r.id)||i.items.push(new f(r))}let a;if(i.nextLink(e.links.next),i.previousLink(e.links.prev),i.totalCount(e.total),!t())if(y(i._hashId)){const e=i.items().findIndex(function(e){return e.id===i._hashId});a=-1===e?0:e,i._hashId=void 0}else a=0;i.items().length>0&&i.selectedIndices.push(a),i._updateUri(),i.loadState(r.READY)}catch(a){console.error(a),i.loadState(r.ERROR)}},S.prototype._updateUri=function(){let t="/assets";y(this.selectedItem())&&(t+=`/${this.selectedItem().id}`);const n=new a({url:t+window.location.search}),i=n.queryParameters;i.page=this._page,i.sortBy=this._sortedBy(),i.sortOrder=this._sortOrder();const r=this.searchText();e(r)?delete i.search:i.search=r,g.navigate(n.url,{replace:!0,trigger:!1})},S.prototype._getAssetList=async function(){const t=this.searchText(),n=e(t)?void 0:t,i=this._sortedBy(),r=this._sortOrder(),o=await s.getAssets({page:this._page,search:n,sortBy:i,sortOrder:r,addedBefore:T(this.addedBefore()),addedAfter:T(this.addedAfter()),type:this.assetType()});return 1!==this._page&&0===o.items.length?(this._page=1,await s.getAssets({page:this._page,search:n,sortBy:i,sortOrder:r})):o},S.prototype.refreshTable=async function(){const e=this._hashId;return y(e)?this._loadItems(async()=>{const t=await this._getAssetList();if(!t.items.some(t=>t.id===e))try{const n=await s.getAssetMetadata(e);t.items.unshift(n)}catch(n){console.error(n),b.error(`There was a problem loading asset id ${e}. This asset may not exist or you may not have access to it.`)}return t}):this._loadItems(()=>this._getAssetList())},S.prototype.loadPrevious=function(){if(!this.hasPrevious())return;const e=this;return this._loadItems(async function(){const t=await s.getNextOrPreviousPage(e.previousLink());return e._page--,t})},S.prototype.loadNext=function(){if(!this.hasNext())return;const e=this;return this._loadItems(async function(){const t=await s.getNextOrPreviousPage(e.nextLink());return e._page++,t})},S.prototype.refreshQuota=async function(){await s.getStorage()},S.prototype.sortStatus=function(e){const t=this;return m.pureComputed(function(){return t._sortedBy()===e?t._sortOrder()===l.ASCENDING?"fa-sort-desc":"fa-sort-asc":"fa-sort"})},S.prototype.sortBy=function(e){const t=this;return function(){return t._sortedBy()!==e?(t._sortedBy(e),t._sortOrder(l.ASCENDING)):t._sortOrder(t._sortOrder()===l.ASCENDING?l.DESCENDING:l.ASCENDING),t.refreshTable()}},S.prototype.detached=function(){this._events.removeAll(),this._itemsChangeSubscription.dispose(),y(this._routeSubscription)&&this._routeSubscription.dispose(),y(this._searchSubscription)&&this._searchSubscription.dispose(),this._removeDeleteEventListener(),this.items().forEach(function(e){e.deleteEvent.removeEventListener(S.prototype.deleteItem,this),e.destroy()})},S}),define("Views/Dashboard/Assets/ListSketchfabAssets",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-sketchfab-page",{onActivate(e,t){e.query=t}})}),define("Core/getClickThroughLicense",["Core/Feature"],function(e){"use strict";const t=[29328,29331,29332,29333,29334,29335,57587,57588,57590],n=[354759],i=[354307];return function(r){if(e.isEnabledForServer(e.Server.CLICK_THROUGH_AGREEMENTS))return-1!==t.indexOf(r)?"VRICON":-1!==n.indexOf(r)?"NEARMAP":-1!==i.indexOf(r)?"AEROMETREX":void 0}}),define("Views/Dashboard/PremiumAssets/PremiumAssetDetails",["../../Components/AssetViewer","../../../Core/getClickThroughLicense","../../../Core/ReactInterop","knockout"],function(e,t,n,i){"use strict";Cesium.Check;const r=Cesium.Event,o=Cesium.defined,a=Cesium.DeveloperError;function s(t,s){this._selectedAsset=t,this._subscribe=new r,this.pending=i.pureComputed(function(){return t()._pending()}),this.isSubscribed=i.pureComputed(function(){return t().subscribed()}),this.setLabel=s,this.assetViewer=new e(t),this.unselect=this.unselect.bind(this),this.details=new n.Component({tag:"ion-premium-asset-details",properties:i.pureComputed(function(){const e=t();return o(e)?{pending:e._pending(),asset:{id:e.id,name:e.name,description:e.description,attribution:e.attribution,subscribed:e._subscribed()}}:{asset:void 0,pending:!1}}),eventListeners:{"asset-subscribe":()=>{const e=t();if(!o(e))throw new a("tried to subscribe when there is not a selected asset");e.subscribe()}}})}return Object.defineProperties(s.prototype,{selectedAsset:{get:function(){return this._selectedAsset}},subscribeEvent:{get:function(){return this._subscribe}}}),s.prototype.unselect=function(){this.selectedAsset(void 0)},s.prototype.subscribe=function(){const e=this.selectedAsset(),n=t(e.id);n?this.subscribeEvent.raiseEvent(n):e.subscribe()},s}),define("Views/Dashboard/PremiumAssets/PremiumAssetDetailsViewModel",["../../../Core/AssetStatus","../../../Core/AssetType","Core/defaultValue","../../../Core/getIonExtras","../../../Core/Label","../../../Core/Services","../../../Core/getClickThroughLicense","knockout","toastr"],function(e,t,n,i,r,o,a,s,l){"use strict";Cesium.defined;const c=Cesium.DeveloperError,u=Cesium.Event;function d(o){const a=s.observable(!1);this._id=o.id,this._name=o.name,this._description=o.description,this._subscribed=s.observable(o.subscribed),this._type=o.type,this._typeText=t.toString(o.type),this._attribution=o.attribution,this.status=s.observable(e.COMPLETE);const l=this;this._needsExtras=s.observable(o.type===t["3DTILES"]),this._ionExtrasPending=!1,this.ready=s.pureComputed(function(){return!l._needsExtras()}),this.percentComplete=s.observable(100),this._subscribeEvent=new u;const c=n(o.labels,[]);this.labels=s.observableArray(c.map(function(e){return new r(e)})),this.hasLabels=c.length>0,this.georeferenced=s.observable(!0),this.movable=s.observable(!1),this.defaultStyle=s.observable(),this.georeferencedTerrainId=s.observable(),this.subscribe=this.subscribe.bind(this),this._pending=a,this._inactive=!1,this.fetchExtrasPromise=async function(e){if(e._type===t["3DTILES"]&&e._needsExtras()&&!e._ionExtrasPending){e._ionExtrasPending=!0;try{const t=await i(e._id);e.georeferencedTerrainId(t.terrainId),e.defaultStyle(t.defaultStyle)}catch(n){console.error(n)}finally{e._needsExtras(!1),e._ionExtrasPending=!1}}}(this)}return Object.defineProperties(d.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},attribution:{get:function(){return this._attribution}},subscribed:{get:function(){return this._subscribed}},type:{get:function(){return this._type}},typeText:{get:function(){return this._typeText}},subscribeEvent:{get:function(){return this._subscribeEvent}}}),d.prototype.subscribeClick=function(){const e=a(this.id);e?this._subscribeEvent.raiseEvent(e):this.subscribe()},d.prototype.subscribe=async function(){const e=this._pending;if(e())throw new c("Other database calls are still pending");const t=this.subscribed;e(!0);try{await o.addPremiumAsset(this.id),t(!0)}catch(n){l.error(o.getErrorMessage(n))}finally{e(!1)}},d.getAll=o.getPremiumAssets,d.prototype.destroy=function(){this._inactive=!0},d}),define("Views/Dashboard/PremiumAssets/PremiumAssetTermsOfService",["knockout"],function(e){"use strict";const t=Cesium.Event;function n(){this._close=new t,this._accept=new t,this.license=e.observable()}return Object.defineProperties(n.prototype,{close:{get:function(){return this._close}},accept:{get:function(){return this._accept}}}),n.prototype.agree=function(){this._accept.raiseEvent()},n.prototype.cancel=function(){this._close.raiseEvent()},n}),define("text!Views/Help/PremiumAssetsShellHelp.md",[],function(){return'The **Asset Depot** contains a curated list of free assets available for use in your applications.\n\nClick an asset in the list to see additional details<span class="hidden-xs"> on the right side of the screen</span>.\n\nThen click the <label class="btn btn-primary btn-xs btn-no-action">Add to my assets</label> button to **gain access** to the asset.\n'}),define("Views/Dashboard/PremiumAssets/PremiumAssetsShell",["../DashboardShell","./PremiumAssetDetails","./PremiumAssetDetailsViewModel","./PremiumAssetTermsOfService","Core/Validation","text!Views/Help/PremiumAssetsShellHelp.md"],function(e,t,n,i,r,o){"use strict";function a(){const r=new i;this.layout=new e({detailsPane:t,itemViewModel:n,title:"Asset Depot",hash:"assetdepot",path:"Views/Dashboard/PremiumAssets/PremiumAssets",searchFields:["name","description","labels"],enableGrid:!1,helpContent:o});const a=this.layout;this._removeTermsOfServiceCloseEventListener=r.close.addEventListener(function(){a.rightPane(a.detailsPane),a.disabled(!1)}),this._removeTermsOfServiceAcceptEventListener=r.accept.addEventListener(function(){a.detailsPane.selectedAsset().subscribe(),a.rightPane(a.detailsPane),a.disabled(!1)}),this._itemEventListeners=[];const s=this;a.items.subscribe(function(e){let t;for(t=0;t<s._itemEventListeners.length;t++)s._itemEventListeners[t]();for(t=0;t<e.length;t++){const n=e[t].subscribeEvent.addEventListener(function(e){r.license(e),a.rightPane(r),a.disabled(!0)});s._itemEventListeners.push(n)}}),this._removeSubscribeEventListener=a.detailsPane.subscribeEvent.addEventListener(function(e){r.license(e),a.rightPane(r),a.disabled(!0)})}return a.prototype.activate=function(e){const t=this.layout;r.validNumber(e)?t.loadItems(Number(e)):t.loadItems()},a.prototype.detached=function(){this._removeTermsOfServiceCloseEventListener(),this._removeTermsOfServiceAcceptEventListener(),this._removeSubscribeEventListener();for(let e=0;e<this._itemEventListeners.length;e++)this._itemEventListeners[e]()},a}),define("Views/Dashboard/Stories/StoryDetails",["Core/Feature","../../../Core/getDocumentBaseUri","../../../Core/hasWebGLSupport","../../../Core/isStringEmptyOrWhitespace","../../../Core/Services","../../Components/ClickEditField","../../Components/DeleteButton","../../Components/Form/FormHelper","../../Components/LabelPicker","knockout"],function(e,t,n,i,r,o,a,s,l,c){"use strict";Cesium.Check;const u=Cesium.defined;Cesium.DeveloperError;function d(d,h){const p=this;this._selectedStory=d,this.areLabelsEnabled=e.isEnabledForServer(e.Server.LABELS);const f=c.pureComputed(function(){const e=p._selectedStory();return!!u(e)&&e._pending()});this._pending=f,this._nameField=new o({label:"Name",type:"text",pending:f,input:c.pureComputed({read:function(){const e=p.selectedStory();return u(e)?e.name():""},write:function(e){const t=p.selectedStory();u(t)&&t.name()!==e&&!i(e)&&t.saveAttribute("name",e)}})});const m=new s,g=c.pureComputed({read:function(){return!!u(d())&&d().shared()},write:function(){const e=d();u(e)&&e.toggleShare()}}),v=c.pureComputed(function(){return u(d())?d().shared()?"Sharing is on":"Sharing is off":""});this._shared=g,this._toggle=m.createHorizontalForm([m.createToggle({label:"Share",helperText:v,input:g})]),this._deleteButton=new a({confirmText:"Delete story?",pending:f}),this._name=c.pureComputed(function(){const e=d();return u(e)?e.name():""});const b=c.pureComputed(function(){const e=d();return u(e)?e.id:""});this._storiesUrl=c.pureComputed(function(){const e=b();return""!==e?`${t()}stories/editor/?id=${encodeURIComponent(e)}`:`${t()}stories/editor/`}),this._thumbnail=c.pureComputed(function(){const e=d();return u(e)?r.getStoryThumbnailUrl(e.id):""}),this._dateModified=c.pureComputed(function(){const e=d();return u(e)?e.dateModified:""}),this._link=c.pureComputed(function(){const e=d();return u(e)?e.link:""});const y=c.pureComputed({read:function(){const e=d();if(u(e))return e.labels()},write:function(e){d().saveAttribute("labels",e)}});this.labels=y,this._hasWebGL=n(),this.labelPicker=new l(y,"left","right"),this.setLabel=h,this._delete=this._deleteButton.delete,this.unselect=this.unselect.bind(this)}return Object.defineProperties(d.prototype,{pending:{get:function(){return this._pending}},name:{get:function(){return this._name}},storiesUrl:{get:function(){return this._storiesUrl}},thumbnail:{get:function(){return this._thumbnail}},dateModified:{get:function(){return this._dateModified}},link:{get:function(){return this._link}},shared:{get:function(){return this._shared}},selectedStory:{get:function(){return this._selectedStory}},delete:{get:function(){return this._delete}},deleteButton:{get:function(){return this._deleteButton}},nameField:{get:function(){return this._nameField}},toggle:{get:function(){return this._toggle}},hasWebGL:{get:function(){return this._hasWebGL}}}),d.prototype.unselect=function(){this.selectedStory(void 0)},d.prototype.selectShareLink=function(e,t){t.target.select()},d}),define("Views/Dashboard/Stories/StoryDetailsViewModel",["Core/Analytics","../../../Core/getDocumentBaseUri","Core/Feature","Core/formatDateTime","../../../Core/Label","../../../Core/Services","../../Components/DeleteButton","knockout","toastr"],function(e,t,n,i,r,o,a,s,l){"use strict";const c=Cesium.defined,u=Cesium.DeveloperError;function d(e){return`${t()}stories/editor/?id=${encodeURIComponent(e)}`}function h(e){const t=s.observable(!1);this._id=e.id,this._name=s.observable(e.name),this._shared=s.observable(e.shared);const o=new Date(e.dateModified);this._date=o,this._dateModified=i(o),this.deleteButton=new a({confirmText:"Delete story?",hideLowerText:!0,width:200,pending:t,data:this,placement:"bottom",xsPlacement:"bottom",viewUrl:"Views/Dashboard/Stories/StoriesTileDeleteButton.html"}),this.deleteEvent=this.deleteButton.delete,this.delete=this.delete.bind(this),this.toggleShare=this.toggleShare.bind(this);let l=[];c(e.labels)&&n.isEnabledForServer(n.Server.LABELS)&&(l=e.labels),this.labels=s.observableArray(l.map(function(e){return new r(e)})),this._copyPending=s.observable(!1),this._assets=void 0,this._pending=t,this._inactive=!1}return Object.defineProperties(h.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},shared:{get:function(){return this._shared}},thumbnail:{get:function(){return o.getStoryThumbnailUrl(this._id)}},dateModified:{get:function(){return this._dateModified}},date:{get:function(){return this._date}},link:{get:function(){return`${t()}stories/viewer/?id=${this.id}`}},editorLink:{get:function(){return d(this.id)}},assets:{get:function(){return this._assets}},copyPending:{get:function(){return this._copyPending}}}),h.prototype.saveAttribute=async function(e,t){const n=this._pending;if(n())throw new u("Other database calls are still pending");const i=this,r={};r[e]=t,n(!0);try{"labels"===e?await o.putStoryLabels(this.id,t.map(function(e){return e.id})):await o.patchStory(this.id,r),i[e](t)}catch(a){l.error(o.getErrorMessage(a),"Failed to save story")}finally{n(!1)}},h.prototype.delete=async function(){const e=this._pending;if(e())throw new u("Other database calls are still pending");e(!0);try{await o.deleteStory(this.id)}catch(t){l.error(o.getErrorMessage(t),"Failed to delete story")}finally{e(!1)}},h.prototype.toggleShare=async function(){const e=this,t=this._pending;if(t())throw new u("Other database calls are still pending");t(!0);const n=this.shared();try{n?await o.unshareStory(this.id):await o.shareStory(this.id),e.shared(!n)}catch(i){l.error(o.getErrorMessage(i),"Failed to update story")}finally{t(!1)}},h.prototype.openEditor=function(){window.location=this.editorLink},h.prototype.copyStory=async function(){this.copyPending(!0),e.sendEvent4("duplicate_story");try{const e=d((await o.postStory({name:`Copy of ${this._name()}`,copyFrom:this.id})).id);window.location=e}catch(t){console.error(t),l.error("There was a problem copying the story")}finally{this.copyPending(!1)}},h.getAll=o.getStories,h.prototype.destroy=function(){this._inactive=!0},h}),define("text!Views/Help/StoriesShellHelp.md",[],function(){return'Cesium Stories allows you to build and share 3D geospatial presentations and stories on the web.\n\n**Create a story** by clicking <label class="btn btn-primary btn-xs btn-no-action">New Story</label>.\n\n**Edit a story** by first clicking on it\'s icon and then clicking <label class="btn btn-default btn-xs btn-no-action">Edit story</label> on the upper right.\n\n**Delete** the story by clicking the delete button (<span class="fa fa-trash"></span>) in the upper-right.\n\n<div data-bind="if: isPublicInternetAccessEnabled">\n\nSee the <a href="https://cesium.com/learn/ion/stories-introduction/" target="_blank">tutorial</a> for a full walk-through.\n\n</div>\n'}),define("Views/Dashboard/Stories/StoriesShell",["../../../Core/hasWebGLSupport","../DashboardShell","./StoryDetails","./StoryDetailsViewModel","Core/getDocumentBaseUri","text!Views/Help/StoriesShellHelp.md"],function(e,t,n,i,r,o){"use strict";function a(){const r=e(),s=new t({detailsPane:n,itemViewModel:i,title:"Stories",hash:"stories",path:"Views/Dashboard/Stories/Stories",newButtonText:"New story",enableGrid:!0,editRoute:{name:"stories/editor/",external:!0,fragment:!0},helpContent:o,searchFields:["name","labels"],disableNew:!r,hint:r?void 0:'Creating and editing stories is unavailable because you are on a browser that does not support WebGL. <a href="webgl" target="_blank">More info...</a>'});this._removeNewEventListener=s.listPane.newItem.addEventListener(function(){a._createNewStory()}),this.layout=s}return a.prototype.activate=function(e){this.layout.loadItems(e)},a.prototype.detached=function(){this._removeNewEventListener()},a._createNewStory=function(){window.location=`${r()}stories/editor/`},a}),define("Views/Dashboard/Tokens/TokensShell",["Core/ReactInterop"],function(e){"use strict";return e.createPage("ion-tokens-page",{onActivate(e,t){e.query=t}})}),
/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("c3",t):(e=e||self).c3=t()}(this,function(){"use strict";function e(e){var t=this;t.d3=window.d3?window.d3:"undefined"!=typeof require?require("d3"):void 0,t.api=e,t.config=t.getDefaultConfig(),t.data={},t.cache={},t.axes={}}function t(n){this.internal=new e(this),this.internal.loadConfig(n),this.internal.beforeInit(n),this.internal.init(),this.internal.afterInit(n),function e(t,n,i){Object.keys(t).forEach(function(r){n[r]=t[r].bind(i),Object.keys(t[r]).length>0&&e(t[r],n[r],i)})}(t.prototype,this,this)}var i=function(e){return Math.ceil(e)+.5},r=function(e){return 10*Math.ceil(e/10)},o=function(e){return e[1]-e[0]},a=function(e,t,n){return u(e[t])?e[t]:n},s=function(e){var t=l(e),n=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)];return{x:n[0].x,y:Math.min(n[0].y,n[1].y),width:t.width,height:t.height}},l=function(e){try{return e.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}},c=function(e){return Array.isArray(e)},u=function(e){return void 0!==e},d=function(e){return null==e||f(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length},h=function(e){return"function"==typeof e},p=function(e){return"number"==typeof e},f=function(e){return"string"==typeof e},m=function(e){return void 0===e},g=function(e){return e||0===e},v=function(e){return!d(e)},b=function(e){return"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},y=function(e){var t=function(e){void 0===e&&(e=window.navigator.userAgent);var t=e.indexOf("MSIE ");return t>0?parseInt(e.substring(t+5,e.indexOf(".",t)),10):(t=e.indexOf("Trident/"))>0&&(t=e.indexOf("rv:"),parseInt(e.substring(t+3,e.indexOf(".",t)),10))}();return void 0===e?!!t:e===t};function w(e,t){var n=this;n.component=e,n.params=t||{},n.d3=e.d3,n.scale=n.d3.scaleLinear(),n.range,n.orient="bottom",n.innerTickSize=6,n.outerTickSize=this.params.withOuterTick?6:0,n.tickPadding=3,n.tickValues=null,n.tickFormat,n.tickArguments,n.tickOffset=0,n.tickCulling=!0,n.tickCentered,n.tickTextCharSize,n.tickTextRotate=n.params.tickTextRotate,n.tickLength,n.axis=n.generateAxis()}w.prototype.axisX=function(e,t,n){e.attr("transform",function(e){return"translate("+Math.ceil(t(e)+n)+", 0)"})},w.prototype.axisY=function(e,t){e.attr("transform",function(e){return"translate(0,"+Math.ceil(t(e))+")"})},w.prototype.scaleExtent=function(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]},w.prototype.generateTicks=function(e){var t,n,i=[];if(e.ticks)return e.ticks.apply(e,this.tickArguments);for(n=e.domain(),t=Math.ceil(n[0]);t<n[1];t++)i.push(t);return i.length>0&&i[0]>0&&i.unshift(i[0]-(i[1]-i[0])),i},w.prototype.copyScale=function(){var e,t=this,n=t.scale.copy();return t.params.isCategory&&(e=t.scale.domain(),n.domain([e[0],e[1]-1])),n},w.prototype.textFormatted=function(e){var t=this.tickFormat?this.tickFormat(e):e;return void 0!==t?t:""},w.prototype.updateRange=function(){var e=this;return e.range=e.scale.rangeExtent?e.scale.rangeExtent():e.scaleExtent(e.scale.range()),e.range},w.prototype.updateTickTextCharSize=function(e){var t=this;if(t.tickTextCharSize)return t.tickTextCharSize;var n={h:11.5,w:5.5};return e.select("text").text(function(e){return t.textFormatted(e)}).each(function(e){var i=l(this),r=t.textFormatted(e),o=i.height,a=r?i.width/r.length:void 0;o&&a&&(n.h=o,n.w=a)}).text(""),t.tickTextCharSize=n,n},w.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},w.prototype.tspanData=function(e,t,n){var i=this,r=i.params.tickMultiline?i.splitTickText(e,n):[].concat(i.textFormatted(e));return i.params.tickMultiline&&i.params.tickMultilineMax>0&&(r=i.ellipsify(r,i.params.tickMultilineMax)),r.map(function(e){return{index:t,splitted:e,length:r.length}})},w.prototype.splitTickText=function(e,t){var n,i,r,o=this,a=o.textFormatted(e),s=o.params.tickWidth;if("[object Array]"===Object.prototype.toString.call(a))return a;return(!s||s<=0)&&(s=o.isVertical()?95:o.params.isCategory?Math.ceil(t(1)-t(0))-12:110),function e(t,a){i=void 0;for(var l=1;l<a.length;l++)if(" "===a.charAt(l)&&(i=l),n=a.substr(0,l+1),r=o.tickTextCharSize.w*n.length,s<r)return e(t.concat(a.substr(0,i||l)),a.slice(i?i+1:l));return t.concat(a)}([],a+"")},w.prototype.ellipsify=function(e,t){if(e.length<=t)return e;for(var n=e.slice(0,t),i=3,r=t-1;r>=0;r--){var o=n[r].length;if(n[r]=n[r].substr(0,o-i).padEnd(o,"."),(i-=o)<=0)break}return n},w.prototype.updateTickLength=function(){var e=this;e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding},w.prototype.lineY2=function(e){var t=this,n=t.scale(e)+(t.tickCentered?0:t.tickOffset);return t.range[0]<n&&n<t.range[1]?t.innerTickSize:0},w.prototype.textY=function(){var e=this.tickTextRotate;return e?11.5-e/15*2.5*(e>0?1:-1):this.tickLength},w.prototype.textTransform=function(){var e=this.tickTextRotate;return e?"rotate("+e+")":""},w.prototype.textTextAnchor=function(){var e=this.tickTextRotate;return e?e>0?"start":"end":"middle"},w.prototype.tspanDx=function(){var e=this.tickTextRotate;return e?8*Math.sin(Math.PI*(e/180)):0},w.prototype.tspanDy=function(e,t){var n=this,i=n.tickTextCharSize.h;return 0===t&&(i=n.isVertical()?-((e.length-1)*(n.tickTextCharSize.h/2)-3):".71em"),i},w.prototype.generateAxis=function(){var e=this,t=e.d3,n=e.params;function i(r,o){var a;return r.each(function(){var r,s,l,c=i.g=t.select(this),u=this.__chart__||e.scale,d=this.__chart__=e.copyScale(),h=e.tickValues?e.tickValues:e.generateTicks(d),p=c.selectAll(".tick").data(h,d),f=p.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),m=p.exit().remove(),g=p.merge(f);n.isCategory?(e.tickOffset=Math.ceil((d(1)-d(0))/2),s=e.tickCentered?0:e.tickOffset,l=e.tickCentered?e.tickOffset:0):e.tickOffset=s=0,e.updateRange(),e.updateTickLength(),e.updateTickTextCharSize(c.select(".tick"));var v=g.select("line").merge(f.append("line")),b=g.select("text").merge(f.append("text")),y=g.selectAll("text").selectAll("tspan").data(function(t,n){return e.tspanData(t,n,d)}),w=y.enter().append("tspan").merge(y).text(function(e){return e.splitted});y.exit().remove();var _=c.selectAll(".domain").data([0]),x=_.enter().append("path").merge(_).attr("class","domain");switch(e.orient){case"bottom":r=e.axisX,v.attr("x1",s).attr("x2",s).attr("y2",function(t,n){return e.lineY2(t,n)}),b.attr("x",0).attr("y",function(t,n){return e.textY(t,n)}).attr("transform",function(t,n){return e.textTransform(t,n)}).style("text-anchor",function(t,n){return e.textTextAnchor(t,n)}),w.attr("x",0).attr("dy",function(t,n){return e.tspanDy(t,n)}).attr("dx",function(t,n){return e.tspanDx(t,n)}),x.attr("d","M"+e.range[0]+","+e.outerTickSize+"V0H"+e.range[1]+"V"+e.outerTickSize);break;case"top":r=e.axisX,v.attr("x1",s).attr("x2",s).attr("y2",function(t,n){return-1*e.lineY2(t,n)}),b.attr("x",0).attr("y",function(t,i){return-1*e.textY(t,i)-(n.isCategory?2:e.tickLength-2)}).attr("transform",function(t,n){return e.textTransform(t,n)}).style("text-anchor",function(t,n){return e.textTextAnchor(t,n)}),w.attr("x",0).attr("dy",function(t,n){return e.tspanDy(t,n)}).attr("dx",function(t,n){return e.tspanDx(t,n)}),x.attr("d","M"+e.range[0]+","+-e.outerTickSize+"V0H"+e.range[1]+"V"+-e.outerTickSize);break;case"left":r=e.axisY,v.attr("x2",-e.innerTickSize).attr("y1",l).attr("y2",l),b.attr("x",-e.tickLength).attr("y",e.tickOffset).style("text-anchor","end"),w.attr("x",-e.tickLength).attr("dy",function(t,n){return e.tspanDy(t,n)}),x.attr("d","M"+-e.outerTickSize+","+e.range[0]+"H0V"+e.range[1]+"H"+-e.outerTickSize);break;case"right":r=e.axisY,v.attr("x2",e.innerTickSize).attr("y1",l).attr("y2",l),b.attr("x",e.tickLength).attr("y",e.tickOffset).style("text-anchor","start"),w.attr("x",e.tickLength).attr("dy",function(t,n){return e.tspanDy(t,n)}),x.attr("d","M"+e.outerTickSize+","+e.range[0]+"H0V"+e.range[1]+"H"+e.outerTickSize)}if(d.rangeBand){var S=d,T=S.rangeBand()/2;u=d=function(e){return S(e)+T}}else u.rangeBand?u=d:m.call(r,d,e.tickOffset);f.call(r,u,e.tickOffset),a=(o?g.transition(o):g).style("opacity",1).call(r,d,e.tickOffset)}),a}return i.scale=function(t){return arguments.length?(e.scale=t,i):e.scale},i.orient=function(t){return arguments.length?(e.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",i):e.orient},i.tickFormat=function(t){return arguments.length?(e.tickFormat=t,i):e.tickFormat},i.tickCentered=function(t){return arguments.length?(e.tickCentered=t,i):e.tickCentered},i.tickOffset=function(){return e.tickOffset},i.tickInterval=function(){var t;return(t=n.isCategory?2*e.tickOffset:(i.g.select("path.domain").node().getTotalLength()-2*e.outerTickSize)/i.g.selectAll("line").size())===1/0?0:t},i.ticks=function(){return arguments.length?(e.tickArguments=arguments,i):e.tickArguments},i.tickCulling=function(t){return arguments.length?(e.tickCulling=t,i):e.tickCulling},i.tickValues=function(t){if("function"==typeof t)e.tickValues=function(){return t(e.scale.domain())};else{if(!arguments.length)return e.tickValues;e.tickValues=t}return i},i};var _={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},x=function(e){this.owner=e,this.d3=e.d3,this.internal=w},S=x;S.prototype.init=function(){var e=this.owner,t=e.config,n=e.main;e.axes.x=n.append("g").attr("class",_.axis+" "+_.axisX).attr("clip-path",t.axis_x_inner?"":e.clipPathForXAxis).attr("transform",e.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden"),e.axes.x.append("text").attr("class",_.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),e.axes.y=n.append("g").attr("class",_.axis+" "+_.axisY).attr("clip-path",t.axis_y_inner?"":e.clipPathForYAxis).attr("transform",e.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden"),e.axes.y.append("text").attr("class",_.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=n.append("g").attr("class",_.axis+" "+_.axisY2).attr("transform",e.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden"),e.axes.y2.append("text").attr("class",_.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},S.prototype.getXAxis=function(e,t,n,i,r,o,a){var s=this.owner,l=s.config,c={isCategory:s.isCategorized(),withOuterTick:r,tickMultiline:l.axis_x_tick_multiline,tickMultilineMax:l.axis_x_tick_multiline?Number(l.axis_x_tick_multilineMax):0,tickWidth:l.axis_x_tick_width,tickTextRotate:a?0:l.axis_x_tick_rotate,withoutTransition:o},u=new this.internal(this,c).axis.scale(e).orient(t);return s.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map(function(e){return s.parseDate(e)})),u.tickFormat(n).tickValues(i),s.isCategorized()&&(u.tickCentered(l.axis_x_tick_centered),d(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1)),u},S.prototype.updateXAxisTickValues=function(e,t){var n,i=this.owner,r=i.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(e),r.axis_x_tick_count,i.isTimeSeries())),t?t.tickValues(n):(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n},S.prototype.getYAxis=function(e,t,n,i,r,o,a){var s=this.owner,l=s.config,c=l["axis_"+e+"_tick_format"];!c&&s.isAxisNormalized(e)&&(c=function(e){return e+"%"});var u=new this.internal(this,{withOuterTick:r,withoutTransition:o,tickTextRotate:a?0:l.axis_y_tick_rotate}).axis.scale(t).orient(n);return c&&u.tickFormat(c),s.isTimeSeriesY()?u.ticks(l.axis_y_tick_time_type,l.axis_y_tick_time_interval):u.tickValues(i),u},S.prototype.getId=function(e){var t=this.owner.config;return e in t.data_axes?t.data_axes[e]:"y"},S.prototype.getXAxisTickFormat=function(){var e=this.owner,t=e.config,n=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(e){return e};return t.axis_x_tick_format&&(h(t.axis_x_tick_format)?n=t.axis_x_tick_format:e.isTimeSeries()&&(n=function(n){return n?e.axisTimeFormat(t.axis_x_tick_format)(n):""})),h(n)?function(t){return n.call(e,t)}:n},S.prototype.getTickValues=function(e,t){return e||(t?t.tickValues():void 0)},S.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},S.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},S.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},S.prototype.getLabelOptionByAxisId=function(e){var t,n=this.owner.config;return"y"===e?t=n.axis_y_label:"y2"===e?t=n.axis_y2_label:"x"===e&&(t=n.axis_x_label),t},S.prototype.getLabelText=function(e){var t=this.getLabelOptionByAxisId(e);return f(t)?t:t?t.text:null},S.prototype.setLabelText=function(e,t){var n=this.owner.config,i=this.getLabelOptionByAxisId(e);f(i)?"y"===e?n.axis_y_label=t:"y2"===e?n.axis_y2_label=t:"x"===e&&(n.axis_x_label=t):i&&(i.text=t)},S.prototype.getLabelPosition=function(e,t){var n=this.getLabelOptionByAxisId(e),i=n&&"object"==typeof n&&n.position?n.position:t;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}},S.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},S.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},S.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},S.prototype.getLabelPositionById=function(e){return"y2"===e?this.getY2AxisLabelPosition():"y"===e?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},S.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},S.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},S.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},S.prototype.xForAxisLabel=function(e,t){var n=this.owner;return e?t.isLeft?0:t.isCenter?n.width/2:n.width:t.isBottom?-n.height:t.isMiddle?-n.height/2:0},S.prototype.dxForAxisLabel=function(e,t){return e?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"},S.prototype.textAnchorForAxisLabel=function(e,t){return e?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"},S.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},S.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},S.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},S.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},S.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},S.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},S.prototype.dyForXAxisLabel=function(){var e=this.owner,t=e.config,n=this.getXAxisLabelPosition();return t.axis_rotated?n.isInner?"1.2em":-25-(e.config.axis_x_inner?0:this.getMaxTickWidth("x")):n.isInner?"-0.5em":e.getHorizontalAxisHeight("x")-10},S.prototype.dyForYAxisLabel=function(){var e=this.owner,t=this.getYAxisLabelPosition();return e.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(e.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},S.prototype.dyForY2AxisLabel=function(){var e=this.owner,t=this.getY2AxisLabelPosition();return e.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(e.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},S.prototype.textAnchorForXAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(!e.config.axis_rotated,this.getXAxisLabelPosition())},S.prototype.textAnchorForYAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getYAxisLabelPosition())},S.prototype.textAnchorForY2AxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getY2AxisLabelPosition())},S.prototype.getMaxTickWidth=function(e,t){var n,i,r,o,a=this.owner,s=0;return t&&a.currentMaxTickWidths[e]||(a.svg&&(n=a.filterTargetsToShow(a.data.targets),"y"===e?(i=a.y.copy().domain(a.getYDomain(n,"y")),r=this.getYAxis(e,i,a.yOrient,a.yAxisTickValues,!1,!0,!0)):"y2"===e?(i=a.y2.copy().domain(a.getYDomain(n,"y2")),r=this.getYAxis(e,i,a.y2Orient,a.y2AxisTickValues,!1,!0,!0)):(i=a.x.copy().domain(a.getXDomain(n)),r=this.getXAxis(i,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,r)),(o=a.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(r).each(function(){a.d3.select(this).selectAll("text").each(function(){var e=l(this);s<e.width&&(s=e.width)}),o.remove()})),a.currentMaxTickWidths[e]=s<=0?a.currentMaxTickWidths[e]:s),a.currentMaxTickWidths[e]},S.prototype.updateLabels=function(e){var t=this.owner,n=t.main.select("."+_.axisX+" ."+_.axisXLabel),i=t.main.select("."+_.axisY+" ."+_.axisYLabel),r=t.main.select("."+_.axisY2+" ."+_.axisY2Label);(e?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(e?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(e?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},S.prototype.getPadding=function(e,t,n,i){var r="number"==typeof e?e:e[t];return g(r)?"ratio"===e.unit?e[t]*i:this.convertPixelsToAxisPadding(r,i):n},S.prototype.convertPixelsToAxisPadding=function(e,t){var n=this.owner;return t*(e/(n.config.axis_rotated?n.width:n.height))},S.prototype.generateTickValues=function(e,t,n){var i,r,o,a,s,l,c,u=e;if(t)if(1===(i=h(t)?t():t))u=[e[0]];else if(2===i)u=[e[0],e[e.length-1]];else if(i>2){for(a=i-2,r=e[0],s=((o=e[e.length-1])-r)/(a+1),u=[r],l=0;l<a;l++)c=+r+s*(l+1),u.push(n?new Date(c):c);u.push(o)}return n||(u=u.sort(function(e,t){return e-t})),u},S.prototype.generateTransitions=function(e){var t=this.owner.axes;return{axisX:e?t.x.transition().duration(e):t.x,axisY:e?t.y.transition().duration(e):t.y,axisY2:e?t.y2.transition().duration(e):t.y2,axisSubX:e?t.subx.transition().duration(e):t.subx}},S.prototype.redraw=function(e,t){var n=this.owner,i=e?n.d3.transition().duration(e):null;n.axes.x.style("opacity",t?0:1).call(n.xAxis,i),n.axes.y.style("opacity",t?0:1).call(n.yAxis,i),n.axes.y2.style("opacity",t?0:1).call(n.y2Axis,i),n.axes.subx.style("opacity",t?0:1).call(n.subXAxis,i)};var T={version:"0.7.20",chart:{fn:t.prototype,internal:{fn:e.prototype,axis:{fn:x.prototype,internal:{fn:w.prototype}}}},generate:function(e){return new t(e)}};function A(e,t,n){var i=[.01,10];function r(e){return n(t(e))}return t||(t=e.scaleLinear()).range(i),n||((n=e.scaleLog()).domain(i),n.nice()),r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain()},r.range=function(e){return arguments.length?(n.range(e),r):n.range()},r.ticks=function(e){return function(e,t,n){var i,r,o,a;if(arguments.length<3)n=10;else if(0===n)return[];a=(t-e)/(r=n-1),o=e,(i=new Array(n))[0]=Math.pow(10,o);for(var s=1;s<r;s++)o+=a,i[s]=Math.pow(10,o);return i[r]=Math.pow(10,t),i}(-2,1,e||10).map(function(e){return t.invert(e)})},r.copy=function(){return A(e,t.copy(),n.copy())},r}function C(e){return e/Math.pow(10,Math.ceil(Math.log(e)/Math.LN10-1e-12))===1}e.prototype.beforeInit=function(){},e.prototype.afterInit=function(){},e.prototype.init=function(){var e=this,t=e.config;if(e.initParams(),t.data_url)e.convertUrlToData(t.data_url,t.data_mimeType,t.data_headers,t.data_keys,e.initWithData);else if(t.data_json)e.initWithData(e.convertJsonToData(t.data_json,t.data_keys));else if(t.data_rows)e.initWithData(e.convertRowsToData(t.data_rows));else{if(!t.data_columns)throw Error("url or json or rows or columns is required.");e.initWithData(e.convertColumnsToData(t.data_columns))}},e.prototype.initParams=function(){var e=this,t=e.d3,n=e.config;e.clipId="c3-"+(new Date).valueOf()+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=void 0,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeParse=(n.data_xLocaltime?t.timeParse:t.utcParse)(e.config.data_xFormat),e.axisTimeFormat=n.axis_x_localtime?t.timeFormat:t.utcFormat,e.defaultAxisTimeFormat=function(e){return e.getMilliseconds()?t.timeFormat(".%L")(e):e.getSeconds()?t.timeFormat(":%S")(e):e.getMinutes()?t.timeFormat("%I:%M")(e):e.getHours()?t.timeFormat("%I %p")(e):e.getDay()&&1!==e.getDate()||1!==e.getDate()||e.getMonth()?t.timeFormat("%-m/%-d")(e):t.timeFormat("%Y/%-m/%-d")(e)},e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=n.axis_rotated?n.axis_x_inner?"right":"left":n.axis_x_inner?"top":"bottom",e.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",e.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",e.subXOrient=n.axis_rotated?"left":"bottom",e.isLegendRight="right"===n.legend_position,e.isLegendInset="inset"===n.legend_position,e.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,e.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=t.selectAll([])},e.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},e.prototype.initWithData=function(e){var t,n,i=this,r=i.d3,o=i.config,a=!0;i.axis=new x(i),o.bindto?"function"==typeof o.bindto.node?i.selectChart=o.bindto:i.selectChart=r.select(o.bindto):i.selectChart=r.selectAll([]),i.selectChart.empty()&&(i.selectChart=r.select(document.createElement("div")).style("opacity",0),i.observeInserted(i.selectChart),a=!1),i.selectChart.html("").classed("c3",!0),i.data.xs={},i.data.targets=i.convertDataToTargets(e),o.data_filter&&(i.data.targets=i.data.targets.filter(o.data_filter)),o.data_hide&&i.addHiddenTargetIds(!0===o.data_hide?i.mapToIds(i.data.targets):o.data_hide),o.legend_hide&&i.addHiddenLegendIds(!0===o.legend_hide?i.mapToIds(i.data.targets):o.legend_hide),i.isStanfordGraphType()&&i.initStanfordData(),i.updateSizes(),i.updateScales(),i.x.domain(r.extent(i.getXDomain(i.data.targets))),i.y.domain(i.getYDomain(i.data.targets,"y")),i.y2.domain(i.getYDomain(i.data.targets,"y2")),i.subX.domain(i.x.domain()),i.subY.domain(i.y.domain()),i.subY2.domain(i.y2.domain()),i.orgXDomain=i.x.domain(),i.svg=i.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return o.onmouseover.call(i)}).on("mouseleave",function(){return o.onmouseout.call(i)}),i.config.svg_classname&&i.svg.attr("class",i.config.svg_classname),t=i.svg.append("defs"),i.clipChart=i.appendClip(t,i.clipId),i.clipXAxis=i.appendClip(t,i.clipIdForXAxis),i.clipYAxis=i.appendClip(t,i.clipIdForYAxis),i.clipGrid=i.appendClip(t,i.clipIdForGrid),i.clipSubchart=i.appendClip(t,i.clipIdForSubchart),i.updateSvgSize(),n=i.main=i.svg.append("g").attr("transform",i.getTranslate("main")),i.initPie&&i.initPie(),i.initDragZoom&&i.initDragZoom(),o.subchart_show&&i.initSubchart&&i.initSubchart(),i.initTooltip&&i.initTooltip(),i.initLegend&&i.initLegend(),i.initTitle&&i.initTitle(),i.initZoom&&i.initZoom(),i.isStanfordGraphType()&&i.drawColorScale(),o.subchart_show&&i.initSubchartBrush&&i.initSubchartBrush(),n.append("text").attr("class",_.text+" "+_.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),i.initRegion(),i.initGrid(),n.append("g").attr("clip-path",i.clipPath).attr("class",_.chart),o.grid_lines_front&&i.initGridLines(),i.initStanfordElements(),i.initEventRect(),i.initChartElements(),i.axis.init(),i.updateTargets(i.data.targets),o.axis_x_selection&&i.brush.selectionAsValue(i.getDefaultSelection()),a&&(i.updateDimension(),i.config.oninit.call(i),i.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),i.bindResize(),i.bindWindowFocus(),i.api.element=i.selectChart.node()},e.prototype.smoothLines=function(e,t){var n=this;"grid"===t&&e.each(function(){var e=n.d3.select(this),t=e.attr("x1"),i=e.attr("x2"),r=e.attr("y1"),o=e.attr("y2");e.attr({x1:Math.ceil(t),x2:Math.ceil(i),y1:Math.ceil(r),y2:Math.ceil(o)})})},e.prototype.updateSizes=function(){var e=this,t=e.config,n=e.legend?e.getLegendHeight():0,i=e.legend?e.getLegendWidth():0,r=e.isLegendRight||e.isLegendInset?0:n,o=e.hasArcType(),a=t.axis_rotated||o?0:e.getHorizontalAxisHeight("x"),s=t.axis_rotated||o?0:e.getHorizontalAxisHeight("x",!0),l=t.subchart_show&&!o?t.subchart_size_height+s:0;e.currentWidth=e.getCurrentWidth(),e.currentHeight=e.getCurrentHeight(),e.margin=t.axis_rotated?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+r+e.getCurrentPaddingBottom(),left:l+(o?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(),bottom:a+l+r+e.getCurrentPaddingBottom(),left:o?0:e.getCurrentPaddingLeft()},e.margin2=t.axis_rotated?{top:e.margin.top,right:NaN,bottom:20+r,left:e.rotated_padding_left}:{top:e.currentHeight-l-r,right:NaN,bottom:s+r,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(n,i),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=t.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=t.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?i+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!t.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&o&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)},e.prototype.updateTargets=function(e){var t=this,n=t.config;t.updateTargetsForText(e),t.updateTargetsForBar(e),t.updateTargetsForLine(e),t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(e),n.subchart_show&&t.updateTargetsForSubchart&&t.updateTargetsForSubchart(e),t.showTargets()},e.prototype.showTargets=function(){var e=this;e.svg.selectAll("."+_.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},e.prototype.redraw=function(e,t){var n,i,r,o,s,l,c,u,d,h,p,f,m,g,v,b,y,w,x,S,T,A,C,E,k,I,P,D,O,M,L,R=this,N=R.main,F=R.d3,U=R.config,V=R.getShapeIndices(R.isAreaType),B=R.getShapeIndices(R.isBarType),$=R.getShapeIndices(R.isLineType),H=R.hasArcType(),G=R.filterTargetsToShow(R.data.targets),j=R.xv.bind(R);if(n=a(e=e||{},"withY",!0),i=a(e,"withSubchart",!0),r=a(e,"withTransition",!0),l=a(e,"withTransform",!1),c=a(e,"withUpdateXDomain",!1),u=a(e,"withUpdateOrgXDomain",!1),d=a(e,"withTrimXDomain",!0),m=a(e,"withUpdateXAxis",c),h=a(e,"withLegend",!1),p=a(e,"withEventRect",!0),f=a(e,"withDimension",!0),o=a(e,"withTransitionForExit",r),s=a(e,"withTransitionForAxis",r),x=r?U.transition_duration:0,S=o?x:0,T=s?x:0,t=t||R.axis.generateTransitions(T),h&&U.legend_show?R.updateLegend(R.mapToIds(R.data.targets),e,t):f&&R.updateDimension(!0),R.isCategorized()&&0===G.length&&R.x.domain([0,R.axes.x.selectAll(".tick").size()]),G.length?(R.updateXDomain(G,c,u,d),U.axis_x_tick_values||(I=R.axis.updateXAxisTickValues(G))):(R.xAxis.tickValues([]),R.subXAxis.tickValues([])),U.zoom_rescale&&!e.flow&&(O=R.x.orgDomain()),R.y.domain(R.getYDomain(G,"y",O)),R.y2.domain(R.getYDomain(G,"y2",O)),!U.axis_y_tick_values&&U.axis_y_tick_count&&R.yAxis.tickValues(R.axis.generateTickValues(R.y.domain(),U.axis_y_tick_count)),!U.axis_y2_tick_values&&U.axis_y2_tick_count&&R.y2Axis.tickValues(R.axis.generateTickValues(R.y2.domain(),U.axis_y2_tick_count)),R.axis.redraw(T,H),R.axis.updateLabels(r),(c||m)&&G.length)if(U.axis_x_tick_culling&&I){for(P=1;P<I.length;P++)if(I.length/P<U.axis_x_tick_culling_max){D=P;break}R.svg.selectAll("."+_.axisX+" .tick text").each(function(e){var t=I.indexOf(e);t>=0&&F.select(this).style("display",t%D?"none":"block")})}else R.svg.selectAll("."+_.axisX+" .tick text").style("display","block");g=R.generateDrawArea?R.generateDrawArea(V,!1):void 0,v=R.generateDrawBar?R.generateDrawBar(B):void 0,b=R.generateDrawLine?R.generateDrawLine($,!1):void 0,y=R.generateXYForText(V,B,$,!0),w=R.generateXYForText(V,B,$,!1),R.updateCircleY(),M=(R.config.axis_rotated?R.circleY:R.circleX).bind(R),L=(R.config.axis_rotated?R.circleX:R.circleY).bind(R),n&&(R.subY.domain(R.getYDomain(G,"y")),R.subY2.domain(R.getYDomain(G,"y2"))),R.updateXgridFocus(),N.select("text."+_.text+"."+_.empty).attr("x",R.width/2).attr("y",R.height/2).text(U.data_empty_label_text).transition().style("opacity",G.length?0:1),p&&R.redrawEventRect(),R.updateGrid(x),R.updateStanfordElements(x),R.updateRegion(x),R.updateBar(S),R.updateLine(S),R.updateArea(S),R.updateCircle(M,L),R.hasDataLabel()&&R.updateText(y,w,S),R.redrawTitle&&R.redrawTitle(),R.redrawArc&&R.redrawArc(x,S,l),U.subchart_show&&R.redrawSubchart&&R.redrawSubchart(i,t,x,S,V,B,$),R.isStanfordGraphType()&&R.drawColorScale(),N.selectAll("."+_.selectedCircles).filter(R.isBarType.bind(R)).selectAll("circle").remove(),e.flow&&(E=R.generateFlow({targets:G,flow:e.flow,duration:e.flow.duration,drawBar:v,drawLine:b,drawArea:g,cx:M,cy:L,xv:j,xForText:y,yForText:w})),x&&R.isTabVisible()?(k=F.transition().duration(x),A=[],[R.redrawBar(v,!0,k),R.redrawLine(b,!0,k),R.redrawArea(g,!0,k),R.redrawCircle(M,L,!0,k),R.redrawText(y,w,e.flow,!0,k),R.redrawRegion(!0,k),R.redrawGrid(!0,k)].forEach(function(e){e.forEach(function(e){A.push(e)})}),C=R.generateWait(),A.forEach(function(e){C.add(e)}),C(function(){E&&E(),U.onrendered&&U.onrendered.call(R)})):(R.redrawBar(v),R.redrawLine(b),R.redrawArea(g),R.redrawCircle(M,L),R.redrawText(y,w,e.flow),R.redrawRegion(),R.redrawGrid(),E&&E(),U.onrendered&&U.onrendered.call(R)),R.mapToIds(R.data.targets).forEach(function(e){R.withoutFadeIn[e]=!0})},e.prototype.updateAndRedraw=function(e){var t,n=this,i=n.config;(e=e||{}).withTransition=a(e,"withTransition",!0),e.withTransform=a(e,"withTransform",!1),e.withLegend=a(e,"withLegend",!1),e.withUpdateXDomain=a(e,"withUpdateXDomain",!0),e.withUpdateOrgXDomain=a(e,"withUpdateOrgXDomain",!0),e.withTransitionForExit=!1,e.withTransitionForTransform=a(e,"withTransitionForTransform",e.withTransition),n.updateSizes(),e.withLegend&&i.legend_show||(t=n.axis.generateTransitions(e.withTransitionForAxis?i.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,t)),n.redraw(e,t)},e.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},e.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},e.prototype.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},e.prototype.isCustomX=function(){var e=this.config;return!this.isTimeSeries()&&(e.data_x||v(e.data_xs))},e.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},e.prototype.getTranslate=function(e){var t,n,r=this,o=r.config;return"main"===e?(t=i(r.margin.left),n=i(r.margin.top)):"context"===e?(t=i(r.margin2.left),n=i(r.margin2.top)):"legend"===e?(t=r.margin3.left,n=r.margin3.top):"x"===e?(t=0,n=o.axis_rotated?0:r.height):"y"===e?(t=0,n=o.axis_rotated?r.height:0):"y2"===e?(t=o.axis_rotated?0:r.width,n=o.axis_rotated?1:0):"subx"===e?(t=0,n=o.axis_rotated?0:r.height2):"arc"===e&&(t=r.arcWidth/2,n=r.arcHeight/2-(r.hasType("gauge")?6:0)),"translate("+t+","+n+")"},e.prototype.initialOpacity=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?1:0},e.prototype.initialOpacityForCircle=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},e.prototype.opacityForCircle=function(e){var t=(h(this.config.point_show)?this.config.point_show(e):this.config.point_show)||this.isStanfordType(e)?1:0;return g(e.value)?this.isScatterType(e)?.5:t:0},e.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},e.prototype.xx=function(e){return e?this.x(e.x):null},e.prototype.xvCustom=function(e,t){var n=this,i=t?e[t]:e.value;return n.isTimeSeries()?i=n.parseDate(e.value):n.isCategorized()&&"string"==typeof e.value&&(i=n.config.axis_x_categories.indexOf(e.value)),Math.ceil(n.x(i))},e.prototype.yvCustom=function(e,t){var n=e.axis&&"y2"===e.axis?this.y2:this.y,i=t?e[t]:e.value;return Math.ceil(n(i))},e.prototype.xv=function(e){var t=this,n=e.value;return t.isTimeSeries()?n=t.parseDate(e.value):t.isCategorized()&&"string"==typeof e.value&&(n=t.config.axis_x_categories.indexOf(e.value)),Math.ceil(t.x(n))},e.prototype.yv=function(e){var t=e.axis&&"y2"===e.axis?this.y2:this.y;return Math.ceil(t(e.value))},e.prototype.subxx=function(e){return e?this.subX(e.x):null},e.prototype.transformMain=function(e,t){var n,i,r,o=this;t&&t.axisX?n=t.axisX:(n=o.main.select("."+_.axisX),e&&(n=n.transition())),t&&t.axisY?i=t.axisY:(i=o.main.select("."+_.axisY),e&&(i=i.transition())),t&&t.axisY2?r=t.axisY2:(r=o.main.select("."+_.axisY2),e&&(r=r.transition())),(e?o.main.transition():o.main).attr("transform",o.getTranslate("main")),n.attr("transform",o.getTranslate("x")),i.attr("transform",o.getTranslate("y")),r.attr("transform",o.getTranslate("y2")),o.main.select("."+_.chartArcs).attr("transform",o.getTranslate("arc"))},e.prototype.transformAll=function(e,t){var n=this;n.transformMain(e,t),n.config.subchart_show&&n.transformContext(e,t),n.legend&&n.transformLegend(e)},e.prototype.updateSvgSize=function(){var e=this,t=e.svg.select("."+_.brush+" .overlay");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight),e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height),e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",t.size()&&t.attr("height")||0),e.selectChart.style("max-height",e.currentHeight+"px")},e.prototype.updateDimension=function(e){var t=this;e||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis))),t.updateSizes(),t.updateScales(),t.updateSvgSize(),t.transformAll(!1)},e.prototype.observeInserted=function(e){var t,n=this;"undefined"!=typeof MutationObserver?(t=new MutationObserver(function(i){i.forEach(function(i){"childList"===i.type&&i.previousSibling&&(t.disconnect(),n.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},e.prototype.bindResize=function(){var e=this,t=e.config;e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){t.onresize.call(e)}),t.resize_auto&&e.resizeFunction.add(function(){void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),e.resizeTimeout=window.setTimeout(function(){delete e.resizeTimeout,e.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.brush&&e.brush.update()},100)}),e.resizeFunction.add(function(){t.onresized.call(e)}),e.resizeIfElementDisplayed=function(){null!=e.api&&e.api.element.offsetParent&&e.resizeFunction()},window.addEventListener("resize",e.resizeIfElementDisplayed,!1)},e.prototype.bindWindowFocus=function(){var e=this;this.windowFocusHandler||(this.windowFocusHandler=function(){e.redraw()},window.addEventListener("focus",this.windowFocusHandler))},e.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},e.prototype.generateResize=function(){var e=[];function t(){e.forEach(function(e){e()})}return t.add=function(t){e.push(t)},t.remove=function(t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}},t},e.prototype.endall=function(e,t){var n=0;e.each(function(){++n}).on("end",function(){--n||t.apply(this,arguments)})},e.prototype.generateWait=function(){var e=this,t=[],i=function(i){var r=setInterval(function(){if(e.isTabVisible()){var o=0;t.forEach(function(e){if(e.empty())o+=1;else try{e.transition()}catch(n){o+=1}}),o===t.length&&(clearInterval(r),i&&i())}},50)};return i.add=function(e){t.push(e)},i},e.prototype.parseDate=function(e){var t;return e instanceof Date?t=e:"string"==typeof e?t=this.dataTimeParse(e):"object"==typeof e?t=new Date(+e):"number"!=typeof e||isNaN(e)||(t=new Date(+e)),t&&!isNaN(+t)||window.console.error("Failed to parse x '"+e+"' to Date object"),t},e.prototype.isTabVisible=function(){return!document.hidden},e.prototype.getPathBox=s,e.prototype.CLASS=_,"SVGPathSeg"in window||(window.SVGPathSeg=function(e,t,n){this.pathSegType=e,this.pathSegTypeAsLetter=t,this._owningPathSegList=n},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",e)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",e),this._x=t,this._y=n},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",e),this._x=t,this._y=n},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",e),this._x=t,this._y=n},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",e),this._x=t,this._y=n},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(e,t,n,i,r,o,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",e),this._x=t,this._y=n,this._x1=i,this._y1=r,this._x2=o,this._y2=a},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(e,t,n,i,r,o,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",e),this._x=t,this._y=n,this._x1=i,this._y1=r,this._x2=o,this._y2=a},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(e,t,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",e),this._x=t,this._y=n,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(e,t,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",e),this._x=t,this._y=n,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(e,t,n,i,r,o,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",e),this._x=t,this._y=n,this._r1=i,this._r2=r,this._angle=o,this._largeArcFlag=a,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(e,t,n,i,r,o,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",e),this._x=t,this._y=n,this._r1=i,this._r2=r,this._angle=o,this._largeArcFlag=a,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",e),this._x=t},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",e),this._x=t},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",e),this._y=t},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",e),this._y=t},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(e,t,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",e),this._x=t,this._y=n,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(e,t,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",e),this._x=t,this._y=n,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",e),this._x=t,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",e),this._x=t,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(e,t){return new window.SVGPathSegMovetoAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(e,t){return new window.SVGPathSegMovetoRel(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(e,t){return new window.SVGPathSegLinetoAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(e,t){return new window.SVGPathSegLinetoRel(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(e,t,n,i,r,o){return new window.SVGPathSegCurvetoCubicAbs(void 0,e,t,n,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(e,t,n,i,r,o){return new window.SVGPathSegCurvetoCubicRel(void 0,e,t,n,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(e,t,n,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,e,t,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(e,t,n,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,e,t,n,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(e,t,n,i,r,o,a){return new window.SVGPathSegArcAbs(void 0,e,t,n,i,r,o,a)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(e,t,n,i,r,o,a){return new window.SVGPathSegArcRel(void 0,e,t,n,i,r,o,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new window.SVGPathSegLinetoHorizontalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new window.SVGPathSegLinetoHorizontalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new window.SVGPathSegLinetoVerticalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new window.SVGPathSegLinetoVerticalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(e,t,n,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,e,t,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(e,t,n,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,e,t,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(e,t){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(e,t){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,e,t)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(e){if(void 0===e||!isFinite(e))throw"Invalid arguments.";var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",this.getAttribute("d"));var n=t.pathSegList.numberOfItems-1;if(n<=0)return 0;do{if(t.pathSegList.removeItem(n),e>t.getTotalLength())break;n--}while(n>0);return n})),"SVGPathSegList"in window||(window.SVGPathSegList=function(e){this._pathElement=e,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(e){if(this._pathElement){var t=!1;e.forEach(function(e){"d"==e.attributeName&&(t=!0)}),t&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(e){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(e){e._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype._checkValidIndex=function(e){if(isNaN(e)||e<0||e>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]},window.SVGPathSegList.prototype.insertItemBefore=function(e,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),e._owningPathSegList&&(e=e.clone()),this._list.splice(t,0,e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.replaceItem=function(e,t){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._checkValidIndex(t),this._list[t]=e,e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.removeItem=function(e){this._checkPathSynchronizedToList(),this._checkValidIndex(e);var t=this._list[e];return this._list.splice(e,1),this._writeListToPath(),t},window.SVGPathSegList.prototype.appendItem=function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList._pathSegArrayAsString=function(e){var t="",n=!0;return e.forEach(function(e){n?(n=!1,t+=e._asPathString()):t+=" "+e._asPathString()}),t},window.SVGPathSegList.prototype._parsePath=function(e){if(!e||0==e.length)return[];var t=this,n=function(){this.pathSegList=[]};n.prototype.appendSegment=function(e){this.pathSegList.push(e)};var i=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};i.prototype._isCurrentSpace=function(){var e=this._string[this._currentIndex];return e<=" "&&(" "==e||"\n"==e||"\t"==e||"\r"==e||"\f"==e)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var e=this._string[this._currentIndex];return this._pathSegTypeFromChar(e)},i.prototype._pathSegTypeFromChar=function(e){switch(e){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(e,t){return("+"==e||"-"==e||"."==e||e>="0"&&e<="9")&&t!=window.SVGPathSeg.PATHSEG_CLOSEPATH?t==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:t==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:t:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==window.SVGPathSeg.PATHSEG_MOVETO_ABS||e==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var e=0,t=0,n=1,i=0,r=1,o=1,a=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s)for(var l=this._currentIndex-1,c=1;l>=s;)t+=c*(this._string.charAt(l--)-"0"),c*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)n*=10,i+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!=a&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,o=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)e*=10,e+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var u=t+i;if(u*=r,e&&(u*=Math.pow(10,o*e)),a!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),u}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var e=!1,t=this._string.charAt(this._currentIndex++);if("0"==t)e=!1;else{if("1"!=t)return;e=!0}return this._skipOptionalSpacesOrDelimiter(),e}},i.prototype.parseSegment=function(){var e=this._string[this._currentIndex],n=this._pathSegTypeFromChar(e);if(n==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((n=this._nextCommandHelper(e,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=n,n){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(t);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(t,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(t,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(t,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(t,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(t,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(t,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(t,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(t,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}};var r=new n,o=new i(e);if(!o.initialCommandIsMoveTo())return[];for(;o.hasMoreData();){var a=o.parseSegment();if(!a)return[];r.appendSegment(a)}return r.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(e,t){return e|=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},writable:!0,configurable:!0}),t.prototype.axis=function(){},t.prototype.axis.labels=function(e){var t=this.internal;arguments.length&&(Object.keys(e).forEach(function(n){t.axis.setLabelText(n,e[n])}),t.axis.updateLabels())},t.prototype.axis.max=function(e){var t=this.internal,n=t.config;if(!arguments.length)return{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max};"object"==typeof e?(g(e.x)&&(n.axis_x_max=e.x),g(e.y)&&(n.axis_y_max=e.y),g(e.y2)&&(n.axis_y2_max=e.y2)):n.axis_y_max=n.axis_y2_max=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},t.prototype.axis.min=function(e){var t=this.internal,n=t.config;if(!arguments.length)return{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min};"object"==typeof e?(g(e.x)&&(n.axis_x_min=e.x),g(e.y)&&(n.axis_y_min=e.y),g(e.y2)&&(n.axis_y2_min=e.y2)):n.axis_y_min=n.axis_y2_min=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},t.prototype.axis.range=function(e){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};u(e.max)&&this.axis.max(e.max),u(e.min)&&this.axis.min(e.min)},t.prototype.axis.types=function(e){var t=this.internal;if(void 0===e)return{y:t.config.axis_y_type,y2:t.config.axis_y2_type};u(e.y)&&(t.config.axis_y_type=e.y),u(e.y2)&&(t.config.axis_y2_type=e.y2),t.updateScales(),t.redraw()},t.prototype.category=function(e,t){var n=this.internal,i=n.config;return arguments.length>1&&(i.axis_x_categories[e]=t,n.redraw()),i.axis_x_categories[e]},t.prototype.categories=function(e){var t=this.internal,n=t.config;return arguments.length?(n.axis_x_categories=e,t.redraw(),n.axis_x_categories):n.axis_x_categories},t.prototype.resize=function(e){var t=this.internal.config;t.size_width=e?e.width:null,t.size_height=e?e.height:null,this.flush()},t.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},t.prototype.destroy=function(){var e=this.internal;return window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),window.removeEventListener("resize",e.resizeIfElementDisplayed),e.resizeFunction.remove(),e.unbindWindowFocus(),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},t.prototype.color=function(e){return this.internal.color(e)},t.prototype.data=function(e){var t=this.internal.data.targets;return void 0===e?t:t.filter(function(t){return[].concat(e).indexOf(t.id)>=0})},t.prototype.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},t.prototype.data.values=function(e,t){void 0===t&&(t=!0);var n=null;if(e){var i=this.data(e);i&&c(i)&&(n=i.reduce(function(e,n){var i=n.values.map(function(e){return e.value});return t?e=e.concat(i):e.push(i),e},[]))}return n},t.prototype.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",e)},t.prototype.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)},t.prototype.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)},t.prototype.data.stackNormalized=function(e){if(void 0===e)return this.internal.isStackNormalized();this.internal.config.data_stack_normalize=!!e,this.internal.redraw()},t.prototype.donut=function(){},t.prototype.donut.padAngle=function(e){if(void 0===e)return this.internal.config.donut_padAngle;this.internal.config.donut_padAngle=e,this.flush()},t.prototype.flow=function(e){var t,n,i,r,o,a,s,l=this.internal,c=[],d=l.getMaxDataCount(),h=0,p=0;if(e.json)n=l.convertJsonToData(e.json,e.keys);else if(e.rows)n=l.convertRowsToData(e.rows);else{if(!e.columns)return;n=l.convertColumnsToData(e.columns)}t=l.convertDataToTargets(n,!0),l.data.targets.forEach(function(e){var n,i,r=!1;for(n=0;n<t.length;n++)if(e.id===t[n].id){for(r=!0,e.values[e.values.length-1]&&(p=e.values[e.values.length-1].index+1),h=t[n].values.length,i=0;i<h;i++)t[n].values[i].index=p+i,l.isTimeSeries()||(t[n].values[i].x=p+i);e.values=e.values.concat(t[n].values),t.splice(n,1);break}r||c.push(e.id)}),l.data.targets.forEach(function(e){var t,n;for(t=0;t<c.length;t++)if(e.id===c[t])for(p=e.values[e.values.length-1].index+1,n=0;n<h;n++)e.values.push({id:e.id,index:p+n,x:l.isTimeSeries()?l.getOtherTargetX(p+n):p+n,value:null})}),l.data.targets.length&&t.forEach(function(e){var t,n=[];for(t=l.data.targets[0].values[0].index;t<p;t++)n.push({id:e.id,index:t,x:l.isTimeSeries()?l.getOtherTargetX(t):t,value:null});e.values.forEach(function(e){e.index+=p,l.isTimeSeries()||(e.x+=p)}),e.values=n.concat(e.values)}),l.data.targets=l.data.targets.concat(t),l.getMaxDataCount(),o=(r=l.data.targets[0]).values[0],u(e.to)?(h=0,s=l.isTimeSeries()?l.parseDate(e.to):e.to,r.values.forEach(function(e){e.x<s&&h++})):u(e.length)&&(h=e.length),d?1===d&&l.isTimeSeries()&&(a=(r.values[r.values.length-1].x-o.x)/2,i=[new Date(+o.x-a),new Date(+o.x+a)],l.updateXDomain(null,!0,!0,!1,i)):(a=l.isTimeSeries()?r.values.length>1?r.values[r.values.length-1].x-o.x:o.x-l.getXDomain(l.data.targets)[0]:1,i=[o.x-a,o.x],l.updateXDomain(null,!0,!0,!1,i)),l.updateTargets(l.data.targets),l.redraw({flow:{index:o.index,length:h,duration:g(e.duration)?e.duration:l.config.transition_duration,done:e.done,orgDataCount:d},withLegend:!0,withTransition:d>1,withTrimXDomain:!1,withUpdateXAxis:!0})},e.prototype.generateFlow=function(e){var t=this,n=t.config,i=t.d3;return function(){var r,a,s,l,c,u,d,h,p,f,m,g=e.targets,v=e.flow,b=e.drawBar,y=e.drawLine,w=e.drawArea,x=e.cx,S=e.cy,T=e.xv,A=e.xForText,C=e.yForText,E=e.duration,k=v.index,I=v.length,P=t.getValueOnIndex(t.data.targets[0].values,k),D=t.getValueOnIndex(t.data.targets[0].values,k+I),O=t.x.domain(),M=v.duration||E,L=v.done||function(){},R=t.generateWait();t.flowing=!0,t.data.targets.forEach(function(e){e.values.splice(0,I)}),s=t.updateXDomain(g,!0,!0),t.updateXGrid&&t.updateXGrid(!0),l=t.xgrid||i.selectAll([]),c=t.xgridLines||i.selectAll([]),u=t.mainRegion||i.selectAll([]),d=t.mainText||i.selectAll([]),h=t.mainBar||i.selectAll([]),p=t.mainLine||i.selectAll([]),f=t.mainArea||i.selectAll([]),m=t.mainCircle||i.selectAll([]),v.orgDataCount?r=1===v.orgDataCount||(P&&P.x)===(D&&D.x)||t.isTimeSeries()?t.x(O[0])-t.x(s[0]):t.x(P.x)-t.x(D.x):1!==t.data.targets[0].values.length?r=t.x(O[0])-t.x(s[0]):t.isTimeSeries()?(P=t.getValueOnIndex(t.data.targets[0].values,0),D=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),r=t.x(P.x)-t.x(D.x)):r=o(s)/2,a="translate("+r+",0) scale("+o(O)/o(s)+",1)",t.hideXGridFocus();var N=i.transition().ease(i.easeLinear).duration(M);R.add(t.xAxis(t.axes.x,N)),R.add(h.transition(N).attr("transform",a)),R.add(p.transition(N).attr("transform",a)),R.add(f.transition(N).attr("transform",a)),R.add(m.transition(N).attr("transform",a)),R.add(d.transition(N).attr("transform",a)),R.add(u.filter(t.isRegionOnX).transition(N).attr("transform",a)),R.add(l.transition(N).attr("transform",a)),R.add(c.transition(N).attr("transform",a)),R(function(){var e,i=[],r=[];if(I){for(e=0;e<I;e++)i.push("."+_.shape+"-"+(k+e)),r.push("."+_.text+"-"+(k+e));t.svg.selectAll("."+_.shapes).selectAll(i).remove(),t.svg.selectAll("."+_.texts).selectAll(r).remove(),t.svg.select("."+_.xgrid).remove()}l.attr("transform",null).attr("x1",t.xgridAttr.x1).attr("x2",t.xgridAttr.x2).attr("y1",t.xgridAttr.y1).attr("y2",t.xgridAttr.y2).style("opacity",t.xgridAttr.opacity),c.attr("transform",null),c.select("line").attr("x1",n.axis_rotated?0:T).attr("x2",n.axis_rotated?t.width:T),c.select("text").attr("x",n.axis_rotated?t.width:0).attr("y",T),h.attr("transform",null).attr("d",b),p.attr("transform",null).attr("d",y),f.attr("transform",null).attr("d",w),m.attr("transform",null).attr("cx",x).attr("cy",S),d.attr("transform",null).attr("x",A).attr("y",C).style("fill-opacity",t.opacityForText.bind(t)),u.attr("transform",null),u.filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t)),L(),t.flowing=!1})}},t.prototype.focus=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),t.classed(_.focused,!0).classed(_.defocused,!1),n.hasArcType()&&n.expandArc(e),n.toggleFocusLegend(e,!0),n.focusedTargetIds=e,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},t.prototype.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(_.focused,!1).classed(_.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},t.prototype.revert=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e)).classed(_.focused,!1).classed(_.defocused,!1),t.hasArcType()&&t.unexpandArc(e),t.config.legend_show&&(t.showLegend(e.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(e)).filter(function(){return t.d3.select(this).classed(_.legendItemFocused)}).classed(_.legendItemFocused,!1)),t.focusedTargetIds=[],t.defocusedTargetIds=[]},t.prototype.xgrids=function(e){var t=this.internal,n=t.config;return e?(n.grid_x_lines=e,t.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines},t.prototype.xgrids.add=function(e){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(e||[]))},t.prototype.xgrids.remove=function(e){this.internal.removeGridLines(e,!0)},t.prototype.ygrids=function(e){var t=this.internal,n=t.config;return e?(n.grid_y_lines=e,t.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines},t.prototype.ygrids.add=function(e){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(e||[]))},t.prototype.ygrids.remove=function(e){this.internal.removeGridLines(e,!1)},t.prototype.groups=function(e){var t=this.internal,n=t.config;return m(e)||(n.data_groups=e,t.redraw()),n.data_groups},t.prototype.legend=function(){},t.prototype.legend.show=function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},t.prototype.legend.hide=function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!1})},t.prototype.load=function(e){var n=this.internal,i=n.config;e.xs&&n.addXs(e.xs),"names"in e&&t.prototype.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){i.data_classes[t]=e.classes[t]}),"categories"in e&&n.isCategorized()&&(i.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){i.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){i.data_colors[t]=e.colors[t]}),"cacheIds"in e&&n.hasCaches(e.cacheIds)?n.load(n.getCaches(e.cacheIds),e.done):e.unload?n.unload(n.mapToTargetIds(!0===e.unload?null:e.unload),function(){n.loadFromArgs(e)}):n.loadFromArgs(e)},t.prototype.unload=function(e){var t=this.internal;(e=e||{})instanceof Array?e={ids:e}:"string"==typeof e&&(e={ids:[e]}),t.unload(t.mapToTargetIds(e.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()})},t.prototype.pie=function(){},t.prototype.pie.padAngle=function(e){if(void 0===e)return this.internal.config.pie_padAngle;this.internal.config.pie_padAngle=e,this.flush()},t.prototype.regions=function(e){var t=this.internal,n=t.config;return e?(n.regions=e,t.redrawWithoutRescale(),n.regions):n.regions},t.prototype.regions.add=function(e){var t=this.internal,n=t.config;return e?(n.regions=n.regions.concat(e),t.redrawWithoutRescale(),n.regions):n.regions},t.prototype.regions.remove=function(e){var t,n,i,r=this.internal,o=r.config;return t=a(e=e||{},"duration",o.transition_duration),n=a(e,"classes",[_.region]),i=r.main.select("."+_.regions).selectAll(n.map(function(e){return"."+e})),(t?i.transition().duration(t):i).style("opacity",0).remove(),o.regions=o.regions.filter(function(e){var t=!1;return!e.class||(e.class.split(" ").forEach(function(e){n.indexOf(e)>=0&&(t=!0)}),!t)}),o.regions},t.prototype.selected=function(e){var t=this.internal,n=t.d3;return t.main.selectAll("."+_.shapes+t.getTargetSelectorSuffix(e)).selectAll("."+_.shape).filter(function(){return n.select(this).classed(_.SELECTED)}).nodes().map(function(e){var t=e.__data__;return t.data?t.data:t})},t.prototype.select=function(e,t,n){var i=this.internal,r=i.d3,o=i.config;o.data_selection_enabled&&i.main.selectAll("."+_.shapes).selectAll("."+_.shape).each(function(a,s){var l=r.select(this),c=a.data?a.data.id:a.id,d=i.getToggle(this,a).bind(i),h=o.data_selection_grouped||!e||e.indexOf(c)>=0,p=!t||t.indexOf(s)>=0,f=l.classed(_.SELECTED);l.classed(_.line)||l.classed(_.area)||(h&&p?o.data_selection_isselectable(a)&&!f&&d(!0,l.classed(_.SELECTED,!0),a,s):u(n)&&n&&f&&d(!1,l.classed(_.SELECTED,!1),a,s))})},t.prototype.unselect=function(e,t){var n=this.internal,i=n.d3,r=n.config;r.data_selection_enabled&&n.main.selectAll("."+_.shapes).selectAll("."+_.shape).each(function(o,a){var s=i.select(this),l=o.data?o.data.id:o.id,c=n.getToggle(this,o).bind(n),u=r.data_selection_grouped||!e||e.indexOf(l)>=0,d=!t||t.indexOf(a)>=0,h=s.classed(_.SELECTED);s.classed(_.line)||s.classed(_.area)||u&&d&&r.data_selection_isselectable(o)&&h&&c(!1,s.classed(_.SELECTED,!1),o,a)})},t.prototype.show=function(e,t){var n,i=this.internal;e=i.mapToTargetIds(e),t=t||{},i.removeHiddenTargetIds(e),(n=i.svg.selectAll(i.selectorTargets(e))).transition().style("display",y()?"block":"initial","important").style("opacity",1,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",1)}),t.withLegend&&i.showLegend(e),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},t.prototype.hide=function(e,t){var n,i=this.internal;e=i.mapToTargetIds(e),t=t||{},i.addHiddenTargetIds(e),(n=i.svg.selectAll(i.selectorTargets(e))).transition().style("opacity",0,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",0),n.style("display","none")}),t.withLegend&&i.hideLegend(e),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},t.prototype.toggle=function(e,t){var n=this,i=this.internal;i.mapToTargetIds(e).forEach(function(e){i.isTargetToShow(e)?n.hide(e,t):n.show(e,t)})},t.prototype.subchart=function(){},t.prototype.subchart.isShown=function(){return this.internal.config.subchart_show},t.prototype.subchart.show=function(){var e=this.internal;e.config.subchart_show||(e.config.subchart_show=!0,e.initSubchart(),e.updateDimension(),e.initSubchartBrush(),e.updateTargetsForSubchart(e.getTargets()),e.mapToIds(e.data.targets).forEach(function(t){e.withoutFadeIn[t]=!1}),e.updateAndRedraw(),e.showTargets())},t.prototype.subchart.hide=function(){var e=this.internal;e.config.subchart_show&&(e.config.subchart_show=!1,e.removeSubchart(),e.redraw())},t.prototype.tooltip=function(){},t.prototype.tooltip.show=function(e){var t,n,i=this.internal,r={};e.mouse?r=e.mouse:(e.data?n=e.data:void 0!==e.x&&(t=e.id?i.data.targets.filter(function(t){return t.id===e.id}):i.data.targets,n=i.filterByX(t,e.x).slice(0,1)[0]),r=n?i.getMousePosition(n):null),i.dispatchEvent("mousemove",r),i.config.tooltip_onshow.call(i,n)},t.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},t.prototype.transform=function(e,t){var n=this.internal,i=["pie","donut"].indexOf(e)>=0?{withTransform:!0}:null;n.transformTo(t,e,i)},e.prototype.transformTo=function(e,t,n){var i=this,r=!i.hasArcType(),o=n||{withTransitionForAxis:r};o.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(e,t),i.updateTargets(i.data.targets),i.updateAndRedraw(o)},t.prototype.x=function(e){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},t.prototype.xs=function(e){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},t.prototype.zoom=function(e){var t=this.internal;return e?(t.isTimeSeries()&&(e=e.map(function(e){return t.parseDate(e)})),t.config.subchart_show?t.brush.selectionAsValue(e,!0):(t.updateXDomain(null,!0,!1,!1,e),t.redraw({withY:t.config.zoom_rescale,withSubchart:!1})),t.config.zoom_onzoom.call(this,t.x.orgDomain()),e):t.x.domain()},t.prototype.zoom.enable=function(e){var t=this.internal;t.config.zoom_enabled=e,t.updateAndRedraw()},t.prototype.unzoom=function(){var e=this.internal;e.config.subchart_show?e.brush.clear():(e.updateXDomain(null,!0,!1,!1,e.subX.domain()),e.redraw({withY:e.config.zoom_rescale,withSubchart:!1}))},t.prototype.zoom.max=function(e){var t=this.internal,n=t.config,i=t.d3;if(0!==e&&!e)return n.zoom_x_max;n.zoom_x_max=i.max([t.orgXDomain[1],e])},t.prototype.zoom.min=function(e){var t=this.internal,n=t.config,i=t.d3;if(0!==e&&!e)return n.zoom_x_min;n.zoom_x_min=i.min([t.orgXDomain[0],e])},t.prototype.zoom.range=function(e){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};u(e.max)&&this.domain.max(e.max),u(e.min)&&this.domain.min(e.min)},e.prototype.initPie=function(){var e=this,t=e.d3;e.pie=t.pie().padAngle(this.getPadAngle.bind(this)).value(function(e){return e.values.reduce(function(e,t){return e+t.value},0)});var n=e.getOrderFunction();if(n&&(e.isOrderAsc()||e.isOrderDesc())){var i=n;n=function(e,t){return-1*i(e,t)}}e.pie.sort(n||null)},e.prototype.updateRadius=function(){var e=this,t=e.config,n=t.gauge_width||t.donut_width,i=e.filterTargetsToShow(e.data.targets).length*e.config.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(e.hasType("gauge")?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=n?(e.radius-n)/e.radius:.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0,e.gaugeArcWidth=n||(i<=e.radius-e.innerRadius?e.radius-e.innerRadius:i<=e.radius?i:e.radius)},e.prototype.getPadAngle=function(){return this.hasType("pie")?this.config.pie_padAngle||0:this.hasType("donut")&&this.config.donut_padAngle||0},e.prototype.updateArc=function(){var e=this;e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded(),e.svgArcExpandedSub=e.getSvgArcExpanded(.98)},e.prototype.updateAngle=function(e){var t,n,i,r,o=this,a=o.config,s=!1,l=0;return a?(o.pie(o.filterTargetsToShow(o.data.targets)).forEach(function(t){s||t.data.id!==e.data.id||(s=!0,(e=t).index=l),l++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),o.isGaugeType(e.data)&&(t=a.gauge_min,n=a.gauge_max,i=Math.PI*(a.gauge_fullCircle?2:1)/(n-t),r=e.value<t?0:e.value<n?e.value-t:n-t,e.startAngle=a.gauge_startingAngle,e.endAngle=e.startAngle+i*r),s?e:null):null},e.prototype.getSvgArc=function(){var e=this,t=e.hasType("gauge"),n=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,i=e.d3.arc().outerRadius(function(i){return t?e.radius-n*i.index:e.radius}).innerRadius(function(i){return t?e.radius-n*(i.index+1):e.innerRadius}),r=function(t,n){var r;return n?i(t):(r=e.updateAngle(t))?i(r):"M 0 0"};return r.centroid=i.centroid,r},e.prototype.getSvgArcExpanded=function(e){e=e||1;var t=this,n=t.hasType("gauge"),i=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,r=Math.min(t.radiusExpanded*e-t.radius,.8*i-100*(1-e)),o=t.d3.arc().outerRadius(function(o){return n?t.radius-i*o.index+r:t.radiusExpanded*e}).innerRadius(function(e){return n?t.radius-i*(e.index+1):t.innerRadius});return function(e){var n=t.updateAngle(e);return n?o(n):"M 0 0"}},e.prototype.getArc=function(e,t,n){return n||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},e.prototype.transformForArcLabel=function(e){var t,n,i,r,o,a=this,s=a.config,l=a.updateAngle(e),c="",u=a.hasType("gauge");if(l&&!u)t=this.svgArc.centroid(l),n=isNaN(t[0])?0:t[0],i=isNaN(t[1])?0:t[1],r=Math.sqrt(n*n+i*i),c="translate("+n*(o=a.hasType("donut")&&s.donut_label_ratio?h(s.donut_label_ratio)?s.donut_label_ratio(e,a.radius,r):s.donut_label_ratio:a.hasType("pie")&&s.pie_label_ratio?h(s.pie_label_ratio)?s.pie_label_ratio(e,a.radius,r):s.pie_label_ratio:a.radius&&r?(36/a.radius>.375?1.175-36/a.radius:.8)*a.radius/r:0)+","+i*o+")";else if(l&&u&&a.filterTargetsToShow(a.data.targets).length>1){var d=Math.sin(l.endAngle-Math.PI/2);c="translate("+(n=Math.cos(l.endAngle-Math.PI/2)*(a.radiusExpanded+25))+","+(i=d*(a.radiusExpanded+15-Math.abs(10*d))+3)+")"}return c},e.prototype.getArcRatio=function(e){return this.getRatio("arc",e)},e.prototype.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getRatio("arc",e),index:e.index})},e.prototype.textForArcLabel=function(e){var t,n,i,r,o,a=this;return a.shouldShowArcLabel()?(n=(t=a.updateAngle(e))?t.value:null,i=a.getRatio("arc",t),r=e.data.id,a.hasType("gauge")||a.meetsArcLabelThreshold(i)?(o=a.getArcLabelFormat())?o(n,i,r):a.defaultArcValueFormat(n,i):""):""},e.prototype.textForGaugeMinMax=function(e,t){var n=this.getGaugeLabelExtents();return n?n(e,t):e},e.prototype.expandArc=function(e){var t,n=this;n.transiting?t=window.setInterval(function(){n.transiting||(window.clearInterval(t),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(e))},10):(e=n.mapToTargetIds(e),n.svg.selectAll(n.selectorTargets(e,"."+_.chartArc)).each(function(e){n.shouldExpand(e.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(e.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(e.data.id)).attr("d",n.svgArcExpandedSub).each(function(e){n.isDonutType(e.data)})}))},e.prototype.unexpandArc=function(e){var t=this;t.transiting||(e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e,"."+_.chartArc)).selectAll("path").transition().duration(function(e){return t.expandDuration(e.data.id)}).attr("d",t.svgArc),t.svg.selectAll("."+_.arc))},e.prototype.expandDuration=function(e){var t=this,n=t.config;return t.isDonutType(e)?n.donut_expand_duration:t.isGaugeType(e)?n.gauge_expand_duration:t.isPieType(e)?n.pie_expand_duration:50},e.prototype.shouldExpand=function(e){var t=this,n=t.config;return t.isDonutType(e)&&n.donut_expand||t.isGaugeType(e)&&n.gauge_expand||t.isPieType(e)&&n.pie_expand},e.prototype.shouldShowArcLabel=function(){var e=this,t=e.config,n=!0;return e.hasType("donut")?n=t.donut_label_show:e.hasType("pie")&&(n=t.pie_label_show),n},e.prototype.meetsArcLabelThreshold=function(e){var t=this.config;return e>=(this.hasType("donut")?t.donut_label_threshold:t.pie_label_threshold)},e.prototype.getArcLabelFormat=function(){var e=this,t=e.config,n=t.pie_label_format;return e.hasType("gauge")?n=t.gauge_label_format:e.hasType("donut")&&(n=t.donut_label_format),n},e.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},e.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},e.prototype.updateTargetsForArc=function(e){var t,n=this,i=n.main,r=n.classChartArc.bind(n),o=n.classArcs.bind(n),a=n.classFocus.bind(n);(t=i.select("."+_.chartArcs).selectAll("."+_.chartArc).data(n.pie(e)).attr("class",function(e){return r(e)+a(e.data)}).enter().append("g").attr("class",r)).append("g").attr("class",o),t.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},e.prototype.initArc=function(){var e=this;e.arcs=e.main.select("."+_.chart).append("g").attr("class",_.chartArcs).attr("transform",e.getTranslate("arc")),e.arcs.append("text").attr("class",_.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())},e.prototype.redrawArc=function(e,t,n){var i,r,o,a,s=this,l=s.d3,c=s.config,u=s.main,d=s.hasType("gauge");if(r=(i=u.selectAll("."+_.arcs).selectAll("."+_.arc).data(s.arcData.bind(s))).enter().append("path").attr("class",s.classArc.bind(s)).style("fill",function(e){return s.color(e.data)}).style("cursor",function(e){return c.interaction_enabled&&c.data_selection_isselectable(e)?"pointer":null}).each(function(e){s.isGaugeType(e.data)&&(e.startAngle=e.endAngle=c.gauge_startingAngle),this._current=e}).merge(i),d&&(a=(o=u.selectAll("."+_.arcs).selectAll("."+_.arcLabelLine).data(s.arcData.bind(s))).enter().append("rect").attr("class",function(e){return _.arcLabelLine+" "+_.target+" "+_.target+"-"+e.data.id}).merge(o),1===s.filterTargetsToShow(s.data.targets).length?a.style("display","none"):a.style("fill",function(e){return s.levelColor?s.levelColor(e.data.values.reduce(function(e,t){return e+t.value},0)):s.color(e.data)}).style("display",c.gauge_labelLine_show?"":"none").each(function(e){var t=0,n=0,i=0,r="";if(s.hiddenTargetIds.indexOf(e.data.id)<0){var o=s.updateAngle(e),a=s.gaugeArcWidth/s.filterTargetsToShow(s.data.targets).length*(o.index+1),c=o.endAngle-Math.PI/2,u=s.radius-a,d=c-(0===u?0:1/u);t=s.radiusExpanded-s.radius+a,n=Math.cos(d)*u,i=Math.sin(d)*u,r="rotate("+180*c/Math.PI+", "+n+", "+i+")"}l.select(this).attr("x",n).attr("y",i).attr("width",t).attr("height",2).attr("transform",r).style("stroke-dasharray","0, "+(t+2)+", 0")})),r.attr("transform",function(e){return!s.isGaugeType(e.data)&&n?"scale(0)":""}).on("mouseover",c.interaction_enabled?function(e){var t,n;s.transiting||(t=s.updateAngle(e))&&(n=s.convertToArcData(t),s.expandArc(t.data.id),s.api.focus(t.data.id),s.toggleFocusLegend(t.data.id,!0),s.config.data_onmouseover(n,this))}:null).on("mousemove",c.interaction_enabled?function(e){var t,n=s.updateAngle(e);n&&(t=[s.convertToArcData(n)],s.showTooltip(t,this))}:null).on("mouseout",c.interaction_enabled?function(e){var t,n;s.transiting||(t=s.updateAngle(e))&&(n=s.convertToArcData(t),s.unexpandArc(t.data.id),s.api.revert(),s.revertLegend(),s.hideTooltip(),s.config.data_onmouseout(n,this))}:null).on("click",c.interaction_enabled?function(e,t){var n,i=s.updateAngle(e);i&&(n=s.convertToArcData(i),s.toggleShape&&s.toggleShape(this,n,t),s.config.data_onclick.call(s.api,n,this))}:null).each(function(){s.transiting=!0}).transition().duration(e).attrTween("d",function(e){var t,n=s.updateAngle(e);return n?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),t=l.interpolate(this._current,n),this._current=t(0),function(n){if(null===s.config)return"M 0 0";var i=t(n);return i.data=e.data,s.getArc(i,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(e){return s.levelColor?s.levelColor(e.data.values.reduce(function(e,t){return e+t.value},0)):s.color(e.data.id)}).call(s.endall,function(){s.transiting=!1}),i.exit().transition().duration(t).style("opacity",0).remove(),u.selectAll("."+_.chartArc).select("text").style("opacity",0).attr("class",function(e){return s.isGaugeType(e.data)?_.gaugeValue:""}).text(s.textForArcLabel.bind(s)).attr("transform",s.transformForArcLabel.bind(s)).style("font-size",function(e){return s.isGaugeType(e.data)&&1===s.filterTargetsToShow(s.data.targets).length?Math.round(s.radius/5)+"px":""}).transition().duration(e).style("opacity",function(e){return s.isTargetToShow(e.data.id)&&s.isArcType(e.data)?1:0}),u.select("."+_.chartArcsTitle).style("opacity",s.hasType("donut")||d?1:0),d){var h=0,p=s.arcs.select("g."+_.chartArcsBackground).selectAll("path."+_.chartArcsBackground).data(s.data.targets);p.enter().append("path").attr("class",function(e,t){return _.chartArcsBackground+" "+_.chartArcsBackground+"-"+t}).merge(p).attr("d",function(e){if(s.hiddenTargetIds.indexOf(e.id)>=0)return"M 0 0";var t={data:[{value:c.gauge_max}],startAngle:c.gauge_startingAngle,endAngle:-1*c.gauge_startingAngle*(c.gauge_fullCircle?Math.PI:1),index:h++};return s.getArc(t,!0,!0)}),p.exit().remove(),s.arcs.select("."+_.chartArcsGaugeUnit).attr("dy",".75em").text(c.gauge_label_show?c.gauge_units:""),s.arcs.select("."+_.chartArcsGaugeMin).attr("dx",-1*(s.innerRadius+(s.radius-s.innerRadius)/(c.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(c.gauge_label_show?s.textForGaugeMinMax(c.gauge_min,!1):""),s.arcs.select("."+_.chartArcsGaugeMax).attr("dx",s.innerRadius+(s.radius-s.innerRadius)/(c.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(c.gauge_label_show?s.textForGaugeMinMax(c.gauge_max,!0):"")}},e.prototype.initGauge=function(){var e=this.arcs;this.hasType("gauge")&&(e.append("g").attr("class",_.chartArcsBackground),e.append("text").attr("class",_.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",_.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",_.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},e.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},e.prototype.addToCache=function(e,t){this.cache["$"+e]=t},e.prototype.getFromCache=function(e){return this.cache["$"+e]},e.prototype.resetCache=function(){var e=this;Object.keys(this.cache).filter(function(e){return/^\$/.test(e)}).forEach(function(t){delete e.cache[t]})},e.prototype.hasCaches=function(e){for(var t=0;t<e.length;t++)if(!(e[t]in this.cache))return!1;return!0},e.prototype.addCache=function(e,t){this.cache[e]=this.cloneTarget(t)},e.prototype.getCaches=function(e){var t,n=[];for(t=0;t<e.length;t++)e[t]in this.cache&&n.push(this.cloneTarget(this.cache[e[t]]));return n},e.prototype.categoryName=function(e){var t=this.config;return e<t.axis_x_categories.length?t.axis_x_categories[e]:e},e.prototype.generateTargetClass=function(e){return e||0===e?("-"+e).replace(/\s/g,"-"):""},e.prototype.generateClass=function(e,t){return" "+e+" "+e+this.generateTargetClass(t)},e.prototype.classText=function(e){return this.generateClass(_.text,e.index)},e.prototype.classTexts=function(e){return this.generateClass(_.texts,e.id)},e.prototype.classShape=function(e){return this.generateClass(_.shape,e.index)},e.prototype.classShapes=function(e){return this.generateClass(_.shapes,e.id)},e.prototype.classLine=function(e){return this.classShape(e)+this.generateClass(_.line,e.id)},e.prototype.classLines=function(e){return this.classShapes(e)+this.generateClass(_.lines,e.id)},e.prototype.classCircle=function(e){return this.classShape(e)+this.generateClass(_.circle,e.index)},e.prototype.classCircles=function(e){return this.classShapes(e)+this.generateClass(_.circles,e.id)},e.prototype.classBar=function(e){return this.classShape(e)+this.generateClass(_.bar,e.index)},e.prototype.classBars=function(e){return this.classShapes(e)+this.generateClass(_.bars,e.id)},e.prototype.classArc=function(e){return this.classShape(e.data)+this.generateClass(_.arc,e.data.id)},e.prototype.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(_.arcs,e.data.id)},e.prototype.classArea=function(e){return this.classShape(e)+this.generateClass(_.area,e.id)},e.prototype.classAreas=function(e){return this.classShapes(e)+this.generateClass(_.areas,e.id)},e.prototype.classRegion=function(e,t){return this.generateClass(_.region,t)+" "+("class"in e?e.class:"")},e.prototype.classEvent=function(e){return this.generateClass(_.eventRect,e.index)},e.prototype.classTarget=function(e){var t=this.config.data_classes[e],n="";return t&&(n=" "+_.target+"-"+t),this.generateClass(_.target,e)+n},e.prototype.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},e.prototype.classFocused=function(e){return" "+(this.focusedTargetIds.indexOf(e.id)>=0?_.focused:"")},e.prototype.classDefocused=function(e){return" "+(this.defocusedTargetIds.indexOf(e.id)>=0?_.defocused:"")},e.prototype.classChartText=function(e){return _.chartText+this.classTarget(e.id)},e.prototype.classChartLine=function(e){return _.chartLine+this.classTarget(e.id)},e.prototype.classChartBar=function(e){return _.chartBar+this.classTarget(e.id)},e.prototype.classChartArc=function(e){return _.chartArc+this.classTarget(e.data.id)},e.prototype.getTargetSelectorSuffix=function(e){var t=this.generateTargetClass(e);return window.CSS&&window.CSS.escape?window.CSS.escape(t):t.replace(/([?!@#$%^&*()=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},e.prototype.selectorTarget=function(e,t){return(t||"")+"."+_.target+this.getTargetSelectorSuffix(e)},e.prototype.selectorTargets=function(e,t){var n=this;return(e=e||[]).length?e.map(function(e){return n.selectorTarget(e,t)}):null},e.prototype.selectorLegend=function(e){return"."+_.legendItem+this.getTargetSelectorSuffix(e)},e.prototype.selectorLegends=function(e){var t=this;return e&&e.length?e.map(function(e){return t.selectorLegend(e)}):null},e.prototype.getClipPath=function(e){return"url("+(y(9)?"":document.URL.split("#")[0])+"#"+e+")"},e.prototype.appendClip=function(e,t){return e.append("clipPath").attr("id",t).append("rect")},e.prototype.getAxisClipX=function(e){var t=Math.max(30,this.margin.left);return e?-(1+t):-(t-1)},e.prototype.getAxisClipY=function(e){return e?-20:-this.margin.top},e.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},e.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},e.prototype.getYAxisClipX=function(){var e=this;return e.config.axis_y_inner?-1:e.getAxisClipX(e.config.axis_rotated)},e.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},e.prototype.getAxisClipWidth=function(e){var t=this,n=Math.max(30,t.margin.left),i=Math.max(30,t.margin.right);return e?t.width+2+n+i:t.margin.left+20},e.prototype.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},e.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},e.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},e.prototype.getYAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(e.config.axis_rotated)+(e.config.axis_y_inner?20:0)},e.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},e.prototype.generateColor=function(){var e=this.config,t=this.d3,n=e.data_colors,i=v(e.color_pattern)?e.color_pattern:t.schemeCategory10,r=e.data_color,o=[];return function(e){var t,a=e.id||e.data&&e.data.id||e;return n[a]instanceof Function?t=n[a](e):n[a]?t=n[a]:(o.indexOf(a)<0&&o.push(a),t=i[o.indexOf(a)%i.length],n[a]=t),r instanceof Function?r(t,e):t}},e.prototype.generateLevelColor=function(){var e=this.config,t=e.color_pattern,n=e.color_threshold,i="value"===n.unit,r=n.values&&n.values.length?n.values:[],o=n.max||100;return v(n)&&v(t)?function(e){var n,a=t[t.length-1];for(n=0;n<r.length;n++)if((i?e:100*e/o)<r[n]){a=t[n];break}return a}:null},e.prototype.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_stack_normalize:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:"linear",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_type:"linear",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_padAngle:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_scaleValues:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_horizontal:void 0,tooltip_position:void 0,tooltip_contents:function(e,t,n,i){return this.getTooltipContent?this.getTooltipContent(e,t,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},e.prototype.additionalConfig={},e.prototype.loadConfig=function(e){var t,n,i,r=this.config;function o(){var e=n.shift();return e&&t&&"object"==typeof t&&e in t?(t=t[e],o()):e?void 0:t}Object.keys(r).forEach(function(a){t=e,n=a.split("_"),i=o(),u(i)&&(r[a]=i)})},e.prototype.convertUrlToData=function(e,t,n,i,r){var o,a,s=this,l=t||"csv";"json"===l?(o=s.d3.json,a=s.convertJsonToData):"tsv"===l?(o=s.d3.tsv,a=s.convertXsvToData):(o=s.d3.csv,a=s.convertXsvToData),o(e,n).then(function(e){r.call(s,a.call(s,e,i))}).catch(function(e){throw e})},e.prototype.convertXsvToData=function(e){var t=e.columns;return 0===e.length?{keys:t,rows:[t.reduce(function(e,t){var n;return Object.assign(e,((n={})[t]=null,n))},{})]}:{keys:t,rows:[].concat(e)}},e.prototype.convertJsonToData=function(e,t){var n,i,r=this,o=[];return t?(t.x?(n=t.value.concat(t.x),r.config.data_x=t.x):n=t.value,o.push(n),e.forEach(function(e){var t=[];n.forEach(function(n){var i=r.findValueInJson(e,n);m(i)&&(i=null),t.push(i)}),o.push(t)}),i=r.convertRowsToData(o)):(Object.keys(e).forEach(function(t){o.push([t].concat(e[t]))}),i=r.convertColumnsToData(o)),i},e.prototype.findValueInJson=function(e,t){if(t in e)return e[t];for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<n.length;++i){var r=n[i];if(!(r in e))return;e=e[r]}return e},e.prototype.convertRowsToData=function(e){for(var t=[],n=e[0],i=1;i<e.length;i++){for(var r={},o=0;o<e[i].length;o++){if(m(e[i][o]))throw new Error("Source data is missing a component at ("+i+","+o+")!");r[n[o]]=e[i][o]}t.push(r)}return{keys:n,rows:t}},e.prototype.convertColumnsToData=function(e){for(var t=[],n=[],i=0;i<e.length;i++){for(var r=e[i][0],o=1;o<e[i].length;o++){if(m(t[o-1])&&(t[o-1]={}),m(e[i][o]))throw new Error("Source data is missing a component at ("+i+","+o+")!");t[o-1][r]=e[i][o]}n.push(r)}return{keys:n,rows:t}},e.prototype.convertDataToTargets=function(e,t){var n,i,r,o,a,s=this,l=s.config;if(c(e)?o=Object.keys(e[0]):(o=e.keys,e=e.rows),r=o.filter(s.isX,s),s.isStanfordGraphType()){if(a=o.filter(s.isEpochs,s),i=o.filter(s.isNotXAndNotEpochs,s),1!==r.length||1!==a.length||1!==i.length)throw new Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams")}else i=o.filter(s.isNotX,s);return i.forEach(function(n){var i=s.getXKey(n);s.isCustomX()||s.isTimeSeries()?r.indexOf(i)>=0?s.data.xs[n]=(t&&s.data.xs[n]?s.data.xs[n]:[]).concat(e.map(function(e){return e[i]}).filter(g).map(function(e,t){return s.generateTargetX(e,n,t)})):l.data_x?s.data.xs[n]=s.getOtherTargetXs():v(l.data_xs)&&(s.data.xs[n]=s.getXValuesOfXKey(i,s.data.targets)):s.data.xs[n]=e.map(function(e,t){return t})}),i.forEach(function(e){if(!s.data.xs[e])throw new Error('x is not defined for id = "'+e+'".')}),(n=i.map(function(t,n){var i=l.data_idConverter(t);return{id:i,id_org:t,values:e.map(function(e,r){var o,c,u=e[s.getXKey(t)],d=null===e[t]||isNaN(e[t])?null:+e[t];return s.isCustomX()&&s.isCategorized()&&!m(u)?(0===n&&0===r&&(l.axis_x_categories=[]),-1===(o=l.axis_x_categories.indexOf(u))&&(o=l.axis_x_categories.length,l.axis_x_categories.push(u))):o=s.generateTargetX(u,t,r),(m(e[t])||s.data.xs[t].length<=r)&&(o=void 0),c={x:o,value:d,id:i},s.isStanfordGraphType()&&(c.epochs=e[a]),c}).filter(function(e){return u(e.x)})}})).forEach(function(e){var t;l.data_xSort&&(e.values=e.values.sort(function(e,t){return(e.x||0===e.x?e.x:1/0)-(t.x||0===t.x?t.x:1/0)})),t=0,e.values.forEach(function(e){e.index=t++}),s.data.xs[e.id].sort(function(e,t){return e-t})}),s.hasNegativeValue=s.hasNegativeValueInTargets(n),s.hasPositiveValue=s.hasPositiveValueInTargets(n),l.data_type&&s.setTargetType(s.mapToIds(n).filter(function(e){return!(e in l.data_types)}),l.data_type),n.forEach(function(e){s.addCache(e.id_org,e)}),n},e.prototype.isEpochs=function(e){var t=this.config;return t.data_epochs&&e===t.data_epochs},e.prototype.isX=function(e){var t,n,i,r=this.config;return r.data_x&&e===r.data_x||v(r.data_xs)&&(t=r.data_xs,n=e,i=!1,Object.keys(t).forEach(function(e){t[e]===n&&(i=!0)}),i)},e.prototype.isNotX=function(e){return!this.isX(e)},e.prototype.isNotXAndNotEpochs=function(e){return!this.isX(e)&&!this.isEpochs(e)},e.prototype.isStackNormalized=function(){return this.config.data_stack_normalize&&this.config.data_groups.length>0},e.prototype.isAxisNormalized=function(e){var t=this;return!!t.isStackNormalized()&&t.data.targets.filter(function(n){return t.axis.getId(n.id)===e}).some(function(e){return t.isTargetNormalized(e.id)})},e.prototype.isTargetNormalized=function(e){return this.isStackNormalized()&&this.config.data_groups.some(function(t){return t.includes(e)})},e.prototype.getXKey=function(e){var t=this.config;return t.data_x?t.data_x:v(t.data_xs)?t.data_xs[e]:null},e.prototype.getTotalPerIndex=function(e){var t=this;if(!t.isStackNormalized())return null;var n=t.getFromCache("getTotalPerIndex");if(void 0!==n)return n[e];var i={y:[],y2:[]};return t.data.targets.filter(function(e){return t.isTargetNormalized(e.id)}).filter(function(e){return t.isTargetToShow(e.id)}).forEach(function(e){var n=i[t.axis.getId(e.id)];e.values.forEach(function(e,t){n[t]||(n[t]=0),n[t]+=p(e.value)?e.value:0})}),t.addToCache("getTotalPerIndex",i),i[e]},e.prototype.getTotalDataSum=function(){var e=this,t=e.getFromCache("getTotalDataSum");if(void 0!==t)return t;var n,i=(n=e.data.targets.filter(function(t){return e.isTargetToShow(t.id)}).map(function(e){return e.values}),Array.isArray(n)?[].concat.apply([],n):[]).map(function(e){return e.value}).reduce(function(e,t){return e+t},0);return e.addToCache("getTotalDataSum",i),i},e.prototype.getXValuesOfXKey=function(e,t){var n,i=this;return(t&&v(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===e&&(n=i.data.xs[t])}),n},e.prototype.getXValue=function(e,t){var n=this;return e in n.data.xs&&n.data.xs[e]&&g(n.data.xs[e][t])?n.data.xs[e][t]:t},e.prototype.getOtherTargetXs=function(){var e=Object.keys(this.data.xs);return e.length?this.data.xs[e[0]]:null},e.prototype.getOtherTargetX=function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},e.prototype.addXs=function(e){var t=this;Object.keys(e).forEach(function(n){t.config.data_xs[n]=e[n]})},e.prototype.addName=function(e){var t;return e&&(t=this.config.data_names[e.id],e.name=void 0!==t?t:e.id),e},e.prototype.getValueOnIndex=function(e,t){var n=e.filter(function(e){return e.index===t});return n.length?n[0]:null},e.prototype.updateTargetX=function(e,t){var n=this;e.forEach(function(e){e.values.forEach(function(i,r){i.x=n.generateTargetX(t[r],e.id,r)}),n.data.xs[e.id]=t})},e.prototype.updateTargetXs=function(e,t){var n=this;e.forEach(function(e){t[e.id]&&n.updateTargetX([e],t[e.id])})},e.prototype.generateTargetX=function(e,t,n){var i=this;return i.isTimeSeries()?e?i.parseDate(e):i.parseDate(i.getXValue(t,n)):i.isCustomX()&&!i.isCategorized()?g(e)?+e:i.getXValue(t,n):n},e.prototype.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},e.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(e){return e.values.length})},e.prototype.mapToIds=function(e){return e.map(function(e){return e.id})},e.prototype.mapToTargetIds=function(e){return e?[].concat(e):this.mapToIds(this.data.targets)},e.prototype.hasTarget=function(e,t){var n,i=this.mapToIds(e);for(n=0;n<i.length;n++)if(i[n]===t)return!0;return!1},e.prototype.isTargetToShow=function(e){return this.hiddenTargetIds.indexOf(e)<0},e.prototype.isLegendToShow=function(e){return this.hiddenLegendIds.indexOf(e)<0},e.prototype.getTargetsToShow=function(){return this.filterTargetsToShow(this.data.targets)},e.prototype.filterTargetsToShow=function(e){var t=this;return e.filter(function(e){return t.isTargetToShow(e.id)})},e.prototype.getTargets=function(){return this.data.targets},e.prototype.mapTargetsToUniqueXs=function(e){var t=this,n=t.d3.set(t.d3.merge(e.map(function(e){return e.values.map(function(e){return+e.x})}))).values();return(n=t.isTimeSeries()?n.map(function(e){return new Date(+e)}):n.map(function(e){return+e})).sort(function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN})},e.prototype.addHiddenTargetIds=function(e){e=e instanceof Array?e:new Array(e);for(var t=0;t<e.length;t++)this.hiddenTargetIds.indexOf(e[t])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(e[t]));this.resetCache()},e.prototype.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0}),this.resetCache()},e.prototype.addHiddenLegendIds=function(e){e=e instanceof Array?e:new Array(e);for(var t=0;t<e.length;t++)this.hiddenLegendIds.indexOf(e[t])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(e[t]))},e.prototype.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},e.prototype.getValuesAsIdKeyed=function(e){var t={};return e.forEach(function(e){t[e.id]=[],e.values.forEach(function(n){t[e.id].push(n.value)})}),t},e.prototype.checkValueInTargets=function(e,t){var n,i,r,o=Object.keys(e);for(n=0;n<o.length;n++)for(r=e[o[n]].values,i=0;i<r.length;i++)if(t(r[i].value))return!0;return!1},e.prototype.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return e<0})},e.prototype.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return e>0})},e.prototype.isOrderDesc=function(){var e=this.config;return"string"==typeof e.data_order&&"desc"===e.data_order.toLowerCase()},e.prototype.isOrderAsc=function(){var e=this.config;return"string"==typeof e.data_order&&"asc"===e.data_order.toLowerCase()},e.prototype.getOrderFunction=function(){var e=this,t=e.config,n=e.isOrderAsc(),i=e.isOrderDesc();if(n||i){var r=function(e,t){return e+Math.abs(t.value)};return function(e,t){var i=e.values.reduce(r,0),o=t.values.reduce(r,0);return n?o-i:i-o}}if(h(t.data_order))return t.data_order;if(c(t.data_order)){var o=t.data_order;return function(e,t){return o.indexOf(e.id)-o.indexOf(t.id)}}},e.prototype.orderTargets=function(e){var t=this.getOrderFunction();return t&&e.sort(t),e},e.prototype.filterByIndex=function(e,t){return this.d3.merge(e.map(function(e){return e.values.filter(function(e){return e.index===t})}))},e.prototype.filterByX=function(e,t){return this.d3.merge(e.map(function(e){return e.values})).filter(function(e){return e.x-t===0})},e.prototype.filterRemoveNull=function(e){return e.filter(function(e){return g(e.value)})},e.prototype.filterByXDomain=function(e,t){return e.map(function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter(function(e){return t[0]<=e.x&&e.x<=t[1]})}})},e.prototype.hasDataLabel=function(){var e=this.config;return!("boolean"!=typeof e.data_labels||!e.data_labels)||!("object"!=typeof e.data_labels||!v(e.data_labels))},e.prototype.getDataLabelLength=function(e,t,n){var i=this,r=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(e){return i.dataLabelFormat(e.id)(e)}).each(function(e,t){r[t]=1.3*l(this)[n]}).remove(),r},e.prototype.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},e.prototype.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},e.prototype.findClosestFromTargets=function(e,t){var n=this,i=e.map(function(e){return n.findClosest(e.values,t,n.config.tooltip_horizontal?n.horizontalDistance.bind(n):n.dist.bind(n),n.config.point_sensitivity)}).filter(function(e){return e});return 0===i.length?void 0:1===i.length?i[0]:n.findClosest(i,t,n.dist.bind(n))},e.prototype.findClosestFromTargetsByX=function(e,t){var n,i;return e.forEach(function(e){e.values.forEach(function(e){var r=Math.abs(t-e.x);(void 0===i||r<i)&&(n=e,i=r)})}),n},e.prototype.findClosest=function(e,t,n,i){void 0===i&&(i=1/0);var r,o=this;return e.filter(function(e){return e&&o.isBarType(e.id)}).forEach(function(e){if(!r){var n=o.main.select("."+_.bars+o.getTargetSelectorSuffix(e.id)+" ."+_.bar+"-"+e.index).node();o.isWithinBar(t,n)&&(r=e)}}),e.filter(function(e){return e&&!o.isBarType(e.id)}).forEach(function(e){var o=n(e,t);o<i&&(i=o,r=e)}),r},e.prototype.dist=function(e,t){var n=this,i=n.config,r=i.axis_rotated?1:0,o=i.axis_rotated?0:1,a=n.circleY(e,e.index),s=n.x(e.x);return Math.sqrt(Math.pow(s-t[r],2)+Math.pow(a-t[o],2))},e.prototype.horizontalDistance=function(e,t){var n=this.config.axis_rotated?1:0,i=this.x(e.x);return Math.abs(i-t[n])},e.prototype.convertValuesToStep=function(e){var t,n=[].concat(e);if(!this.isCategorized())return e;for(t=e.length+1;0<t;t--)n[t]=n[t-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[e.length+1]={x:n[e.length].x+1,value:n[e.length].value,id:n[e.length].id},n},e.prototype.getRatio=function(e,t,n){void 0===n&&(n=!1);var i=this,r=i.api,o=0;if(t&&r.data.shown.call(r).length)if(o=t.ratio||t.value,"arc"===e)if(i.hasType("gauge"))o=(t.endAngle-t.startAngle)/(Math.PI*(i.config.gauge_fullCircle?2:1));else{var a=i.getTotalDataSum();o=t.value/a}else if("index"===e){a=i.getTotalPerIndex(i.axis.getId(t.id));t.ratio=p(t.value)&&a&&a[t.index]>0?t.value/a[t.index]:0,o=t.ratio}return n&&o?100*o:o},e.prototype.updateDataAttributes=function(e,t){var n=this.config["data_"+e];return void 0===t||(Object.keys(t).forEach(function(e){n[e]=t[e]}),this.redraw({withLegend:!0})),n},e.prototype.load=function(e,t){var n=this;e&&(t.filter&&(e=e.filter(t.filter)),(t.type||t.types)&&e.forEach(function(e){var i=t.types&&t.types[e.id]?t.types[e.id]:t.type;n.setTargetType(e.id,i)}),n.data.targets.forEach(function(t){for(var n=0;n<e.length;n++)if(t.id===e[n].id){t.values=e[n].values,e.splice(n,1);break}}),n.data.targets=n.data.targets.concat(e)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()},e.prototype.loadFromArgs=function(e){var t=this;t.resetCache(),e.data?t.load(t.convertDataToTargets(e.data),e):e.url?t.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(n){t.load(t.convertDataToTargets(n),e)}):e.json?t.load(t.convertDataToTargets(t.convertJsonToData(e.json,e.keys)),e):e.rows?t.load(t.convertDataToTargets(t.convertRowsToData(e.rows)),e):e.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(e.columns)),e):t.load(null,e)},e.prototype.unload=function(e,t){var n=this;n.resetCache(),t||(t=function(){}),(e=e.filter(function(e){return n.hasTarget(n.data.targets,e)}))&&0!==e.length?(n.svg.selectAll(e.map(function(e){return n.selectorTarget(e)})).transition().style("opacity",0).remove().call(n.endall,t),e.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll("."+_.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})):t()},e.prototype.getYDomainMin=function(e){var t,n,i,r,o,a,s=this,l=s.config,c=s.mapToIds(e),u=s.getValuesAsIdKeyed(e);if(l.data_groups.length>0)for(a=s.hasNegativeValueInTargets(e),t=0;t<l.data_groups.length;t++)if(r=l.data_groups[t].filter(function(e){return c.indexOf(e)>=0}),0!==r.length)for(i=r[0],a&&u[i]&&u[i].forEach(function(e,t){u[i][t]=e<0?e:0}),n=1;n<r.length;n++)o=r[n],u[o]&&u[o].forEach(function(e,t){s.axis.getId(o)!==s.axis.getId(i)||!u[i]||a&&+e>0||(u[i][t]+=+e)});return s.d3.min(Object.keys(u).map(function(e){return s.d3.min(u[e])}))},e.prototype.getYDomainMax=function(e){var t,n,i,r,o,a,s=this,l=s.config,c=s.mapToIds(e),u=s.getValuesAsIdKeyed(e);if(l.data_groups.length>0)for(a=s.hasPositiveValueInTargets(e),t=0;t<l.data_groups.length;t++)if(r=l.data_groups[t].filter(function(e){return c.indexOf(e)>=0}),0!==r.length)for(i=r[0],a&&u[i]&&u[i].forEach(function(e,t){u[i][t]=e>0?e:0}),n=1;n<r.length;n++)o=r[n],u[o]&&u[o].forEach(function(e,t){s.axis.getId(o)!==s.axis.getId(i)||!u[i]||a&&+e<0||(u[i][t]+=+e)});return s.d3.max(Object.keys(u).map(function(e){return s.d3.max(u[e])}))},e.prototype.getYDomain=function(e,t,n){var i=this,r=i.config;if(i.isAxisNormalized(t))return[0,100];var a,s,l,c,u,d,h,p,f,m,b=e.filter(function(e){return i.axis.getId(e.id)===t}),y=n?i.filterByXDomain(b,n):b,w="y2"===t?r.axis_y2_min:r.axis_y_min,_="y2"===t?r.axis_y2_max:r.axis_y_max,x=i.getYDomainMin(y),S=i.getYDomainMax(y),T="y2"===t?r.axis_y2_center:r.axis_y_center,A=i.hasType("bar",y)&&r.bar_zerobased||i.hasType("area",y)&&r.area_zerobased,C="y2"===t?r.axis_y2_inverted:r.axis_y_inverted,E=i.hasDataLabel()&&r.axis_rotated,k=i.hasDataLabel()&&!r.axis_rotated;if(x=g(w)?w:g(_)?x<_?x:_-10:x,S=g(_)?_:g(w)?w<S?S:w+10:S,0===y.length)return"y2"===t?i.y2.domain():i.y.domain();if(isNaN(x)&&(x=0),isNaN(S)&&(S=x),x===S&&(x<0?S=0:x=0),f=x>=0&&S>=0,m=x<=0&&S<=0,(g(w)&&f||g(_)&&m)&&(A=!1),A&&(f&&(x=0),m&&(S=0)),l=c=.1*(s=Math.abs(S-x)),void 0!==T&&(S=T+(u=Math.max(Math.abs(x),Math.abs(S))),x=T-u),E)d=i.getDataLabelLength(x,S,"width"),h=o(i.y.range()),l+=s*((p=[d[0]/h,d[1]/h])[1]/(1-p[0]-p[1])),c+=s*(p[0]/(1-p[0]-p[1]));else if(k){d=i.getDataLabelLength(x,S,"height");var I=i.getY(r["axis_"+t+"_type"],[0,r.axis_rotated?i.width:i.height],[0,s]);l+=I(d[1]),c+=I(d[0])}return"y"===t&&v(r.axis_y_padding)&&(l=i.axis.getPadding(r.axis_y_padding,"top",l,s),c=i.axis.getPadding(r.axis_y_padding,"bottom",c,s)),"y2"===t&&v(r.axis_y2_padding)&&(l=i.axis.getPadding(r.axis_y2_padding,"top",l,s),c=i.axis.getPadding(r.axis_y2_padding,"bottom",c,s)),A&&(f&&(c=x),m&&(l=-S)),a=[x-c,S+l],C?a.reverse():a},e.prototype.getXDomainMin=function(e){var t=this,n=t.config;return u(n.axis_x_min)?t.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:t.d3.min(e,function(e){return t.d3.min(e.values,function(e){return e.x})})},e.prototype.getXDomainMax=function(e){var t=this,n=t.config;return u(n.axis_x_max)?t.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:t.d3.max(e,function(e){return t.d3.max(e.values,function(e){return e.x})})},e.prototype.getXDomainPadding=function(e){var t,n,i,r,o=this,a=o.config,s=e[1]-e[0];return n=o.isCategorized()?0:o.hasType("bar")?(t=o.getMaxDataCount())>1?s/(t-1)/2:.5:.01*s,"object"==typeof a.axis_x_padding&&v(a.axis_x_padding)?(i=g(a.axis_x_padding.left)?a.axis_x_padding.left:n,r=g(a.axis_x_padding.right)?a.axis_x_padding.right:n):i=r="number"==typeof a.axis_x_padding?a.axis_x_padding:n,{left:i,right:r}},e.prototype.getXDomain=function(e){var t=this,n=[t.getXDomainMin(e),t.getXDomainMax(e)],i=n[0],r=n[1],o=t.getXDomainPadding(n),a=0,s=0;return i-r!==0||t.isCategorized()||(t.isTimeSeries()?(i=new Date(.5*i.getTime()),r=new Date(1.5*r.getTime())):(i=0===i?1:.5*i,r=0===r?-1:1.5*r)),(i||0===i)&&(a=t.isTimeSeries()?new Date(i.getTime()-o.left):i-o.left),(r||0===r)&&(s=t.isTimeSeries()?new Date(r.getTime()+o.right):r+o.right),[a,s]},e.prototype.updateXDomain=function(e,t,n,i,r){var o=this,a=o.config;return n&&(o.x.domain(r||o.d3.extent(o.getXDomain(e))),o.orgXDomain=o.x.domain(),a.zoom_enabled&&o.zoom.update(),o.subX.domain(o.x.domain()),o.brush&&o.brush.updateScale(o.subX)),t&&o.x.domain(r||(!o.brush||o.brush.empty()?o.orgXDomain:o.brush.selectionAsValue())),i&&o.x.domain(o.trimXDomain(o.x.orgDomain())),o.x.domain()},e.prototype.trimXDomain=function(e){var t=this.getZoomDomain(),n=t[0],i=t[1];return e[0]<=n&&(e[1]=+e[1]+(n-e[0]),e[0]=n),i<=e[1]&&(e[0]=+e[0]-(e[1]-i),e[1]=i),e},e.prototype.drag=function(e){var t,n,i,r,o,a,l,c,u=this,d=u.config,h=u.main,p=u.d3;u.hasArcType()||d.data_selection_enabled&&d.data_selection_multiple&&(t=u.dragStart[0],n=u.dragStart[1],i=e[0],r=e[1],o=Math.min(t,i),a=Math.max(t,i),l=d.data_selection_grouped?u.margin.top:Math.min(n,r),c=d.data_selection_grouped?u.height:Math.max(n,r),h.select("."+_.dragarea).attr("x",o).attr("y",l).attr("width",a-o).attr("height",c-l),h.selectAll("."+_.shapes).selectAll("."+_.shape).each(function(e,t){if(d.data_selection_isselectable(e)){var n,i,r,h,f,m,g=p.select(this),v=g.classed(_.SELECTED),b=g.classed(_.INCLUDED),y=!1;if(g.classed(_.circle))n=1*g.attr("cx"),i=1*g.attr("cy"),f=u.togglePoint,y=o<n&&n<a&&l<i&&i<c;else{if(!g.classed(_.bar))return;n=(m=s(this)).x,i=m.y,r=m.width,h=m.height,f=u.togglePath,y=!(a<n||n+r<o||c<i||i+h<l)}y^b&&(g.classed(_.INCLUDED,!b),g.classed(_.SELECTED,!v),f.call(u,!v,g,e,t))}}))},e.prototype.dragstart=function(e){var t=this,n=t.config;t.hasArcType()||n.data_selection_enabled&&(t.dragStart=e,t.main.select("."+_.chart).append("rect").attr("class",_.dragarea).style("opacity",.1),t.dragging=!0)},e.prototype.dragend=function(){var e=this,t=e.config;e.hasArcType()||t.data_selection_enabled&&(e.main.select("."+_.dragarea).transition().duration(100).style("opacity",0).remove(),e.main.selectAll("."+_.shape).classed(_.INCLUDED,!1),e.dragging=!1)},e.prototype.getYFormat=function(e){var t=this,n=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,i=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(e,r,o){return("y2"===t.axis.getId(o)?i:n).call(t,e,r)}},e.prototype.yFormat=function(e){var t=this.config;return(t.axis_y_tick_format?t.axis_y_tick_format:this.defaultValueFormat)(e)},e.prototype.y2Format=function(e){var t=this.config;return(t.axis_y2_tick_format?t.axis_y2_tick_format:this.defaultValueFormat)(e)},e.prototype.defaultValueFormat=function(e){return g(e)?+e:""},e.prototype.defaultArcValueFormat=function(e,t){return(100*t).toFixed(1)+"%"},e.prototype.dataLabelFormat=function(e){var t=this.config.data_labels,n=function(e){return g(e)?+e:""};return"function"==typeof t.format?t.format:"object"==typeof t.format?t.format[e]?!0===t.format[e]?n:t.format[e]:function(){return""}:n},e.prototype.initGrid=function(){var e=this,t=e.config,n=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",_.grid),t.grid_x_show&&e.grid.append("g").attr("class",_.xgrids),t.grid_y_show&&e.grid.append("g").attr("class",_.ygrids),t.grid_focus_show&&e.grid.append("g").attr("class",_.xgridFocus).append("line").attr("class",_.xgridFocus),e.xgrid=n.selectAll([]),t.grid_lines_front||e.initGridLines()},e.prototype.initGridLines=function(){var e=this,t=e.d3;e.gridLines=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",_.grid+" "+_.gridLines),e.gridLines.append("g").attr("class",_.xgridLines),e.gridLines.append("g").attr("class",_.ygridLines),e.xgridLines=t.selectAll([])},e.prototype.updateXGrid=function(e){var t=this,n=t.config,i=t.d3,r=t.generateGridData(n.grid_x_type,t.x),o=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=n.axis_rotated?{x1:0,x2:t.width,y1:function(e){return t.x(e)-o},y2:function(e){return t.x(e)-o}}:{x1:function(e){return t.x(e)+o},x2:function(e){return t.x(e)+o},y1:0,y2:t.height},t.xgridAttr.opacity=function(){return+i.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?t.height:0)?0:1};var a=t.main.select("."+_.xgrids).selectAll("."+_.xgrid).data(r),s=a.enter().append("line").attr("class",_.xgrid).attr("x1",t.xgridAttr.x1).attr("x2",t.xgridAttr.x2).attr("y1",t.xgridAttr.y1).attr("y2",t.xgridAttr.y2).style("opacity",0);t.xgrid=s.merge(a),e||t.xgrid.attr("x1",t.xgridAttr.x1).attr("x2",t.xgridAttr.x2).attr("y1",t.xgridAttr.y1).attr("y2",t.xgridAttr.y2).style("opacity",t.xgridAttr.opacity),a.exit().remove()},e.prototype.updateYGrid=function(){var e=this,t=e.config,n=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks),i=e.main.select("."+_.ygrids).selectAll("."+_.ygrid).data(n),r=i.enter().append("line").attr("class",_.ygrid);e.ygrid=r.merge(i),e.ygrid.attr("x1",t.axis_rotated?e.y:0).attr("x2",t.axis_rotated?e.y:e.width).attr("y1",t.axis_rotated?0:e.y).attr("y2",t.axis_rotated?e.height:e.y),i.exit().remove(),e.smoothLines(e.ygrid,"grid")},e.prototype.gridTextAnchor=function(e){return e.position?e.position:"end"},e.prototype.gridTextDx=function(e){return"start"===e.position?4:"middle"===e.position?0:-4},e.prototype.xGridTextX=function(e){return"start"===e.position?-this.height:"middle"===e.position?-this.height/2:0},e.prototype.yGridTextX=function(e){return"start"===e.position?0:"middle"===e.position?this.width/2:this.width},e.prototype.updateGrid=function(e){var t,n,i,r,o=this,a=o.main,s=o.config,l=o.xv.bind(o),c=o.yv.bind(o),u=o.xGridTextX.bind(o),d=o.yGridTextX.bind(o);o.grid.style("visibility",o.hasArcType()?"hidden":"visible"),a.select("line."+_.xgridFocus).style("visibility","hidden"),s.grid_x_show&&o.updateXGrid(),(n=(t=a.select("."+_.xgridLines).selectAll("."+_.xgridLine).data(s.grid_x_lines)).enter().append("g").attr("class",function(e){return _.xgridLine+(e.class?" "+e.class:"")})).append("line").attr("x1",s.axis_rotated?0:l).attr("x2",s.axis_rotated?o.width:l).attr("y1",s.axis_rotated?l:0).attr("y2",s.axis_rotated?l:o.height).style("opacity",0),n.append("text").attr("text-anchor",o.gridTextAnchor).attr("transform",s.axis_rotated?"":"rotate(-90)").attr("x",s.axis_rotated?d:u).attr("y",l).attr("dx",o.gridTextDx).attr("dy",-5).style("opacity",0),o.xgridLines=n.merge(t),t.exit().transition().duration(e).style("opacity",0).remove(),s.grid_y_show&&o.updateYGrid(),(r=(i=a.select("."+_.ygridLines).selectAll("."+_.ygridLine).data(s.grid_y_lines)).enter().append("g").attr("class",function(e){return _.ygridLine+(e.class?" "+e.class:"")})).append("line").attr("x1",s.axis_rotated?c:0).attr("x2",s.axis_rotated?c:o.width).attr("y1",s.axis_rotated?0:c).attr("y2",s.axis_rotated?o.height:c).style("opacity",0),r.append("text").attr("text-anchor",o.gridTextAnchor).attr("transform",s.axis_rotated?"rotate(-90)":"").attr("x",s.axis_rotated?u:d).attr("y",c).attr("dx",o.gridTextDx).attr("dy",-5).style("opacity",0),o.ygridLines=r.merge(i),o.ygridLines.select("line").transition().duration(e).attr("x1",s.axis_rotated?c:0).attr("x2",s.axis_rotated?c:o.width).attr("y1",s.axis_rotated?0:c).attr("y2",s.axis_rotated?o.height:c).style("opacity",1),o.ygridLines.select("text").transition().duration(e).attr("x",s.axis_rotated?o.xGridTextX.bind(o):o.yGridTextX.bind(o)).attr("y",c).text(function(e){return e.text}).style("opacity",1),i.exit().transition().duration(e).style("opacity",0).remove()},e.prototype.redrawGrid=function(e,t){var n=this,i=n.config,r=n.xv.bind(n),o=n.xgridLines.select("line"),a=n.xgridLines.select("text");return[(e?o.transition(t):o).attr("x1",i.axis_rotated?0:r).attr("x2",i.axis_rotated?n.width:r).attr("y1",i.axis_rotated?r:0).attr("y2",i.axis_rotated?r:n.height).style("opacity",1),(e?a.transition(t):a).attr("x",i.axis_rotated?n.yGridTextX.bind(n):n.xGridTextX.bind(n)).attr("y",r).text(function(e){return e.text}).style("opacity",1)]},e.prototype.showXGridFocus=function(e){var t=this,n=t.config,i=e.filter(function(e){return e&&g(e.value)}),r=t.main.selectAll("line."+_.xgridFocus),o=t.xx.bind(t);n.tooltip_show&&(t.hasType("stanford")||t.hasArcType()||(r.style("visibility","visible").data([i[0]]).attr(n.axis_rotated?"y1":"x1",o).attr(n.axis_rotated?"y2":"x2",o),t.smoothLines(r,"grid")))},e.prototype.hideXGridFocus=function(){this.main.select("line."+_.xgridFocus).style("visibility","hidden")},e.prototype.updateXgridFocus=function(){var e=this,t=e.config;e.main.select("line."+_.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?e.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:e.height)},e.prototype.generateGridData=function(e,t){var n,i,r,o,a=[],s=this.main.select("."+_.axisX).selectAll(".tick").size();if("year"===e)for(i=(n=this.getXDomain())[0].getFullYear(),r=n[1].getFullYear(),o=i;o<=r;o++)a.push(new Date(o+"-01-01 00:00:00"));else(a=t.ticks(10)).length>s&&(a=a.filter(function(e){return(""+e).indexOf(".")<0}));return a},e.prototype.getGridFilterToRemove=function(e){return e?function(t){var n=!1;return[].concat(e).forEach(function(e){("value"in e&&t.value===e.value||"class"in e&&t.class===e.class)&&(n=!0)}),n}:function(){return!0}},e.prototype.removeGridLines=function(e,t){var n=this,i=n.config,r=n.getGridFilterToRemove(e),o=function(e){return!r(e)},a=t?_.xgridLines:_.ygridLines,s=t?_.xgridLine:_.ygridLine;n.main.select("."+a).selectAll("."+s).filter(r).transition().duration(i.transition_duration).style("opacity",0).remove(),t?i.grid_x_lines=i.grid_x_lines.filter(o):i.grid_y_lines=i.grid_y_lines.filter(o)},e.prototype.initEventRect=function(){var e=this,t=e.config;e.main.select("."+_.chart).append("g").attr("class",_.eventRects).style("fill-opacity",0),e.eventRect=e.main.select("."+_.eventRects).append("rect").attr("class",_.eventRect),t.zoom_enabled&&e.zoom&&(e.eventRect.call(e.zoom).on("dblclick.zoom",null),t.zoom_initialRange&&e.eventRect.transition().duration(0).call(e.zoom.transform,e.zoomTransform(t.zoom_initialRange)))},e.prototype.redrawEventRect=function(){var e=this,t=e.d3,n=e.config;function i(){e.svg.select("."+_.eventRect).style("cursor",null),e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars()}var r=function(t,i){return i&&(e.isBarType(i.id)||e.dist(i,t)<n.point_sensitivity)},o=function(t){return t?e.addName(Object.assign({},t)):null};e.main.select("."+_.eventRects).style("cursor",n.zoom_enabled?n.axis_rotated?"ns-resize":"ew-resize":null),e.eventRect.attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).on("mouseout",n.interaction_enabled?function(){n&&(e.hasArcType()||(e.mouseover&&(n.data_onmouseout.call(e.api,e.mouseover),e.mouseover=void 0),i()))}:null).on("mousemove",n.interaction_enabled?function(){if(!e.dragging){var a=e.getTargetsToShow();if(!e.hasArcType(a)){var s,l=t.mouse(this),c=o(e.findClosestFromTargets(a,l)),u=r(l,c);if(!e.mouseover||c&&c.id===e.mouseover.id&&c.index===e.mouseover.index||(n.data_onmouseout.call(e.api,e.mouseover),e.mouseover=void 0),c&&!e.mouseover&&(n.data_onmouseover.call(e.api,c),e.mouseover=c),e.svg.select("."+_.eventRect).style("cursor",u?"pointer":null),!n.tooltip_grouped||e.hasType("stanford",a))c&&(s=[c]);else{var d=void 0;if(c)d=c;else{var h=n.axis_rotated?l[1]:l[0];d=e.findClosestFromTargetsByX(a,e.x.invert(h))}d&&(s=e.filterByX(a,d.x))}if(!s||0===s.length)return i();s=s.map(o),e.showTooltip(s,this),n.point_focus_expand_enabled&&(e.unexpandCircles(),s.forEach(function(t){e.expandCircles(t.index,t.id,!1)})),e.unexpandBars(),s.forEach(function(t){e.expandBars(t.index,t.id,!1)}),e.showXGridFocus(s)}}}:null).on("click",n.interaction_enabled?function(){var i=e.getTargetsToShow();if(!e.hasArcType(i)){var a=t.mouse(this),s=o(e.findClosestFromTargets(i,a));if(r(a,s))if((!n.data_selection_grouped||e.isStanfordType(s)?[s]:e.filterByX(i,s.x)).forEach(function(t){e.main.selectAll("."+_.shapes+e.getTargetSelectorSuffix(t.id)).selectAll("."+_.shape+"-"+t.index).each(function(){(n.data_selection_grouped||e.isWithinShape(this,t))&&e.toggleShape(this,t,t.index)})}),s){var l=e.main.selectAll("."+_.shapes+e.getTargetSelectorSuffix(s.id)).select("."+_.shape+"-"+s.index);n.data_onclick.call(e.api,s,l.node())}}}:null).call(n.interaction_enabled&&n.data_selection_draggable&&e.drag?t.drag().on("drag",function(){e.drag(t.mouse(this))}).on("start",function(){e.dragstart(t.mouse(this))}).on("end",function(){e.dragend()}):function(){})},e.prototype.getMousePosition=function(e){return[this.x(e.x),this.getYScale(e.id)(e.value)]},e.prototype.dispatchEvent=function(e,t){var n="."+_.eventRect,i=this.main.select(n).node(),r=i.getBoundingClientRect(),o=r.left+(t?t[0]:0),a=r.top+(t?t[1]:0),s=document.createEvent("MouseEvents");s.initMouseEvent(e,!0,!0,window,0,o,a,o,a,!1,!1,!1,!1,0,null),i.dispatchEvent(s)},e.prototype.initLegend=function(){var e=this;if(e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend")),!e.config.legend_show)return e.legend.style("visibility","hidden"),void(e.hiddenLegendIds=e.mapToIds(e.data.targets));e.updateLegendWithDefaults()},e.prototype.updateLegendWithDefaults=function(){var e=this;e.updateLegend(e.mapToIds(e.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},e.prototype.updateSizeForLegend=function(e,t){var n=this,i=n.config,r={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-e-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-t-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?r.top:n.currentHeight-e,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-t:n.isLegendInset?r.left:0}},e.prototype.transformLegend=function(e){var t=this;(e?t.legend.transition():t.legend).attr("transform",t.getTranslate("legend"))},e.prototype.updateLegendStep=function(e){this.legendStep=e},e.prototype.updateLegendItemWidth=function(e){this.legendItemWidth=e},e.prototype.updateLegendItemHeight=function(e){this.legendItemHeight=e},e.prototype.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0},e.prototype.getLegendHeight=function(){var e=this,t=0;return e.config.legend_show&&(t=e.isLegendRight?e.currentHeight:Math.max(20,e.legendItemHeight)*(e.legendStep+1)),t},e.prototype.opacityForLegend=function(e){return e.classed(_.legendItemHidden)?null:1},e.prototype.opacityForUnfocusedLegend=function(e){return e.classed(_.legendItemHidden)?null:.3},e.prototype.toggleFocusLegend=function(e,t){var n=this;e=n.mapToTargetIds(e),n.legend.selectAll("."+_.legendItem).filter(function(t){return e.indexOf(t)>=0}).classed(_.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))})},e.prototype.revertLegend=function(){var e=this,t=e.d3;e.legend.selectAll("."+_.legendItem).classed(_.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return e.opacityForLegend(t.select(this))})},e.prototype.showLegend=function(e){var t=this,n=t.config;n.legend_show||(n.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults()),t.removeHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})},e.prototype.hideLegend=function(e){var t=this,n=t.config;n.legend_show&&d(e)&&(n.legend_show=!1,t.legend.style("visibility","hidden")),t.addHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},e.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},e.prototype.updateLegend=function(e,t,n){var i,r,o,s,l,c,d,h,p,f,m,g,v,b,y,w,x=this,S=x.config,T=0,A=0,C=S.legend_item_tile_width+5,E=0,k={},I={},P={},D=[0],O={},M=0;function L(t,n,i){var r,o,a=0===i,s=i===e.length-1,l=function(e,t){return x.legendItemTextBox[t]||(x.legendItemTextBox[t]=x.getTextRect(e.textContent,_.legendItem,e)),x.legendItemTextBox[t]}(t,n),c=l.width+C+(!s||x.isLegendRight||x.isLegendInset?10:0)+S.legend_padding,u=l.height+4,d=x.isLegendRight||x.isLegendInset?u:c,h=x.isLegendRight||x.isLegendInset?x.getLegendHeight():x.getLegendWidth();function p(e,t){t||(r=(h-E-d)/2)<10&&(r=(h-d)/2,E=0,M++),O[e]=M,D[M]=x.isLegendInset?10:r,k[e]=E,E+=d}a&&(E=0,M=0,T=0,A=0),!S.legend_show||x.isLegendToShow(n)?(I[n]=c,P[n]=u,(!T||c>=T)&&(T=c),(!A||u>=A)&&(A=u),o=x.isLegendRight||x.isLegendInset?A:T,S.legend_equally?(Object.keys(I).forEach(function(e){I[e]=T}),Object.keys(P).forEach(function(e){P[e]=A}),(r=(h-o*e.length)/2)<10?(E=0,M=0,e.forEach(function(e){p(e)})):p(n,!0)):p(n)):I[n]=P[n]=O[n]=k[n]=0}e=e.filter(function(e){return!u(S.data_names[e])||null!==S.data_names[e]}),m=a(t=t||{},"withTransition",!0),g=a(t,"withTransitionForTransform",!0),x.isLegendInset&&(M=S.legend_inset_step?S.legend_inset_step:e.length,x.updateLegendStep(M)),x.isLegendRight?(i=function(e){return T*O[e]},s=function(e){return D[O[e]]+k[e]}):x.isLegendInset?(i=function(e){return T*O[e]+10},s=function(e){return D[O[e]]+k[e]}):(i=function(e){return D[O[e]]+k[e]},s=function(e){return A*O[e]}),r=function(e,t){return i(e,t)+4+S.legend_item_tile_width},l=function(e,t){return s(e,t)+9},o=function(e,t){return i(e,t)},c=function(e,t){return s(e,t)-5},d=function(e,t){return i(e,t)-2},h=function(e,t){return i(e,t)-2+S.legend_item_tile_width},p=function(e,t){return s(e,t)+4},(f=x.legend.selectAll("."+_.legendItem).data(e).enter().append("g").attr("class",function(e){return x.generateClass(_.legendItem,e)}).style("visibility",function(e){return x.isLegendToShow(e)?"visible":"hidden"}).style("cursor",function(){return S.interaction_enabled?"pointer":"auto"}).on("click",S.interaction_enabled?function(e){S.legend_item_onclick?S.legend_item_onclick.call(x,e):x.d3.event.altKey?(x.api.hide(),x.api.show(e)):(x.api.toggle(e),x.isTargetToShow(e)?x.api.focus(e):x.api.revert())}:null).on("mouseover",S.interaction_enabled?function(e){S.legend_item_onmouseover?S.legend_item_onmouseover.call(x,e):(x.d3.select(this).classed(_.legendItemFocused,!0),!x.transiting&&x.isTargetToShow(e)&&x.api.focus(e))}:null).on("mouseout",S.interaction_enabled?function(e){S.legend_item_onmouseout?S.legend_item_onmouseout.call(x,e):(x.d3.select(this).classed(_.legendItemFocused,!1),x.api.revert())}:null)).append("text").text(function(e){return u(S.data_names[e])?S.data_names[e]:e}).each(function(e,t){L(this,e,t)}).style("pointer-events","none").attr("x",x.isLegendRight||x.isLegendInset?r:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:l),f.append("rect").attr("class",_.legendItemEvent).style("fill-opacity",0).attr("x",x.isLegendRight||x.isLegendInset?o:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:c),f.append("line").attr("class",_.legendItemTile).style("stroke",x.color).style("pointer-events","none").attr("x1",x.isLegendRight||x.isLegendInset?d:-200).attr("y1",x.isLegendRight||x.isLegendInset?-200:p).attr("x2",x.isLegendRight||x.isLegendInset?h:-200).attr("y2",x.isLegendRight||x.isLegendInset?-200:p).attr("stroke-width",S.legend_item_tile_height),w=x.legend.select("."+_.legendBackground+" rect"),x.isLegendInset&&T>0&&0===w.size()&&(w=x.legend.insert("g","."+_.legendItem).attr("class",_.legendBackground).append("rect")),v=x.legend.selectAll("text").data(e).text(function(e){return u(S.data_names[e])?S.data_names[e]:e}).each(function(e,t){L(this,e,t)}),(m?v.transition():v).attr("x",r).attr("y",l),b=x.legend.selectAll("rect."+_.legendItemEvent).data(e),(m?b.transition():b).attr("width",function(e){return I[e]}).attr("height",function(e){return P[e]}).attr("x",o).attr("y",c),y=x.legend.selectAll("line."+_.legendItemTile).data(e),(m?y.transition():y).style("stroke",x.levelColor?function(e){return x.levelColor(x.cache[e].values.reduce(function(e,t){return e+t.value},0))}:x.color).attr("x1",d).attr("y1",p).attr("x2",h).attr("y2",p),w&&(m?w.transition():w).attr("height",x.getLegendHeight()-12).attr("width",T*(M+1)+10),x.legend.selectAll("."+_.legendItem).classed(_.legendItemHidden,function(e){return!x.isTargetToShow(e)}),x.updateLegendItemWidth(T),x.updateLegendItemHeight(A),x.updateLegendStep(M),x.updateSizes(),x.updateScales(),x.updateSvgSize(),x.transformAll(g,n),x.legendHasRendered=!0},e.prototype.initRegion=function(){var e=this;e.region=e.main.append("g").attr("clip-path",e.clipPath).attr("class",_.regions)},e.prototype.updateRegion=function(e){var t=this,n=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible");var i=t.main.select("."+_.regions).selectAll("."+_.region).data(n.regions),r=i.enter().append("g");r.append("rect").attr("x",t.regionX.bind(t)).attr("y",t.regionY.bind(t)).attr("width",t.regionWidth.bind(t)).attr("height",t.regionHeight.bind(t)).style("fill-opacity",function(e){return g(e.opacity)?e.opacity:.1}),r.append("text").text(t.labelRegion.bind(t)),t.mainRegion=r.merge(i).attr("class",t.classRegion.bind(t)),i.exit().transition().duration(e).style("opacity",0).remove()},e.prototype.redrawRegion=function(e,t){var n=this,i=n.mainRegion,r=n.mainRegion.selectAll("text");return[(e?i.transition(t):i).attr("x",n.regionX.bind(n)).attr("y",n.regionY.bind(n)).attr("width",n.regionWidth.bind(n)).attr("height",n.regionHeight.bind(n)).style("fill-opacity",function(e){return g(e.opacity)?e.opacity:.1}),(e?r.transition(t):r).attr("x",n.labelOffsetX.bind(n)).attr("y",n.labelOffsetY.bind(n)).attr("transform",n.labelTransform.bind(n)).attr("style","text-anchor: left;")]},e.prototype.regionX=function(e){var t=this,n=t.config,i="y"===e.axis?t.y:t.y2;return"y"===e.axis||"y2"===e.axis?n.axis_rotated&&"start"in e?i(e.start):0:n.axis_rotated?0:"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0},e.prototype.regionY=function(e){var t=this,n=t.config,i="y"===e.axis?t.y:t.y2;return"y"===e.axis||"y2"===e.axis?n.axis_rotated?0:"end"in e?i(e.end):0:n.axis_rotated&&"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0},e.prototype.regionWidth=function(e){var t,n=this,i=n.config,r=n.regionX(e),o="y"===e.axis?n.y:n.y2;return(t="y"===e.axis||"y2"===e.axis?i.axis_rotated&&"end"in e?o(e.end):n.width:i.axis_rotated?n.width:"end"in e?n.x(n.isTimeSeries()?n.parseDate(e.end):e.end):n.width)<r?0:t-r},e.prototype.regionHeight=function(e){var t,n=this,i=n.config,r=this.regionY(e),o="y"===e.axis?n.y:n.y2;return(t="y"===e.axis||"y2"===e.axis?i.axis_rotated?n.height:"start"in e?o(e.start):n.height:i.axis_rotated&&"end"in e?n.x(n.isTimeSeries()?n.parseDate(e.end):e.end):n.height)<r?0:t-r},e.prototype.isRegionOnX=function(e){return!e.axis||"x"===e.axis},e.prototype.labelRegion=function(e){return"label"in e?e.label:""},e.prototype.labelTransform=function(e){return"vertical"in e&&e.vertical?"rotate(90)":""},e.prototype.labelOffsetX=function(e){var t="paddingX"in e?e.paddingX:3,n="paddingY"in e?e.paddingY:3;return"vertical"in e&&e.vertical?this.regionY(e)+n:this.regionX(e)+t},e.prototype.labelOffsetY=function(e){var t="paddingX"in e?e.paddingX:3,n="paddingY"in e?e.paddingY:3;return"vertical"in e&&e.vertical?-(this.regionX(e)+t):this.regionY(e)+10+n},e.prototype.getScale=function(e,t,n){return(n?this.d3.scaleTime():this.d3.scaleLinear()).range([e,t])},e.prototype.getX=function(e,t,n,i){var r,o=this,a=o.getScale(e,t,o.isTimeSeries()),s=n?a.domain(n):a;for(r in o.isCategorized()?(i=i||function(){return 0},a=function(e,t){var n=s(e)+i(e);return t?n:Math.ceil(n)}):a=function(e,t){var n=s(e);return t?n:Math.ceil(n)},s)a[r]=s[r];return a.orgDomain=function(){return s.domain()},o.isCategorized()&&(a.domain=function(e){return arguments.length?(s.domain(e),a):[(e=this.orgDomain())[0],e[1]+1]}),a},e.prototype.getY=function(e,t,n){var i;if("timeseries"===e||"time"===e)i=this.d3.scaleTime();else if("log"===e)i=A(this.d3);else{if("linear"!==e&&void 0!==e)throw new Error('Invalid Y axis type: "'+e+'"');i=this.d3.scaleLinear()}return t&&i.domain(t),n&&i.range(n),i},e.prototype.getYScale=function(e){return"y2"===this.axis.getId(e)?this.y2:this.y},e.prototype.getSubYScale=function(e){return"y2"===this.axis.getId(e)?this.subY2:this.subY},e.prototype.updateScales=function(){var e=this,t=e.config,n=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(t.axis_y_type,n?t.axis_y_default:e.y.domain(),[e.yMin,e.yMax]),e.y2=e.getY(t.axis_y2_type,n?t.axis_y2_default:e.y2.domain(),[e.yMin,e.yMax]),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(t.axis_y_type,n?t.axis_y_default:e.subY.domain(),[e.subYMin,e.subYMax]),e.subY2=e.getY(t.axis_y2_type,n?t.axis_y2_default:e.subY2.domain(),[e.subYMin,e.subYMax]),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis("y",e.y,e.yOrient,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis("y2",e.y2,e.y2Orient,e.y2AxisTickValues,t.axis_y2_tick_outer),n||e.brush&&e.brush.updateScale(e.subX),e.updateArc&&e.updateArc()},e.prototype.selectPoint=function(e,t,n){var i=this,r=i.config,o=(r.axis_rotated?i.circleY:i.circleX).bind(i),a=(r.axis_rotated?i.circleX:i.circleY).bind(i),s=i.pointSelectR.bind(i);r.data_onselected.call(i.api,t,e.node()),i.main.select("."+_.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+_.selectedCircle+"-"+n).data([t]).enter().append("circle").attr("class",function(){return i.generateClass(_.selectedCircle,n)}).attr("cx",o).attr("cy",a).attr("stroke",function(){return i.color(t)}).attr("r",function(e){return 1.4*i.pointSelectR(e)}).transition().duration(100).attr("r",s)},e.prototype.unselectPoint=function(e,t,n){var i=this;i.config.data_onunselected.call(i.api,t,e.node()),i.main.select("."+_.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+_.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},e.prototype.togglePoint=function(e,t,n,i){e?this.selectPoint(t,n,i):this.unselectPoint(t,n,i)},e.prototype.selectPath=function(e,t){var n=this;n.config.data_onselected.call(n,t,e.node()),n.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(t)).brighter(.75)})},e.prototype.unselectPath=function(e,t){var n=this;n.config.data_onunselected.call(n,t,e.node()),n.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return n.color(t)})},e.prototype.togglePath=function(e,t,n,i){e?this.selectPath(t,n,i):this.unselectPath(t,n,i)},e.prototype.getToggle=function(e,t){var n,i=this;return"circle"===e.nodeName?n=i.isStepType(t)?function(){}:i.togglePoint:"path"===e.nodeName&&(n=i.togglePath),n},e.prototype.toggleShape=function(e,t,n){var i=this,r=i.d3,o=i.config,a=r.select(e),s=a.classed(_.SELECTED),l=i.getToggle(e,t).bind(i);o.data_selection_enabled&&o.data_selection_isselectable(t)&&(o.data_selection_multiple||i.main.selectAll("."+_.shapes+(o.data_selection_grouped?i.getTargetSelectorSuffix(t.id):"")).selectAll("."+_.shape).each(function(e,t){var n=r.select(this);n.classed(_.SELECTED)&&l(!1,n.classed(_.SELECTED,!1),e,t)}),a.classed(_.SELECTED,!s),l(!s,a,t,n))},e.prototype.initBar=function(){this.main.select("."+_.chart).append("g").attr("class",_.chartBars)},e.prototype.updateTargetsForBar=function(e){var t=this,n=t.config,i=t.classChartBar.bind(t),r=t.classBars.bind(t),o=t.classFocus.bind(t);t.main.select("."+_.chartBars).selectAll("."+_.chartBar).data(e).attr("class",function(e){return i(e)+o(e)}).enter().append("g").attr("class",i).style("pointer-events","none").append("g").attr("class",r).style("cursor",function(e){return n.data_selection_isselectable(e)?"pointer":null})},e.prototype.updateBar=function(e){var t=this,n=t.barData.bind(t),i=t.classBar.bind(t),r=t.initialOpacity.bind(t),o=function(e){return t.color(e.id)},a=t.main.selectAll("."+_.bars).selectAll("."+_.bar).data(n),s=a.enter().append("path").attr("class",i).style("stroke",o).style("fill",o);t.mainBar=s.merge(a).style("opacity",r),a.exit().transition().duration(e).style("opacity",0)},e.prototype.redrawBar=function(e,t,n){var i=this;return[(t?this.mainBar.transition(n):this.mainBar).attr("d",e).style("stroke",this.color).style("fill",this.color).style("opacity",function(e){return i.isTargetToShow(e.id)?1:0})]},e.prototype.getBarW=function(e,t){var n=this.config,i="number"==typeof n.bar_width?n.bar_width:t?e.tickInterval()*n.bar_width_ratio/t:0;return n.bar_width_max&&i>n.bar_width_max?n.bar_width_max:i},e.prototype.getBars=function(e,t){var n=this;return(t?n.main.selectAll("."+_.bars+n.getTargetSelectorSuffix(t)):n.main).selectAll("."+_.bar+(g(e)?"-"+e:""))},e.prototype.expandBars=function(e,t,n){n&&this.unexpandBars(),this.getBars(e,t).classed(_.EXPANDED,!0)},e.prototype.unexpandBars=function(e){this.getBars(e).classed(_.EXPANDED,!1)},e.prototype.generateDrawBar=function(e,t){var n=this.config,i=this.generateGetBarPoints(e,t);return function(e,t){var r=i(e,t),o=n.axis_rotated?1:0,a=n.axis_rotated?0:1;return"M "+r[0][o]+","+r[0][a]+" L"+r[1][o]+","+r[1][a]+" L"+r[2][o]+","+r[2][a]+" L"+r[3][o]+","+r[3][a]+" z"}},e.prototype.generateGetBarPoints=function(e,t){var n=this,i=t?n.subXAxis:n.xAxis,r=e.__max__+1,o=n.getBarW(i,r),a=n.getShapeX(o,r,e,!!t),s=n.getShapeY(!!t),l=n.getShapeOffset(n.isBarType,e,!!t),c=o*(n.config.bar_space/2),u=t?n.getSubYScale:n.getYScale;return function(e,t){var i=u.call(n,e.id)(0),r=l(e,t)||i,d=a(e),h=s(e);return n.config.axis_rotated&&(0<e.value&&h<i||e.value<0&&i<h)&&(h=i),[[d+c,r],[d+c,h-=i-r],[d+o-c,h],[d+o-c,r]]}},e.prototype.isWithinBar=function(e,t){return function(e,t,n){void 0===n&&(n=0);var i=t.x-n,r=t.x+t.width+n,o=t.y+t.height+n,a=t.y-n;return i<e[0]&&e[0]<r&&a<e[1]&&e[1]<o}(e,l(t),2)},e.prototype.getShapeIndices=function(e){var t,n,i=this,r=i.config,o={},a=0;return i.filterTargetsToShow(i.data.targets.filter(e,i)).forEach(function(e){for(t=0;t<r.data_groups.length;t++)if(!(r.data_groups[t].indexOf(e.id)<0))for(n=0;n<r.data_groups[t].length;n++)if(r.data_groups[t][n]in o){o[e.id]=o[r.data_groups[t][n]];break}m(o[e.id])&&(o[e.id]=a++)}),o.__max__=a-1,o},e.prototype.getShapeX=function(e,t,n,i){var r=i?this.subX:this.x;return function(i){var o=i.id in n?n[i.id]:0;return i.x||0===i.x?r(i.x)-e*(t/2-o):0}},e.prototype.getShapeY=function(e){var t=this;return function(n){return(e?t.getSubYScale(n.id):t.getYScale(n.id))(t.isTargetNormalized(n.id)?t.getRatio("index",n,!0):n.value)}},e.prototype.getShapeOffset=function(e,t,n){var i=this,r=i.orderTargets(i.filterTargetsToShow(i.data.targets.filter(e,i))),o=r.map(function(e){return e.id});return function(e,a){var s=n?i.getSubYScale(e.id):i.getYScale(e.id),l=s(0),c=l;return r.forEach(function(n){var r=i.isStepType(e)?i.convertValuesToStep(n.values):n.values,u=i.isTargetNormalized(e.id),d=r.map(function(e){return u?i.getRatio("index",e,!0):e.value});n.id!==e.id&&t[n.id]===t[e.id]&&o.indexOf(n.id)<o.indexOf(e.id)&&((m(r[a])||+r[a].x!==+e.x)&&(a=-1,r.forEach(function(t,n){(t.x.constructor===Date?+t.x:t.x)===(e.x.constructor===Date?+e.x:e.x)&&(a=n)})),a in r&&r[a].value*e.value>=0&&(c+=s(d[a])-l))}),c}},e.prototype.isWithinShape=function(e,t){var n,i=this,r=i.d3.select(e);return i.isTargetToShow(t.id)?"circle"===e.nodeName?n=i.isStepType(t)?i.isWithinStep(e,i.getYScale(t.id)(t.value)):i.isWithinCircle(e,1.5*i.pointSelectR(t)):"path"===e.nodeName&&(n=!r.classed(_.bar)||i.isWithinBar(i.d3.mouse(e),e)):n=!1,n},e.prototype.getInterpolate=function(e){var t=this,n=t.d3,i={linear:n.curveLinear,"linear-closed":n.curveLinearClosed,basis:n.curveBasis,"basis-open":n.curveBasisOpen,"basis-closed":n.curveBasisClosed,bundle:n.curveBundle,cardinal:n.curveCardinal,"cardinal-open":n.curveCardinalOpen,"cardinal-closed":n.curveCardinalClosed,monotone:n.curveMonotoneX,step:n.curveStep,"step-before":n.curveStepBefore,"step-after":n.curveStepAfter};return t.isSplineType(e)?i[t.config.spline_interpolation_type]||i.cardinal:t.isStepType(e)?i[t.config.line_step_type]:i.linear},e.prototype.initLine=function(){this.main.select("."+_.chart).append("g").attr("class",_.chartLines)},e.prototype.updateTargetsForLine=function(e){var t,n=this,i=n.config,r=n.classChartLine.bind(n),o=n.classLines.bind(n),a=n.classAreas.bind(n),s=n.classCircles.bind(n),l=n.classFocus.bind(n);(t=n.main.select("."+_.chartLines).selectAll("."+_.chartLine).data(e).attr("class",function(e){return r(e)+l(e)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none")).append("g").attr("class",o),t.append("g").attr("class",a),t.append("g").attr("class",function(e){return n.generateClass(_.selectedCircles,e.id)}),t.append("g").attr("class",s).style("cursor",function(e){return i.data_selection_isselectable(e)?"pointer":null}),e.forEach(function(e){n.main.selectAll("."+_.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+_.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},e.prototype.updateLine=function(e){var t=this,n=t.main.selectAll("."+_.lines).selectAll("."+_.line).data(t.lineData.bind(t)),i=n.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.mainLine=i.merge(n).style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(e){return t.isStepType(e)?"crispEdges":""}).attr("transform",null),n.exit().transition().duration(e).style("opacity",0)},e.prototype.redrawLine=function(e,t,n){return[(t?this.mainLine.transition(n):this.mainLine).attr("d",e).style("stroke",this.color).style("opacity",1)]},e.prototype.generateDrawLine=function(e,t){var n=this,i=n.config,r=n.d3.line(),o=n.generateGetLinePoints(e,t),a=t?n.getSubYScale:n.getYScale,s=function(e){return(t?n.subxx:n.xx).call(n,e)},l=function(e,t){return i.data_groups.length>0?o(e,t)[0][1]:a.call(n,e.id)(e.value)};return r=i.axis_rotated?r.x(l).y(s):r.x(s).y(l),i.line_connectNull||(r=r.defined(function(e){return null!=e.value})),function(e){var o,s=i.line_connectNull?n.filterRemoveNull(e.values):e.values,l=t?n.subX:n.x,c=a.call(n,e.id),u=0,d=0;return n.isLineType(e)?i.data_regions[e.id]?o=n.lineWithRegions(s,l,c,i.data_regions[e.id]):(n.isStepType(e)&&(s=n.convertValuesToStep(s)),o=r.curve(n.getInterpolate(e))(s)):(s[0]&&(u=l(s[0].x),d=c(s[0].value)),o=i.axis_rotated?"M "+d+" "+u:"M "+u+" "+d),o||"M 0 0"}},e.prototype.generateGetLinePoints=function(e,t){var n=this,i=n.config,r=e.__max__+1,o=n.getShapeX(0,r,e,!!t),a=n.getShapeY(!!t),s=n.getShapeOffset(n.isLineType,e,!!t),l=t?n.getSubYScale:n.getYScale;return function(e,t){var r=l.call(n,e.id)(0),c=s(e,t)||r,u=o(e),d=a(e);return i.axis_rotated&&(0<e.value&&d<r||e.value<0&&r<d)&&(d=r),[[u,d-(r-c)],[u,d-(r-c)],[u,d-(r-c)],[u,d-(r-c)]]}},e.prototype.lineWithRegions=function(e,t,n,i){var r,o,a,s,l,c,d,h,p,f,g,v=this,b=v.config,y="M",w=v.isCategorized()?.5:0,_=[];function x(e,t){var n;for(n=0;n<t.length;n++)if(t[n].start<e&&e<=t[n].end)return!0;return!1}if(u(i))for(r=0;r<i.length;r++)_[r]={},m(i[r].start)?_[r].start=e[0].x:_[r].start=v.isTimeSeries()?v.parseDate(i[r].start):i[r].start,m(i[r].end)?_[r].end=e[e.length-1].x:_[r].end=v.isTimeSeries()?v.parseDate(i[r].end):i[r].end;function S(e){return"M"+e[0][0]+" "+e[0][1]+" "+e[1][0]+" "+e[1][1]}for(f=b.axis_rotated?function(e){return n(e.value)}:function(e){return t(e.x)},g=b.axis_rotated?function(e){return t(e.x)}:function(e){return n(e.value)},a=v.isTimeSeries()?function(e,i,r,o){var a=e.x.getTime(),s=i.x-e.x,c=new Date(a+s*r),u=new Date(a+s*(r+o));return S(b.axis_rotated?[[n(l(r)),t(c)],[n(l(r+o)),t(u)]]:[[t(c),n(l(r))],[t(u),n(l(r+o))]])}:function(e,i,r,o){return S(b.axis_rotated?[[n(l(r),!0),t(s(r))],[n(l(r+o),!0),t(s(r+o))]]:[[t(s(r),!0),n(l(r))],[t(s(r+o),!0),n(l(r+o))]])},r=0;r<e.length;r++){if(m(_)||!x(e[r].x,_))y+=" "+f(e[r])+" "+g(e[r]);else for(s=v.getScale(e[r-1].x+w,e[r].x+w,v.isTimeSeries()),l=v.getScale(e[r-1].value,e[r].value),c=t(e[r].x)-t(e[r-1].x),d=n(e[r].value)-n(e[r-1].value),p=2*(h=2/Math.sqrt(Math.pow(c,2)+Math.pow(d,2))),o=h;o<=1;o+=p)y+=a(e[r-1],e[r],o,h);e[r].x}return y},e.prototype.updateArea=function(e){var t=this,n=t.d3,i=t.main.selectAll("."+_.areas).selectAll("."+_.area).data(t.lineData.bind(t)),r=i.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+n.select(this).style("opacity"),0});t.mainArea=r.merge(i).style("opacity",t.orgAreaOpacity),i.exit().transition().duration(e).style("opacity",0)},e.prototype.redrawArea=function(e,t,n){return[(t?this.mainArea.transition(n):this.mainArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},e.prototype.generateDrawArea=function(e,t){var n=this,i=n.config,r=n.d3.area(),o=n.generateGetAreaPoints(e,t),a=t?n.getSubYScale:n.getYScale,s=function(e){return(t?n.subxx:n.xx).call(n,e)},l=function(e,t){return i.data_groups.length>0?o(e,t)[0][1]:a.call(n,e.id)(n.getAreaBaseValue(e.id))},c=function(e,t){return i.data_groups.length>0?o(e,t)[1][1]:a.call(n,e.id)(e.value)};return r=i.axis_rotated?r.x0(l).x1(c).y(s):r.x(s).y0(i.area_above?0:l).y1(c),i.line_connectNull||(r=r.defined(function(e){return null!==e.value})),function(e){var t,o=i.line_connectNull?n.filterRemoveNull(e.values):e.values,a=0,s=0;return n.isAreaType(e)?(n.isStepType(e)&&(o=n.convertValuesToStep(o)),t=r.curve(n.getInterpolate(e))(o)):(o[0]&&(a=n.x(o[0].x),s=n.getYScale(e.id)(o[0].value)),t=i.axis_rotated?"M "+s+" "+a:"M "+a+" "+s),t||"M 0 0"}},e.prototype.getAreaBaseValue=function(){return 0},e.prototype.generateGetAreaPoints=function(e,t){var n=this,i=n.config,r=e.__max__+1,o=n.getShapeX(0,r,e,!!t),a=n.getShapeY(!!t),s=n.getShapeOffset(n.isAreaType,e,!!t),l=t?n.getSubYScale:n.getYScale;return function(e,t){var r=l.call(n,e.id)(0),c=s(e,t)||r,u=o(e),d=a(e);return i.axis_rotated&&(0<e.value&&d<r||e.value<0&&r<d)&&(d=r),[[u,c],[u,d-(r-c)],[u,d-(r-c)],[u,c]]}},e.prototype.updateCircle=function(e,t){var n=this,i=n.main.selectAll("."+_.circles).selectAll("."+_.circle).data(n.lineOrScatterOrStanfordData.bind(n)),r=i.enter().append("circle").attr("shape-rendering",n.isStanfordGraphType()?"crispEdges":"").attr("class",n.classCircle.bind(n)).attr("cx",e).attr("cy",t).attr("r",n.pointR.bind(n)).style("color",n.isStanfordGraphType()?n.getStanfordPointColor.bind(n):n.color);n.mainCircle=r.merge(i).style("opacity",n.isStanfordGraphType()?1:n.initialOpacityForCircle.bind(n)),i.exit().style("opacity",0)},e.prototype.redrawCircle=function(e,t,n,i){var r=this,o=r.main.selectAll("."+_.selectedCircle);return[(n?r.mainCircle.transition(i):r.mainCircle).style("opacity",this.opacityForCircle.bind(r)).style("color",r.isStanfordGraphType()?r.getStanfordPointColor.bind(r):r.color).attr("cx",e).attr("cy",t),(n?o.transition(i):o).attr("cx",e).attr("cy",t)]},e.prototype.circleX=function(e){return e.x||0===e.x?this.x(e.x):null},e.prototype.updateCircleY=function(){var e,t,n=this;n.config.data_groups.length>0?(e=n.getShapeIndices(n.isLineType),t=n.generateGetLinePoints(e),n.circleY=function(e,n){return t(e,n)[0][1]}):n.circleY=function(e){return n.getYScale(e.id)(e.value)}},e.prototype.getCircles=function(e,t){var n=this;return(t?n.main.selectAll("."+_.circles+n.getTargetSelectorSuffix(t)):n.main).selectAll("."+_.circle+(g(e)?"-"+e:""))},e.prototype.expandCircles=function(e,t,n){var i=this,r=i.pointExpandedR.bind(i);n&&i.unexpandCircles(),i.getCircles(e,t).classed(_.EXPANDED,!0).attr("r",r)},e.prototype.unexpandCircles=function(e){var t=this,n=t.pointR.bind(t);t.getCircles(e).filter(function(){return t.d3.select(this).classed(_.EXPANDED)}).classed(_.EXPANDED,!1).attr("r",n)},e.prototype.pointR=function(e){var t=this.config;return this.isStepType(e)?0:h(t.point_r)?t.point_r(e):t.point_r},e.prototype.pointExpandedR=function(e){var t=this,n=t.config;return n.point_focus_expand_enabled?h(n.point_focus_expand_r)?n.point_focus_expand_r(e):n.point_focus_expand_r?n.point_focus_expand_r:1.75*t.pointR(e):t.pointR(e)},e.prototype.pointSelectR=function(e){var t=this.config;return h(t.point_select_r)?t.point_select_r(e):t.point_select_r?t.point_select_r:4*this.pointR(e)},e.prototype.isWithinCircle=function(e,t){var n=this.d3,i=n.mouse(e),r=n.select(e),o=+r.attr("cx"),a=+r.attr("cy");return Math.sqrt(Math.pow(o-i[0],2)+Math.pow(a-i[1],2))<t},e.prototype.isWithinStep=function(e,t){return Math.abs(t-this.d3.mouse(e)[1])<30},e.prototype.getCurrentWidth=function(){var e=this.config;return e.size_width?e.size_width:this.getParentWidth()},e.prototype.getCurrentHeight=function(){var e=this,t=e.config,n=t.size_height?t.size_height:e.getParentHeight();return n>0?n:320/(e.hasType("gauge")&&!t.gauge_fullCircle?2:1)},e.prototype.getCurrentPaddingTop=function(){var e=this,t=e.config,n=g(t.padding_top)?t.padding_top:0;return e.title&&e.title.node()&&(n+=e.getTitlePadding()),n},e.prototype.getCurrentPaddingBottom=function(){var e=this.config;return g(e.padding_bottom)?e.padding_bottom:0},e.prototype.getCurrentPaddingLeft=function(e){var t=this,n=t.config;return g(n.padding_left)?n.padding_left:n.axis_rotated?!n.axis_x_show||n.axis_x_inner?1:Math.max(r(t.getAxisWidthByAxisId("x",e)),40):!n.axis_y_show||n.axis_y_inner?t.axis.getYAxisLabelPosition().isOuter?30:1:r(t.getAxisWidthByAxisId("y",e))},e.prototype.getCurrentPaddingRight=function(){var e=this,t=e.config,n=0,i=e.isLegendRight?e.getLegendWidth()+20:0;return n=g(t.padding_right)?t.padding_right+1:t.axis_rotated?10+i:!t.axis_y2_show||t.axis_y2_inner?2+i+(e.axis.getY2AxisLabelPosition().isOuter?20:0):r(e.getAxisWidthByAxisId("y2"))+i,e.colorScale&&e.colorScale.node()&&(n+=e.getColorScalePadding()),n},e.prototype.getParentRectValue=function(e){for(var t,i=this.selectChart.node();i&&"BODY"!==i.tagName;){try{t=i.getBoundingClientRect()[e]}catch(n){"width"===e&&(t=i.offsetWidth)}if(t)break;i=i.parentNode}return t},e.prototype.getParentWidth=function(){return this.getParentRectValue("width")},e.prototype.getParentHeight=function(){var e=this.selectChart.style("height");return e.indexOf("px")>0?+e.replace("px",""):0},e.prototype.getSvgLeft=function(e){var t=this,n=t.config,i=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,r=n.axis_rotated?_.axisX:_.axisY,o=t.main.select("."+r).node(),a=o&&i?o.getBoundingClientRect():{right:0},s=t.selectChart.node().getBoundingClientRect(),l=t.hasArcType(),c=a.right-s.left-(l?0:t.getCurrentPaddingLeft(e));return c>0?c:0},e.prototype.getAxisWidthByAxisId=function(e,t){var n=this.axis.getLabelPositionById(e);return this.axis.getMaxTickWidth(e,t)+(n.isInner?20:40)},e.prototype.getHorizontalAxisHeight=function(e,t){var n=this,i=n.config,r=30;return"x"!==e||(u(t)&&t?i.subchart_axis_x_show:i.axis_x_show)?"x"===e&&i.axis_x_height?i.axis_x_height:"y"!==e||i.axis_y_show?"y2"!==e||i.axis_y2_show?("x"===e&&!i.axis_rotated&&i.axis_x_tick_rotate&&(r=30+n.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-Math.abs(i.axis_x_tick_rotate))/180)),"y"===e&&i.axis_rotated&&i.axis_y_tick_rotate&&(r=30+n.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-Math.abs(i.axis_y_tick_rotate))/180)),r+(n.axis.getLabelPositionById(e).isInner?0:10)+("y2"===e?-10:0)):n.rotated_padding_top:!i.legend_show||n.isLegendRight||n.isLegendInset?1:10:8},e.prototype.initBrush=function(e){var t=this,n=t.d3;return t.brush=(t.config.axis_rotated?n.brushY():n.brushX()).on("brush",function(){var e=n.event.sourceEvent;e&&"zoom"===e.type||t.redrawForBrush()}).on("end",function(){var e=n.event.sourceEvent;e&&"zoom"===e.type||t.brush.empty()&&e&&"end"!==e.type&&t.brush.clear()}),t.brush.updateExtent=function(){var e,n=this.scale.range();return e=t.config.axis_rotated?[[0,n[0]],[t.width2,n[1]]]:[[n[0],0],[n[1],t.height2]],this.extent(e),this},t.brush.updateScale=function(e){return this.scale=e,this},t.brush.update=function(e){this.updateScale(e||t.subX).updateExtent(),t.context.select("."+_.brush).call(this)},t.brush.clear=function(){t.context.select("."+_.brush).call(t.brush.move,null)},t.brush.selection=function(){return n.brushSelection(t.context.select("."+_.brush).node())},t.brush.selectionAsValue=function(e,n){var i,r;return e?(t.context&&(i=[this.scale(e[0]),this.scale(e[1])],r=t.context.select("."+_.brush),n&&(r=r.transition()),t.brush.move(r,i)),[]):(i=t.brush.selection()||[0,0],[this.scale.invert(i[0]),this.scale.invert(i[1])])},t.brush.empty=function(){var e=t.brush.selection();return!e||e[0]===e[1]},t.brush.updateScale(e)},e.prototype.initSubchart=function(){var e=this,t=e.config,n=e.context=e.svg.append("g").attr("transform",e.getTranslate("context"));n.style("visibility","visible"),n.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",_.chart),n.select("."+_.chart).append("g").attr("class",_.chartBars),n.select("."+_.chart).append("g").attr("class",_.chartLines),n.append("g").attr("clip-path",e.clipPath).attr("class",_.brush),e.axes.subx=n.append("g").attr("class",_.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":e.clipPathForXAxis).style("visibility",t.subchart_axis_x_show?"visible":"hidden")},e.prototype.initSubchartBrush=function(){var e=this;e.initBrush(e.subX).updateExtent(),e.context.select("."+_.brush).call(e.brush)},e.prototype.updateTargetsForSubchart=function(e){var t,n,i,r,o=this,a=o.context,s=o.config,l=o.classChartBar.bind(o),c=o.classBars.bind(o),u=o.classChartLine.bind(o),d=o.classLines.bind(o),h=o.classAreas.bind(o);(i=(r=a.select("."+_.chartBars).selectAll("."+_.chartBar).data(e)).enter().append("g").style("opacity",0)).merge(r).attr("class",l),i.append("g").attr("class",c),(t=(n=a.select("."+_.chartLines).selectAll("."+_.chartLine).data(e)).enter().append("g").style("opacity",0)).merge(n).attr("class",u),t.append("g").attr("class",d),t.append("g").attr("class",h),a.selectAll("."+_.brush+" rect").attr(s.axis_rotated?"width":"height",s.axis_rotated?o.width2:o.height2)},e.prototype.updateBarForSubchart=function(e){var t=this,n=t.context.selectAll("."+_.bars).selectAll("."+_.bar).data(t.barData.bind(t)),i=n.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color);n.exit().transition().duration(e).style("opacity",0).remove(),t.contextBar=i.merge(n).style("opacity",t.initialOpacity.bind(t))},e.prototype.redrawBarForSubchart=function(e,t,n){(t?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",e).style("opacity",1)},e.prototype.updateLineForSubchart=function(e){var t=this,n=t.context.selectAll("."+_.lines).selectAll("."+_.line).data(t.lineData.bind(t)),i=n.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);n.exit().transition().duration(e).style("opacity",0).remove(),t.contextLine=i.merge(n).style("opacity",t.initialOpacity.bind(t))},e.prototype.redrawLineForSubchart=function(e,t,n){(t?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",e).style("opacity",1)},e.prototype.updateAreaForSubchart=function(e){var t=this,n=t.d3,i=t.context.selectAll("."+_.areas).selectAll("."+_.area).data(t.lineData.bind(t)),r=i.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+n.select(this).style("opacity"),0});i.exit().transition().duration(e).style("opacity",0).remove(),t.contextArea=r.merge(i).style("opacity",0)},e.prototype.redrawAreaForSubchart=function(e,t,n){(t?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},e.prototype.redrawSubchart=function(e,t,n,i,r,o,a){var s,l,c,u=this,d=u.d3;d.event&&"zoom"===d.event.type&&u.brush.selectionAsValue(u.x.orgDomain()),e&&(u.brush.empty()||u.brush.selectionAsValue(u.x.orgDomain()),s=u.generateDrawArea(r,!0),l=u.generateDrawBar(o,!0),c=u.generateDrawLine(a,!0),u.updateBarForSubchart(n),u.updateLineForSubchart(n),u.updateAreaForSubchart(n),u.redrawBarForSubchart(l,n,n),u.redrawLineForSubchart(c,n,n),u.redrawAreaForSubchart(s,n,n))},e.prototype.redrawForBrush=function(){var e,t=this,n=t.x,i=t.d3;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),e=i.event.selection||t.brush.scale.range(),t.main.select("."+_.eventRect).call(t.zoom.transform,i.zoomIdentity.scale(t.width/(e[1]-e[0])).translate(-e[0],0)),t.config.subchart_onbrush.call(t.api,n.orgDomain())},e.prototype.transformContext=function(e,t){var n,i=this;t&&t.axisSubX?n=t.axisSubX:(n=i.context.select("."+_.axisX),e&&(n=n.transition())),i.context.attr("transform",i.getTranslate("context")),n.attr("transform",i.getTranslate("subx"))},e.prototype.getDefaultSelection=function(){var e=this,t=e.config,n=h(t.axis_x_selection)?t.axis_x_selection(e.getXDomain(e.data.targets)):t.axis_x_selection;return e.isTimeSeries()&&(n=[e.parseDate(n[0]),e.parseDate(n[1])]),n},e.prototype.removeSubchart=function(){var e=this;e.brush=null,e.context.remove(),e.context=null},e.prototype.initText=function(){var e=this;e.main.select("."+_.chart).append("g").attr("class",_.chartTexts),e.mainText=e.d3.selectAll([])},e.prototype.updateTargetsForText=function(e){var t=this,n=t.classChartText.bind(t),i=t.classTexts.bind(t),r=t.classFocus.bind(t),o=t.main.select("."+_.chartTexts).selectAll("."+_.chartText).data(e),a=o.enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none");a.append("g").attr("class",i),a.merge(o).attr("class",function(e){return n(e)+r(e)})},e.prototype.updateText=function(e,t,n){var i=this,r=i.config,o=i.barOrLineData.bind(i),a=i.classText.bind(i),s=i.main.selectAll("."+_.texts).selectAll("."+_.text).data(o),l=s.enter().append("text").attr("class",a).attr("text-anchor",function(e){return r.axis_rotated?e.value<0?"end":"start":"middle"}).style("stroke","none").attr("x",e).attr("y",t).style("fill",function(e){return i.color(e)}).style("fill-opacity",0);i.mainText=l.merge(s).text(function(e,t,n){return i.dataLabelFormat(e.id)(e.value,e.id,t,n)}),s.exit().transition().duration(n).style("fill-opacity",0).remove()},e.prototype.redrawText=function(e,t,n,i,r){return[(i?this.mainText.transition(r):this.mainText).attr("x",e).attr("y",t).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},e.prototype.getTextRect=function(e,t,n){var i,r=this.d3.select("body").append("div").classed("c3",!0),o=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),a=this.d3.select(n).style("font");return o.selectAll(".dummy").data([e]).enter().append("text").classed(t||"",!0).style("font",a).text(e).each(function(){i=l(this)}),r.remove(),i},e.prototype.generateXYForText=function(e,t,n,i){var r=this,o=r.generateGetAreaPoints(e,!1),a=r.generateGetBarPoints(t,!1),s=r.generateGetLinePoints(n,!1),l=i?r.getXForText:r.getYForText;return function(e,t){var n=r.isAreaType(e)?o:r.isBarType(e)?a:s;return l.call(r,n(e,t),e,this)}},e.prototype.getXForText=function(e,t,n){var i,r,o=this,a=l(n);return o.config.axis_rotated?(r=o.isBarType(t)?4:6,i=e[2][1]+r*(t.value<0?-1:1)):i=o.hasType("bar")?(e[2][0]+e[0][0])/2:e[0][0],null===t.value&&(i>o.width?i=o.width-a.width:i<0&&(i=4)),i},e.prototype.getYForText=function(e,t,n){var i,r=this,o=l(n);return r.config.axis_rotated?i=(e[0][0]+e[2][0]+.6*o.height)/2:(i=e[2][1],t.value<0||0===t.value&&!r.hasPositiveValue?(i+=o.height,r.isBarType(t)&&r.isSafari()?i-=3:!r.isBarType(t)&&r.isChrome()&&(i+=3)):i+=r.isBarType(t)?-3:-6),null!==t.value||r.config.axis_rotated||(i<o.height?i=o.height:i>this.height&&(i=this.height-4)),i},e.prototype.initTitle=function(){var e=this;e.title=e.svg.append("text").text(e.config.title_text).attr("class",e.CLASS.title)},e.prototype.redrawTitle=function(){var e=this;e.title.attr("x",e.xForTitle.bind(e)).attr("y",e.yForTitle.bind(e))},e.prototype.xForTitle=function(){var e=this,t=e.config,n=t.title_position||"left";return n.indexOf("right")>=0?e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-t.title_padding.right:n.indexOf("center")>=0?Math.max((e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2,0):t.title_padding.left},e.prototype.yForTitle=function(){var e=this;return e.config.title_padding.top+e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).height},e.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},e.prototype.drawColorScale=function(){var e,t,n,i,r,o,a,s=this,l=s.d3,c=s.config,u=s.data.targets[0];if(e=isNaN(c.stanford_scaleWidth)?20:c.stanford_scaleWidth,e<0)throw Error("Colorscale's barheight and barwidth must be greater than 0.");a=s.height-c.stanford_padding.bottom-c.stanford_padding.top,n=l.range(c.stanford_padding.bottom,a,5),o=l.scaleSequential(u.colors).domain([n[n.length-1],n[0]]),s.colorScale&&s.colorScale.remove(),s.colorScale=s.svg.append("g").attr("width",50).attr("height",a).attr("class",_.colorScale),s.colorScale.append("g").attr("transform","translate(0, "+c.stanford_padding.top+")").selectAll("bars").data(n).enter().append("rect").attr("y",function(e,t){return 5*t}).attr("x",0).attr("width",e).attr("height",5).attr("fill",function(e){return o(e)}),r=l.scaleLog().domain([u.minEpochs,u.maxEpochs]).range([n[0]+c.stanford_padding.top+n[n.length-1]+5-1,n[0]+c.stanford_padding.top]),i=l.axisRight(r),"pow10"===c.stanford_scaleFormat?i.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):h(c.stanford_scaleFormat)?i.tickFormat(c.stanford_scaleFormat):i.tickFormat(l.format("d")),h(c.stanford_scaleValues)&&i.tickValues(c.stanford_scaleValues(u.minEpochs,u.maxEpochs)),t=s.colorScale.append("g").attr("class","legend axis").attr("transform","translate("+e+",0)").call(i),"pow10"===c.stanford_scaleFormat&&t.selectAll(".tick text").text(null).filter(C).text(10).append("tspan").attr("dy","-.7em").text(function(e){return Math.round(Math.log(e)/Math.LN10)}),s.colorScale.attr("transform","translate("+(s.currentWidth-s.xForColorScale())+", 0)")},e.prototype.xForColorScale=function(){return this.config.stanford_padding.right+l(this.colorScale.node()).width},e.prototype.getColorScalePadding=function(){return this.xForColorScale()+this.config.stanford_padding.left+20},e.prototype.isStanfordGraphType=function(){return"stanford"===this.config.data_type},e.prototype.initStanfordData=function(){var e,t,n,i=this,r=i.d3,o=i.config,a=i.data.targets[0];if(a.values.sort(I),e=a.values.map(function(e){return e.epochs}),(n=isNaN(o.stanford_scaleMin)?r.min(e):o.stanford_scaleMin)>(t=isNaN(o.stanford_scaleMax)?r.max(e):o.stanford_scaleMax))throw Error("Number of minEpochs has to be smaller than maxEpochs");a.colors=h(o.stanford_colors)?o.stanford_colors:r.interpolateHslLong(r.hsl(250,1,.5),r.hsl(0,1,.5)),a.colorscale=r.scaleSequentialLog(a.colors).domain([n,t]),a.minEpochs=n,a.maxEpochs=t},e.prototype.getStanfordPointColor=function(e){return this.data.targets[0].colorscale(e.epochs)},e.prototype.getCentroid=function(e){var t,n,i,r,o,a=E(e),s=0,l=0;for(t=0,n=e.length-1;t<e.length;n=t,t+=1)r=e[t],o=e[n],i=r.x*o.y-o.x*r.y,s+=(r.x+o.x)*i,l+=(r.y+o.y)*i;return{x:s/(i=6*a),y:l/i}},e.prototype.getStanfordTooltipTitle=function(e){var t=this.axis.getLabelText("x"),n=this.axis.getLabelText("y");return"\n      <tr><th>"+(t?b(t):"x")+"</th><th class='value'>"+e.x+"</th></tr>\n      <tr><th>"+(n?b(n):"y")+"</th><th class='value'>"+e.value+"</th></tr>\n    "},e.prototype.countEpochsInRegion=function(e){var t,n,i=this.data.targets[0];return t=i.values.reduce(function(e,t){return e+Number(t.epochs)},0),{value:n=i.values.reduce(function(t,n){return k(n,e)?t+Number(n.epochs):t},0),percentage:0!==n?(n/t*100).toFixed(1):0}};var E=function(e){var t,n,i,r,o=0;for(t=0,n=e.length-1;t<e.length;n=t,t+=1)i=e[t],r=e[n],o+=i.x*r.y,o-=i.y*r.x;return o/=2},k=function(e,t){for(var n,i,r,o,a=e.x,s=e.value,l=!1,c=0,u=t.length-1;c<t.length;u=c++)n=t[c].x,i=t[c].y,o=t[u].x,i>s!=(r=t[u].y)>s&&a<(o-n)*(s-i)/(r-i)+n&&(l=!l);return l},I=function(e,t){return e.epochs<t.epochs?-1:e.epochs>t.epochs?1:0};return e.prototype.initStanfordElements=function(){var e=this;e.stanfordElements=e.main.select("."+_.chart).append("g").attr("class",_.stanfordElements),e.stanfordElements.append("g").attr("class",_.stanfordLines),e.stanfordElements.append("g").attr("class",_.stanfordTexts),e.stanfordElements.append("g").attr("class",_.stanfordRegions)},e.prototype.updateStanfordElements=function(e){var t,n,i,r,o,a,s=this,l=s.main,c=s.config,u=s.xvCustom.bind(s),d=s.yvCustom.bind(s),h=s.countEpochsInRegion.bind(s);(n=(t=l.select("."+_.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+_.stanfordLine).data(c.stanford_lines)).enter().append("g").attr("class",function(e){return _.stanfordLine+(e.class?" "+e.class:"")})).append("line").attr("x1",function(e){return c.axis_rotated?d(e,"value_y1"):u(e,"value_x1")}).attr("x2",function(e){return c.axis_rotated?d(e,"value_y2"):u(e,"value_x2")}).attr("y1",function(e){return c.axis_rotated?u(e,"value_x1"):d(e,"value_y1")}).attr("y2",function(e){return c.axis_rotated?u(e,"value_x2"):d(e,"value_y2")}).style("opacity",0),s.stanfordLines=n.merge(t),s.stanfordLines.select("line").transition().duration(e).attr("x1",function(e){return c.axis_rotated?d(e,"value_y1"):u(e,"value_x1")}).attr("x2",function(e){return c.axis_rotated?d(e,"value_y2"):u(e,"value_x2")}).attr("y1",function(e){return c.axis_rotated?u(e,"value_x1"):d(e,"value_y1")}).attr("y2",function(e){return c.axis_rotated?u(e,"value_x2"):d(e,"value_y2")}).style("opacity",1),t.exit().transition().duration(e).style("opacity",0).remove(),(a=(o=l.select("."+_.stanfordTexts).selectAll("."+_.stanfordText).data(c.stanford_texts)).enter().append("g").attr("class",function(e){return _.stanfordText+(e.class?" "+e.class:"")})).append("text").attr("x",function(e){return c.axis_rotated?d(e,"y"):u(e,"x")}).attr("y",function(e){return c.axis_rotated?u(e,"x"):d(e,"y")}).style("opacity",0),s.stanfordTexts=a.merge(o),s.stanfordTexts.select("text").transition().duration(e).attr("x",function(e){return c.axis_rotated?d(e,"y"):u(e,"x")}).attr("y",function(e){return c.axis_rotated?u(e,"x"):d(e,"y")}).text(function(e){return e.content}).style("opacity",1),o.exit().transition().duration(e).style("opacity",0).remove(),(r=(i=l.select("."+_.stanfordRegions).selectAll("."+_.stanfordRegion).data(c.stanford_regions)).enter().append("g").attr("class",function(e){return _.stanfordRegion+(e.class?" "+e.class:"")})).append("polygon").attr("points",function(e){return e.points.map(function(e){return[c.axis_rotated?d(e,"y"):u(e,"x"),c.axis_rotated?u(e,"x"):d(e,"y")].join(",")}).join(" ")}).style("opacity",0),r.append("text").attr("x",function(e){return s.getCentroid(e.points).x}).attr("y",function(e){return s.getCentroid(e.points).y}).style("opacity",0),s.stanfordRegions=r.merge(i),s.stanfordRegions.select("polygon").transition().duration(e).attr("points",function(e){return e.points.map(function(e){return[c.axis_rotated?d(e,"y"):u(e,"x"),c.axis_rotated?u(e,"x"):d(e,"y")].join(",")}).join(" ")}).style("opacity",function(e){return e.opacity?e.opacity:.2}),s.stanfordRegions.select("text").transition().duration(e).attr("x",function(e){return c.axis_rotated?d(s.getCentroid(e.points),"y"):u(s.getCentroid(e.points),"x")}).attr("y",function(e){return c.axis_rotated?u(s.getCentroid(e.points),"x"):d(s.getCentroid(e.points),"y")}).text(function(e){var t,n,i;return e.text?(s.isStanfordGraphType()&&(t=(i=h(e.points)).value,n=i.percentage),e.text(t,n)):""}).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1),i.exit().transition().duration(e).style("opacity",0).remove()},e.prototype.initTooltip=function(){var e,t=this,n=t.config;if(t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",_.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(t.isTimeSeries()&&f(n.tooltip_init_x)){for(n.tooltip_init_x=t.parseDate(n.tooltip_init_x),e=0;e<t.data.targets[0].values.length&&t.data.targets[0].values[e].x-n.tooltip_init_x!==0;e++);n.tooltip_init_x=e}t.tooltip.html(n.tooltip_contents.call(t,t.data.targets.map(function(e){return t.addName(e.values[n.tooltip_init_x])}),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType()),t.color)),t.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},e.prototype.getTooltipSortFunction=function(){var e=this,t=e.config;if(0!==t.data_groups.length&&void 0===t.tooltip_order){var n=e.orderTargets(e.data.targets).map(function(e){return e.id});return(e.isOrderAsc()||e.isOrderDesc())&&(n=n.reverse()),function(e,t){return n.indexOf(e.id)-n.indexOf(t.id)}}var i=t.tooltip_order;void 0===i&&(i=t.data_order);var r=function(e){return e?e.value:null};if(f(i)&&"asc"===i.toLowerCase())return function(e,t){return r(e)-r(t)};if(f(i)&&"desc"===i.toLowerCase())return function(e,t){return r(t)-r(e)};if(h(i)){var o=i;return void 0===t.tooltip_order&&(o=function(e,t){return i(e?{id:e.id,values:[e]}:null,t?{id:t.id,values:[t]}:null)}),o}return c(i)?function(e,t){return i.indexOf(e.id)-i.indexOf(t.id)}:void 0},e.prototype.getTooltipContent=function(e,t,n,i){var r,o,a,s,l,c,u=this,d=u.config,h=d.tooltip_format_title||t,p=d.tooltip_format_name||function(e){return e},f=d.tooltip_format_value;f||(f=u.isTargetNormalized(e.id)?function(e,t){return(100*t).toFixed(2)+"%"}:n);var m=this.getTooltipSortFunction();for(m&&e.sort(m),o=0;o<e.length;o++)if(e[o]&&(e[o].value||0===e[o].value)){if(u.isStanfordGraphType())r||(a=u.getStanfordTooltipTitle(e[o]),r="<table class='"+u.CLASS.tooltip+"'>"+a),c=u.getStanfordPointColor(e[o]),l=b(d.data_epochs),s=e[o].epochs;else if(r||(a=b(h?h(e[o].x,e[o].index):e[o].x),r="<table class='"+u.CLASS.tooltip+"'>"+(a||0===a?"<tr><th colspan='2'>"+a+"</th></tr>":"")),void 0!==(s=b(f(e[o].value,e[o].ratio,e[o].id,e[o].index,e)))){if(null===e[o].name)continue;l=b(p(e[o].name,e[o].ratio,e[o].id,e[o].index)),c=u.levelColor?u.levelColor(e[o].value):i(e[o].id)}void 0!==s&&(r+="<tr class='"+u.CLASS.tooltipName+"-"+u.getTargetSelectorSuffix(e[o].id)+"'>",r+="<td class='name'><span style='background-color:"+c+"'></span>"+l+"</td>",r+="<td class='value'>"+s+"</td>",r+="</tr>")}return r+"</table>"},e.prototype.tooltipPosition=function(e,t,n,i){var r,o,a,s,l,c=this,u=c.config,d=c.d3,h=c.hasArcType(),p=d.mouse(i);return h?(o=(c.width-(c.isLegendRight?c.getLegendWidth():0))/2+p[0],s=(c.hasType("gauge")?c.height:c.height/2)+p[1]+20):(r=c.getSvgLeft(!0),u.axis_rotated?(a=(o=r+p[0]+100)+t,l=c.currentWidth-c.getCurrentPaddingRight(),s=c.x(e[0].x)+20):(a=(o=r+c.getCurrentPaddingLeft(!0)+c.x(e[0].x)+20)+t,l=r+c.currentWidth-c.getCurrentPaddingRight(),s=p[1]+15),a>l&&(o-=a-l+20),s+n>c.currentHeight&&(s-=n+30)),s<0&&(s=0),{top:s,left:o}},e.prototype.showTooltip=function(t,n){var i,r,o,a=this,s=a.config,l=a.hasArcType(),c=t.filter(function(e){return e&&g(e.value)}),u=s.tooltip_position||e.prototype.tooltipPosition;0!==c.length&&s.tooltip_show?(a.tooltip.html(s.tooltip_contents.call(a,t,a.axis.getXAxisTickFormat(),a.getYFormat(l),a.color)).style("display","block"),i=a.tooltip.property("offsetWidth"),r=a.tooltip.property("offsetHeight"),o=u.call(this,c,i,r,n),a.tooltip.style("top",o.top+"px").style("left",o.left+"px")):a.hideTooltip()},e.prototype.hideTooltip=function(){this.tooltip.style("display","none")},e.prototype.setTargetType=function(e,t){var n=this,i=n.config;n.mapToTargetIds(e).forEach(function(e){n.withoutFadeIn[e]=t===i.data_types[e],i.data_types[e]=t}),e||(i.data_type=t)},e.prototype.hasType=function(e,t){var n=this,i=n.config.data_types,r=!1;return(t=t||n.data.targets)&&t.length?t.forEach(function(t){var n=i[t.id];(n&&n.indexOf(e)>=0||!n&&"line"===e)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===e&&(r=!0)}):r=n.config.data_type===e,r},e.prototype.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)},e.prototype.isLineType=function(e){var t=this.config,n=f(e)?e:e.id;return!t.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[n])>=0},e.prototype.isStepType=function(e){var t=f(e)?e:e.id;return["step","area-step"].indexOf(this.config.data_types[t])>=0},e.prototype.isSplineType=function(e){var t=f(e)?e:e.id;return["spline","area-spline"].indexOf(this.config.data_types[t])>=0},e.prototype.isAreaType=function(e){var t=f(e)?e:e.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[t])>=0},e.prototype.isBarType=function(e){var t=f(e)?e:e.id;return"bar"===this.config.data_types[t]},e.prototype.isScatterType=function(e){var t=f(e)?e:e.id;return"scatter"===this.config.data_types[t]},e.prototype.isStanfordType=function(e){var t=f(e)?e:e.id;return"stanford"===this.config.data_types[t]},e.prototype.isPieType=function(e){var t=f(e)?e:e.id;return"pie"===this.config.data_types[t]},e.prototype.isGaugeType=function(e){var t=f(e)?e:e.id;return"gauge"===this.config.data_types[t]},e.prototype.isDonutType=function(e){var t=f(e)?e:e.id;return"donut"===this.config.data_types[t]},e.prototype.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},e.prototype.lineData=function(e){return this.isLineType(e)?[e]:[]},e.prototype.arcData=function(e){return this.isArcType(e.data)?[e]:[]},e.prototype.barData=function(e){return this.isBarType(e)?e.values:[]},e.prototype.lineOrScatterOrStanfordData=function(e){return this.isLineType(e)||this.isScatterType(e)||this.isStanfordType(e)?e.values:[]},e.prototype.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},e.prototype.isSafari=function(){var e=window.navigator.userAgent;return e.indexOf("Safari")>=0&&e.indexOf("Chrome")<0},e.prototype.isChrome=function(){return window.navigator.userAgent.indexOf("Chrome")>=0},e.prototype.initZoom=function(){var e,t=this,n=t.d3,i=t.config;return t.zoom=n.zoom().on("start",function(){if("scroll"===i.zoom_type){var r=n.event.sourceEvent;r&&"brush"===r.type||(e=r,i.zoom_onzoomstart.call(t.api,r))}}).on("zoom",function(){if("scroll"===i.zoom_type){var e=n.event.sourceEvent;e&&"brush"===e.type||(t.redrawForZoom(),i.zoom_onzoom.call(t.api,t.x.orgDomain()))}}).on("end",function(){if("scroll"===i.zoom_type){var r=n.event.sourceEvent;r&&"brush"===r.type||r&&e.clientX===r.clientX&&e.clientY===r.clientY||i.zoom_onzoomend.call(t.api,t.x.orgDomain())}}),t.zoom.updateDomain=function(){return n.event&&n.event.transform&&(i.axis_rotated&&"scroll"===i.zoom_type&&"mousemove"===n.event.sourceEvent.type?t.x.domain(n.event.transform.rescaleY(t.subX).domain()):t.x.domain(n.event.transform.rescaleX(t.subX).domain())),this},t.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[t.width,t.height]]).extent([[0,0],[t.width,t.height]]),this},t.zoom.update=function(){return this.updateExtent().updateDomain()},t.zoom.updateExtent()},e.prototype.zoomTransform=function(e){var t=this,n=[t.x(e[0]),t.x(e[1])];return t.d3.zoomIdentity.scale(t.width/(n[1]-n[0])).translate(-n[0],0)},e.prototype.initDragZoom=function(){var e=this,t=e.d3,n=e.config,i=e.context=e.svg,r=e.margin.left+20.5,o=e.margin.top+.5;if("drag"===n.zoom_type&&n.zoom_enabled){var a=function(t){return t&&t.map(function(t){return e.x.invert(t)})},s=e.dragZoomBrush=t.brushX().on("start",function(){e.api.unzoom(),e.svg.select("."+_.dragZoom).classed("disabled",!1),n.zoom_onzoomstart.call(e.api,t.event.sourceEvent)}).on("brush",function(){n.zoom_onzoom.call(e.api,a(t.event.selection))}).on("end",function(){if(null!=t.event.selection){var i=a(t.event.selection);n.zoom_disableDefaultBehavior||e.api.zoom(i),e.svg.select("."+_.dragZoom).classed("disabled",!0),n.zoom_onzoomend.call(e.api,i)}});i.append("g").classed(_.dragZoom,!0).attr("clip-path",e.clipPath).attr("transform","translate("+r+","+o+")").call(s)}},e.prototype.getZoomDomain=function(){var e=this,t=e.config,n=e.d3;return[n.min([e.orgXDomain[0],t.zoom_x_min]),n.max([e.orgXDomain[1],t.zoom_x_max])]},e.prototype.redrawForZoom=function(){var e=this,t=e.d3,n=e.config,i=e.zoom,r=e.x;n.zoom_enabled&&0!==e.filterTargetsToShow(e.data.targets).length&&(i.update(),n.zoom_disableDefaultBehavior||(e.isCategorized()&&r.orgDomain()[0]===e.orgXDomain[0]&&r.domain([e.orgXDomain[0]-1e-10,r.orgDomain()[1]]),e.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.event.sourceEvent&&"mousemove"===t.event.sourceEvent.type&&(e.cancelClick=!0)))},T}),define("Views/Dashboard/Usage/UsageChart",["c3","Core/createDomId","knockout","moment"],function(e,t,n,i){"use strict";const r=Cesium.defined;Cesium.DeveloperError;function o(e){const i=e.id;this.id=i,this.selectedDateId=`${i}SelectedDate`,this.selectedTotalId=`${i}SelectedTotal`,this.chartId=`${i}-${t()}`,this.title=e.title,this.selectedDate=n.observable(""),this.selectedTotal=n.observable(),this.formatMetric=e.formatMetric,this.loading=n.observable(!0),this._currentChart=void 0,this._overallTotal=void 0,this._dates=void 0,this._totalByDate=void 0}return o.prototype.replaceData=function(t){r(this._currentChart)&&(this._currentChart.destroy(),this._currentChart=void 0),this.loading(!1);const n=["dates"],a=["totalsByDate"];let s=0;const l=[];t.forEach(function(e){n.push(i.utc(e.time).add(12,"hour")),a.push(e.count),s+=e.count}),this._overallTotal=s,this.selectedTotal(this.formatMetric(s));for(let e=1;e<n.length;e++){const t=i.utc(n[e]).startOf("day"),r=i.utc(n[e]).endOf("day");l.push({axis:"x",start:t,end:r,class:`${this.chartId}Region`})}this._currentChart=e.generate({bindto:`#${this.chartId}`,data:{x:"dates",columns:[n,a],type:"spline"},regions:l,interaction:{enabled:!1},point:{show:!1},axis:{x:{type:"timeseries",localtime:!1,tick:{format:"%b %d"}},y:{min:0,padding:0,tick:{format:function(e){return e%1==0?e:""}}}},legend:{show:!1}});const c=this;Array.prototype.forEach.call(document.getElementsByClassName(`${this.chartId}Region`),function(e){e.addEventListener("pointerenter",o.prototype._onRegionEnter.bind(c)),e.addEventListener("pointerleave",o.prototype._onRegionLeave.bind(c))}),this._dates=n,this._totalByDate=a},o.prototype._onRegionEnter=function(e){const t=e.target.classList.value.match(/.+c3-region-([0-9]+).+/),n=Number(t[1])+1;this.selectedDate(this._dates[n].format("LL")),this.selectedTotal(this.formatMetric(this._totalByDate[n]))},o.prototype._onRegionLeave=function(){this.selectedDate(""),this.selectedTotal(this.formatMetric(this._overallTotal))},o}),define("text!Views/Help/UsageHelp.md",[],function(){return"View usage statistics for your account.\n\nSelect a token with the **Show usage for** drop down, and filter the data time range using the **Time range** drop down.\n\nSee the [Pricing Page](https://cesium.com/pricing/) for more details.\n\n---\n\n**Data Streaming** tracks the amount of data requested using the selected token.\n\n**Bing Maps Sessions** tracks the number of Bing Maps imagery sessions initialized using the selected token.\n\n**Google Photorealistic 3D Tiles Sessions** tracks the number of Google Photorealistic 3D Tiles sessions initialized using the selected token.\n\n**Geocodes** tracks the number of geocodes requested using the selected token.\n"}),define("Views/Dashboard/Usage/Usage",["./UsageChart","Core/Feature","Core/ReactInterop","Core/Services","Core/Units","knockout","moment","plugins/router","text!Views/Help/UsageHelp.md","Views/Components/ContextualHelp","Views/Components/Form/FormHelper","Views/Components/Form/SelectInputOption"],function(e,t,n,i,r,o,a,s,l,c,u,d){"use strict";const h=Cesium.queryToObject,p="ALL";function f(e,t){return e.isSame(t)}function m(){const i=new u,r=new d("All",p),s=o.observableArray([r]),h=i.createSelectInput({label:"Show usage for",required:!0,options:s}),m=new d("Week","week"),g=new d("Month","month"),v=new d("Year","year"),b=new d("Custom","custom"),y=i.createSelectInput({id:"usageTimeRange",label:"Time range",required:!0,options:[m,g,v,b]}),w=o.observable(a());w.equalityComparer=f;const _=o.observable(a());_.equalityComparer=f,this.contextualHelp=new c(l,".dashboard-usage"),this.customEnabled=o.pureComputed(function(){return"custom"===y.input()}),this.tokenSelect=h,this.rangeSelect=y,this.dateTimePickerOptions={showClose:!0,format:"YYYY-MM-DD",icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down",previous:"fa fa-arrow-left",next:"fa fa-arrow-right",today:"fa fa-crosshairs",clear:"fa fa-trash",close:"fa fa-times"}},this.from=w,this.to=_,this.error=o.observable(),this.pending=o.observable(!1),this.streamingChart=new e({title:"Data Streaming",id:"streamingChart",formatMetric:function(e){return`${e.toFixed(2)} MiB`}}),this.imageryChart=new e({title:"Bing Maps Sessions",id:"imageryChart",formatMetric:function(e){return`${e} sessions`}}),this.googleChart=new e({title:"Google Photorealistic 3D Tiles Sessions",id:"googleChart",formatMetric:function(e){return`${e} sessions`}}),this.geocodeChart=new e({title:"Geocodes",id:"geocodeChart",formatMetric:function(e){return`${e} geocodes`}}),this._updateRange(),this._formHelper=i,this._subscriptions=void 0,this._lastId=void 0,this._tokenOptions=s,this.tokensEnabled=t.isEnabledForServer(t.Server.TOKENS),this.analyzeEnabled=t.isEnabledForUser(t.User.REALITY_ANALYSIS);const x=o.pureComputed(function(){return w().toDate()}),S=o.pureComputed(function(){return _().clone().add(1,"days").toDate()});this.analyzeUsage=new n.Component({tag:"ion-analyze-usage-details",properties:o.pureComputed(function(){return{showTokenWarning:h.input()!==p,start:x(),end:S()}})})}return m.prototype.activate=async function(){const e=h(window.location.search.substr(1));let n=e.to,r=e.from;const o=e.token;if(n=a(n,a.ISO_8601),r=a(r,a.ISO_8601),n.isValid()||(n=this.to()),r.isValid()||(r=this.from()),r.isAfter(n)){const e=r;r=n,n=e}n.diff(r,"years",!0)>1&&(r=n.clone().subtract(1,"years")),this.from(r),this.to(n);const s=0===n.diff(a(),"days");if(s&&1===n.diff(r,"weeks",!0)?this.rangeSelect.input("week"):s&&1===n.diff(r,"months",!0)?this.rangeSelect.input("month"):s&&1===n.diff(r,"years",!0)?this.rangeSelect.input("year"):this.rangeSelect.input("custom"),!t.isEnabledForServer(t.Server.TOKENS))return;const l=this,c=this.tokenSelect;let u=!1;const p=this._tokenOptions;try{const e=await i.getTokens({limit:1e3});e.items.forEach(function(e){u=u||e.id===o,p.push(new d(e.name,e.id))}),u&&c.input(o)}catch(f){l.error(i.getErrorMessage(f))}},m.prototype.compositionComplete=function(){this._subscriptions=[this.tokenSelect.input.subscribe(this._updateCharts,this),this.rangeSelect.input.subscribe(this._updateRange,this),this.to.subscribe(this._updateCharts,this),this.from.subscribe(this._updateCharts,this)],this._updateCharts()},m.prototype.detached=function(){this._subscriptions.forEach(function(e){e.dispose()})},m.prototype._updateRange=function(){const e=this.rangeSelect.input();if("custom"===e)return;const t=a().startOf("day");this.to(t),"week"===e&&this.from(t.clone().subtract(1,"week")),"month"===e&&this.from(t.clone().subtract(1,"month")),"year"===e&&this.from(t.clone().subtract(1,"year"))},m.prototype._updateCharts=async function(){let e=this.tokenSelect.input();const t=this.from(),n=this.to(),o=e+t.toString()+n.toString();if(this._lastId===o)return;this._lastId=o;let a=`/usage?from=${t.format("YYYY-MM-DD")}&to=${n.format("YYYY-MM-DD")}`;e===p?e=void 0:a+=`&token=${e}`,s.navigate(a,{replace:!0,trigger:!1});const l=this;this.pending(!0),this.streamingChart.loading(!0),this.imageryChart.loading(!0),this.googleChart.loading(!0),this.geocodeChart.loading(!0),this.error(void 0);try{const a=await i.getUsage(t,n,e);if(o===l._lastId){const e=a.streaming.buckets.map(function(e){return{time:e.time,count:r.bytesToMegabytes(e.count)}});l.streamingChart.replaceData(e),l.googleChart.replaceData(a.google.buckets),l.imageryChart.replaceData(a.imagery.buckets),l.geocodeChart.replaceData(a.geocode.buckets)}}catch(c){l.error(i.getErrorMessage(c)),l.streamingChart.replaceData([]),l.imageryChart.replaceData([]),l.googleChart.replaceData([]),l.geocodeChart.replaceData([])}finally{l.pending(!1)}},m}),define("text!Views/shell.html",[],function(){return'<div id="onScreenHelp" data-bind="compose: onScreenHelp"></div>\n<div id="dropZone"></div>\n<div data-bind="compose: fileUploadList"></div>\n<div class="primary-shell">\n  <div data-bind="visible: showHeader">\n    <div class="dashboard-navbar">\n      <div class="dashboard-navbar-logo">\n        <a href="">\n          <img class="hidden-xxs" alt="Cesium ion" src="Images/logo.svg" />\n          <img\n            class="visible-xxs"\n            alt="Cesium ion"\n            src="Images/logo-small.svg"\n          />\n        </a>\n      </div>\n      <div class="hidden-xs">\n        \x3c!-- ko if: !verified() --\x3e\n        <span class="bold">Your email address has not been verified. </span>\n        <a class="btn btn-xs btn-secondary" href="account/email-verification">\n          Verify email\n        </a>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: isBillingEnabled && verified() && planCode() === \'COMMUNITY\' && !isEmployee()--\x3e\n        <a\n          class="link text-center community-link"\n          data-bind="click: goToBilling"\n          >Upgrade for commercial use</a\n        >\n        \x3c!-- /ko --\x3e\n      </div>\n      \x3c!-- ko if: multiUserEnabled --\x3e\n      <div class="dropdown">\n        <button\n          class="btn btn-default dropdown-toggle"\n          type="button"\n          id="dropdownMenuButton"\n          data-testid="account-button-in-header"\n          data-toggle="dropdown"\n          aria-haspopup="true"\n        >\n          <div class="image_top">\n            <img\n              class="img-circle"\n              data-bind="attr: {src: gravatar}"\n              alt="Profile picture"\n            />\n            <span data-bind="text: username"></span>\n            <span class="caret"></span>\n          </div>\n        </button>\n        <ul\n          class="dropdown-menu"\n          id="dropdownMenuUl"\n          aria-labelledby="dropdownMenu1"\n        >\n          \x3c!-- ko if: !isTeam() --\x3e\n          <li>\n            <a href="account"><span>Account</span></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isTeam() && isOwner--\x3e\n          <li>\n            <a href="account/teamsettings"><span>Team Settings</span></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isBillingEnabled && ((isTeam() && isOwner) || !isTeam()) --\x3e\n          <li>\n            <a href="account/billing"><span>Billing</span></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: (!isTeam() && !isPOUser()) || isOwner() --\x3e\n          <li>\n            <a href="account/license"><span>License</span></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: areLabelsEnabled --\x3e\n          <li>\n            <a href="account/labels"><span>Labels</span></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isOauthProviderEnabled --\x3e\n          <li>\n            <a href="account/applications"\n              ><span>Authorized Applications</span></a\n            >\n          </li>\n          <li>\n            <a href="account/developer"><span>Developer Settings</span></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: !isTeam() && areTeamsEnabled --\x3e\n          <li>\n            <a href="account/teams"><span>Teams</span></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isAdmin()--\x3e\n          <li class="divider"></li>\n          <li>\n            <a href="admin"><span>Administration</span></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: hasTeams() --\x3e\n          <li class="divider"></li>\n          \x3c!-- /ko--\x3e\n          \x3c!-- ko foreach: teams --\x3e\n          <li>\n            <a href="" data-bind="click: $parent.switchProfile"\n              >Switch to <span data-bind="text: username"></span\n            ></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isTeam() --\x3e\n          <li class="divider"></li>\n          <li>\n            <a href="" data-bind="click: returnToProfile"\n              >Back to <span data-bind="text: currentTeamUsersUsername"></span\n            ></a>\n          </li>\n          \x3c!-- /ko --\x3e\n          <li class="divider"></li>\n          <li>\n            <a href="signout"><span>Sign Out</span></a>\n          </li>\n        </ul>\n      </div>\n      \x3c!-- /ko --\x3e\n    </div>\n    <nav\n      class="navbar navbar-default navbar-static-top navbar-second"\n      data-testid="navbar"\n    >\n      <div class="container-fluid">\n        <ul class="nav navbar-nav">\n          \x3c!-- ko foreach: leftNav --\x3e\n          <li data-bind="css: { active: isActive }">\n            <a data-bind="attr: { href: hash }">\n              <span data-bind="text: title"></span>\n              <span\n                data-bind="visible: settings.isBeta, compose: \'Views/Components/BetaFeature.html\'"\n              ></span>\n            </a>\n          </li>\n          \x3c!-- /ko --\x3e\n        </ul>\n        <ul class="nav navbar-nav navbar-right hidden-xs hidden-xxs">\n          \x3c!-- ko if: !isCesiumHostedIon --\x3e\n          <li>\n            <a\n              id="restAPI"\n              target="_blank"\n              rel="noopener"\n              href="/self-hosted-rest-api.html"\n              >REST API</a\n            >\n          </li>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isCesiumHostedIon --\x3e\n          <li><a id="whatsNew" data-container="body">What\'s new?</a></li>\n          <li><a id="sendSupport" data-container="body">Support</a></li>\n          <li data-bind="css: {active : onScreenHelp.visible}">\n            <a data-bind="click: toggleOnScreenHelp">Learn</a>\n          </li>\n          \x3c!-- /ko --\x3e\n        </ul>\n      </div>\n    </nav>\n  </div>\n  <div class="container">\n    <div\n      id="pageHost"\n      class="page-host"\n      data-bind="router: { }, css: {\'no-header\': !showHeader(), \'no-footer\': !showFooter()}"\n    ></div>\n  </div>\n  <footer class="footer" data-bind="visible: showFooter">\n    <span class="small">\n      <a href="opensource">Open Source</a>\n      |\n      <a href="https://cesium.com/docs" target="_blank" rel="noopener"\n        >Documentation</a\n      >\n      |\n      <a\n        href="https://cesium.com/legal/terms-of-service/"\n        target="_blank"\n        rel="noopener"\n        >Legal</a\n      >\n      |\n      <a href="https://status.cesium.com" target="_blank" rel="noopener"\n        >Status</a\n      >\n    </span>\n  </footer>\n  <div\n    class="footer-cookies text-center"\n    data-bind="visible: !aggreedToCookies()"\n  >\n    This site uses cookies and other tracking technologies to improve your\n    experience and to promote and improve our services. By using our site, you\n    agree to our\n    <a\n      href="https://cesium.com/legal/cookie-policy/"\n      target="_blank"\n      rel="noopener"\n      >Cookie Policy</a\n    >.\n    <button\n      type="button"\n      class="btn btn-xs btn-primary"\n      data-bind="click: hideCookieBanner"\n    >\n      I agree\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Account/AccountShell.html",[],function(){return'<div class="container-fluid fill-absolute account">\n  <div class="row full-height">\n    <div class="col-sm-2">\n      <ul\n        class="well nav nav-pills nav-stacked hidden-xs"\n        data-bind="foreach: navigation"\n      >\n        <li data-bind="css: { active: isActive }">\n          <a data-bind="attr: { href: hash }, text: title"></a>\n        </li>\n      </ul>\n      <ul\n        class="well nav nav-pills hidden-sm hidden-md hidden-lg"\n        data-bind="foreach: navigation"\n      >\n        <li data-bind="css: { active: isActive }">\n          <a data-bind="attr: { href: hash }, text: title"></a>\n        </li>\n      </ul>\n    </div>\n    <div class="col-sm-10" data-bind="router: { }"></div>\n  </div>\n</div>\n'}),define("text!Views/Account/Billing.html",[],function(){return'<div class="billing">\n  <ion-message-of-the-day></ion-message-of-the-day>\n  <div class="dashboard-row-one">\n    <div class="h1 dashboard-title">Billing</div>\n    <div class="dashboard-help">\n      <div data-bind="compose: contextualHelp"></div>\n    </div>\n  </div>\n  <div data-bind="visible: isError">\n    <div class="alert alert-danger">There was an error loading the page</div>\n  </div>\n  <div class="loading-indicator-overlay" data-bind="visible: isInProgress">\n    <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n    <div class="loading-message">Loading...</div>\n  </div>\n  <div class="billing-container" data-bind="visible: billingDisabled">\n    Billing is disabled.\n  </div>\n  <div\n    class="billing-container"\n    data-bind="visible: isReady && !billingDisabled"\n  >\n    <ion-subscription-display></ion-subscription-display>\n  </div>\n  <div\n    class="billing-container"\n    data-bind="visible: isReady && !isEmployee && !hasExpiration && !billingDisabled"\n  >\n    <h3>Billing History</h3>\n    <div class="dashboard-table billing-section">\n      <div class="table-responsive">\n        <table class="table table-hover">\n          <thead>\n            <tr>\n              <th>Date</th>\n              <th>Invoice Number</th>\n              <th>Total</th>\n              <th>Status</th>\n              <th class="text-center">Download invoice</th>\n            </tr>\n          </thead>\n          <tbody data-bind="foreach: invoices">\n            <tr>\n              <td>\n                <div>\n                  <div data-bind="text: createdAt"></div>\n                </div>\n              </td>\n              <td>\n                <div>\n                  <span data-bind="text: number"></span>\n                </div>\n              </td>\n              <td>\n                <div>\n                  $\n                  <span data-bind="text: total"></span>\n                </div>\n              </td>\n              <td>\n                <div>\n                  <span data-bind="text: state"></span>\n                </div>\n              </td>\n              <td class="text-center">\n                <div>\n                  <a\n                    class="btn btn-primary btn-xs"\n                    data-bind="attr: {href: downloadUrl}"\n                  >\n                    <span class="fa fa-download"></span>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n          <tbody data-bind="visible: !hasInvoices()">\n            <tr>\n              <td colspan="2">No history</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Account/DeleteAccount.html",[],function(){return'<div class="my-account">\n  <h1>Delete My Account</h1>\n  <div class="my-account-container">\n    <div class="my-account-section">\n      <div class="alert alert-danger">\n        <div>\n          <span class="fa fa-warning"></span>&nbsp;Please read this in its\n          entirety before deleting your account\n        </div>\n      </div>\n      <h3>We\'re sorry to see you go!</h3>\n      <p>\n        Once deleted, your account will cease working immediately and any\n        applications relying on your assets will no longer work.\n      </p>\n      <p>\n        If you change your mind, you have <span class="bold">14 days</span> to\n        send an email to\n        <a href="mailto:support@cesium.com" target="_blank" rel="noopener"\n          >support@cesium.com</a\n        >\n        and we\'ll recover your account. After 14 days, your data will be deleted\n        permanently and recovery will be impossible.\n      </p>\n    </div>\n    <div class="my-account-section">\n      <form novalidate data-bind="submit: deleteAccount">\n        <div data-bind="compose: usernameField"></div>\n        <p class="text-danger" data-bind="text: errorText"></p>\n        <button\n          class="btn btn-danger"\n          type="submit"\n          data-bind="disable: pending"\n        >\n          Delete My Account\n        </button>\n        <a href="account" class="btn btn-default">Cancel</a>\n      </form>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Account/EmailVerificationAddon.html",[],function(){return'<span>\n  <span class="label label-warning" data-bind="visible: !verified()"\n    >Not verified</span\n  >\n  <button\n    class="btn btn-default btn-xs"\n    type="button"\n    data-bind="visible: !verified(), click: resendEmail"\n  >\n    Send verification email\n  </button>\n</span>\n'}),define("text!Views/Account/License.html",[],function(){return'<div class="my-account">\n  <ion-message-of-the-day></ion-message-of-the-day>\n  <div class="dashboard-row-one">\n    <h1 class="h1 dashboard-title">License</h1>\n  </div>\n  <div class="dashboard-table my-account-section">\n    \x3c!-- ko compose: licenseDisplay --\x3e\x3c!-- /ko --\x3e\n  </div>\n</div>\n'}),define("text!Views/Account/MyAccount.html",[],function(){return'<div class="my-account">\n  <ion-message-of-the-day></ion-message-of-the-day>\n  <div class="dashboard-row-one">\n    <div>\n      <div class="h1 dashboard-title">Account</div>\n      \x3c!-- ko if: !isSamlAuthentication --\x3e\n      <div class="dashboard-help">\n        <div data-bind="compose: contextualHelp"></div>\n      </div>\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n  <div class="my-account-container">\n    <div class="my-account-section">\n      <ion-edit-account-form></ion-edit-account-form>\n    </div>\n    \x3c!-- ko if: !isSamlAuthentication --\x3e\n    <h3>Update Password</h3>\n    <div class="my-account-section">\n      <form role="form" data-bind="submit: submitPassword" novalidate>\n        <div data-bind="compose: currentPassword"></div>\n        <div data-bind="compose: newPassword"></div>\n        <div data-bind="compose: confirmPassword"></div>\n        <div class="my-account-button">\n          <button\n            id="myAccountUpdatePasswordButton"\n            class="btn btn-primary"\n            type="submit"\n            data-bind="disable: pending"\n          >\n            Update\n          </button>\n          <p class="text-danger" data-bind="text: passwordFormError"></p>\n          <p class="text-danger" data-bind="visible: showLockedError">\n            This account has been locked.\n            <a href="requestreset">Reset your password</a> to unlock your\n            account.\n          </p>\n        </div>\n      </form>\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: isMultiFactorAuthenticationEnabled --\x3e\n    <ion-authentication-factor-settings></ion-authentication-factor-settings>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: isOauthClientEnabled --\x3e\n    <h3>Linked sign in methods</h3>\n    <div class="dashboard-table my-account-section">\n      <div class="table-responsive">\n        <table class="table unlink-table">\n          <tbody>\n            \x3c!-- ko if: typeof bentleyUsername() !== \'undefined\' --\x3e\n            <tr>\n              <td>Bentley</td>\n              <td data-bind="text: bentleyUsername"></td>\n              <td class="text-center">\n                <div data-bind="compose: bentleyDeleteButton"></div>\n              </td>\n            </tr>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: typeof epicUsername() !== \'undefined\'--\x3e\n            <tr>\n              <td>Epic Games</td>\n              <td data-bind="text: epicUsername"></td>\n              <td class="text-center">\n                <div data-bind="compose: epicDeleteButton"></div>\n              </td>\n            </tr>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: typeof googleUsername() !== \'undefined\'--\x3e\n            <tr>\n              <td>Google</td>\n              <td data-bind="text: googleUsername"></td>\n              <td class="text-center">\n                <div data-bind="compose: googleDeleteButton"></div>\n              </td>\n            </tr>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: typeof gitHubUsername() !== \'undefined\'--\x3e\n            <tr>\n              <td>GitHub</td>\n              <td data-bind="text: gitHubUsername"></td>\n              <td class="text-center">\n                <div data-bind="compose: gitHubDeleteButton"></div>\n              </td>\n            </tr>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: typeof sketchfabUsername() !== \'undefined\'--\x3e\n            <tr>\n              <td>Sketchfab</td>\n              <td data-bind="text: sketchfabUsername"></td>\n              <td class="text-center">\n                <div data-bind="compose: sketchfabDeleteButton"></div>\n              </td>\n            </tr>\n            \x3c!-- /ko --\x3e\n            \x3c!--ko if: typeof gitHubUsername() === \'undefined\' && typeof googleUsername() === \'undefined\' && typeof epicUsername() === \'undefined\' && typeof sketchfabUsername() === \'undefined\' && typeof bentleyUsername() === \'undefined\'--\x3e\n            <tr>\n              <td colspan="3">No accounts linked</td>\n            </tr>\n            \x3c!--/ko--\x3e\n          </tbody>\n        </table>\n      </div>\n      \x3c!-- ko if: sketchfabUsername() === undefined && isSketchfabEnabled --\x3e\n      <button\n        class="btn btn-primary"\n        type="button"\n        data-bind="click: linkSketchfabAccount"\n      >\n        Link Sketchfab account\n      </button>\n      \x3c!-- /ko --\x3e\n    </div>\n    \x3c!-- /ko --\x3e\n  </div>\n</div>\n'}),define("text!Views/Admin/AdminShell.html",[],function(){return'<div class="admin-shell">\n  <div>\n    <div class="dashboard-navbar">\n      <div class="dashboard-navbar-logo">\n        <a href="">\n          <img class="hidden-xxs" alt="Cesium ion" src="Images/logo.svg" />\n          <img\n            class="visible-xxs"\n            alt="Cesium ion"\n            src="Images/logo-small.svg"\n          />\n        </a>\n        <div>\n          <span class="h2 hidden-xxs">Admin</span>\n          <span class="h3 visible-xxs">Admin</span>\n        </div>\n      </div>\n      <div class="dashboard-navbar-links" data-bind="foreach: rightNav">\n        <a class="link" data-bind="attr: { href: url }">\n          \x3c!-- ko if: showGravatar --\x3e\n          <img\n            class="img-circle"\n            data-bind="attr: {src: $parent.gravatar}"\n            alt="Profile picture"\n          />\n          \x3c!-- /ko --\x3e\n          <span data-bind="text: title"></span>\n        </a>\n      </div>\n    </div>\n    <nav class="navbar navbar-default navbar-static-top navbar-second">\n      <div class="container-fluid">\n        <ul class="nav navbar-nav" data-bind="foreach: navigation">\n          <li data-bind="css: { active: isActive }">\n            <a data-bind="attr: { href: hash }, text: title"></a>\n          </li>\n        </ul>\n      </div>\n    </nav>\n  </div>\n  <div class="container">\n    <div class="admin-shell-page-host" data-bind="router: { }"></div>\n  </div>\n</div>\n'}),define("text!Views/Auth/CompleteSignUp.html",[],function(){return'<div class="complete-sign-up">\n  <div class="form-header">\n    <h1>Complete sign up</h1>\n  </div>\n  <form role="form" data-bind="submit: submit" novalidate>\n    <div data-bind="compose: newPassword"></div>\n    <div data-bind="compose: confirmPassword"></div>\n    <div data-bind="compose: termsCheckbox"></div>\n    <button class="btn btn-primary" type="submit" data-bind="disable: pending">\n      Sign up\n    </button>\n    <p class="text-danger" data-bind="text: formError"></p>\n  </form>\n</div>\n'}),define("text!Views/Auth/OAuthProviderButtons.html",[],function(){return'<div class="third-party-login" data-bind="visible: isOauthClientEnabled">\n  <div class="button-grid" data-bind="foreach: providers">\n    <button\n      class="btn btn-primary"\n      type="submit"\n      data-bind="click: click, attr:{title: title}"\n    >\n      <span\n        data-bind="visible: fontAwesomeClass, class:fontAwesomeClass"\n        aria-hidden="true"\n      ></span>\n      <img\n        data-bind="visible: imageSource, attr: {src: imageSource}"\n        class="third-party-logo"\n        aria-hidden="true"\n      /><span class="sign-in-up-text"\n        ><span class="action"\n          ><span class="action" data-bind="text: $parent.actionPrefix"></span>\n          with\n        </span>\n        <span class="name" data-bind="text: name">PROVIDER NAME</span></span\n      >\n    </button>\n  </div>\n\n  <div class="row separator">\n    <div class="col-xs-5 line-separator"></div>\n    <div class="col-xs-2 text-center">OR</div>\n    <div class="col-xs-5 line-separator"></div>\n  </div>\n</div>\n'}),define("text!Views/Auth/Oauth.html",[],function(){return'<div class="oauth">\n  <div data-bind="visible: oauthValid">\n    <div>\n      Hello <span class="sign-in-username" data-bind="text: username"></span>,\n    </div>\n    <h3>\n      <span data-bind="text: clientName"></span> is requesting the following\n      permissions:\n    </h3>\n    <div class="table-responsive scopes-table">\n      <table class="table">\n        <tbody data-bind="foreach: scopeStrings">\n          <tr>\n            <td>\n              <span\n                class="bold no-whitespace-wrap"\n                data-bind="text: name"\n              ></span>\n            </td>\n            <td data-bind="text: description"></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <form role="form" data-bind="submit: submit" novalidate>\n      \x3c!-- ko if: hasTeams()--\x3e\n      <div data-bind="compose: showSelectTeamField"></div>\n      <div\n        data-bind="disabled: showSelectTeamField.input(), compose: selectTeamField"\n      ></div>\n      \x3c!-- /ko --\x3e\n      <div>\n        <button\n          class="btn btn-primary"\n          type="submit"\n          data-bind="disable: pending"\n        >\n          Allow\n        </button>\n        <button\n          class="btn btn-default"\n          type="button"\n          data-bind="click: deny, disable: pending"\n        >\n          Deny\n        </button>\n        <div class="pull-right sign-out-link">\n          Not\n          <span class="sign-in-username" data-bind="text: username"></span\n          >?&nbsp;<span class="sign-in-switch-user"\n            ><a data-bind="click: switchToAnotherAccount"\n              >Switch accounts</a\n            ></span\n          >\n        </div>\n      </div>\n    </form>\n  </div>\n  <p class="text-danger" data-bind="text: formError"></p>\n</div>\n'}),define("text!Views/Auth/RequestPasswordReset.html",[],function(){return'<div class="request-password-reset">\n  <div class="form-header">\n    <h1 id="requestPasswordResetTitle">Reset password</h1>\n  </div>\n  <form role="form" data-bind="submit: submit" novalidate>\n    <div data-bind="compose: emailField"></div>\n    <button class="btn btn-primary" type="submit" data-bind="disable: pending">\n      Send instructions\n    </button>\n    <a href="signin" class="pull-right">Back to sign in</a>\n    <p class="text-danger" data-bind="text: formError"></p>\n  </form>\n</div>\n'}),define("text!Views/Auth/ResetPassword.html",[],function(){return'<div class="password-reset">\n  <div class="form-header">\n    <h1>Password reset</h1>\n  </div>\n  <ion-password-reset></ion-password-reset>\n</div>\n'}),define("text!Views/Auth/SignIn.html",[],function(){return'<div class="sign-in">\n  \x3c!-- ko if: isSamlAuthenticationEnabled --\x3e\n  <div class="form-header">\n    <h1>Redirecting to sign in...</h1>\n  </div>\n  \x3c!-- /ko --\x3e\n  \x3c!--  ko ifnot: isSamlAuthenticationEnabled --\x3e\n  <div class="form-header">\n    <h1 id="signInTitle">Sign in</h1>\n  </div>\n  <div\n    class="alert alert-info"\n    data-bind="visible: showFormInstruction() && !hasExpiredVerificationToken()"\n  >\n    <span class="fa fa-lg fa-info-circle"></span> Please sign in to complete\n    account verification\n  </div>\n  <div data-bind="compose: oAuthProviderButtons"></div>\n  <div\n    class="alert alert-danger"\n    data-bind="visible: hasExpiredVerificationToken"\n  >\n    <span class="fa fa-warning"></span>\n    The email verification has expired. Please sign in to request another\n    verification email.\n  </div>\n\n  <ion-sign-in></ion-sign-in>\n\n  <div class="new-to-ion">\n    New to Cesium ion?\n    <a data-bind="click: goToSignUp">Sign up for an account</a>\n  </div>\n\n  \x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Auth/SignInEpic.html",[],function(){return'<div class="sign-up" data-bind="visible: state() !== \'secondFactor\'">\n  <div class="form-header">\n    <h1 id="signUpTitle">Sign Up</h1>\n  </div>\n  <form\n    role="form"\n    data-bind="visible: state() === \'promptEmail\', submit: submitEmail"\n    novalidate\n  >\n    <div data-bind="compose: emailField"></div>\n    <button class="btn btn-primary" type="submit" data-bind="disable: pending">\n      Next\n    </button>\n  </form>\n  <form\n    role="form"\n    data-bind="visible: state() === \'verifyCode\', submit: submitCode"\n    novalidate\n  >\n    <p>\n      Enter the verification code we just sent to\n      <span data-bind="text: emailField.input"></span>\n    </p>\n    <div data-bind="compose: verificationCodeField"></div>\n    <p>\n      <button\n        class="btn btn-primary"\n        type="submit"\n        data-bind="disable: pending"\n      >\n        Sign in\n      </button>\n    </p>\n    <p>Need a new code? <a data-bind="click: resendCode">Resend code</a></p>\n  </form>\n  <form\n    role="form"\n    data-bind="visible: state() === \'signUp\', submit: submitSignUp"\n    novalidate\n  >\n    <div data-bind="compose: usernameField"></div>\n    <div data-bind="compose: dataCenterLocationField"></div>\n    <div data-bind="compose: canEmailCheckbox"></div>\n    <div data-bind="compose: termsCheckbox"></div>\n    <button class="btn btn-primary" type="submit" data-bind="disable: pending">\n      Sign up\n    </button>\n  </form>\n  <p class="text-danger" data-bind="text: formError"></p>\n</div>\n<div class="sign-in" data-bind="visible: state() === \'secondFactor\'">\n  <div class="form-header">\n    <h1>Complete Sign In</h1>\n  </div>\n  <ion-two-factor-sign-in></ion-two-factor-sign-in>\n</div>\n'}),define("text!Views/Auth/SignInOAuth.html",[],function(){return'<div class="sign-up" data-bind="visible: !showTwoFactor()">\n  <div class="form-header">\n    <h1 id="signUpTitle">Complete Sign Up</h1>\n  </div>\n  <form role="form" data-bind="submit: submit" novalidate>\n    <div data-bind="compose: usernameField"></div>\n    <div data-bind="compose: dataCenterLocationField"></div>\n    <div data-bind="compose: canEmailCheckbox"></div>\n    <div data-bind="compose: termsCheckbox"></div>\n    <button class="btn btn-primary" type="submit" data-bind="disable: pending">\n      Sign up\n    </button>\n    <p class="text-danger" data-bind="text: formError"></p>\n  </form>\n</div>\n<div class="sign-in" data-bind="visible: showTwoFactor">\n  <div class="form-header">\n    <h1>Complete Sign In</h1>\n  </div>\n  <ion-two-factor-sign-in></ion-two-factor-sign-in>\n</div>\n'}),define("text!Views/Auth/SignInShell.html",[],function(){return'<div class="fill-absolute">\n  <div class="sign-in-background"></div>\n  <div class="sign-in-container">\n    <div id="signInPanel">\n      <div class="sign-in-logo">\n        <img src="Images/logo.svg" alt="Cesium ion" />\n      </div>\n      <div data-bind="compose: content"></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Auth/SignOut.html",[],function(){return'<div class="static-container">\n  <div class="container">\n    <div class="static-header">\n      <a href=""><img src="Images/logo.svg" alt="Cesium ion" /></a>\n    </div>\n    <div class="static-content row">\n      <div class="col-xs-12 col-sm-6">\n        <div class="container-content">\n          <h1>You have been signed out</h1>\n          <p>\n            <a class="btn btn-primary" href="/signin">Sign In</a>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Auth/SignUp.html",[],function(){return'<div class="sign-up">\n  <div class="form-header">\n    <h1 id="signUpTitle">Sign up</h1>\n  </div>\n  <div\n    data-bind="compose: oAuthProviderButtons, visible: !showFullForm()"\n  ></div>\n  <form\n    role="form"\n    data-bind="submit: submitInitialEmail, visible: !showFullForm()"\n    novalidate\n  >\n    <div data-bind="compose: initialEmailField"></div>\n    <button class="btn btn-primary" type="submit" data-bind="disable: pending">\n      Next\n    </button>\n  </form>\n  <form\n    role="form"\n    data-bind="submit: submit, visible: showFullForm"\n    novalidate\n  >\n    <div data-bind="compose: usernameField"></div>\n    <div data-bind="compose: emailField"></div>\n    <div data-bind="compose: passwordField"></div>\n    <div data-bind="compose: dataCenterLocationField"></div>\n    <div data-bind="compose: canEmailCheckbox"></div>\n    <div data-bind="compose: termsCheckbox"></div>\n    <div class="captcha">\n      <img data-bind="attr: {src: captcha}" alt="captcha" />\n      <a\n        class="btn btn-primary btn-xs"\n        data-bind="click: reloadCaptcha"\n        title="refresh"\n        ><span class="fa fa-refresh"></span\n      ></a>\n    </div>\n    <div data-bind="compose: captchaField"></div>\n    <button class="btn btn-primary" type="submit" data-bind="disable: pending">\n      Sign up\n    </button>\n  </form>\n  \x3c!-- ko if: formError() === "EMAIL_CONFLICT"--\x3e\n  <p class="text-danger">\n    Account with email\n    <em data-bind="text:initialEmailField.input()"></em> already exists.\n    <a href="signin">Sign in</a> or <a href="requestreset">reset password</a>.\n  </p>\n  \x3c!-- /ko--\x3e\n  \x3c!-- ko ifnot: formError() === "EMAIL_CONFLICT"--\x3e\n  <p class="text-danger" data-bind="text: formError"></p>\n  \x3c!-- /ko --\x3e\n  <div>Already have an account? <a href="signin">Sign in to Cesium ion</a></div>\n</div>\n'}),define("text!Views/Components/ActionPane.html",[],function(){return'<div class="action-pane-container">\n  <div class="action-pane-tabs" data-bind="css: { \'disabled\' : disableTabs }">\n    <div class="left">\n      <ul data-bind="foreach: components">\n        <li data-bind="visible: visible">\n          \x3c!--no whitespace between ul and li to avoid random space between tabs --\x3e\n          <a\n            data-toggle="tab"\n            data-bind="attr: {href: \'#\' + containerId, id: containerId + \'-tab\'}, css: {\'closable\': closable}"\n          >\n            <span data-bind="text: name"></span>\n            \x3c!-- ko if: closable --\x3e\n            <span\n              class="fa fa-times"\n              data-bind="click: onClose, clickBubble: false"\n            ></span>\n            \x3c!-- /ko --\x3e\n          </a>\n        </li>\n      </ul>\n    </div>\n    <ul\n      class="action-pane-toggle"\n      data-bind="visible: visible, css: {\'action-pane-toggle-right\': !expanded()}"\n    >\n      <li data-bind="attr:{\'title\': expanded() ? \'Hide panel\' : \'Show panel\'}">\n        <a class="text-center" data-bind="click: toggleActionPane">\n          <span\n            class="fa fa-lg"\n            data-bind="css: {\'fa-caret-left\': expanded, \'fa-caret-right\': !expanded()}"\n          ></span>\n        </a>\n      </li>\n    </ul>\n  </div>\n  <div class="tab-content" data-bind="foreach: components">\n    <div\n      class="tab-pane"\n      data-bind="attr: {id: containerId}, compose: compose"\n    ></div>\n  </div>\n</div>\n'}),define("text!Views/Components/AddUserToTeam.html",[],function(){return'<div class="modal-content messageBox">\n  <div class="modal-header">\n    <h2>Invite User</h2>\n  </div>\n  <div class="modal-body">\n    <div class="row">\n      <div class="col-xs-6">\n        <div\n          class="new-invitee-field"\n          data-bind="compose: usernameOrEmailField"\n        ></div>\n        <div class="new-invitee-field" data-bind="compose: roleField"></div>\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <p class="text-danger text-left" data-bind="text: errorText"></p>\n    <span class="fa fa-spinner fa-pulse" data-bind="visible: pending"></span>\n    <button\n      class="btn btn-primary"\n      type="button"\n      data-bind="disable: pending, click: apply"\n    >\n      Submit\n    </button>\n    <button\n      class="btn btn-default"\n      type="button"\n      data-bind="disable: pending, click: close"\n    >\n      Cancel\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Components/ArchiveProgressBar.html",[],function(){return'<div class="progress">\n  <div class="progress-bar active progress-bar-striped" role="progressbar">\n    <span data-bind="text: _textValue"></span>\n  </div>\n</div>\n'}),define("text!Views/Components/AssetConfigurationTable.html",[],function(){return'<div class="asset-config-table">\n  <div data-bind="visible: !pending() && !hasError()">\n    <div class="table-responsive">\n      <table class="details-table table table-bordered">\n        <tbody data-bind="foreach: configurationRows">\n          <tr>\n            <td class="bold" data-bind="text: name"></td>\n            <td data-bind="html: value"></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div\n    class="alert alert-warning"\n    data-bind="visible: hasError, text: error"\n  ></div>\n  <div class="loading-indicator-overlay" data-bind="visible: pending">\n    <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n  </div>\n</div>\n'}),define("text!Views/Components/AssetSelector.html",[],function(){return'<form class="asset-selector">\n  <div class="row">\n    <div class="col-xs-6 asset-selector-title">\n      <div class="asset-selector-title h3" data-bind="text: title"></div>\n    </div>\n    <div class="col-xs-6">\n      <div class="input-group input-group-sm">\n        <input\n          type="text"\n          class="form-control input-sm"\n          placeholder="Search for..."\n          data-bind="textInput: query"\n        />\n        <div class="input-group-addon">\n          <span class="fa fa-lg fa-search"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="asset-list table-responsive">\n    <table class="table table-hover table-condensed">\n      <thead>\n        <tr>\n          <th class="asset-list-name">\n            <a data-bind="click: sortBy(\'name\')"\n              >Name <span class="fa" data-bind="css: sortStatus(\'name\')"></span\n            ></a>\n          </th>\n          <th class="asset-list-type">\n            <a data-bind="click: sortBy(\'type\')"\n              >Type <span class="fa" data-bind="css: sortStatus(\'type\')"></span\n            ></a>\n          </th>\n          <th class="asset-list-date text-center hidden-xxs">\n            <a data-bind="click: sortBy(\'dateAdded\')"\n              >Date Added\n              <span class="fa" data-bind="css: sortStatus(\'dateAdded\')"></span\n            ></a>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        \x3c!-- ko if: hasDefaultAsset --\x3e\n        \x3c!-- ko with: defaultAsset --\x3e\n        <tr\n          data-bind="click: $parent.select, css: { \'active\': isSelected, \'disabled\': !selectable() }, attr: {title: $parent.getDisabledAssetTooltip($data)}"\n        >\n          <td class="asset-list-name" data-bind="text: name"></td>\n          <td class="asset-list-type" data-bind="text: type"></td>\n          <td\n            class="asset-list-date text-center hidden-xxs"\n            data-bind="text: dateString"\n          ></td>\n        </tr>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko foreach: filteredAssets --\x3e\n        <tr\n          data-bind="click: $parent.select, css: { \'active\': isSelected, \'disabled\': !selectable() }, attr: {title: $parent.getDisabledAssetTooltip($data)}"\n        >\n          <td class="asset-list-name" data-bind="text: name"></td>\n          <td class="asset-list-type" data-bind="text: type"></td>\n          <td\n            class="asset-list-date text-center hidden-xxs"\n            data-bind="text: dateString"\n          ></td>\n        </tr>\n        \x3c!-- /ko --\x3e\n      </tbody>\n      <tbody data-bind="visible: noAssetsAvailable">\n        <tr>\n          <td colspan="4">No assets available</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</form>\n'}),define("text!Views/Components/AssetSourcesTable.html",[],function(){return'<div class="asset-sources-table">\n  <div data-bind="visible: !pending() && !hasError()">\n    <div class="table-responsive" data-bind="visible: hasSources">\n      <table class="table">\n        <thead>\n          <tr>\n            <th>File name</th>\n            <th>Size</th>\n            <th class="text-center">Download</th>\n          </tr>\n        </thead>\n        <tbody data-bind="foreach: sources">\n          <tr>\n            <td data-bind="text: name"></td>\n            <td>\n              <span\n                class="no-whitespace-wrap"\n                data-bind="text: $data.size"\n              ></span>\n            </td>\n            <td class="text-center">\n              <a\n                class="btn btn-primary btn-xs"\n                data-bind="attr: {href: $data.url}"\n                target="_blank"\n                rel="noopener"\n                ><span class="fa fa-download"></span\n              ></a>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div data-bind="visible: !hasSources()">\n      There are no source files linked to this asset.\n    </div>\n  </div>\n  <div\n    class="alert alert-warning"\n    data-bind="visible: hasError, text: error"\n  ></div>\n  <div class="loading-indicator-overlay" data-bind="visible: pending">\n    <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n  </div>\n</div>\n'}),define("text!Views/Components/AssetViewer.html",[],function(){return'<div\n  id="assetViewerContainer"\n  class="asset-viewer fullscreen cesium-theme"\n  data-bind="css: {\'webgl-error\': webglError, \'in-progress\': processingInProgress}"\n>\n  <div class="alert alert-info" data-bind="visible: showWebglError">\n    <span class="fa fa-lg fa-info-circle"></span> Asset preview is unavailable\n    because you are on a browser that does not support WebGL.\n  </div>\n  <div class="loading-indicator-overlay" data-bind="visible: loadingInProgress">\n    <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n  </div>\n  <div class="asset-viewer-panel" data-bind="visible: panelVisible">\n    <div class="alert alert-info" data-bind="visible: awaitingFiles">\n      Files for this asset are currently being uploaded.\n    </div>\n    <div class="alert alert-info" data-bind="visible: processingInProgress">\n      <span\n        data-bind="text: progressMessage, visible: progressMessage().length > 0"\n      ></span>\n      <span data-bind="visible: progressMessage().length === 0"\n        >Initializing tiling pipeline...</span\n      >\n      <div\n        class="asset-viewer-progress-bar"\n        data-bind="visible: percentComplete() !== 0, compose: progressBar"\n      ></div>\n    </div>\n    <div class="alert alert-info" data-bind="visible: infoMessage().length > 0">\n      <span class="fa fa-lg fa-info-circle"></span\n      ><span data-bind="text: infoMessage"></span>\n      <div>\n        <br />\n        <button\n          class="btn btn-primary btn-sm"\n          type="button"\n          data-bind="click: forceLoadAsset"\n        >\n          Load preview\n        </button>\n      </div>\n    </div>\n  </div>\n  <div\n    class="asset-viewer-error-panel"\n    data-bind="visible: panelVisible && (processingIsError() || viewerError())"\n  >\n    <div class="alert alert-danger">\n      <div data-bind="visible: errorMessage().length > 0">\n        <p>\n          <span class="fa fa-lg fa-warning"></span>We were unable to process\n          your data due to the following issue:\n        </p>\n        <p data-bind="html: errorMessage"></p>\n        \x3c!-- ko if: isPublicInternetAccessEnabled--\x3e\n        <p data-bind="visible: showDataFormatsMessage">\n          Read about what\n          <a\n            href="https://cesium.com/learn/3d-tiling/tiler-data-formats/"\n            target="_blank"\n            rel="noopener"\n            >data formats are supported</a\n          >\n          on Cesium ion.\n        </p>\n        \x3c!-- /ko --\x3e\n      </div>\n      <div data-bind="visible: errorMessage().length === 0">\n        <p>\n          <span class="fa fa-lg fa-warning"></span> Something went wrong with\n          this asset.\n          \x3c!-- ko if: isCesiumHostedIon --\x3e\n          To report this issue, please email\n          <a\n            href="mailto:support@cesium.com"\n            target="_blank"\n            rel="noopener"\n            data-bind="click: onPrivateSupportClick"\n            >support@cesium.com</a\n          >\n          with the asset ID: <span data-bind="text: assetId"></span>.\n          \x3c!-- /ko --\x3e\n        </p>\n        \x3c!-- ko if: isCesiumHostedIon--\x3e\n        <p>\n          To help resolve this faster, include any relevant information about\n          your data, such as what software you used to export it.\n        </p>\n        \x3c!-- /ko --\x3e\n      </div>\n    </div>\n  </div>\n  <div id="creditDisplay" data-bind="visible: creditsVisible"></div>\n  <div data-bind="compose: assetWarningButton"></div>\n  <div id="cesiumContainer" class="fullscreen"></div>\n  <div\n    class="asset-viewer-georeference-warning"\n    data-bind="visible: showGeoreferenceWarning"\n    title="To set the tileset location, click the Adjust Tileset Location button above the asset preview"\n  >\n    <a data-bind="attr:{href: georeferenceUrl}"\n      ><span class="fa fa-warning"></span> Tileset location has not been set</a\n    >\n  </div>\n</div>\n'}),define("text!Views/Components/AsyncAssetSelector.html",[],function(){return'<form class="asset-selector">\n  <div class="row">\n    <div class="col-xs-6 asset-selector-title">\n      <div class="asset-selector-title h3" data-bind="text: title"></div>\n    </div>\n    <div class="col-xs-6">\n      <div class="input-group input-group-sm">\n        <input\n          type="text"\n          class="form-control input-sm"\n          placeholder="Search for..."\n          data-bind="textInput: searchText"\n        />\n        <div class="input-group-addon">\n          <span class="fa fa-lg fa-search"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="asset-list table-responsive">\n    <div data-bind="visible: isError">\n      <div class="alert alert-danger">\n        There was an error loading the content\n      </div>\n    </div>\n    <div class="loading-indicator-overlay" data-bind="visible: isInProgress">\n      <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n      <div class="loading-message">Loading...</div>\n    </div>\n    <div data-bind="visible: isReady">\n      <table class="table table-hover table-condensed">\n        <thead>\n          <tr>\n            <th class="asset-list-name">\n              <a data-bind="click: sortBy(\'NAME\')"\n                >Name\n                <span class="fa" data-bind="css: sortStatus(\'NAME\')"></span\n              ></a>\n            </th>\n            <th class="asset-list-type">\n              <a data-bind="click: sortBy(\'TYPE\')"\n                >Type\n                <span class="fa" data-bind="css: sortStatus(\'TYPE\')"></span\n              ></a>\n            </th>\n            <th class="asset-list-date text-center hidden-xxs">\n              <a data-bind="click: sortBy(\'DATE_ADDED\')"\n                >Date Added\n                <span\n                  class="fa"\n                  data-bind="css: sortStatus(\'DATE_ADDED\')"\n                ></span\n              ></a>\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          \x3c!-- ko if: hasDefaultAsset --\x3e\n          \x3c!-- ko with: defaultAsset --\x3e\n          <tr data-bind="click: $parent.select, css: { \'active\': isSelected }">\n            <td class="asset-list-name" data-bind="text: name"></td>\n            <td class="asset-list-type" data-bind="text: type"></td>\n            <td\n              class="asset-list-date text-center hidden-xxs"\n              data-bind="text: dateString"\n            ></td>\n          </tr>\n          \x3c!-- /ko --\x3e\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: showSelectedAsset --\x3e\n          \x3c!-- ko with: selectedAssets()[0] --\x3e\n          <tr data-bind="click: $parent.select, css: { \'active\': isSelected }">\n            <td class="asset-list-name" data-bind="text: name"></td>\n            <td class="asset-list-type" data-bind="text: type"></td>\n            <td\n              class="asset-list-date text-center hidden-xxs"\n              data-bind="text: dateString"\n            ></td>\n          </tr>\n          \x3c!-- /ko --\x3e\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko foreach: assets --\x3e\n          <tr data-bind="click: $parent.select, css: { \'active\': isSelected }">\n            <td class="asset-list-name" data-bind="text: name"></td>\n            <td class="asset-list-type" data-bind="text: type"></td>\n            <td\n              class="asset-list-date text-center hidden-xxs"\n              data-bind="text: dateString"\n            ></td>\n          </tr>\n          \x3c!-- /ko --\x3e\n        </tbody>\n        <tbody data-bind="visible: noAssetsAvailable">\n          <tr>\n            <td colspan="4">No assets available</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  \x3c!-- ko if: multiselect --\x3e\n  <div>\n    <h3>Selected Assets</h3>\n    <ul>\n      \x3c!-- ko foreach: selectedAssets --\x3e\n      <li>\n        <span data-bind="text: name"></span>\n        <span\n          class="fa fa-times text-danger"\n          data-bind="click: $parent.deselect"\n        ></span>\n      </li>\n      \x3c!-- /ko --\x3e\n      <li data-bind="visible: !hasSelected()">No assets selected</li>\n    </ul>\n  </div>\n  \x3c!-- /ko --\x3e\n</form>\n'}),define("text!Views/Components/BetaFeature.html",[],function(){return'<span\n  class="fa fa-flask ion-beta-feature"\n  title="This feature is in beta"\n></span>\n'}),define("text!Views/Components/ClickEditField.html",[],function(){return'<div class="form-group click-edit-field">\n  <label\n    class="control-label"\n    data-bind="attr: {\'for\': id}, text: label, visible: hasLabel"\n  ></label>\n  <div\n    class="click-edit-field-placeholder"\n    data-bind="css:{\'disabled\': pending(), \'default-text\': useDefault()}, visible: !editing(), click: edit"\n    title="Click to edit the value"\n  >\n    <div class="click-edit-field-text" data-bind="text: text"></div>\n  </div>\n  \x3c!-- ko if: type === \'text\' --\x3e\n  <input\n    class="form-control"\n    type="text"\n    data-bind="visible: editing, hasFocus: editing, value: input, attr: {\'id\': id, placeholder: text}, enterKey: submit, disable: pending"\n  />\n  \x3c!-- /ko --\x3e\n  \x3c!-- ko if: type === \'textarea\' --\x3e\n  <textarea\n    class="form-control"\n    rows="6"\n    data-bind="visible: editing, hasFocus: editing, value: input, attr: {\'id\': id, placeholder: text}, enterKey: submit, disable: pending"\n  ></textarea>\n  \x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Components/CollapsePanel.html",[],function(){return'<div class="collapse-panel">\n  <div\n    class="collapse-panel-heading clearfix"\n    data-bind="attr: {id: nameContainerId}"\n  >\n    <div class="collapse-panel-title">\n      <a\n        data-toggle="collapse"\n        data-bind="attr: {\'data-target\': \'#\' + bodyContainerId}, css: {\'disabled\': disabled}"\n      >\n        <span\n          class="fa fa-lg"\n          data-bind="css:{\'fa-caret-right\': !_isShown(), \'fa-caret-down\': _isShown()}"\n        ></span>\n        <span\n          class="collapse-panel-name"\n          data-bind="text: name, attr: {title: name}"\n        ></span>\n      </a>\n    </div>\n    <div class="collapse-panel-buttons" data-bind="foreach: buttons">\n      \x3c!-- ko compose: $data --\x3e\x3c!-- /ko --\x3e\n    </div>\n  </div>\n  <div\n    class="collapse-panel-body collapse"\n    data-bind="attr: {id: bodyContainerId, \'aria-labelledby\': nameContainerId}, compose: panelContent"\n  ></div>\n</div>\n'}),define("text!Views/Components/ContextualHelp.html",[],function(){return'<a\n  class="contextual-help-button"\n  role="button"\n  data-toggle="popover"\n  data-placement="right"\n  data-bind="attr: {\'id\': id}"\n>\n  <div class="h1 fa fa-lg fa-question-circle"></div>\n</a>\n'}),define("text!Views/Components/DeleteButton.html",[],function(){return'<div\n  class="delete-button"\n  data-container="body"\n  tabindex="0"\n  role="button"\n  data-toggle="popover"\n  data-bind="attr: {\'id\': id, \'data-placement\': placement}, click: onDeleteClick"\n>\n  <div class="fa fa-trash fa-lg"></div>\n  <div class="small" data-bind="text: lowerText"></div>\n</div>\n'}),define("text!Views/Components/EditTokenButton.html",[],function(){return'<div\n  class="edit-token-button"\n  data-container="body"\n  tabindex="0"\n  role="button"\n  data-bind="attr: {\'id\': id,}, click: onEditTokenClick, clickBubble: false"\n>\n  <div class="fa fa-pencil fa-lg"></div>\n  \x3c!-- ko if: !hideLowerText --\x3e\n  <div class="small">Edit</div>\n  \x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Components/FileUploadList.html",[],function(){return'<div\n  class="file-upload-wrapper"\n  data-bind="css: {\'expanded\': expanded, \'closed\': !expanded()}"\n>\n  <div class="file-upload-panel" data-bind="visible: show">\n    <div class="file-upload-panel-header">\n      <div\n        class="file-upload-panel-header-button file-upload-panel-header-button-left"\n      >\n        <a data-bind="click: minimize" title="Minimize">\n          <span class="fa fa-caret-down"></span>\n        </a>\n      </div>\n      <div\n        class="file-upload-panel-header-button file-upload-panel-header-button-right"\n        data-bind="visible: !hasUploadsInProgress()"\n      >\n        <a data-bind="click: close" title="Hide uploading panel">Clear</a>\n      </div>\n      <div\n        class="file-upload-panel-header-button-right"\n        data-bind="visible: hasUploadsInProgress"\n      >\n        <a class="btn btn-flat btn-xs btn-primary" data-bind="click: cancelAll"\n          >Cancel all</a\n        >\n      </div>\n    </div>\n    <div class="file-upload-panel-messages" data-bind="foreach: messages">\n      \x3c!-- ko compose: $data --\x3e\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n  <div\n    class="file-upload-panel-tab"\n    title="Maximize"\n    data-bind="visible: show, click: expand, css: state"\n  >\n    <div>\n      <span class="fa" data-bind="css: tabCss"></span>\n      <span data-bind="text: tabText"></span>\n    </div>\n    <div\n      class="file-upload-progress-bar"\n      data-bind="visible: showProgressBar, compose: progressBar"\n    ></div>\n  </div>\n</div>\n'}),define("text!Views/Components/FileUploadListItem.html",[],function(){return'<div class="file-upload-panel-item" data-bind="css: status">\n  <div class="file-upload-panel-item-text data-name">\n    <span class="fa" data-bind="css: statusIcon"></span\n    ><span class="bold" data-bind="text: name"></span>\n  </div>\n  <div class="file-upload-spinner" data-bind="visible: isWaiting">\n    <span data-bind="text: waitingMessage"></span>\n    <span class="fa fa-spinner fa-spin fa-pulse"></span>\n  </div>\n  <div class="small" data-bind="if: showFileList">\n    <span\n      class="fa"\n      data-bind="css: filesIcon, click: toggleFileVisibility"\n    ></span>\n    <span data-bind="text: fileCount"></span> files\n    <ul data-bind="visible: filesVisible, foreach: fileUploadItems">\n      <li\n        class="file-upload-panel-item-text"\n        data-bind="text: sourceData.path"\n      ></li>\n    </ul>\n  </div>\n  <div class="file-upload-panel-item-text small" data-bind="if: !showFileList">\n    <span data-bind="text: fileUploadItems[0].sourceData.path"></span>\n  </div>\n  <div class="file-upload-progress-bar" data-bind="visible: isInProgress">\n    <div data-bind="compose: progressBar"></div>\n  </div>\n  <a\n    class="file-upload-cancel text-danger"\n    title="Cancel upload"\n    data-bind="click: cancel, visible: isInProgress"\n    ><span class="fa fa-times-circle"></span\n  ></a>\n  <div class="file-upload-error-message">\n    <span class="small" data-bind="text: errorText"></span>\n  </div>\n  <div\n    class="file-upload-panel-item-close"\n    title="Close"\n    data-bind="visible: !isInProgress(), click: close"\n  >\n    <span class="fa fa-times"></span>\n  </div>\n</div>\n'}),define("text!Views/Components/FormInput.html",[],function(){return"<div class=\"form-group\" data-bind=\"css: {'has-error': hasError}\">\n  <label\n    class=\"control-label\"\n    data-bind=\"attr: {'for': id}, html: label\"\n  ></label>\n  \x3c!-- ko if: hasAddons --\x3e\n  <div class=\"input-group\">\n    \x3c!-- ko if: addonBefore --\x3e\n    <div class=\"input-group-addon\" data-bind=\"text: addonBefore\"></div>\n    \x3c!-- /ko --\x3e\n    <input\n      class=\"form-control\"\n      data-bind=\"textInput: input, hasFocus: focus, attr: {'id': id, 'tabindex': tabindex, 'type': type, 'required': required, 'min': minimum, 'max': maximum, 'step': step, 'disabled': disabled}\"\n    />\n    \x3c!-- ko if: addonAfter --\x3e\n    <div class=\"input-group-addon\" data-bind=\"text: addonAfter\"></div>\n    \x3c!-- /ko --\x3e\n  </div>\n  \x3c!-- /ko --\x3e\n\n  \x3c!-- ko ifnot: hasAddons --\x3e\n  <input\n    class=\"form-control\"\n    data-bind=\"textInput: input, hasFocus: focus, attr: {'id': id, 'tabindex': tabindex, 'type': type, 'required': required, 'min': minimum, 'max': maximum, 'step': step, 'disabled': disabled}\"\n  />\n  \x3c!-- /ko --\x3e\n\n  <span class=\"help-block\" data-bind=\"text: feedback\"></span>\n</div>\n"}),define("text!Views/Components/FormTextArea.html",[],function(){return'<div class="form-group" data-bind="css: {\'has-error\': hasError}">\n  <label\n    class="control-label"\n    data-bind="attr: {\'for\': id}, html: label"\n  ></label>\n  <textarea\n    class="form-control"\n    rows="6"\n    data-bind="textInput: input, hasFocus: focus, attr: {\'id\': id, \'tabindex\': tabindex, \'required\': required, \'disabled\': disabled}"\n  ></textarea>\n  <span class="help-block" data-bind="text: feedback"></span>\n</div>\n'}),define("text!Views/Components/JobMessage.html",[],function(){return'<div class="modal-content messageBox">\n  <div class="modal-header">\n    <h3 data-bind="html: title"></h3>\n  </div>\n  <div class="modal-body">\n    <p class="message" data-bind="html: message"></p>\n  </div>\n  <div class="modal-body">\n    <div data-bind="compose: timeOutField"></div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-primary" type="button" data-bind="click: restartJob">\n      Restart Job\n    </button>\n    <button class="btn btn-primary" type="button" data-bind="click: close">\n      Close\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Components/LabelPicker.html",[],function(){return'<a\n  class="edit-labels"\n  role="button"\n  data-toggle="popover"\n  data-bind="attr: {\'id\': id}"\n  aria-label="Edit labels"\n>\n  <span class="fa fa-pencil"></span>\n</a>\n'}),define("text!Views/Components/LeaveTeamButton.html",[],function(){return'<div\n  class="delete-button"\n  data-container="body"\n  tabindex="0"\n  role="button"\n  data-toggle="popover"\n  data-bind="attr: {\'id\': id, \'data-placement\': placement}, click: onDeleteClick"\n>\n  <div class="fa fa-sign-out fa-lg"></div>\n  <div class="small" data-bind="text: lowerText"></div>\n</div>\n'}),define("text!Views/Components/LinkSketchfabAccountButton.html",[],function(){return'<button\n  class="btn btn-primary"\n  data-toggle="popover"\n  data-bind="attr: {\'id\': id, \'data-placement\': placement}, click: onLinkSketchfabAccountClick, clickBubble: false"\n>\n  Add from Sketchfab...\n</button>\n'}),define("text!Views/Components/ProgressBar.html",[],function(){return'<div class="progress">\n  <div\n    class="progress-bar active"\n    role="progressbar"\n    data-bind="style: { width: value() + \'%\' }, css: state"\n  >\n    <span data-bind="text: _textValue"></span>\n  </div>\n</div>\n'}),define("text!Views/Components/RegenerateDefaultTokenButton.html",[],function(){return'<div\n  class="regenerate-default-token-button"\n  data-container="body"\n  tabindex="0"\n  role="button"\n  data-toggle="popover"\n  data-bind="attr: {\'id\': id, \'data-placement\': placement}, click: onRegenerateDefaultTokenClick, clickBubble: false"\n>\n  <div class="fa fa-refresh fa-lg"></div>\n  \x3c!-- ko if: showLowerText --\x3e\n  <div class="small">Regenerate</div>\n  \x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Dashboard/DashboardShell.html",[],function(){return'<div class="dashboard container-fluid fill-absolute">\n  <div class="row-eq-height fill-absolute">\n    <div\n      class="disabled-overlay"\n      data-bind="visible: disabled, css: {\'details-pane-expanded\': showDetails()}"\n    ></div>\n    <div\n      class="pane-left dashboard-pane"\n      data-bind="compose: listPane, css: {\'details-pane-expanded\': showDetails()}"\n    ></div>\n    <div\n      class="dashboard-pane details-pane"\n      data-bind="compose: rightPane, visible: showDetails"\n    ></div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/ListPane.html",[],function(){return'<div class="container-fluid dashboard-list">\n  <div class="dashboard-list-heading">\n    <ion-message-of-the-day></ion-message-of-the-day>\n    <div class="dashboard-row-one">\n      <div class="h1 dashboard-title" data-bind="text: title"></div>\n      <div class="dashboard-help" data-bind="if: hasHelp">\n        <div data-bind="compose: contextualHelp"></div>\n      </div>\n      <div\n        class="dashboard-after-title"\n        data-bind="compose: afterTitleContent"\n      ></div>\n    </div>\n    <div class="dashboard-new-button" data-bind="css: {\'disabled\': disableNew}">\n      <button\n        class="btn btn-primary"\n        type="button"\n        data-bind="visible: newButtonVisible, click: createNew"\n      >\n        <span data-bind="text: newButtonText"></span>\n      </button>\n    </div>\n    \x3c!-- ko ifnot: hideSearch --\x3e\n    <div class="pull-right dashboard-search">\n      <div class="input-group">\n        <input\n          type="search"\n          class="form-control"\n          placeholder="Search for..."\n          data-bind="textInput: searchText"\n        />\n        <div class="input-group-addon">\n          <span class="fa fa-lg fa-search"></span>\n        </div>\n      </div>\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: hasPlanDetails --\x3e\n    <div>\n      <div\n        class="well dashboard-list-toolbar-quota pull-left"\n        data-bind="css: planDetails.css"\n      >\n        <span data-bind="text: planDetails.usage"></span>\n      </div>\n    </div>\n\n    \x3c!-- ko if: !billingDisabled --\x3e\n    <div class="dashboard-list-toolbar-quota pull-left small">\n      <a href="account/billing">Get more storage</a>\n    </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- /ko --\x3e\n  </div>\n  <div class="dashboard-list-content">\n    <div data-bind="visible: isError">\n      <div class="alert alert-danger">\n        There was an error loading the content\n      </div>\n    </div>\n    <div class="loading-indicator-overlay" data-bind="visible: isInProgress">\n      <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n      <div class="loading-message">Loading...</div>\n    </div>\n    <div class="row" data-bind="visible: isReady">\n      <div class="col-xs-12">\n        \x3c!-- ko if: enableGrid --\x3e\n        <div id="dashboardGrid">\n          <div class="dashboard-grid" data-bind="foreach: tableItems">\n            <div\n              class="pull-left"\n              data-bind="compose: $parent.gridTilePath"\n            ></div>\n          </div>\n          \x3c!-- ko if: !_hasItems() --\x3e\n          <div\n            data-bind="compose: \'Views/Dashboard/Stories/WelcomeStories.html\'"\n          ></div>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: hasNoResults --\x3e\n          No results\n          \x3c!-- /ko --\x3e\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko ifnot: enableGrid --\x3e\n        <div id="dashboardTable">\n          <div class="row">\n            <div\n              class="col-xs-12 dashboard-table-container"\n              data-bind="compose: tablePath"\n            ></div>\n          </div>\n        </div>\n        \x3c!-- /ko --\x3e\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Layout/DashboardHeader.html",[],function(){return'<div class="dashboard-heading">\n  <ion-message-of-the-day></ion-message-of-the-day>\n  <div class="dashboard-row-one">\n    <div class="h1 dashboard-title" data-bind="text: title"></div>\n    <div class="dashboard-help">\n      <div data-bind="compose: contextualHelp"></div>\n    </div>\n  </div>\n  <div class="dashboard-buttons clearfix">\n    <button\n      class="btn btn-primary"\n      type="button"\n      data-bind="click: createNew, text: newButtonText, visible: showNewButton"\n    ></button>\n    <div class="pull-right dashboard-search">\n      <div class="input-group" data-bind="visible: searchBoxVisible">\n        <input\n          type="text"\n          class="form-control"\n          placeholder="Search for..."\n          data-bind="textInput: searchText"\n        />\n        <div class="input-group-addon">\n          <span class="fa fa-lg fa-search"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Static/Changelog.html",[],function(){return'<div class="static-container">\n      <div class="container">\n        <div class="static-header" data-bind="visible: !isSignedIn()">\n          <a href="">\n            <img src="Images/logo.svg" alt="Cesium ion" />\n          </a>\n        </div>\n        <div class="static-content">\n          <h1 id="whats-new">What\'s New?</h1>\n<h5 id="2025-07-22">2025-07-22</h5>\n<ul>\n<li>Improved rendering, scaling, and positioning of Gaussian splats</li>\n</ul>\n<h5 id="2025-06-30">2025-06-30</h5>\n<ul>\n<li>Update to using <a href="https://en.wikipedia.org/wiki/Binary_prefix" rel="noopener noreferrer" target="_blank">binary prefixes</a> for file size abbreviations. Cesium ion has always computed sizes using base 2, this change adjust the labeling to reflect this.</li>\n</ul>\n<h5 id="2025-06-24">2025-06-24</h5>\n<ul>\n<li>Mesh reconstruction from photos is available as a technical preview. Upload geolocated photos and select the <em>Photos (for 3D reconstruction)</em> option.</li>\n<li>Added the ability to perform analysis on point clouds to produce classified point clouds. Try it with the <em>Analyze</em> button on the asset details panel.</li>\n<li>Gaussian splats is available as a technical preview. Upload a PLY file and enable the <em>Gaussian splats</em> toggle.</li>\n</ul>\n<h5 id="2025-03-06">2025-03-06</h5>\n<ul>\n<li>Design tiler now supports IFC metadata.</li>\n</ul>\n<h5 id="2025-02-28">2025-02-28</h5>\n<ul>\n<li>Asset import and export now supports Azure storage in addition to S3.</li>\n</ul>\n<h5 id="2025-02-25">2025-02-25</h5>\n<ul>\n<li>Cesium stories annotations provide an option to show the name of the annotation in the 3D view.</li>\n</ul>\n<h5 id="2025-02-13">2025-02-13</h5>\n<ul>\n<li>Assets now support multi-selection for deleting multiple assets at once.</li>\n</ul>\n<h5 id="2025-01-23">2025-01-23</h5>\n<ul>\n<li>Cesium OSM buildings and Cesium OSM buildings for CWB datasets have been updated based on the OSM Timestamp of Jan 13 00:00GMT, 2025.</li>\n</ul>\n<h5 id="2024-12-17">2024-12-17</h5>\n<ul>\n<li>Cesium Stories now include <a href="https://community.cesium.com/t/new-annotations-for-cesium-stories/37427" rel="noopener noreferrer" target="_blank">annotation features for points, polygons, and polylines</a>.</li>\n</ul>\n<h5 id="2024-12-05">2024-12-05</h5>\n<ul>\n<li>Cesium ion makes the Google geocoder available as an alternative to the default Bing Maps geocoder. Use this geocoder when displaying Google Photorealistic 3D Tiles in your applications. Cesium ion Stories uses the Google geocoder when you choose Photorealistic 3D Tiles as the base layer. The CesiumJS API also includes a method for easily accessing the Google geocoder. See <a href="https://sandcastle.cesium.com/?src=Google%20Photorealistic%203D%20Tiles.html" rel="noopener noreferrer" target="_blank">this Sandcastle example</a>.</li>\n</ul>\n<h5 id="2024-12-02">2024-12-02</h5>\n<ul>\n<li>The new Cesium Design Tiler tiles IFC and glTF models into 3D Tiles. <a href="https://cesium.com/blog/2024/12/03/cesium-design-tiler-and-revit-add-in/" rel="noopener noreferrer" target="_blank">Read more.</a></li>\n<li>The Cesium ion for Autodesk Revit Add-In is available on <a href="https://cesium.com/downloads" rel="noopener noreferrer" target="_blank">Downloads</a>. This Add-In uploads your current 3D View directly to Cesium ion and tiles it with the Design Tiler to produce 3D Tiles.</li>\n</ul>\n<h5 id="2024-11-19">2024-11-19</h5>\n<ul>\n<li>If you have a Bentley account, you can use it to log into Cesium ion by choosing the Bentley button on the Sign In page.</li>\n</ul>\n<h5 id="2024-09-10">2024-09-10</h5>\n<ul>\n<li>The Cesium ion Reality Tiler was updated with performance improvements.</li>\n</ul>\n<h5 id="2024-08-19">2024-08-19</h5>\n<ul>\n<li>Added ability to duplicate a story. Go to the Stories list and click the <em>Duplicate</em> button on the tile. A new copy of the story will open for editing.</li>\n<li>Added ability to duplicate a slide. Right click on the side thumbnail on the left panel and choose the <em>Duplicate slide</em> menu option.</li>\n</ul>\n<h5 id="2024-08-08">2024-08-08</h5>\n<ul>\n<li>Links to individual Story slides are now supported. To find the link URL, preview the Story, go to the targeted slide, and copy the URL.</li>\n</ul>\n<h5 id="2024-07-02">2024-07-02</h5>\n<ul>\n<li>The Cesium ion Reality Tiler was updated with significant performance improvements for large models.</li>\n</ul>\n<h5 id="2024-06-25">2024-06-25</h5>\n<ul>\n<li>Vexcel 3D Cities data is now available for offline use with Cesium ion Self-Hosted, and samples of these high fidelity cities are available in your SaaS account. <a href="https://cesium.com/blog/2024/06/25/vexcel-cesium/" rel="noopener noreferrer" target="_blank">Read more.</a>.</li>\n</ul>\n<h5 id="2024-06-03">2024-06-03</h5>\n<ul>\n<li>A new tileset, Japan 3D Buildings, is available, containing countrywide, open source 3D building data from over 200 locations across Japan. Learn more about this tileset <a href="https://cesium.com/blog/2024/06/03/japan-3d-buildings/" rel="noopener noreferrer" target="_blank">here</a>.</li>\n<li>We\'ve made significant improvements to the CityGML and KML/COLLADA tiling pipelines, including KTX2 texture compression, CityGML tiling performance when tiling multiple files across multiple cores, the buildings tiler now taking hundreds of thousands of files as input all at once, and more. <a href="https://community.cesium.com/t/significant-citygml-and-kml-collada-enhancements-now-available-on-cesium-ion/32207" rel="noopener noreferrer" target="_blank">Read more.</a>.</li>\n</ul>\n<h5 id="2024-05-08">2024-05-08</h5>\n<ul>\n<li>Clipping Cesium ion data as 3D Tiles or glTF unlocks new 3D geospatial workflows. Go offline or work in your favorite digital content creation tools. <a href="http://www.cesium.com/blog/2024/05/08/cesium-ion-clipping/" rel="noopener noreferrer" target="_blank">Read more</a>.</li>\n</ul>\n<h5 id="2024-05-01">2024-05-01</h5>\n<p>Cesium’s 3D Tiling Pipeline v4.7.1 is now available and includes Point Cloud Tiler fixes:</p>\n<ul>\n<li>When reading from LAZ files, it now correctly uses the extended data fields for classification and point_source_id. Previously this resulted in these fields being zero in some cases.</li>\n<li>Fixed bitmask for legacy point data records\' classification field. Could result in incorrect values.</li>\n</ul>\n<h5 id="2024-04-17">2024-04-17</h5>\n<ul>\n<li>You can now import 3D models from Sketchfab into Cesium ion. <a href="https://cesium.com/blog/2024/04/17/sketchfab-cesium-ion/" rel="noopener noreferrer" target="_blank">Read more</a>.</li>\n</ul>\n<h5 id="2024-03-29">2024-03-29</h5>\n<ul>\n<li>Cesium ion SaaS now supports optional two-factor authentication. To add 2FA to your accounts, go to <a href="https://ion.cesium.com/account" rel="noopener noreferrer" target="_blank">https://ion.cesium.com/account</a> and scroll down to "Two-factor authentication".</li>\n<li>Cesium OSM Buildings has been updated to use the latest OSM data as of March 8, 2024.</li>\n<li>We also added a new OSM Buildings layer aligned with the Cesium World Bathymetry (CWB) data, called Cesium OSM Buildings for CWB. It uses the same source data as the Cesium OSM Buildings layer, but with the base heights of the buildings based on the current Cesium World Bathymetry data. Cesium OSM Buildings should be used with Cesium World Terrain. Cesium OSM Buildings for CWB should be used with Cesium World Bathymetry.</li>\n<li>Both OSM updates are also available for customers who license Cesium OSM Buildings for use in their own environments.</li>\n</ul>\n<h5 id="2024-03-20">2024-03-20</h5>\n<ul>\n<li>Cesium ion’s 3D Tiling Pipeline now preserves all LAS Point Data Record Formats (PDRFs) in 3D Tiles, advancing runtime analytics using per-point metadata. <a href="https://cesium.com/blog/2024/03/20/preserving-more-metadata-for-point-clouds-using-3dtiles/" rel="noopener noreferrer" target="_blank">Read more.</a></li>\n</ul>\n<h5 id="2024-02-22">2024-02-22</h5>\n<ul>\n<li>It is now significantly faster to tile imagery, reality models, and terrain with Cesium ion.</li>\n</ul>\n<h5 id="2024-01-23">2024-01-23</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2024/01/23/introducing-cesium-world-bathymetry/" rel="noopener noreferrer" target="_blank">Introducing Cesium World Bathymetry</a></li>\n</ul>\n<h5 id="2023-12-14">2023-12-14</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/12/14/new-cesium-ion-self-hosted/" rel="noopener noreferrer" target="_blank">Cesium ion Self-Hosted is now available to run in your environment</a></li>\n</ul>\n<hr />\n<h5 id="2023-11-01">2023-11-01</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/11/01/new-reality-tiler/" rel="noopener noreferrer" target="_blank">Introducing the new Reality Tiler</a></li>\n</ul>\n<hr />\n<h5 id="2023-10-26">2023-10-26</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/10/26/photorealistic-3d-tiles-in-cesium-ion/" rel="noopener noreferrer" target="_blank">Google Photorealistic 3D Tiles are now available in Cesium ion</a></li>\n</ul>\n<hr />\n<h5 id="2023-09-15">2023-09-15</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/09/20/ion-improvements-apac/" rel="noopener noreferrer" target="_blank">Major Performance Improvements for Cesium ion in Asia-Pacific</a></li>\n</ul>\n<hr />\n<h5 id="2023-06-29">2023-06-29</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2023/06/29/google-photorealistic-3d-tiles-cesium-stories/" rel="noopener noreferrer" target="_blank">Google Photorealistic 3D Tiles Now Available in Cesium Stories</a></li>\n</ul>\n<hr />\n<h5 id="2022-11-08">2022-11-08</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2022/11/08/cesium-ion-archives-and-exports/" rel="noopener noreferrer" target="_blank">Cesium ion Archives and Exports</a></li>\n</ul>\n<hr />\n<h5 id="2022-06-23">2022-06-23</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2022/06/23/introducing-cesium-ion-teams/" rel="noopener noreferrer" target="_blank">Cesium ion Teams</a></li>\n</ul>\n<hr />\n<h5 id="2021-11-05">2021-11-05</h5>\n<ul>\n<li>Added endpoints for adding, editing, and deleting access tokens via the Cesium ion REST API. See the <a href="https://cesium.com/learn/ion/rest-api/#tag/Tokens" rel="noopener noreferrer" target="_blank">Tokens API Documentation</a>.</li>\n</ul>\n<hr />\n<h5 id="2021-09-13">2021-09-13</h5>\n<ul>\n<li>Added the ability to specify an email address to use for emailing invoices. See our <a href="https://community.cesium.com/t/cesium-ion-updates-email-invoices-for-commercial-users/15403" rel="noopener noreferrer" target="_blank">community forum post</a> for more details.</li>\n</ul>\n<hr />\n<h5 id="2021-09-09">2021-09-09</h5>\n<ul>\n<li>Added pagination to the Assets page, and added server-side sorting and filtering support to improve page responsiveness. These options are also available for listing assets with the <a href="https://cesium.com/learn/ion/rest-api/#operation/getAssets" rel="noopener noreferrer" target="_blank">Cesium ion REST API</a>. See <a href="https://community.cesium.com/t/cesium-ion-updates/15214" rel="noopener noreferrer" target="_blank">this post</a> in the Cesium Community Forum for more information.</li>\n</ul>\n<hr />\n<h5 id="2021-08-17">2021-08-17</h5>\n<ul>\n<li>Added the ability to sign into your Cesium ion account using your GitHub, Google, or Epic Games account. See this <a href="https://cesium.com/blog/2021/08/24/cesium-ion-signin-with-google-github-epic/" rel="noopener noreferrer" target="_blank">blog post</a> for more information.</li>\n</ul>\n<hr />\n<h5 id="2020-09-01">2020-09-01</h5>\n<p>We\'ve made several updates to Cesium OSM Buildings:</p>\n<ul>\n<li>Updated to the latest OSM data as of August 28, 2020.</li>\n<li>Improved handling of building parts inheriting incorrect heights from parent nodes. This previously caused some buildings to have missing pieces.</li>\n<li>Added two new properties, <code>cesium#longitude</code> and <code>cesium#latitude</code>, to expose the location of the building center in degrees.</li>\n</ul>\n<hr />\n<h5 id="2020-08-24">2020-08-24</h5>\n<ul>\n<li>Access tokens are now editable after creation.</li>\n</ul>\n<hr />\n<h5 id="2020-07-21">2020-07-21</h5>\n<p>We\'ve made several updates to Cesium OSM Buildings:</p>\n<ul>\n<li>It now uses the latest OSM data as of July 1st, 2020.</li>\n<li>Fixed buildings with an incorrect height or missing parts by improving compatibility with non-standard or partially incorrect OSM building tags. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/329" rel="noopener noreferrer" target="_blank">#329</a></li>\n<li>Fix many buildings which were not correctly clamped to Cesium World Terrain. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/321" rel="noopener noreferrer" target="_blank">#321</a></li>\n<li>Your applications will automatically use the latest version.</li>\n</ul>\n<hr />\n<h5 id="2020-06-12">2020-06-12</h5>\n<ul>\n<li>Added the ability to regenerate an account\'s default access token.</li>\n</ul>\n<hr />\n<h5 id="2020-06-01">2020-06-01</h5>\n<ul>\n<li>All Cesium ion users now have access to Cesium OSM Buildings - a 3D buildings layer covering the entire world built with OpenStreetMap building data, available as 3D Tiles. Read more about it on <a href="https://cesium.com/blog/2020/06/01/cesium-osm-buildings/" rel="noopener noreferrer" target="_blank">our blog</a>.</li>\n<li>The Cesium Stories editor now remembers which slide you were on if the current page is refreshed.</li>\n<li>Improved compatibility for zip file uploads.</li>\n</ul>\n<hr />\n<h5 id="2020-05-27">2020-05-27</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2020/05/27/stories-fullscreen-slides/" rel="noopener noreferrer" target="_blank">Tell Better Stories with Fullscreen Slides</a>.</li>\n<li>The Cesium Stories editor now includes slide numbers next to each thumbnail</li>\n<li>Fixed an issue in Google Chrome where pressing the page up or down keys would occasionally cause the entire application to scroll.</li>\n</ul>\n<hr />\n<h5 id="2020-05-07">2020-05-07</h5>\n<ul>\n<li>Non-time-dynamic Stories slides now have a duration value, which determines how long the slide is shown when viewing a story in slideshow mode.</li>\n<li>Fixed an issue that would cause occasional unexpected camera behavior when navigating in Stories.</li>\n<li>Pre-tiled 3D Tiles uploads can now be up to 150GB in size.</li>\n</ul>\n<hr />\n<h5 id="2020-04-20">2020-04-20</h5>\n<ul>\n<li>Fixed Stories 3D Tiles Styling support for feature properties with spaces in their name. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/307" rel="noopener noreferrer" target="_blank">#307</a></li>\n<li>Fixed an issue where loading multiple CZML/KML/GeoJSON files with overlapping feature IDs would cause issues with camera following in Stories.</li>\n<li>Fixed Stories embedding sample code to support browsers that require the <code>allowfullscreen</code> attribute.</li>\n<li>The Stories 3D Tiles location editor now allows for scale values smaller than 0.1.</li>\n<li>You can now append <code>&amp;play</code> to shared URLs to put Stories Viewer into slideshow mode automatically on load.</li>\n</ul>\n<hr />\n<h5 id="2020-03-31">2020-03-31</h5>\n<ul>\n<li>3D Tiles produced from KML/COLLADA models now embed each Placemark\'s name and ExtendedData values into the tileset as per-feature data, which can then be accessed by CesiumJS, <a href="https://cesium.com/blog/2020/02/18/3d-tiles-styling-with-stories/" rel="noopener noreferrer" target="_blank">3D Tiles styling</a> and <a href="https://cesium.com/blog/2020/03/25/explore-data-with-picking/" rel="noopener noreferrer" target="_blank">Feature picking</a>.</li>\n<li>Greatly improved visual quality of textures with repeating patterns when tiling 3D Models.</li>\n<li>Fixed tiling for some zip files generated on MacOS by ignoring the <code>__MACOSX</code> system directory. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/207" rel="noopener noreferrer" target="_blank">#207</a></li>\n</ul>\n<hr />\n<h5 id="2020-03-31-1">2020-03-31</h5>\n<ul>\n<li>3D Tiles produced from KML/COLLADA models now embed each Placemark\'s name and ExtendedData values into the tileset as per-feature data, which can then be accessed by CesiumJS, <a href="https://cesium.com/blog/2020/02/18/3d-tiles-styling-with-stories/" rel="noopener noreferrer" target="_blank">3D Tiles styling</a> and <a href="https://cesium.com/blog/2020/03/25/explore-data-with-picking/" rel="noopener noreferrer" target="_blank">Feature picking</a>.</li>\n<li>Greatly improved visual quality of textures with repeating patterns when tiling 3D Models.</li>\n<li>Fixed tiling for some zip files generated on MacOS by ignoring the <code>__MACOSX</code> system directory. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/207" rel="noopener noreferrer" target="_blank">https://github.com/CesiumGS/cesium-ion-community/issues/207</a></li>\n</ul>\n<hr />\n<h5 id="2020-03-25">2020-03-25</h5>\n<ul>\n<li>Cesium Stories now supports feature picking for 3D Tiles, CZML, KML, and GeoJSON. <a href="https://cesium.com/blog/2020/03/25/explore-data-with-picking/" rel="noopener noreferrer" target="_blank">Learn about how it works on our blog</a>.</li>\n<li>The Cesium Stories Editor now shows the infobox overlay as it will appear in shared stories.</li>\n<li>Added a new <code>profile:read</code> token scope and <code>GET /v1/me</code> route for retrieving profile information. See the <a href="https://cesium.com/learn/ion/rest-api/#tag/User" rel="noopener noreferrer" target="_blank">REST API</a> documentation for more details.</li>\n</ul>\n<hr />\n<h5 id="2020-03-14">2020-03-14</h5>\n<ul>\n<li>When viewing a shared story on mobile, you can now collapse or expand the Cesium window and info box.</li>\n<li>Cesium Stories styles now support tilesets that use the <code>3DTILES_batch_table_hierarchy</code> extension.</li>\n</ul>\n<hr />\n<h5 id="2020-03-04">2020-03-04</h5>\n<ul>\n<li>Cesium Stories now has improved support for time-dynamic data. Read all about it in our new <a href="https://cesium.com/blog/2020/03/04/time-dynamic-stories/" rel="noopener noreferrer" target="_blank">blog post and tutorial</a>.</li>\n<li>Fixed imagery tiling to correctly handle nodata values when the source raster does not include an alpha channel.</li>\n</ul>\n<hr />\n<h5 id="2020-02-19">2020-02-19</h5>\n<ul>\n<li>Added Support for <a href="https://cesium.com/blog/2020/02/18/3d-tiles-styling-with-stories/" rel="noopener noreferrer" target="_blank">3D Tiles Styling in Cesium Stories</a>.</li>\n</ul>\n<hr />\n<h5 id="2020-02-17">2020-02-17</h5>\n<ul>\n<li>Add additional image format support, most notably TIFF, to 3D Model tiling and glTF conversion.</li>\n<li>Fixes and improvements to point cloud tiling, including the ability to upload LAS and LAZ files together as a single asset.</li>\n</ul>\n<hr />\n<h5 id="2020-02-11">2020-02-11</h5>\n<ul>\n<li>Improved CityGML and KML tiling so corrupted images are ignored instead of causing an error.</li>\n</ul>\n<hr />\n<h5 id="2020-02-04">2020-02-04</h5>\n<ul>\n<li>Improved transitions between slides with time-dynamic content in Stories.</li>\n</ul>\n<hr />\n<h5 id="2020-01-30">2020-01-30</h5>\n<ul>\n<li>Fixed an issue that caused some assets to become incorrectly hidden in Stories.</li>\n</ul>\n<hr />\n<h5 id="2020-01-28">2020-01-28</h5>\n<ul>\n<li>Introducing <a href="https://cesium.com/blog/2020/01/28/cesium-stories/" rel="noopener noreferrer" target="_blank">Cesium Stories</a>. 🎉</li>\n</ul>\n<hr />\n<h5 id="2020-01-15">2020-01-15</h5>\n<ul>\n<li>Improved lighting in the asset preview window.</li>\n<li>Improved performance on high resolution devices, such as MacBooks, tablets, and phones.</li>\n</ul>\n<hr />\n<h5 id="2019-10-03">2019-10-03</h5>\n<ul>\n<li>Added support for uploading 3D Tilesets created by other tools.</li>\n<li><a href="https://cesium.com/blog/2019/10/25/upload-kml-geojson-czml/" rel="noopener noreferrer" target="_blank">Added support for uploading KML, GeoJSON, and CZML files</a>. These formats are currently hosted as-is without being tiled.</li>\n</ul>\n<hr />\n<h5 id="2019-09-17">2019-09-17</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2019/09/17/ion-gltf/" rel="noopener noreferrer" target="_blank">Convert and Host Your Models as glTF on Cesium ion</a>.</li>\n</ul>\n<hr />\n<h5 id="2019-09-16">2019-09-16</h5>\n<ul>\n<li>Imagery tiling now takes the alpha channel into account when mosaicking source rasters.</li>\n</ul>\n<hr />\n<h5 id="2019-09-11">2019-09-11</h5>\n<ul>\n<li>Improved support for subcentimeter imagery.</li>\n<li>Improved support for imagery rasters with color tables.</li>\n<li>Improved handling of invalid COLLADA models.</li>\n</ul>\n<hr />\n<h5 id="2019-08-29">2019-08-29</h5>\n<ul>\n<li>Fixed an issue when tiling from S3 when input data contained an S3 key that was also a directory.</li>\n</ul>\n<hr />\n<h5 id="2019-08-23">2019-08-23</h5>\n<ul>\n<li>Improved support for tiling rasters with color tables.</li>\n</ul>\n<hr />\n<h5 id="2019-08-21">2019-08-21</h5>\n<ul>\n<li>Fixed a regression which lead to some CityGML/KML features not being clamped to terrain. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/210" rel="noopener noreferrer" target="_blank">#210</a></li>\n<li>Improved imagery tiling support for overlapping rasters without an alpha channel <a href="https://github.com/CesiumGS/cesium-ion-community/issues/66" rel="noopener noreferrer" target="_blank">#66</a></li>\n<li>Fixed an issue in imagery tiling which caused black banding around some tilesets.</li>\n<li>Fixed an issue in imagery tiling that could cause leaf tiles to be lower resolution than the source raster.</li>\n<li>Added support for models with DirectDraw Surface (DDS) images throughout the pipeline.</li>\n</ul>\n<hr />\n<h5 id="2019-08-07">2019-08-07</h5>\n<ul>\n<li>Significantly improved the performance of clamping KML and CityGML files to terrain.</li>\n<li>Added an option to disable Draco compression for 3D Tiles. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/186" rel="noopener noreferrer" target="_blank">#186</a></li>\n<li>Fixed an issue which caused tiling terrain on top of a custom base layer to occasionally fail. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/183" rel="noopener noreferrer" target="_blank">#183</a>.</li>\n</ul>\n<hr />\n<h5 id="2019-08-05">2019-08-05</h5>\n<ul>\n<li>Improved support for FBX models.</li>\n<li>Imagery tiling is now ~30% faster when source rasters need reprojection.</li>\n<li>Fixed an issue with bad source models that could result in a completely transparent tileset.</li>\n</ul>\n<hr />\n<h5 id="2019-07-31">2019-07-31</h5>\n<ul>\n<li>Improved tiling of imagery and terrain with non-standard projections.</li>\n<li>Improved handling of terrain rasters with invalid heights.</li>\n</ul>\n<hr />\n<h5 id="2019-07-26">2019-07-26</h5>\n<ul>\n<li>Added Filmbox (FBX) to supported model formats.</li>\n<li>The tiling pipeline will now ignore missing, invalid, or unsupported textures and perform best-effort tiling.</li>\n<li>Added support for tiling models with Targa, GIF, BMP, PSD, HDR, PPM or PGM images.</li>\n<li>Improved error reporting for incomplete or invalid glTF, CityGML and KML/COLLADA uploads.</li>\n</ul>\n<hr />\n<h5 id="2019-07-16">2019-07-16</h5>\n<ul>\n<li>We now detect corrupt or invalid zip and kmz files and report a useful error message.</li>\n</ul>\n<hr />\n<h5 id="2019-07-12">2019-07-12</h5>\n<ul>\n<li>Fixed a long-standing issue where terrain tiling with base terrain would occasionally fail.</li>\n</ul>\n<hr />\n<h5 id="2019-07-10">2019-07-10</h5>\n<ul>\n<li>We\'ve updated two Bing assets to take advantage of newer imagery and tiles:<ul>\n<li>"Bing Maps Aerial with Labels" now uses the <em>AerialWithLabelsOnDemand</em> style instead of the deprecated <em>AerialWithLabels</em> style.</li>\n<li>"Bing Maps Road" now uses the the <em>RoadOnDemand</em> style instead of the deprecated <em>Road</em> style.</li></ul></li>\n</ul>\n<hr />\n<h5 id="2019-07-09">2019-07-09</h5>\n<ul>\n<li><a href="https://cesium.com/blog/2019/07/09/announcing-cesium-series-a-investment/" rel="noopener noreferrer" target="_blank">Cesium: Series A Investment, Spinning Out, and the Future of 3D Geospatial</a></li>\n<li>We\'ve launched a <a href="https://cesium.com/blog/2019/07/08/blender-addon/" rel="noopener noreferrer" target="_blank">Cesium ion Blender add-on</a></li>\n<li>The assets dashboard now supports uploading of Zip64-based zip files.</li>\n<li>Temporary credentials provided by the REST API and used for uploading files now last 12 hours instead of 1.</li>\n<li>Fixed a bug in point cloud tiling which was causing longitudes and latitudes to be swapped for some point clouds.</li>\n<li>Fixed a bug that caused instanced geometry to be removed from models during the tiling process.</li>\n<li>Fixed tiling models that have upper case or multiple file extensions.</li>\n</ul>\n<hr />\n<h5 id="2019-06-27">2019-06-27</h5>\n<ul>\n<li>Terrain tiling now generates significantly smaller tilesets when lots of void data is present in the source raster.</li>\n<li>Improve compatibility for tiling imagery partially outside of Web Mercator bounds.</li>\n<li>Properly detect and report errors for models without geometry and rasters with local coordinate systems.</li>\n</ul>\n<hr />\n<h5 id="2019-05-28">2019-05-28</h5>\n<ul>\n<li>The batch table properties for 3D Tiles tilesets generated from CityGML and KML were updated for consistency with other tilers:<ul>\n<li><code>longitude</code> was renamed to <code>Longitude</code>.</li>\n<li><code>latitude</code> was renamed to <code>Latitude</code>.</li>\n<li><code>height</code> was renamed to <code>Height</code>.</li>\n<li><code>CityGMLObjectID</code> and <code>numberOfRenderedPrimitives</code> were removed.</li></ul></li>\n</ul>\n<hr />\n<h5 id="2019-04-24">2019-04-24</h5>\n<ul>\n<li>The ion REST API is now generally available. <a href="https://cesium.com/blog/2019/04/24/rest-api/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n</ul>\n<hr />\n<h5 id="2019-03-08">2019-03-08</h5>\n<ul>\n<li>We added support for tiling glTF models. <a href="https://cesium.com/blog/2019/02/21/gltf-uploads/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>We now accept ZIP file uploads. <a href="https://cesium.com/blog/2019/03/07/zip-uploads/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>The massive model tiler now supports WebP for smaller, faster tilesets. <a href="https://cesium.com/blog/2019/02/12/faster-3d-tiles-streaming-webp/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>Our photogrammetry pipeline no creates better tiles at lower levels of detail. <a href="https://cesium.com/blog/2019/02/06/better-low-lods/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>Cesium World Terrain added 1 meter resolution in areas across the US. <a href="https://cesium.com/blog/2019/02/04/cwt-1.2-released/" rel="noopener noreferrer" target="_blank">Read more</a></li>\n<li>Greatly improved support for invalid or messy data. In cases where the data is invalid, we now provide much better error messages so that you can fix the data on your end.</li>\n<li>There have also been numerous bug fixes and performance improvements to our tiling pipeline.</li>\n</ul>\n<hr />\n<h5 id="2018-12-10">2018-12-10</h5>\n<ul>\n<li>Photogrammetry tiling has greatly improved support for large textures.</li>\n<li>The 3D tiling pipeline supports non-ASCII and UTF8 characters in source data and file names.</li>\n<li>Improved tiling performance for photogrammetry, KML and CityGML.</li>\n<li>Point cloud tiling automatically removes extreme outliers.</li>\n<li>Point cloud tiling handles LAS and LAZ files with incorrect or corrupt header information.</li>\n</ul>\n<hr />\n<h5 id="2018-11-12">2018-11-12</h5>\n<ul>\n<li>Our 3D Tiling pipeline now supports BIM and CAD models (.obj, .dae). Check out the <a href="https://cesium.com/ion/?t=bimCad">in-app tutorial</a> to learn more.</li>\n<li>Newly created photogrammtry, BIM, and CAD 3D Tiles tilesets now require CesiumJS 1.50 or newer.</li>\n<li>Greatly improved OBJ and CityGML compatibility.</li>\n<li>Improved support for the tiling of <em>RealityCapture</em> output.</li>\n<li>Missing DAE textures will now be treated as white instead of failing to tile.</li>\n<li>Fixed an issue that resulted in photogrammetry tilesets missing small polygons <a href="https://github.com/CesiumGS/cesium-ion-community/issues/44" rel="noopener noreferrer" target="_blank">#44</a></li>\n<li>Fixed parsing of LAS files that contain less points than the header reports.</li>\n</ul>\n<hr />\n<h5 id="2018-10-25">2018-10-25</h5>\n<ul>\n<li>New in-app tutorials can be accessed from the <code>Help</code> menu on the upper-right.</li>\n<li>Cesium ion now integrates with Safe Software’s FME. See <a href="https://cesium.com/blog/2018/10/18/fme-integration/" rel="noopener noreferrer" target="_blank">our blog post</a> for more details.</li>\n</ul>\n<hr />\n<h5 id="2018-10-02">2018-10-02</h5>\n<ul>\n<li>Point cloud preview now enables point attenuation and eye dome lighting.</li>\n</ul>\n<hr />\n<h5 id="2018-09-25">2018-09-25</h5>\n<ul>\n<li>LAZ point cloud support has been added to the 3D Tiling pipeline.</li>\n<li>Access Tokens can now be configured with separate scopes to allow more fine-grained access to the ion API.</li>\n<li>Fix KML terrain clamping and improve support for KML altitudeMode.</li>\n</ul>\n<hr />\n<h5 id="2018-09-19">2018-09-19</h5>\n<ul>\n<li>We\'ve launched <a href="https://status.cesium.com" rel="noopener noreferrer" target="_blank">status.cesium.com</a> to provide server status and incident tracking for all ion users.</li>\n</ul>\n<hr />\n<h5 id="2018-09-17">2018-09-17</h5>\n<ul>\n<li>Our 3D Tiles pipeline is now available to all users! Currently supported formats include:<ul>\n<li>LASer (.las)</li>\n<li>CityGML (.citygml, .xml, .gml)</li>\n<li>KML/COLLADA (.kml, .kmz)</li>\n<li>Photogrammetry (.obj, .dae)</li></ul></li>\n<li>See <a href="https://cesium.com/learn/3d-tiling/tiler-data-formats/" rel="noopener noreferrer" target="_blank">Tiler Data Types and Formats</a> for additional details</li>\n</ul>\n<hr />\n<h5 id="2018-09-06">2018-09-06</h5>\n<ul>\n<li>We\'ve launched the 3D Tiles Location Editor, which let\'s you adjust the location, rotation, and scale of a 3D Tiles tileset as well as associate it with a specific terrain asset.</li>\n<li>The asset preview window will now load the terrain associated with a 3D tileset.</li>\n<li>3D Tiles assets that are not geolocated now correctly display in the asset preview window.</li>\n<li>Sentinel-2 imagery is now used as the base imagery layer in the asset preview window.</li>\n<li>Location information is no longer configured when tiling photogrammetry models. The location can be adjusted afterwards (if desired) using the new 3D Tiles Location Editor.</li>\n</ul>\n<hr />\n<h5 id="2018-08-30">2018-08-30</h5>\n<ul>\n<li>Cesium World Terrain in the United States now includes areas with up to 0.5m resolution (<a href="https://cesium.com/blog/2018/08/29/updated-world-terrain/" rel="noopener noreferrer" target="_blank">blog post</a>).</li>\n<li>Added WMTS imagery support. Read all about it in our <a href="https://cesium.com/blog/2018/07/23/ion-wmts-support/" rel="noopener noreferrer" target="_blank">blog post</a>.</li>\n<li>You can now view usage statistics for your account and tokens on the <a href="https://cesium.com/ion/usage" rel="noopener noreferrer" target="_blank">Usage page</a>.</li>\n<li>Streamlined the upload interface to be easier for new users, require less clicking, and provide better error reporting.</li>\n<li>The preview window now displays an outline that represents asset boundaries.</li>\n<li>Improved progress reporting to provide better insight into the tiling pipeline and enhanced error reporting.</li>\n<li>We now support uploading of Erdas Imagine (.img) files for terrain and imagery.</li>\n</ul>\n<hr />\n<h5 id="2018-06-06">2018-06-06</h5>\n<ul>\n<li>Dragging and dropping files and directories for upload now maintains relative paths.</li>\n</ul>\n<hr />\n<h5 id="2018-05-10">2018-05-10</h5>\n<ul>\n<li>We added a list of supported file formats to the asset uploaded page.</li>\n<li>Autofilled username and password fields will now work properly in Safari and iOS browsers.</li>\n</ul>\n<hr />\n<h5 id="2018-05-08">2018-05-08</h5>\n<ul>\n<li>Provide better lighting in the asset preview window by making sure the sun is always overhead. <a href="https://github.com/CesiumGS/cesium-ion-community/issues/3" rel="noopener noreferrer" target="_blank">#3</a></li>\n<li>Fixed erroneous error message that was displayed when changing username or email address, even though the change succeeded.</li>\n</ul>\n<hr />\n<h5 id="2018-05-01">2018-05-01</h5>\n<ul>\n<li>Cesium ion has officially launched! Read all about it in our <a href="https://cesium.com/blog/2018/05/01/get-your-cesium-ion-community-account/" rel="noopener noreferrer" target="_blank">blog post</a>.</li>\n<li>Starting June 1, the beta.cesium.com URL will not work; use cesium.com instead.</li>\n</ul>\n        </div>\n      </div>\n    </div>'}),define("text!Views/Static/Error.html",[],function(){return'<div class="static-container">\n  <div class="container">\n    <div class="static-header" data-bind="visible: !showHeader">\n      <a href=""><img src="Images/logo.svg" alt="Cesium ion" /></a>\n    </div>\n    <div class="static-content row">\n      <div class="col-xs-12 col-sm-4">\n        <div class="cesium-puzzle center-block container-content">\n          <img\n            src="Images/cesium-puzzle.svg"\n            alt="Cesium ion logo broken up in to puzzle pieces"\n          />\n        </div>\n      </div>\n      <div class="col-xs-12 col-sm-8">\n        <div class="container-content">\n          <h1>There was a problem.</h1>\n          <p>\n            Cesium ion ran into a problem. Try to\n            <a href="/">reload the home page</a>. If the problem persists please\n            contact support.\n          </p>\n          \x3c!-- ko if: details || json --\x3e\n          <label>Details</label>\n          <p data-bind="text: details, visible: details"></p>\n          <pre data-bind="text: json, visible: json"></pre>\n          \x3c!-- /ko --\x3e\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Static/NotFound.html",[],function(){return'<div class="static-container">\n  <div class="container">\n    <div class="static-content row">\n      <div class="col-xs-12 col-sm-6">\n        <div class="cesium-puzzle center-block container-content">\n          <img src="Images/cesium-puzzle.svg" alt="Page not found" />\n        </div>\n      </div>\n      <div class="col-xs-12 col-sm-6">\n        <div class="container-content">\n          <h1>Page Not Found</h1>\n          <p>\n            We searched land, sea, air, and space but couldn\'t find your page\n            anywhere.\n          </p>\n          <p>Continue to <a href="">Cesium ion</a></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Static/OpenSource.html",[],function(){return'<div class="static-container">\n    <div class="container">\n        <div class="static-header" data-bind="visible: !isSignedIn()">\n            <a href=""><img src="Images/logo.svg" alt="Cesium ion"/></a>\n        </div>\n        <div class="static-content">\n            <h1>Open Source Software</h1>\n            <hr/>\n            <div class="lead">\n                Cesium is a strong supporter of open source and Cesium ion would not be possible without the help of\n                the many open source software projects listed below:\n            </div>\n            <div class="row">\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-batch">@aws-sdk/client-batch</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-cloudwatch-logs">@aws-sdk/client-cloudwatch-logs</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-ec2">@aws-sdk/client-ec2</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-lambda">@aws-sdk/client-lambda</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-opensearch">@aws-sdk/client-opensearch</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-s3">@aws-sdk/client-s3</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-secrets-manager">@aws-sdk/client-secrets-manager</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-ses">@aws-sdk/client-ses</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-ssm">@aws-sdk/client-ssm</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/client-sts">@aws-sdk/client-sts</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/credential-provider-node">@aws-sdk/credential-provider-node</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/lib-storage">@aws-sdk/lib-storage</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/s3-presigned-post">@aws-sdk/s3-presigned-post</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/s3-request-presigner">@aws-sdk/s3-request-presigner</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@aws-sdk/util-retry">@aws-sdk/util-retry</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@azure/identity">@azure/identity</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@azure/storage-blob">@azure/storage-blob</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@fortawesome/fontawesome-svg-core">@fortawesome/fontawesome-svg-core</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@fortawesome/free-brands-svg-icons">@fortawesome/free-brands-svg-icons</a> <small>(CC-BY-4.0 AND MIT)</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@fortawesome/free-regular-svg-icons">@fortawesome/free-regular-svg-icons</a> <small>(CC-BY-4.0 AND MIT)</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@fortawesome/free-solid-svg-icons">@fortawesome/free-solid-svg-icons</a> <small>(CC-BY-4.0 AND MIT)</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@fortawesome/react-fontawesome">@fortawesome/react-fontawesome</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@hubspot/api-client">@hubspot/api-client</a> <small>ISC</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@itwin/access-control-client">@itwin/access-control-client</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@itwin/core-bentley">@itwin/core-bentley</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@itwin/itwins-client">@itwin/itwins-client</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@itwin/reality-data-client">@itwin/reality-data-client</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@kubernetes/client-node">@kubernetes/client-node</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@node-saml/node-saml">@node-saml/node-saml</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@opensearch-project/opensearch">@opensearch-project/opensearch</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@polymer/iron-input">@polymer/iron-input</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@polymer/paper-slider">@polymer/paper-slider</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@prantlf/requirejs">@prantlf/requirejs</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@recurly/react-recurly">@recurly/react-recurly</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@reduxjs/toolkit">@reduxjs/toolkit</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@tus/file-store">@tus/file-store</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@tus/server">@tus/server</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@types/validator">@types/validator</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@uppy/core">@uppy/core</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@uppy/tus">@uppy/tus</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@uppy/xhr-upload">@uppy/xhr-upload</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@webcomponents/webcomponentsjs">@webcomponents/webcomponentsjs</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@zip.js/zip.js">@zip.js/zip.js</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@zxcvbn-ts/core">@zxcvbn-ts/core</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@zxcvbn-ts/language-common">@zxcvbn-ts/language-common</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/@zxcvbn-ts/language-en">@zxcvbn-ts/language-en</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/adaptive-expressions">adaptive-expressions</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/adaptivecards">adaptivecards</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/adaptivecards-templating">adaptivecards-templating</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/aws-sdk">aws-sdk</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/aws4">aws4</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/bcrypt">bcrypt</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/better-sqlite3">better-sqlite3</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/bluebird">bluebird</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/bootstrap">bootstrap</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="http://eonasdan.github.io/bootstrap-datetimepicker/">bootstrap-datetimepicker</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/bootstrap-sass">bootstrap-sass</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/c3">c3</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/cesium">cesium</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/chroma-js">chroma-js</a> <small>(BSD-3-Clause AND Apache-2.0)</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/clipboard">clipboard</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/cookie">cookie</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/corejs-typeahead">corejs-typeahead</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/country-code-lookup">country-code-lookup</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3">d3</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3-array">d3-array</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3-axis">d3-axis</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3-interpolate">d3-interpolate</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3-scale">d3-scale</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3-scale-chromatic">d3-scale-chromatic</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3-selection">d3-selection</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3-shape">d3-shape</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/d3-time-format">d3-time-format</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/data-uri-to-buffer">data-uri-to-buffer</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/date-fns">date-fns</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/date-fns-tz">date-fns-tz</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/dompurify">dompurify</a> <small>(MPL-2.0 OR Apache-2.0)</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/durandal">durandal</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/email-templates">email-templates</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/escape-html">escape-html</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/exifreader">exifreader</a> <small>MPL-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/flatpickr">flatpickr</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/fs-extra">fs-extra</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/geoip-lite">geoip-lite</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/handlebars">handlebars</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/i18next">i18next</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/jquery">jquery</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/jsdom">jsdom</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/jsonwebtoken">jsonwebtoken</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/knex">knex</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.latofonts.com/">Lato</a> <small>SIL OPEN FONT LICENSE Version 1.1</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/lit">lit</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/lru-cache">lru-cache</a> <small>ISC</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/moment">moment</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/ms-teams-webhook">ms-teams-webhook</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/nconf">nconf</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://github.com/googlefonts/opensans">Open Sans</a> <small>SIL OPEN FONT LICENSE Version 1.1</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/otpauth">otpauth</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/pako">pako</a> <small>(MIT AND Zlib)</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/pepjs">pepjs</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/pg">pg</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/prismjs">prismjs</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/probe-image-size">probe-image-size</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/pwa-helpers">pwa-helpers</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/qrcode.react">qrcode.react</a> <small>ISC</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/quill">quill</a> <small>BSD-3-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/quill-delta-to-html">quill-delta-to-html</a> <small>ISC</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/react">react</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/react-bootstrap">react-bootstrap</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/react-dom">react-dom</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/react-hook-form">react-hook-form</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/react-i18next">react-i18next</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/recurly">recurly</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/redoc">redoc</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/redux">redux</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/redux-thunk">redux-thunk</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/request">request</a> <small>Apache-2.0</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/request-promise-native">request-promise-native</a> <small>ISC</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/requirejs-text">requirejs-text</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/restify">restify</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/restify-errors">restify-errors</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/select">select</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/showdown">showdown</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/svg-captcha">svg-captcha</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/terser">terser</a> <small>BSD-2-Clause</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/toastr">toastr</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/ua-parser-js">ua-parser-js</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/urijs">urijs</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/validator">validator</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/xml2js">xml2js</a> <small>MIT</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/yaml">yaml</a> <small>ISC</small>\n                    </h5>\n                </div>\n                <div class="col-sm-4">\n                    <h5><a href="https://www.npmjs.com/package/yargs">yargs</a> <small>MIT</small>\n                    </h5>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!Views/Static/Unavailable.html",[],function(){return'<div class="static-container">\n  <div class="container">\n    <div class="static-content row">\n      <div class="col-xs-12 col-sm-6">\n        <div class="cesium-puzzle center-block container-content">\n          <img src="Images/cesium-puzzle.svg" alt="Maintenance" />\n        </div>\n      </div>\n      <div class="col-xs-12 col-sm-6">\n        <div class="container-content">\n          <h1>Scheduled Maintenance</h1>\n          <p>\n            Cesium ion is down for scheduled maintenance. Visit our\n            <a href="https://status.cesium.com">status page</a> for more\n            information.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Static/WebGLTroubleshoot.html",[],function(){return'<div class="static-container">\n  <div class="container">\n    <div class="static-header" data-bind="visible: !isSignedIn()">\n      <a href=""><img src="Images/logo.svg" alt="Cesium ion" /></a>\n    </div>\n    <div class="static-content">\n      <h1 data-bind="visible: !hasWebGLSupport">WebGL Error</h1>\n      <p data-bind="visible: !hasWebGLSupport">\n        <span class="fa fa-times fa-lg text-danger"></span> Your browser is\n        lacking WebGL support\n      </p>\n      <p data-bind="visible: hasWebGLSupport">\n        <span class="fa fa-check fa-lg text-success"></span> Your browser\n        supports WebGL\n      </p>\n      <p>Below are some resources for troubleshooting WebGL problems.</p>\n      <ul>\n        <li>\n          <a\n            href="https://get.webgl.org/troubleshooting/"\n            target="_blank"\n            rel="noopener"\n            >https://get.webgl.org/troubleshooting/</a\n          >\n        </li>\n        <li>\n          <a href="http://webglreport.com/" target="_blank" rel="noopener"\n            >http://webglreport.com/</a\n          >\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/TilesetTransformEditor/TilesetTransformEditor.html",[],function(){return'<div id="tilesetTransformEditor" class="fill-absolute tileset-transform-editor">\n  <div>\n    <nav class="navbar navbar-default toolbar">\n      <div class="container-fluid">\n        <ul class="nav navbar-nav pull-left">\n          <li>\n            <div class="toolbar-title">\n              <a title="Home" data-bind="click: backToAssets">\n                <img alt="Cesium ion" src="Images/logo-small.svg" />\n              </a>\n              <h3>3D Tiles Location Editor</h3>\n            </div>\n          </li>\n          <li>\n            <a\n              class="toolbar-anchor toolbar-projects"\n              title="Back to Assets"\n              data-bind="click: backToAssets"\n            >\n              <div class="fa fa-arrow-circle-left fa-lg"></div>\n              <div class="toolbar-anchor-text">Back to Assets</div>\n            </a>\n          </li>\n          <li>\n            <div class="toolbar-saved-text" data-bind="text: tilesetName"></div>\n          </li>\n        </ul>\n        <ul class="nav navbar-nav pull-right">\n          <li>\n            <a\n              class="toolbar-anchor"\n              data-container="body"\n              data-toggle="popover"\n              data-bind="attr: {id: supportButtonId}"\n            >\n              <div class="fa fa-comment fa-lg"></div>\n              <div>Support</div>\n            </a>\n          </li>\n          <li data-bind="css: {active : onScreenHelp.visible}">\n            <a class="toolbar-anchor" data-bind="click: toggleOnScreenHelp">\n              <div class="fa fa-question-circle fa-lg"></div>\n              <div>Learn</div>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </nav>\n  </div>\n  <div class="composer-row">\n    <div\n      class="composer-pane action-pane left-pane-expanded geocode-pane"\n      data-bind="compose: geocodePanel, visible: showGeocodePanel"\n    ></div>\n    <div\n      class="composer-pane action-pane"\n      data-bind=", visible: !showGeocodePanel(), compose: actionPane, css: {\'left-pane-expanded\': actionPane.expanded, \'left-pane-closed\': !actionPane.expanded()}"\n    ></div>\n    <div\n      class="composer-pane viewer-pane"\n      data-bind="css: {\'expanded\': !actionPane.expanded()}"\n    >\n      <div\n        class="tileset-transform-editor-message"\n        data-bind="visible: showErrorMessage"\n      >\n        <div class="alert alert-danger">\n          <span class="fa fa-warning"></span>\n          <span data-bind="text: errorText"></span>\n        </div>\n      </div>\n      <div\n        class="loading-indicator-overlay"\n        data-bind="visible: !tilesetLoaded()"\n      >\n        <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n      </div>\n      <div\n        class="fill-absolute"\n        data-bind="css:{\'left-pane-expanded\': actionPane.expanded(), \'left-pane-closed\': !actionPane.expanded()}"\n      >\n        <div class="cesium-theme fill-absolute">\n          <div id="tilesetHomeButton"></div>\n          <div id="tilesetViewer" class="fullscreen"></div>\n          <div id="fullscreenContainer"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/TilesetTransformEditor/TilesetTransformEditorGeocodePanel.html",[],function(){return'<form class="tileset-location-editor cesium-theme" novalidate>\n  <div class="action-pane-panel-title">\n    <div class="h1">3D Tiles Location Editor</div>\n  </div>\n  \x3c!-- ko if: isGeocoderEnabled --\x3e\n  <div class="action-pane-panel-section" data-testid="geoCoderReferenceForm">\n    <div class="action-pane-panel-subtitle h3">Position</div>\n    <div class="action-pane-panel-section-container">\n      <div class="alert alert-info">\n        <span class="fa fa-info-circle"></span> Use the search box below to set\n        an approximate address to position the tileset. You can also enter the\n        name of a landmark or a longitude/latitude coordinate (values separated\n        by commas).\n      </div>\n      <div class="form-table">\n        <div class="form-table-row form-input-group">\n          <div class="form-table-cell">\n            <label id="searchLabel" for="settingsGeocoderContainer"\n              >Search</label\n            >\n          </div>\n          <div class="form-table-cell">\n            \x3c!-- htmllint class-style="none" --\x3e\n            <div\n              id="settingsGeocoderContainer"\n              class="cesium-viewer-geocoderContainer"\n            ></div>\n            \x3c!-- needs this class name for Cesium style compatibility --\x3e\n            \x3c!-- htmllint class-style="$previous" --\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- /ko --\x3e\n  <div class="action-pane-panel-section">\n    <div class="action-pane-panel-section-container">\n      \x3c!-- ko compose: terrainAssetSelector --\x3e\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n  <div class="action-pane-panel-section">\n    <button type="button" class="btn btn-primary" data-bind="click: closePanel">\n      Next\n    </button>\n  </div>\n</form>\n'}),define("text!Views/TilesetTransformEditor/TilesetTransformEditorPanel.html",[],function(){return'<form class="tileset-location-editor cesium-theme" novalidate>\n  <div class="action-pane-panel-title">\n    <div class="h1">3D Tiles Location Editor</div>\n    \x3c!--<div class="action-pane-help" data-bind="compose: contextualHelp"></div>--\x3e\n  </div>\n  <div class="action-pane-panel-section">\n    <button\n      type="button"\n      class="btn btn-primary"\n      title="Fly to the tileset"\n      data-bind="click: flyTo"\n    >\n      <span class="fa fa-search-plus fa-lg"></span> Zoom to tileset\n    </button>\n  </div>\n  <div class="action-pane-panel-section">\n    <div class="action-pane-panel-subtitle h3">Position</div>\n    <div class="action-pane-panel-section-container">\n      \x3c!-- ko if: isGeocoderEnabled--\x3e\n      <div class="form-table">\n        <div class="form-table-row form-input-group">\n          <div class="form-table-cell">\n            <label id="searchLabel" for="geocoderContainer">Search</label>\n          </div>\n          <div class="form-table-cell">\n            \x3c!-- htmllint class-style="none" --\x3e\n            <div\n              id="geocoderContainer"\n              class="cesium-viewer-geocoderContainer"\n            ></div>\n            \x3c!-- needs this class name for Cesium style compatibility --\x3e\n            \x3c!-- htmllint class-style="$previous" --\x3e\n          </div>\n        </div>\n      </div>\n      \x3c!-- /ko --\x3e\n      <div data-bind="compose: positionFields"></div>\n      <div data-bind="visible: !picking()">\n        <button\n          type="button"\n          class="btn btn-primary"\n          data-bind="click: activatePicking"\n        >\n          Click position\n        </button>\n      </div>\n      <div data-bind="visible: picking">\n        <div class="alert alert-info">\n          <span class="fa fa-info-circle"></span> Click the globe to set the\n          tileset position\n        </div>\n        <button\n          type="button"\n          class="btn btn-default"\n          data-bind="click: deactivatePicking"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  </div>\n  <div class="action-pane-panel-section">\n    <div class="action-pane-panel-subtitle h3">Rotation</div>\n    <div\n      class="action-pane-panel-section-container tileset-position-editor-rotation"\n      data-bind="compose: rotationFields"\n    ></div>\n  </div>\n  <div class="action-pane-panel-section">\n    <div class="action-pane-panel-subtitle h3">Scale</div>\n    <div class="action-pane-panel-section-container">\n      \x3c!-- ko compose: uniformScaleToggle --\x3e\n      \x3c!-- /ko --\x3e\n      <div\n        data-bind="visible: enableNonUniformScaling, compose: scaleFields"\n      ></div>\n      <div\n        data-bind="visible: !enableNonUniformScaling(), compose: uniformScaleFields"\n      ></div>\n    </div>\n  </div>\n  <div class="action-pane-panel-section">\n    <button type="button" class="btn btn-primary" data-bind="click: save">\n      Save\n    </button>\n    <button type="button" class="btn btn-default" data-bind="click: reset">\n      Reset\n    </button>\n  </div>\n  <div\n    class="action-pane-panel-section text-danger"\n    data-bind="text: errorText"\n  ></div>\n</form>\n'}),define("text!Views/TilesetTransformEditor/TilesetTransformEditorSettingsPanel.html",[],function(){return'<div class="tileset-position-editor">\n  <div class="action-pane-panel-title">\n    <div class="h1">Settings</div>\n    \x3c!--<div class="action-pane-help" data-bind="compose: contextualHelp"></div>--\x3e\n  </div>\n  <div class="action-pane-panel-section">\n    <div class="action-pane-panel-section-container">\n      \x3c!-- ko compose: enableImageryToggle --\x3e\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n  <div class="action-pane-panel-section">\n    <div class="action-pane-panel-section-container">\n      \x3c!-- ko compose: terrainAssetSelector --\x3e\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Account/AuthorizedApplications/AuthorizedApplicationsShell.html",[],function(){return'<div class="labels">\n  <div data-bind="compose: header"></div>\n  <div class="fill-absolute applications" data-bind="compose: table"></div>\n</div>\n'}),define("text!Views/Account/AuthorizedApplications/AuthorizedApplicationsTable.html",[],function(){return'<div\n  class="container-fluid dashboard-table authorized-applications-table-container"\n>\n  <div class="table-responsive">\n    <table class="table">\n      <thead>\n        <tr>\n          <th>Application</th>\n          <th>Last Used</th>\n          <th class="text-center">Delete</th>\n        </tr>\n      </thead>\n      <tbody data-bind="foreach: filteredApplications">\n        <tr>\n          <td data-bind="text: oauthClientName"></td>\n          <td data-bind="text: lastUsed"></td>\n          <td class="text-center authorized-applications-table-button">\n            <div data-bind="compose: deleteButton"></div>\n          </td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: hasNoResults">\n        <tr>\n          <td colspan="2">No results</td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: !hasApplications()">\n        <tr>\n          <td colspan="2">No applications</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n'}),define("text!Views/Account/DeveloperSettings/CreateOAuthApp.html",[],function(){return'<div class="secondary-panel create-application">\n  <div class="h1">Add application</div>\n  <form data-bind="submit: apply">\n    <div data-bind="compose: nameField"></div>\n    <div data-bind="compose: redirectUriField"></div>\n    <p class="text-danger" data-bind="text: errorText"></p>\n    <div class="create-application-buttons">\n      <button\n        class="btn btn-primary"\n        type="submit"\n        data-bind="disable: _pending"\n      >\n        Add\n      </button>\n      <button\n        class="btn btn-primary"\n        type="button"\n        data-bind="click: cancel, disable: _pending"\n      >\n        Cancel\n      </button>\n    </div>\n  </form>\n</div>\n'}),define("text!Views/Account/DeveloperSettings/OAuthAppDetails.html",[],function(){return'<div class="container-fluid details applications-details">\n  <div class="row">\n    <div class="col-xs-12 details-header">\n      \x3c!-- ko if: selectedApplication() !== undefined --\x3e\n      <div\n        class="pull-right details-delete"\n        data-bind="css:{\'disabled\': selectedApplication()._pending}"\n      >\n        <a\n          class="btn btn-flat btn-default"\n          data-bind="compose: _deleteButton"\n        ></a>\n      </div>\n      <a\n        class="visible-xs pull-left details-close btn btn-flat btn-default"\n        data-bind="click: unselect"\n      >\n        <div class="fa fa-lg fa-arrow-left"></div>\n        <div class="small">Back</div>\n      </a>\n      <div class="details-title">\n        <span\n          class="h2"\n          data-bind="text: _selectedApplicationName, attr:{title: _selectedApplicationName}"\n        ></span>\n      </div>\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n  \x3c!-- ko if: selectedApplication() !== undefined --\x3e\n  \x3c!-- ko with: selectedApplication --\x3e\n  <div class="row details-info">\n    <div class="col-xs-12">\n      <div data-bind="compose: $parent._nameField"></div>\n      <div data-bind="compose: $parent._redirectUriField"></div>\n    </div>\n  </div>\n  \x3c!-- /ko --\x3e\n  \x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Account/DeveloperSettings/OAuthAppsShell.html",[],function(){return'<div class="fill-absolute applications" data-bind="compose: layout"></div>\n'}),define("text!Views/Account/DeveloperSettings/OAuthAppsTable.html",[],function(){return'<div class="container-fluid dashboard-table">\n  <div class="table-responsive">\n    <table class="table table-hover">\n      <thead>\n        <tr>\n          <th>Client ID</th>\n          <th>Name</th>\n          <th>Redirect URI</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody data-bind="foreach: tableItems">\n        <tr\n          data-bind="css: {\'active\': $data === $parent.selectedItem()}, click: $parent.selectedItem"\n        >\n          <td data-bind="text: id"></td>\n          <td data-bind="text: name"></td>\n          <td data-bind="text: redirectUri"></td>\n          <td class="text-right dashboard-table-hover-column">\n            <div data-bind="compose: deleteButton"></div>\n          </td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: hasNoResults">\n        <tr>\n          <td colspan="2">No results</td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: !_hasItems()">\n        <tr>\n          <td colspan="2">No applications</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n'}),define("text!Views/Account/Labels/LabelRow.html",[],function(){return'<div class="labels-table-row clearfix" data-bind="visible: !editing()">\n  <div\n    class="label label-tag label-default"\n    data-bind="text: label.name, attr: {\'title\': label.name}, style: {\'background-color\': label.colorString}, css: label.className"\n  ></div>\n  <div class="labels-table-row-links" data-bind="if: linksVisible">\n    <a data-bind="attr: {href: assetLink}"\n      ><span data-bind="text: assetCount"></span> assets\n    </a>\n    and\n    <a data-bind="attr: {href: storyLink}"\n      ><span data-bind="text: storyCount"></span> stories</a\n    >\n  </div>\n  <div\n    class="pull-right text-center labels-table-button"\n    data-bind="compose: deleteButton"\n  ></div>\n  <div\n    class="pull-right text-center labels-table-button labels-table-button-edit"\n    data-bind="click: edit"\n  >\n    <div class="fa fa-lg fa-pencil"></div>\n    <div class="small">Edit</div>\n  </div>\n</div>\n<form\n  role="form"\n  class="labels-table-row form-inline"\n  data-bind="visible: editing, submit: apply"\n>\n  <div class="labels-table-row-name" data-bind="compose: nameField"></div>\n  <div\n    class="form-group labels-table-row-color-picker"\n    data-bind="compose: colorField"\n  ></div>\n  <button type="submit" class="btn btn-primary">Apply</button>\n  <button type="button" class="btn btn-default" data-bind="click: cancel">\n    Cancel\n  </button>\n  <span\n    class="pull-right text-danger"\n    data-bind="visible: errorTextVisible, text: errorText"\n  ></span>\n</form>\n'}),define("text!Views/Account/Labels/LabelsShell.html",[],function(){return'<div class="labels">\n  <div data-bind="compose: header"></div>\n  <div class="labels-new-label" data-bind="visible: newLabelVisible">\n    <form role="form" class="form-inline" data-bind="submit: newLabel">\n      <div class="new-label-field" data-bind="compose: nameField"></div>\n      <div class="new-label-field" data-bind="compose: colorField"></div>\n      <button type="submit" class="btn btn-primary">Add</button>\n      <button\n        type="button"\n        class="btn btn-default"\n        data-bind="click: hideNewLabel"\n      >\n        Cancel\n      </button>\n      <div class="text-danger" data-bind="text: errorText"></div>\n    </form>\n  </div>\n  <div data-bind="compose: table"></div>\n</div>\n'}),define("text!Views/Account/Labels/LabelsTable.html",[],function(){return'<div class="container-fluid labels-table-container">\n  <div data-bind="visible: isError">\n    <div class="alert alert-danger">There was an error loading the content</div>\n  </div>\n  <div class="loading-indicator-overlay" data-bind="visible: isInProgress">\n    <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n    <div class="loading-message">Loading...</div>\n  </div>\n  <div data-bind="visible: isReady">\n    <div class="labels-table" data-bind="foreach: filteredLabels">\n      \x3c!-- ko compose: $data --\x3e\x3c!-- /ko --\x3e\n    </div>\n    <div data-bind="visible: hasNoResults">No results</div>\n    <div data-bind="visible: !hasLabels()">No labels</div>\n  </div>\n</div>\n'}),define("text!Views/Account/TeamSettings/EditTeamMessage.html",[],function(){return'<div class="modal-content messageBox">\n  <div class="modal-header">\n    <h2>Edit Team</h2>\n  </div>\n  <div class="modal-body">\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="new-invitee-field" data-bind="compose: teamNameField"></div>\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <p class="text-danger text-left" data-bind="text: errorText"></p>\n    <span class="fa fa-spinner fa-pulse" data-bind="visible: pending"></span>\n    <button\n      class="btn btn-primary"\n      type="button"\n      data-bind="disable: pending, click: apply"\n    >\n      Submit\n    </button>\n    <button\n      class="btn btn-default"\n      type="button"\n      data-bind="disable: pending, click: close"\n    >\n      Cancel\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Account/TeamSettings/TeamSettingsRow.html",[],function(){return'<div class="labels-table-row" data-bind="visible: !editing()">\n  <img\n    class="img-circle team-settings-gravatar"\n    data-bind="attr: {src: invitee.gravatar}"\n    alt="Profile picture"\n  />\n  <div\n    class="label label-tag label-default"\n    data-bind="text: invitee.username"\n  ></div>\n  <div\n    class="label label-tag label-default"\n    data-bind="text: invitee.email, visible: !showUsernameField"\n  ></div>\n  <div\n    class="label label-tag label-default"\n    data-bind="text: invitee.role"\n  ></div>\n  \x3c!-- ko if: invitee.isPending--\x3e\n  <div class="labels-table-row-links">\n    <span>Invitation Sent</span>\n  </div>\n  \x3c!-- /ko --\x3e\n  \x3c!-- ko if: showRowButtons--\x3e\n  <div\n    class="pull-right text-center labels-table-button"\n    data-bind="compose: deleteButton"\n  ></div>\n  <div\n    class="pull-right text-center labels-table-button labels-table-button-edit"\n    data-bind="click: edit"\n  >\n    \x3c!-- ko if: showChangeRole --\x3e\n    <div class="fa fa-lg fa-pencil"></div>\n    <div class="small">Change Role</div>\n    \x3c!-- /ko --\x3e\n  </div>\n  \x3c!-- /ko --\x3e\n</div>\n<form\n  role="form"\n  class="labels-table-row form-inline"\n  data-bind="visible: editing, submit: apply"\n>\n  <div\n    class="labels-table-row-name"\n    data-bind="compose: usernameField, visible: showUsernameField"\n  ></div>\n  <div\n    class="labels-table-row-name"\n    data-bind="compose: emailField, visible: !showUsernameField"\n  ></div>\n  <div class="labels-table-row-name" data-bind="compose: roleField"></div>\n  <button type="submit" class="btn btn-primary">Apply</button>\n  <button type="button" class="btn btn-default" data-bind="click: cancel">\n    Cancel\n  </button>\n  <span\n    class="pull-right text-danger"\n    data-bind="visible: errorTextVisible, text: errorText"\n  ></span>\n</form>\n'}),define("text!Views/Account/TeamSettings/TeamSettingsShell.html",[],function(){return'<div class="labels">\n  <div data-bind="compose: header"></div>\n  <div class="labels-new-label">\n    <button\n      class="btn btn-primary"\n      data-bind="click: newInvitee, disable: pending"\n    >\n      <span class="fa fa-plus"></span> Invite user\n    </button>\n    <button\n      class="btn btn-primary"\n      data-bind="click: editTeam, disable: pending"\n    >\n      <span class="fa fa-edit"></span> Edit Team Name\n    </button>\n    \x3c!-- ko if: isSketchfabEnabled && typeof sketchfabUsername() === \'undefined\' --\x3e\n    <button\n      class="btn btn-primary"\n      type="button"\n      data-bind="click: linkSketchfabAccount"\n    >\n      Link Sketchfab account\n    </button>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: isSketchfabEnabled && typeof sketchfabUsername() !== \'undefined\' --\x3e\n    <button\n      class="btn btn-danger"\n      type="button"\n      data-bind="click: unlinkSketchfabAccount, text: unlinkButtonText"\n    ></button>\n    \x3c!-- /ko --\x3e\n    <span class="text-danger" data-bind="text: errorText"></span>\n  </div>\n  <div data-bind="compose: table"></div>\n</div>\n'}),define("text!Views/Account/TeamSettings/TeamSettingsTable.html",[],function(){return'<div class="container-fluid labels-table-container">\n  <div data-bind="visible: isError">\n    <div class="alert alert-danger">There was an error loading the content</div>\n  </div>\n  <div class="loading-indicator-overlay" data-bind="visible: isInProgress">\n    <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n    <div class="loading-message">Loading...</div>\n  </div>\n  <div data-bind="visible: isReady">\n    <div class="labels-table" data-bind="foreach: invitees">\n      \x3c!-- ko compose: $data --\x3e\x3c!-- /ko --\x3e\n    </div>\n    <div class="alert alert-info" data-bind="visible: !hasInvitees()">\n      No Users\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Admin/AssetDepot/AssetDepotDetails.html",[],function(){return'<div class="container-fluid details asset-depot-details">\n  <div class="row">\n    <div class="col-xs-12 details-header">\n      <div\n        class="pull-right details-delete"\n        data-bind="css:{\'disabled\': pending}"\n      >\n        <a\n          class="btn btn-flat btn-default"\n          data-bind="compose: deleteButton"\n        ></a>\n      </div>\n      <div\n        class="pull-right details-edit"\n        data-bind="css:{\'disabled\': pending}"\n      >\n        <a class="btn btn-flat btn-default" data-bind="click: editData">\n          <div>\n            <div class="fa fa-lg fa-pencil"></div>\n            <div class="small">Edit</div>\n          </div>\n        </a>\n      </div>\n      <a\n        class="visible-xs pull-left details-close btn btn-flat btn-default"\n        data-bind="click: unselect"\n      >\n        <div class="fa fa-lg fa-arrow-left"></div>\n        <div class="small">Back</div>\n      </a>\n      <div class="details-title">\n        <span\n          class="h2"\n          data-bind="text: nameText, attr:{\'title\': nameText}"\n        ></span>\n      </div>\n    </div>\n  </div>\n  <div class="details-body">\n    <table class="details-table table table-bordered">\n      <tbody>\n        \x3c!-- ko foreach: dataDetailsRows --\x3e\n        <tr>\n          <td class="bold" data-bind="text: label"></td>\n          <td data-bind="html: value"></td>\n        </tr>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: areAssetDepotLabelsEnabled --\x3e\n        <tr>\n          <td class="bold">Labels</td>\n          <td data-bind="foreach: labels">\n            <a\n              class="label label-tag"\n              data-bind="click: $parent.setLabel, text: name, attr: {\'title\': name}, style: {\'background-color\': colorString}, css: className"\n            ></a>\n          </td>\n        </tr>\n        \x3c!-- /ko --\x3e\n      </tbody>\n    </table>\n    <div class="alert alert-info" data-bind="visible: isAwaitingFiles">\n      Files for this asset are currently being uploaded.\n    </div>\n    <div class="alert alert-danger" data-bind="visible: isError">\n      <span class="fa fa-lg fa-warning"></span> An error occurred during\n      processing.\n    </div>\n  </div>\n  <div class="details-body"><ion-subscribe-user-to-premium-asset-button /></div>\n</div>\n'}),define("text!Views/Admin/AssetDepot/AssetDepotShell.html",[],function(){return'<div class="fill-absolute users admin-shell" data-bind="compose: layout"></div>\n'}),define("text!Views/Admin/AssetDepot/AssetDepotTable.html",[],function(){return'<div class="container-fluid dashboard-table users-table">\n  <div class="table-responsive">\n    <table class="table table-hover">\n      <thead>\n        <tr>\n          <th>\n            <a data-bind="click: sortBy(\'name\')">\n              Name <span class="fa" data-bind="css: sortStatus(\'name\')"></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'description\')">\n              Description\n              <span\n                class="fa"\n                data-bind="css: sortStatus(\'description\')"\n              ></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'typeText\')">\n              Type\n              <span class="fa" data-bind="css: sortStatus(\'typeText\')"></span>\n            </a>\n          </th>\n          <th class="text-center">\n            <a data-bind="click: sortBy(\'isDefault\')">\n              Default\n              <span class="fa" data-bind="css: sortStatus(\'isDefault\')"></span>\n            </a>\n          </th>\n        </tr>\n      </thead>\n      <tbody data-bind="foreach: tableItems">\n        <tr\n          data-bind="css: {\'active\': $data === $parent.selectedItem()}, click: $parent.selectedItem, event: {\'dblclick\': $parent.edit}"\n        >\n          <td class="dashboard-table-clamp">\n            <span data-bind="text: name, attr: {title: name}"></span>\n            \x3c!-- ko foreach: labels --\x3e\n            <a\n              class="label label-tag"\n              data-bind="click: $parents[1].setLabel, clickBubble: false, text: name, attr: {\'title\': name}, style: {\'background-color\': colorString}, css: className"\n            ></a>\n            \x3c!-- /ko --\x3e\n          </td>\n          <td>\n            <div\n              class="dashboard-table-clamp"\n              data-bind="html: descriptionHtml"\n            ></div>\n          </td>\n          <td data-bind="text: typeText"></td>\n          <td class="text-center">\n            <span class="fa fa-check" data-bind="visible: isDefault"></span>\n          </td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: hasNoResults">\n        <tr>\n          <td colspan="4">No results</td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: !_hasItems()">\n        <tr>\n          <td colspan="4">No saved assets</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n'}),define("text!Views/Admin/AssetDepot/EditPremiumAsset.html",[],function(){return'<form class="secondary-panel" data-bind="submit: apply" novalidate>\n  <div class="h1" data-bind="text: paneTitle"></div>\n  <div>\n    <div data-bind="compose: nameField"></div>\n    <div data-bind="compose: descriptionField"></div>\n    \x3c!-- ko if: isAssetDepotFromPrefixEnabled --\x3e\n    <div data-bind="compose: prefixField"></div>\n    \x3c!-- /ko --\x3e\n    <div data-bind="compose: attributionField"></div>\n    <div data-bind="compose: isDefaultToggle"></div>\n    \x3c!-- ko if: areClipsEnabled --\x3e\n    <div data-bind="compose: clippableToggle"></div>\n    \x3c!-- /ko --\x3e\n    <div data-bind="compose: georeferencedToggle"></div>\n    \x3c!-- ko if: isAssetDepotHiddenAssetsEnabled --\x3e\n    <div data-bind="compose: hiddenToggle"></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: areAssetDepotLabelsEnabled --\x3e\n    <div class="form-group">\n      <div class="control-label">\n        Labels\n        \x3c!-- ko compose: labelPicker --\x3e\x3c!-- /ko --\x3e\n      </div>\n      <div class="label-group">\n        \x3c!-- ko foreach: labels --\x3e\n        <div\n          class="label label-tag"\n          data-bind="text: name, attr: {\'title\': name}, style: {\'background-color\': colorString}, css: className"\n        ></div>\n        \x3c!-- /ko --\x3e\n      </div>\n    </div>\n    \x3c!-- /ko --\x3e\n  </div>\n  <div class="action-buttons">\n    <button class="btn btn-primary" type="submit">Apply</button>\n    <button class="btn btn-default" type="button" data-bind="click: cancel">\n      Cancel\n    </button>\n    <p class="text-danger" data-bind="text: errorText"></p>\n  </div>\n</form>\n'}),define("text!Views/Admin/AssetDepot/ShowHiddenAssetsToggle.html",[],function(){return'<div>\n  <label\n    >Only show hidden assets\n    <input type="checkbox" data-bind="checked: displayHidden"\n  /></label>\n</div>\n'}),define("text!Views/Admin/Settings/DefaultStoryAssetsSelectPane.html",[],function(){return'<div class="container-fluid details">\n  <div class="row">\n    <div class="col-xs-12 details-header">\n      <a\n        class="visible-xs pull-left details-close btn btn-flat btn-default"\n        data-bind="click: cancel"\n      >\n        <div class="fa fa-lg fa-arrow-left"></div>\n        <div class="small">Back</div>\n      </a>\n    </div>\n  </div>\n  <div id="selectDefaultDataPane">\n    <div class="section" data-bind="compose: assetSelector"></div>\n    <button\n      class="btn btn-primary"\n      type="button"\n      data-bind="click: save, attr: {disabled: !assetSelector.hasSelected()}"\n    >\n      Select\n    </button>\n    <button class="btn btn-default" type="button" data-bind="click: cancel">\n      Cancel\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Admin/Settings/Settings.html",[],function(){return'<div class="dashboard container-fluid fill-absolute">\n  <div class="row-eq-height fill-absolute">\n    <div\n      class="pane-left dashboard-pane"\n      data-bind="css: {\'details-pane-expanded\': showRightPanel}"\n    >\n      <div id="defaultData">\n        <ion-message-of-the-day></ion-message-of-the-day>\n        <div class="h1 dashboard-title">Settings</div>\n        <div class="dashboard-help">\n          <div data-bind="compose: contextualHelp"></div>\n        </div>\n        <div>\n          <div class="section">\n            <h3>Default imagery</h3>\n            <span\n              class="current-default-name"\n              data-bind="text: imageryName"\n            ></span>\n            <button\n              class="btn btn-primary"\n              type="button"\n              data-bind="disable: pending, click: selectDefaultImagery"\n            >\n              Select\n            </button>\n          </div>\n          <div class="section">\n            <h3>Default terrain</h3>\n            <span\n              class="current-default-name"\n              data-bind="text: terrainName"\n            ></span>\n            <button\n              class="btn btn-primary"\n              type="button"\n              data-bind="disable: pending, click: selectDefaultTerrain"\n            >\n              Select\n            </button>\n          </div>\n          <div class="section">\n            <h3>Default buildings</h3>\n            <span\n              class="current-default-name"\n              data-bind="text: buildingsName"\n            ></span>\n            <button\n              class="btn btn-primary"\n              type="button"\n              data-bind="disable: pending, click: selectDefaultBuildings"\n            >\n              Select\n            </button>\n          </div>\n          <div class="section">\n            <h3>Asset preview imagery</h3>\n            <span\n              clsas="current-default-name"\n              data-bind="text: assetViewerImageryName"\n            ></span>\n            <button\n              class="btn btn-primary"\n              type="button"\n              data-bind="disable: pending, click: selectAssetViewerImagery"\n            >\n              Select\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class="dashboard-pane details-pane"\n      data-bind="compose: rightPane, visible: showRightPanel"\n    ></div>\n  </div>\n</div>\n'}),define("text!Views/Admin/Settings/SettingsShell.html",[],function(){return'<div class="container-fluid admin-shell">\n  <div class="row full-height">\n    \x3c!-- ko if: router.navigationModel().length > 1 --\x3e\n    <div class="col-sm-2">\n      <ul\n        class="well nav nav-pills nav-stacked hidden-xs"\n        data-bind="foreach: navigation"\n      >\n        <li data-bind="css: { active: isActive }">\n          <a data-bind="attr: { href: hash }, text: title"></a>\n        </li>\n      </ul>\n      <ul\n        class="well nav nav-pills hidden-sm hidden-md hidden-lg"\n        data-bind="foreach: navigation"\n      >\n        <li data-bind="css: { active: isActive }">\n          <a data-bind="attr: { href: hash }, text: title"></a>\n        </li>\n      </ul>\n    </div>\n    \x3c!-- /ko --\x3e\n    <div\n      id="settingsShellContent"\n      class="col-sm-10"\n      data-bind="router: { }"\n    ></div>\n  </div>\n</div>\n'}),define("text!Views/Admin/UserData/UserData.html",[],function(){return'<div id="userDataShell" class="container-fluid">\n  <div data-bind="compose: listPane"></div>\n</div>\n'}),define("text!Views/Admin/UserData/UserDataDetails.html",[],function(){return'<div class="container-fluid details users-details">\n  <div class="row">\n    <div class="col-xs-12 details-header">\n      <div\n        class="pull-right details-delete"\n        data-bind="css:{\'disabled\': pending}"\n      >\n        <a\n          class="btn btn-flat btn-default"\n          data-bind="compose: deleteButton"\n        ></a>\n      </div>\n      <a\n        class="visible-xs pull-left details-close btn btn-flat btn-default"\n        data-bind="click: unselect"\n      >\n        <div class="fa fa-lg fa-arrow-left"></div>\n        <div class="small">Back</div>\n      </a>\n      <div class="details-title">\n        <span class="h2" data-bind="text: name, attr:{\'title\': name}"></span>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div\n      class="col-xs-12 assets-details-preview"\n      data-bind="compose: assetViewer, visible: !isExternal(), css: {\'webgl-error\': assetViewer.webglError, \'in-progress\': assetViewer.inProgress}"\n    ></div>\n    <div\n      class="col-xs-12 external-asset-access-message"\n      data-bind="visible: isExternal"\n    >\n      <div class="alert alert-info">\n        Administrators do not have access to users\' external assets.\n      </div>\n    </div>\n  </div>\n  <div>\n    <ul class="row nav nav-tabs" data-bind="visible: showSourcesTab">\n      <li class="active text-center col-xs-6">\n        <a class="info-tab" data-toggle="tab" href="#infoTab">Information</a>\n      </li>\n      <li class="text-center col-xs-6">\n        <a class="sources-tab" data-toggle="tab" href="#sourcesTab">Sources</a>\n      </li>\n    </ul>\n\n    <div class="tab-content details-body">\n      <div id="infoTab" class="tab-pane active">\n        <div data-bind="visible: !isPremium()">\n          <div data-bind="compose: nameField"></div>\n          <ion-markdown-edit-field\n            data-bind="value: description, attr: { disabled: pending }"\n            data-testid="user-asset-description-edit"\n            label="Description"\n          ></ion-markdown-edit-field>\n        </div>\n        <table class="details-table table table-bordered">\n          <tbody>\n            <tr data-bind="visible: isPremium">\n              <td class="bold">Name</td>\n              <td data-bind="text: name"></td>\n            </tr>\n            <tr data-bind="visible: isPremium">\n              <td class="bold">Description</td>\n              <td data-bind="text: description"></td>\n            </tr>\n            <tr>\n              <td class="bold">ID</td>\n              <td data-bind="text: id"></td>\n            </tr>\n            <tr>\n              <td class="bold">Type</td>\n              <td data-bind="text: type"></td>\n            </tr>\n            <tr>\n              <td class="bold">Date Added</td>\n              <td data-bind="text: dateAdded"></td>\n            </tr>\n            <tr>\n              <td class="bold">Size</td>\n              <td data-bind="text: size"></td>\n            </tr>\n            <tr>\n              <td\n                class="bold"\n                data-bind="text: isCesiumHostedMode ? \'Premium\' : \'Asset Depot\'"\n              ></td>\n              <td>\n                <span class="fa fa-check" data-bind="visible: isPremium"></span>\n              </td>\n            </tr>\n            <tr>\n              <td class="bold">External</td>\n              <td>\n                <span\n                  class="fa fa-check"\n                  data-bind="visible: isExternal"\n                ></span>\n              </td>\n            </tr>\n            <tr>\n              <td class="bold">Georeferenced</td>\n              <td>\n                \x3c!-- ko compose: georeferencedDisplay --\x3e\n                \x3c!-- /ko --\x3e\n              </td>\n            </tr>\n            \x3c!-- ko if: !isCesiumHostedMode --\x3e\n            <tr>\n              <td class="bold">Asset logs</td>\n              <td>\n                <ul>\n                  \x3c!-- ko foreach: logs --\x3e\n                  <li>\n                    <a\n                      target="_blank"\n                      data-bind="attr: {href: $data}, text: new URL($data).pathname.split(\'/\').pop()"\n                      rel="noopener"\n                    ></a>\n                    \x3c!-- /ko --\x3e\n                  </li>\n                </ul>\n              </td>\n            </tr>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: isCesiumHostedMode  --\x3e\n            <tr>\n              <td class="bold">Job</td>\n              <td>\n                <a\n                  data-bind="visible: !isPremium() && !isExternal(), attr: {href: jobUrl}"\n                  >View job</a\n                >\n              </td>\n            </tr>\n            \x3c!-- /ko --\x3e\n          </tbody>\n        </table>\n        <div\n          data-bind="compose: realityData, visible: !isPremium() && isCesiumHostedMode"\n        ></div>\n      </div>\n      <div\n        id="sourcesTab"\n        class="tab-pane"\n        data-bind="compose: sourcesTable"\n      ></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Admin/UserData/UserDataListPane.html",[],function(){return'<div class="container-fluid dashboard-list">\n  <div class="dashboard-list-heading">\n    <div class="dashboard-row-one">\n      <div class="h1 dashboard-title" data-bind="text: title"></div>\n      <div class="dashboard-help" data-bind="if: hasHelp">\n        <div data-bind="compose: contextualHelp"></div>\n      </div>\n    </div>\n    <div class="user-data-name">\n      <div data-bind="visible: isError">\n        <div class="alert alert-danger">\n          There was an error loading the content\n        </div>\n      </div>\n      <div class="loading-indicator-overlay" data-bind="visible: isInProgress">\n        <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n        <div class="loading-message">Loading...</div>\n      </div>\n      <div data-bind="visible: isReady">\n        <div data-bind="compose: afterTitleContent"></div>\n        <div\n          class="alert alert-info pull-left"\n          data-bind="visible: !hasSelectedUser()"\n        >\n          <p>Select a user by typing a username into the input field above.</p>\n        </div>\n      </div>\n    </div>\n    <div\n      class="pull-left dashboard-new-button"\n      data-bind="visible: !hideNew(), css: {\'disabled\': disableNew}"\n    >\n      <button\n        class="btn btn-primary"\n        type="button"\n        data-bind="visible: newButtonVisible, click: createNew"\n      >\n        <span data-bind="text: newButtonText"></span>\n      </button>\n    </div>\n    <div class="pull-right dashboard-search">\n      <div class="input-group">\n        <input\n          type="text"\n          class="form-control"\n          placeholder="Search for..."\n          data-bind="textInput: searchText"\n        />\n        <div class="input-group-addon">\n          <span class="fa fa-lg fa-search"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="dashboard-list-content" data-bind="visible: hasSelectedUser">\n    <div data-bind="visible: assetIsError">\n      <div class="alert alert-danger">\n        There was an error loading the content\n      </div>\n    </div>\n    <div\n      class="loading-indicator-overlay"\n      data-bind="visible: assetIsInProgress"\n    >\n      <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n      <div class="loading-message">Loading...</div>\n    </div>\n    <div class="row" data-bind="visible: assetIsReady">\n      <div class="col-xs-12 tab-content">\n        <div\n          id="dashboardTable"\n          class="tab-pane"\n          data-bind="css: {\'active\': !enableGrid}"\n        >\n          <div class="row">\n            <div\n              class="col-xs-12 dashboard-table-container"\n              data-bind="compose: tablePath"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Admin/UserData/UserDataShell.html",[],function(){return'<div class="fill-absolute user-data admin-shell">\n  <div class="dashboard container-fluid fill-absolute">\n    <div class="row-eq-height fill-absolute">\n      <div\n        class="disabled-overlay"\n        data-bind="visible: disabled, css: {\'details-pane-expanded\': showRightPanel()}"\n      ></div>\n      <div\n        class="pane-left dashboard-pane"\n        data-bind="compose: userData, css: {\'details-pane-expanded\': showRightPanel()}"\n      ></div>\n      <div\n        class="dashboard-pane details-pane"\n        data-bind="compose: rightPane, visible: showRightPanel"\n      ></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Admin/UserData/UserDataTable.html",[],function(){return'<div class="container-fluid dashboard-table">\n  <div class="table-responsive">\n    <table class="table table-hover">\n      <thead>\n        <tr>\n          <th>\n            <a data-bind="click: sortBy(\'ID\')">\n              ID <span class="fa" data-bind="css: sortStatus(\'ID\')"></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'NAME\')">\n              Name <span class="fa" data-bind="css: sortStatus(\'NAME\')"></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'TYPE\')">\n              Type\n              <span class="fa" data-bind="css: sortStatus(\'TYPE\')"></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'DATE_ADDED\')">\n              Date added\n              <span class="fa" data-bind="css: sortStatus(\'DATE_ADDED\')"></span>\n            </a>\n          </th>\n          <th class="text-center">\n            <a data-bind="click: sortBy(\'BYTES\')">\n              Size <span class="fa" data-bind="css: sortStatus(\'BYTES\')"></span>\n            </a>\n          </th>\n          <th class="text-center">\n            <a data-bind="click: sortBy(\'PREMIUM_ASSET\')"\n              ><span\n                data-bind="text: isCesiumHostedMode ? \'Premium\' : \'Asset Depot\'"\n              ></span>\n              \x3c!-- to do add sort status for this --\x3e\n              <span\n                class="fa"\n                data-bind="css: sortStatus(\'PREMIUM_ASSET\')"\n              ></span>\n            </a>\n          </th>\n          \x3c!-- ko if: !isCesiumHostedMode --\x3e\n          <th class="text-center">\n            <a data-bind="click: sortBy(\'STATUS\')">\n              Status\n              <span class="fa" data-bind="css: sortStatus(\'STATUS\')"></span>\n            </a>\n          </th>\n          <th class="text-center">Delete</th>\n          \x3c!-- /ko --\x3e\n        </tr>\n      </thead>\n      <tbody data-bind="foreach: tableItems">\n        <tr\n          data-bind="css: {\'active\': $data === $parent.selectedItem()}, click: $parent.selectedItem, event: {\'dblclick\': $parent.edit}"\n        >\n          <td data-bind="text: id"></td>\n          <td data-bind="text: name"></td>\n          <td data-bind="text: typeName"></td>\n          <td data-bind="text: dateAddedLocal"></td>\n          <td\n            class="text-center dashboard-table-no-wrap"\n            data-bind="text: size"\n          ></td>\n          <td class="text-center">\n            <span class="fa fa-check" data-bind="visible: isPremium"></span>\n          </td>\n          \x3c!-- ko if: !$parent.isCesiumHostedMode --\x3e\n          <td class="text-center" data-bind="text: statusString"></td>\n          <td class="text-center" data-bind="compose: deleteButton"></td>\n          \x3c!-- /ko --\x3e\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: hasNoResults">\n        <tr>\n          <td colspan="6">No results</td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: !_hasItems()">\n        <tr>\n          <td colspan="6">User has no data</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <nav class="text-center">\n    <ul class="pagination">\n      <li data-bind="css: {disabled: !hasPrevious()}">\n        <a data-bind="click: loadPrevious">\n          <span aria-hidden="true">&laquo; Previous</span>\n        </a>\n      </li>\n      <li data-bind="css: {disabled: !hasNext()}">\n        <a data-bind="click: loadNext">\n          <span aria-hidden="true">Next &raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</div>\n'}),define("text!Views/Admin/UserData/UserSelection.html",[],function(){return'<div class="user-selection">\n  <form class="form-inline">\n    <div class="form-group">\n      <label id="adminAssetsSearchLabel" for="adminAssetsSearch"\n        >Select user:</label\n      >\n      <input id="adminAssetsSearch" class="typeahead" type="text" />\n    </div>\n  </form>\n</div>\n'}),define("text!Views/Admin/Users/AddEditUser.html",[],function(){return'<form\n  class="secondary-panel add-edit-user"\n  data-bind="submit: apply"\n  novalidate\n>\n  <div class="h1" data-bind="text: paneTitle"></div>\n  <div>\n    <div data-bind="compose: usernameField"></div>\n    <div data-bind="compose: emailField, visible: !isTeam()"></div>\n    <div class="row">\n      <div class="col-xs-5" data-bind="compose: userTypeField"></div>\n      <div\n        class="col-xs-5 col-xs-offset-1"\n        data-bind="compose: exportStatusField, visible: notEmployee"\n      ></div>\n    </div>\n    \x3c!-- ko if: signature --\x3e\n    <div data-bind="compose: signature"></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: notEmployee --\x3e\n    <div data-bind="visible: !_editUser">\n      <label>Plan</label><br />\n      New users are created with the Community plan<br /><br />\n    </div>\n    \x3c!-- ko if: _editUser --\x3e\n    <div class="row">\n      <div class="col-xs-5" data-bind="compose: planField"></div>\n      \x3c!-- ko if: planHasExpiration--\x3e\n      <div\n        class="col-xs-5 col-xs-offset-1"\n        data-bind="compose: planExpirationField"\n      ></div>\n      \x3c!-- /ko --\x3e\n    </div>\n    \x3c!-- ko if: isRecurringPlan --\x3e\n    <div class="row">\n      <div class="col-xs-5" data-bind="compose: priceField"></div>\n      <div\n        class="col-xs-5 col-xs-offset-1"\n        data-bind="compose: priceToggle"\n      ></div>\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko compose: planLimitPanel --\x3e\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko foreach: subscriptionFields --\x3e\n    <div class="row">\n      <div class="col-xs-5" data-bind="compose: $data.field"></div>\n    </div>\n    <div class="row" data-bind="visible: $data.field.input() !== \'NO\'">\n      <div class="col-xs-5" data-bind="compose: $data.toggle"></div>\n      <div\n        class="col-xs-5 col-xs-offset-1"\n        data-bind="compose: $data.expirationField"\n      ></div>\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: _editUser --\x3e\n    <div data-bind="compose: enabledToggle"></div>\n    <div data-bind="compose: ignoreOveragesToggle"></div>\n    \x3c!-- /ko --\x3e\n  </div>\n  <div class="action-buttons">\n    <button\n      class="btn btn-primary"\n      type="submit"\n      data-bind="text: submitText"\n    ></button>\n    <button class="btn btn-default" type="button" data-bind="click: cancel">\n      Cancel\n    </button>\n  </div>\n  <div class="text-danger" data-bind="text: formError"></div>\n</form>\n'}),define("text!Views/Admin/Users/CustomPlanToggles.html",[],function(){return'<div class="custom-plan-toggles">\n  <div class="row row-eq-height">\n    <div class="col-xs-5" data-bind="compose: quotaField"></div>\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: quotaToggle"\n    ></div>\n  </div>\n  <div class="row row-eq-height">\n    <div class="col-xs-5" data-bind="compose: streamingField"></div>\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: streamingToggle"\n    ></div>\n  </div>\n  <div class="row row-eq-height">\n    <div class="col-xs-5" data-bind="compose: bingSessionsField"></div>\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: bingSessionsToggle"\n    ></div>\n  </div>\n  <div class="row row-eq-height">\n    <div class="col-xs-5" data-bind="compose: googleSessionsField"></div>\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: googleSessionsToggle"\n    ></div>\n  </div>\n  <div class="row row-eq-height">\n    <div class="col-xs-5" data-bind="compose: geocodesField"></div>\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: geocodesToggle"\n    ></div>\n  </div>\n  <div class="row row-eq-height">\n    <div class="col-xs-5" data-bind="compose: clipsField"></div>\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: clipsToggle"\n    ></div>\n  </div>\n  <div class="row row-eq-height" data-bind="visible: isRealityAnalysisEnabled">\n    <div class="col-xs-5" data-bind="compose: analysisHoursField"></div>\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: analysisHoursToggle"\n    ></div>\n  </div>\n</div>\n'}),define("text!Views/Admin/Users/EditUserConfirmationMessage.html",[],function(){return'<div class="modal-content messageBox">\n  <div class="modal-header">\n    <h2>Save changes?</h2>\n  </div>\n  <div class="modal-body">\n    <p>\n      The following changes will be saved for\n      <span data-bind="text: username"></span>\n    </p>\n    <ul data-bind="foreach: changes">\n      <li>\n        <span class="bold" data-bind="text: text"></span>:\n        <span data-bind="text: value"></span>\n      </li>\n    </ul>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-primary" type="button" data-bind="click: save">\n      Save\n    </button>\n    <button class="btn btn-default" type="button" data-bind="click: cancel">\n      Cancel\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Admin/Users/UserDetails.html",[],function(){return'<div class="container-fluid details users-details">\n  <div class="row">\n    <div class="col-xs-12 details-header">\n      <div\n        class="pull-right details-delete"\n        data-bind="visible: canDelete, css:{\'disabled\': pending}"\n      >\n        <a\n          class="btn btn-flat btn-default"\n          data-bind="compose: deleteButton"\n        ></a>\n      </div>\n      <div\n        class="pull-right details-edit"\n        data-bind="visible: deleted(), css:{\'disabled\': pending}"\n      >\n        <a class="btn btn-flat btn-default" data-bind="click: undeleteUser">\n          <div>\n            <div class="fa fa-lg fa-user-plus"></div>\n            <div class="small">Undelete</div>\n          </div>\n        </a>\n      </div>\n      <div\n        class="pull-right details-edit"\n        data-bind="visible: !deleted(), css:{\'disabled\': pending}"\n      >\n        <a class="btn btn-flat btn-default" data-bind="click: editUser">\n          <div>\n            <div class="fa fa-lg fa-pencil"></div>\n            <div class="small">Edit</div>\n          </div>\n        </a>\n      </div>\n      <a\n        class="visible-xs pull-left details-close btn btn-flat btn-default"\n        data-bind="click: unselect"\n      >\n        <div class="fa fa-lg fa-arrow-left"></div>\n        <div class="small">Back</div>\n      </a>\n      <div class="details-title">\n        <span\n          class="h2"\n          data-bind="text: nameText, attr:{\'title\': nameText}"\n        ></span>\n      </div>\n    </div>\n  </div>\n  <div class="details-body">\n    <table class="details-table table table-bordered">\n      <tbody>\n        \x3c!-- ko foreach: userDetailsRows --\x3e\n        \x3c!-- ko if: $data.label === \'Previous emails\' && $data.value().length > 0 && !$parent.isTeam()--\x3e\n        <tr>\n          <td class="bold" data-bind="text: label"></td>\n          <td>\n            <ul data-bind="foreach: value">\n              <li>\n                <span data-bind="text: email"></span>\n                <span\n                  data-bind="text: \'(\' + new Date(date_changed).toLocaleDateString() + \')\'"\n                ></span>\n                <span\n                  class="label"\n                  data-bind="text: verified ? \'Verified\' : \'Not verified\', css: {\'label-success\': verified, \'label-warning\': !verified}"\n                ></span>\n              </li>\n            </ul>\n          </td>\n        </tr>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: $data.label !== \'Previous emails\' && $data.label === \'Email\' && !$parent.isTeam()--\x3e\n        <tr>\n          <td class="bold" data-bind="text: label"></td>\n          <td>\n            <span data-bind="text: value"></span>\n            <span class="label-group">\n              <span\n                class="label"\n                data-bind="text: $parent.verifiedText, css: {\'label-success\': $parent.verified, \'label-warning\': !$parent.verified()}"\n              ></span>\n              <button\n                class="btn btn-default btn-xs"\n                type="button"\n                data-bind="click: $parent.sendVerificationEmail, visible: !$parent.verified()"\n              >\n                Resend email\n              </button>\n            </span>\n          </td>\n        </tr>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: $data.label !== \'Previous emails\' && $data.label !== \'Email\'--\x3e\n        <tr>\n          <td class="bold" data-bind="text: label"></td>\n          <td>\n            <span data-bind="text: value"></span>\n          </td>\n        </tr>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        <tr>\n          <td class="bold">Subscription</td>\n          <td data-bind="html: subscriptionHtml"></td>\n        </tr>\n        <tr data-bind="if: licenseSignature">\n          <td class="bold">License</td>\n          <td data-bind="compose: licenseSignature"></td>\n        </tr>\n        <tr>\n          <td class="bold">Storage used</td>\n          <td>\n            <span data-bind="text: storageUsedText"></span>\n            <button\n              class="btn btn-default btn-xs user-data-button"\n              type="button"\n              data-bind="click: goToUserData"\n            >\n              See User Assets\n            </button>\n          </td>\n        </tr>\n        <tr>\n          <td class="bold">Plan limits</td>\n          <td>\n            <ul>\n              <li>\n                Storage quota: <span data-bind="text: storageQuotaText"></span>\n                <span data-bind="visible: hasCustomQuota">(custom)</span>\n              </li>\n              <li>\n                Streaming quota:\n                <span data-bind="text: streamingQuotaText"></span>\n                <span data-bind="visible: hasCustomStreaming">(custom)</span>\n              </li>\n              <li>\n                Bing sessions: <span data-bind="text: bingQuotaText"></span>\n                <span data-bind="visible: hasCustomBingMapsSessions"\n                  >(custom)</span\n                >\n              </li>\n              <li>\n                Google Photorealistic 3D Tiles sessions:\n                <span data-bind="text: googleQuotaText"></span>\n                <span data-bind="visible: hasCustomGoogleSessions"\n                  >(custom)</span\n                >\n              </li>\n              <li>\n                Geocodes: <span data-bind="text: geocodeQuotaText"></span>\n                <span data-bind="visible: hasCustomGeocodes">(custom)</span>\n              </li>\n              <li>\n                Clips: <span data-bind="text: clipsQuotaText"></span>\n                <span data-bind="visible: hasCustomClips">(custom)</span>\n              </li>\n              <li data-bind="visible: isRealityAnalysisEnabled">\n                Analysis Hours:\n                <span data-bind="text: analysisHoursText"></span>\n                <span data-bind="visible: hasCustomAnalysis">(custom)</span>\n              </li>\n            </ul>\n          </td>\n        </tr>\n        \x3c!-- ko foreach: subscriptions --\x3e\n        <tr>\n          <td class="bold" data-bind="text: $data.label"></td>\n          <td>\n            <span data-bind="text: $data.accessText"></span><br />\n            <span data-bind="text: $data.expirationText"></span>\n          </td>\n        </tr>\n        \x3c!-- /ko --\x3e\n        <tr>\n          <td class="bold">Account Status</td>\n          <td>\n            <div class="label-group">\n              <span class="label label-danger" data-bind="visible: deleted"\n                >Deleted</span\n              >\n              <span\n                class="label"\n                data-bind="visible: !deleted(), text: disabledText, css: {\'label-success\': !disabled(), \'label-warning\': disabled}"\n              ></span>\n            </div>\n            <div class="label-group">\n              <span\n                class="label"\n                data-bind="text: exportStatusText, css: exportClass"\n              ></span>\n            </div>\n            <div class="label-group">\n              <span\n                class="label"\n                data-bind="visible: ignoreUserOverage(), text: ignoreOverageText, css: {\'label-warning\': true}"\n              ></span>\n            </div>\n          </td>\n        </tr>\n        <tr>\n          <td class="bold">Two-factor authentication</td>\n          <td data-bind="compose: multiFactorStatus" id="mfa-status-cell"></td>\n        </tr>\n        <tr data-bind="if: notes">\n          <td class="bold">Account notes</td>\n          <td data-bind="compose: notes"></td>\n        </tr>\n      </tbody>\n    </table>\n    <button\n      class="btn btn-primary"\n      data-bind="click: addNewUserToTeam, visible: isTeam(), disable: dialogPending"\n    >\n      <span class="fa fa-random"></span> Add user to team\n    </button>\n\n    <div data-bind="compose: debugAccess"></div>\n  </div>\n</div>\n'}),define("text!Views/Admin/Users/UserFilterMessage.html",[],function(){return'<div class="modal-content messageBox">\n  <div class="modal-header">\n    <h2>Filter users</h2>\n  </div>\n  <div class="modal-body">\n    \x3c!-- ko if: cesiumHostedMode --\x3e\n    <h3>Plans</h3>\n    <div class="row" data-bind="foreach: plans">\n      <div class="col-xs-6">\n        <label>\n          <input type="checkbox" data-bind="checked: selected" />\n          <span data-bind="text: name"></span>\n        </label>\n      </div>\n    </div>\n    <hr />\n    \x3c!-- /ko --\x3e\n    <h3>User type</h3>\n    <div class="row">\n      <div class="col-xs-6" data-bind="compose: userTypeField"></div>\n    </div>\n    \x3c!-- ko if: cesiumHostedMode --\x3e\n    <hr />\n    <h3>Licenses</h3>\n    <div class="row">\n      \x3c!-- ko foreach: allProducts --\x3e\n      <div class="col-xs-6">\n        <label>\n          <input\n            type="checkbox"\n            data-bind="checkedValue: value, checked: $root.selectedProducts"\n          />\n          <span data-bind="text: label"></span>\n        </label>\n      </div>\n      \x3c!-- /ko --\x3e\n    </div>\n    <hr />\n    \x3c!-- /ko --\x3e\n\n    <hr />\n    <h3>User account status</h3>\n    <div class="row">\n      <div class="col-xs-6">\n        <label>\n          <input type="checkbox" data-bind="checked: deleted" />\n          <span>Deleted</span>\n        </label>\n      </div>\n      \x3c!-- ko if: !cesiumHostedMode --\x3e\n      <div class="col-xs-6">\n        <label>\n          <input type="checkbox" data-bind="checked: active" />\n          <span>Active last month</span>\n        </label>\n      </div>\n      \x3c!-- /ko --\x3e\n    </div>\n    <hr />\n    <h3>Account Type</h3>\n    <div class="row">\n      <div class="col-xs-6" data-bind="compose: accountTypeField"></div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-primary" type="button" data-bind="click: apply">\n      Apply\n    </button>\n    <button class="btn btn-default" type="button" data-bind="click: close">\n      Cancel\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Admin/Users/UsersShell.html",[],function(){return'<div class="fill-absolute users admin-shell">\n  <div class="dashboard container-fluid fill-absolute">\n    <div class="row-eq-height fill-absolute">\n      <div\n        class="disabled-overlay details-pane-expanded"\n        data-bind="visible: disabled"\n      ></div>\n      <div\n        data-bind="class: cesiumHostedMode ? \'pane-left dashboard-pane details-pane-expanded\' : \'fill-absolute\'"\n      >\n        <div class="container-fluid dashboard-list">\n          <div class="dashboard-list-heading">\n            <div class="dashboard-row-one">\n              <div class="h1 dashboard-title">Users</div>\n              \x3c!-- ko if: cesiumHostedMode --\x3e\n              <div class="dashboard-help">\n                <div data-bind="compose: contextualHelp"></div>\n              </div>\n              \x3c!-- /ko --\x3e\n            </div>\n            <div class="dashboard-new-button">\n              \x3c!-- ko if: cesiumHostedMode --\x3e\n              <button\n                class="btn btn-primary"\n                type="button"\n                data-bind="click: createNew"\n              >\n                Add user\n              </button>\n              \x3c!-- /ko --\x3e\n              \x3c!-- ko if: !cesiumHostedMode --\x3e\n              <div data-bind="compose: adminUserCount"></div>\n              \x3c!-- /ko --\x3e\n            </div>\n            \x3c!-- ko if: cesiumHostedMode --\x3e\n            <div\n              data-bind="compose: createTeamButton"\n              class="dashboard-new-button"\n            ></div>\n            \x3c!-- /ko --\x3e\n            <div class="pull-right dashboard-search">\n              <div class="input-group">\n                <input\n                  type="search"\n                  class="form-control"\n                  placeholder="Search for..."\n                  data-bind="textInput: searchText"\n                />\n                <div class="input-group-addon">\n                  <span class="fa fa-lg fa-search"></span>\n                </div>\n              </div>\n            </div>\n            <div class="pull-right">\n              <button\n                class="btn btn-default"\n                data-bind="click: clearFilters, visible: hasFilters"\n              >\n                Clear filters\n              </button>\n              <button\n                class="btn btn-default"\n                data-bind="click: showFilterMessage"\n              >\n                <span class="fa fa-filter"></span> Filter\n              </button>\n            </div>\n          </div>\n          <div class="dashboard-list-content">\n            <div data-bind="visible: isError">\n              <div class="alert alert-danger">\n                There was an error loading the content\n              </div>\n            </div>\n            <div\n              class="loading-indicator-overlay"\n              data-bind="visible: isInProgress"\n            >\n              <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n              <div class="loading-message">Loading...</div>\n            </div>\n            <div class="row" data-bind="visible: isReady">\n              <div class="col-xs-12">\n                <div id="dashboardTable">\n                  <div class="row">\n                    <div\n                      class="col-xs-12 dashboard-table-container"\n                      data-bind="compose: \'Views/Admin/Users/UsersTable.html\'"\n                    ></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \x3c!-- ko if: cesiumHostedMode --\x3e\n      <div\n        class="dashboard-pane details-pane"\n        data-bind="compose: rightPane, visible: showDetails"\n      ></div>\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Admin/Users/UsersTable.html",[],function(){return'<div class="container-fluid dashboard-table users-table">\n  <div class="table-responsive">\n    <table class="table table-hover">\n      <thead>\n        <tr>\n          <th>\n            <a data-bind="click: sortBy(\'id\')">\n              ID\n              <span class="fa" data-bind="css: sortStatus(\'id\')"></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'username\')">\n              Username\n              <span class="fa" data-bind="css: sortStatus(\'username\')"></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'email\')">\n              Email\n              <span class="fa" data-bind="css: sortStatus(\'email\')"></span>\n            </a>\n          </th>\n          \x3c!-- ko if: cesiumHostedMode --\x3e\n          <th class="text-center">\n            <a data-bind="click: sortBy(\'verified\')">\n              Verified\n              <span class="fa" data-bind="css: sortStatus(\'verified\')"></span>\n            </a>\n          </th>\n          \x3c!-- /ko --\x3e\n          <th>\n            <a data-bind="click: sortBy(\'dateActivated\')">\n              Sign up date\n              <span\n                class="fa"\n                data-bind="css: sortStatus(\'dateActivated\')"\n              ></span>\n            </a>\n          </th>\n          <th class="hidden-md hidden-sm">\n            <a data-bind="click: sortBy(\'lastLogIn\')">\n              Last login\n              <span class="fa" data-bind="css: sortStatus(\'lastLogIn\')"></span>\n            </a>\n          </th>\n          \x3c!-- ko if: cesiumHostedMode --\x3e\n          <th class="hidden-md hidden-sm">\n            <a data-bind="click: sortBy(\'planCode\')">\n              Plan\n              <span class="fa" data-bind="css: sortStatus(\'planCode\')"></span>\n            </a>\n          </th>\n          <th class="hidden-md hidden-sm">\n            <a data-bind="click: sortBy(\'exportStatus\')">\n              Export status\n              <span\n                class="fa"\n                data-bind="css: sortStatus(\'exportStatus\')"\n              ></span>\n            </a>\n          </th>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: !cesiumHostedMode --\x3e\n          <th class="text-center">Deleted</th>\n          <th class="text-center">Active last month</th>\n          <th class="text-center">Delete</th>\n          <th class="text-center">Undelete</th>\n          \x3c!-- /ko --\x3e\n        </tr>\n      </thead>\n      <tbody data-bind="foreach: items">\n        <tr\n          data-bind="css: {\'active\': $data === $parent.selectedItem()}, click: $parent.selectedItem"\n        >\n          <td data-bind="text: id"></td>\n          <td data-bind="text: username"></td>\n          <td data-bind="text: email"></td>\n          \x3c!-- ko if: $parent.cesiumHostedMode --\x3e\n          <td class="text-center">\n            <span class="fa fa-check" data-bind="visible: verified"></span>\n          </td>\n          \x3c!-- /ko --\x3e\n          <td data-bind="text: dateActivatedText"></td>\n          <td class="hidden-md hidden-sm" data-bind="text: lastLogInText"></td>\n          \x3c!-- ko if: $parent.cesiumHostedMode --\x3e\n          <td\n            class="hidden-md hidden-sm"\n            data-bind="text: subscriptionText"\n          ></td>\n          <td class="hidden-md hidden-sm" data-bind="text: exportStatus"></td>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: !$parent.cesiumHostedMode --\x3e\n          <td class="text-center">\n            <span class="fa fa-check" data-bind="visible: deleted()"></span>\n            <span data-bind="visible: !deleted()">-</span>\n          </td>\n          <td class="text-center">\n            <span class="fa fa-check" data-bind="visible: isActive"></span>\n            <span data-bind="visible: !isActive">-</span>\n          </td>\n          <td class="text-center">\n            <div data-bind="compose: deleteButton, visible: !deleted()"></div>\n            <span data-bind="visible: deleted()">-</span>\n          </td>\n          <td class="text-center">\n            <div\n              role="button"\n              data-bind="click: fireUndeleteEvent, visible: deleted()"\n            >\n              <div class="fa fa-lg fa-user-plus"></div>\n            </div>\n            <span data-bind="visible: !deleted()">-</span>\n          </td>\n          \x3c!-- /ko --\x3e\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: hasNoResults">\n        <tr>\n          <td colspan="7">No results</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <nav class="pagination-nav">\n    <ul class="pagination">\n      <li data-bind="css: {disabled: !hasPrevious()}">\n        <a data-bind="click: loadPrevious">\n          <span aria-hidden="true">&laquo; Previous</span>\n        </a>\n      </li>\n      <li data-bind="css: {disabled: !hasNext()}">\n        <a data-bind="click: loadNext">\n          <span aria-hidden="true">Next &raquo;</span>\n        </a>\n      </li>\n    </ul>\n    <p data-bind="visible: totalCount() !== undefined">\n      <span data-bind="text: totalCount"></span> user total\n    </p>\n  </nav>\n</div>\n'}),define("text!Views/Components/AssetExports/AssetExportsDetailsDialog.html",[],function(){return'<div class="modal-content messageBox">\n  <div class="modal-header">\n    <h2>Export Details</h2>\n  </div>\n  <div class="modal-body">\n    <div class="details-body">\n      <table class="exports-details-table table table-bordered">\n        <tbody>\n          <tr>\n            <td>Identifier</td>\n            <td data-bind="text: id"></td>\n          </tr>\n          <tr>\n            <td>Date created</td>\n            <td data-bind="text: dateAdded"></td>\n          </tr>\n          <tr>\n            <td>Location</td>\n            <td data-bind="text: location"></td>\n          </tr>\n          <tr>\n            <td>Status</td>\n            <td data-bind="text: status"></td>\n          </tr>\n          <tr>\n            <td>Size</td>\n            <td data-bind="text: exportSize"></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn-default" type="button" data-bind="click: close">\n      Close\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Components/AssetExports/AssetExportsShell.html",[],function(){return'<div>\n  \x3c!-- ko if: !isExportable() --\x3e\n  <div class="alert alert-info">\n    <span>\n      <span class="fa fa-info-circle"> </span>Exports are not supported for this\n      asset.\n    </span>\n  </div>\n  \x3c!-- /ko --\x3e\n  \x3c!-- ko if: isExportable() && hasTilingError() --\x3e\n  <div class="alert alert-info">\n    <span\n      ><span class="fa fa-info-circle"> </span>\n      Exports are unavailable for errored assets.\n    </span>\n  </div>\n  \x3c!-- /ko --\x3e\n  \x3c!-- ko if: isExportable() && !hasTilingError() --\x3e\n  <div class="asset-exports">\n    <div data-bind="visible: !pending() && !hasError() && !hasTilingError()">\n      \x3c!-- ko compose: exportButton --\x3e\x3c!-- /ko --\x3e\n      <div class="alert alert-info" data-bind="visible: exportDisabled()">\n        <span class="fa fa-info-circle"> </span>\n        <span\n          >This account is over its monthly streaming quota. It will reset at\n          the start of your next billing cycle. Upgrade your plan to export\n          additional assets without waiting.</span\n        >\n      </div>\n      <div class="dashboard-table asset-exports-table">\n        <div class="table-responsive">\n          <table class="table">\n            <thead>\n              <tr>\n                <th>Date</th>\n                <th>Status</th>\n                <th>Location</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody data-bind="foreach: exports">\n              <tr>\n                <td data-bind="text: dateAdded"></td>\n                <td><span data-bind="class: statusClass"></span></td>\n                <td data-bind="text: location" class="break-long-url"></td>\n                <td>\n                  <span\n                    class="fa fa-info-circle fa-lg more-info"\n                    data-bind="click: $parent.showDetails"\n                  ></span>\n                </td>\n              </tr>\n            </tbody>\n            <tbody data-bind="visible: !hasExports()">\n              <tr>\n                <td colspan="5">No exports found</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    <div\n      class="alert alert-warning"\n      data-bind="visible: hasError, text: error"\n    ></div>\n    <div class="loading-indicator-overlay" data-bind="visible: pending">\n      <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n    </div>\n  </div>\n  \x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Components/Form/CheckboxInput.html",[],function(){return'<div>\n  <div class="checkbox" data-bind="css: {\'disabled\': disabled}">\n    <label>\n      <input\n        type="checkbox"\n        data-bind="attr: {id: id}, hasFocus: focus, checked: input,\n                                              disable: disabled, event: {blur: validate, focus: clearError}"\n      />\n      <span data-bind="html: label"></span>\n    </label>\n    <div data-bind="css: {\'has-error\': hasError}">\n      <div\n        class="help-block"\n        data-bind="visible: hasError, text: errorText"\n      ></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Components/Form/ColorInput.html",[],function(){return'<ion-color-input\n  data-bind="attr: {id: id, label: label}, value: _hexString"\n></ion-color-input>\n'}),define("text!Views/Components/Form/DateInput.html",[],function(){return'<input\n  class="form-control"\n  type="text"\n  data-bind="attr: {id: id}, dateTimePicker: input, dateTimePickerOptions: dateTimePickerOptions, type: type, hasFocus: focus, disable: disabled, event: {blur: validate, focus: clearError}"\n/>\n'}),define("text!Views/Components/Form/FormColumn.html",[],function(){return'<div class="form-table" data-bind="foreach: fields">\n  \x3c!-- ko compose: $data --\x3e\x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Components/Form/FormColumnRow.html",[],function(){return'<div class="form-table-row" data-bind="css: groupClassName">\n  <div class="form-table-cell">\n    <label data-bind="attr: {for: id}, text: label"></label\n    >\x3c!-- ko if: hasLabelAddon --\x3e\x3c!-- ko compose: labelAddon --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e\n  </div>\n  <div class="form-table-cell" data-bind="css: {\'has-error\': hasError}">\n    \x3c!-- ko compose: formInputUrl --\x3e\x3c!-- /ko --\x3e\n    <span class="error-text" data-bind="text: errorText"></span>\n  </div>\n</div>\n'}),define("text!Views/Components/Form/FormGroup.html",[],function(){return'<div\n  class="form-helper-group form-group"\n  data-bind="css: {\'has-error\': hasError}"\n>\n  \x3c!-- ko if: hasLabel --\x3e\n  <label data-bind="attr: {for: id}, html: label"></label\n  >\x3c!-- ko if: hasLabelAddon --\x3e\x3c!-- ko compose: labelAddon --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e<span\n    class="error-text"\n    data-bind="text: errorText"\n  ></span>\n  \x3c!-- ko compose: formInputUrl --\x3e\x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Components/Form/MarkdownTextArea.html",[],function(){return'<div class="markdown-text-area">\n  <ul class="nav nav-tabs">\n    <li class="active text-center">\n      <a\n        class="write-tab"\n        data-toggle="tab"\n        data-bind="attr: {href: \'#\' + writeTabId}"\n        >Write</a\n      >\n    </li>\n    <li class="text-center">\n      <a\n        class="preview-tab"\n        data-toggle="tab"\n        data-bind="attr: {href: \'#\' + previewTabId}"\n        >Preview</a\n      >\n    </li>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane active" data-bind="attr: {id: writeTabId}">\n      \x3c!-- ko compose: \'Views/Components/Form/TextArea.html\' --\x3e\x3c!-- /ko --\x3e\n      <a\n        class="small"\n        href="https://guides.github.com/features/mastering-markdown/"\n        rel="noopener"\n        target="_blank"\n        >Supports Markdown styling</a\n      >\n    </div>\n    <div\n      class="tab-pane markdown-text-area-preview"\n      data-bind="attr: {id: previewTabId}"\n    >\n      <span class="default-text" data-bind="visible: !hasHtml()"\n        >Nothing to preview</span\n      >\n      <div data-bind="html: htmlPreview, visible: hasHtml"></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Components/Form/NumberInput.html",[],function(){return'<input\n  class="form-control"\n  type="number"\n  data-bind="attr: {id: id, readonly: readonly, min: minimum, max: maximum, step: step}, hasFocus: focus,\n                                                     textInput: input, disable: disabled, event: {blur: validate, focus: clearError}"\n/>\n'}),define("text!Views/Components/Form/NumberInputAddonAfter.html",[],function(){return'<div class="input-group">\n  \x3c!-- ko compose: \'Views/Components/Form/NumberInput.html\' --\x3e\n  \x3c!-- /ko --\x3e\n  <div class="input-group-addon" data-bind="text: addonAfter"></div>\n</div>\n'}),define("text!Views/Components/Form/NumberInputAddonBefore.html",[],function(){return'<div class="input-group">\n  <div class="input-group-addon" data-bind="text: addonBefore"></div>\n  \x3c!-- ko compose: \'Views/Components/Form/NumberInput.html\' --\x3e\x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Components/Form/NumberRangeInput.html",[],function(){return'<div class="range-input">\n  <input\n    type="range"\n    data-bind="attr: {min: minimum, max: maximum, step: step}, event: {blur: validate, focus: clearError}, value: input, valueUpdate: \'input\', disable: disabled"\n  />\n  \x3c!-- ko compose: \'Views/Components/Form/NumberInput.html\' --\x3e\x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Components/Form/PasswordInput.html",[],function(){return'<input\n  class="form-control"\n  type="password"\n  data-bind="attr: {id: id}, textInput: input, hasFocus: focus,\n                                                       disable: disabled, event: {blur: validate, focus: clearError}"\n/>\n'}),define("text!Views/Components/Form/RadioButton.html",[],function(){return'<div class="radio-input-group" data-bind="foreach: options">\n  <label\n    class="radio-button"\n    data-bind="css: {\'selected\': $parent.input() === value}, style: {width: $parent.width, height: $parent.width}, hasFocus: focus"\n  >\n    <input\n      type="radio"\n      data-bind="attr: {name: $parent.id}, checkedValue: value, checked: $parent.input"\n    />\n    \x3c!-- ko if: hasImage --\x3e\n    \x3c!-- ko if: imageIsIcon --\x3e\n    <div\n      class="fa fa-3x"\n      data-bind="css: image, style: {width: $parent.imgWidth, height: $parent.imgWidth}"\n    ></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko ifnot: imageIsIcon --\x3e\n    \x3c!-- htmllint img-req-alt="false" --\x3e\n    <img\n      data-bind="attr: {\'src\': image}, style: {width: $parent.imgWidth, height: $parent.imgWidth}"\n    />\n    \x3c!-- htmllint img-req-alt="$previous" --\x3e\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n    <div data-bind="css: {\'no-img\': !hasImage}, html: displayText"></div>\n  </label>\n</div>\n'}),define("text!Views/Components/Form/RadioInput.html",[],function(){return'<div class="radio-input-group" data-bind="foreach: options">\n  <label\n    data-bind="css: {\'selected\': $parent.input() === value}, hasFocus: focus"\n  >\n    <input\n      type="radio"\n      data-bind="attr: {name: $parent.id}, checkedValue: value, checked: $parent.input"\n    />\n    <span data-bind="html: displayText"></span>\n  </label>\n</div>\n'}),define("text!Views/Components/Form/SelectInput.html",[],function(){return"<select\n  class=\"form-control\"\n  data-bind=\"attr: {id: id}, hasFocus: focus, disable: disabled, event: {blur: validate, focus: clearError},\n                                        options: options, optionsCaption: caption, optionsText: 'displayText', optionsValue: 'value', value: input,\n                                        optionsAfterRender: setOptionDisable\"\n></select>\n"}),define("text!Views/Components/Form/TextArea.html",[],function(){return'<textarea\n  class="form-control"\n  data-bind="attr: {id: id, placeholder: placeholder, readonly: readonly, rows: rows}, hasFocus: focus, textInput: input,\n                                                   disable: disabled, event: {blur: validate, focus: clearError}"\n></textarea>\n'}),define("text!Views/Components/Form/TextInput.html",[],function(){return'<input\n  class="form-control"\n  type="text"\n  data-bind="attr: {id: id, placeholder: placeholder, readonly: readonly}, hasFocus: focus,\n                                                   textInput: input, disable: disabled, event: {blur: validate, focus: clearError}"\n/>\n'}),define("text!Views/Components/Form/TextInputAddonAfter.html",[],function(){return'<div class="input-group">\n  \x3c!-- ko compose: \'Views/Components/Form/TextInput.html\'--\x3e\x3c!-- /ko --\x3e\n  <div class="input-group-addon" data-bind="text: addonAfter"></div>\n</div>\n'}),define("text!Views/Components/Form/TextInputAddonBefore.html",[],function(){return'<div class="input-group">\n  <div class="input-group-addon" data-bind="text: addonBefore"></div>\n  \x3c!-- ko compose: \'Views/Components/Form/TextInput.html\'--\x3e\x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Components/Form/ToggleInput.html",[],function(){return'<div class="toggle-input" data-bind="css: {\'disabled\': disabled}">\n  <div class="toggle-input-button">\n    <div\n      class="toggle-button"\n      data-bind="click: toggle, css:{\'toggle-button-selected\': input}"\n    >\n      <button\n        type="button"\n        data-bind="click: toggle, clickBubble: false, attr: {\'aria-label\': label}"\n      ></button>\n    </div>\n  </div>\n  <div class="toggle-button-text" data-bind="html: helperText"></div>\n</div>\n'}),define("text!Views/Components/LicenseTracking/SignatureSubform.html",[],function(){return'<fieldset class="fieldset-with-hr">\n  <legend>License</legend>\n  <div class="row" data-bind="if: editable">\n    <div class="col-xs-5" data-bind="compose: fields.licenseType"></div>\n    \x3c!-- ko if: isStandard --\x3e\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: fields.licenseVersion"\n    ></div>\n    \x3c!-- /ko --\x3e\n  </div>\n  <div class="row" data-bind="if: editable">\n    <div class="col-xs-5" data-bind="compose: fields.licenseeName"></div>\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: fields.licenseeEmail"\n    ></div>\n  </div>\n  <div class="row" data-bind="if: editable">\n    \x3c!-- ko if: isStandardPaid --\x3e\n    <div class="col-xs-5" data-bind="compose: fields.gracePeriodExpires"></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: isCustom --\x3e\n    <div class="col-xs-5" data-bind="compose: fields.customExpires"></div>\n    \x3c!-- /ko --\x3e\n  </div>\n  <div class="row" data-bind="if: editable">\n    \x3c!-- ko ifnot: isCustom --\x3e\n    <div class="col-xs-5" data-bind="compose: fields.accept"></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: acceptRequired --\x3e\n    \x3c!-- ko if: isCustom --\x3e\n    <div class="col-xs-5" data-bind="compose: fields.acceptanceDate"></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko ifnot: isCustom --\x3e\n    <div\n      class="col-xs-5 col-xs-offset-1"\n      data-bind="compose: fields.acceptanceDate"\n    ></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n  </div>\n  <div class="row" data-bind="if: none">\n    No license signature\n    <button class="btn btn-primary" type="button" data-bind="click: create">\n      Create\n    </button>\n  </div>\n</fieldset>\n'}),define("text!Views/Components/OnScreenHelp/OnScreenHelp.html",[],function(){return'<div\n  class="fill-absolute on-screen-overlay"\n  data-bind="css: {\'welcome-modal\': isModal, \'on-screen-overlay-left\': left}"\n>\n  <div\n    class="on-screen-menu tutorial-list on-screen-help-panel"\n    data-bind="css: {\'on-screen-menu-visible\': visible}"\n  >\n    <div data-bind="foreach: tutorialMenu">\n      <a\n        class="btn btn-primary on-screen-help-list-button"\n        data-bind="text: name, attr: { href: url }"\n        target="_blank"\n        rel="noopener"\n      ></a>\n    </div>\n  </div>\n  <div\n    class="on-screen-help on-screen-help-panel"\n    data-bind="css: {\'on-screen-help-visible\': helpVisible}"\n  >\n    <span\n      class="fa fa-times"\n      data-bind="visible: allowClose, click: hide"\n    ></span>\n    <div data-bind="compose: currentTutorial"></div>\n  </div>\n</div>\n'}),define("text!Views/Components/OnScreenHelp/SlideDeck.html",[],function(){return'<div class="on-screen-help-container">\n  <div class="clearfix" data-bind="with: currentPage">\n    \x3c!-- ko if: hasContent --\x3e\n    <div\n      class="on-screen-help-image"\n      data-bind="visible: hasImage, css: {\'on-screen-help-image-caption\': hasCaption}"\n    >\n      <img data-bind="attr:{src: imageSrc}" />\n      <div data-bind="visible: hasCaption, text: caption"></div>\n    </div>\n    <div class="on-screen-help-content">\n      <h3 data-bind="text: title, visible: hasTitle"></h3>\n      <div data-bind="html: content"></div>\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko ifnot: hasContent --\x3e\n    <div data-bind="compose: $data"></div>\n    \x3c!-- /ko --\x3e\n  </div>\n  <div class="page-buttons" data-bind="with: currentPage">\n    \x3c!-- ko foreach: buttons --\x3e\n    <button\n      class="btn"\n      type="button"\n      data-bind="click: click, html: html, attr: {title: title}, css: css"\n    ></button>\n    \x3c!-- /ko --\x3e\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AddDataShell.html",[],function(){return'<div class="fill-absolute add-data">\n  <div class="add-data-content" data-bind="compose: assetUpload"></div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetUpload.html",[],function(){return'<div class="asset-upload">\n  <div class="add-data-title">\n    <div class="h1">Add Data</div>\n    <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n  </div>\n  <div class="clearfix">\n    \x3c!-- ko if: showError() --\x3e\n    <div class="alert alert-danger" data-bind="text: errorText"></div>\n    \x3c!-- /ko --\x3e\n    <div class="pull-left add-data-column">\n      <div\n        class="add-data-section"\n        data-bind="visible: !showFilePanel() && cloudImportMode() === \'NONE\' && !showPrefixPanel() && !sketchfabMode()"\n      >\n        <div class="alert alert-info">\n          <p>\n            <span class="fa fa-lg fa-info-circle"></span> You can drag and drop\n            multiple files and directories onto this page. Zip files are also\n            supported.\n            \x3c!-- ko if: isPublicInternetAccessEnabled --\x3e\n            See\n            <a\n              href="https://cesium.com/learn/3d-tiling/tiler-data-formats/"\n              target="_blank"\n              rel="noopener"\n              >Tiler Data Types and Formats</a\n            >\n            for more information.\n            \x3c!-- /ko --\x3e\n          </p>\n        </div>\n        <div id="uploadSourceButtons">\n          <label class="btn btn-primary" for="fileSelectorInput"\n            >Add files...</label\n          >\n          <input\n            id="fileSelectorInput"\n            class="file-selector-input"\n            type="file"\n            multiple\n            data-bind="event: { change: onFileSelect }"\n          />\n          \x3c!-- ko if: isAssetImportS3Enabled --\x3e\n          <button\n            class="btn btn-primary"\n            type="button"\n            data-bind="click: addFromS3"\n          >\n            Add from S3...\n          </button>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isAssetImportAzureEnabled --\x3e\n          <button\n            class="btn btn-primary"\n            type="button"\n            data-bind="click: addFromAzure"\n          >\n            Add from Azure...\n          </button>\n          \x3c!-- /ko --\x3e\n\n          \x3c!-- ko if: isSketchfabAccountLinked() --\x3e\n          <button\n            class="btn btn-primary"\n            type="button"\n            data-bind="click: addFromSketchfab"\n          >\n            Add from Sketchfab...\n          </button>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isSketchfabImportEnabled() && !isSketchfabAccountLinked() --\x3e\n\n          \x3c!--  ko compose: linkSketchfabAccountButton--\x3e\n          \x3c!-- /ko --\x3e\n\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: isPremium() &&  isAssetDepotFromPrefixEnabled--\x3e\n          <button\n            class="btn btn-primary"\n            type="button"\n            data-bind="click: addFromPrefix"\n          >\n            Add from prefix\n          </button>\n          \x3c!-- /ko --\x3e\n        </div>\n      </div>\n      <div class="add-data-section" data-bind="visible: showFilePanel">\n        <div class="panel panel-default">\n          <div class="panel-body">\n            <div\n              id="assetUploadFiles"\n              class="add-data-file-panel upload-data-table"\n            >\n              <div class="table-responsive">\n                <table class="table">\n                  <thead>\n                    <tr>\n                      <th>Files</th>\n                      <th>Size</th>\n                      <th class="text-center">Remove</th>\n                    </tr>\n                  </thead>\n                  <tbody data-bind="foreach: files">\n                    \x3c!-- ko if: visible --\x3e\n                    <tr data-bind="attr:{id: domId}">\n                      <td\n                        class="add-data-table-name"\n                        data-bind="attr:{title: path}"\n                      >\n                        <span\n                          class="fa fa-warning text-warning"\n                          data-bind="visible: warning, attr: {title: warningMessage}"\n                        ></span>\n                        <span data-bind="text: path"></span>\n                      </td>\n                      <td>\n                        <span\n                          data-bind="text: $parent.bytesToString(size)"\n                        ></span>\n                      </td>\n                      <td class="text-center">\n                        <span\n                          class="fa fa-lg fa-trash"\n                          data-bind="click: $parent.removeFile"\n                        ></span>\n                      </td>\n                    </tr>\n                    \x3c!-- /ko --\x3e\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <label class="btn btn-primary btn-xs" for="fileSelectorInput2"\n              >Add files...</label\n            >\n            <input\n              id="fileSelectorInput2"\n              class="file-selector-input"\n              type="file"\n              multiple\n              data-bind="event: { change: onFileSelect }"\n            />\n          </div>\n        </div>\n      </div>\n      <div\n        class="add-data-section"\n        data-bind="visible: cloudImportMode() === \'S3\'"\n      >\n        <div data-bind="compose: s3Panel"></div>\n      </div>\n      <div\n        class="add-data-section"\n        data-bind="visible: cloudImportMode() === \'AZURE\'"\n      >\n        <div class="panel panel-body">\n          \x3c!-- ko compose: azurePanel --\x3e\x3c!-- /ko --\x3e\n        </div>\n      </div>\n      <div\n        class="add-data-section"\n        data-bind="visible: sketchfabMode() && !showError()"\n      >\n        <div\n          data-bind="compose: sketchfabForm, visible:! isProcessingSketchfab()"\n        ></div>\n        <div\n          data-bind="visible: isProcessingSketchfab"\n          class="spinner-container sketchfab-model-container panel panel-default"\n        >\n          <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n          <div class="loading-message">Loading...</div>\n        </div>\n      </div>\n    </div>\n    <div\n      class="pull-left add-data-column"\n      data-bind="visible: (showFilePanel() || cloudImportMode() !== \'NONE\' || showPrefixPanel() || sketchfabMode()) && !showError()"\n    >\n      <div class="add-data-section">\n        <div class="panel panel-default">\n          <div class="panel-body">\n            \x3c!-- ko compose: nameField --\x3e\x3c!-- /ko --\x3e\n            \x3c!-- ko if: isPremium --\x3e\n            \x3c!-- ko compose: descriptionField --\x3e\x3c!-- /ko --\x3e\n            \x3c!-- ko compose: defaultToggle --\x3e\x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: showPrefixPanel --\x3e\n            \x3c!-- ko compose: prefixField --\x3e\x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n            <div class="add-data-select-type">\n              <div data-bind="compose: sourceSelect"></div>\n            </div>\n            \x3c!-- ko if: isAssetArchivesEnabled --\x3e\n            <div class="form-group">\n              <div\n                data-bind="compose: archiveToggleField, visible: isArchivable() && hasValidSource() && !isPremium() && !isAdmin()"\n              ></div>\n            </div>\n            <div\n              class="alert alert-info"\n              data-bind="visible: !isArchivable() && !isPremium() && !isAdmin()"\n            >\n              <span class="fa fa-lg fa-info-circle"></span>\n              <span\n                >Downloads are not available with the selected options.</span\n              >\n            </div>\n            \x3c!-- /ko --\x3e\n            <div class="alert alert-info" data-bind="visible: hasValidSource">\n              <span class="fa fa-lg fa-info-circle"></span>\n              <span data-bind="html: tooltip"></span>\n            </div>\n            <div\n              class="alert alert-warning"\n              data-bind="visible: showSelectedTypeMessage"\n            >\n              <span class="fa fa-warning"></span> Please select a data type from\n              the list above.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="pull-left add-data-column" data-bind="visible: showAssetForm">\n      <div class="add-data-section">\n        <div data-bind="compose: assetForm"></div>\n      </div>\n    </div>\n  </div>\n  <div class="clearfix">\n    <div class="add-data-column">\n      <div\n        class="add-data-section"\n        data-bind="foreach: errorMessages, visible: hasErrors"\n      >\n        <div class="alert alert-warning">\n          <span class="fa fa-warning"></span>&nbsp;<span\n            data-bind="html: $data"\n          ></span>\n        </div>\n      </div>\n      \x3c!-- ko if: !showError() --\x3e\n      <button\n        id="uploadButton"\n        class="btn btn-primary"\n        type="button"\n        data-bind="click: upload, attr: {title: uploadButtonTooltip}, visible: showFilePanel() || cloudImportMode() !== \'NONE\' || showPrefixPanel() || sketchfabMode()"\n      >\n        Upload\n      </button>\n      \x3c!-- /ko --\x3e\n      <button class="btn btn-default" type="button" data-bind="click: cancel">\n        Cancel\n      </button>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/S3Form.html",[],function(){return'<div class="panel panel-default s3-form">\n  <div class="panel-body">\n    <form class="form">\n      <div class="row">\n        <div class="col-xs-12" data-bind="compose: accessKey"></div>\n        <div class="col-xs-12" data-bind="compose: secretAccessKey"></div>\n        <div class="col-xs-12" data-bind="compose: sessionToken"></div>\n        <div class="col-xs-12" data-bind="compose: bucket"></div>\n        <div class="col-xs-12" data-bind="compose: prefix"></div>\n      </div>\n      <div class="row">\n        <div class="col-xs-12" data-bind="compose: preview"></div>\n      </div>\n    </form>\n    <div class="alert alert-warning" data-bind="visible: hasError">\n      <span class="fa fa-warning"></span>\n      <span data-bind="text: errorMessage"></span>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/SketchfabForm.html",[],function(){return'<div\n  class="panel panel-default sketchfab-model-container"\n  data-bind="compose: card"\n></div>\n'}),define("text!Views/Dashboard/Assets/AssetDetails.html",[],function(){return'<div class="container-fluid details assets-details">\n  <div class="row">\n    <div class="col-xs-12 details-header">\n      <div\n        class="pull-right details-delete"\n        data-bind="css: {\'disabled\': pending}"\n      >\n        <a\n          class="btn btn-flat btn-default"\n          data-bind="compose: deleteButton"\n        ></a>\n      </div>\n      <a\n        class="visible-xs pull-left details-close btn btn-flat btn-default"\n        data-bind="click: unselect"\n      >\n        <div class="fa fa-lg fa-arrow-left"></div>\n        <div class="small">Back</div>\n      </a>\n      <div class="details-title" data-bind="css:{\'premium\': isPremium}">\n        <span\n          class="h2"\n          data-bind="text: nameText, attr:{title: nameText}"\n        ></span>\n      </div>\n    </div>\n  </div>\n  <div\n    class="row details-button-row"\n    data-bind="visible: !assetViewer.webglError, css: {\'disabled\': pending}"\n  >\n    <div\n      class="col-xs-12"\n      data-bind="visible: canInspect() && !isModel(), attr: {\'title\': transformEditorTitle}, css: {\'disabled\': transformEditorDisabled}"\n    >\n      <a class="btn btn-default btn-flat" data-bind="click: openTransformEditor"\n        >Adjust Tileset Location</a\n      >\n    </div>\n  </div>\n  <div class="row">\n    <div\n      class="col-xs-12 assets-details-preview"\n      data-bind="compose: assetViewer, css: {\'webgl-error\': assetViewer.webglError, \'in-progress\': assetViewer.inProgress}"\n    ></div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12">\n      <ul class="row nav nav-tabs">\n        <li\n          class="active text-center"\n          data-bind="css: tabsCss, visible: showSourcesTab() || showExportsTab()"\n        >\n          <a class="info-tab" data-toggle="tab" href="#infoTab">Information</a>\n        </li>\n        <li\n          class="text-center"\n          data-bind="css: tabsCss, visible: showSourcesTab()"\n        >\n          <a\n            class="sources-tab"\n            data-toggle="tab"\n            href="#sourcesTab"\n            data-bind="text: sourcesText"\n          ></a>\n        </li>\n        <li\n          class="text-center"\n          data-bind="css: tabsCss, visible: showExportsTab()"\n        >\n          <a class="exports-tab" data-toggle="tab" href="#exportsTab"\n            >Exports</a\n          >\n        </li>\n      </ul>\n      <div class="tab-content details-info">\n        <div id="infoTab" class="tab-pane active">\n          <div class="pull-right">\n            (ID:\n            <span class="details-pane-value" data-bind="text: assetId"></span>)\n          </div>\n          <div data-bind="visible: enableEdit">\n            <div\n              data-bind="compose: nameField"\n              data-testid="asset-name-edit"\n            ></div>\n            <ion-markdown-edit-field\n              data-testid="asset-description-edit"\n              data-bind="value: descriptionText, attr: { disabled: pending }"\n              placeholder="No description provided"\n              label="Description"\n            ></ion-markdown-edit-field>\n            <ion-markdown-edit-field\n              data-testid="asset-attribution-edit"\n              data-bind="value: attributionText, attr: { disabled: pending }"\n              use-inline-html=""\n              placeholder="No attribution provided"\n              label="Attribution"\n            ></ion-markdown-edit-field>\n          </div>\n          <div\n            data-bind="visible: showAnalyzeButton"\n            class="analyze-asset-section"\n          >\n            \x3c!-- ko compose: analyzeButton--\x3e\n            \x3c!-- /ko --\x3e\n          </div>\n          <div data-bind="visible: !enableEdit()">\n            <label class="control-label">Name</label>\n            <div\n              class="assets-details-premium-text"\n              data-bind="text: nameText"\n            ></div>\n            <label class="control-label">Description</label>\n            <div\n              class="assets-details-premium-text"\n              data-bind="html: descriptionHtml"\n            ></div>\n            \x3c!-- ko if: attributionText() !== "" --\x3e\n            <label class="control-label">Attribution</label>\n            <div\n              class="assets-details-premium-text"\n              data-bind="html: attributionHtml"\n            ></div>\n            \x3c!-- /ko --\x3e\n          </div>\n          \x3c!-- ko if: areLabelsEnabled --\x3e\n          <div class="form-group">\n            <div class="control-label">\n              Labels\n              \x3c!-- ko compose: labelPicker --\x3e\n              \x3c!-- /ko --\x3e\n            </div>\n            <div class="label-group">\n              \x3c!-- ko foreach: labels --\x3e\n              <a\n                class="label label-tag"\n                data-bind="click: $parent.setLabel, text: name, attr: {\'title\': name}, style: {\'background-color\': colorString}, css: className"\n              ></a>\n              \x3c!-- /ko --\x3e\n            </div>\n          </div>\n          \x3c!-- /ko --\x3e\n          \x3c!-- ko if: areAssetArchivesEnabled --\x3e\n          <div class="form-group">\n            <div\n              data-bind="compose: archiveToggleField, visible: isArchivable()"\n            ></div>\n            <div\n              class="asset-viewer-progress-bar"\n              data-bind="visible: archiveStatus() !== \'COMPLETE\' && !archiveError()\n              && archiveToggled() && isArchivable(), compose: progressBar"\n            ></div>\n            <div\n              class="alert alert-danger"\n              data-bind="visible: archiveError() && archiveToggled()"\n            >\n              <span>\n                <span class="fa fa-warning"> </span> There was an error while\n                processing the asset to be downloaded. Use the toggle to start\n                the process again.</span\n              >\n            </div>\n            <div class="alert alert-info" data-bind="visible: !isArchivable()">\n              <span>\n                <span class="fa fa-info-circle"> </span> Downloads are not\n                available for this asset.</span\n              >\n            </div>\n          </div>\n          \x3c!-- /ko  --\x3e\n          <div class="form-group" data-bind="hidden: isVriconPromotionAsset()">\n            <div class="control-label">Code</div>\n            <div\n              class="fa fa-copy fa-lg pull-right"\n              title="Copy to clipboard"\n              data-bind="clipboardCopy : { data: code, message: \'Code copied to clipboard\'}"\n            ></div>\n            <div data-bind="html: codeHtml"></div>\n            \x3c!-- ko if: isPublicInternetAccessEnabled --\x3e\n            <a\n              data-bind="attr: { href: sandcastleUrl }"\n              target="_blank"\n              rel="noopener"\n              >Open complete code example</a\n            >\n            \x3c!-- /ko --\x3e\n          </div>\n        </div>\n        <div\n          id="sourcesTab"\n          class="tab-pane"\n          data-bind="visible: showSourcesTab()"\n        >\n          <div data-bind="visible: !isExternal(), compose: sourcesTable"></div>\n          <div\n            data-bind="visible: isExternal(), compose: configurationTable"\n          ></div>\n        </div>\n        <div\n          id="exportsTab"\n          class="tab-pane"\n          data-bind="visible: showExportsTab()"\n        >\n          <div data-bind="compose: assetExportsShell"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/Assets/AssetsShell.html",[],function(){return'<div id="assetsShell" class="fill-absolute">\n  <div id="assetDropzone" class="drop-mask fill-absolute hidden"></div>\n  <div class="fill-absolute assets">\n    <div class="dashboard container-fluid fill-absolute">\n      <div class="row-eq-height fill-absolute">\n        <div\n          class="disabled-overlay details-pane-expanded"\n          data-bind="visible: disabled"\n        ></div>\n        <div\n          class="pane-left dashboard-pane"\n          data-bind="class: showDetails() ? \'details-pane-expanded\' : \'\'"\n        >\n          <div class="container-fluid dashboard-list">\n            <div class="dashboard-list-heading">\n              <ion-message-of-the-day></ion-message-of-the-day>\n              <div class="dashboard-row-one">\n                <div class="h1 dashboard-title">My Assets</div>\n                <div class="dashboard-help">\n                  <div data-bind="compose: contextualHelp"></div>\n                </div>\n              </div>\n              <div class="dashboard-new-button">\n                <button\n                  class="btn btn-primary"\n                  type="button"\n                  data-bind="click: onAddData"\n                >\n                  Add data\n                </button>\n                \x3c!-- ko if: billingEnabled --\x3e\n                <div>\n                  <div\n                    class="well dashboard-list-toolbar-quota pull-left"\n                    data-bind="css: planDetails.css"\n                  >\n                    <span data-bind="text: planDetails.usage"></span>\n                  </div>\n                </div>\n\n                <div class="dashboard-list-toolbar-quota pull-left small">\n                  <a href="account/billing">Get more storage</a>\n                </div>\n                \x3c!-- /ko --\x3e\n              </div>\n\n              \x3c!-- ko compose: assetFilterToolbar --\x3e\x3c!-- /ko --\x3e\n            </div>\n            <div\n              data-bind="css: { \'dashboard-list-content\':true, \'show-quota\': billingEnabled}"\n            >\n              <div data-bind="visible: isError">\n                <div class="alert alert-danger">\n                  There was an error loading the content\n                </div>\n              </div>\n              <div\n                class="loading-indicator-overlay"\n                data-bind="visible: isInProgress"\n              >\n                <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n                <div class="loading-message">Loading...</div>\n              </div>\n              <div class="row" data-bind="visible: isReady">\n                <div class="col-xs-12">\n                  <div id="dashboardTable">\n                    <div class="row">\n                      <div\n                        class="col-xs-12 dashboard-table-container"\n                        data-bind="compose: \'Views/Dashboard/Assets/AssetsTable.html\'"\n                      ></div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          class="dashboard-pane details-pane"\n          data-bind="compose: multiSelectPane, visible: selectedIndices().length > 1"\n        ></div>\n        <div\n          class="dashboard-pane details-pane"\n          data-bind="compose: detailsPane, visible: selectedIndices().length === 1"\n        ></div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/Assets/AssetsTable.html",[],function(){return'<div class="container-fluid dashboard-table">\n  \x3c!-- ko compose: assetsGrid --\x3e\x3c!-- /ko --\x3e\n  <nav class="pagination-nav">\n    <ul class="pagination">\n      <li data-bind="css: {disabled: !hasPrevious()}">\n        <a data-bind="click: loadPrevious">\n          <span aria-hidden="true">&laquo; Previous</span>\n        </a>\n      </li>\n      <li data-bind="css: {disabled: !hasNext()}">\n        <a data-bind="click: loadNext">\n          <span aria-hidden="true">Next &raquo;</span>\n        </a>\n      </li>\n    </ul>\n    <p data-bind="visible: totalCount() !== undefined">\n      <span data-bind="text: totalCount"></span> assets total\n    </p>\n  </nav>\n</div>\n'}),define("text!Views/Dashboard/PremiumAssets/PremiumAssetDetails.html",[],function(){return'<div class="container-fluid premium-assets-details details">\n  <div class="row">\n    <div class="col-xs-12 details-header">\n      <a\n        class="visible-xs pull-left details-close btn btn-flat btn-default"\n        data-bind="click: unselect"\n      >\n        <div class="fa fa-lg fa-arrow-left"></div>\n        <div class="small">Back</div>\n      </a>\n      \x3c!-- ko if: selectedAsset() !== undefined --\x3e\n      <div class="details-title">\n        <span\n          class="h2"\n          data-bind="text: selectedAsset().name, attr:{title: selectedAsset().name}"\n        ></span>\n      </div>\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n  \x3c!-- ko if: selectedAsset() !== undefined --\x3e\n  <div class="row">\n    <div\n      class="col-xs-12 assets-details-preview"\n      data-bind="compose: assetViewer, css: {\'webgl-error\': assetViewer.webglError, \'in-progress\': assetViewer.inProgress}"\n    ></div>\n  </div>\n  \x3c!-- ko compose: details --\x3e\x3c!-- /ko --\x3e\n  \x3c!-- /ko --\x3e\n</div>\n'}),define("text!Views/Dashboard/PremiumAssets/PremiumAssetTermsOfService.html",[],function(){return'<div class="secondary-panel create-token">\n  \x3c!-- ko if: license() === \'NEARMAP\' --\x3e\n  <div class="h1">NEARMAP TERMS OF USE</div>\n  <div class="data-provider-terms">\n    <ol type="1">\n      <li>\n        USE OF PRODUCTS 1.1 Use of Products Subject to your compliance with\n        these Terms of Use, Nearmap US, Inc. ("Nearmap") grants to you a\n        limited, non-exclusive, non-transferrable, revocable licence to use the\n        data distributed by Cesium GS, Inc. ("Cesium") on behalf of Nearmap\n        through the Cesium Platform subject to any additional terms that Nearmap\n        specifies and only for the Permitted Purpose. You may only access and\n        use the Products for the Permitted Purpose. Nearmap reserves the rights\n        to terminate access to the Products at any time and for any reason in\n        its sole discretion, without any liability to you. You are not permitted\n        to make the Products available in any medium or manner to any third\n        party. 1.2 Users The Products are only to be used by you, in your\n        capacity as an Authorised User in accordance with these Terms of Use.\n        1.3 Acknowledge Nearmap source Authorised Users must not remove or cause\n        to be removed any Nearmap logo, watermark or other Nearmap attribution\n        in any Products. 1.4 Unauthorised User You shall take reasonable steps\n        to prevent unauthorised access to the Products, including without\n        limitation protecting your passwords and other log-in information to the\n        Cesium Platform. You shall notify Nearmap immediately of any known or\n        suspected unauthorised use of the Products or breach of your security\n        and shall use best efforts to stop such breaches. 1.5 No Machine\n        Learning You must not conduct machine learning work on the Products\n        which includes but is not limited to any: (a) machine learning models\n        (including the model form and model parameters); (b) outputs of machine\n        learning models; (c) software that processes or transforms input data\n        for training a machine learning model or getting a prediction from a\n        machine learning model into a format suitable for training or making\n        such prediction; or (d) software used to train a machine learning model\n        or compute outputs of a machine learning model for a given set of input\n        data.\n      </li>\n\n      <li>\n        TERMINATION Termination by Nearmap may, in its sole discretion prevent\n        Cesium from distributing access to our Products for any reason,\n        including without limitation, if Nearmap believes that you have breached\n        these Terms of Use, act in a manner that clearly shows that you do not\n        intend to, or are unable to comply with these Terms of Use.\n      </li>\n\n      <li>\n        INTELLECTUAL PROPERTY 3.1 Ownership Unless otherwise indicated, any\n        products and all associated Intellectual Property Rights, data,\n        information and software are owned by Nearmap and its licensors, and are\n        protected by copyright, moral rights, trademark and other laws relating\n        to the protection of intellectual property. Nearmap reserves all of its\n        Intellectual Property Rights. Except for the limited use granted to you\n        in clause 1.1 in these Terms of Use, no ownership or Intellectual\n        Property Rights in Products will pass to you. 3.2 Trademarks The Nearmap\n        trademarks and all associated Intellectual Property Rights are owned by\n        Nearmap. Nothing in these Terms of Use confers upon you any rights to\n        use or modify any of Nearmap\'s trademarks.\n      </li>\n\n      <li>\n        WARRANTY AND LIABILITY 4.1 DISCLAIMER OF WARRANTIES THE PRODUCTS ARE\n        PROVIDED ON AN "AS IS" AND "AS AVAILABLE" BASIS, WITHOUT ANY WARRANTIES\n        OF ANY KIND TO THE FULLEST EXTENT PERMITTED BY LAW. NEARMAP AND ITS\n        CONTENT PROVIDERS, AGENTS AND AFFILIATES EXPRESSLY DISCLAIM ANY AND ALL\n        WARRANTIES, WHETHER EXPRESS, STATUTORY OR IMPLIED, INCLUDING, BUT NOT\n        LIMITED TO, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, TITLE, FITNESS\n        FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, AND COURSE OF DEALING OR\n        PERFORMANCE. 4.2 NO REPRESENTATIONS WHILE NEARMAP USES REASONABLE\n        EFFORTS TO ENSURE THE ACCURACY, CORRECTNESS AND RELIABILITY OF THE\n        PRODUCTS, NEARMAP MAKES NO REPRESENTATIONS OR WARRANTIES AS TO THE\n        ACCURACY, CORRECTNESS OR RELIABILITY OF ANY PRODUCTS. THE PRODUCTS ARE\n        SUBJECT TO ERRORS, OMISSIONS, INACCURACIES AND DISTORTIONS AND NEARMAP\n        WILL NOT BE RESPONSIBLE FOR, OR LIABLE FOR ANY CLAIMS MADE BY OR ARISING\n        OUT OF, ANY PERSON OR ENTITY SEEKING TO RELY ON ANY OF THE PRODUCTS.\n        NEARMAP SPECIFICALLY DISCLAIMS ANY LIABILITY FOR ANY ACTIONS RESULTING\n        FROM YOUR USE OF ANY PRODUCTS. YOU MAY ACCESS THE PRODUCTS AT YOUR OWN\n        DISCRETION AND RISK, AND YOU ARE SOLELY RESPONSIBLE FOR ANY DAMAGE TO\n        YOUR COMPUTER SYSTEM OR LOSS OF DATA THAT RESULTS FROM THE USE AND ACESS\n        OF THE PRODUCTS. 4.3 NO LIABILITY FOR CLAIMS TO THE EXTENT PERMITTED BY\n        LAW, IN NO EVENT WILL NEARMAP, ITS CONTENT PROVIDERS, AGENTS OR\n        AFFILIATES BE LIABLE FOR ANY CLAIMS OF ANY KIND ARISING FROM OR\n        CONNECTED WITH THE USE OF THE PRODUCTS, OR THE UNAVAILABILITY OF THE\n        SAME, INCLUDING BUT NOT LIMITED TO LOSS OF USE, LOSS OF PROFITS OR LOSS\n        OF DATA, AND DIRECT, INDIRECT, INCIDENTAL, PUNITIVE AND CONSEQUENTIAL\n        DAMAGES, WHETHER IN CONTRACT, TORT (INCLUDING BUT NOT LIMITED TO\n        NEGLIGENCE) OR OTHERWISE. YOU ARE RESPONSIBLE FOR THE ENTIRE COST OF ALL\n        SERVICING, REPAIR OR CORRECTION REQUIRED DUE TO YOUR USE OF THE\n        PRODUCTS. THIS EXCLUSION APPLIES, WITHOUT LIMITATION, TO ANY CLAIMS\n        CAUSED BY OR RESULTING FROM RELIANCE BY A USER ON ANY INFORMATION\n        OBTAINED FROM NEARMAP. 4.4 LIMIT OF LIABILITY IN NO EVENT WILL THE\n        AGGREGATE LIABILITY OF NEARMAP, WHETHER IN CONTRACT, WARRANTY, TORT\n        (INCLUDING NEGLIGENCE, WHETHER ACTIVE, PASSIVE OR IMPUTED), PRODUCT\n        LIABILITY, STRICT LIABILITY OR OTHER THEORY, ARISING OUT OF OR RELATING\n        TO THE USE OF THE PRODUCTS SHALL EXCEED USD$100.\n      </li>\n\n      <li>\n        INDEMNITY YOU AGREE TO INDEMNIFY AND HOLD NEARMAP AND ITS DIRECTORS,\n        OFFICER, EMPLOYEES, AGENTS AND SUBCONTRACTORS, HARMLESS FROM AND AGAINST\n        ANY THIRD PARTY CLAIMS, AND MUST PAY ON DEMAND ALL LOSSES, EXPENSES,\n        DAMAGES AND COSTS (INCLUDING REASONABLE ATTORNEYS\' FEES AND COSTS)\n        SUFFERED OR INCURRED BY NEARMAP, WHICH ARISE OUT OF YOUR USE OF THE\n        PRODUCTS.\n      </li>\n\n      <li>\n        MISCELLANEOUS 6.1 Waiver Any waiver of any terms of these Terms of Use\n        will be effective only if in writing and signed by Nearmap. Any rights\n        not expressly granted herein are reserved. 6.2 Severability If one or\n        more of the terms of these Terms of Use are found to be invalid, illegal\n        or unenforceable in any respect, the validity, legality and\n        enforceability of the remaining terms will not be affected. 6.3\n        Amendments Nearmap reserves the right at any time to amend these Terms\n        of Use and/or to impose new and/or additional terms or conditions on\n        your use of the Products. It is your responsibility to check these Terms\n        of Use periodically for changes. By continuing to use the Products after\n        the revisions come into effect, you agree to be bound by the revised\n        terms. 6.4 Entire Agreement These Terms of Use: (a) comprises the entire\n        agreement and understanding between the parties on everything connected\n        with the subject matter of these Terms of Use; and (b) supersedes any\n        prior agreement or understanding on anything connected with that subject\n        matter. 6.5 Governing Law These Terms of Use are governed by and\n        construed in accordance with the laws of the State of Utah applicable to\n        agreements made and to be entirely performed within the State of Utah,\n        without resort to its conflict of law provisions.\n      </li>\n\n      <li>\n        DEFINITIONS In these Terms of Use: Affiliates means an entity which,\n        directly or indirectly, owns or controls, is owned or is controlled by\n        or is under common ownership or control with a party, where "control"\n        means the power to direct the management or affairs of an entity, and\n        "ownership" means the beneficial ownership of 50% (or, if the applicable\n        jurisdiction does not allow majority ownership, the maximum amount\n        permitted under such law) or more of the voting equity securities or\n        other equivalent voting interests of the entity. Authorised User means\n        any individual person or entity granted access to the Cesium Platform\n        who accepts these Terms of Use and who uses Nearmap\'s Products solely\n        for the Permitted Purpose. Cesium Platform means the platform where an\n        Authorised User is provided with access to the Products through the\n        following web domain: https://cesium.com/cesium-ion/. Claim means any\n        claim, cost (including legal costs on a solicitor and client basis),\n        damages, debt, expense, tax, liability, loss, obligation, allegation,\n        suit, action, demand, cause of action, proceeding or judgment of any\n        kind however calculated or caused, and whether direct or indirect,\n        consequential, incidental or economic. Commercial Purpose means to\n        distribute, transfer, sell, sub-license or pass possession of the\n        Products (in whole or in part) for the purpose of direct commercial\n        benefit or gain by you. Intellectual Property Rights includes all\n        industrial and intellectual property rights throughout the world\n        including copyright, moral rights, trademarks, patents, rights to\n        protect confidential information and any similar rights. Nearmap means\n        Nearmap US, Inc.. Permitted Purpose means the use of Products by an\n        Authorised User for internal purposes in the Authorised User\'s ordinary\n        business, and at all times excludes any: (a) Commercial Purpose; (b)\n        Unlawful Purpose; (c) Integration or attempt to integrate the Products\n        in an internal system of the Authorised User or of a third party; and\n        (d) Redistribution or copying of files, images, photographs or making\n        such files, images or photographs available in any medium or manner that\n        is contained in the Products to any third party (except as expressly\n        permitted under these Terms of Use). Products means the 3D Textured Mesh\n        data and imagery provided to any Authorised User via the Cesium\n        Platform. Terms of Use means these terms. Unlawful Purpose means any\n        unlawful purpose, including but not limited to stalking, harassing or\n        intimidating any person or engaging in misleading or deceptive conduct.\n        You, your or you means Authorised User.\n      </li>\n    </ol>\n  </div>\n  \x3c!-- /ko --\x3e\n\n  \x3c!-- ko if: license() === \'AEROMETREX\' --\x3e\n  <div class="h1">Aerometrex Terms of Service</div>\n  <div class="data-provider-terms">\n    <p>\n      Aerometrex data may only be used for non commercial and evaluation\n      purposes. This data is available for trial and evaluation only.\n    </p>\n\n    <p>\n      Aerometrex grants to the Licensee a non-exclusive, non-transferable,\n      non-assignable, limited license to use the Product for demonstration and\n      evaluation purposes, in accordance with these Terms.\n    </p>\n\n    <p>\n      Licensee acknowledges and agrees that the Product is the property of\n      Aerometrex and contains valuable assets and proprietary information of\n      Aerometrex and its affiliates. Accordingly, Licensee will not, and will\n      not permit any party to:\n    </p>\n\n    <ol type="a">\n      <li>Distribute, sublicense, rent, sell, lease or loan the Product;</li>\n      <li>\n        Distribute, display, or in any way make the Product available to the\n        general public;\n      </li>\n      <li>\n        Use the Product for the business needs of any third party, including\n        without limitation, providing any services to any third parties;\n      </li>\n      <li>\n        Remove, bypass or circumvent any electronic or other form of protection\n        measure included on, in, or with the Product;\n      </li>\n      <li>\n        Delete, alter, cover, obscure, distort, or remove any copyright or\n        trademark notice, copyright or trademark management information, or\n        proprietary legend contained in or on the Product; or\n      </li>\n      <li>\n        Otherwise use, modify, access or reverse-engineer the Product for any\n        purpose not expressly permitted under these Terms.\n      </li>\n    </ol>\n\n    <p>\n      Licensee will defend, indemnify and hold Aerometrex harmless from and\n      against any and all claims that may arise against Aerometrex and/or its\n      affiliates out of Licensee\'s use of the Product.\n    </p>\n\n    <p>\n      THE PRODUCT IS PROVIDED "AS IS", WITHOUT ANY WARRANTY OF ANY KIND, WHETHER\n      EXPRESS, IMPLIED OR STATUTORY, INCLUDING, WITHOUT LIMITATION, WARRANTIES\n      OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, CUSTOM, TRADE, QUIET\n      ENJOYMENT, ACCURACY OF INFORMATION, CONTENT OR RESULTS, OR CONDITIONS\n      ARISING UNDER ANY OTHER LEGAL REQUIREMENT. AEROMETREX DOES NOT WARRANT\n      THAT ITS PRODUCT WILL BE ACCURATE, CURRENT OR COMPLETE, THAT EACH PRODUCT\n      WILL MEET LICENSEE\'S NEEDS OR EXPECTATIONS, OR THAT THE OPERATION OF EACH\n      PRODUCT WILL BE ERROR FREE OR UNINTERRUPTED. FURTHER, SPATIAL, SPECTRAL\n      AND TEMPORAL ACCURACY IS NOT GUARANTEED OR WARRANTED.\n    </p>\n\n    <p>\n      IN NO EVENT WILL AEROMETREX OR ANY AFFILIATE BE LIABLE FOR ANY SPECIAL,\n      INDIRECT, INCIDENTAL, EXEMPLARY, PUNITIVE OR CONSEQUENTIAL DAMAGES,\n      INCLUDING, WITHOUT LIMITATION, LOSS OR DAMAGE TO DATA, INACCURACY OF DATA,\n      LOSS OF ANTICIPATED REVENUE OR PROFITS, DEATH OF OR INJURY TO ANY PERSON\n      WHOMESOEVER, WORK STOPPAGE OR IMPAIRMENT OF OTHER ASSETS OR LOSS OF GOOD\n      WILL, WHETHER OR NOT FORESEEABLE AND WHETHER OR NOT A PARTY HAS BEEN\n      ADVISED OF THE POSSIBILITY OF THE DAMAGES AND NOT WITHSTANDING ANY FAILURE\n      OF THE ESSENTIAL PURPOSE OF THESE TERMS OR ANY LIMITED REMEDY HEREUNDER.\n    </p>\n\n    <p>\n      Licensee is responsible for its own compliance with laws, regulations and\n      other legal requirements applicable to the conduct of its business and\n      these Terms, and agrees to comply with all these laws, regulations and\n      other legal requirements.\n    </p>\n\n    <p>\n      All matters arising out of or relating to use of the Product will be\n      governed by, construed, and enforced in accordance with the laws of the\n      State of Colorado. Any and all actions, suits, or judicial proceedings\n      upon any claim arising from or relating to this Agreement shall be\n      instituted and maintained in the State of Colorado. Each party waives the\n      right to change of venue, or to file any action, suit or judicial\n      proceeding in federal court. Notwithstanding this provision, if it is\n      judicially determined that either party may file an action, suit or\n      judicial proceeding in federal court, such action, suit or judicial\n      proceeding shall be in the Federal District Court for the District of\n      Colorado.\n    </p>\n\n    <p>\n      Aerometrex 5500 Greenwood Plaza Blvd. #130 Greenwood Village, CO, 80111,\n      United States\n    </p>\n  </div>\n  \x3c!-- /ko --\x3e\n\n  \x3c!-- ko if: license() === \'VRICON\' --\x3e\n  <div class="h1">Vricon Terms of Service</div>\n  <div class="data-provider-terms">\n    <p>\n      Vricon data may only be used for commercial and government purposes, and\n      cannot be used in consumer applications. This data is available for trial\n      and evaluation purposes.\n    </p>\n    <p>\n      By subscribing to this asset, you agree that you are a commercial or\n      government entity, that you will not use this asset for consumer use.\n    </p>\n    <p>\n      Vricon grants to Licensee a non-exclusive, non-transferable,\n      non-assignable, limited license to use the Product for demonstrate\n      purposes, in accordance with these Terms.\n    </p>\n    <p>\n      Licensee acknowledges and agrees that the Product is the property of\n      Vricon and contains valuable assets and proprietary information of Vricon\n      and its affiliates. Accordingly, Licensee will not, and will not permit\n      any party to:\n    </p>\n    <ul>\n      <li>a) Distribute, sublicense, rent, sell, lease or loan the Product;</li>\n      <li>\n        b) Distribute, display, or in any way make the Product available to the\n        general public;\n      </li>\n      <li>\n        c) Use the Product for the business needs of any third party, including\n        without limitation, providing any services to any third parties;\n      </li>\n      <li>\n        d) Remove, bypass or circumvent any electronic or other form of\n        protection measure included on, in, or with the Product;\n      </li>\n      <li>\n        e) Delete, alter, cover, obscure, distort, or remove any copyright or\n        trademark notice, copyright or trademark management information, or\n        proprietary legend contained in or on theProduct; or\n      </li>\n      <li>\n        f) Otherwise use, modify, access or reverse-engineer the Product for any\n        purpose not expressly permitted under these Terms.\n      </li>\n    </ul>\n    <p>\n      Licensee will defend, indemnify and hold Vricon harmless from and against\n      any and all claims that may arise against Vricon and/or its affiliates out\n      of Licensee\'s use of the Product.\n    </p>\n    <p>\n      THE PRODUCT IS PROVIDED "AS IS", WITHOUT ANY WARRANTY OF ANY KIND, WHETHER\n      EXPRESS, IMPLIED OR STATUTORY, INCLUDING, WITHOUT LIMITATION, WARRANTIES\n      OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, CUSTOM, TRADE, QUIET\n      ENJOYMENT, ACCURACY OF INFORMATION, CONTENT OR RESULTS, OR CONDITIONS\n      ARISING UNDER ANY OTHER LEGAL REQUIREMENT. VRICON DOES NOT WARRANT THAT\n      ITS PRODUCT WILL BE ACCURATE, CURRENT OR COMPLETE, THAT EACH PRODUCT WILL\n      MEET LICENSEE\'S NEEDS OR EXPECTATIONS, OR THAT THE OPERATION OF EACH\n      PRODUCT WILL BE ERROR FREE OR UNINTERRUPTED. FURTHER, SPATIAL, SPECTRAL\n      AND TEMPORAL ACCURACY IS NOT GUARANTEED OR WARRANTED.\n    </p>\n    <p>\n      IN NO EVENT WILL VRICON OR ANY AFFILIATE BE LIABLE FOR ANY SPECIAL,\n      INDIRECT, INCIDENTAL, EXEMPLARY, PUNITIVE OR CONSEQUENTIAL DAMAGES,\n      INCLUDING, WITHOUT LIMITATION, LOSS OR DAMAGE TO DATA, INACCURACY OF DATA,\n      LOSS OF ANTICIPATED REVENUE OR PROFITS, DEATH OF OR INJURY TO ANY PERSON\n      WHOMESOEVER, WORK STOPPAGE OR IMPAIRMENT OF OTHER ASSETS OR LOSS OF GOOD\n      WILL, WHETHER OR NOT FORESEEABLE AND WHETHER OR NOT A PARTY HAS BEEN\n      ADVISED OF THE POSSIBILITY OF THE DAMAGES AND NOTWITHSTANDING ANY FAILURE\n      OF THE ESSENTIAL PURPOSE OF THESE TERMS OR ANY LIMITED REMEDY HEREUNDER.\n    </p>\n    <p>\n      Licensee is responsible for its own compliance with laws, regulations and\n      other legal requirements applicable to the conduct of its business and\n      these Terms, and agrees to comply with all these laws, regulations and\n      other legal requirements.\n    </p>\n    <p>\n      All matters arising out of or relating to use of the Product will be\n      governed by and construed under the law of the Commonwealth of Virginia,\n      U.S.A., without reference to conflicts of law principles. Any suit, action\n      or proceeding arising out of or relating to use of the Product must be\n      instituted in the United States District Court for the Eastern District of\n      Virginia or the state courts located in Fairfax County.\n    </p>\n    <p>\n      Vricon, Inc.<br />\n      8280 Greensboro Drive, Suite 850<br />\n      McLean, VA 22102<br />\n      vricon.com<br />\n    </p>\n  </div>\n  \x3c!-- /ko --\x3e\n  <div class="create-token-buttons">\n    <button class="btn btn-primary" type="submit" data-bind="click: agree">\n      I agree\n    </button>\n    <button class="btn btn-primary" type="button" data-bind="click: cancel">\n      Cancel\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/PremiumAssets/PremiumAssetsShell.html",[],function(){return'<div class="fill-absolute premium-assets" data-bind="compose: layout"></div>\n'}),define("text!Views/Dashboard/PremiumAssets/PremiumAssetsTable.html",[],function(){return'<div class="container-fluid dashboard-table">\n  <div class="table-responsive">\n    <table class="table table-hover">\n      <thead>\n        <tr>\n          <th>\n            <a data-bind="click: sortBy(\'name\')">\n              Name <span class="fa" data-bind="css: sortStatus(\'name\')"></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'description\')">\n              Description\n              <span\n                class="fa"\n                data-bind="css: sortStatus(\'description\')"\n              ></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'typeText\')">\n              Type\n              <span class="fa" data-bind="css: sortStatus(\'typeText\')"></span>\n            </a>\n          </th>\n          <th class="text-center">Add</th>\n        </tr>\n      </thead>\n      <tbody data-bind="foreach: tableItems">\n        <tr\n          data-bind="css: {\'active\': $data === $parent.selectedItem()}, click: $parent.selectedItem"\n        >\n          <td>\n            <span data-bind="text: name, attr: {title: name}"></span>\n            \x3c!-- ko foreach: labels --\x3e\n            <a\n              class="label label-tag"\n              data-bind="click: $parents[1].setLabel, clickBubble: false, text: name, attr: {\'title\': name}, style: {\'background-color\': colorString}, css: className"\n            ></a>\n            \x3c!-- /ko --\x3e\n          </td>\n          <td>\n            <div\n              class="dashboard-table-clamp"\n              data-bind="text: description"\n            ></div>\n          </td>\n          <td>\n            <div data-bind="text: typeText"></div>\n          </td>\n          <td class="text-center">\n            <button\n              type="button"\n              class="btn btn-default btn-xs"\n              data-bind="click: subscribeClick, visible: !subscribed()"\n            >\n              <span class="fa fa-plus"></span>\n            </button>\n            <span\n              data-bind="visible: subscribed"\n              title="This asset is available on your assets page"\n              >-</span\n            >\n          </td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: hasNoResults">\n        <tr>\n          <td colspan="3">No results</td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: !_hasItems()">\n        <tr>\n          <td colspan="3">No items</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/PremiumAssets/UnsubscribeButton.html",[],function(){return'<div\n  class="pull-left"\n  data-container="body"\n  tabindex="0"\n  role="button"\n  data-toggle="popover"\n  data-bind="attr: {\'id\': id, \'data-placement\': placement}, click: onDeleteClick"\n>\n  <button\n    type="button"\n    class="btn btn-primary"\n    data-bind="text: lowerText, css: {\'disabled\': pending}"\n  ></button>\n</div>\n'}),define("text!Views/Dashboard/Stories/StoriesShell.html",[],function(){return'<div class="fill-absolute" data-bind="compose: layout"></div>\n'}),define("text!Views/Dashboard/Stories/StoriesTable.html",[],function(){return'<div class="container-fluid dashboard-table">\n  <div class="table-responsive">\n    <table class="table table-hover">\n      <thead>\n        <tr>\n          <th>\n            <a data-bind="click: sortBy(\'name\')">\n              Name <span class="fa" data-bind="css: sortStatus(\'name\')"></span>\n            </a>\n          </th>\n          <th>\n            <a data-bind="click: sortBy(\'date\')">\n              Last modified\n              <span class="fa" data-bind="css: sortStatus(\'date\')"></span>\n            </a>\n          </th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody data-bind="foreach: tableItems">\n        <tr\n          data-bind="css: {\'active\': $data === $parent.selectedItem()}, click: $parent.selectedItem, event: {\'dblclick\': $parent.edit}"\n        >\n          <td>\n            <span data-bind="text: name, attr: {title: name}"></span>\n            \x3c!-- ko foreach: labels --\x3e\n            <a\n              class="label label-tag"\n              data-bind="click: $parents[1].setLabel, clickBubble: false, text: name, attr: {\'title\': name}, style: {\'background-color\': colorString}, css: className"\n            ></a>\n            \x3c!-- /ko --\x3e\n          </td>\n          <td>\n            <div data-bind="text: dateModified"></div>\n          </td>\n          <td class="text-right dashboard-table-hover-column">\n            <div data-bind="compose: deleteButton"></div>\n          </td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: hasNoResults">\n        <tr>\n          <td colspan="3">No results</td>\n        </tr>\n      </tbody>\n      <tbody data-bind="visible: !_hasItems()">\n        <tr>\n          <td colspan="3">No saved stories</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/Stories/StoriesTile.html",[],function(){return'<div\n  class="dashboard-grid-tile"\n  data-bind="css: {\'selected\': $data === $parent.selectedItem()}, click: $parent.selectedItem, clickBubble: false, event: {\'dblclick\': $parent.edit}"\n>\n  <div\n    class="dashboard-grid-tile-image-wrapper"\n    data-bind="style: { backgroundImage: \'url(\\\'\' + thumbnail + \'\\\')\' }"\n  ></div>\n  <div class="caption">\n    <h3 data-bind="text: name, attr: {\'title\': name}"></h3>\n  </div>\n  <div class="dashboard-grid-tile-labels" data-bind="foreach: labels">\n    <a\n      class="label label-tag"\n      data-bind="click: $parents[1].setLabel, clickBubble: false, text: name, attr: {\'title\': name}, style: {\'background-color\': colorString}, css: className"\n    ></a>\n  </div>\n  <div class="grid-tile-buttons row">\n    <div class="col-xs-4">\n      <a\n        class="btn btn-flat"\n        data-bind="click: openEditor, clickBubble: false, attr: {href: editorLink}"\n        title="Edit"\n      >\n        <span class="fa fa-pencil"></span>\n      </a>\n    </div>\n\n    <div class="col-xs-4">\n      <button\n        class="btn btn-flat"\n        data-bind="click: copyStory, clickBubble: false, attr: {disabled: copyPending}"\n        title="Duplicate"\n      >\n        <span\n          data-bind="visible: copyPending"\n          class="fa fa-spinner fa-pulse fa-spin"\n        ></span>\n        <span\n          data-bind="hidden: copyPending"\n          class="fa fa-copy no-hover"\n        ></span>\n      </button>\n    </div>\n    <div class="col-xs-4" data-bind="compose: deleteButton"></div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/Stories/StoriesTileDeleteButton.html",[],function(){return'<button\n  class="btn btn-flat"\n  data-container="body"\n  tabindex="0"\n  role="button"\n  data-toggle="popover"\n  data-bind="attr: {\'id\': id, \'data-placement\': placement}, click: onDeleteClick"\n  title="Delete"\n>\n  <span class="fa fa-trash"></span>\n</button>\n'}),define("text!Views/Dashboard/Stories/StoryDetails.html",[],function(){return'<div class="container-fluid details stories-details">\n  <div class="row">\n    <div class="col-xs-12 details-header">\n      <div\n        class="pull-right details-delete"\n        data-bind="css:{\'disabled\': pending}"\n      >\n        <a\n          class="btn btn-flat btn-default"\n          data-bind="compose: deleteButton"\n        ></a>\n      </div>\n      <a\n        class="visible-xs pull-left details-close btn btn-flat btn-default"\n        data-bind="click: unselect"\n      >\n        <div class="fa fa-lg fa-arrow-left"></div>\n        <div class="small">Back</div>\n      </a>\n      <div class="details-title">\n        <span class="h2" data-bind="text: name, attr:{\'title\': name}"></span>\n      </div>\n    </div>\n  </div>\n  <div\n    class="row details-button-row"\n    data-bind="css:{\'disabled\': pending}, visible: hasWebGL"\n  >\n    <div class="col-xs-12">\n      <a data-bind="attr: {href: storiesUrl}" class="btn btn-default btn-flat">\n        Edit story\n      </a>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12">\n      <div\n        class="stories-details-preview"\n        data-bind="style: { backgroundImage: \'url(\\\'\' + thumbnail() + \'\\\')\' }"\n      ></div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12">\n      <div class="tab-content details-info">\n        <div id="infotab" class="tab-pane active">\n          <div\n            data-bind="compose: nameField"\n            data-testid="edit-story-name"\n          ></div>\n          <div>\n            <label class="control-label">Last modified</label>\n            <span\n              class="details-pane-value"\n              data-bind="text: dateModified"\n            ></span>\n          </div>\n          \x3c!-- ko if: areLabelsEnabled--\x3e\n          <div class="form-group">\n            <div class="control-label">\n              Labels\n              \x3c!-- ko compose: labelPicker --\x3e\x3c!-- /ko --\x3e\n            </div>\n            <div class="label-group">\n              \x3c!-- ko foreach: labels --\x3e\n              <a\n                class="label label-tag"\n                data-bind="click: $parent.setLabel, text: name, attr: {\'title\': name}, style: {\'background-color\': colorString}, css: className"\n              ></a>\n              \x3c!-- /ko --\x3e\n            </div>\n          </div>\n          \x3c!-- /ko --\x3e\n          <div\n            data-bind="compose: toggle"\n            data-testid="story-sharing-toggle"\n          ></div>\n          <div class="form-group" data-testid="story-sharing-link">\n            <div\n              class="fa fa-copy fa-lg share-link-copy"\n              title="Copy to clipboard"\n              data-bind="clipboardCopy : { data: link, message: \'Story share link copied to clipboard.\'}, visible: shared()"\n            ></div>\n            <div class="share-link" data-bind="visible: shared()">\n              <input\n                type="text"\n                class="form-control"\n                readonly\n                data-bind="value: link, click: selectShareLink"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/Stories/WelcomeStories.html",[],function(){return'<div class="stories-welcome">\n  <p>\n    It looks like you haven\'t created any Stories yet.\n    \x3c!-- ko if: isPublicInternetAccessEnabled --\x3e\n    <br />\n    See our\n    <a\n      href="https://cesium.com/learn/ion/stories-introduction/"\n      target="_blank"\n      rel="noopener"\n      >tutorial</a\n    >\n    to get started.\n    \x3c!-- /ko --\x3e\n  </p>\n</div>\n'}),define("text!Views/Dashboard/Usage/Usage.html",[],function(){return'<div class="dashboard container-fluid fill-absolute dashboard-usage">\n  <ion-message-of-the-day></ion-message-of-the-day>\n  <div class="dashboard-row-one">\n    <div class="h1 dashboard-title">Usage</div>\n    <div class="dashboard-help">\n      <div data-bind="compose: contextualHelp"></div>\n    </div>\n  </div>\n  <div class="dashboard-usage-heading form-inline">\n    \x3c!-- ko if: tokensEnabled--\x3e\n    <div data-bind="compose:tokenSelect"></div>\n    \x3c!-- /ko --\x3e\n    <div data-bind="compose:rangeSelect"></div>\n    <div class="dashboard-usage-date-range">\n      <div class="form-group">\n        <label for="usageFrom">from</label>\n        <input\n          id="usageFrom"\n          class="form-control"\n          type="text"\n          data-bind="enable: customEnabled, dateTimePicker: from, dateTimePickerOptions: dateTimePickerOptions"\n        />\n      </div>\n      <div class="form-group">\n        <label for="usageTo">to</label>\n        <input\n          id="usageTo"\n          class="form-control"\n          type="text"\n          data-bind="enable: customEnabled, dateTimePicker: to, dateTimePickerOptions: dateTimePickerOptions"\n        />\n      </div>\n    </div>\n  </div>\n  <div class="alert alert-danger" data-bind="visible: error">\n    <span class="fa fa-lg fa-warning"></span>\n    <span id="usageErrorText" data-bind="text: error"></span>\n  </div>\n  <div data-bind="compose: streamingChart"></div>\n  <div data-bind="compose: imageryChart"></div>\n  <div data-bind="compose: googleChart"></div>\n  <div data-bind="compose: geocodeChart"></div>\n\n  <div data-bind="compose:analyzeUsage, visible:analyzeEnabled"></div>\n</div>\n'}),define("text!Views/Dashboard/Usage/UsageChart.html",[],function(){return'<div class="usage-chart" data-bind="attr: { id: id}">\n  <div class="usage-chart-text">\n    <h3 data-bind="text: title"></h3>\n    <div data-bind="visible: !loading()">\n      <h5 data-bind="attr: { id: selectedDateId}, text: selectedDate"></h5>\n      <h5 data-bind="attr: { id: selectedTotalId}, text: selectedTotal"></h5>\n    </div>\n  </div>\n  <div class="usage-chart-chart" data-bind="visible: !loading()">\n    <div data-bind="attr: { id: chartId}"></div>\n  </div>\n  <div class="loading-indicator-overlay" data-bind="visible: loading">\n    <div class="fa fa-3x fa-spinner fa-pulse fa-spin"></div>\n    <div class="loading-message">Loading...</div>\n  </div>\n</div>\n'}),define("text!Views/Components/OnScreenHelp/Announcements/StoriesRelease.html",[],function(){return'<div class="annoucement-panel text-center">\n  <img src="Images/globe3d.png" />\n  <h2>Introducing Cesium Stories!</h2>\n  <p>\n    We\'ve launched Cesium Stories, a new app for building and sharing 3D\n    geospatial presentations and stories on the web.\n  </p>\n  <div>\n    <button\n      type="button"\n      class="btn btn-primary"\n      data-bind="click: goToTutorial"\n    >\n      Check out the tutorial\n    </button>\n    <button type="button" class="btn btn-default" data-bind="click: hide">\n      Skip for now\n    </button>\n  </div>\n</div>\n'}),define("text!Views/Components/OnScreenHelp/VriconPromotion/VriconPromotionSlide.html",[],function(){return'<div id="vricon-panel" class="on-screen-help-content welcome-panel">\n  <h3 data-bind="text: title"></h3>\n  <br />\n  <p>\n    As a member of the U.S. Government, you now have access to Vricon high\n    resolution 3D surface models of 28 locations around the world for a limited\n    time.\n  </p>\n  <div class="row">\n    <div class="col-xs-4">\n      <img src="Images/OnScreenHelp/VriconPromotion/shanghai.jpeg" />\n    </div>\n    <div class="col-xs-4">\n      <img src="Images/OnScreenHelp/VriconPromotion/pyongyang.jpeg" />\n    </div>\n    <div class="col-xs-4">\n      <img src="Images/OnScreenHelp/VriconPromotion/tehran.jpeg" />\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Components/OnScreenHelp/Welcome/WelcomeSlide.html",[],function(){return'<div class="on-screen-help-content welcome-panel">\n  <h3 data-bind="text: title"></h3>\n  <p>How would you describe yourself?</p>\n  <div class="row">\n    <div class="col-xs-6">\n      <div class="welcome-option" data-bind="click: chooseStories">\n        <img src="Images/globe-app.png" />\n        I want to build and share maps on the web without coding.\n      </div>\n    </div>\n    <div class="col-xs-6">\n      <div class="welcome-option" data-bind="click: chooseDeveloper">\n        <img src="Images/cli.png" />\n        I\'m a developer who wants to use Cesium ion in my apps.\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/BimCadAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title">\n      <div class="h3">BIM/CAD Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="form add-data-section">\n      <div class="add-data-row" data-bind="compose: toggles()"></div>\n      <div\n        class="add-data-select-type"\n        data-bind="compose: geometryCompression"\n      ></div>\n      <div data-bind="compose: epsgCode"></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/CaptureAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title">\n      <div class="h3">3D Capture Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="form add-data-section">\n      <div class="add-data-row" data-bind="compose: toggles()"></div>\n      <div\n        class="add-data-select-type"\n        data-bind="compose: geometryCompression"\n      ></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/CityGmlAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title">\n      <div class="h3">CityGML Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="add-data-section gml-form">\n      <div class="add-data-row" data-bind="compose: toggles"></div>\n      <div\n        class="add-data-row base-layer-selector"\n        data-bind="visible: showTerrainSelector"\n      >\n        <div data-bind="compose: terrainAssetSelector"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/ImageryAssetForm.html",[],function(){return"<div></div>\n"}),define("text!Views/Dashboard/AddData/AssetForms/KmlTilesAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title">\n      <div class="h3">KML/COLLADA Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="add-data-section terrain-form">\n      <div class="add-data-row" data-bind="compose: toggles"></div>\n      <div class="control-label">Reference terrain</div>\n      <div class="row add-data-row base-layer-selector">\n        <div class="col-xs-12" data-bind="compose: terrainAssetSelector"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/ModelAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title">\n      <div class="h3">Model Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="add-data-section model-form">\n      <div class="add-data-row" data-bind="compose: toggles"></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/ModelTilesAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title">\n      <div class="h3">3D Model Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="form add-data-section">\n      <div class="add-data-row" data-bind="compose: toggles"></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/PointCloudAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title">\n      <div class="h3">Point Cloud Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="form add-data-section">\n      <div class="add-data-row" data-bind="compose: toggles"></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/ReconstructAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="h6">Technology Preview</div>\n    <div class="add-data-title reconstruction-title">\n      <div class="h3">Reconstruct models from photos</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="form add-data-section reconstruction-form">\n      <div class="row add-data-row">\n        <div class="col-xs-12" data-bind="compose: useGpsInfo"></div>\n      </div>\n      <div class="row add-data-row">\n        <div class="col-xs-12" data-bind="compose: outputQualityField"></div>\n      </div>\n      <div class="add-data-row" data-bind="compose: toggles"></div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/TerrainAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title terrain-title">\n      <div class="h3">Terrain Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="form add-data-section terrain-form">\n      <div class="control-label">Base Terrain</div>\n      <div class="row add-data-row base-layer-selector">\n        <div class="col-xs-12" data-bind="compose: terrainAssetSelector"></div>\n      </div>\n      <div class="row add-data-row">\n        <div class="col-xs-12 col-sm-6" data-bind="compose: unitField"></div>\n        <div\n          class="col-xs-12 col-sm-6"\n          data-bind="compose: referenceField"\n        ></div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/TerrainDatabaseAssetForm.html",[],function(){return"<div></div>\n"}),define("text!Views/Dashboard/AddData/AssetForms/TilesAssetForm.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-body">\n    <div class="add-data-title">\n      <div class="h3">3D Tiles Options</div>\n      <div class="add-data-help" data-bind="compose: contextualHelp"></div>\n    </div>\n    <div class="add-data-section terrain-form">\n      <div class="row add-data-row main-json-selector">\n        <div class="col-xs-12" data-bind="compose: mainJsonSelector"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!Views/Dashboard/AddData/AssetForms/VectorAssetForm.html",[],function(){return"<div></div>\n"})}();